<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>リファレンスが行うことは何ですか?</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.references.whatare.html">≪ リファレンスとは?</a></li>
      <li style="float: right;"><a href="language.references.arent.html">リファレンスが行わないこと ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.references.html">リファレンスの説明</a></li>
    <li>リファレンスが行うことは何ですか?</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.references.whatdo" class="sect1">
   <h2 class="title">リファレンスが行うことは何ですか?</h2>
   <p class="para">
    リファレンスを使う基本操作には三通りあります。
    <a href="language.references.whatdo.html#language.references.whatdo.assign" class="link">リファレンスの代入</a>、
    <a href="language.references.whatdo.html#language.references.whatdo.pass" class="link">リファレンス渡し</a>、
    そして <a href="language.references.whatdo.html#language.references.whatdo.return" class="link">リファレンスを返す</a>ことです。
    この節では、これらの操作に関する基本的な解説をします。
    そして、詳細な説明へのリンクを示します。
   </p>
   <div class="sect2" id="language.references.whatdo.assign">
    <h3 class="title">リファレンスの代入</h3>
    <p class="para">
     まず最初の操作です。PHP のリファレンスを使うと、
     ふたつの変数が同じ内容を指すようにできます。
     次の例を考えてみましょう。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     この場合、<var class="varname"><var class="varname">$a</var></var> と <var class="varname"><var class="varname">$b</var></var>
     は同じ内容を指します。
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       ここで、<var class="varname"><var class="varname">$a</var></var> と <var class="varname"><var class="varname">$b</var></var> は完全に
       同じで、<var class="varname"><var class="varname">$a</var></var> が <var class="varname"><var class="varname">$b</var></var> を
       指しているわけではなく、その逆でもありません。<var class="varname"><var class="varname">$a</var></var> と
       <var class="varname"><var class="varname">$b</var></var> は同じ場所を指しているのです。
      </p>
     </p></blockquote>
    </p>
    <blockquote class="note"><p><strong class="note">注意</strong>: 
     <p class="para">
      未定義の変数のリファレンスに対して代入したり
      渡したり返したりすると、そこで変数が作成されます。
      <div class="example" id="example-297">
       <p><strong>例1 未定義の変数のリファレンスの使用</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)&nbsp;{&nbsp;}<br /><br /></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;が作成され、null&nbsp;が代入されます<br /><br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #DD0000">'b'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_key_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;bool(true)<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">StdClass</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">property_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'d'</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;bool(true)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </p></blockquote>
    <p class="para">
     リファレンスを返す関数や <em>new</em> 演算子でも
     同じ構文が使用可能です (PHP 4.0.4 以降 PHP 5.0.0 未満まで)。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">find_var</span><span style="color: #007700">(</span><span style="color: #0000BB">$bar</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     PHP 5 以降、<a href="language.oop5.basic.html#language.oop5.basic.new" class="link">new</a>
     は自動的にリファレンスを返すようになりました。そのため、この場面で
     <em>=&amp;</em> を使用することは非推奨となりました。
     PHP 5.3 以降では <strong><code>E_DEPRECATED</code></strong>、それより前のバージョンでは
     <strong><code>E_STRICT</code></strong> レベルのメッセージが表示されます
     (技術的な話をすると、PHP 5 以降では、リソース型のようなオブジェクト変数は
     実際のデータへの単なるポインタとなりました。つまり、
     オブジェクトのリファレンスはこれまでのような意味での &quot;リファレンス&quot;
     つまりエイリアスとは異なります。
     詳細な情報は <a href="language.oop5.references.html" class="link">
     オブジェクトと参照</a> にあります)。
    </p>
    <div class="warning"><strong class="warning">警告</strong>
     <p class="para">
      関数の内部で <em>global</em> 宣言された変数にリファレンスを
      代入すると、そのリファレンスは関数の内部でのみ参照可能となります。
      これを避けるには、<var class="varname"><var class="varname"><a href="reserved.variables.globals.html" class="classname">$GLOBALS</a></var></var> 配列を使用します。
      <div class="example" id="example-298">
       <p><strong>例2 関数内でのグローバル変数の参照</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$var1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Example&nbsp;variable"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$var2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">$use_globals</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$var2</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$use_globals</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$var2&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;関数の内部でのみ参照可能<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #DD0000">"var2"</span><span style="color: #007700">]&nbsp;=&amp;&nbsp;</span><span style="color: #0000BB">$var1</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;関数の外部でも参照可能<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}<br /><br /></span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"var2&nbsp;の値は&nbsp;'</span><span style="color: #0000BB">$var2</span><span style="color: #DD0000">'\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;var2&nbsp;の値は&nbsp;''<br /></span><span style="color: #0000BB">global_references</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"var2&nbsp;の値は&nbsp;'</span><span style="color: #0000BB">$var2</span><span style="color: #DD0000">'\n"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;var2&nbsp;の値は&nbsp;'Example&nbsp;variable'<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      <em>global $var;</em> は、<em>$var
      =&amp; $GLOBALS[&#039;var&#039;];</em> の短縮版だと考えてください。
      これにより、他のリファレンスを <em>$var</em> に代入し、
      ローカル変数のリファレンスのみを変更します。
     </p>
    </div>
    <blockquote class="note"><p><strong class="note">注意</strong>: 
     <p class="para">
      <a href="control-structures.foreach.html" class="link">foreach</a> ステートメントの内部でリファレンス変数に値を代入すると、リファレンスも変更されます。
      <div class="example" id="example-299">
       <p><strong>例3 リファレンスと foreach ステートメント</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ref&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$ref</span><span style="color: #007700">;<br />foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;何かを実行します<br /></span><span style="color: #007700">}<br />echo&nbsp;</span><span style="color: #0000BB">$ref</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;3&nbsp;-&nbsp;配列の最後の要素<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </p></blockquote>
    <p class="para">
     厳密にリファレンスでの代入をしなくても、
     <a href="function.array.html" class="link"><em>array()</em></a>
     で作成した式は、配列の要素の先頭に <em>&amp;</em>
     を追加したのと同じような動作をします。たとえば、次のようになります。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(&amp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;&amp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">],&nbsp;&amp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]++;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]++;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]++;<br /></span><span style="color: #FF8000">/*&nbsp;$a&nbsp;==&nbsp;2,&nbsp;$b&nbsp;==&nbsp;array(3,&nbsp;4);&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     しかし、配列の内部のリファレンスは危険もあるということに気をつけましょう。
     通常の (リファレンスではない) 代入の右辺にリファレンスを使っても
     左辺はリファレンスには変わりませんが、配列の内部のリファレンスは通常の代入のままとなります。
     これは、関数をコールする際に配列をリファレンスで渡すときも同じです。
     たとえば、次のようになります。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;スカラー変数への代入&nbsp;*/<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$c&nbsp;はリファレンスではないので&nbsp;$a&nbsp;や&nbsp;$b&nbsp;の値は変わりません<br /><br />/*&nbsp;配列変数への代入&nbsp;*/<br /></span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&amp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;および&nbsp;$arr[0]&nbsp;は同じリファレンスセットになります<br /></span><span style="color: #0000BB">$arr2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;これは、リファレンス代入ではありません!<br /></span><span style="color: #0000BB">$arr2</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]++;<br /></span><span style="color: #FF8000">/*&nbsp;$a&nbsp;==&nbsp;2,&nbsp;$arr&nbsp;==&nbsp;array(2)&nbsp;*/<br />/*&nbsp;$arr&nbsp;の内容は、たとえリファレンスでなくても変わります!&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     言い換えると、配列内のリファレンスの挙動はその要素ごとに決まるということです。
     個々の要素のリファレンスに関する動きは、
     配列コンテナがリファレンスであるかどうかとは独立しています。
    </p>
   </div>
   <div class="sect2" id="language.references.whatdo.pass">
    <h3 class="title">リファレンス渡し</h3>
    <p class="para">
     リファレンスの第 2 の使用法は、変数のリファレンス渡しです。この場合、
     関数でローカル変数が作成され、コール側の変数が、それと同じ内容への
     リファレンスとなります。例を示します。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">)&nbsp;<br />{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$var</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">=</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">foo</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     この結果、<var class="varname"><var class="varname">$a</var></var> は 6 となります。これは、関数
     <var class="varname"><var class="varname">foo</var></var> の中では、変数 <var class="varname"><var class="varname">$var</var></var> は
     <var class="varname"><var class="varname">$a</var></var> と同じ内容を指しているためです。
     より詳細な説明は、
     <a href="language.references.pass.html" class="link">リファレンス渡し</a>
     を参照ください。
    </p>
   </div>
   <div class="sect2" id="language.references.whatdo.return">
    <h3 class="title">リファレンスによる返り値</h3>
    <p class="para">
     リファレンスの第 3 の使用法は、
     <a href="language.references.return.html" class="link">リファレンスによる返り値
     </a>です。
    </p>
   </div>
  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113092""></a>
  <div class="note">
   <strong class="user">admin at torntech dot com</strong>
   <a href="#113092" class="date">29-Aug-2013 04:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that has not been discussed so far is reference of a reference.<br />
I needed a quick and dirty method of aliasing incorrect naming until a proper rewrite could be done.<br />
Hope this saves someone else the time of testing since it was not covered in the Does/Are/Are Not pages.<br />
Far from best practice, but it worked.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
</span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$a</span><span class="keyword">;<br />
</span><span class="default">$a </span><span class="keyword">=&amp; </span><span class="default">$b</span><span class="keyword">;<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />
echo </span><span class="default">$a </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">;<br />
</span><span class="comment">//ouputs: 5,5<br />
<br />
</span><span class="keyword">echo </span><span class="string">' | '</span><span class="keyword">;<br />
<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">6</span><span class="keyword">;<br />
echo </span><span class="default">$a </span><span class="keyword">. </span><span class="string">',' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">;<br />
</span><span class="comment">//outputs: 6,6<br />
<br />
</span><span class="keyword">echo </span><span class="string">' | '</span><span class="keyword">;<br />
unset( </span><span class="default">$a </span><span class="keyword">);<br />
echo </span><span class="default">$a </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$b</span><span class="keyword">;<br />
<br />
</span><span class="comment">//outputs: , 6 <br />
<br />
</span><span class="keyword">class </span><span class="default">Product </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$productid</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">( </span><span class="default">$id </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">productid</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">productid </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getProductId</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">productid</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
echo </span><span class="string">' | '</span><span class="keyword">;<br />
<br />
</span><span class="default">$Product </span><span class="keyword">= new </span><span class="default">Product</span><span class="keyword">( </span><span class="default">1 </span><span class="keyword">);<br />
echo </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">getProductId</span><span class="keyword">();<br />
</span><span class="comment">//outputs 1, 1<br />
</span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
echo </span><span class="string">' | '</span><span class="keyword">;<br />
echo </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">getProductId</span><span class="keyword">();<br />
</span><span class="comment">//outputs 2, 2<br />
</span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
echo </span><span class="string">' | '</span><span class="keyword">;<br />
echo </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">. </span><span class="string">', ' </span><span class="keyword">. </span><span class="default">$Product</span><span class="keyword">-&gt;</span><span class="default">getProductId</span><span class="keyword">();<br />
</span><span class="comment">//outouts ,</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112321""></a>
  <div class="note">
   <strong class="user">Oddant</strong>
   <a href="#112321" class="date">01-Jun-2013 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
About the example on array references.<br />
I think this should be written in the array chapter as well.<br />
Indeed if you are new to programming language in some way, you should beware that arrays are pointers to a vector of Byte(s).<br />
<br />
<span class="default">&lt;?php $arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>$arr here contains a reference to which the array is located.<br />
Writing :<br />
<span class="default">&lt;?php </span><span class="keyword">echo </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]; </span><span class="default">?&gt;<br />
</span>dereferences the array to access its very first element.<br />
<br />
Now something that you should also be aware of&nbsp; (even you are not new to programming languages) is that PHP use references to contains the different values of an array. And that makes sense because the type of the elements of a PHP array can be different.<br />
<br />
Consider the following example :<br />
<br />
<span class="default">&lt;?php<br />
<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="string">'test'</span><span class="keyword">);<br />
<br />
</span><span class="default">$point_to_test </span><span class="keyword">=&amp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
<br />
</span><span class="default">$new_ref </span><span class="keyword">= </span><span class="string">'new'</span><span class="keyword">;<br />
<br />
</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&amp; </span><span class="default">$new_ref</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; </span><span class="comment">// echo 'new';<br />
</span><span class="keyword">echo </span><span class="default">$point_to_test</span><span class="keyword">; </span><span class="comment">// echo 'test' ! (still pointed somewhere in the memory)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111409""></a>
  <div class="note">
   <strong class="user">butshuti at smartrwanda dot org</strong>
   <a href="#111409" class="date">18-Feb-2013 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This appears to be the hidden behavior: When a class function has the same name as the class, it seems to be implicitly called when an object of the class is created.<br />
For instance, you may take a look at the naming of the function "reftest()": it is in the class "reftest". The behavior can be tested as follows:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">reftest<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest1</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest2</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo </span><span class="string">"REFTEST() called here!\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$reference </span><span class="keyword">= new </span><span class="default">reftest</span><span class="keyword">();<br />
</span><span class="comment">/*You must notice the above will also implicitly call reference-&gt;reftest()*/<br />
<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest1</span><span class="keyword">();<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest2</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//Echoes 2, not 3 as previously noticed.<br />
</span><span class="keyword">echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="default">?&gt;<br />
</span><br />
The above outputs:<br />
<br />
REFTEST() called here!<br />
2<br />
2<br />
<br />
Notice that reftest() appears to be called (though no explicit call to it was made)!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104813""></a>
  <div class="note">
   <strong class="user">nay at woodcraftsrus dot com</strong>
   <a href="#104813" class="date">08-Jul-2011 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in PHP you don't really need pointer anymore if you want to share an&nbsp; object across your program
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">foo</span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$name</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__toString</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return&nbsp; </span><span class="string">'my name is "'</span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">.</span><span class="string">'" and I live in "' </span><span class="keyword">. </span><span class="default">__CLASS__ </span><span class="keyword">. </span><span class="string">'".' </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">setName</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="default">$str</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">MasterOne</span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$foo</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">$f</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__toString</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'Master: ' </span><span class="keyword">. </span><span class="default">__CLASS__ </span><span class="keyword">. </span><span class="string">' | foo: ' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">setFooName</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">MasterTwo</span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; protected </span><span class="default">$foo</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="default">$f</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__toString</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'Master: ' </span><span class="keyword">. </span><span class="default">__CLASS__ </span><span class="keyword">. </span><span class="string">' | foo: ' </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">setFooName</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">(</span><span class="string">'bar'</span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Only Created \$bar and printing \$bar\n"</span><span class="keyword">);
<br />
print( </span><span class="default">$bar </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Now \$baz is referenced to \$bar and printing \$bar and \$baz\n"</span><span class="keyword">);
<br />
</span><span class="default">$baz </span><span class="keyword">=&amp; </span><span class="default">$bar</span><span class="keyword">;
<br />
print( </span><span class="default">$bar </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Now Creating MasterOne and Two and passing \$bar to both constructors\n"</span><span class="keyword">);
<br />
</span><span class="default">$m1 </span><span class="keyword">= new </span><span class="default">MasterOne</span><span class="keyword">( </span><span class="default">$bar </span><span class="keyword">);
<br />
</span><span class="default">$m2 </span><span class="keyword">= new </span><span class="default">MasterTwo</span><span class="keyword">( </span><span class="default">$bar </span><span class="keyword">);
<br />
print( </span><span class="default">$m1 </span><span class="keyword">);
<br />
print( </span><span class="default">$m2 </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Now changing value of \$bar and printing \$bar and \$baz\n"</span><span class="keyword">);
<br />
</span><span class="default">$bar</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">(</span><span class="string">'baz'</span><span class="keyword">);
<br />
print( </span><span class="default">$bar </span><span class="keyword">);
<br />
print( </span><span class="default">$baz </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Now printing again MasterOne and Two\n"</span><span class="keyword">);
<br />
print( </span><span class="default">$m1 </span><span class="keyword">);
<br />
print( </span><span class="default">$m2 </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"\n"</span><span class="keyword">);
<br />
print(</span><span class="string">"Now changing MasterTwo's foo name and printing again MasterOne and Two\n"</span><span class="keyword">);
<br />
</span><span class="default">$m2</span><span class="keyword">-&gt;</span><span class="default">setFooName</span><span class="keyword">( </span><span class="string">'MasterTwo\'s Foo' </span><span class="keyword">);
<br />
print( </span><span class="default">$m1 </span><span class="keyword">);
<br />
print( </span><span class="default">$m2 </span><span class="keyword">);
<br />

<br />
print(</span><span class="string">"Also printing \$bar and \$baz\n"</span><span class="keyword">);
<br />
print( </span><span class="default">$bar </span><span class="keyword">);
<br />
print( </span><span class="default">$baz </span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102123""></a>
  <div class="note">
   <strong class="user">elrah [] polyptych [dot] com</strong>
   <a href="#102123" class="date">28-Jan-2011 07:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that references can have side-effects.&nbsp; Below are two examples.&nbsp; Both are simply copying one array to another.&nbsp; In the second example, a reference is made to a value in the first array before the copy.&nbsp; In the first example the value at index 0 points to two separate memory locations. In the second example, the value at index 0 points to the same memory location. <br />
<br />
I won't say this is a bug, because I don't know what the designed behavior of PHP is, but I don't think ANY developers would expect this behavior, so look out.<br />
<br />
An example of where this could cause problems is if you do an array copy in a script and expect on type of behavior, but then later add a reference to a value in the array earlier in the script, and then find that the array copy behavior has unexpectedly changed.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Example one<br />
</span><span class="default">$arr1 </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="string">"\nbefore:\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr1[0] == </span><span class="keyword">{</span><span class="default">$arr1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">$arr2 </span><span class="keyword">= </span><span class="default">$arr1</span><span class="keyword">;<br />
</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]++;<br />
echo </span><span class="string">"\nafter:\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr1[0] == </span><span class="keyword">{</span><span class="default">$arr1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr2[0] == </span><span class="keyword">{</span><span class="default">$arr2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Example two<br />
</span><span class="default">$arr3 </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">=&amp; </span><span class="default">$arr3</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
echo </span><span class="string">"\nbefore:\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$a == </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr3[0] == </span><span class="keyword">{</span><span class="default">$arr3</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">$arr4 </span><span class="keyword">= </span><span class="default">$arr3</span><span class="keyword">;<br />
</span><span class="default">$arr4</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]++;<br />
echo </span><span class="string">"\nafter:\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$a == </span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr3[0] == </span><span class="keyword">{</span><span class="default">$arr3</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"\$arr4[0] == </span><span class="keyword">{</span><span class="default">$arr4</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]}</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101750""></a>
  <div class="note">
   <strong class="user">akinaslan at gmail dot com</strong>
   <a href="#101750" class="date">09-Jan-2011 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In this example class name is different from its first function and however there is no construction function. In the end as you guess "a" and "c" are equal. So if there is no construction function at same time class and its first function names are the same, "a" and "c" doesn't equal forever. In my opinion php doesn't seek any function for the construction as long as their names differ from each others.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">reftest_new
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest2</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$reference </span><span class="keyword">= new </span><span class="default">reftest_new</span><span class="keyword">();
<br />

<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest</span><span class="keyword">();
<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest2</span><span class="keyword">();
<br />

<br />
echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">; </span><span class="comment">//Echoes 2.
<br />
</span><span class="keyword">echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">; </span><span class="comment">//Echoes 2.
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95692""></a>
  <div class="note">
   <strong class="user">Amaroq</strong>
   <a href="#95692" class="date">16-Jan-2010 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think a correction to my last post is in order.<br />
<br />
When there is a constructor, the strange behavior mentioned in my last post doesn't occur. My guess is that php was treating reftest() as a constructor (maybe because it was the first function?) and running it upon instantiation.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">reftest<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest2</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$reference </span><span class="keyword">= new </span><span class="default">reftest</span><span class="keyword">();<br />
<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest</span><span class="keyword">();<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest2</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="keyword">echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95681""></a>
  <div class="note">
   <strong class="user">Amaroq</strong>
   <a href="#95681" class="date">15-Jan-2010 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using references in a class, you can reference $this-&gt; variables.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">reftest<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest2</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$reference </span><span class="keyword">= new </span><span class="default">reftest</span><span class="keyword">();<br />
<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest</span><span class="keyword">();<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest2</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="keyword">echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="default">?&gt;<br />
</span><br />
However, this doesn't appear to be completely trustworthy. In some cases, it can act strangely.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">reftest<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">reftest2</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$reference </span><span class="keyword">= new </span><span class="default">reftest</span><span class="keyword">();<br />
<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest</span><span class="keyword">();<br />
</span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">reftest2</span><span class="keyword">();<br />
<br />
echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">; </span><span class="comment">//Echoes 3.<br />
</span><span class="keyword">echo </span><span class="default">$reference</span><span class="keyword">-&gt;</span><span class="default">c</span><span class="keyword">; </span><span class="comment">//Echoes 2.<br />
</span><span class="default">?&gt;<br />
</span><br />
In this second code block, I've changed reftest() so that $b increments instead of just gets changed to 2. Somehow, it winds up equaling 3 instead of 2 as it should.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93762""></a>
  <div class="note">
   <strong class="user">strata_ranger at hotmail dot com</strong>
   <a href="#93762" class="date">27-Sep-2009 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An interesting if offbeat use for references:&nbsp; Creating an array with an arbitrary number of dimensions.<br />
<br />
For example, a function that takes the result set from a database and produces a multidimensional array keyed according to one (or more) columns, which might be useful if you want your result set to be accessible in a hierarchial manner, or even if you just want your results keyed by the values of each row's primary/unique key fields.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_key_by</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">, </span><span class="default">$dupl </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
</span><span class="comment">/* <br />
&nbsp;* $data&nbsp; - Multidimensional array to be keyed<br />
&nbsp;* $keys&nbsp; - List containing the index/key(s) to use.<br />
&nbsp;* $dupl&nbsp; - How to handle rows containing the same values.&nbsp; TRUE stores it as an Array, FALSE overwrites the previous row.<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;* Returns a multidimensional array indexed by $keys, or NULL if error.<br />
&nbsp;* The number of dimensions is equal to the number of $keys provided (+1 if $dupl=TRUE).<br />
&nbsp;*/&nbsp;&nbsp; <br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Sanity check<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Allow passing single key as a scalar<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">) or </span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">)) </span><span class="default">$keys </span><span class="keyword">= Array(</span><span class="default">$keys</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; elseif (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Our output array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= Array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Loop through each row of our input $data<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$cx </span><span class="keyword">=&gt; </span><span class="default">$row</span><span class="keyword">) if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Loop through our $keys<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$last</span><span class="keyword">)) </span><span class="comment">// First $key only<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">])) </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = Array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last </span><span class="keyword">=&amp; </span><span class="default">$out</span><span class="keyword">; </span><span class="comment">// Bind $last to $out<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="comment">// Second and subsequent $key....<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$last</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">])) </span><span class="default">$last</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">] = Array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Bind $last to one dimension 'deeper'.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // First lap: was &amp;$out, now &amp;$out[...]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Second lap: was &amp;$out[...], now &amp;$out[...][...]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Third lap:&nbsp; was &amp;$out[...][...], now &amp;$out[...][...][...]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // (etc.)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last </span><span class="keyword">=&amp; </span><span class="default">$last</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$last</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// At this point, copy the $row into our output array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$dupl</span><span class="keyword">) </span><span class="default">$last</span><span class="keyword">[</span><span class="default">$cx</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">; </span><span class="comment">// Keep previous<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">; </span><span class="comment">// Overwrite previous<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset(</span><span class="default">$last</span><span class="keyword">); </span><span class="comment">// Break the reference<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Done<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// A sample result set to test the function with<br />
</span><span class="default">$data </span><span class="keyword">= Array(Array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'row 1'</span><span class="keyword">, </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'foo_a'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'bar_a'</span><span class="keyword">, </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'baz_a'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'row 2'</span><span class="keyword">, </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'foo_a'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'bar_a'</span><span class="keyword">, </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'baz_b'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'row 3'</span><span class="keyword">, </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'foo_a'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'bar_b'</span><span class="keyword">, </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'baz_c'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Array(</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'row 4'</span><span class="keyword">, </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'foo_b'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'bar_c'</span><span class="keyword">, </span><span class="string">'baz' </span><span class="keyword">=&gt; </span><span class="string">'baz_d'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ); <br />
<br />
</span><span class="comment">// First, let's key it by one column (result: two-dimensional array)<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_key_by</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'baz'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Or, key it by two columns (result: 3-dimensional array)<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_key_by</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, Array(</span><span class="string">'baz'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">)));<br />
<br />
</span><span class="comment">// We could also key it by three columns (result: 4-dimensional array)<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_key_by</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, Array(</span><span class="string">'baz'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">, </span><span class="string">'foo'</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83732""></a>
  <div class="note">
   <strong class="user">dnhuff at acm dot org</strong>
   <a href="#83732" class="date">09-Jun-2008 08:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reply to Drewseph using foo($a = 'set'); where $a is a reference formal parameter.<br />
<br />
$a = 'set' is an expression. Expressions cannot be passed by reference, don't you just hate that, I do. If you turn on error reporting for E_NOTICE, you will be told about it.<br />
<br />
Resolution: $a = 'set'; foo($a); this does what you want.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83521""></a>
  <div class="note">
   <strong class="user">Drewseph</strong>
   <a href="#83521" class="date">30-May-2008 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you set a variable before passing it to a function that takes a variable as a reference, it is much harder (if not impossible) to edit the variable within the function.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(&amp;</span><span class="default">$bar</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bar </span><span class="keyword">= </span><span class="string">"hello\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">foo</span><span class="keyword">(</span><span class="default">$unset</span><span class="keyword">);<br />
echo(</span><span class="default">$unset</span><span class="keyword">);<br />
</span><span class="default">foo</span><span class="keyword">(</span><span class="default">$set </span><span class="keyword">= </span><span class="string">"set\n"</span><span class="keyword">);<br />
echo(</span><span class="default">$set</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
hello<br />
set<br />
<br />
It baffles me, but there you have it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82206""></a>
  <div class="note">
   <strong class="user">Amaroq</strong>
   <a href="#82206" class="date">01-Apr-2008 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The order in which you reference your variables matters.<br />
<br />
<span class="default">&lt;?php<br />
$a1 </span><span class="keyword">= </span><span class="string">"One"</span><span class="keyword">;<br />
</span><span class="default">$a2 </span><span class="keyword">= </span><span class="string">"Two"</span><span class="keyword">;<br />
</span><span class="default">$b1 </span><span class="keyword">= </span><span class="string">"Three"</span><span class="keyword">;<br />
</span><span class="default">$b2 </span><span class="keyword">= </span><span class="string">"Four"</span><span class="keyword">;<br />
<br />
</span><span class="default">$b1 </span><span class="keyword">=&amp; </span><span class="default">$a1</span><span class="keyword">;<br />
</span><span class="default">$a2 </span><span class="keyword">=&amp; </span><span class="default">$b2</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$a1</span><span class="keyword">; </span><span class="comment">//Echoes "One"<br />
</span><span class="keyword">echo </span><span class="default">$b1</span><span class="keyword">; </span><span class="comment">//Echoes "One"<br />
<br />
</span><span class="keyword">echo </span><span class="default">$a2</span><span class="keyword">; </span><span class="comment">//Echoes "Four"<br />
</span><span class="keyword">echo </span><span class="default">$b2</span><span class="keyword">; </span><span class="comment">//Echoes "Four"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78614""></a>
  <div class="note">
   <strong class="user">charles at org oo dot com</strong>
   <a href="#78614" class="date">19-Oct-2007 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
points to post below me. <br />
When you're doing the references with loops, you need to unset($var). <br />
<br />
for example <br />
<span class="default">&lt;?php <br />
</span><span class="keyword">foreach(</span><span class="default">$var </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
...<br />
}<br />
unset(</span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78375""></a>
  <div class="note">
   <strong class="user">Hlavac</strong>
   <a href="#78375" class="date">09-Oct-2007 11:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Watch out for this:<br />
<br />
foreach ($somearray as &amp;$i) {<br />
&nbsp; // update some $i...<br />
}<br />
...<br />
foreach ($somearray as $i) {<br />
&nbsp; // last element of $somearray is mysteriously overwritten!<br />
}<br />
<br />
Problem is $i contians reference to last element of $somearray after the first foreach, and the second foreach happily assigns to it!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76227""></a>
  <div class="note">
   <strong class="user">dovbysh at gmail dot com</strong>
   <a href="#76227" class="date">06-Jul-2007 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Solution to post "php at hood dot id dot au 04-Mar-2007 10:56":<br />
<br />
<span class="default">&lt;?php<br />
$a1 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$v</span><span class="keyword">)<br />
</span><span class="default">$v </span><span class="keyword">= </span><span class="string">'x'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$a1</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">]; </span><span class="comment">// will echo x<br />
<br />
</span><span class="keyword">unset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'v'</span><span class="keyword">]);<br />
<br />
foreach (</span><span class="default">$a2 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)<br />
{}<br />
<br />
echo </span><span class="default">$a1</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">]; </span><span class="comment">// will echo x<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75629""></a>
  <div class="note">
   <strong class="user">amp at gmx dot info</strong>
   <a href="#75629" class="date">08-Jun-2007 07:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something that might not be obvious on the first look:<br />
If you want to cycle through an array with references, you must not use a simple value assigning foreach control structure. You have to use an extended key-value assigning foreach or a for control structure.<br />
<br />
A simple value assigning foreach control structure produces a copy of an object or value. The following code<br />
<br />
$v1=0;<br />
$arrV=array(&amp;$v1,&amp;$v1);<br />
foreach ($arrV as $v)<br />
{<br />
&nbsp; $v1++;<br />
&nbsp; echo $v."\n";<br />
}<br />
<br />
yields<br />
<br />
0<br />
1<br />
<br />
which means $v in foreach is not a reference to $v1 but a copy of the object the actual element in the array was referencing to.<br />
<br />
The codes<br />
<br />
$v1=0;<br />
$arrV=array(&amp;$v1,&amp;$v1);<br />
foreach ($arrV as $k=&gt;$v)<br />
{<br />
&nbsp;&nbsp;&nbsp; $v1++;<br />
&nbsp;&nbsp;&nbsp; echo $arrV[$k]."\n";<br />
}<br />
<br />
and<br />
<br />
$v1=0;<br />
$arrV=array(&amp;$v1,&amp;$v1);<br />
$c=count($arrV);<br />
for ($i=0; $i&lt;$c;$i++)<br />
{<br />
&nbsp;&nbsp;&nbsp; $v1++;<br />
&nbsp;&nbsp;&nbsp; echo $arrV[$i]."\n";<br />
}<br />
<br />
both yield<br />
<br />
1<br />
2<br />
<br />
and therefor cycle through the original objects (both $v1), which is, in terms of our aim, what we have been looking for.<br />
<br />
(tested with php 4.1.3)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74278""></a>
  <div class="note">
   <strong class="user">firespade at gmail dot com</strong>
   <a href="#74278" class="date">03-Apr-2007 04:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a good little example of referencing. It was the best way for me to understand, hopefully it can help others.<br />
<br />
$b = 2;<br />
$a =&amp; $b;<br />
$c = $a;<br />
echo $c;<br />
<br />
// Then... $c = 2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73631""></a>
  <div class="note">
   <strong class="user">php at hood dot id dot au</strong>
   <a href="#73631" class="date">05-Mar-2007 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I discovered something today using references in a foreach<br />
<br />
<span class="default">&lt;?php<br />
$a1 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">);<br />
<br />
foreach (</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$v</span><span class="keyword">)<br />
</span><span class="default">$v </span><span class="keyword">= </span><span class="string">'x'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">$a1</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">]; </span><span class="comment">// will echo x<br />
<br />
</span><span class="keyword">foreach (</span><span class="default">$a2 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)<br />
{}<br />
<br />
echo </span><span class="default">$a1</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">]; </span><span class="comment">// will echo b (!)<br />
</span><span class="default">?&gt;<br />
</span><br />
After reading the manual this looks like it is meant to happen. But it confused me for a few days!<br />
<br />
(The solution I used was to turn the second foreach into a reference too)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51964""></a>
  <div class="note">
   <strong class="user">ladoo at gmx dot at</strong>
   <a href="#51964" class="date">17-Apr-2005 11:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I ran into something when using an expanded version of the example of pbaltz at NO_SPAM dot cs dot NO_SPAM dot wisc dot edu below.<br />
This could be somewhat confusing although it is perfectly clear if you have read the manual carfully. It makes the fact that references always point to the content of a variable perfectly clear (at least to me).<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">=&amp; </span><span class="default">$a</span><span class="keyword">; </span><span class="comment">// $b points to 1<br />
</span><span class="default">$a </span><span class="keyword">=&amp; </span><span class="default">$c</span><span class="keyword">; </span><span class="comment">// $a points now to 2, but $b still to 1;<br />
</span><span class="keyword">echo </span><span class="default">$a</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">;<br />
</span><span class="comment">// Output: 2 1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47416""></a>
  <div class="note">
   <strong class="user">php.devel at homelinkcs dot com</strong>
   <a href="#47416" class="date">16-Nov-2004 12:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reply to lars at riisgaardribe dot dk, <br />
<br />
When a variable is copied, a reference is used internally until the copy is modified.&nbsp; Therefore you shouldn't use references at all in your situation as it doesn't save any memory usage and increases the chance of logic bugs, as you discoved.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31134""></a>
  <div class="note">
   <strong class="user">joachim at lous dot org</strong>
   <a href="#31134" class="date">11-Apr-2003 12:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So to make a by-reference setter function, you need to specify reference semantics _both_ in the parameter list _and_ the assignment, like this:<br />
<br />
class foo{<br />
&nbsp;&nbsp; var $bar;<br />
&nbsp;&nbsp; function setBar(&amp;$newBar){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $this-&gt;bar =&amp; newBar;<br />
&nbsp;&nbsp; }<br />
}<br />
<br />
Forget any of the two '&amp;'s, and $foo-&gt;bar will end up being a copy after the call to setBar.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
