<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>配列の内部ポインタを最終要素にセットする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.each.html">≪ each</a></li>
      <li style="float: right;"><a href="function.extract.html">extract ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">配列 関数</a></li>
    <li>配列の内部ポインタを最終要素にセットする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.end" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">end</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">end</span> &mdash; <span class="dc-title">配列の内部ポインタを最終要素にセットする</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.end-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>end</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>end()</strong></span> は <code class="parameter">array</code>
   の内部ポインタを最後の要素まで進め、その値を返します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.end-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       配列。この配列は参照渡しとなります。関数内で配列の中身を変更するからです。
       つまり、ここには配列そのものを渡さなければならず、
       配列を返す関数を指定することはできません。
       参照渡しできるのは、実際の変数だけだからです。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.end-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   最後の要素の値、あるいは空の配列の場合は <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.end-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5122">
    <p><strong>例1 <span class="function"><strong>end()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'リンゴ'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'バナナ'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'クランベリー'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">end</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;クランベリー<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.end-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.current.html" class="function" rel="rdfs-seeAlso">current()</a> - 配列内の現在の要素を返す</span></li>
    <li class="member"><span class="function"><a href="function.each.html" class="function" rel="rdfs-seeAlso">each()</a> - 配列から現在のキーと値のペアを返して、カーソルを進める</span></li>
    <li class="member"><span class="function"><a href="function.prev.html" class="function" rel="rdfs-seeAlso">prev()</a> - 内部の配列ポインタをひとつ前に戻す</span></li>
    <li class="member"><span class="function"><a href="function.reset.html" class="function" rel="rdfs-seeAlso">reset()</a> - 配列の内部ポインタを先頭の要素にセットする</span></li>
    <li class="member"><span class="function"><a href="function.next.html" class="function" rel="rdfs-seeAlso">next()</a> - 内部配列ポインタを進める</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114978""></a>
  <div class="note">
   <strong class="user">ivijan dot stefan at gmail dot com</strong>
   <a href="#114978" class="date">09-May-2014 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that the function end() is the best for finding extensions&nbsp; on file name. This function cleans backslashes and takes the extension of a file.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">private function </span><span class="default">extension</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\\"</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">end</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// EXAMPLE:<br />
</span><span class="default">$file</span><span class="keyword">=</span><span class="string">'name-Of_soMe.File.txt'</span><span class="keyword">;<br />
echo </span><span class="default">extension</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">); </span><span class="comment">// txt<br />
</span><span class="default">?&gt;<br />
</span><br />
Very simple.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111697""></a>
  <div class="note">
   <strong class="user">Jason</strong>
   <a href="#111697" class="date">18-Mar-2013 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$filename = 'somefile.jpg';<br />
<br />
php v5.4 does not support the following statement.<br />
echo end(explode(".", $filename)); // return jpg string<br />
<br />
instead you have to split into 2 statements<br />
$file = explode(".", $filename);<br />
echo end ($file);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107733""></a>
  <div class="note">
   <strong class="user">jorge at REMOVETHIS-2upmedia dot com</strong>
   <a href="#107733" class="date">01-Mar-2012 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If all you want is the last item of the array without affecting the internal array pointer just do the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">endc</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) { return </span><span class="default">end</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">); }<br />
<br />
</span><span class="default">$items </span><span class="keyword">= array( </span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">);<br />
</span><span class="default">$lastItem </span><span class="keyword">= </span><span class="default">endc</span><span class="keyword">( </span><span class="default">$items </span><span class="keyword">); </span><span class="comment">// three<br />
</span><span class="default">$current </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">( </span><span class="default">$items </span><span class="keyword">); </span><span class="comment">// one<br />
</span><span class="default">?&gt;<br />
</span><br />
This works because the parameter to the function is being sent as a copy, not as a reference to the original variable.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101193""></a>
  <div class="note">
   <strong class="user">franz at develophp dot org</strong>
   <a href="#101193" class="date">02-Dec-2010 12:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's interesting to note that when creating an array with numeric keys in no particular order, end() will still only return the value that was the last one to be created. So, if you have something like this:
<br />

<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">end</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;
<br />
</span>
<br />
This will print "0".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98286""></a>
  <div class="note">
   <strong class="user">laurence at crazypillstudios dot com</strong>
   <a href="#98286" class="date">07-Jun-2010 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this is a function to move items in an array up or down in the array. it is done by breaking the array into two separate arrays and then have a loop creates the final array adding the item we want to move when the counter is equal to the new position we established the array key, position and direction were passed via a query string
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//parameters
<br />
//$array- the array you are modifying
<br />
//$keytomove - the key of the item you wish to move
<br />
//$pos - the current position of the item: used a count($array) function 
<br />
//and then loop with incrementing integer to add the position to the up //or down button
<br />
//$dir - the direction you want to move it - "up"/"dn"
<br />

<br />
</span><span class="keyword">function </span><span class="default">change_pos</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$keytomove</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//count the original number of rows
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//set the integer we will use to place the moved item
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$dir</span><span class="keyword">==</span><span class="string">"up"</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//if the item is already first and we try moving it up
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //we send it to the end of the array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//anywhere else it just moves back one closer to the start of the array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//do the same for the down button
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$dir</span><span class="keyword">==</span><span class="string">"dn"</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">$count</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//copy the element that you wish to move
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keytomove</span><span class="keyword">];&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//delete the original from the main array
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keytomove</span><span class="keyword">]);&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//create an array of the names of the values we
<br />
&nbsp;&nbsp;&nbsp; //are not moving
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$preint </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$c</span><span class="keyword">){&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$notmoved</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$preint</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$c</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$preint</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//loop through all the elements
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$int</span><span class="keyword">&lt;=</span><span class="default">$count</span><span class="keyword">){&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//dynamically change the key of the unmoved item as we increment the counter
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$notmovedkey </span><span class="keyword">= </span><span class="default">$notmoved</span><span class="keyword">[</span><span class="string">"</span><span class="default">$int</span><span class="string">"</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//when the counter is equal to the position we want
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //to place the moved entry we pump it into a new array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$int</span><span class="keyword">==</span><span class="default">$change</span><span class="keyword">){ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$neworder</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$keytomove</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$move</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//add all the other array items if the position number is not met and 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //resume adding them once the moved item is written
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$contkey</span><span class="keyword">!=</span><span class="string">""</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$neworder</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$notmovedkey</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$notmovedkey</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$int</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$neworder</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This is not too elegant but it works.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93105""></a>
  <div class="note">
   <strong class="user">Sam Yong - hellclanner at live dot com</strong>
   <a href="#93105" class="date">24-Aug-2009 02:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Take note that end() does not recursively set your multiple dimension arrays' pointer to the end.<br />
<br />
Take a look at the following:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// create the array for testing<br />
</span><span class="default">$a </span><span class="keyword">= array();<br />
</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while(</span><span class="default">$i</span><span class="keyword">++ &lt; </span><span class="default">3</span><span class="keyword">){<br />
</span><span class="default">$a</span><span class="keyword">[] = array(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">())),</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="string">'lol'</span><span class="keyword">.</span><span class="default">mt_rand</span><span class="keyword">())));<br />
}<br />
<br />
</span><span class="comment">// show the array tree<br />
</span><span class="keyword">echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="comment">// set the pointer of $a to the end<br />
</span><span class="default">end</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="comment">// get the current element of $a<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="comment">// get the current element of the current element of $a<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You will notice that you probably get something like this:<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "764d8d20"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "85ee186d"<br />
&nbsp; }<br />
&nbsp; [1]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "c8c72466"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "a0fdccb2"<br />
&nbsp; }<br />
&nbsp; [2]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "3463a31b"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(8) "589f6b63"<br />
&nbsp; }<br />
}<br />
<br />
array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(8) "3463a31b"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(8) "589f6b63"<br />
}<br />
<br />
string(8) "3463a31b"<br />
<br />
The array elements' pointer are still at the first one as current. So do take note.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68052""></a>
  <div class="note">
   <strong class="user">jasper at jtey dot com</strong>
   <a href="#68052" class="date">11-Jul-2006 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function returns the value at the end of the array, but you may sometimes be interested in the key at the end of the array, particularly when working with non integer indexed arrays:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Returns the key at the end of the array<br />
</span><span class="keyword">function </span><span class="default">endKey</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;</span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage example:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">"one" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"two" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"three" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">);<br />
echo </span><span class="default">endKey</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// will output "three"<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58209""></a>
  <div class="note">
   <strong class="user">ken at expitrans dot com</strong>
   <a href="#58209" class="date">27-Oct-2005 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that from version 5.0.4 ==&gt; 5.0.5 that this function now takes an array. This will possibly break some code for instance:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">echo </span><span class="string">"&gt;&gt; "</span><span class="keyword">.</span><span class="default">end</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">))).</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
which will return "Fatal error: Only variables can be passed by reference" in version &lt;= 5.0.4 but not in 5.0.5.<br />
<br />
If you run into this problem with nested function calls, then an easy workaround is to assign the result from array_keys (or whatever function) to an intermediary variable:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$x </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">));<br />
echo </span><span class="string">"&gt;&gt; "</span><span class="keyword">.</span><span class="default">end</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24804""></a>
  <div class="note">
   
   <a href="#24804" class="date">29-Aug-2002 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to get a reference on the first or last element of an array, use these functions because reset() and end() only return you a copy that you cannot dereference directly:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">first</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br />
if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return &amp;</span><span class="default">$array</span><span class="keyword">;
<br />
if (!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;
<br />
</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
return &amp;</span><span class="default">$array</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)];
<br />
}
<br />

<br />
function </span><span class="default">last</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br />
if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return &amp;</span><span class="default">$array</span><span class="keyword">;
<br />
if (!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;
<br />
</span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
return &amp;</span><span class="default">$array</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)];
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24803""></a>
  <div class="note">
   
   <a href="#24803" class="date">29-Aug-2002 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When adding an element to an array, it may be interesting to know with which key it was added. Just adding an element does not change the current position in the array, so calling key() won't return the correct key value; you must first position at end() of the array:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_add</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) {
<br />
</span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">; </span><span class="comment">// add an element
<br />
</span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// important!
<br />
</span><span class="keyword">return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
