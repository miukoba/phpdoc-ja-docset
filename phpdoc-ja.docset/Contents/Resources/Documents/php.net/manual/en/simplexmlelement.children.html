<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定したノードの子ノードを見付ける</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="simplexmlelement.attributes.html">≪ SimpleXMLElement::attributes</a></li>
      <li style="float: right;"><a href="simplexmlelement.construct.html">SimpleXMLElement::__construct ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.simplexmlelement.html">SimpleXMLElement</a></li>
    <li>指定したノードの子ノードを見付ける</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="simplexmlelement.children" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SimpleXMLElement::children</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.0.1)</p><p class="refpurpose"><span class="refname">SimpleXMLElement::children</span> &mdash; <span class="dc-title">指定したノードの子ノードを見付ける</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-simplexmlelement.children-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> <span class="methodname"><strong>SimpleXMLElement::children</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$is_prefix</code><span class="initializer"> = false</span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   このメソッドは、指定した要素の子を見つけます。
   結果は、通常の反復子により取得できます。
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">
SimpleXML では、ほとんどのメソッドに反復処理を追加するための手順が定義されています。
これらは、<span class="function"><a href="function.var-dump.html" class="function">var_dump()</a></span> やオブジェクトを評価する他の手段で
見ることはできません。</span></p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-simplexmlelement.children-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">ns</code></dt>

     <dd>

      <p class="para">
       <acronym title="eXtensible Markup Language">XML</acronym> 名前空間。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">is_prefix</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">is_prefix</code> が <strong><code>TRUE</code></strong> の場合は
       <code class="parameter">ns</code> をプレフィックスとして扱います。<strong><code>FALSE</code></strong> の場合は
       <code class="parameter">ns</code> を名前空間 <acronym title="Uniform Resource Locator">URL</acronym> として扱います。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-simplexmlelement.children-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   ノードが子を持つかどうかにかかわらず
   <a href="class.simplexmlelement.html" class="classname">SimpleXMLElement</a> 要素を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-simplexmlelement.children-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.0</td>
       <td>
        オプションのパラメータ <code class="parameter">is_prefix</code> が追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-simplexmlelement.children-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5585">
    <p><strong>例1 <em>children()</em> 疑似配列を走査する</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$xml&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SimpleXMLElement</span><span style="color: #007700">(<br /></span><span style="color: #DD0000">'&lt;person&gt;<br />&nbsp;&lt;child&nbsp;role="son"&gt;<br />&nbsp;&nbsp;&lt;child&nbsp;role="daughter"/&gt;<br />&nbsp;&lt;/child&gt;<br />&nbsp;&lt;child&nbsp;role="daughter"&gt;<br />&nbsp;&nbsp;&lt;child&nbsp;role="son"&gt;<br />&nbsp;&nbsp;&nbsp;&lt;child&nbsp;role="son"/&gt;<br />&nbsp;&nbsp;&lt;/child&gt;<br />&nbsp;&lt;/child&gt;<br />&lt;/person&gt;'</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$second_gen</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;The&nbsp;person&nbsp;begot&nbsp;a&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$second_gen</span><span style="color: #007700">[</span><span style="color: #DD0000">'role'</span><span style="color: #007700">];<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$second_gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$third_gen</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;who&nbsp;begot&nbsp;a&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$third_gen</span><span style="color: #007700">[</span><span style="color: #DD0000">'role'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">';'</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$third_gen</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">()&nbsp;as&nbsp;</span><span style="color: #0000BB">$fourth_gen</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'&nbsp;and&nbsp;that&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$third_gen</span><span style="color: #007700">[</span><span style="color: #DD0000">'role'</span><span style="color: #007700">]&nbsp;.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'&nbsp;begot&nbsp;a&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$fourth_gen</span><span style="color: #007700">[</span><span style="color: #DD0000">'role'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
The person begot a son who begot a daughter; The person
begot a daughter who begot a son; and that son begot a son
</pre></div>
    </div>
   </div>
   <div class="example" id="example-5586">
    <p><strong>例2 名前空間の使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;example&nbsp;xmlns:foo="my.foo.urn"&gt;<br />&nbsp;&nbsp;&lt;foo:a&gt;Apple&lt;/foo:a&gt;<br />&nbsp;&nbsp;&lt;foo:b&gt;Banana&lt;/foo:b&gt;<br />&nbsp;&nbsp;&lt;c&gt;Cherry&lt;/c&gt;<br />&lt;/example&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$sxe&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SimpleXMLElement</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$kids&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$kids</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$kids&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$kids</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$kids&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">(</span><span style="color: #DD0000">'my.foo.urn'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$kids</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$kids&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">(</span><span style="color: #DD0000">'my.foo.urn'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$kids</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$kids&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sxe</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">children</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$kids</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
int(2)
int(2)
int(0)
int(1)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-simplexmlelement.children-notes">
  <h3 class="title">注意</h3>

  <p class="simpara">
   <span class="methodname"><strong>SimpleXMLElement::children()</strong></span>
   は、現在のノードに子があるか否かにかかわらずノードオブジェクトを返します。
   子があるかどうかを調べるには、返り値の <span class="function"><a href="function.count.html" class="function">count()</a></span>
   を使います。PHP 5.3.0 以降では、かわりに
   <span class="methodname"><a href="simplexmlelement.count.html" class="methodname">SimpleXMLElement::count()</a></span> を使うことができます。
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-simplexmlelement.children-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="simplexmlelement.count.html" class="methodname" rel="rdfs-seeAlso">SimpleXMLElement::count()</a> - 子要素を数える</span></li>
    <li class="member"><span class="function"><a href="function.count.html" class="function" rel="rdfs-seeAlso">count()</a> - 変数に含まれるすべての要素、
  あるいはオブジェクトに含まれる何かの数を数える</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105721""></a>
  <div class="note">
   <strong class="user">thetazzbot at gmail dot com</strong>
   <a href="#105721" class="date">09-Sep-2011 03:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ok so say you have this xml:<br />
<br />
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;<br />
&lt;!DOCTYPE nitf<br />
PUBLIC "-//IPTC-NAA//DTD NITF 3.1//EN"<br />
&nbsp;&nbsp; &nbsp; &nbsp; "<a href="http://www.nitf.org/site/nitf-documentation/nitf-3-1.dtd" rel="nofollow" target="_blank">http://www.nitf.org/site/nitf-documentation/nitf-3-1.dtd</a>"&gt;<br />
&lt;nitf&gt;<br />
&nbsp; &lt;head&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;docdata management-status="embargoed"&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;!--data/2011/08/23/parties/doc4e53aa5783cca930694817.txt--&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;doc-id id-string="doc4e53aa5783cca930694817"/&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;date.release norm="20110823T000000"/&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;key-list/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/docdata&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;pubdata type="web" position.section="parties" position.sequence="0"/&gt;<br />
&nbsp; &lt;/head&gt;<br />
<br />
-- snip --<br />
<br />
If you need to access the nodes named "like.this" such as the date.release above, here is how I did it:<br />
<br />
$xml = new SimpleXMLElement($xhtml);<br />
&nbsp;echo (string)$xml-&gt;head-&gt;docdata-&gt;{"date.release"}["norm"];<br />
<br />
Took me a while to figure that one out ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101330""></a>
  <div class="note">
   <strong class="user">coldshine1 at rambler dot ru</strong>
   <a href="#101330" class="date">10-Dec-2010 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is my recursive simple function to parse XML with attributes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ParseXML</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, &amp;</span><span class="default">$parent</span><span class="keyword">=array(), </span><span class="default">$only_child</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Current node name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node_name </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Let's count children<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$only_child </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">() &gt; </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$only_child </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//If there is no child, then there may be text data<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$only_child</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content</span><span class="keyword">=</span><span class="string">"</span><span class="default">$node</span><span class="string">"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$parent</span><span class="keyword">[</span><span class="string">'content'</span><span class="keyword">]=</span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Get attributes of current node<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parent</span><span class="keyword">[</span><span class="string">'@attributes'</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">]=</span><span class="string">"</span><span class="default">$v</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Get children<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$child_name</span><span class="keyword">=&gt;</span><span class="default">$child_node</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$only_child</span><span class="keyword">) </span><span class="comment">//If there are siblings then we'll add node to the end of the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">LGServerPVR</span><span class="keyword">::</span><span class="default">ParseXML</span><span class="keyword">(</span><span class="default">$child_node</span><span class="keyword">, </span><span class="default">$parent</span><span class="keyword">[</span><span class="default">$node_name</span><span class="keyword">][</span><span class="default">$child_name</span><span class="keyword">][</span><span class="default">$count</span><span class="keyword">], </span><span class="default">$only_child</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">LGServerPVR</span><span class="keyword">::</span><span class="default">ParseXML</span><span class="keyword">(</span><span class="default">$child_node</span><span class="keyword">, </span><span class="default">$parent</span><span class="keyword">[</span><span class="default">$node_name</span><span class="keyword">][</span><span class="default">$child_name</span><span class="keyword">], </span><span class="default">$only_child</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$parent</span><span class="keyword">;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//(c) c01d[s]h!nE 10.12.2010&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100603""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#100603" class="date">26-Oct-2010 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's my xml-to-array routine. Unlike many of the other comments here, this one takes namespaces into account.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">XmlArray </span><span class="keyword">{<br />
<br />
&nbsp; public function </span><span class="default">load_dom </span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">=</span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">add_node</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; public function </span><span class="default">load_string </span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">=</span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">add_node</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; private function </span><span class="default">add_node </span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, &amp;</span><span class="default">$parent</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$namespace</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$recursive</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$namespaces </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">getNameSpaces</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content</span><span class="keyword">=</span><span class="string">"</span><span class="default">$node</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]=</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$recursive</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tmp</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">getNameSpaces</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'namespace'</span><span class="keyword">]=</span><span class="default">$tmp</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'namespaces'</span><span class="keyword">]=</span><span class="default">$namespaces</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$namespace</span><span class="keyword">) </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'namespace'</span><span class="keyword">]=</span><span class="default">$namespace</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">) </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'content'</span><span class="keyword">]=</span><span class="default">$content</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$namespaces </span><span class="keyword">as </span><span class="default">$pre</span><span class="keyword">=&gt;</span><span class="default">$ns</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">) as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">add_node</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'children'</span><span class="keyword">], </span><span class="default">$pre</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">) as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'attributes'</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">]=</span><span class="string">"</span><span class="default">$pre</span><span class="string">:</span><span class="default">$v</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">add_node</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'children'</span><span class="keyword">], </span><span class="string">''</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="string">'attributes'</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">]=</span><span class="string">"</span><span class="default">$v</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$parent</span><span class="keyword">[]=&amp;</span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$parent</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95578""></a>
  <div class="note">
   <strong class="user">mrdaniellee at live dot com</strong>
   <a href="#95578" class="date">10-Jan-2010 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
use this If you want to view the HTML as well as data.
<br />

<br />
normal dumps display the parsed versions of HTML.
<br />
This code displays the HTML as Text in a Text Area, and also display all other a data along side as an array 
<br />

<br />
perfect for debugging (xml with html).
<br />

<br />
Try This Code:
<br />

<br />
<span class="default">&lt;?php
<br />
$xml&nbsp; </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br />

<br />
function </span><span class="default">xml2array_parse</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$parent </span><span class="keyword">=&gt; </span><span class="default">$child</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="string">"</span><span class="default">$parent</span><span class="string">"</span><span class="keyword">] = </span><span class="default">xml2array_parse</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">)?</span><span class="default">xml2array_parse</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">):</span><span class="string">"</span><span class="default">$child</span><span class="string">"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br />
&nbsp;} 
<br />
&nbsp;
<br />
&nbsp;print </span><span class="string">"&lt;pre&gt;&lt;textarea style=\"width:200%;height:100%;\"&gt;"</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">xml2array_parse</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">));
<br />
&nbsp;print </span><span class="string">"&lt;/textarea&gt;&lt;/pre&gt;"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91032""></a>
  <div class="note">
   <strong class="user">rodmen at gmail dot com</strong>
   <a href="#91032" class="date">21-May-2009 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Transform xml to array php
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">xml2phpArray</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$iter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$b</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">()){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="default">$iter</span><span class="keyword">] = array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="default">$iter</span><span class="keyword">] = </span><span class="default">xml2phpArray</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">][</span><span class="default">$iter</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$iter</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$Array </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'myfile.xml'</span><span class="keyword">));
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">xml2phpArray</span><span class="keyword">(</span><span class="default">$Array</span><span class="keyword">,array()));
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85566""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#85566" class="date">06-Sep-2008 02:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for XML namespaces such as &lt;dc:creator&gt; in RSS feeds use
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; $xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-&gt;</span><span class="default">item</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dc </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">(</span><span class="string">"<a href="http://purl.org/dc/elements/1.1/" rel="nofollow" target="_blank">http://purl.org/dc/elements/1.1/</a>"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$dc</span><span class="keyword">-&gt;</span><span class="default">creator</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81931""></a>
  <div class="note">
   <strong class="user">transglobe at gmx dot de</strong>
   <a href="#81931" class="date">19-Mar-2008 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made a slightly differnt approch towards the RecurseXML function. Beeing hungry I had problems with the code, as it did just overwrite two &lt;maincourse&gt;s. So here is what I did:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(
<br />
</span><span class="string">'&lt;meal&gt;
<br />
&nbsp;&nbsp; &lt;type&gt;Lunch&lt;/type&gt;
<br />
&nbsp;&nbsp; &lt;time&gt;12:30&lt;/time&gt;
<br />
&nbsp;&nbsp; &lt;menu&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;entree&gt;salad&lt;/entree&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;maincourse&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;ships&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;steak&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/maincourse&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;maincourse&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;fisch&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;rice&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/maincourse&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;maincourse&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;wine&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;part&gt;cheese&lt;/part&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/maincourse&gt;
<br />
&nbsp;&nbsp; &lt;/menu&gt;
<br />
&lt;/meal&gt;'</span><span class="keyword">);
<br />

<br />
</span><span class="default">$vals </span><span class="keyword">= array();
<br />
</span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$vals</span><span class="keyword">);
<br />

<br />
foreach(</span><span class="default">$vals </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp; print(</span><span class="string">"</span><span class="keyword">{</span><span class="default">$key</span><span class="keyword">}</span><span class="string"> = </span><span class="keyword">{</span><span class="default">$value</span><span class="keyword">}</span><span class="string">&lt;BR&gt;\n"</span><span class="keyword">);
<br />

<br />
function </span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">,&amp;</span><span class="default">$vals</span><span class="keyword">,</span><span class="default">$parent</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">) {
<br />

<br />
&nbsp; </span><span class="default">$childs</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$child_count</span><span class="keyword">=-</span><span class="default">1</span><span class="keyword">; </span><span class="comment"># Not realy needed.
<br />
&nbsp; </span><span class="default">$arr</span><span class="keyword">=array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child_count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child_count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[]=</span><span class="default">$key</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$k</span><span class="keyword">=(</span><span class="default">$parent </span><span class="keyword">== </span><span class="string">""</span><span class="keyword">) ? </span><span class="string">"</span><span class="default">$key</span><span class="string">.</span><span class="default">$child_count</span><span class="string">" </span><span class="keyword">: </span><span class="string">"</span><span class="default">$parent</span><span class="string">.</span><span class="default">$key</span><span class="string">.</span><span class="default">$child_count</span><span class="string">"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$childs</span><span class="keyword">=</span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$vals</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$childs</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]= (string)</span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp; return </span><span class="default">$childs</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>Output is like this:
<br />
type.0 = Lunch
<br />
time.0 = 12:30
<br />
menu.0.entree.0 = salad
<br />
menu.0.maincourse.0.part.0 = ships
<br />
menu.0.maincourse.0.part.1 = steak
<br />
menu.0.maincourse.0 =
<br />
menu.0.maincourse.1.part.0 = fisch
<br />
menu.0.maincourse.1.part.1 = rice
<br />
menu.0.maincourse.1 =
<br />
menu.0.maincourse.2.part.0 = wine
<br />
menu.0.maincourse.2.part.1 = cheese
<br />
menu.0.maincourse.2 =
<br />
menu.0 = 
<br />

<br />
(Not beautiful, but it solved my case...)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79730""></a>
  <div class="note">
   <strong class="user">crescentfreshpot at yahoo dot com</strong>
   <a href="#79730" class="date">10-Dec-2007 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a warning that the iterable returned from children() contains the '@attributes' key, which is "invisible" during a foreach but can be seen if using a different construct, such as list()=each() or casting to an array before iterating w/ foreach.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75311""></a>
  <div class="note">
   <strong class="user">aero</strong>
   <a href="#75311" class="date">23-May-2007 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple, recursive, function to transform XML data into pseudo E4X syntax ie. root.child.value = foobar
<br />

<br />
<span class="default">&lt;?php
<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);
<br />

<br />
</span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(
<br />
</span><span class="string">'&lt;Patriarch&gt;
<br />
&nbsp;&nbsp; &lt;name&gt;Bill&lt;/name&gt;
<br />
&nbsp;&nbsp; &lt;wife&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;name&gt;Vi&lt;/name&gt;
<br />
&nbsp;&nbsp; &lt;/wife&gt;
<br />
&nbsp;&nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;name&gt;Bill&lt;/name&gt;
<br />
&nbsp;&nbsp; &lt;/son&gt;
<br />
&nbsp;&nbsp; &lt;daughter&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;name&gt;Jeri&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;husband&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &lt;name&gt;Mark&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/husband&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &lt;name&gt;Greg&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/son&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &lt;name&gt;Tim&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/son&gt;&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &lt;name&gt;Mark&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/son&gt;&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &lt;name&gt;Josh&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;wife&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;Kristine&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;/wife&gt; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;Blake&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;/son&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;daughter&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;Liah&lt;/name&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;/daughter&gt;
<br />
&nbsp;&nbsp; &nbsp; &lt;/son&gt;
<br />
&nbsp;&nbsp; &lt;/daughter&gt;
<br />
&lt;/Patriarch&gt;'</span><span class="keyword">);
<br />

<br />
</span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br />

<br />
function </span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$parent</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp; </span><span class="default">$child_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; foreach(</span><span class="default">$xml </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$child_count</span><span class="keyword">++;&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">RecurseXML</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$parent</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">)&nbsp; </span><span class="comment">// no childern, aka "leaf node"
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="default">$parent </span><span class="keyword">. </span><span class="string">"." </span><span class="keyword">. (string)</span><span class="default">$key </span><span class="keyword">. </span><span class="string">" = " </span><span class="keyword">. (string)</span><span class="default">$value </span><span class="keyword">. </span><span class="string">"&lt;BR&gt;\n"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; return </span><span class="default">$child_count</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The output....
<br />

<br />
.name = Bill
<br />
.wife.name = Vi
<br />
.son.name = Bill
<br />
.daughter.name = Jeri
<br />
.daughter.husband.name = Mark
<br />
.daughter.son.name = Greg
<br />
.daughter.son.name = Tim
<br />
.daughter.son.name = Mark
<br />
.daughter.son.name = Josh
<br />
.daughter.son.wife.name = Kristine
<br />
.daughter.son.son.name = Blake
<br />
.daughter.son.daughter.name = Liah</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64837""></a>
  <div class="note">
   <strong class="user">taylorbarstow at that google mail thingy</strong>
   <a href="#64837" class="date">21-Apr-2006 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you actually want an array, not a pseudo array.&nbsp;&nbsp; This is especially true when you aren't dealing with attributes (i.e., you just want the array of child nodes).
<br />

<br />
Do like this:
<br />

<br />
<span class="default">&lt;?php
<br />
$children </span><span class="keyword">= </span><span class="default">$sxml</span><span class="keyword">-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="string">'child::node()'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The reason you might want this is to be able to use array functions like array_shift, array_pop, etc.&nbsp; This is especially true when you are writing recursive functions.&nbsp; Simplexml works really well in iterative programming, but if you try to implement recursion it gets ugly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58199""></a>
  <div class="note">
   <strong class="user">Sebastian</strong>
   <a href="#58199" class="date">27-Oct-2005 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick addition:
<br />

<br />
If you need to access a child node which contains a dash, you need to encapsulate it with {""}.
<br />

<br />
For example:
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach (</span><span class="default">$domain</span><span class="keyword">-&gt;</span><span class="default">domain</span><span class="keyword">-</span><span class="default">listing </span><span class="keyword">as </span><span class="default">$product</span><span class="keyword">) {
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The example above doesn't work because of the dash. But instead you need to use:
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach (</span><span class="default">$domain</span><span class="keyword">-&gt;{</span><span class="string">"domain-listing"</span><span class="keyword">} as </span><span class="default">$product</span><span class="keyword">) {
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
At least for me the second example works perfectly fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53413""></a>
  <div class="note">
   <strong class="user">no-one</strong>
   <a href="#53413" class="date">01-Jun-2005 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For anyone who hasn't read Sterling Hughe's article (<a href="http://www.zend.com/php5/articles/php5-simplexml.php" rel="nofollow" target="_blank">http://www.zend.com/php5/articles/php5-simplexml.php</a>):
<br />

<br />
<span class="default">&lt;?php
<br />
$xml_document </span><span class="keyword">=&lt;&lt;&lt;EOT
<br />
</span><span class="string">&lt;?xml version="1.0"?&gt;
<br />
&lt;root xmlns:foo="<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"&gt;
<br />
&nbsp; &lt;foo:bar&gt;baz&lt;/foo:bar&gt;
<br />
&lt;/root&gt;
<br />
</span><span class="keyword">EOT;
<br />

<br />
</span><span class="default">$xml_document </span><span class="keyword">= </span><span class="default">simplexml_load_xml</span><span class="keyword">(</span><span class="default">$xml_document</span><span class="keyword">);
<br />

<br />
</span><span class="default">$foo_ns_bar </span><span class="keyword">= </span><span class="default">$xml_document</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">(</span><span class="string">'<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>'</span><span class="keyword">);
<br />

<br />
echo </span><span class="default">$foo_ns_bar</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]; </span><span class="comment">// prints 'baz'
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51008""></a>
  <div class="note">
   <strong class="user">Andrew Rose (rose dot andrew at gmail dot com)</strong>
   <a href="#51008" class="date">16-Mar-2005 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example below shows the basic use of depth-first recursion to span the xml tree.
<br />

<br />
This is coded for the command line, and it prints out the original sentance above and then the copy cat sentence it creates itself for comparison, which as you will see; this example is slightly off from, I'll leave it upto you to resolve this issue.
<br />

<br />
All in all I personaly think xml and recursion go hand in hand, so if you don't understand recursion but know xml and want to use php to manipulate xml you will need to learn about recursion at some point.
<br />

<br />
<span class="default">&lt;?php
<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(
<br />
</span><span class="string">'&lt;person&gt;
<br />
&nbsp;&lt;child role="son"&gt;
<br />
&nbsp; &lt;child role="daughter"/&gt;
<br />
&nbsp;&lt;/child&gt;
<br />
&nbsp;&lt;child role="daughter"&gt;
<br />
&nbsp; &lt;child role="son"&gt;
<br />
&nbsp;&nbsp; &lt;child role="son"/&gt;
<br />
&nbsp; &lt;/child&gt;
<br />
&nbsp;&lt;/child&gt;
<br />
&lt;/person&gt;'</span><span class="keyword">);
<br />

<br />
function </span><span class="default">recurse</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">)
<br />
&nbsp;{
<br />
&nbsp;&nbsp; foreach(</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$children</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; echo </span><span class="string">' who begot a '</span><span class="keyword">.</span><span class="default">$children</span><span class="keyword">[</span><span class="string">'role'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">recurse</span><span class="keyword">(</span><span class="default">$children</span><span class="keyword">); 
<br />
&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return;
<br />
&nbsp;}
<br />

<br />
foreach(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$children</span><span class="keyword">) {
<br />
&nbsp;echo </span><span class="string">'The person begot a '</span><span class="keyword">.</span><span class="default">$children</span><span class="keyword">[</span><span class="string">'role'</span><span class="keyword">];
<br />
&nbsp; </span><span class="default">recurse</span><span class="keyword">(</span><span class="default">$children</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);
<br />
&nbsp;echo </span><span class="string">'; '</span><span class="keyword">;
<br />
}
<br />

<br />
echo </span><span class="string">"\n"</span><span class="keyword">;
<br />
echo </span><span class="string">'The person begot a son who begot a daughter; The person begot a daughter who begot a son; and that son begot a son'</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39912""></a>
  <div class="note">
   <strong class="user">zyxwvu at users dot sourceforge dot net</strong>
   <a href="#39912" class="date">15-Feb-2004 07:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
File:
<br />

<br />
&lt;category&gt;
<br />
&nbsp; &lt;item&gt;text&lt;/item&gt;
<br />
&nbsp; &lt;bold&gt;text&lt;/bold&gt;
<br />
&nbsp; &lt;item&gt;text&lt;/item&gt;
<br />
&nbsp; &lt;item&gt;text&lt;/item&gt;
<br />
&nbsp; &lt;mark&gt;text&lt;/mark&gt;
<br />
&nbsp; &lt;bold&gt;text&lt;/bold&gt;
<br />
&lt;/category&gt;
<br />

<br />
If you want to get also names of the tags, you can use this loop layout:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">foreach(</span><span class="default">$category </span><span class="keyword">-&gt; </span><span class="default">children</span><span class="keyword">() as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$node</span><span class="keyword">){
<br />
&nbsp; echo </span><span class="default">$name</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
