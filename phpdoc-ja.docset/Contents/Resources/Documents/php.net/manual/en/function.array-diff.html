<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>配列の差を計算する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-diff-ukey.html">≪ array_diff_ukey</a></li>
      <li style="float: right;"><a href="function.array-fill-keys.html">array_fill_keys ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">配列 関数</a></li>
    <li>配列の差を計算する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-diff" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_diff</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">array_diff</span> &mdash; <span class="dc-title">配列の差を計算する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.array-diff-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_diff</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array1</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$array2</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <code class="parameter">array1</code> を他の配列と比較し、
   <code class="parameter">array1</code> の要素の中で他の配列には存在しないものだけを返します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-diff-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array1</code></dt>

     <dd>

      <p class="para">
       比較元の配列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">array2</code></dt>

     <dd>

      <p class="para">
       比較対象の配列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">...</code></dt>

     <dd>

      <p class="para">
       さらに比較したい配列。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-diff-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">array1</code>
   のエントリのうち、他のどの配列にも含まれない要素のみを含む配列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-diff-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5053">
    <p><strong>例1 <span class="function"><strong>array_diff()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     <var class="varname"><var class="varname">$array1</var></var> に複数存在する場合でも全て同様に処理されます。
     この出力は次の通りです。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [1] =&gt; blue
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.array-diff-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    二つの要素は、<em>(string) $elem1 === (string) $elem2</em>
    の場合のみ等しいと見直されます。言い換えると、文字列表現が同じ場合となります。
    
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    この関数は n 次元配列の一つの次元しかチェックしません。
    もちろん、<em>array_diff($array1[0], $array2[0]);</em>
    のようにすることでより深い次元でのチェックもできます。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-diff-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-diff-assoc.html" class="function" rel="rdfs-seeAlso">array_diff_assoc()</a> - 追加された添字の確認を含めて配列の差を計算する</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect.html" class="function" rel="rdfs-seeAlso">array_intersect()</a> - 配列の共通項を計算する</span></li>
    <li class="member"><span class="function"><a href="function.array-intersect-assoc.html" class="function" rel="rdfs-seeAlso">array_intersect_assoc()</a> - 追加された添字の確認も含めて配列の共通項を確認する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114605""></a>
  <div class="note">
   <strong class="user">MD dot  ABU SAYEM=&gt;sayem at asterisbd dot com</strong>
   <a href="#114605" class="date">11-Mar-2014 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//array_diff function compare first array against all of the array and return the elements with index that are not present in either of the array.<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">=&gt;</span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">,</span><span class="string">"cyan"</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="string">"white"</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">);<br />
</span><span class="default">$array3 </span><span class="keyword">= array(</span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">, </span><span class="string">"white"</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
</span><span class="default">$array4 </span><span class="keyword">= array(</span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"yellow"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">,</span><span class="default">$array3</span><span class="keyword">,</span><span class="default">$array4</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>//outputs<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; cyan<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112916""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#112916" class="date">06-Aug-2013 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that array_diff cannot compare with an undefined array. For example:<br />
<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array (</span><span class="string">"ABC"</span><span class="keyword">, </span><span class="string">"DEF"</span><span class="keyword">);<br />
<br />
</span><span class="default">$Result </span><span class="keyword">= </span><span class="default">$array_diff</span><span class="keyword">( </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will output NULL NULL. If your script causes an undefined array (like mine did) it can be hard to find the mistake.<br />
<br />
Greetings</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110572""></a>
  <div class="note">
   <strong class="user">Jeppe Utzon</strong>
   <a href="#110572" class="date">08-Nov-2012 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just need to know if two arrays' values are exactly the same (regardless of keys and order), then instead of using array_diff, this is a simple method:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$arrayA </span><span class="keyword">, </span><span class="default">$arrayB </span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$arrayA </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$arrayB </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arrayA </span><span class="keyword">== </span><span class="default">$arrayB</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">// Examples:
<br />

<br />
</span><span class="default">$array1 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array2 </span><span class="keyword">= array( </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array3 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">, </span><span class="string">"yellow" </span><span class="keyword">);
<br />
</span><span class="default">$array4 </span><span class="keyword">= array( </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"yellow" </span><span class="keyword">, </span><span class="string">"blue" </span><span class="keyword">);
<br />
</span><span class="default">$array5 </span><span class="keyword">= array( </span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="string">"red" </span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt;&nbsp; </span><span class="string">"green" </span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="string">"blue" </span><span class="keyword">);
<br />

<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array2 </span><span class="keyword">);&nbsp; </span><span class="comment">// true
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array3 </span><span class="keyword">);&nbsp; </span><span class="comment">// false
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array4 </span><span class="keyword">);&nbsp; </span><span class="comment">// false
<br />
</span><span class="default">identical_values</span><span class="keyword">( </span><span class="default">$array1 </span><span class="keyword">, </span><span class="default">$array5 </span><span class="keyword">);&nbsp; </span><span class="comment">// true
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The function returns true only if the two arrays contain the same number of values and each value in one array has an exact duplicate in the other array. Everything else will return false.
<br />

<br />
my alternative method for evaluating if two arrays contain (all) identical values:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">); </span><span class="default">$sort</span><span class="keyword">(</span><span class="default">b</span><span class="keyword">); return </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$b</span><span class="keyword">;
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
may be slightly faster (10-20%) than this array_diff method:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">return ( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">) == </span><span class="default">count</span><span class="keyword">( </span><span class="default">$b </span><span class="keyword">) &amp;&amp; !</span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false </span><span class="keyword">);
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
but only when the two arrays contain the same number of values and then only in some cases. Otherwise the latter method will be radically faster due to the use of a count() test before the array_diff().
<br />

<br />
Also, if the two arrays contain a different number of values, then which method is faster will depend on whether both arrays need to be sorted or not. Two times sort() is a bit slower than one time array_diff(), but if one of the arrays have already been sorted, then you only have to sort the other array and this will be almost twice as fast as array_diff().
<br />

<br />
Basically: 2 x sort() is slower than 1 x array_diff() is slower than 1 x sort().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110389""></a>
  <div class="note">
   <strong class="user">devel-takethisout-oper dot web at gmail dot com</strong>
   <a href="#110389" class="date">18-Oct-2012 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Suppose you have a CMS which saves a list of phone numbers for each user. They are stored like this:<br />
<br />
$phones['Home'] = '(555)555-1234';<br />
$phones['Office'] = '(555)555-2222';<br />
<br />
You only want to save to the database if the list of items has changed. Including if the ORDER of them has changed.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Compares two arrays- keys and values (as strings) must match.<br />
// Keys and order must be the same to be equal.<br />
</span><span class="keyword">function </span><span class="default">arraysEqual</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">) != </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">FALSE</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrStr1 </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrStr2 </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$arrStr1</span><span class="keyword">, </span><span class="default">$arrStr2</span><span class="keyword">)==</span><span class="default">0 </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">TRUE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">FALSE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108204""></a>
  <div class="note">
   <strong class="user">michiel thalen</strong>
   <a href="#108204" class="date">07-Apr-2012 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The fact that it will use the string representation causes alot of problems with php 5.4.<br />
<br />
When you will have an array inside your elements, it will throw a notice error.<br />
It will throw huge amounts of notices depending on how many items you have.<br />
<br />
The same problem you will notice when checking with objects inside your array. It will cause catchable fatal errors.<br />
This is also the case in php 5.3<br />
<br />
I'm going to send a bug report, because I think php should handle this.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107953""></a>
  <div class="note">
   <strong class="user">ballestermendez at gmail dot com</strong>
   <a href="#107953" class="date">16-Mar-2012 08:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the element number returned is 0, this function NOT return a valid array, return NULL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107928""></a>
  <div class="note">
   <strong class="user">merlyn dot tgz at gmail dot com</strong>
   <a href="#107928" class="date">15-Mar-2012 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is more fast implementation of array_diff, but with some limitations. If you need compare two arrays of integers or strings you can use such function:<br />
<br />
&nbsp;&nbsp;&nbsp; public static function arrayDiffEmulation($arrayFrom, $arrayAgainst)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $arrayAgainst = array_flip($arrayAgainst);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($arrayFrom as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($arrayAgainst[$value])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset($arrayFrom[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $arrayFrom;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
It is ~10x faster than array_diff<br />
<br />
php &gt; $t = microtime(true);$a = range(0,25000); $b = range(15000,500000); $c = array_diff($a, $b);echo microtime(true) - $t;<br />
4.4335179328918<br />
php &gt; $t = microtime(true);$a = range(0,25000); $b = range(15000,500000); $c = arrayDiffEmulation($a, $b);echo microtime(true) - $t;<br />
0.37219095230103</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105059""></a>
  <div class="note">
   <strong class="user">wladimir camargo</strong>
   <a href="#105059" class="date">25-Jul-2011 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is my simple function do compare two arrays. It adds the deleted values from the original array.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_diff_</span><span class="keyword">(</span><span class="default">$old_array</span><span class="keyword">,</span><span class="default">$new_array</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$new_array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$l</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$old_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">$l</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$l</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//adding deleted values
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$old_array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$l</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$new_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101613""></a>
  <div class="note">
   <strong class="user">eugeny dot yakimovitch at gmail dot com</strong>
   <a href="#101613" class="date">30-Dec-2010 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that array_diff is not equivalent to 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">fullArrayDiff</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">) 
<br />
{
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">), </span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
since it is a set-theoretical complement as in 
<br />

<br />
<a href="http://en.wikipedia.org/wiki/Complement_(set_theory" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Complement_(set_theory</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101512""></a>
  <div class="note">
   <strong class="user">javierchinapequeno at yahoo dot es</strong>
   <a href="#101512" class="date">21-Dec-2010 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, I´d like to give a piece of advice to all who need to use this function to compare two arrays that have a great quantity of elements. You should sort both arrays first before comparing, it will work faster.<br />
Thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98680""></a>
  <div class="note">
   <strong class="user">thefrox at gmail dot com</strong>
   <a href="#98680" class="date">30-Jun-2010 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Multidimensional array_diff
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br />
</span><span class="default">$bdd</span><span class="keyword">[</span><span class="string">'80395'</span><span class="keyword">]= array(</span><span class="string">'80396'</span><span class="keyword">,</span><span class="string">'80397'</span><span class="keyword">,</span><span class="string">'80398'</span><span class="keyword">,</span><span class="string">'777'</span><span class="keyword">);
<br />
</span><span class="default">$folder</span><span class="keyword">[</span><span class="string">'80395'</span><span class="keyword">]= array(</span><span class="string">'80396'</span><span class="keyword">,</span><span class="string">'80397'</span><span class="keyword">,</span><span class="string">'666'</span><span class="keyword">,</span><span class="string">'80398'</span><span class="keyword">,</span><span class="string">'154223'</span><span class="keyword">);
<br />
</span><span class="default">$folder</span><span class="keyword">[</span><span class="string">'80397'</span><span class="keyword">]= array(</span><span class="string">'34'</span><span class="keyword">,</span><span class="string">'35'</span><span class="keyword">,</span><span class="string">'36'</span><span class="keyword">,</span><span class="string">'45'</span><span class="keyword">,</span><span class="string">'57'</span><span class="keyword">);
<br />

<br />
echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">; 
<br />

<br />
function </span><span class="default">multidimensional_array_diff</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$r </span><span class="keyword">= array();
<br />
&nbsp;
<br />
&nbsp;foreach (</span><span class="default">$a2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$second</span><span class="keyword">)
<br />
&nbsp;{
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$first</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$first </span><span class="keyword">as </span><span class="default">$first_value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$second </span><span class="keyword">as </span><span class="default">$second_value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$first_value </span><span class="keyword">== </span><span class="default">$second_value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$true </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$true</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][] = </span><span class="default">$first_value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$true</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$first</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;}
<br />
&nbsp; return </span><span class="default">$r</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">single_diff_assoc</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">,</span><span class="default">$bdd</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
RESULT : 
<br />

<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [80395] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 666
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 154223
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
&nbsp;&nbsp;&nbsp; [80397] =&gt; Array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 34
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 35
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 36
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 45
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 57
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )
<br />

<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94596""></a>
  <div class="note">
   <strong class="user">pikiou at somethinggooglerelated dot com</strong>
   <a href="#94596" class="date">13-Nov-2009 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With previous solutions handling multi-dimensional arrays or objects through serialization, if compared variables contain references at some point, these will be serialized and stand as such after the diff function.<br />
Here is a safer solution :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_no_cast</span><span class="keyword">(&amp;</span><span class="default">$ar1</span><span class="keyword">, &amp;</span><span class="default">$ar2</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= Array();<br />
&nbsp;&nbsp; foreach (</span><span class="default">$ar1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$val1</span><span class="keyword">, </span><span class="default">$ar2</span><span class="keyword">) === </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$diff</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<span class="default">&lt;?php<br />
$referenced </span><span class="keyword">= Array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$array1 </span><span class="keyword">= Array(&amp;</span><span class="default">$referenced</span><span class="keyword">, Array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">));<br />
</span><span class="default">$array2 </span><span class="keyword">= Array(Array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">), Array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">));<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_diff_no_cast</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">//Outputs Array(1 =&gt; Array(2,3))<br />
//And $referenced stands unchanged (not serialized)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94410""></a>
  <div class="note">
   <strong class="user">vojtech dot hordejcuk at gmail dot com</strong>
   <a href="#94410" class="date">03-Nov-2009 04:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Based on one lad's code, I created following function for creating something like HTML diff. I hope it will be useful.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">private function </span><span class="default">diff </span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$old </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$old</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$new </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">);
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$lo </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">trim </span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$ln </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">trim </span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">max </span><span class="keyword">(</span><span class="default">count </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">), </span><span class="default">count </span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">));
<br />

<br />
&nbsp; </span><span class="default">$equ </span><span class="keyword">= </span><span class="default">array_intersect </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">, </span><span class="default">$ln</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$ins </span><span class="keyword">= </span><span class="default">array_diff </span><span class="keyword">(</span><span class="default">$ln</span><span class="keyword">, </span><span class="default">$lo</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$del </span><span class="keyword">= </span><span class="default">array_diff </span><span class="keyword">(</span><span class="default">$lo</span><span class="keyword">, </span><span class="default">$ln</span><span class="keyword">);
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp; 
<br />
&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$del </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;&lt;del&gt;' </span><span class="keyword">. </span><span class="default">$del </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/del&gt;&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$equ </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;' </span><span class="keyword">. </span><span class="default">$equ </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (isset (</span><span class="default">$ins </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">'&lt;p&gt;&lt;ins&gt;' </span><span class="keyword">. </span><span class="default">$ins </span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="string">'&lt;/ins&gt;&lt;/p&gt;'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp; 
<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94090""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#94090" class="date">15-Oct-2009 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi!<br />
I tried hard to find a solution to a problem I'm going to explain here, and after have read all the array functions and possibilities, I had to create what I think should exist on next PHP releases.<br />
<br />
What I needed, it's some kind of Difference, but working with two arrays and modifying them at time, not returning an array as a result with the diference itself.<br />
<br />
So, as an example:<br />
<br />
A = 1,2,3<br />
B = 2,3,4<br />
<br />
should NOT be:<br />
<br />
C = 1,4<br />
<br />
but:<br />
<br />
A = 1<br />
B = 4<br />
<br />
so basically, I wanted to delete coincidences on both arrays.<br />
<br />
Now, I've some actions to do, and I know wich one I've to do with the values from one array or another.<br />
With the normal DIFF I can't, because if I've an array like C=1,4, I dont know if I've to do the Action_A with 1 or with 4, but I really know that everything in A, will go to the Action_A and everithing in B, will go to Action_B. So same happens with 4, don't know wich action to apply...<br />
<br />
So I created this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_ORG_NEW</span><span class="keyword">(&amp;</span><span class="default">$org</span><span class="keyword">, &amp;</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">=</span><span class="string">'VALUES'</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">$type</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'VALUES'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)); </span><span class="comment">//C = A ^ B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$org </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//A' = A - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//B' = B - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">'KEYS'</span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_intersect_key</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">)); </span><span class="comment">//C = A ^ B<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$org </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$org</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//A' = A - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff_key</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">, </span><span class="default">$int</span><span class="keyword">)); </span><span class="comment">//B' = B - C<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This cute, works by reference, and modifies the arrays deleting coincidences on both, and leaving intact the non coincidences.<br />
<br />
So a call to this will be somethin' like:<br />
<br />
<span class="default">&lt;?php<br />
$original </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$new </span><span class="keyword">= array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">array_diff_ORG_NEW</span><span class="keyword">(</span><span class="default">$original</span><span class="keyword">, </span><span class="default">$new</span><span class="keyword">, </span><span class="string">'VALUES'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
And HERE, I'll have my arrays as I wanted:<br />
<br />
$original = 1<br />
$new = 4<br />
<br />
Now, why I use it precisely?<br />
<br />
Imagine you've some "Events" and some users you select when create the event, can "see" this event you create. So you "share" the event with some users. Ok?<br />
<br />
Imagine you created and Event_A, and shared with users 1,2,3.<br />
<br />
Now you want to modify the event, and you decide to modify the users to share it. Imagine you change it to users 2,3,4.<br />
<br />
(numbers are users ID).<br />
<br />
So you can manage when you are going to modify, to have an array with the IDs in DDBB ($original), and then, have another array with ID's corresponding to the users to share after modifying ($new). Wich ones you've to DELETE from DDBB, and wich ones do you've to INSERT?<br />
<br />
If you do a simple difference or somehow, you get somethin' like C=1,4.<br />
You have no clue on wich one you've to insert or delete.<br />
<br />
But on this way, you can know it, and that's why:<br />
<br />
- What keeps on $original, it's somethin not existing in $new at the beggining. So you know that all what you've inside $original, have to be deleted from DDBB because what you did in the modifying process, it's to unselect those users keeping in $original.<br />
- What keeps on $new, it's something not existing in $original at the beggining. Wich means that in the modifying process you added some new users. And those have to be inserted in DDBB. So, everything keeping inside $new, have to be inserted in the DDBB.<br />
<br />
Conclusion:<br />
<br />
- Remaining in $original --&gt; delete from DB.<br />
- Remaining in $new --&gt; insert into DB.<br />
<br />
And that's all!<br />
<br />
I hope you find it useful, and I encourage PHP "makers", to add in a not distant future, somethin' like this one natively, because I'm shure that I'm not the first one needing something like this.<br />
<br />
Best regards all,<br />
<br />
Light.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91756""></a>
  <div class="note">
   <strong class="user">firegun at terra dot com dot br</strong>
   <a href="#91756" class="date">24-Jun-2009 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello guys,
<br />

<br />
I´ve been looking for a array_diff that works with recursive arrays, I´ve tried the ottodenn at gmail dot com function but to my case it doesn´t worked as expected, so I made my own. I´ve haven´t tested this extensively, but I´ll explain my scenario, and this works great at that case :D
<br />

<br />
We got 2 arrays like these:
<br />

<br />
<span class="default">&lt;?php
<br />
$aArray1</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'banana' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$aArray1</span><span class="keyword">[</span><span class="string">'kenji'</span><span class="keyword">] = array(</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pie' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />

<br />
</span><span class="default">$aArray2</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'banana' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'orange' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
As array_diff, this function returns all the items that is in aArray1 and IS NOT at aArray2, so the result we should expect is:
<br />

<br />
<span class="default">&lt;?php
<br />
$aDiff</span><span class="keyword">[</span><span class="string">'marcie'</span><span class="keyword">] = array(</span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$aDiff</span><span class="keyword">[</span><span class="string">'kenji'</span><span class="keyword">] = array(</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pie' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'pasta' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Ok, now some comments about this function:
<br />
&nbsp;- Different from the PHP array_diff, this function DON´T uses the === operator, but the ==, so 0 is equal to '0' or false, but this can be changed with no impacts.
<br />
&nbsp;- This function checks the keys of the arrays, array_diff only compares the values.
<br />

<br />
I realy hopes that this could help some1 as I´ve been helped a lot with some users experiences. (Just please double check if it would work for your case, as I sad I just tested to a scenario like the one I exposed)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">arrayRecursiveDiff</span><span class="keyword">(</span><span class="default">$aArray1</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aReturn </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$aArray1 </span><span class="keyword">as </span><span class="default">$mKey </span><span class="keyword">=&gt; </span><span class="default">$mValue</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$mKey</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRecursiveDiff </span><span class="keyword">= </span><span class="default">arrayRecursiveDiff</span><span class="keyword">(</span><span class="default">$mValue</span><span class="keyword">, </span><span class="default">$aArray2</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aRecursiveDiff</span><span class="keyword">)) { </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$aRecursiveDiff</span><span class="keyword">; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$mValue </span><span class="keyword">!= </span><span class="default">$aArray2</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">]) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$mValue</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aReturn</span><span class="keyword">[</span><span class="default">$mKey</span><span class="keyword">] = </span><span class="default">$mValue</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$aReturn</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85694""></a>
  <div class="note">
   <strong class="user">pyerre</strong>
   <a href="#85694" class="date">12-Sep-2008 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
be careful kids, this function can be tricky<br />
<span class="default">&lt;?php<br />
$tab1</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="string">"a"</span><span class="keyword">);<br />
</span><span class="default">$tab2</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="string">"a"</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">"b"</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$tab1</span><span class="keyword">,</span><span class="default">$tab2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>gives<br />
Array<br />
(<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82297""></a>
  <div class="note">
   <strong class="user">Tim Trefren</strong>
   <a href="#82297" class="date">04-Apr-2008 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little wrapper for array_diff - I found myself needing to iterate through the edited array, and I didn't need to original keys for anything.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayDiff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># This wrapper for array_diff rekeys the array returned<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$valid_array </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># reinstantiate $array1 variable <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array1 </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># loop through the validated array and move elements to $array1<br />
&nbsp;&nbsp;&nbsp; # this is necessary because the array_diff function returns arrays that retain their original keys<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$valid_array </span><span class="keyword">as </span><span class="default">$valid</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[] = </span><span class="default">$valid</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82143""></a>
  <div class="note">
   <strong class="user">merlinyoda at dorproject dot net</strong>
   <a href="#82143" class="date">28-Mar-2008 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As touched on in kitchin's comment of 19-Jun-2007 03:49 and nilsandre at gmx dot de's comment of 17-Jul-2007 10:45, array_diff's behavior may be counter-intuitive if you aren't thinking in terms of set theory. <br />
<br />
array_diff() returns a *mathematical* difference (a.k.a. subtraction) of elements in array A that are in array B and *not* what elements are different between the arrays (i.e. those that elements that are in either A or B but aren't in both A and B).<br />
<br />
Drawing one of those Ven diagrams or Euler diagrams may help with visualization...<br />
<br />
As far as a function for returning what you may be expecting, here's one:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_xor </span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$union_array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intersect_array </span><span class="keyword">= </span><span class="default">array_intersect</span><span class="keyword">(</span><span class="default">$array_a</span><span class="keyword">, </span><span class="default">$array_b</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$union_array</span><span class="keyword">, </span><span class="default">$intersect_array</span><span class="keyword">)<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77095""></a>
  <div class="note">
   <strong class="user">asdf at asdf dot com</strong>
   <a href="#77095" class="date">15-Aug-2007 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Even tough the description of this function's behavior has changed it<br />
does not appear as tough the function's behavior has changed.&nbsp; Below is some test code and its output:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $a </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">,</span><span class="string">'d'</span><span class="keyword">,</span><span class="string">'e'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= array(</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'f'</span><span class="keyword">,</span><span class="string">'g'</span><span class="keyword">,</span><span class="string">'h'</span><span class="keyword">,</span><span class="string">'i'</span><span class="keyword">,</span><span class="string">'j'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 5<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76484""></a>
  <div class="note">
   <strong class="user">nilsandre at gmx dot de</strong>
   <a href="#76484" class="date">17-Jul-2007 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Again, the function's description is misleading right now. I sought a function, which (mathematically) computes A - B, or, written differently, A \ B. Or, again in other words, suppose <br />
<br />
A := {a1, ..., an} and B:= {a1, b1, ... , bm}<br />
<br />
=&gt; array_diff(A,B) = {a2, ..., an}<br />
<br />
array_diff(A,B) returns all elements from A, which are not elements of B (= A without B).<br />
<br />
You should include this in the documentation more precisely, I think.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76391""></a>
  <div class="note">
   <strong class="user">mr dot kschan at gmail dot com</strong>
   <a href="#76391" class="date">13-Jul-2007 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
just comment ... i don't know whether the following implementation of array_diff is having a much better meaning to the function name.<br />
<br />
function ary_diff( $ary_1, $ary_2 ) {<br />
&nbsp; // compare the value of 2 array<br />
&nbsp; // get differences that in ary_1 but not in ary_2<br />
&nbsp; // get difference that in ary_2 but not in ary_1<br />
&nbsp; // return the unique difference between value of 2 array<br />
&nbsp; $diff = array();<br />
<br />
&nbsp; // get differences that in ary_1 but not in ary_2<br />
&nbsp; foreach ( $ary_1 as $v1 ) {<br />
&nbsp;&nbsp;&nbsp; $flag = 0;<br />
&nbsp;&nbsp;&nbsp; foreach ( $ary_2 as $v2 ) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $flag |= ( $v1 == $v2 );<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( $flag ) break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( !$flag ) array_push( $diff, $v1 );<br />
&nbsp; }<br />
<br />
&nbsp; // get difference that in ary_2 but not in ary_1<br />
&nbsp; foreach ( $ary_2 as $v2 ) {<br />
&nbsp;&nbsp;&nbsp; $flag = 0;<br />
&nbsp;&nbsp;&nbsp; foreach ( $ary_1 as $v1 ) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $flag |= ( $v1 == $v2 );<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( $flag ) break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ( !$flag &amp;&amp; !in_array( $v2, $diff ) ) array_push( $diff, $v2 );<br />
&nbsp; }<br />
<br />
&nbsp; return $diff;<br />
}<br />
<br />
i think array_diff should return the difference between the array independent of the order of passing the parameter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75870""></a>
  <div class="note">
   <strong class="user">kitchin</strong>
   <a href="#75870" class="date">19-Jun-2007 11:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Until recently, the description said:<br />
"array_diff() returns an array containing all the values of array1 that are not present in any of the other arguments. Note that keys are preserved."<br />
<br />
Now it says:<br />
"Compares array1 against array2 and returns the difference."<br />
<br />
Now it's not clear what the optional arguments after the first two do.&nbsp; Also, the difference is not symmetric in its arguments (that is array_intersect).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75731""></a>
  <div class="note">
   <strong class="user">gilthans at NOgmailSPAM dot com</strong>
   <a href="#75731" class="date">13-Jun-2007 07:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function to only remove the element the amount of times he appears in the second array. In other words, if you have Array(1, 1, 2) and Array(1), the return value should be Array(1, 2).<br />
So I built this function right here:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_once</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">()) &lt; </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr1 </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr2 </span><span class="keyword">= </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$arr2 </span><span class="keyword">as </span><span class="default">$remove</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((string)</span><span class="default">$v </span><span class="keyword">=== (string)</span><span class="default">$remove</span><span class="keyword">){ </span><span class="comment">//NOTE: if you need the diff to be STRICT, remove both the '(string)'s<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$arr1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break; </span><span class="comment">//That's pretty much the only difference from the real array_diff :P<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Handle more than 2 arguments<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$c </span><span class="keyword">&gt; </span><span class="default">2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr1 </span><span class="keyword">= </span><span class="default">array_diff_once</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">-</span><span class="default">$c</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr1</span><span class="keyword">;<br />
}<br />
</span><span class="default">$arr1 </span><span class="keyword">= Array(</span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"four"</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">, </span><span class="string">"color"</span><span class="keyword">=&gt;</span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"jon"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">);<br />
</span><span class="default">$arr2 </span><span class="keyword">= Array(</span><span class="string">"4"</span><span class="keyword">, </span><span class="string">"red"</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">, </span><span class="string">"green"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_once</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>This prints:<br />
Array ( [1] =&gt; blue [3] =&gt; green [name] =&gt; jon [4] =&gt; green )<br />
<br />
Note that it removes the elements left to right, opposite to what you might expect; in my case the order of elements had no importance. Fixing that would require a small variation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75547""></a>
  <div class="note">
   <strong class="user">tim at php dot user</strong>
   <a href="#75547" class="date">05-Jun-2007 05:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The description is wrong, array_diff() returns an array consisting of all elements in $array1 that are not in $array2. The example shows this.<br />
<br />
Thats how it works on my php anyway.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72792""></a>
  <div class="note">
   <strong class="user">ahigerd at stratitec dot com</strong>
   <a href="#72792" class="date">01-Feb-2007 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An earlier comment suggested using array_merge() to reindex the array. While this will work, array_values() is about 30-40% faster and accomplishes the same task.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68623""></a>
  <div class="note">
   
   <a href="#68623" class="date">03-Aug-2006 09:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_diff provides a handy way of deleting array elements by their value, without having to unset it by key, through a lengthy foreach loop and then having to rekey the array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//pass value you wish to delete and the array to delete from<br />
</span><span class="keyword">function </span><span class="default">array_delete</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, array(</span><span class="default">$value</span><span class="keyword">) );<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68399""></a>
  <div class="note">
   <strong class="user">Colin</strong>
   <a href="#68399" class="date">25-Jul-2006 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Undocumented return:&nbsp; it appears this will return NULL if an error occurs (e.g., an argument is not an array) and is not caught.<br />
<br />
&lt;?<br />
@array_diff(NULL, array(1));<br />
@array_diff(array(1), NULL);<br />
@array_diff();<br />
?&gt;<br />
<br />
All return NULL.&nbsp; (Note the "@")</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67976""></a>
  <div class="note">
   <strong class="user">ben dot lancaster at design-ontap dot co dot uk</strong>
   <a href="#67976" class="date">08-Jul-2006 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One common caveat of this function is that if the arrays match, an empty array is return, not a strict boolean. E.g.:<br />
<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= </span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">));<br />
</span><span class="comment">/*<br />
&nbsp;*Returns:<br />
&nbsp;* array(0) {<br />
&nbsp;* }<br />
&nbsp;*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62802""></a>
  <div class="note">
   <strong class="user">pavlicic at NOSPAM dot hotmail dot com</strong>
   <a href="#62802" class="date">09-Mar-2006 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// first array<br />
</span><span class="default">$vid_player </span><span class="keyword">= </span><span class="default">$vm</span><span class="keyword">-&gt;</span><span class="default">getVideosByPlayer</span><span class="keyword">(</span><span class="default">$player</span><span class="keyword">);<br />
<br />
</span><span class="comment">// second array<br />
</span><span class="default">$vid_playlist </span><span class="keyword">= </span><span class="default">$vm</span><span class="keyword">-&gt;</span><span class="default">getVideosByPlaylist</span><span class="keyword">(</span><span class="default">$playlist</span><span class="keyword">);<br />
<br />
</span><span class="comment">// this will not work...<br />
</span><span class="default">$vid_player </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$vid_player</span><span class="keyword">, </span><span class="default">$vid_playlist</span><span class="keyword">);<br />
<br />
</span><span class="comment">// but if you do this first...<br />
</span><span class="default">$videos </span><span class="keyword">= array();<br />
foreach ( </span><span class="default">$vid_player </span><span class="keyword">as </span><span class="default">$player </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$vid_playlist </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$vid_playlist </span><span class="keyword">as </span><span class="default">$video </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$player</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">== </span><span class="default">$video</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$videos</span><span class="keyword">[] = </span><span class="default">$player</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// this will work...<br />
</span><span class="default">$vid_player </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$vid_player</span><span class="keyword">, </span><span class="default">$videos</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>The first array_diff() compares two arrays only to find out that all the objects are unique!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60985""></a>
  <div class="note">
   <strong class="user">Jappie</strong>
   <a href="#60985" class="date">22-Jan-2006 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry for the bug in my last comment (probably rightfully removed by the admins).<br />
If you want to compare more than 2 arrays, or don't know how many arrays need to be compared, this is your function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># An extention to array_diff:<br />
# It returns an array of all values not present in all arrays given. If '$strict' is true,<br />
# it returns all values not present or not in the same order in all arrays given. The<br />
# arrays to compare must be placed in another array, which is used as argument '$arrays'.<br />
# Returns false if the '$arrays' is invalid.<br />
</span><span class="keyword">function </span><span class="default">array_rdiff </span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># check if argument is valid.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arrays </span><span class="keyword">as </span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># set working variables<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff&nbsp; &nbsp; </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$amount&nbsp; </span><span class="keyword">= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$needles </span><span class="keyword">= </span><span class="default">array_shift </span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># compare<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$n </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">$amount</span><span class="keyword">; </span><span class="default">$n</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$m </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$needles</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">]; </span><span class="default">$m</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positions </span><span class="keyword">= array (</span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arrays </span><span class="keyword">as </span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">array_search </span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">], </span><span class="default">$haystack</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$strict</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$positions</span><span class="keyword">[] = </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$found</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">[] = </span><span class="default">$needle</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$strict </span><span class="keyword">&amp;&amp; (</span><span class="default">count </span><span class="keyword">(</span><span class="default">array_unique </span><span class="keyword">(</span><span class="default">$positions</span><span class="keyword">)) &gt; </span><span class="default">1</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$diff</span><span class="keyword">[] = </span><span class="default">$needle</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrays</span><span class="keyword">[] = </span><span class="default">$needles</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needles&nbsp; </span><span class="keyword">= </span><span class="default">array_shift </span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_unique </span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60975""></a>
  <div class="note">
   <strong class="user">Simon Riget at paragi.dk</strong>
   <a href="#60975" class="date">22-Jan-2006 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple multidimentional key aware array_diff function.<br />
&nbsp;&nbsp;&nbsp; <br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
</span><span class="keyword">function </span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">){<br />
&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$dv</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Compare values<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">)===</span><span class="default">false</span><span class="keyword">) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$dv</span><span class="keyword">) </span><span class="default">$diff</span><span class="keyword">[]=</span><span class="default">$dv</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// Compare noninteger keys<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$dv</span><span class="keyword">=</span><span class="default">arr_diff</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$dv</span><span class="keyword">) </span><span class="default">$diff</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$dv</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$diff</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This function meets my immidiate needs but I'm shure it can be improved.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60420""></a>
  <div class="note">
   <strong class="user">doug at NOSPAM dot thrutch dot co dot uk</strong>
   <a href="#60420" class="date">06-Jan-2006 01:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After spending half an hour scratching my head wondering why this function wasn't working I realised I had the arguments the wrong way round!<br />
<br />
I needed to remove the contents of $array1 from $array2 so I tried:<br />
<br />
<span class="default">&lt;?php<br />
$diff&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$members1</span><span class="keyword">, </span><span class="default">$members2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
WRONG!! A quick swap around and things worked smoothly...<br />
<br />
<span class="default">&lt;?php<br />
$diff&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$members2</span><span class="keyword">, </span><span class="default">$members1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this saves someone a bit of bother</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60344""></a>
  <div class="note">
   <strong class="user">air at multi dot fi</strong>
   <a href="#60344" class="date">04-Jan-2006 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A small thing that caused me trouble today, wich I don't see listed on this page is that array_diff keeps the placing for the uniqe values, and removes the duplicated. This gives us empty fields in the array, wich caused me a lot of trouble. The solutions was simply to use array_merge() around the array_diff.<br />
<br />
For example: <br />
$array1 = array('blue', 'red', 'green');<br />
$array2 = array('red');<br />
<br />
array_diff($array1, $array2);<br />
<br />
Will give us:<br />
------<br />
Array<br />
(<br />
&nbsp;&nbsp; [0] =&gt; red<br />
&nbsp;&nbsp; [1] =&gt; <br />
&nbsp;&nbsp; [2] =&gt; green<br />
)<br />
<br />
But if we use:<br />
<br />
array_merge(array_diff($array1, $array2));<br />
<br />
We will get:<br />
------<br />
Array<br />
(<br />
&nbsp;&nbsp; [0] =&gt; red<br />
&nbsp;&nbsp; [1] =&gt; green<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60320""></a>
  <div class="note">
   <strong class="user">Viking Coder</strong>
   <a href="#60320" class="date">03-Jan-2006 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To anybody wanting a double-sided array_diff - mentioned by rudigier at noxx dot at. Remember, array_diff gives you everything in the first array that isn't in the subsequent arrays. <br />
<br />
$array1=array('blue','red','green');<br />
$array2=array('blue','yellow','green');<br />
<br />
array_merge(array_diff($array1, $array2),array_diff($array2, $array1));<br />
<br />
Result<br />
------<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; red<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; yellow<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59761""></a>
  <div class="note">
   <strong class="user">white_phoenix at ru dot ru</strong>
   <a href="#59761" class="date">15-Dec-2005 08:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To: effectpenguin at antarctida dot ru<br />
Re: interesting effect<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arraycpy</span><span class="keyword">(&amp;</span><span class="default">$target</span><span class="keyword">,&amp;</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$target</span><span class="keyword">)) {</span><span class="default">$target </span><span class="keyword">= array();}<br />
&nbsp;foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {if (</span><span class="default">$k </span><span class="keyword">!= </span><span class="string">"GLOBALS"</span><span class="keyword">) {</span><span class="default">$target</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;}}<br />
}<br />
</span><span class="default">arraycpy</span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">,</span><span class="default">$GLOBALS</span><span class="keyword">);<br />
</span><span class="comment">// some actions with variables:<br />
</span><span class="default">$homer </span><span class="keyword">= </span><span class="string">"beer"</span><span class="keyword">;<br />
</span><span class="default">arraycpy</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">,</span><span class="default">$GLOBALS</span><span class="keyword">);<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">,</span><span class="default">$old</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>array(1) {<br />
&nbsp; ["homer"]=&gt;<br />
&nbsp; string(4) "beer"<br />
}<br />
Windows NT WPX_NB 5.1 build 2600 PHP/5.0.4</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52044""></a>
  <div class="note">
   <strong class="user">rafmav</strong>
   <a href="#52044" class="date">20-Apr-2005 01:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a few functions to do a fast diff between two arrays in a few lines.<br />
You can use it with other functions described in the function array_merge : array_merge_replace from an other user, and two functions using it : array_merge_diff and array_merge_diff_reverse.<br />
Note that the keys are preserved!<br />
&lt;?<br />
// returns a two dimensions array with the deleted data<br />
// and the added data<br />
function array_diff_both($new,$old)<br />
{<br />
&nbsp;&nbsp;&nbsp; $del=array_diff_assoc($old,$new);<br />
&nbsp;&nbsp;&nbsp; $add=array_diff_assoc($new,$old);<br />
&nbsp;&nbsp;&nbsp; return $diff=array("del"=&gt;$del, "add"=&gt;$add);<br />
}<br />
<br />
// returns a two dimensions array with the equal data,<br />
// deleted data and the added data<br />
function array_diff_all($arr_new,$arr_old)<br />
{<br />
&nbsp;&nbsp;&nbsp; $arr_equ=array_intersect_assoc($arr_new,$arr_old);<br />
&nbsp;&nbsp;&nbsp; $arr_del=array_diff_assoc($arr_old,$arr_new);<br />
&nbsp;&nbsp;&nbsp; $arr_add=array_diff_assoc($arr_new,$arr_old);<br />
&nbsp;&nbsp;&nbsp; return $diff=array("equ"=&gt;$arr_equ, "del"=&gt;$arr_del, "add"=&gt;$arr_add);<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48583""></a>
  <div class="note">
   <strong class="user">j dot j dot d dot mol at ewi dot tudelft dot nl</strong>
   <a href="#48583" class="date">31-Dec-2004 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is some code to take the difference of two arrays. It allows custom modifications like prefixing with a certain string (as shown) or custom compare functions.<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;</span><span class="comment">// returns all elements in $all which are not in $used in O(n log n) time.<br />
&nbsp; // elements from $all are prefixed with $prefix_all.<br />
&nbsp; // elements from $used are prefixed with $prefix_used.<br />
&nbsp; </span><span class="keyword">function </span><span class="default">filter_unused</span><span class="keyword">( </span><span class="default">$all</span><span class="keyword">, </span><span class="default">$used</span><span class="keyword">, </span><span class="default">$prefix_all </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$prefix_used </span><span class="keyword">= </span><span class="string">"" </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$unused </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// prefixes are not needed for sorting<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$all </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">sort</span><span class="keyword">( </span><span class="default">$used </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$u </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$maxa </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$all</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$maxu </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$used</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; while( </span><span class="default">true </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$a </span><span class="keyword">&gt; </span><span class="default">$maxa </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// done; rest of $used isn't in $all<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$u </span><span class="keyword">&gt; </span><span class="default">$maxu </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// rest of $all is unused<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for( ; </span><span class="default">$a </span><span class="keyword">&lt;= </span><span class="default">$maxa</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$unused</span><span class="keyword">[] = </span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$prefix_all</span><span class="keyword">.</span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] &gt; </span><span class="default">$prefix_used</span><span class="keyword">.</span><span class="default">$used</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $used[$u] isn't in $all?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$prefix_all</span><span class="keyword">.</span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] == </span><span class="default">$prefix_used</span><span class="keyword">.</span><span class="default">$used</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">] ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// $all[$a] is used<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$unused</span><span class="keyword">[] = </span><span class="default">$all</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$unused</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37527""></a>
  <div class="note">
   
   <a href="#37527" class="date">19-Nov-2003 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From the page:
<br />
Note:&nbsp; Please note that this function only checks one dimension of a n-dimensional array. Of course you can check deeper dimensions by using array_diff($array1[0], $array2[0]);
<br />

<br />
I've found a way to bypass that. I had 2 arrays made of arrays.
<br />
I wanted to extract from the first array all the arrays not found in the second array. So I used the serialize() function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_serialize</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">){
<br />
&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
}
<br />

<br />
function </span><span class="default">my_unserialize</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">){
<br />
&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
}
<br />

<br />
&nbsp;</span><span class="comment">//make a copy
<br />
</span><span class="default">$first_array_s </span><span class="keyword">= </span><span class="default">$first_array</span><span class="keyword">;
<br />
</span><span class="default">$second_array_s </span><span class="keyword">= </span><span class="default">$second_array</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// serialize all sub-arrays
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$first_array_s</span><span class="keyword">,</span><span class="string">'my_serialize'</span><span class="keyword">); 
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$second_array_s</span><span class="keyword">,</span><span class="string">'my_serialize'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// array_diff the serialized versions
<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$first_array_s</span><span class="keyword">,</span><span class="default">$second_array_s</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// unserialize the result
<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">,</span><span class="string">'my_unserialize'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">// you've got it!
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$diff</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30642""></a>
  <div class="note">
   <strong class="user">r dot kirschke at gmx dot net</strong>
   <a href="#30642" class="date">24-Mar-2003 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Are you looking for a function which returns an edit script (a set of insert and delete instructions on how to change one array into another)? At least, that's what I hoped to find here, so here's some code based on <a href="http://www.cs.arizona.edu/people/gene/PAPERS/diff.ps :" rel="nofollow" target="_blank">http://www.cs.arizona.edu/people/gene/PAPERS/diff.ps :</a>
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">diff_rek</span><span class="keyword">(&amp;</span><span class="default">$a1</span><span class="keyword">,&amp;</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">,&amp;</span><span class="default">$vbck</span><span class="keyword">)
<br />
{
<br />
&nbsp;</span><span class="default">$x</span><span class="keyword">=</span><span class="default">$vbck</span><span class="keyword">[</span><span class="default">$D</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">]; </span><span class="default">$y</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">-</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;if (</span><span class="default">$D</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;{
<br />
&nbsp; if (</span><span class="default">$x</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) return array(array(),array());
<br />
&nbsp; else
<br />
&nbsp; return array(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">),</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">));
<br />
&nbsp;}
<br />
&nbsp;</span><span class="default">$x2</span><span class="keyword">=</span><span class="default">$vbck</span><span class="keyword">[</span><span class="default">$D</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;</span><span class="default">$y2</span><span class="keyword">=</span><span class="default">$vbck</span><span class="keyword">[</span><span class="default">$D</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]-(</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$xdif</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">-</span><span class="default">$x2</span><span class="keyword">; </span><span class="default">$ydif</span><span class="keyword">=</span><span class="default">$y</span><span class="keyword">-</span><span class="default">$y2</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">$l</span><span class="keyword">=</span><span class="default">min</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">-</span><span class="default">$x2</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">-</span><span class="default">$y2</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$x</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">-</span><span class="default">$l</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">$y</span><span class="keyword">=</span><span class="default">$y</span><span class="keyword">-</span><span class="default">$l</span><span class="keyword">;
<br />
&nbsp;if (</span><span class="default">$x</span><span class="keyword">==</span><span class="default">$x2</span><span class="keyword">)
<br />
&nbsp;{
<br />
&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">=</span><span class="default">diff_rek</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$vbck</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="string">"2"</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (</span><span class="default">$l</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">));
<br />
&nbsp;&nbsp; }
<br />
&nbsp;}
<br />
&nbsp;else
<br />
&nbsp;{
<br />
&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">=</span><span class="default">diff_rek</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$vbck</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]);
<br />
&nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="string">"1"</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (</span><span class="default">$l</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">],</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">));
<br />
&nbsp;&nbsp; }
<br />
&nbsp;}
<br />
&nbsp;return </span><span class="default">$res</span><span class="keyword">;
<br />
}
<br />

<br />
function </span><span class="default">arr_diff</span><span class="keyword">(&amp;</span><span class="default">$a1</span><span class="keyword">,&amp;</span><span class="default">$a2</span><span class="keyword">)
<br />
{
<br />
&nbsp;</span><span class="default">$max</span><span class="keyword">=</span><span class="default">70</span><span class="keyword">;
<br />
&nbsp;</span><span class="default">$c1</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$c2</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a2</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$v</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;for (</span><span class="default">$D</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$D</span><span class="keyword">&lt;=</span><span class="default">$max</span><span class="keyword">; </span><span class="default">$D</span><span class="keyword">++)
<br />
&nbsp;{
<br />
&nbsp;&nbsp; for (</span><span class="default">$k</span><span class="keyword">=-</span><span class="default">$D</span><span class="keyword">; </span><span class="default">$k</span><span class="keyword">&lt;=</span><span class="default">$D</span><span class="keyword">; </span><span class="default">$k</span><span class="keyword">=</span><span class="default">$k</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">)
<br />
&nbsp; {
<br />
&nbsp;&nbsp; if ((</span><span class="default">$k</span><span class="keyword">==-</span><span class="default">$D</span><span class="keyword">) || (</span><span class="default">$k</span><span class="keyword">!=</span><span class="default">$D </span><span class="keyword">&amp;&amp; </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]&lt;</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]+</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; </span><span class="default">$y</span><span class="keyword">=</span><span class="default">$x</span><span class="keyword">-</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;&nbsp; while ((</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">$c1</span><span class="keyword">)&amp;&amp;(</span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">$c2</span><span class="keyword">)&amp;&amp;(</span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]==</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$y</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$x</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$x</span><span class="keyword">&gt;=</span><span class="default">$c1</span><span class="keyword">)&amp;&amp;(</span><span class="default">$y</span><span class="keyword">&gt;=</span><span class="default">$c2</span><span class="keyword">))
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vbck</span><span class="keyword">[</span><span class="default">$D</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">diff_rek</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$D</span><span class="keyword">,</span><span class="default">$c1</span><span class="keyword">-</span><span class="default">$c2</span><span class="keyword">,</span><span class="default">$vbck</span><span class="keyword">);
<br />
&nbsp;&nbsp; };
<br />
&nbsp; }
<br />
&nbsp; </span><span class="default">$vbck</span><span class="keyword">[</span><span class="default">$D</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;
<br />
&nbsp;};
<br />
&nbsp;return -</span><span class="default">1</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This works on arrays of all elements for which the operator "==" is defined.
<br />
arr_dif($a1,$a2) returns an array of two arrays:
<br />
$result[0] = array of elements from $a1 and $a2
<br />
$result[1] = array of chars - one for each element from $result[0]:
<br />
&nbsp;"1" : The corresponding element is from $a1
<br />
&nbsp;"2" : The corresponding element is from $a2
<br />
&nbsp;"b" : The correspondig element is from both source arrays
<br />
The function returns -1, when the number of different elements is greater than $max
<br />

<br />
Example: 
<br />
$a1=array("hello","world");
<br />
$a2=array("good","bye","world");
<br />
=&gt; arr_diff($a1,$a2) = array(array("hello","good","bye","world"), array("1","2","2","b"));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29808""></a>
  <div class="note">
   <strong class="user">csaba2000 at yahoo dot com</strong>
   <a href="#29808" class="date">25-Feb-2003 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_key_diff</span><span class="keyword">(</span><span class="default">$ar1</span><span class="keyword">, </span><span class="default">$ar2</span><span class="keyword">) {&nbsp; </span><span class="comment">// , $ar3, $ar4, ...
<br />
&nbsp;&nbsp;&nbsp; // returns copy of array $ar1 with those entries removed
<br />
&nbsp;&nbsp;&nbsp; // whose keys appear as keys in any of the other function args
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aSubtrahends </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$ar1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$aSubtrahends </span><span class="keyword">as </span><span class="default">$aSubtrahend</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$aSubtrahend</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset (</span><span class="default">$ar1</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ar1</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"catty"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"batty"</span><span class="keyword">, </span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"aunty"</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="default">2.9 </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">, </span><span class="string">"n" </span><span class="keyword">=&gt; </span><span class="string">"nutty"</span><span class="keyword">);
<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="default">9</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="string">"ditty"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"bratty"</span><span class="keyword">, </span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">13</span><span class="keyword">);
<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">array_key_diff </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, array(</span><span class="default">5 </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
$c is then equivalent to array('c' =&gt; 'catty', 6 =&gt; 11, 'n' =&gt; 'nutty')
<br />

<br />
Csaba Gabor from New York</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29742""></a>
  <div class="note">
   <strong class="user">ds2u  at the  hotmail  dot  com</strong>
   <a href="#29742" class="date">24-Feb-2003 01:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yes you can get rid of gaps/missing keys by using:
<br />

<br />
<span class="default">&lt;?php
<br />
$result </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
But to drop the storage of void spaces (actually a line feed) which are irritatingly indexed when reading from files - just use difference:
<br />

<br />
<span class="default">&lt;?php
<br />
$array </span><span class="keyword">= array ();
<br />
</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
dst</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24099""></a>
  <div class="note">
   <strong class="user">drNOSPAMtdiggersSPAMNO at hotmail dot com</strong>
   <a href="#24099" class="date">06-Aug-2002 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_diff does not have buggy behavior as described above.&nbsp; The problem stems from calling array_diff() each time in the loop, therefore regererating a new array with an index always at the beginning EVERY time, so each will always pick the first entry.&nbsp; This is not buggy, but in fact what you've told the program to do :)&nbsp; The solution is not as much a solution, but properly instructing the program what to do!<br />
<br />
Cheers!<br />
TheoDiggers</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="16097""></a>
  <div class="note">
   <strong class="user">SeanECoates at !donotspam!yahoo dot ca</strong>
   <a href="#16097" class="date">16-Oct-2001 07:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just came upon a really good use for array_diff(). When reading a dir(opendir;readdir), I _rarely_ want "." or ".." to be in the array of files I'm creating. Here's a simple way to remove them:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;$someFiles </span><span class="keyword">= array();
<br />
&nbsp;</span><span class="default">$dp </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">"/some/dir"</span><span class="keyword">);
<br />
&nbsp;while(</span><span class="default">$someFiles</span><span class="keyword">[] = </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dp</span><span class="keyword">));
<br />
&nbsp;</span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dp</span><span class="keyword">);
<br />
&nbsp;
<br />
&nbsp;</span><span class="default">$removeDirs </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">,</span><span class="string">".."</span><span class="keyword">);
<br />
&nbsp;</span><span class="default">$someFiles </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$someFiles</span><span class="keyword">, </span><span class="default">$removeDirs</span><span class="keyword">);
<br />
&nbsp;
<br />
&nbsp;foreach(</span><span class="default">$someFiles </span><span class="keyword">AS </span><span class="default">$thisFile</span><span class="keyword">) echo </span><span class="default">$thisFile</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
S</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
