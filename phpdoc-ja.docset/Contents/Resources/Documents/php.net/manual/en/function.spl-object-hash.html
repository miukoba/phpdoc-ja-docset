<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定したオブジェクトのハッシュ ID を返す</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.spl-classes.html">≪ spl_classes</a></li>
      <li style="float: right;"><a href="spl.files.html">ファイル操作 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.spl.html">SPL 関数</a></li>
    <li>指定したオブジェクトのハッシュ ID を返す</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.spl-object-hash" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">spl_object_hash</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0)</p><p class="refpurpose"><span class="refname">spl_object_hash</span> &mdash; <span class="dc-title">
   指定したオブジェクトのハッシュ ID を返す
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.spl-object-hash-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>spl_object_hash</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$obj</code></span>
   )</div>

  <p class="para rdfs-comment">
   この関数は、オブジェクトの一意な識別子を返します。この ID は、
   オブジェクトを保存する際のハッシュのキーとして使用できますし、
   オブジェクトを識別するための値として使用することもできます。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.spl-object-hash-parameters">
   <h3 class="title">パラメータ</h3>
   <p class="para">
    <dl>

     
      <dt>
<code class="parameter">object</code></dt>

      <dd>

       <p class="para">
        何らかのオブジェクト。
       </p>
      </dd>

     
    </dl>

   </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.spl-object-hash-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   現在存在する各オブジェクトに固有で、同一オブジェクトに対しては常に同じ値となる文字列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.spl-object-hash-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4044">
    <p><strong>例1 <span class="function"><strong>spl_object_hash()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">spl_object_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$storage</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$object</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.spl-object-hash-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    オブジェクトが破壊されるとき、そのハッシュが他のオブジェクトで再利用されてしまうことがあります。
   </p>
  </p></blockquote>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112199""></a>
  <div class="note">
   <strong class="user">mjs at beebo dot org</strong>
   <a href="#112199" class="date">16-May-2013 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that given two different objects spl_object_hash() can return values that look very similar, and in fact both the most significant *and* least significant digits are likely to be identical!&nbsp; e.g. "000000003cc56d770000000007fa48c5" and "000000003cc56d0d0000000007fa48c5".<br />
<br />
Therefore (especially if using this function for debugging), you may wish to pass the hash into a cryptographic hash function like md5() to get to facilitate visual comparisons, and make it more likely that the first few or last few digits are unique.<br />
<br />
md5("000000003cc56d770000000007fa48c5") -&gt; "619a799747d348fa1caf181a72b65d9f"<br />
<br />
md5("000000003cc56d0d0000000007fa48c5") -&gt; "ae964bc912281e7804fe5a88b4546cb2"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87422""></a>
  <div class="note">
   <strong class="user">Rafael M. Salvioni</strong>
   <a href="#87422" class="date">04-Dec-2008 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The follow function is a implementation of the PHP´s function spl_object_hash(), unavailable in versions less 5.2.0.<br />
<br />
But, the algorithm of this function is different of the original PHP´s function.<br />
<br />
(Sorry... my english is very bad...)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'spl_object_hash'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Returns the hash of the unique identifier for the object.<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param object $object Object<br />
&nbsp;&nbsp; &nbsp; * @author Rafael M. Salvioni<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">spl_object_hash</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">(); </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">); </span><span class="default">$dump </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="default">ob_end_clean</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^object\(([a-z0-9_]+)\)\#(\d)+/i'</span><span class="keyword">, </span><span class="default">$dump</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] . </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">. </span><span class="string">"() expects parameter 1 to be object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76220""></a>
  <div class="note">
   <strong class="user">planetbeing</strong>
   <a href="#76220" class="date">06-Jul-2007 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the contents (properties) of the object are NOT hashed by the function, merely its internal handle and handler table pointer. This is sufficient to guarantee that any two objects simultaneously co-residing in memory will have different hashes. Uniqueness is not guaranteed between objects that did not reside in memory simultaneously, for example:<br />
<br />
var_dump(spl_object_hash(new stdClass()), spl_object_hash(new stdClass()));<br />
<br />
Running this alone will usually generate the same hashes, since PHP reuses the internal handle for the first stdClass after it has been dereferenced and destroyed when it creates the second stdClass.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
