<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ArrayObject クラス</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="spl.misc.html">≪ その他のクラスおよびインターフェイス</a></li>
      <li style="float: right;"><a href="arrayobject.append.html">ArrayObject::append ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="spl.misc.html">その他のクラスおよびインターフェイス</a></li>
    <li>ArrayObject クラス</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.arrayobject" class="reference">
 <h1 class="title">ArrayObject クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 

  <div class="section" id="arrayobject.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    このクラスは、オブジェクトを配列として動作させます。
   </p>
  </div>

 
  <div class="section" id="arrayobject.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">ArrayObject</strong>
     </span>

     <span class="oointerface">implements 
      <span class="interfacename"><a href="class.iteratoraggregate.html" class="interfacename">IteratorAggregate</a></span>
     </span>
 
     <span class="oointerface">, 
      <span class="interfacename"><a href="class.arrayaccess.html" class="interfacename">ArrayAccess</a></span>
     </span>
 
     <span class="oointerface">, 
      <span class="interfacename"><a href="class.serializable.html" class="interfacename">Serializable</a></span>
     </span>

     <span class="oointerface">, 
      <span class="interfacename"><a href="class.countable.html" class="interfacename">Countable</a></span>
     </span>
 
     {</div>
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* 定数 */</div>
    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.arrayobject.html#arrayobject.constants.std-prop-list"><var class="varname">STD_PROP_LIST</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.arrayobject.html#arrayobject.constants.array-as-props"><var class="varname">ARRAY_AS_PROPS</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>



 
    
 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="arrayobject.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$input</code><span class="initializer"> = []</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$iterator_class</code><span class="initializer"> = &quot;ArrayIterator&quot;</span></span>
  ]]] )</div>

    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.append.html" class="methodname">append</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.asort.html" class="methodname">asort</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="arrayobject.count.html" class="methodname">count</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="arrayobject.exchangearray.html" class="methodname">exchangeArray</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$input</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="arrayobject.getarraycopy.html" class="methodname">getArrayCopy</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="arrayobject.getflags.html" class="methodname">getFlags</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">ArrayIterator</span> <span class="methodname"><a href="arrayobject.getiterator.html" class="methodname">getIterator</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="arrayobject.getiteratorclass.html" class="methodname">getIteratorClass</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.ksort.html" class="methodname">ksort</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.natcasesort.html" class="methodname">natcasesort</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.natsort.html" class="methodname">natsort</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="arrayobject.offsetexists.html" class="methodname">offsetExists</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="arrayobject.offsetget.html" class="methodname">offsetGet</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.offsetset.html" class="methodname">offsetSet</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newval</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.offsetunset.html" class="methodname">offsetUnset</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="arrayobject.serialize.html" class="methodname">serialize</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.setflags.html" class="methodname">setFlags</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.setiteratorclass.html" class="methodname">setIteratorClass</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$iterator_class</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.uasort.html" class="methodname">uasort</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$cmp_function</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.uksort.html" class="methodname">uksort</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$cmp_function</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="arrayobject.unserialize.html" class="methodname">unserialize</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$serialized</code></span>
   )</div>

   }</div>
 
  </div>
 
  <div class="section" id="arrayobject.constants">
   <h2 class="title">定義済み定数</h2>
   <div class="section" id="arrayobject.constants.flags">
    <h2 class="title">ArrayObject の定数</h2>
    <dl>


     
      <dt id="arrayobject.constants.std-prop-list"><strong><code>ArrayObject::STD_PROP_LIST</code></strong></dt>

      <dd>

       <p class="para">オブジェクトのプロパティは (var_dump, foreachなどで) 配列としてアクセスしたときと同じ機能を持ちます</p>
      </dd>

     

     
      <dt id="arrayobject.constants.array-as-props"><strong><code>ArrayObject::ARRAY_AS_PROPS</code></strong></dt>

      <dd>

       <p class="para">オブジェクトのエントリはプロパティとしてアクセスできます(読み書き可)</p>
      </dd>

     
    </dl>

   </div>
  </div>

  <div class="section">
   <h2 class="title">変更履歴</h2>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>バージョン</th>
        <th>説明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>5.3.0</td>
        <td>
         <span class="interfacename"><a href="class.serializable.html" class="interfacename">Serializable</a></span> を実装しました。
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>

 

 
 </div>
 
 








































































































































































 
<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="arrayobject.append.html">ArrayObject::append</a> &mdash; 値を追加する</li><li><a href="arrayobject.asort.html">ArrayObject::asort</a> &mdash; 値でエントリをソートする</li><li><a href="arrayobject.construct.html">ArrayObject::__construct</a> &mdash; 新規配列オブジェクトを生成する</li><li><a href="arrayobject.count.html">ArrayObject::count</a> &mdash; ArrayObject の public プロパティの数を取得する</li><li><a href="arrayobject.exchangearray.html">ArrayObject::exchangeArray</a> &mdash; 配列を別の配列と交換する</li><li><a href="arrayobject.getarraycopy.html">ArrayObject::getArrayCopy</a> &mdash; ArrayObject のコピーを作成する</li><li><a href="arrayobject.getflags.html">ArrayObject::getFlags</a> &mdash; 振る舞いのフラグを取得する</li><li><a href="arrayobject.getiterator.html">ArrayObject::getIterator</a> &mdash; ArrayObject インスタンスから新規イテレータを生成する</li><li><a href="arrayobject.getiteratorclass.html">ArrayObject::getIteratorClass</a> &mdash; ArrayObject のイテレータクラス名を取得する</li><li><a href="arrayobject.ksort.html">ArrayObject::ksort</a> &mdash; キーでエントリをソートする</li><li><a href="arrayobject.natcasesort.html">ArrayObject::natcasesort</a> &mdash; 大文字小文字を区別しない &quot;自然順&quot; アルゴリズムでエントリをソートする</li><li><a href="arrayobject.natsort.html">ArrayObject::natsort</a> &mdash; &quot;自然順&quot; アルゴリズムでエントリをソートする</li><li><a href="arrayobject.offsetexists.html">ArrayObject::offsetExists</a> &mdash; 要求されたインデックスが存在するかどうかを返す</li><li><a href="arrayobject.offsetget.html">ArrayObject::offsetGet</a> &mdash; 指定したインデックスの値を返す</li><li><a href="arrayobject.offsetset.html">ArrayObject::offsetSet</a> &mdash; 指定したインデックスに新しい値をセットする</li><li><a href="arrayobject.offsetunset.html">ArrayObject::offsetUnset</a> &mdash; 指定したインデックスの値を解除する</li><li><a href="arrayobject.serialize.html">ArrayObject::serialize</a> &mdash; ArrayObject をシリアライズする</li><li><a href="arrayobject.setflags.html">ArrayObject::setFlags</a> &mdash; 処理フラグを設定する</li><li><a href="arrayobject.setiteratorclass.html">ArrayObject::setIteratorClass</a> &mdash; ArrayObject のイテレータクラス名を設定する</li><li><a href="arrayobject.uasort.html">ArrayObject::uasort</a> &mdash; ユーザー定義の比較関数でエントリをソートし、キーとの対応は保持する</li><li><a href="arrayobject.uksort.html">ArrayObject::uksort</a> &mdash; ユーザー定義の比較関数を使って、キーでエントリをソートする</li><li><a href="arrayobject.unserialize.html">ArrayObject::unserialize</a> &mdash; ArrayObject をアンシリアライズする</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112949""></a>
  <div class="note">
   <strong class="user">rwn dot gallego at gmail dot com</strong>
   <a href="#112949" class="date">12-Aug-2013 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a better explanation about the ArrayObject flags (STD_PROP_LIST and ARRAY_AS_PROPS) right here: <br />
<br />
<a href="http://stackoverflow.com/a/16619183/1019305" rel="nofollow" target="_blank">http://stackoverflow.com/a/16619183/1019305</a><br />
<br />
Thanks to JayTaph</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110558""></a>
  <div class="note">
   <strong class="user">mehea</strong>
   <a href="#110558" class="date">07-Nov-2012 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Long story short b/c arrays by default are passed by value, if you pass an array to a function, the function works on a copy of the array while the original array remains unaltered by the function.
<br />

<br />
You may cause a change to the array to be reflected in the original array by having the function return the altered array and assign it to the variable for the original array, as follows:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_array_modify</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) { 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">] = </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$data</span><span class="keyword">;&nbsp; &nbsp;&nbsp; 
<br />
} 
<br />

<br />
</span><span class="default">$regularArray </span><span class="keyword">= array(); 
<br />

<br />
</span><span class="default">$regularArray</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">; 
<br />
&nbsp;
<br />
</span><span class="default">$regularArray </span><span class="keyword">= </span><span class="default">my_array_modify</span><span class="keyword">(</span><span class="default">$regularArray</span><span class="keyword">); 
<br />

<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$regularArray</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">]); </span><span class="comment">// 2 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Or, you may explicitly pass the array by reference in which case there is no need for the function to return the array since the change will have effected the original array, as follows:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">my_arrayref_modify</span><span class="keyword">(&amp;</span><span class="default">$data</span><span class="keyword">) { 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">[</span><span class="string">'bb'</span><span class="keyword">] = </span><span class="default">22</span><span class="keyword">;
<br />
} 
<br />
</span><span class="default">my_arrayref_modify</span><span class="keyword">(</span><span class="default">$regularArray</span><span class="keyword">);
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$regularArray</span><span class="keyword">[</span><span class="string">'bb'</span><span class="keyword">]); </span><span class="comment">// 22
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107079""></a>
  <div class="note">
   <strong class="user">php5 dot man at lightning dot hu</strong>
   <a href="#107079" class="date">05-Jan-2012 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As you know ArrayObject is not an array so you can't use the built in array functions. Here's a trick around that:<br />
<br />
Extend the ArrayObject class with your own and implement this magic method:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">$argv</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">) || </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">) !== </span><span class="string">'array_'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">BadMethodCallException</span><span class="keyword">(</span><span class="default">__CLASS__</span><span class="keyword">.</span><span class="string">'-&gt;'</span><span class="keyword">.</span><span class="default">$func</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$func</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getArrayCopy</span><span class="keyword">()), </span><span class="default">$argv</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Now you can do this with any array_* function:<br />
<span class="default">&lt;?php<br />
$yourObject</span><span class="keyword">-&gt;</span><span class="default">array_keys</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span>- Don't forget to ommit the first parameter - it's automatic!<br />
<br />
Note: You might want to write your own functions if you're working with large sets of data.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105481""></a>
  <div class="note">
   <strong class="user">MarkAndrewSlade at gmail dot com</strong>
   <a href="#105481" class="date">22-Aug-2011 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found the description of STD_PROP_LIST a bit vague, so I put together a simple demonstration to show its behavior:<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
$a </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(array(), </span><span class="default">ArrayObject</span><span class="keyword">::</span><span class="default">STD_PROP_LIST</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'arr'</span><span class="keyword">] = </span><span class="string">'array data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">prop </span><span class="keyword">= </span><span class="string">'prop data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'arr'</span><span class="keyword">] = </span><span class="string">'array data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">prop </span><span class="keyword">= </span><span class="string">'prop data'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">// ArrayObject Object&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
//&nbsp; &nbsp; &nbsp; [prop] =&gt; prop data&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">// ArrayObject Object&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// (&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
//&nbsp; &nbsp; &nbsp; [arr] =&gt; array data&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
// )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105005""></a>
  <div class="note">
   <strong class="user">marijn at sensimedia dot nl</strong>
   <a href="#105005" class="date">21-Jul-2011 09:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A gotcha that is indeed mentioned in the manual, but isn't readily obvious and just cost me half an hour:<br />
<br />
Objects implementing the Serializable interface do NOT get __sleep and __wakeup called; instead, they use serialize and unserialize methods, respectively (why, I don't know, but whatever - I'm sure there's a reason).<br />
<br />
Hence, I was trying to serialize a database resultset in an object extending ArrayObject, and needed to fix some stuff regarding database resources on serialize. Took me a while to figure out __sleep wasn't getting called because ArrayObjects implements Serialize...<br />
<br />
Presumably the ArrayObject internally implements the serialize/unserialize methods (in a trivial manner), hence the error wasn't apparent immediately (i.e., no fatal error was thrown) and I'd been trying to track why my objects didn't get serialized (they were of course) instead of renaming and fixing the methods.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103508""></a>
  <div class="note">
   <strong class="user">sfinktah at php dot spamtrak dot org</strong>
   <a href="#103508" class="date">17-Apr-2011 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you plan to derive your own class from ArrayObject, and&nbsp; wish to maintain complete ArrayObject functionality (such as being able to cast to an array), it is necessary to use ArrayObject's own private property "storage".
<br />

<br />
Since that is impossible to do directly, you must use ArrayObject's offset{Set,Get,Exists,Unset} methods to manipulate it indirectly.
<br />

<br />
As a side benefit, this means you inherit all the iteration and other functions in complete working order.
<br />

<br />
This may sound obvious to someone who has never implemented their own ArrayObject class...&nbsp; but it is far from so.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">MyArrayObject </span><span class="keyword">extends </span><span class="default">ArrayObject </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static </span><span class="default">$debugLevel </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; static public function </span><span class="default">sdprintf</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (static::</span><span class="default">$debugLevel </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"printf"</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetGet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetSet</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetExists</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">offsetUnset</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">sdprintf</span><span class="keyword">(</span><span class="string">"%s(%s)\n"</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">parent</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">func_get_args</span><span class="keyword">());
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$mao </span><span class="keyword">= new </span><span class="default">MyArrayObject</span><span class="keyword">();
<br />
</span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">] = </span><span class="string">"bob"</span><span class="keyword">;
<br />
</span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"friend"</span><span class="keyword">] = </span><span class="string">"jane"</span><span class="keyword">;
<br />
</span><span class="default">print_r</span><span class="keyword">((array)</span><span class="default">$mao</span><span class="keyword">);
<br />

<br />
</span><span class="comment">/* Output:
<br />
&nbsp;
<br />
offsetSet(name,bob)
<br />
offsetSet(friend,jane)
<br />
Array
<br />
(
<br />
&nbsp;&nbsp;&nbsp; [name] =&gt; bob
<br />
&nbsp;&nbsp;&nbsp; [friend] =&gt; jane
<br />
)&nbsp; &nbsp; &nbsp;&nbsp; */
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If you wish to use the "Array as Properties" flag, you simply need to include this in your constructor: 
<br />

<br />
<span class="default">&lt;?php parent</span><span class="keyword">::</span><span class="default">setFlags</span><span class="keyword">(</span><span class="default">parent</span><span class="keyword">::</span><span class="default">ARRAY_AS_PROPS</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
This will allow you to do things such as the below example, without overriding __get or __set .
<br />

<br />
<span class="default">&lt;?php
<br />
$mao</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">= </span><span class="string">"Phil"</span><span class="keyword">;
<br />
echo </span><span class="default">$mao</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">/* Outputs "Phil" */
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102747""></a>
  <div class="note">
   <strong class="user">rob at tdd dot org dot uk</strong>
   <a href="#102747" class="date">03-Mar-2011 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I don't believe the same performance is true since PHP 5.3. Using the same fill, read_key and foreach approach on both native arrays and ArrayObjects with 10000 keys I get the following<br />
<br />
PHP 5.2<br />
<br />
array() fill&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.013101<br />
array() read&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.008685<br />
array() foreach&nbsp; &nbsp; &nbsp; 0.004319<br />
ArrayObject fill&nbsp; &nbsp;&nbsp; 0.014136<br />
ArrayObject read&nbsp; &nbsp;&nbsp; 0.010003<br />
ArrayObject foreach&nbsp; 3.454612<br />
<br />
PHP 5.3<br />
<br />
array() fill&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.010395<br />
array() read&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0.005933<br />
array() foreach&nbsp; &nbsp; &nbsp; 0.001903<br />
ArrayObject fill&nbsp; &nbsp;&nbsp; 0.010598<br />
ArrayObject read&nbsp; &nbsp;&nbsp; 0.006387<br />
ArrayObject foreach&nbsp; 0.003451<br />
<br />
This was the code I used for both, an array or ArrayObject is passed into each of the functions. Again PEAR::Benchmark was used to get the results.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">require_once </span><span class="string">'Benchmark/Timer.php'</span><span class="keyword">;<br />
<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'KEYS'</span><span class="keyword">, </span><span class="default">10000</span><span class="keyword">);<br />
<br />
function </span><span class="default">fill</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">KEYS</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'key-' </span><span class="keyword">. </span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">read_key</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">KEYS</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'key-' </span><span class="keyword">. </span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function </span><span class="default">fe</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93100""></a>
  <div class="note">
   <strong class="user">danbettles at yahoo dot co dot uk</strong>
   <a href="#93100" class="date">23-Aug-2009 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To implement array-style appending (e.g. "$object[] = 'foo';") in your own class implementing the ArrayAccess _interface_, all you need do is check if the key passed to your implementation of offsetSet() is NULL.&nbsp; Something like the following.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyArrayObject </span><span class="keyword">implements </span><span class="default">ArrayAccess </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * @var array<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$aValue</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
<br />
&nbsp;&nbsp;&nbsp; /**<br />
&nbsp;&nbsp; &nbsp; * @see ArrayAccess::offsetSet()<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">offsetSet </span><span class="keyword">(</span><span class="default">$p_key</span><span class="keyword">, </span><span class="default">$p_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$p_key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aValue</span><span class="keyword">[] = </span><span class="default">$p_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">aValue</span><span class="keyword">[</span><span class="default">$p_key</span><span class="keyword">] = </span><span class="default">$p_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90371""></a>
  <div class="note">
   <strong class="user">skrebbel at gmail dot com</strong>
   <a href="#90371" class="date">18-Apr-2009 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
According to my benchmarks, doing foreach() on an ArrayObject is significantly slower than doing so on a vanilla array(). However, inserting keys and retrieving them is almost the same speed.<br />
<br />
So, if performance is important, consider not using ArrayObject or descendant classes when you're iterating over its values a lot.<br />
<br />
These are my timing results, using PEAR::Benchmark:<br />
<br />
ArrayObject fill&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.01441502571106&nbsp; &nbsp; <br />
ArrayObject read_key&nbsp; &nbsp; &nbsp; &nbsp; 0.018320083618164&nbsp; &nbsp; <br />
ArrayObject read_foreach&nbsp; &nbsp; 2.1559031009674&nbsp; &nbsp; <br />
<br />
array() fill&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.012364864349365&nbsp; &nbsp; <br />
array() read_key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.013092041015625&nbsp; &nbsp; <br />
array() read_foreach&nbsp; &nbsp; &nbsp; &nbsp; 0.011217832565308&nbsp; &nbsp; <br />
<br />
In all cases, 'fill()' inserts 10000 numbers at string keys, 'read_key()' reads all of those values by referencing the keys, and 'read_foreach()' does the same by walking through the array(object) with foreach().<br />
<br />
As you can see, filling or reading from an ArrayObject by key is only 10% to 15% slower, but doing a foreach() is 200 times as costly. I am not sure what the cause of this may be.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89466""></a>
  <div class="note">
   <strong class="user">nonproffessional at clockworkgeek dot com</strong>
   <a href="#89466" class="date">09-Mar-2009 08:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get a primitive array type back from an ArrayObject you can use the member function exchangeArray() or more simply just cast it:<br />
<br />
<span class="default">&lt;?php<br />
$object </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();<br />
</span><span class="default">$object</span><span class="keyword">[] = </span><span class="string">"Hello World!"</span><span class="keyword">;<br />
</span><span class="comment">// $object is now an ArrayObject with one value appended.<br />
<br />
</span><span class="default">$array </span><span class="keyword">= (array) </span><span class="default">$object</span><span class="keyword">;<br />
</span><span class="comment">// $array is now a simple array with the single value "Hello World!".<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87964""></a>
  <div class="note">
   <strong class="user">deminy at deminy dot net</strong>
   <a href="#87964" class="date">02-Jan-2009 10:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generally variable $this can't be used as an array within an object context. For example, following code piece would cause a fatal error:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestThis </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">TestThis</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">'aaa'</span><span class="keyword">;<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
But things are different when $this is used in an ArrayObject object. e.g., following code piece are valid:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">TestArrayObject </span><span class="keyword">extends </span><span class="default">ArrayObject </span><span class="keyword">{&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">TestArrayObject</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="string">'aaa'</span><span class="keyword">;<br />
echo </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86823""></a>
  <div class="note">
   <strong class="user">Venelin Vulkov</strong>
   <a href="#86823" class="date">05-Nov-2008 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple example of usage : <br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array(</span><span class="string">'Buck'</span><span class="keyword">,</span><span class="string">'Jerry'</span><span class="keyword">,</span><span class="string">'Tomas'</span><span class="keyword">);<br />
<br />
</span><span class="default">$arrayObject </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="comment">// Add new element<br />
</span><span class="default">$arrayObject</span><span class="keyword">-&gt;</span><span class="default">append</span><span class="keyword">(</span><span class="string">'Tweety'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// We are getting the iterator of the object<br />
</span><span class="default">$iterator </span><span class="keyword">= </span><span class="default">$arrayObject</span><span class="keyword">-&gt;</span><span class="default">getIterator</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Simple while loop<br />
</span><span class="keyword">while (</span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">() . </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$iterator</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="comment">/* Outputs */<br />
</span><span class="default">Buck<br />
Jerry<br />
Tomas<br />
Tweety<br />
<br />
?&gt;<br />
</span><br />
Note that not all the public methods of this class are documented here .<br />
( Which includes a lot sorting methods ) .<br />
<br />
Regards</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86249""></a>
  <div class="note">
   <strong class="user">tony dot fraser at gmail dot com</strong>
   <a href="#86249" class="date">09-Oct-2008 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The code above will pretty much work as it is, though I have since added in some features.
<br />

<br />
Further notes: 
<br />
1. Be very aware of this bug until 5.3 becomes stable.
<br />
<a href="http://bugs.php.net/bug.php?id=41528" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=41528</a>
<br />

<br />
Basically, we wrote this collection to be a java-like object cache stored in session (instead of&nbsp; hitting the soap server or a DB all the time) to load objects in $_SESSION['cache']&nbsp; But, this particular bug will prevent the object from working in the second page. The variable is there, but there's nothing in it.
<br />

<br />
The easy work around is to upgrade PHP to 5.3, and it works like a charm, but at the moment 5.3 happens to be in alpha mode.
<br />

<br />
2. You cannot have a PDO object in as a member variable of a class stored in the ArrayObject if you want it to pass through sessions. You can store it if it's not going into a session, but if you want to cache like we're tying to do, make SURE you $_dbHandle="" wherever you need to.
<br />

<br />
3. My earlier post was just proof of concept. We have it working now so&nbsp; UserCollection extends GenericCollectionAbstract.&nbsp; and GenericCollectionAbstract implements the GenericCollectionInterface. GenericCollectionObject is the object stored in the GenericCollection's $arrayObject data, and is basically just a two property object that holds the ID of the object, and the object itself.
<br />

<br />
When all is said and done this works like a charm.
<br />

<br />
page 1 -&gt;
<br />
$_SESSION['u'] = new UserCollection();
<br />
$_SESSION['u']-&gt;getObject(1, $dbWW);
<br />
page-2-&gt;
<br />
echo $_SESSION['u']-&gt;getObject(2, $dbWW)-&gt;getProperty('email');
<br />

<br />
And of course, getProperty() is from my user class.
<br />

<br />
my UserCollecton-&gt;getObject overwrite method is as follows:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">public function </span><span class="default">getObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_dbHandle</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//error_log('trying to get object');
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">parent</span><span class="keyword">::</span><span class="default">objectExists</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_dbHandle</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">error_log</span><span class="keyword">(</span><span class="string">'returning object'</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//error_log('collecting new user');
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_tempUser </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$_tempUser</span><span class="keyword">-&gt;</span><span class="default">populateByID</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_dbHandle</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">addObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_tempUser</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">parent</span><span class="keyword">::</span><span class="default">objectExists</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_return </span><span class="keyword">= </span><span class="default">parent</span><span class="keyword">::</span><span class="default">getObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$_return </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_return </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dbHandle</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">; </span><span class="comment">//This has to be done, otherwise it's stored in the object as a private var
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //and it will break the object if it resides in a session.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$_return</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Shoot me an email if you have any questions.
<br />
enjoy.!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86206""></a>
  <div class="note">
   <strong class="user">tony at tonyandcarol dot com</strong>
   <a href="#86206" class="date">08-Oct-2008 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My need was to create a java-like collection where I could store objects by their DB primary keys while having the standard stack capabilities of adding, retrieving, and removing objects from collection. ArrayObject didn't quite do what I need it to do so I extended it a little.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">GenericCollection </span><span class="keyword">extends </span><span class="default">ArrayObject</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$data</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">addObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_object</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_thisItem </span><span class="keyword">= new </span><span class="default">CollectionObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_object</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">offSetSet</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_thisItem</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">deleteObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">offsetUnset</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getObject</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_thisObject </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">offSetGet</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$_thisObject</span><span class="keyword">-&gt;</span><span class="default">getObject</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">printCollection</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">CollectionObject </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$id</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$object</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">, </span><span class="default">$_object</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">$_id</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">object </span><span class="keyword">= </span><span class="default">$_object</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">getObject</span><span class="keyword">(){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">object</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">printObject</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Call it like so:
<br />

<br />
<span class="default">&lt;?php
<br />
$u1 </span><span class="keyword">= new </span><span class="default">User</span><span class="keyword">/</span><span class="default">Data</span><span class="keyword">/</span><span class="default">Object </span><span class="keyword">(); </span><span class="comment">//whatever, just an object.
<br />

<br />
</span><span class="default">$myCollection </span><span class="keyword">= new </span><span class="default">GenericCollection</span><span class="keyword">();
<br />
</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">addObject</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">$u1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$myCollection</span><span class="keyword">-&gt;</span><span class="default">getObject</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Now you have a simple and functional collection framework. Add methods in for specific types of sorting, we just didn't need anything other than primary key access. And you can add introspection into the collection object if you need to track what kind of an object it is.
<br />

<br />
tony@tonyandcarol.com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85553""></a>
  <div class="note">
   <strong class="user">dave at csixty4 dot com</strong>
   <a href="#85553" class="date">05-Sep-2008 05:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use array functions on an ArrayObject, why not use iterator_to_array() to get a standard PHP array?&nbsp; Do your operations on that array, then instantiate a new ArrayObject, passing it the array.<br />
<br />
This might be a little slow on large ArrayObjects, but you'd have access to all of the array functions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85002""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#85002" class="date">10-Aug-2008 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Too bad the Array functions [1] are not available on this object... otherwise I would be using it all the time.<br />
<br />
[1] <a href="http://nl.php.net/manual/en/ref.array.php" rel="nofollow" target="_blank">http://nl.php.net/manual/en/ref.array.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
