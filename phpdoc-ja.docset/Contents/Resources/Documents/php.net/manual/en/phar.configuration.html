<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>実行時設定</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="phar.installation.html">≪ インストール手順</a></li>
      <li style="float: right;"><a href="phar.resources.html">リソース型 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="phar.setup.html">インストール/設定</a></li>
    <li>実行時設定</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="phar.configuration" class="section">
 <h2 class="title">実行時設定</h2>
 <p class="simpara">
<var class="filename">php.ini</var> の設定により動作が変化します。
</p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>ファイルシステムおよびストリームの設定オプション</strong></caption>
   
    <thead>
     <tr>
      <th>名前</th>
      <th>デフォルト</th>
      <th>変更可能</th>
      <th>変更履歴</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><a href="phar.configuration.html#ini.phar.readonly" class="link">phar.readonly</a></td>
      <td>&quot;1&quot;</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="phar.configuration.html#ini.phar.require-hash" class="link">phar.require_hash</a></td>
      <td>&quot;1&quot;</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="phar.configuration.html#ini.phar.extract-list" class="link">phar.extract_list</a></td>
      <td>&quot;&quot;</td>
      <td>PHP_INI_ALL</td>
      <td>phar 1.1.0 から 1.2.3 で使用可能、2.0.0 で削除</td>
     </tr>

     <tr>
      <td><a href="phar.configuration.html#ini.phar.cache-list" class="link">phar.cache_list</a></td>
      <td>&quot;&quot;</td>
      <td>PHP_INI_SYSTEM</td>
      <td>phar 2.0.0 以降で使用可能</td>
     </tr>

    </tbody>
   
  </table>

 </p>
 
 <p class="para">以下に設定ディレクティブに関する
簡単な説明を示します。</p>
 
 <p class="para">
  <dl>

   
    <dt id="ini.phar.readonly">
     <code class="parameter">phar.readonly</code>
     <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
    </dt>

    <dd>

     <p class="para">
      このオプションを使用すると、<em>phar</em>
      ストリームや <a href="class.phar.html" class="classname">Phar</a>
      オブジェクトによる Phar アーカイブの作成や変更ができなくなります。
      この設定は、実運用環境では常に有効にしておくべきです。
      phar 拡張モジュールのこの機能は、
      サーバー上に他のセキュリティ上の脆弱性があった場合に
      php ベースのウィルスを直接作成されてしまうことにつながります。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       この設定は、セキュリティ上の理由により
       php.ini でしか解除できません。
       <em>phar.readonly</em> を php.ini で無効にした場合は、
       ユーザーがスクリプト内で <em>phar.readonly</em>
       の有効/無効を切りかえることができます。
       <em>phar.readonly</em> を php.ini で有効にした場合は、
       スクリプト内でこれを &quot;再度有効にする&quot;
       ことはできますが、無効にすることはできません。
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.phar.require-hash">
     <code class="parameter">phar.require_hash</code>
     <span class="type"><a href="language.types.boolean.html" class="type boolean">boolean</a></span>
    </dt>

    <dd>

     <p class="para">
      このオプションを使用すると、署名つき
      (現在サポートしているのは MD5、SHA1、SHA256 および SHA512)
      の Phar アーカイブのみをオープンするようになります。
      署名を含まない Phar アーカイブの処理はできません。
     </p>
     <blockquote class="note"><p><strong class="note">注意</strong>: 
      <p class="para">
       この設定は、セキュリティ上の理由により
       php.ini でしか解除できません。
       <em>phar.require_hash</em> を php.ini で無効にした場合は、
       ユーザーがスクリプト内で <em>phar.require_hash</em>
       の有効/無効を切りかえることができます。
       <em>phar.require_hash</em> を php.ini で有効にした場合は、
       スクリプト内でこれを &quot;再度有効にする&quot;
       ことはできますが、無効にすることはできません。
      </p>
      <p class="para">
       この設定は、
       <a href="class.phardata.html" class="classname">PharData</a> クラスで通常の
       tar ファイルを読み込む際には影響を及ぼしません。
      </p>
     </p></blockquote>
    </dd>

   

   
    <dt id="ini.phar.extract-list">
     <code class="parameter">phar.extract_list</code>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </dt>

    <dd>

     <p class="para">
      この INI 設定は phar 2.0.0 で削除されました。
     </p>
     <p class="para">
      phar アーカイブへのフルパスあるいはそのエイリアスと、
      展開されたファイルの場所との関連付けを行います。
      パラメータの書式は <em>name=archive,name2=archive2</em>
      のようになります。
      phar ファイルをディスクに展開して、
      展開したファイル群へのマッパーとして phar を扱えるようになります。
      これを行うのは、たとえばパフォーマンスを向上させたい場合や
      phar のデバッグを行いたい場合などです。
      <div class="example" id="example-688">
       <p><strong>例1 phar.extract_list の使用例</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
php.ini&nbsp;で、次のように記述します<br />phar.extract_list&nbsp;=&nbsp;archive=/full/path/to/archive/,arch2=/full/path/to/arch2<br /><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include&nbsp;</span><span style="color: #DD0000">"phar://archive/content.php"</span><span style="color: #007700">;<br />include&nbsp;</span><span style="color: #DD0000">"phar://arch2/foo.php"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </dd>

   

   
    <dt id="ini.phar.cache-list">
     <code class="parameter">phar.cache_list</code>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </dt>

    <dd>

     <p class="para">
      この INI 設定は phar 2.0.0 で追加されました。
     </p>
     <p class="para">
      phar アーカイブをウェブサーバーの起動時に事前にパースさせるようにします。
      これによりパフォーマンスが向上し、
      ディスク上に配置した伝統的なファイルに近い速度で実行することができます。
      <div class="example" id="example-689">
       <p><strong>例2 phar.cache_list の使用例</strong></p>
       <div class="example-contents">
<div class="cdata"><pre>
php.ini (windows):
phar.cache_list =C:\path\to\phar1.phar;C:\path\to\phar2.phar
php.ini (unix):
phar.cache_list =/path/to/phar1.phar:/path/to/phar2.phar
</pre></div>
       </div>

      </div>
     </p>
    </dd>

   
  </dl>

 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="104417""></a>
  <div class="note">
   <strong class="user">milagre at gmail dot com</strong>
   <a href="#104417" class="date">14-Jun-2011 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
During experimentation with phar.cache_list using php 5.2.13 and pecl/phar 2.0.0, I found some interesting details.<br />
<br />
It seems that if any phar in the list of phars to cache fails to be read properly during module initialization, none of the phars in the list will be cached, including ones that had already been successfully read before the failure.<br />
<br />
Additionally, phars without metadata will always fail to be pre-cached properly due to what seems to be a bug in the phar module that re-reads the length of the metadata from the next byte if the metadata length is 0.&nbsp; Adding any metadata resolved the problem for me.<br />
<br />
So make sure you are pre-caching phars with metadata, and make sure you don't put a bad path/file in the list.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
