<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定した配列の要素にコールバック関数を適用する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.array-keys.html">≪ array_keys</a></li>
      <li style="float: right;"><a href="function.array-merge-recursive.html">array_merge_recursive ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">配列 関数</a></li>
    <li>指定した配列の要素にコールバック関数を適用する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.array-map" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_map</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5)</p><p class="refpurpose"><span class="refname">array_map</span> &mdash; <span class="dc-title">指定した配列の要素にコールバック関数を適用する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-map-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_map</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.types.callable.html" class="type callable">callable</a></span> <code class="parameter">$callback</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$array1</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>array_map()</strong></span> は、<code class="parameter">array1</code>
   の各要素に <code class="parameter">callback</code> 関数を適用した後、
   その全ての要素を含む配列を返します。
   <code class="parameter">callback</code> 関数が受け付けるパラメータの数は、
   <span class="function"><strong>array_map()</strong></span> に渡される配列の数に一致している必要があります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-map-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">callback</code></dt>

     <dd>

      <p class="para">
       配列の各要素に適用するコールバック関数。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">array1</code></dt>

     <dd>

      <p class="para">
       コールバック関数を適用する配列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">...</code></dt>

     <dd>

      <p class="para">
       コールバック関数に渡す引数を指定する配列の可変リスト。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-map-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">array1</code>
   の各要素に <code class="parameter">callback</code> 関数を適用した後、
   その全ての要素を含む配列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-map-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5068">
    <p><strong>例1 <span class="function"><strong>array_map()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">cube</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cube"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     この例では、<var class="varname"><var class="varname">$b</var></var> の内容は以下のようになります。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 1
    [1] =&gt; 8
    [2] =&gt; 27
    [3] =&gt; 64
    [4] =&gt; 125
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5069">
    <p><strong>例2 <span class="function"><strong>array_map()</strong></span> でラムダ関数を使用する例 (PHP 5.3.0 以降)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$func&nbsp;</span><span style="color: #007700">=&nbsp;function(</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />};<br /><br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">$func</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">range</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 2
    [1] =&gt; 4
    [2] =&gt; 6
    [3] =&gt; 8
    [4] =&gt; 10
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5070">
    <p><strong>例3 <span class="function"><strong>array_map()</strong></span> - もっと配列を使ってみる例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">show_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(</span><span style="color: #DD0000">"The&nbsp;number&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #DD0000">&nbsp;is&nbsp;called&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #DD0000">&nbsp;in&nbsp;Spanish"</span><span style="color: #007700">);<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">map_Spanish</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return(array(</span><span style="color: #0000BB">$n&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">));<br />}<br /><br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"uno"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"dos"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tres"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cuatro"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cinco"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"show_Spanish"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"map_Spanish"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
// printout of $c
Array
(
    [0] =&gt; The number 1 is called uno in Spanish
    [1] =&gt; The number 2 is called dos in Spanish
    [2] =&gt; The number 3 is called tres in Spanish
    [3] =&gt; The number 4 is called cuatro in Spanish
    [4] =&gt; The number 5 is called cinco in Spanish
)

// printout of $d
Array
(
    [0] =&gt; Array
        (
            [1] =&gt; uno
        )

    [1] =&gt; Array
        (
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [3] =&gt; tres
        )

    [3] =&gt; Array
        (
            [4] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [5] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   通常、二つ以上の配列を使用する場合、
   それらの長さは等しい必要があります。
   これは、
   コールバック関数が対応する要素に対して並行して適用されるためです。
   配列の長さが等しくない場合、要素数の少ない配列は空の要素で拡張して、最も長い配列の要素数に合わせます。
  </p>
  <p class="para">
   この関数の面白い使用方法として、
   配列の配列を構築するというものがあります。
   これは、コールバック関数の名前として
   <strong><code>NULL</code></strong> を使用することにより、簡単に実行できるものです。
  </p>
  <p class="para">
   <div class="example" id="example-5071">
    <p><strong>例4 配列の配列を生成する</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"four"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"five"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"uno"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"dos"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tres"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cuatro"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cinco"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$d&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$d</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; 1
            [1] =&gt; one
            [2] =&gt; uno
        )

    [1] =&gt; Array
        (
            [0] =&gt; 2
            [1] =&gt; two
            [2] =&gt; dos
        )

    [2] =&gt; Array
        (
            [0] =&gt; 3
            [1] =&gt; three
            [2] =&gt; tres
        )

    [3] =&gt; Array
        (
            [0] =&gt; 4
            [1] =&gt; four
            [2] =&gt; cuatro
        )

    [4] =&gt; Array
        (
            [0] =&gt; 5
            [1] =&gt; five
            [2] =&gt; cinco
        )

)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   配列引数に文字列のキーが含まれる場合は、
   渡した配列がひとつだけなら返される配列に文字列キーが含まれることになります。
   複数の引数を渡した場合は、返される配列は常に整数キーとなります。
  </p>
  <p class="para">
   <div class="example" id="example-5072">
    <p><strong>例5 <span class="function"><strong>array_map()</strong></span> - 文字列キーの例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"stringkey"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"value"</span><span style="color: #007700">);<br />function&nbsp;</span><span style="color: #0000BB">cb1</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br />}<br />function&nbsp;</span><span style="color: #0000BB">cb2</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;array&nbsp;(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cb1"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">"cb2"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">array_map</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(1) {
  [&quot;stringkey&quot;]=&gt;
  array(1) {
    [0]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
array(1) {
  [&quot;stringkey&quot;]=&gt;
  string(5) &quot;value&quot;
}
array(1) {
  [0]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;value&quot;
    [1]=&gt;
    string(5) &quot;value&quot;
  }
}
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-map-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.array-filter.html" class="function" rel="rdfs-seeAlso">array_filter()</a> - コールバック関数を使用して、配列の要素をフィルタリングする</span></li>
    <li class="member"><span class="function"><a href="function.array-reduce.html" class="function" rel="rdfs-seeAlso">array_reduce()</a> - コールバック関数を用いて配列を普通の値に変更することにより、配列を再帰的に減らす</span></li>
    <li class="member"><span class="function"><a href="function.array-walk.html" class="function" rel="rdfs-seeAlso">array_walk()</a> - 配列の全ての要素にユーザー関数を適用する</span></li>
    <li class="member"><a href="language.pseudo-types.html#language.types.callback" class="link">callback</a> 型に関する情報</li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115379""></a>
  <div class="note">
   <strong class="user">wapinet at mail dot ru</strong>
   <a href="#115379" class="date">15-Jul-2014 10:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.5.14<br />
<span class="default">&lt;?php<br />
$columns </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">100000</span><span class="keyword">);<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
0.067003011703491 sec<br />
24903680 byte<br />
&nbsp;*/<br />
</span><span class="default">array_map</span><span class="keyword">(function (</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">;<br />
}, </span><span class="default">$columns</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
0.042001962661743 sec<br />
19398656 byte<br />
&nbsp;*/<br />
</span><span class="keyword">foreach (</span><span class="default">$columns </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$column</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$columns</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$column</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/*<br />
0.05500316619873 sec<br />
10747904 byte<br />
&nbsp;*/<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$columns</span><span class="keyword">, function (&amp;</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">;<br />
});<br />
<br />
</span><span class="comment">/*<br />
0.0260009765625 sec<br />
10747904 byte<br />
&nbsp;*/<br />
</span><span class="keyword">foreach (</span><span class="default">$columns </span><span class="keyword">as &amp;</span><span class="default">$column</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$column </span><span class="keyword">= </span><span class="string">'p.' </span><span class="keyword">. </span><span class="default">$column</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$time </span><span class="keyword">. </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">memory_get_peak_usage</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114970""></a>
  <div class="note">
   <strong class="user">JacobA dot Barber at yahoo dot com</strong>
   <a href="#114970" class="date">08-May-2014 01:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example for php 5.4 and greater, using a closure:<br />
<span class="default">&lt;?php<br />
$myList </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">];<br />
<br />
</span><span class="default">$mappedList </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$value </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;<br />
}, </span><span class="default">$myList</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$mappedList</span><span class="keyword">);<br />
<br />
array(</span><span class="default">4</span><span class="keyword">) {<br />
&nbsp; [</span><span class="default">0</span><span class="keyword">]=&gt;</span><span class="default">int</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">)<br />
&nbsp; [</span><span class="default">1</span><span class="keyword">]=&gt;</span><span class="default">int</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">)<br />
&nbsp; [</span><span class="default">2</span><span class="keyword">]=&gt;</span><span class="default">int</span><span class="keyword">(</span><span class="default">6</span><span class="keyword">)<br />
&nbsp; [</span><span class="default">3</span><span class="keyword">]=&gt;</span><span class="default">int</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">)<br />
}<br />
</span><span class="default">?&gt;<br />
</span>This is useful when you don't want/need to define a function just so it can be used with the map function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114357""></a>
  <div class="note">
   <strong class="user">ian_channing at hotmail dot com</strong>
   <a href="#114357" class="date">12-Feb-2014 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted a nice way to convert an array with x values as keys and y values as values e.g. array(x =&gt; y,...) into x,y co-ordinates e.g. array(array(x,y), ...). <br />
<br />
You can do:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">foreach (</span><span class="default">$waveform </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$waveformPoint</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$coordinates</span><span class="keyword">[] = array(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$waveformPoint</span><span class="keyword">); <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
But array_map with a null callback gives you a nicer way:<br />
<br />
<span class="default">&lt;?php<br />
$coordinates </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$waveform</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$waveform</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114270""></a>
  <div class="note">
   <strong class="user">williamprogphp at yahoo dot com dot br</strong>
   <a href="#114270" class="date">31-Jan-2014 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function to map an array working also with its key.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_mapk</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArray </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArray</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $dados </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dados</span><span class="keyword">[</span><span class="string">'cep'</span><span class="keyword">] = </span><span class="string">"32340-070"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dados</span><span class="keyword">[</span><span class="string">'initial'</span><span class="keyword">] = </span><span class="default">100</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dados</span><span class="keyword">[</span><span class="string">'final'</span><span class="keyword">] = </span><span class="default">300</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dados</span><span class="keyword">[</span><span class="string">'processed'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"update table set " </span><span class="keyword">. </span><span class="default">implode</span><span class="keyword">(</span><span class="string">", "</span><span class="keyword">, </span><span class="default">array_mapk</span><span class="keyword">(function (</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">) { return </span><span class="string">"</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string"> = '" </span><span class="keyword">. </span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) . </span><span class="string">"'"</span><span class="keyword">; }, </span><span class="default">$dados</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Cheers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113886""></a>
  <div class="note">
   <strong class="user">elfe1021 at gmail dot com</strong>
   <a href="#113886" class="date">13-Dec-2013 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Find an interesting thing that in array_map's callable function, late static binding does not work:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'In A: '</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$n</span><span class="keyword">) {return static::</span><span class="default">foo</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);}, </span><span class="default">$names</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public static function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'In B: '</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">B</span><span class="keyword">::</span><span class="default">test</span><span class="keyword">([</span><span class="string">'alice'</span><span class="keyword">, </span><span class="string">'bob'</span><span class="keyword">]);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
the result is:<br />
array (size=2)<br />
&nbsp; 0 =&gt; string 'In A: alice' (length=11)<br />
&nbsp; 1 =&gt; string 'In A: bob' (length=9)<br />
<br />
if I change A::test to<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">([</span><span class="default">get_called_class</span><span class="keyword">(), </span><span class="string">'foo'</span><span class="keyword">], </span><span class="default">$names</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Then the result is as expected:<br />
array (size=2)<br />
&nbsp; 0 =&gt; string 'In B: alice' (length=11)<br />
&nbsp; 1 =&gt; string 'In B: bob' (length=9)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113795""></a>
  <div class="note">
   <strong class="user">lukasz dot mordawski at gmail dot com</strong>
   <a href="#113795" class="date">03-Dec-2013 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Let's assume we have following situation:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyFilterClass </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">filter</span><span class="keyword">(array </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateFilterMethod</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; private function </span><span class="default">privateFilterMethod</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$value</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$value </span><span class="keyword">.= </span><span class="string">'.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This will work, because $this inside anonymous function (unlike for example javascript) is the instance of MyFilterClass inside which we called it.<br />
I hope this would be useful for anyone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113051""></a>
  <div class="note">
   <strong class="user">CertaiN</strong>
   <a href="#113051" class="date">23-Aug-2013 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most memory-efficient array_map_recursive().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(callable </span><span class="default">$func</span><span class="keyword">, array </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, function(&amp;</span><span class="default">$v</span><span class="keyword">) use (</span><span class="default">$func</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112857""></a>
  <div class="note">
   <strong class="user">contato at williamsantana dot com dot br</strong>
   <a href="#112857" class="date">30-Jul-2013 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case of you need to recursively bypass a function over the itens of an array, you can use it<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
-----------------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $strings </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'The'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'quick'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'fox'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'brown'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'jumps'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'over'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'the'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'lazy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'dog'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$strings</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hashedString </span><span class="keyword">= </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="string">'md5'</span><span class="keyword">, </span><span class="default">$strings</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$hashedString</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
------------------------------------------------------------------------<br />
Testing it, you'll obtain<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/* Original array */<br />
<br />
</span><span class="keyword">array (<br />
&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'The'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp; array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'quick'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'fox'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'brown'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'jumps'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'over'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'the'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'lazy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'dog'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp; ),<br />
);<br />
<br />
</span><span class="comment">/* Recursived array */<br />
</span><span class="keyword">array (<br />
&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'a4704fd35f0308287f2937ba3eccf5fe'</span><span class="keyword">,<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp; array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'1df3746a4728276afdc24f828186f73a'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'2b95d1f09b8b66c5c43622a4d9ec9a04'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'6ff47afa5dc7daa42cc705a03fca8a9b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'55947829059f255e4ba2f536a2ae99fe'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'3b759a9ca80234563d87672350659b2b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'8fc42c6ddf9966db3b09e84365034357'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'0ffe34b4e04c2b282c5a388b1ad8aa7a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'06d80eb0c50b49a509b49f2424e8c805'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp; ),<br />
);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope it helps you.<br />
<br />
Cheers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112716""></a>
  <div class="note">
   <strong class="user">jessiedeer at hotmail dot com</strong>
   <a href="#112716" class="date">16-Jul-2013 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map becomes interesting and faster than foreach when used with existing PHP functions.<br />
<br />
Example:<br />
<br />
$arr1 = array(1, 2, 3, 4);<br />
$arr2 = array(4, 3, 2, 1);<br />
<br />
// array with min values for each key<br />
print_r(array_map("min", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 2 [3] =&gt; 1 ) <br />
<br />
// array with max values for each key<br />
print_r(array_map("max", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 4 [1] =&gt; 3 [2] =&gt; 3 [3] =&gt; 4 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112715""></a>
  <div class="note">
   <strong class="user">jessiedeer at hotmail dot com</strong>
   <a href="#112715" class="date">16-Jul-2013 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map becomes interesting and faster than foreach when used with existing PHP functions.<br />
<br />
Example:<br />
<br />
$arr1 = array(1, 2, 3, 4);<br />
$arr2 = array(4, 3, 2, 1);<br />
<br />
// array with min values for each key<br />
print_r(array_map("min", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 2 [3] =&gt; 1 ) <br />
<br />
// array with max values for each key<br />
print_r(array_map("max", $arr1, $arr2));<br />
<br />
Result: Array ( [0] =&gt; 4 [1] =&gt; 3 [2] =&gt; 3 [3] =&gt; 4 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112628""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#112628" class="date">06-Jul-2013 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple yet effective associative version of map that accepts arbitrary number of arrays. <br />
Instead of elements, result from each() get passed as function arguments.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_assoc</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">() &lt; </span><span class="default">2</span><span class="keyword">) throw new \</span><span class="default">BadFuncionCallException</span><span class="keyword">(</span><span class="string">'Missing parameters'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) throw new \</span><span class="default">InvalidArgumentException</span><span class="keyword">(</span><span class="string">'First parameter musst be callable'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">, function(&amp;</span><span class="default">$a</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= (array)</span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; });<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$results </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max_length </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'count'</span><span class="keyword">, </span><span class="default">$arrays</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$pole</span><span class="keyword">) use (</span><span class="default">$max_length</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_pad</span><span class="keyword">(</span><span class="default">$pole</span><span class="keyword">, </span><span class="default">$max_length</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }, </span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$max_length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arrays </span><span class="keyword">as &amp;</span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elements</span><span class="keyword">[] = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$elements</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$out </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= isset(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) ? </span><span class="default">$out</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] : </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//USAGE:<br />
</span><span class="default">$days </span><span class="keyword">= array(</span><span class="string">'Sun' </span><span class="keyword">=&gt; </span><span class="string">'Sunday'</span><span class="keyword">, </span><span class="string">'Mon' </span><span class="keyword">=&gt; </span><span class="string">'Monday'</span><span class="keyword">, </span><span class="string">'Tue' </span><span class="keyword">=&gt; </span><span class="string">'Tuesday'</span><span class="keyword">, </span><span class="string">'Wed' </span><span class="keyword">=&gt; </span><span class="string">'Wednesday'</span><span class="keyword">, </span><span class="string">'Thu' </span><span class="keyword">=&gt; </span><span class="string">'Thursday'</span><span class="keyword">, </span><span class="string">'Fri' </span><span class="keyword">=&gt; </span><span class="string">'Friday'</span><span class="keyword">, </span><span class="string">'Sat' </span><span class="keyword">=&gt; </span><span class="string">'Saturday'</span><span class="keyword">);<br />
</span><span class="default">$nums </span><span class="keyword">= array(</span><span class="string">'First'</span><span class="keyword">, </span><span class="string">'Second'</span><span class="keyword">, </span><span class="string">'Third'</span><span class="keyword">, </span><span class="string">'Fourth'</span><span class="keyword">, </span><span class="string">'Fifth'</span><span class="keyword">, </span><span class="string">'Sixth'</span><span class="keyword">, </span><span class="string">'Seventh'</span><span class="keyword">);<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_map_assoc</span><span class="keyword">(function(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return array(</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">], </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">]);<br />
}, </span><span class="default">$days</span><span class="keyword">, </span><span class="default">$nums</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
<br />
</span><span class="comment">//RESULT:<br />
</span><span class="keyword">array (</span><span class="default">size</span><span class="keyword">=</span><span class="default">7</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'First' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Sun' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Second' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Mon' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Third' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Tue' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Fourth' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Wed' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Fifth' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Thu' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Sixth' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Fri' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)<br />
&nbsp; </span><span class="string">'Seventh' </span><span class="keyword">=&gt; </span><span class="default">string </span><span class="string">'Sat' </span><span class="keyword">(</span><span class="default">length</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112077""></a>
  <div class="note">
   <strong class="user">hrvoj3e at gmail dot com</strong>
   <a href="#112077" class="date">30-Apr-2013 11:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Why not use <br />
<br />
mb_convert_case($str, MB_CASE_TITLE, "UTF-8");<br />
<br />
Works for me! :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111681""></a>
  <div class="note">
   <strong class="user">James</strong>
   <a href="#111681" class="date">16-Mar-2013 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map() can be applied to assoc arrays without affecting the keys</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111433""></a>
  <div class="note">
   <strong class="user">shakespeare32 at gmail dot com</strong>
   <a href="#111433" class="date">20-Feb-2013 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Why not an array of callbacks?<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_maps</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$callbacks</span><span class="keyword">) { return </span><span class="default">$array</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">) &amp;&amp; </span><span class="default">function_exists</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callbacks</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$callbacks </span><span class="keyword">as </span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">function_exists</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108352""></a>
  <div class="note">
   <strong class="user">godek dot maciek at gmail dot com</strong>
   <a href="#108352" class="date">19-Apr-2012 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I came up with a convenient syntax for method application, particularly useful inside the array_map.<br />
For instance, if you want to<br />
array_map(function($object, $arg1) { return $object-&gt;method($arg1, "arg2"); }, $objects, $args1);<br />
<br />
it is possible to provide a shorthand:<br />
global $_; // necessary inside a function, unfortunately<br />
<br />
array_map($_-&gt;method($_, "arg2"), $objects, $args1);<br />
<br />
Here's the implementation (works with 5.3)<br />
<br />
function m_caller($method) {<br />
&nbsp; $args = func_get_args();<br />
&nbsp; array_shift($args);<br />
&nbsp; return function($object) use($method, $args) {<br />
&nbsp;&nbsp;&nbsp; global $_;<br />
&nbsp;&nbsp;&nbsp; $local_args = func_get_args();<br />
&nbsp;&nbsp;&nbsp; array_shift($args);<br />
&nbsp;&nbsp;&nbsp; if(!is_object($object)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; // error&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; $reflection = new ReflectionMethod(get_class($object), $method);<br />
&nbsp;&nbsp;&nbsp; foreach($args as $key =&gt; $arg) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($arg === $_) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $args[$key] = array_shift($local_args);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $reflection-&gt;invokeArgs($object, array_merge($args, $local_args));<br />
&nbsp; };<br />
}<br />
<br />
class MethodCaller {<br />
&nbsp; public function __call($name, $arguments) { return call_user_func_array('m_caller', array_merge(array($name), $arguments)); }<br />
&nbsp; public function __get($name) { return m_caller($name); }<br />
};<br />
<br />
$_ = new MethodCaller();</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107808""></a>
  <div class="note">
   <strong class="user">qeremy</strong>
   <a href="#107808" class="date">07-Mar-2012 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An alternative for recursive mapping;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rarr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rarr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; : </span><span class="default">$fn</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">); </span><span class="comment">// or call_user_func($fn, $v)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rarr</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">sqr</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$x</span><span class="string"> ^ 2 = "</span><span class="keyword">. (</span><span class="default">$x </span><span class="keyword">* </span><span class="default">$x</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, array(</span><span class="default">4</span><span class="keyword">, array(</span><span class="default">5</span><span class="keyword">)));<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">array_map_recursive</span><span class="keyword">(</span><span class="string">"sqr"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1 ^ 2 = 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 2 ^ 2 = 4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3 ^ 2 = 9<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 4 ^ 2 = 16<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 5 ^ 2 = 25<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107690""></a>
  <div class="note">
   <strong class="user">gmail.com@mspreij</strong>
   <a href="#107690" class="date">27-Feb-2012 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hope I'm not late to the party, here's my function to apply array_map to the *keys* of an array.<br />
Extra array arguments will be used for the callback function's parameters just like with array_map, with the difference that a string is also allowed: it will just be used to create an array of appropriate length with as each value that string. Arrays are left alone (and will be padded with nulls by array_map as needed).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//_________________________________________________<br />
// array_map_keys($callback, $array, [$args, ..]) /<br />
</span><span class="keyword">function </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array </span><span class="comment">/* [, $args ..] */</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp; if (! </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"first argument (callback) is not a valid function"</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"second argument must be an array"</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// If any additional arguments are not arrays, assume that value is wanted for every $array item.<br />
&nbsp; // array_map() will pad shorter arrays with Null values<br />
&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp;&nbsp; if (! </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_map'</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// Some examples:<br />
<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="default">123</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">=&gt;</span><span class="default">456</span><span class="keyword">);<br />
<br />
</span><span class="comment">// simply uppercase keys:<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="string">'strtoupper'</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">));<br />
</span><span class="comment">// or..<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">) {return </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">);}, </span><span class="default">$arr</span><span class="keyword">));<br />
</span><span class="comment">// &gt;&gt; array(2) { ["FOO"]=&gt;int(123) , ["BAR"]=&gt; int(456) }<br />
<br />
// Add a prefix 'myvar_':<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">) {return </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$input</span><span class="keyword">;}, </span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'myvar_'</span><span class="keyword">));<br />
</span><span class="comment">// &gt;&gt; array(2) { ["myvar_foo"]=&gt;int(123) , ["myvar_bar"]=&gt;int(456) }<br />
<br />
// Apart from the (static string) prefix, we also number them:<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="default">123</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">=&gt;</span><span class="default">456</span><span class="keyword">, </span><span class="string">'bazz'</span><span class="keyword">=&gt;</span><span class="default">789</span><span class="keyword">, </span><span class="string">'yadda'</span><span class="keyword">=&gt;</span><span class="string">'0AB'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_map_keys</span><span class="keyword">(function(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$middle</span><span class="keyword">, </span><span class="default">$number</span><span class="keyword">) {return </span><span class="default">$number</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$middle</span><span class="keyword">.</span><span class="default">$input</span><span class="keyword">;}, </span><span class="default">$arr</span><span class="keyword">, </span><span class="string">'myvar_'</span><span class="keyword">, </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))));<br />
</span><span class="comment">// &gt;&gt; array(4) { ["1:myvar_foo"]=&gt;int(123) , ["2:myvar_bar"]=&gt;int(456) , ["3:myvar_bazz"]=&gt;int(789) , ["4:myvar_yadda"]=&gt;string(3) "0AB" }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106684""></a>
  <div class="note">
   <strong class="user">php/hotblocks/nl</strong>
   <a href="#106684" class="date">28-Nov-2011 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the $arr argument has to be an array, not just a Traversable/Iterator.<br />
<br />
For instance this won't work:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$documents </span><span class="keyword">= </span><span class="default">$mongo</span><span class="keyword">-&gt;</span><span class="default">db</span><span class="keyword">-&gt;</span><span class="default">collection</span><span class="keyword">-&gt;</span><span class="default">find</span><span class="keyword">();<br />
</span><span class="comment">// $documents is Traversable by foreach<br />
<br />
</span><span class="default">$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">$objects</span><span class="keyword">);<br />
</span><span class="comment">// $ids will now be NULL, because $documents wasn't an Array<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
A solution is to first use iterator_to_array():<br />
<br />
<span class="default">&lt;?php<br />
<br />
$ids </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(function(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">$document</span><span class="keyword">[</span><span class="string">'_id'</span><span class="keyword">];<br />
}, </span><span class="default">iterator_to_array</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">));<br />
</span><span class="comment">// $ids will now be an array of ['_id']s<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
But this is not very efficient: two cycles instead of one. Another solution is to use foreach: one cycle and a lot of freedom (and in the same scope).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102130""></a>
  <div class="note">
   <strong class="user">gordon dot mcvey at ntlworld dot com</strong>
   <a href="#102130" class="date">28-Jan-2011 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use array_map with PHP native functions as well as user functions.&nbsp; This is very handy if you need to sanitize arrays.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
<br />
$integers </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">(</span><span class="string">'intval'</span><span class="keyword">, </span><span class="default">$integers</span><span class="keyword">);<br />
</span><span class="default">$safeStrings </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">(</span><span class="string">'mysql_real_escape_string'</span><span class="keyword">, </span><span class="default">$unsafeStrings</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96564""></a>
  <div class="note">
   <strong class="user">virtual dot greg at gmail dot com</strong>
   <a href="#96564" class="date">05-Mar-2010 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.3 enables us to use inline anonymous functions with array_map, cleaning up the syntax slightly.
<br />

<br />
<span class="default">&lt;?php
<br />
$data </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Clerk'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alan'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Manager'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'James'</span><span class="keyword">, </span><span class="string">'position' </span><span class="keyword">=&gt; </span><span class="string">'Director'</span><span class="keyword">)
<br />
);
<br />

<br />
</span><span class="default">$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function(</span><span class="default">$person</span><span class="keyword">) { return </span><span class="default">$person</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]; },
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data
<br />
</span><span class="keyword">);
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$names</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This was possible (although not recommended) in prior versions of PHP 5, via create_function().
<br />

<br />
<span class="default">&lt;?php
<br />
$names </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$person'</span><span class="keyword">, </span><span class="string">'return $person["name"];'</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data
<br />
</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
You're less likely to catch errors in the latter version because the code is passed as string arguments.
<br />

<br />
These are alternatives to using a foreach:
<br />

<br />
<span class="default">&lt;?php
<br />
$names </span><span class="keyword">= array();
<br />

<br />
foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$names</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96269""></a>
  <div class="note">
   <strong class="user">kelly m</strong>
   <a href="#96269" class="date">17-Feb-2010 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I realize this function is easy enough to make, but this is a faster version (twice the speed) of [a function] which I find incredibly useful.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)) return array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$array</span><span class="keyword">[]=</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Usage: 
<br />

<br />
<span class="default">&lt;?php $ids </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">, </span><span class="default">$users</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94053""></a>
  <div class="note">
   <strong class="user">onassar at gmail dot com</strong>
   <a href="#94053" class="date">14-Oct-2009 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fixed a bug with array recursion.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * arrayMap function. Customized array_map function which preserves keys/associate array indexes. Note that this costs a descent amount more memory (eg. 1.5k per call)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @access public
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param callback $callback Callback function to run for each element in each array.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param mixed $arr1 An array to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array Variable list of array arugments to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return array Array containing all the elements of $arr1 after applying the callback function to each one, recursively, maintain keys.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayMap</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">()&gt;</span><span class="default">2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; (array) </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">2</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">$args</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="string">'self'</span><span class="keyword">,</span><span class="string">'arrayMap'</span><span class="keyword">),</span><span class="default">$temp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$temp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94008""></a>
  <div class="note">
   <strong class="user">onassar at gmail dot com</strong>
   <a href="#94008" class="date">12-Oct-2009 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wrote up my own key preservation function for array mapping. It allows n arguments to be passed, and should be easy enough to follow if you need to make any mods. If you've got any thoughts let me know.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * arrayMap function. Customized array_map function which preserves keys/associate array indexes.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @access public
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param callback $callback Callback function to run for each element in each array.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param mixed $arr1 An array to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array Variable list of array arugments to run through the callback function.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return array Array containing all the elements of $arr1 after applying the callback function to each one, recursively, maintain keys.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">arrayMap</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">func_num_args</span><span class="keyword">()&gt;</span><span class="default">2</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; (array) </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">(),</span><span class="default">2</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="string">'self'</span><span class="keyword">,</span><span class="string">'arrayMap'</span><span class="keyword">),</span><span class="default">$args</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]&nbsp; &nbsp; =&nbsp; &nbsp; </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91523""></a>
  <div class="note">
   <strong class="user">galenjr at gmail dot com</strong>
   <a href="#91523" class="date">15-Jun-2009 08:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to array_map htmlentities with a specific quote style is to create a function that does it and map that function<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">map_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">htmlentities</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">ENT_QUOTES </span><span class="keyword">);<br />
}<br />
</span><span class="default">$good_array </span><span class="keyword">= </span><span class="default">array_map </span><span class="keyword">( </span><span class="string">'map_entities'</span><span class="keyword">, </span><span class="default">$bad_array </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86743""></a>
  <div class="note">
   <strong class="user">radist-hack at yandex dot ru</strong>
   <a href="#86743" class="date">01-Nov-2008 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To transpose rectangular two-dimension array, use the following code:<br />
<br />
array_unshift($array, null);<br />
$array = call_user_func_array("array_map", $array);<br />
<br />
If you need to rotate rectangular two-dimension array on 90 degree, add the following line before or after (depending on the rotation direction you need) the code above:<br />
$array = array_reverse($array);<br />
<br />
Here is example:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp; array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">),<br />
&nbsp; array(</span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">));<br />
</span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86402""></a>
  <div class="note">
   <strong class="user">Heero</strong>
   <a href="#86402" class="date">16-Oct-2008 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can easily remove all HTML tags from $_GET or $_POST variables using something like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$_POST </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strip_tags'</span><span class="keyword">, </span><span class="default">$_POST</span><span class="keyword">);<br />
</span><span class="default">$_GET </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strip_tags'</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is useful when you don't want to parse HTML.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84632""></a>
  <div class="note">
   <strong class="user">stijnleenknegt at gmail dot com</strong>
   <a href="#84632" class="date">23-Jul-2008 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to pass an argument like ENT_QUOTES to htmlentities, you can do the follow.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">( </span><span class="string">'htmlentities' </span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0 </span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) , </span><span class="default">ENT_QUOTES</span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
The third argument creates an equal sized array of $array filled with the parameter you want to give with your callback function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84073""></a>
  <div class="note">
   <strong class="user">GUI</strong>
   <a href="#84073" class="date">26-Jun-2008 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following takes an array of objects, and returns the result of calling a member function on each object. So if I have an array of objects that all have a getName() method, calling array_map_objects("getName", $thingies) will return the array filled with the getName() value for each object.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_map_objects</span><span class="keyword">(</span><span class="default">$member_function</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$member_function</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$e'</span><span class="keyword">, </span><span class="string">'return call_user_func(array($e, "' </span><span class="keyword">. </span><span class="default">$member_function </span><span class="keyword">.</span><span class="string">'"));'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$values</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82256""></a>
  <div class="note">
   <strong class="user">moester at gmail dot com</strong>
   <a href="#82256" class="date">02-Apr-2008 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wish this was built in.&nbsp; Mimics Ruby and Prototype's array pluck function.&nbsp; Returns specific key/column from an array of objects.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$funct </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$e'</span><span class="keyword">, </span><span class="string">'return is_array($e) &amp;&amp; array_key_exists("'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'",$e) ? $e["'</span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">.</span><span class="string">'"] : null;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$funct</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// usage:<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="string">"id"</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"joe"</span><span class="keyword">), array(</span><span class="string">"id"</span><span class="keyword">=&gt;</span><span class="default">11</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">=&gt;</span><span class="string">"bob"</span><span class="keyword">));<br />
<br />
</span><span class="default">$ids </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">"id"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// == array(10,11)<br />
</span><span class="default">$names </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="string">"name"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// == array("joe", "bob")<br />
<br />
//works on non-keyed arrays also:<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">), array(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">));<br />
</span><span class="default">$col2 </span><span class="keyword">= </span><span class="default">array_pluck</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// == array(4,6) (grab 2nd column of data)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81767""></a>
  <div class="note">
   <strong class="user">chreekat</strong>
   <a href="#81767" class="date">13-Mar-2008 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was miffed that array_map didn't have a way to pass values *and* keys to the callback, but then I realized I could do this:<br />
<br />
function callback($k, $v) { ... }<br />
<br />
array_map( "callback", array_keys($array), $array);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81189""></a>
  <div class="note">
   <strong class="user">jo at ho dot nl</strong>
   <a href="#81189" class="date">17-Feb-2008 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Could also use things like... <br />
<br />
array_keys(); and array_values(); offcourse...<br />
<br />
However it's just an example off recursion via this function..<br />
Which I found pretty handy at times dealing with arrays..<br />
<br />
could also use:<br />
<br />
<span class="default">&lt;?php<br />
call_user_func</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION</span><span class="keyword">), </span><span class="default">$args</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or <br />
<br />
<span class="default">&lt;?php<br />
call_user_fuc_array</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class{<br />
<br />
&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new </span><span class="default">self</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$arg</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Anyway.. plenty off examples..<br />
It was just an idea for others...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80958""></a>
  <div class="note">
   <strong class="user">loaded67 at hotmail dot com</strong>
   <a href="#80958" class="date">08-Feb-2008 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function is really nice for recursion in php!!!<br />
<br />
example in a class:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">test</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//private $container = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">final public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* recursion */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">__FUNCTION__</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/* procedural */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$key</span><span class="keyword">.</span><span class="string">' =&gt; '</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do stuff...<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // if(!isset($this-&gt;container[$key])){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;container[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //else{&nbsp; // trigger_error() xor throw new Exception?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo 'allready exists!&lt;br/&gt;'.PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment">//<br />
</span><span class="default">$array </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'one'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'two'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'value2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'value3'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
</span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">;<br />
</span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
you could easiely do this without a class too offcourse!<br />
used in php 5.2.5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80571""></a>
  <div class="note">
   <strong class="user">pmf</strong>
   <a href="#80571" class="date">23-Jan-2008 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function behaves exactly like array_map but additionally does not reject non-array arguments. Instead, it transforms them with the array_fill function to a constant valued array of required length according to the other array arguments (if any) and executes the original array_map function.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_map2</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$callback </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$max'</span><span class="keyword">,</span><span class="string">'return is_array($a)? $a: array_fill(0,$max,$a);'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">,</span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">),</span><span class="default">array_reduce</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$v,$w'</span><span class="keyword">,</span><span class="string">'return max($v,is_array($w)? count($w): 1);'</span><span class="keyword">))));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">,</span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">"array_map"</span><span class="keyword">,</span><span class="default">$args</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$get </span><span class="keyword">= </span><span class="string">"first=value1&amp;second=value2&amp;third=value3"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_map2</span><span class="keyword">(</span><span class="string">"explode"</span><span class="keyword">,</span><span class="string">"="</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">,</span><span class="default">$get</span><span class="keyword">)));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
would print out: <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">first<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">1</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">second<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">third<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">value3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
/pmf</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78904""></a>
  <div class="note">
   <strong class="user">henrique at webcoder dot com dot br</strong>
   <a href="#78904" class="date">01-Nov-2007 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding method support to function by Andref (multidimensionalArrayMap).<br />
<br />
function array_map_r( $func, $arr )<br />
{<br />
&nbsp;&nbsp;&nbsp; $newArr = array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach( $arr as $key =&gt; $value )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newArr[ $key ] = ( is_array( $value ) ? array_map_r( $func, $value ) : ( is_array($func) ? call_user_func_array($func, $value) : $func( $value ) ) );<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $newArr;<br />
}<br />
<br />
array_map_r('function', array());<br />
or<br />
array_map_r(array('class', 'method'), array());</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76533""></a>
  <div class="note">
   <strong class="user">bturchik at iponweb dot net</strong>
   <a href="#76533" class="date">19-Jul-2007 04:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe this one will be useful for someone:<br />
<br />
function array_map_helper($mapper, $array) {<br />
&nbsp;&nbsp;&nbsp; $mapper = preg_replace('/^return (.*?);$/', '$1', trim($mapper));<br />
&nbsp;&nbsp;&nbsp; $result = array();<br />
&nbsp;&nbsp;&nbsp; if (preg_match('/(\(?)(.*?)\s*=&gt;\s*(.*?)(\)?)$/', $mapper, $matches)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list($full_found, $array_open, $left, $right, $array_close) = $matches;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($array_open &amp;&amp; $array_close) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[] = array' . $full_found . ';';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[' . $left . '] = ' . $right . ';';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $mapper = '$result[] = ' . $mapper . ';';<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; foreach ($array as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval($mapper);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}<br />
<br />
should be used like:<br />
<br />
$array = array(array('foo' =&gt; 11, 'bar' =&gt; 22),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array('foo' =&gt; 111, 'bar' =&gt; 222),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array('foo' =&gt; 1111, 'bar' =&gt; 2222));<br />
$mapped = array_map_helper('$value["foo"] =&gt; $value["bar"]', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [11]=&gt;<br />
&nbsp; int(22)<br />
&nbsp; [111]=&gt;<br />
&nbsp; int(222)<br />
&nbsp; [1111]=&gt;<br />
&nbsp; int(2222)<br />
}<br />
<br />
or<br />
<br />
$mapped = array_map_helper('$value["foo"]', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(11)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(111)<br />
&nbsp; [2]=&gt;<br />
&nbsp; int(1111)<br />
}<br />
<br />
or <br />
<br />
$mapped = array_map_helper('$value["foo"] + $value["bar"] . " at position $key"', $array);<br />
<br />
var_dump will give<br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(16) "33 at position 0"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(17) "333 at position 1"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(18) "3333 at position 2"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70710""></a>
  <div class="note">
   <strong class="user">andref dot dias at pronus dot eng dot br</strong>
   <a href="#70710" class="date">24-Oct-2006 09:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A recursive way to handle multidimensional arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">multidimensionalArrayMap</span><span class="keyword">( </span><span class="default">$func</span><span class="keyword">, </span><span class="default">$arr </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newArr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newArr</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = ( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) ? </span><span class="default">multidimensionalArrayMap</span><span class="keyword">( </span><span class="default">$func</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">) : </span><span class="default">$func</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$newArr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63279""></a>
  <div class="note">
   <strong class="user">pcdinh at phpvietnam dot net</strong>
   <a href="#63279" class="date">18-Mar-2006 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi benjaminhill,<br />
<br />
You can apply a method of a instantiated class to array_maps as follows:<br />
<br />
class Maths {<br />
&nbsp;&nbsp;&nbsp; function addOne($input) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return ($input + 1);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
$maths = new Maths();<br />
$sum = array_map(array($maths, \\\'addOne\\\'), array(1, 2));<br />
// where $maths is the object which has been instantiated before and addOne is its method without its own parameters<br />
var_dump($sum);<br />
<br />
The code fragment will return:<br />
<br />
array<br />
&nbsp; 0 =&gt; 2<br />
&nbsp; 1 =&gt; 3<br />
<br />
However, I love a syntax like this:<br />
<br />
$sum = array_map($maths-&gt;addOne($this), array(1, 2));<br />
<br />
where $this should be interpreted as each values extracted from the subsequent array, which in this case is array(1, 2).<br />
<br />
This syntax reminds me of Javascript syntax.<br />
<br />
PHP\\\'s callback mechanism should be improved.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56190""></a>
  <div class="note">
   
   <a href="#56190" class="date">26-Aug-2005 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function, very helpfull to me, that allows you to map your callback on mixed args.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_smart_map</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Initialization<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">() ;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">) ; </span><span class="comment">// suppressing the callback<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array() ;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Validating parameters<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the first array found gives the size of mapping and the keys that will be used for the resulting array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$size</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the others arrays must have the same dimension<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} elseif(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) != </span><span class="default">$size</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// all keys are suppressed<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// doing the callback thing<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$size</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if no arrays were found, returns the result of the callback in an array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$column </span><span class="keyword">= array() ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$arg</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$column</span><span class="keyword">[] = ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) ? </span><span class="default">$arg</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] : </span><span class="default">$arg </span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$column</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Trying with :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// $_GET is ?foo=bar1-bar2-bar3&amp;bar=foo1<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_smart_map</span><span class="keyword">(</span><span class="string">'explode'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">)) ;<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns :<br />
<br />
array(<br />
&nbsp;&nbsp;&nbsp; [foo] =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 0 =&gt; bar1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; bar2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 2 =&gt; bar3<br />
&nbsp;&nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [bar] =&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; foo1<br />
&nbsp;&nbsp;&nbsp; )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54520""></a>
  <div class="note">
   <strong class="user">david dot tulloh at infaze dot com dot au</strong>
   <a href="#54520" class="date">07-Jul-2005 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can pass values to array_map by reference, essentially allowing you to use it as you would array_walk with multiple arrays as parameters.<br />
<br />
A trivial example:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$add_func </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$x, $y'</span><span class="keyword">, </span><span class="string">'$x+=$y;'</span><span class="keyword">);<br />
</span><span class="default">array_map</span><span class="keyword">(</span><span class="default">$add_func</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 10<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51203""></a>
  <div class="note">
   <strong class="user">Vinicius Cubas Brand</strong>
   <a href="#51203" class="date">23-Mar-2005 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following function does exaclty the same thing of array_map. However, maintains the same index of the input arrays<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">,</span><span class="default">$param3</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$param3 </span><span class="keyword">!== </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">) as </span><span class="default">$p_name</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(${</span><span class="string">'param'</span><span class="keyword">.</span><span class="default">$p_name</span><span class="keyword">}))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">'(): Argument #'</span><span class="keyword">.</span><span class="default">$p_name</span><span class="keyword">.</span><span class="string">' should be an array'</span><span class="keyword">,</span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$param2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">],</span><span class="default">$param3</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$param2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">'(): Argument #2 should be an array'</span><span class="keyword">,</span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$param2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$param1</span><span class="keyword">,</span><span class="default">$param2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
For instance:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $arr1 </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'4' </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'5' </span><span class="keyword">=&gt; </span><span class="string">'c'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr2 </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'3' </span><span class="keyword">=&gt; </span><span class="string">'d'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'4' </span><span class="keyword">=&gt; </span><span class="string">'e'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'5' </span><span class="keyword">=&gt; </span><span class="string">'f'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr3 </span><span class="keyword">= </span><span class="default">array_map_keys</span><span class="keyword">(</span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">,</span><span class="string">'return $a.$b;'</span><span class="keyword">),</span><span class="default">$arr1</span><span class="keyword">,</span><span class="default">$arr2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$arr3</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The result will be:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; ad<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; be<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; cf<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50160""></a>
  <div class="note">
   <strong class="user">endofyourself at yahoo dot com</strong>
   <a href="#50160" class="date">20-Feb-2005 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to call a static method from array_map, this will NOT work:<br />
<br />
<span class="default">&lt;?PHP<br />
array_map</span><span class="keyword">(</span><span class="string">'myclass::myMethod' </span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Instead, you need to do this:<br />
<br />
<span class="default">&lt;?PHP<br />
array_map</span><span class="keyword">( array(</span><span class="string">'myclass'</span><span class="keyword">,</span><span class="string">'myMethod'</span><span class="keyword">) , </span><span class="default">$value</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
It is helpful to remember that this will work with any PHP function which expects a callback argument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43757""></a>
  <div class="note">
   <strong class="user">nd0 at gmx dot de</strong>
   <a href="#43757" class="date">02-Jul-2004 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_map works also fine with create_function:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$n'</span><span class="keyword">, </span><span class="string">'return $n*$n*$n;'</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
if you want to manipulate the elements of the array, instead to on a copy,<br />
than take a look at array_walk:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'&amp;$n'</span><span class="keyword">, </span><span class="string">'$n = $n*$n*$n;'</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The Result of both is:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 27<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 64<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 125<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28247""></a>
  <div class="note">
   <strong class="user">stephen at mu dot com dot au</strong>
   <a href="#28247" class="date">07-Jan-2003 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note when doing something allong the lines of:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{
<br />
&nbsp; var </span><span class="default">$var</span><span class="keyword">;
<br />
&nbsp; function </span><span class="default">bar</span><span class="keyword">() {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">array_map</span><span class="keyword">(array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"baz"</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">));
<br />
&nbsp; }
<br />

<br />
&nbsp; function </span><span class="default">baz</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">var </span><span class="keyword">+ </span><span class="default">$arg</span><span class="keyword">;
<br />
&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will *not* work as expected. You need to pass $this by reference as with:
<br />

<br />
array_map(array(&amp;$this, "baz"), array(1,2,3));
<br />

<br />
or you'll be making a copy of the object each time, changing a value, then throwing the result away.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
