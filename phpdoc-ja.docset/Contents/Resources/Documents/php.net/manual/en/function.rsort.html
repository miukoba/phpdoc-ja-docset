<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>配列を逆順にソートする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.reset.html">≪ reset</a></li>
      <li style="float: right;"><a href="function.shuffle.html">shuffle ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">配列 関数</a></li>
    <li>配列を逆順にソートする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.rsort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">rsort</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">rsort</span> &mdash; <span class="dc-title">配列を逆順にソートする</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.rsort-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>rsort</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$sort_flags</code><span class="initializer"> = SORT_REGULAR</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   この関数は、配列を逆順に(高位から低位に)ソートします。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.rsort-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       入力の配列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">sort_flags</code></dt>

     <dd>

      <p class="para">
       オプションのパラメータ <code class="parameter">sort_flags</code>
       によりソートの動作を修正可能です。詳細については、
       <span class="function"><a href="function.sort.html" class="function">sort()</a></span> を参照ください。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.rsort-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.rsort-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5141">
    <p><strong>例1 <span class="function"><strong>rsort()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"lemon"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"orange"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"banana"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">rsort</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$fruits&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">&nbsp;=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
0 = orange
1 = lemon
2 = banana
3 = apple
</pre></div>
    </div>
    <div class="example-contents"><p>
     fruits はアルファベットの逆順にソートされました。
    </p></div>
   </div>
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.rsort-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">この関数は、
<code class="parameter">array</code> パラメータの要素に対して新しいキーを割り当てます。
その際、単純にキーを並べ替える代わりに、
すでに割り当てられている既存のキーを削除してしまいます。</span></p></blockquote>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.rsort-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.arsort.html" class="function" rel="rdfs-seeAlso">arsort()</a> - 連想キーと要素との関係を維持しつつ配列を逆順にソートする</span></li>
    <li class="member"><span class="function"><a href="function.krsort.html" class="function" rel="rdfs-seeAlso">krsort()</a> - 配列をキーで逆順にソートする</span></li>
    <li class="member"><a href="array.sorting.html" class="link">配列ソート関数の比較</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114430""></a>
  <div class="note">
   <strong class="user">suniafkhami at gmail dot com</strong>
   <a href="#114430" class="date">20-Feb-2014 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are sorting an array from a database result set, such as MySQL for example, another approach could be to have your database sort the result set by using ORDER BY DESC, which would be the equivalent of using rsort() on the resulting array in PHP.
<br />

<br />
[Edited by moderator for clarity: googleguy at php dot net]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54227""></a>
  <div class="note">
   <strong class="user">Alex M</strong>
   <a href="#54227" class="date">28-Jun-2005 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A cleaner (I think) way to sort a list of files into reversed order based on their modification date.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $path </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="default">DOCUMENT_ROOT</span><span class="keyword">].</span><span class="string">"/files/"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$dh </span><span class="keyword">= @</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file</span><span class="keyword">=</span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">)))<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)!=</span><span class="string">"."</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[]=array(</span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">),</span><span class="default">$file</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">#2-D array<br />
&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$dh</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; if (</span><span class="default">$files</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">rsort</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">); </span><span class="comment">#sorts by filemtime<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; #done! Show the files sorted by modification date<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$file</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string"> </span><span class="default">$file</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">&lt;br&gt;\n"</span><span class="keyword">;&nbsp; </span><span class="comment">#file[0]=Unix timestamp; file[1]=filename<br />
&nbsp;&nbsp; </span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49001""></a>
  <div class="note">
   <strong class="user">pshirkey at boosthardware dot com</strong>
   <a href="#49001" class="date">14-Jan-2005 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function that would sort a list of files into reversed order based on their modification date.<br />
<br />
Here's what I came up with:<br />
<br />
function display_content($dir,$ext){<br />
<br />
&nbsp;&nbsp;&nbsp; $f = array();<br />
&nbsp;&nbsp;&nbsp; if (is_dir($dir)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($dh = opendir($dir)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (($folder = readdir($dh)) !== false) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (preg_match("/\s*$ext$/", $folder)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fullpath = "$dir/$folder";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $mtime = filemtime ($fullpath);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ff = array($mtime =&gt; $fullpath);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $f = array_merge($f, $ff);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; rsort($f, SORT_NUMERIC);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (list($key, $val) = each($f)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fcontents = file($val, "r");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (list($key, $val) = each($fcontents)) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "$val\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; closedir($dh);<br />
}<br />
<br />
Call it like so:<br />
<br />
display_content("folder","extension");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47092""></a>
  <div class="note">
   <strong class="user">ray at non-aol dot com</strong>
   <a href="#47092" class="date">02-Nov-2004 04:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Like sort(), rsort() assigns new keys for the elements in array. It will remove any existing keys you may have assigned, rather than just reordering the keys.&nbsp; This means that it will destroy associative keys.<br />
<br />
$animals = array("dog"=&gt;"large",&nbsp; "cat"=&gt;"medium",&nbsp; "mouse"=&gt;"small");<br />
print_r($animals);<br />
//Array ( [dog] =&gt; large [cat] =&gt; medium [mouse] =&gt; small )<br />
<br />
rsort($animals);<br />
print_r($animals);<br />
//Array ( [0] =&gt; small [1] =&gt; medium [2] =&gt; large ) <br />
<br />
Use KSORT() or KRSORT() to preserve associative keys.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33110""></a>
  <div class="note">
   <strong class="user">rnk-php at kleckner dot net</strong>
   <a href="#33110" class="date">17-Jun-2003 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Apparently rsort does not put arrays with one value back to zero.&nbsp; If you have an array like: $tmp = array(9 =&gt; 'asdf') and then rsort it, $tmp[0] is empty and $tmp[9] stays as is.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13354""></a>
  <div class="note">
   <strong class="user">slevy1 at pipeline dot com</strong>
   <a href="#13354" class="date">13-Jun-2001 08:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I thought rsort was working successfully or on a multi-dimensional array of strings that had first been sorted with usort(). But, I noticed today that the array&nbsp; was only partially in descending order.&nbsp; I tried array_reverse on it and that seems to have solved things.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
