<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>SplPriorityQueue クラス</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="splminheap.compare.html">≪ SplMinHeap::compare</a></li>
      <li style="float: right;"><a href="splpriorityqueue.compare.html">SplPriorityQueue::compare ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="spl.datastructures.html">データ構造</a></li>
    <li>SplPriorityQueue クラス</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.splpriorityqueue" class="reference">
 <h1 class="title">SplPriorityQueue クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0)</p>
 

  <div class="section" id="splpriorityqueue.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    SplPriorityQueue クラスは、優先順位つきキューの主要な機能を提供します。
    最大ヒープを使用して実装しています。
   </p>
  </div>

 
  <div class="section" id="splpriorityqueue.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">SplPriorityQueue</strong>
     </span>

     <span class="oointerface">implements 
      <span class="interfacename"><a href="class.iterator.html" class="interfacename">Iterator</a></span>
     </span>

     <span class="oointerface">, 
      <span class="interfacename"><a href="class.countable.html" class="interfacename">Countable</a></span>
     </span>
 
     {</div>

 
    
 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="splpriorityqueue.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam">void</span>
   )</div>

    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splpriorityqueue.compare.html" class="methodname">compare</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$priority1</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$priority2</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splpriorityqueue.count.html" class="methodname">count</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splpriorityqueue.current.html" class="methodname">current</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splpriorityqueue.extract.html" class="methodname">extract</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splpriorityqueue.insert.html" class="methodname">insert</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$priority</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="splpriorityqueue.isempty.html" class="methodname">isEmpty</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splpriorityqueue.key.html" class="methodname">key</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splpriorityqueue.next.html" class="methodname">next</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splpriorityqueue.recoverfromcorruption.html" class="methodname">recoverFromCorruption</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splpriorityqueue.rewind.html" class="methodname">rewind</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splpriorityqueue.setextractflags.html" class="methodname">setExtractFlags</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splpriorityqueue.top.html" class="methodname">top</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="splpriorityqueue.valid.html" class="methodname">valid</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
 
  </div>
 

 
 </div>
 
 































































































 
<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="splpriorityqueue.compare.html">SplPriorityQueue::compare</a> &mdash; 要素の優先順位を比較し、ヒープ内の適切な位置に置く</li><li><a href="splpriorityqueue.construct.html">SplPriorityQueue::__construct</a> &mdash; 新しい空のキューを作成する</li><li><a href="splpriorityqueue.count.html">SplPriorityQueue::count</a> &mdash; キュー内の要素数を数える</li><li><a href="splpriorityqueue.current.html">SplPriorityQueue::current</a> &mdash; イテレータが指す現在のノードを返す</li><li><a href="splpriorityqueue.extract.html">SplPriorityQueue::extract</a> &mdash; ヒープの先頭からノードを取り出す</li><li><a href="splpriorityqueue.insert.html">SplPriorityQueue::insert</a> &mdash; キューに要素を挿入する</li><li><a href="splpriorityqueue.isempty.html">SplPriorityQueue::isEmpty</a> &mdash; キューが空かどうかを調べる</li><li><a href="splpriorityqueue.key.html">SplPriorityQueue::key</a> &mdash; 現在のノードのインデックスを返す</li><li><a href="splpriorityqueue.next.html">SplPriorityQueue::next</a> &mdash; 次のノードに移動する</li><li><a href="splpriorityqueue.recoverfromcorruption.html">SplPriorityQueue::recoverFromCorruption</a> &mdash; 破壊されたキューを復旧し、それ以降の操作をできるようにする</li><li><a href="splpriorityqueue.rewind.html">SplPriorityQueue::rewind</a> &mdash; イテレータを先頭に巻き戻す (何もしない)</li><li><a href="splpriorityqueue.setextractflags.html">SplPriorityQueue::setExtractFlags</a> &mdash; 取り出しモードを設定する</li><li><a href="splpriorityqueue.top.html">SplPriorityQueue::top</a> &mdash; キューの先頭のノードを取り出す</li><li><a href="splpriorityqueue.valid.html">SplPriorityQueue::valid</a> &mdash; キューにまだノードがあるかどうかを調べる</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114959""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#114959" class="date">06-May-2014 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a heap-based priority queue to be at its most effective, the "priority" should be something that can take on a wide range of values (lengths, timestamps, populations). It optimises the tasks of searching the queue for the appropriate place to insert an item (and inserting it); and removing the first item in the list.<br />
<br />
Items may potentially be inserted into the queue wherever two adjacent items have different priorities. The heap structure is an efficient way of indexing such insertion points when there are many of them distributed throughout the list.<br />
<br />
If you have a sharply-limited enumeration of possible priority values, then there are very few insertion possible insertion points - one for each priority value. In that situation, one can make the insertion points explicit (and thus eliminate the need to maintain a heap indexing them) by implementing your priority queue as a list of simple queues from which you draw successive items from the highest-priority nonempty queue.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114309""></a>
  <div class="note">
   <strong class="user">lsroudi at gmail dot com</strong>
   <a href="#114309" class="date">06-Feb-2014 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Description of PriorityQueue<br />
&nbsp;*<br />
&nbsp;* (c) lsroudi <a href="http://lsroudi.com/ &lt;lsroudi@gmail.com&gt;" rel="nofollow" target="_blank">http://lsroudi.com/ &lt;lsroudi@gmail.com&gt;</a><br />
&nbsp;* <br />
&nbsp;* For the full copyright and license information, please view the LICENSE<br />
&nbsp;* file that was distributed with this source code.<br />
&nbsp;*/<br />
</span><span class="keyword">interface </span><span class="default">PriorityLoggerInterface </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">insert</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$priority</span><span class="keyword">);<br />
}<br />
<br />
class </span><span class="default">PriorityLogger </span><span class="keyword">extends </span><span class="default">SplPriorityQueue </span><span class="keyword">implements </span><span class="default">PriorityLoggerInterface </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
class </span><span class="default">Logger </span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">ERROR </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">NOTICE </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; const </span><span class="default">WARNING </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$priorityLogger</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">PriorityLoggerInterface $priorityLogger</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">priorityLogger </span><span class="keyword">= </span><span class="default">$priorityLogger</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">addMessage</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$priority</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">priorityLogger</span><span class="keyword">-&gt;</span><span class="default">insert</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$priority</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getPriorityLogger</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">priorityLogger</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">$priorityLogger </span><span class="keyword">= new </span><span class="default">PriorityLogger</span><span class="keyword">();<br />
<br />
</span><span class="default">$logger </span><span class="keyword">= new </span><span class="default">Logger</span><span class="keyword">(</span><span class="default">$priorityLogger</span><span class="keyword">);<br />
</span><span class="default">$logger</span><span class="keyword">-&gt;</span><span class="default">addMessage</span><span class="keyword">(</span><span class="string">'Message with notice type'</span><span class="keyword">, </span><span class="default">Logger</span><span class="keyword">::</span><span class="default">NOTICE</span><span class="keyword">);<br />
</span><span class="default">$logger</span><span class="keyword">-&gt;</span><span class="default">addMessage</span><span class="keyword">(</span><span class="string">'Message with warning type'</span><span class="keyword">, </span><span class="default">Logger</span><span class="keyword">::</span><span class="default">WARNING</span><span class="keyword">);<br />
</span><span class="default">$logger</span><span class="keyword">-&gt;</span><span class="default">addMessage</span><span class="keyword">(</span><span class="string">'Message with error type'</span><span class="keyword">, </span><span class="default">Logger</span><span class="keyword">::</span><span class="default">ERROR</span><span class="keyword">);<br />
<br />
</span><span class="default">$priorityLoggerQueue </span><span class="keyword">= </span><span class="default">$logger</span><span class="keyword">-&gt;</span><span class="default">getPriorityLogger</span><span class="keyword">();<br />
<br />
foreach (</span><span class="default">$priorityLoggerQueue </span><span class="keyword">as </span><span class="default">$queue</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$queue </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Resultat<br />
//Message with error type<br />
//Message with warning type<br />
//Message with notice type<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99146""></a>
  <div class="note">
   <strong class="user">rajatn at rediff dot co dot in</strong>
   <a href="#99146" class="date">30-Jul-2010 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
quick implementation of SPL Priority Queue:
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">class </span><span class="default">PQtest </span><span class="keyword">extends </span><span class="default">SplPriorityQueue
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">compare</span><span class="keyword">(</span><span class="default">$priority1</span><span class="keyword">, </span><span class="default">$priority2</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$priority1 </span><span class="keyword">=== </span><span class="default">$priority2</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$priority1 </span><span class="keyword">&lt; </span><span class="default">$priority2 </span><span class="keyword">? -</span><span class="default">1 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="default">$objPQ </span><span class="keyword">= new </span><span class="default">PQtest</span><span class="keyword">();
<br />

<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">insert</span><span class="keyword">(</span><span class="string">'A'</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);
<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">insert</span><span class="keyword">(</span><span class="string">'B'</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">);
<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">insert</span><span class="keyword">(</span><span class="string">'C'</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);
<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">insert</span><span class="keyword">(</span><span class="string">'D'</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);
<br />

<br />
echo </span><span class="string">"COUNT-&gt;"</span><span class="keyword">.</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">count</span><span class="keyword">().</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//mode of extraction
<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">setExtractFlags</span><span class="keyword">(</span><span class="default">PQtest</span><span class="keyword">::</span><span class="default">EXTR_BOTH</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Go to TOP
<br />
</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">top</span><span class="keyword">();
<br />

<br />
while(</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;BR&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objPQ</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();
<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
output:
<br />

<br />
COUNT-&gt;4
<br />
Array ( [data] =&gt; B [priority] =&gt; 6 ) 
<br />
Array ( [data] =&gt; A [priority] =&gt; 3 ) 
<br />
Array ( [data] =&gt; D [priority] =&gt; 2 ) 
<br />
Array ( [data] =&gt; C [priority] =&gt; 1 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
