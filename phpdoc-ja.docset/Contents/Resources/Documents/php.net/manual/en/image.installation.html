<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>インストール手順</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="image.requirements.html">≪ 要件</a></li>
      <li style="float: right;"><a href="image.configuration.html">実行時設定 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="image.setup.html">インストール/設定</a></li>
    <li>インストール手順</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="image.installation" class="section">
 <h2 class="title">インストール手順</h2>
 <p class="para">
  PHPでGDサポートを有効にするには、configure に<strong class="option configure">--with-gd[=DIR]</strong>
を指定します。ただし、DIRは
  GDのベースインストールディレクトリです。
  PHPにバンドルされている推奨のGDライブラリを使用するには
  <strong class="option configure">--with-gd</strong>
を指定します。
  GD ライブラリをコンパイルするには、<span class="productname">libpng</span> と
  <span class="productname">libjpeg</span> が必要です。
 </p>
 <p class="para">
  Windowsの場合、GD2 DLL <var class="filename">php_gd2.dll</var>を<var class="filename">php.ini</var>に
  エクステンションとして指定してください。
  GD1 DLL <var class="filename">php_gd.dll</var>はPHP4.3.2で削除されました。
  <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>のようにTrueカラーが優先される関数
  についてはGD2が必須です。
 </p>
 <p class="para">
  より多くの画像フォーマットを扱えるようにGDの能力を高めるには、
  <em>--with-XXXX</em>のような形のオプションを指定します。
  <table class="doctable table">
   <caption><strong>サポートされる画像フォーマット</strong></caption>
   
    <thead>
     <tr>
      <th>画像フォーマット</th>
      <th>configure オプション</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><em>jpeg</em></td>
      <td>
       jpeg をサポートするには
       <strong class="option configure">--with-jpeg-dir=DIR</strong>

       を指定します。Jpeg 6b、7、そして 8 に対応しています。
      </td>
     </tr>

     <tr>
      <td><em>png</em></td>
      <td>
       PNGをサポートするには<strong class="option configure">--with-png-dir=DIR</strong>

       を指定します。ただし、libpngは<a href="zlib.requirements.html" class="link">zlibライブラリ</a>を
       必要とするため、<strong class="option configure">--with-zlib-dir[=DIR]</strong>

       もconfigureオプションに追加する必要があります。
      </td>
     </tr>

     <tr>
      <td><em>xpm</em></td>
      <td>
       XPMをサポートするには<strong class="option configure">--with-xpm-dir=DIR</strong>

       を指定します。必要なライブラリをconfigureが見つけられなかった場合は
       X11ライブラリのパスを追加してください。
      </td>
     </tr>

    </tbody>
   
  </table>

  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <span class="simpara">
    libpng と共に PHP をコンパイルする際、GD
    ライブラリとリンクされる同じバージョンを使用する必要があります。
   </span>
  </p></blockquote>
 </p>
 <p class="para">
  GDがより多くのフォントを扱えるようにするには
  <em>--with-XXXX</em>のような形のオプションを指定します。
  <table class="doctable table">
   <caption><strong>サポートされるフォントライブラリ</strong></caption>
   
    <thead>
     <tr>
      <th>フォントライブラリ</th>
      <th>configure オプション</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><em>FreeType 2</em></td>
      <td>
       FreeType 2 をサポートするには
       <strong class="option configure">--with-freetype-dir=DIR</strong>
を指定します。
      </td>
     </tr>

     <tr>
      <td><em>T1lib</em></td>
      <td>
       T1lib (Postscript Type 1 フォント) をサポートするには
       <strong class="option configure">--with-t1lib[=DIR]</strong>
を指定します。
      </td>
     </tr>

     <tr>
      <td><em>ネイティブ TrueType 文字列関数</em></td>
      <td>
       ネイティブな TrueType 文字列関数 をサポートするには
       <strong class="option configure">--enable-gd-native-ttf</strong>
を指定します。
      </td>
     </tr>

    </tbody>
   
  </table>

 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113953""></a>
  <div class="note">
   <strong class="user">PHP Compiler</strong>
   <a href="#113953" class="date">22-Dec-2013 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To all smart-willys who come here to tell us you installed GD with package management: No one cares if you used packages management to install GD. This is for people who compile from source.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112692""></a>
  <div class="note">
   <strong class="user">MIguel G</strong>
   <a href="#112692" class="date">14-Jul-2013 02:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your are suffering with PHP53 on CentOS and GD, <br />
just<br />
yum install php53-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109472""></a>
  <div class="note">
   <strong class="user">alejo dot jm at gmail dot com</strong>
   <a href="#109472" class="date">20-Jul-2012 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Macox lion with mac port just use:<br />
sudo port install php5-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107379""></a>
  <div class="note">
   <strong class="user">Regular Guy</strong>
   <a href="#107379" class="date">05-Feb-2012 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
CentOS 6<br />
<br />
yum install php-gd<br />
<br />
worked, no need to recompile.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107302""></a>
  <div class="note">
   <strong class="user">drummerpatch at gmail dot com</strong>
   <a href="#107302" class="date">29-Jan-2012 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Running a Debian Squeeze server, all I had to do to add support for GD to my Apache server was simply run `apt-get install php5-gd` and then restart Apache. No recompiling or reconfiguring or anything. Simple!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105155""></a>
  <div class="note">
   <strong class="user">florian</strong>
   <a href="#105155" class="date">31-Jul-2011 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People having difficulties setting the --with-libdir option needs to set it like this :<br />
<br />
--with-libdir=lib64<br />
<br />
That option works fine. Doing --with-libdir=/usr/lib64 doesn't work because the configure script prepends the --prefix option before the --with-libdir option. So, doing --with-libdir=/usr/lib64 makes the configure script to look for libs in /usr/usr/lib64, which is wrong of course, and not in /usr/lib64.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104571""></a>
  <div class="note">
   <strong class="user">Joseph Marlin</strong>
   <a href="#104571" class="date">23-Jun-2011 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also had to install the libgd package in addition to php5-gd:<br />
<br />
sudo apt-get install libgd2-xpm-dev*</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103507""></a>
  <div class="note">
   <strong class="user">octopus at logicaloctopus dot com</strong>
   <a href="#103507" class="date">17-Apr-2011 09:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was running PHP on a SUSE box on amazon EC2.<br />
to get gd to work all I had to do was to run:<br />
&gt; yast -i php5_gd<br />
<br />
and when that completed I just restarted apache. voila!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102971""></a>
  <div class="note">
   <strong class="user">boly38 at gmail dot com</strong>
   <a href="#102971" class="date">17-Mar-2011 02:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get GD bundled under Ubuntu, the way to recompile php5 with gd is described here (french) <a href="http://doc.ubuntu-fr.org/modules_php#php5-gd" rel="nofollow" target="_blank">http://doc.ubuntu-fr.org/modules_php#php5-gd</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101501""></a>
  <div class="note">
   <strong class="user">lucaferr</strong>
   <a href="#101501" class="date">21-Dec-2010 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Slackware 64bit (I tested 13.1) you need to make symlinks to libpng and libjpeg if you want to compile php with GD, even if you've already installed them, otherwise configure will give you a "libpng not found" error, even if you set --with-libdir=/usr/lib64 (it seems to have no effects at all). So, run these before configuring:<br />
ln -s /usr/lib64/libjpeg.so /usr/lib/libjpeg.so<br />
ln -s /usr/lib64/libpng.so /usr/lib/libpngp.so</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99856""></a>
  <div class="note">
   <strong class="user">elassoto at hotmail dot com</strong>
   <a href="#99856" class="date">10-Sep-2010 10:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have already compiled PHP and want to recompile '--with-gd', don't forget to run 'make clean' first!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95649""></a>
  <div class="note">
   <strong class="user">Larry Kluger</strong>
   <a href="#95649" class="date">13-Jan-2010 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On 64bit centos, needed to create links from lib64 to lib. Php seems to insist on looking in lib, even with "with-jpeg-dir" config.<br />
<br />
Eg<br />
<br />
ln -s /usr/lib64/libjpeg.so.62.0.0&nbsp; /usr/lib/libjpeg.so<br />
ln -s /usr/lib64/libpng.so.3.10.0&nbsp; /usr/lib/libpng.so<br />
<br />
./configure&nbsp; \<br />
&nbsp; --with-config-file-path=/etc \<br />
&nbsp; --prefix=/usr \<br />
&nbsp; --with-bz2 \<br />
&nbsp; --enable-zip \<br />
&nbsp; --enable-mbstring \<br />
&nbsp; --with-apxs2=/usr/sbin/apxs \<br />
&nbsp; --with-zlib-dir=/usr/include \<br />
&nbsp; --with-libxml-dir=/usr/lib64 \<br />
&nbsp; --with-mcrypt=/usr/lib64 \<br />
&nbsp; --with-mysql \<br />
&nbsp; --with-gd \<br />
&nbsp; --with-jpeg-dir=/usr \<br />
&nbsp; --with-png-dir=/usr \<br />
&nbsp; --enable-calendar</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88494""></a>
  <div class="note">
   <strong class="user">ben at bluehype dot com dot au</strong>
   <a href="#88494" class="date">27-Jan-2009 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have already compiled php without jpeg support and decide you want it , then before you compile again you might need to run "make clean" first.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86699""></a>
  <div class="note">
   <strong class="user">msc at homofaber dot com</strong>
   <a href="#86699" class="date">30-Oct-2008 04:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that it might be pretty easy to install gd without the need to recompile php, when using debian:
<br />

<br />
apt-get install php5-gd</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85240""></a>
  <div class="note">
   <strong class="user">gerard at charlesconsulting dot com</strong>
   <a href="#85240" class="date">21-Aug-2008 06:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On my system,I had to ensure I had not only libpng and libjpeg, but also the libpng-devel and libjpeg-devel packages installed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84538""></a>
  <div class="note">
   <strong class="user">kronn</strong>
   <a href="#84538" class="date">17-Jul-2008 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Everytime I try to install the gd-lib as a dynamic extension, I run into the same problem: It wont work.
<br />

<br />
I get the following error:
<br />

<br />
PHP Warning:&nbsp; PHP Startup: Unable to load dynamic library '/usr/pkg/lib/php/20040412/gd.so' - dlopen(/usr/pkg/lib/php/20040412/gd.so, 9): Symbol not found: __cg_jpeg_resync_to_restart\n&nbsp; Referenced from: /System/Library/Frameworks/ApplicationServices. framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO\n&nbsp; Expected in: /usr/pkg/lib/libjpeg.62.dylib\n in Unknown on line 0
<br />

<br />
I use pkgsrc for software package managment on my mac, as may be apparent from the paths.
<br />

<br />
The solution is, to edit the file /usr/pkg/sbin/envvars and remove or comment the DYLD_LIBRARY_PATH because it is causing the error...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82621""></a>
  <div class="note">
   <strong class="user">mike at clove dot com</strong>
   <a href="#82621" class="date">18-Apr-2008 06:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
jpeg [jpg] file processing doesn't work unless you build php with '--with-jpeg-dir=&lt;path to jpeg library&gt;'.<br />
<br />
It still doesn't work unless &lt;path to jpeg library&gt; points to the directory holding the directory holding the library unless libjpeg.&lt;whatever&gt; is in either /usr/lib or /usr/local/lib. For instance, on a mac with libjpeg.a installed via mac ports, you need '/opt/local' rather than '/opt/local/lib'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
