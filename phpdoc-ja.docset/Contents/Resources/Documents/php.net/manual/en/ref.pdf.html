<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>PDF 関数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdf.examples-basic.html">≪ 基本的な使用法</a></li>
      <li style="float: right;"><a href="function.pdf-activate-item.html">PDF_activate_item ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.pdf.html">PDF</a></li>
    <li>PDF 関数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.pdf" class="reference">
  <h1 class="title">PDF 関数</h1>

  <div class="partintro">
    <h1 class="title">廃止された PDFlib 関数についての注意</h1>
   <p class="para">
    PHP 4.0.5 以降、PHPlib 用の PHP 拡張モジュールは、PDFlib GmbH から
    正式にサポートされています。これにより、PDFlib
    リファレンスマニュアルに記述された全ての関数が PHP4 で全く同じ意味、
    同じパラメータでサポートされています。しかし、PDFlib バージョン 5.0.4
    以降ではすべてのパラメータを指定する必要があります。互換性を保つために
    PDFlib サポート関数ではまだ古い関数もサポートしていますが、上記の
    ように新しいバージョンに置換される予定です。PDFlib GmbH は、これらの
    古い関数を使用した場合に生じた際に生じた問題に関してはサポートを
    行いません。このドキュメントではそれらの関数については「古い関数」と
    明記しており、かわりに使用する関数について説明しています。
   </p>
  </div>

  






































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 <h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.pdf-activate-item.html">PDF_activate_item</a> &mdash; 構造体要素やその他の内容をアクティブにする</li><li><a href="function.pdf-add-annotation.html">PDF_add_annotation</a> &mdash; 注記を追加する [古い関数]</li><li><a href="function.pdf-add-bookmark.html">PDF_add_bookmark</a> &mdash; ブックマークを現在のページに追加する [古い関数]</li><li><a href="function.pdf-add-launchlink.html">PDF_add_launchlink</a> &mdash; 現在のページに起動用注記を追加する [古い関数]</li><li><a href="function.pdf-add-locallink.html">PDF_add_locallink</a> &mdash; 現在のページにリンク注記を追加する [古い関数]</li><li><a href="function.pdf-add-nameddest.html">PDF_add_nameddest</a> &mdash; 移動先を作成する</li><li><a href="function.pdf-add-note.html">PDF_add_note</a> &mdash; 現在のページに注記を追加する [古い関数]</li><li><a href="function.pdf-add-outline.html">PDF_add_outline</a> &mdash; 現在のページにブックマークを追加する [古い関数]</li><li><a href="function.pdf-add-pdflink.html">PDF_add_pdflink</a> &mdash; 現在のページにリンク注記を追加する [古い関数]</li><li><a href="function.pdf-add-table-cell.html">PDF_add_table_cell</a> &mdash; 新しいテーブル、あるいは既存のテーブルにセルを追加する</li><li><a href="function.pdf-add-textflow.html">PDF_add_textflow</a> &mdash; Textflow を作成するか、既存の Textflow にテキストを追加する</li><li><a href="function.pdf-add-thumbnail.html">PDF_add_thumbnail</a> &mdash; 現在のページにサムネイルを追加する</li><li><a href="function.pdf-add-weblink.html">PDF_add_weblink</a> &mdash; 現在のページに Web リンクを追加する [古い関数]</li><li><a href="function.pdf-arc.html">PDF_arc</a> &mdash; 反時計回りに円弧を描く</li><li><a href="function.pdf-arcn.html">PDF_arcn</a> &mdash; 時計回りに円弧を描く</li><li><a href="function.pdf-attach-file.html">PDF_attach_file</a> &mdash; 現在のページに添付ファイルを追加する [古い関数]</li><li><a href="function.pdf-begin-document.html">PDF_begin_document</a> &mdash; 新しい PDF ファイルを作成する</li><li><a href="function.pdf-begin-font.html">PDF_begin_font</a> &mdash; Type 3 フォント定義を開始する</li><li><a href="function.pdf-begin-glyph.html">PDF_begin_glyph</a> &mdash; Type 3 フォントのグリフ定義を開始する</li><li><a href="function.pdf-begin-item.html">PDF_begin_item</a> &mdash; 構造体要素あるいはその他の内容をオープンする</li><li><a href="function.pdf-begin-layer.html">PDF_begin_layer</a> &mdash; レイヤーを開始する</li><li><a href="function.pdf-begin-page-ext.html">PDF_begin_page_ext</a> &mdash; 新規ページを開始する</li><li><a href="function.pdf-begin-page.html">PDF_begin_page</a> &mdash; 新規ページを開始する [古い関数]</li><li><a href="function.pdf-begin-pattern.html">PDF_begin_pattern</a> &mdash; パターン定義を開始する</li><li><a href="function.pdf-begin-template-ext.html">PDF_begin_template_ext</a> &mdash; テンプレート定義を開始する</li><li><a href="function.pdf-begin-template.html">PDF_begin_template</a> &mdash; テンプレート定義を開始する [古い関数]</li><li><a href="function.pdf-circle.html">PDF_circle</a> &mdash; 円を描く</li><li><a href="function.pdf-clip.html">PDF_clip</a> &mdash; 現在のパスに切り取る</li><li><a href="function.pdf-close-image.html">PDF_close_image</a> &mdash; 画像を閉じる</li><li><a href="function.pdf-close-pdi-page.html">PDF_close_pdi_page</a> &mdash; ページハンドルを閉じる</li><li><a href="function.pdf-close-pdi.html">PDF_close_pdi</a> &mdash; PDF ドキュメント入力を閉じる [古い関数]</li><li><a href="function.pdf-close.html">PDF_close</a> &mdash; pdf ドキュメントを閉じる [古い関数]</li><li><a href="function.pdf-closepath-fill-stroke.html">PDF_closepath_fill_stroke</a> &mdash; 現在のパスを閉じ、塗りつぶし、輪郭を描く</li><li><a href="function.pdf-closepath-stroke.html">PDF_closepath_stroke</a> &mdash; パスを閉じ、パスに沿って線を描く</li><li><a href="function.pdf-closepath.html">PDF_closepath</a> &mdash; 現在のパスを閉じる</li><li><a href="function.pdf-concat.html">PDF_concat</a> &mdash; 行列を CTM に追加する</li><li><a href="function.pdf-continue-text.html">PDF_continue_text</a> &mdash; 次の行にテキストを出力する</li><li><a href="function.pdf-create-3dview.html">PDF_create_3dview</a> &mdash; 3D ビューを作成する</li><li><a href="function.pdf-create-action.html">PDF_create_action</a> &mdash; オブジェクトやイベントに対するアクションを作成する</li><li><a href="function.pdf-create-annotation.html">PDF_create_annotation</a> &mdash; 矩形の注記を作成する</li><li><a href="function.pdf-create-bookmark.html">PDF_create_bookmark</a> &mdash; ブックマークを作成する</li><li><a href="function.pdf-create-field.html">PDF_create_field</a> &mdash; フォームフィールドを作成する</li><li><a href="function.pdf-create-fieldgroup.html">PDF_create_fieldgroup</a> &mdash; フォームフィールドグループを作成する</li><li><a href="function.pdf-create-gstate.html">PDF_create_gstate</a> &mdash; 画像状態オブジェクトを作成する</li><li><a href="function.pdf-create-pvf.html">PDF_create_pvf</a> &mdash; PDFlib 仮想ファイルを作成する</li><li><a href="function.pdf-create-textflow.html">PDF_create_textflow</a> &mdash; textflow オブジェクトを作成する</li><li><a href="function.pdf-curveto.html">PDF_curveto</a> &mdash; ベジエ曲線を描く</li><li><a href="function.pdf-define-layer.html">PDF_define_layer</a> &mdash; レイヤー定義を作成する</li><li><a href="function.pdf-delete-pvf.html">PDF_delete_pvf</a> &mdash; PDFlib 仮想ファイルを削除する</li><li><a href="function.pdf-delete-table.html">PDF_delete_table</a> &mdash; テーブルオブジェクトを削除する</li><li><a href="function.pdf-delete-textflow.html">PDF_delete_textflow</a> &mdash; textflow オブジェクトを削除する</li><li><a href="function.pdf-delete.html">PDF_delete</a> &mdash; PDFlib オブジェクトを削除する</li><li><a href="function.pdf-encoding-set-char.html">PDF_encoding_set_char</a> &mdash; グリフ名や Unicode 値を追加する</li><li><a href="function.pdf-end-document.html">PDF_end_document</a> &mdash; PDF ファイルを閉じる</li><li><a href="function.pdf-end-font.html">PDF_end_font</a> &mdash; Type 3 フォント定義を終了する</li><li><a href="function.pdf-end-glyph.html">PDF_end_glyph</a> &mdash; Type 3 フォントのグリフ定義を終了する</li><li><a href="function.pdf-end-item.html">PDF_end_item</a> &mdash; 構造体要素やその他の内容を閉じる</li><li><a href="function.pdf-end-layer.html">PDF_end_layer</a> &mdash; すべてのアクティブなレイヤーを無効にする</li><li><a href="function.pdf-end-page-ext.html">PDF_end_page_ext</a> &mdash; ページを終了する</li><li><a href="function.pdf-end-page.html">PDF_end_page</a> &mdash; ページを終了する</li><li><a href="function.pdf-end-pattern.html">PDF_end_pattern</a> &mdash; パターンを終了する</li><li><a href="function.pdf-end-template.html">PDF_end_template</a> &mdash; テンプレートを終了する</li><li><a href="function.pdf-endpath.html">PDF_endpath</a> &mdash; 現在のパスを終了する</li><li><a href="function.pdf-fill-imageblock.html">PDF_fill_imageblock</a> &mdash; 画像ブロックをさまざまなデータで塗りつぶす</li><li><a href="function.pdf-fill-pdfblock.html">PDF_fill_pdfblock</a> &mdash; PDF ブロックをさまざまなデータで塗りつぶす</li><li><a href="function.pdf-fill-stroke.html">PDF_fill_stroke</a> &mdash; パスを塗りつぶし、パスの輪郭を描く</li><li><a href="function.pdf-fill-textblock.html">PDF_fill_textblock</a> &mdash; テキストブロックをさまざまなデータで塗りつぶす</li><li><a href="function.pdf-fill.html">PDF_fill</a> &mdash; 現在のパスを塗りつぶす</li><li><a href="function.pdf-findfont.html">PDF_findfont</a> &mdash; 後で使用するフォントを準備する [古い関数]</li><li><a href="function.pdf-fit-image.html">PDF_fit_image</a> &mdash; 画像やテンプレートを配置する</li><li><a href="function.pdf-fit-pdi-page.html">PDF_fit_pdi_page</a> &mdash; インポートした PDF ページを配置する</li><li><a href="function.pdf-fit-table.html">PDF_fit_table</a> &mdash; テーブルをページに配置する</li><li><a href="function.pdf-fit-textflow.html">PDF_fit_textflow</a> &mdash; textflow を矩形領域に配置する</li><li><a href="function.pdf-fit-textline.html">PDF_fit_textline</a> &mdash; 1 行分のテキストを配置する</li><li><a href="function.pdf-get-apiname.html">PDF_get_apiname</a> &mdash; 成功しなかった API 関数の名前を取得する</li><li><a href="function.pdf-get-buffer.html">PDF_get_buffer</a> &mdash; PDF 出力バッファを取得する</li><li><a href="function.pdf-get-errmsg.html">PDF_get_errmsg</a> &mdash; エラーテキストを取得する</li><li><a href="function.pdf-get-errnum.html">PDF_get_errnum</a> &mdash; エラー番号を取得する</li><li><a href="function.pdf-get-font.html">PDF_get_font</a> &mdash; フォントを取得する [古い関数]</li><li><a href="function.pdf-get-fontname.html">PDF_get_fontname</a> &mdash; フォント名を取得する [古い関数]</li><li><a href="function.pdf-get-fontsize.html">PDF_get_fontsize</a> &mdash; フォント処理 [古い関数]</li><li><a href="function.pdf-get-image-height.html">PDF_get_image_height</a> &mdash; 画像の高さを取得する [古い関数]</li><li><a href="function.pdf-get-image-width.html">PDF_get_image_width</a> &mdash; 画像の幅を取得する [古い関数]</li><li><a href="function.pdf-get-majorversion.html">PDF_get_majorversion</a> &mdash; メジャーバージョン番号を取得する [古い関数]</li><li><a href="function.pdf-get-minorversion.html">PDF_get_minorversion</a> &mdash; マイナーバージョン番号を取得する [古い関数]</li><li><a href="function.pdf-get-parameter.html">PDF_get_parameter</a> &mdash; 文字列パラメータを取得する</li><li><a href="function.pdf-get-pdi-parameter.html">PDF_get_pdi_parameter</a> &mdash; PDI 文字列パラメータを取得する [古い関数]</li><li><a href="function.pdf-get-pdi-value.html">PDF_get_pdi_value</a> &mdash; 数値型の PDI パラメータを取得する [古い関数]</li><li><a href="function.pdf-get-value.html">PDF_get_value</a> &mdash; 数値型のパラメータを取得する</li><li><a href="function.pdf-info-font.html">PDF_info_font</a> &mdash; 読み込まれたフォントについての詳細情報を問い合わせる</li><li><a href="function.pdf-info-matchbox.html">PDF_info_matchbox</a> &mdash; マッチボックスの情報を問い合わせる</li><li><a href="function.pdf-info-table.html">PDF_info_table</a> &mdash; テーブルの情報を取得する</li><li><a href="function.pdf-info-textflow.html">PDF_info_textflow</a> &mdash; textflow の状態を問い合わせる</li><li><a href="function.pdf-info-textline.html">PDF_info_textline</a> &mdash; テキストの行のフォーマットを行い、メトリクスを問い合わせる</li><li><a href="function.pdf-initgraphics.html">PDF_initgraphics</a> &mdash; 描画状態をリセットする</li><li><a href="function.pdf-lineto.html">PDF_lineto</a> &mdash; 線を描く</li><li><a href="function.pdf-load-3ddata.html">PDF_load_3ddata</a> &mdash; 3D モデルを読み込む</li><li><a href="function.pdf-load-font.html">PDF_load_font</a> &mdash; フォントを検索し、準備する</li><li><a href="function.pdf-load-iccprofile.html">PDF_load_iccprofile</a> &mdash; ICC プロファイルを検索し、準備する</li><li><a href="function.pdf-load-image.html">PDF_load_image</a> &mdash; 画像ファイルをオープンする</li><li><a href="function.pdf-makespotcolor.html">PDF_makespotcolor</a> &mdash; スポット色を作成する</li><li><a href="function.pdf-moveto.html">PDF_moveto</a> &mdash; 現在の位置を設定する</li><li><a href="function.pdf-new.html">PDF_new</a> &mdash; PDFlib オブジェクトを作成する</li><li><a href="function.pdf-open-ccitt.html">PDF_open_ccitt</a> &mdash; raw CCITT イメージをオープンする [古い関数]</li><li><a href="function.pdf-open-file.html">PDF_open_file</a> &mdash; PDF ファイルを作成する [古い関数]</li><li><a href="function.pdf-open-gif.html">PDF_open_gif</a> &mdash; GIF イメージをオープンする [古い関数]</li><li><a href="function.pdf-open-image-file.html">PDF_open_image_file</a> &mdash; ファイルからイメージを読み込む [古い関数]</li><li><a href="function.pdf-open-image.html">PDF_open_image</a> &mdash; イメージデータを使用する [古い関数]</li><li><a href="function.pdf-open-jpeg.html">PDF_open_jpeg</a> &mdash; JPEG イメージをオープンする [古い関数]</li><li><a href="function.pdf-open-memory-image.html">PDF_open_memory_image</a> &mdash; PHP のイメージ関数で作成されたイメージをオープンする [未サポート]</li><li><a href="function.pdf-open-pdi-document.html">PDF_open_pdi_document</a> &mdash; pdi ドキュメントを準備する</li><li><a href="function.pdf-open-pdi-page.html">PDF_open_pdi_page</a> &mdash; ページを準備する</li><li><a href="function.pdf-open-pdi.html">PDF_open_pdi</a> &mdash; PDF ファイルをオープンする [古い関数]</li><li><a href="function.pdf-open-tiff.html">PDF_open_tiff</a> &mdash; TIFF イメージをオープンする [古い関数]</li><li><a href="function.pdf-pcos-get-number.html">PDF_pcos_get_number</a> &mdash; number あるいは boolean 型の pCOS パスの値を取得する</li><li><a href="function.pdf-pcos-get-stream.html">PDF_pcos_get_stream</a> &mdash; stream、fstream あるいは string 型の pCOS パスの内容を取得する</li><li><a href="function.pdf-pcos-get-string.html">PDF_pcos_get_string</a> &mdash; name、string あるいは boolean 型の pCOS パスの値を取得する</li><li><a href="function.pdf-place-image.html">PDF_place_image</a> &mdash; イメージをページ上に置く [古い関数]</li><li><a href="function.pdf-place-pdi-page.html">PDF_place_pdi_page</a> &mdash; PDF ページを置く [古い関数]</li><li><a href="function.pdf-process-pdi.html">PDF_process_pdi</a> &mdash; インポートされた PDF ドキュメントを処理する</li><li><a href="function.pdf-rect.html">PDF_rect</a> &mdash; 矩形を描く</li><li><a href="function.pdf-restore.html">PDF_restore</a> &mdash; 描画状態を復元する</li><li><a href="function.pdf-resume-page.html">PDF_resume_page</a> &mdash; ページを再開する</li><li><a href="function.pdf-rotate.html">PDF_rotate</a> &mdash; 座標系を回転する</li><li><a href="function.pdf-save.html">PDF_save</a> &mdash; 描画状態を保存する</li><li><a href="function.pdf-scale.html">PDF_scale</a> &mdash; スケールを設定する</li><li><a href="function.pdf-set-border-color.html">PDF_set_border_color</a> &mdash; 注記の周りの境界色を設定する [古い関数]</li><li><a href="function.pdf-set-border-dash.html">PDF_set_border_dash</a> &mdash; 注記の周りの境界の破線形式を設定する [古い関数]</li><li><a href="function.pdf-set-border-style.html">PDF_set_border_style</a> &mdash; 注記の周りの境界の形式を設定する [古い関数]</li><li><a href="function.pdf-set-char-spacing.html">PDF_set_char_spacing</a> &mdash; 文字間隔を設定する [古い関数]</li><li><a href="function.pdf-set-duration.html">PDF_set_duration</a> &mdash; ページ間隔を設定する [古い関数]</li><li><a href="function.pdf-set-gstate.html">PDF_set_gstate</a> &mdash; 画像状態オブジェクトをアクティブにする</li><li><a href="function.pdf-set-horiz-scaling.html">PDF_set_horiz_scaling</a> &mdash; テキストの横方向倍率を設定する [古い関数]</li><li><a href="function.pdf-set-info-author.html">PDF_set_info_author</a> &mdash; ドキュメントの author フィールドを設定する [古い関数]</li><li><a href="function.pdf-set-info-creator.html">PDF_set_info_creator</a> &mdash; ドキュメントの creator フィールドを設定する [古い関数]</li><li><a href="function.pdf-set-info-keywords.html">PDF_set_info_keywords</a> &mdash; ドキュメントの keyword フィールドを設定する [古い関数]</li><li><a href="function.pdf-set-info-subject.html">PDF_set_info_subject</a> &mdash; ドキュメントの subject フィールドを設定する [古い関数]</li><li><a href="function.pdf-set-info-title.html">PDF_set_info_title</a> &mdash; ドキュメントの title フィールドを設定する [古い関数]</li><li><a href="function.pdf-set-info.html">PDF_set_info</a> &mdash; ドキュメント情報のフィールドを設定する</li><li><a href="function.pdf-set-layer-dependency.html">PDF_set_layer_dependency</a> &mdash; レイヤー間の関係を定義する</li><li><a href="function.pdf-set-leading.html">PDF_set_leading</a> &mdash; テキストの行間を設定する [古い関数]</li><li><a href="function.pdf-set-parameter.html">PDF_set_parameter</a> &mdash; 文字列パラメータを設定する</li><li><a href="function.pdf-set-text-matrix.html">PDF_set_text_matrix</a> &mdash; テキストの行列を設定する [古い関数]</li><li><a href="function.pdf-set-text-pos.html">PDF_set_text_pos</a> &mdash; テキストの位置を設定する</li><li><a href="function.pdf-set-text-rendering.html">PDF_set_text_rendering</a> &mdash; テキストの描画方法を設定する [古い関数]</li><li><a href="function.pdf-set-text-rise.html">PDF_set_text_rise</a> &mdash; テキストの傾きを設定する [古い関数]</li><li><a href="function.pdf-set-value.html">PDF_set_value</a> &mdash; 数値パラメータを設定する</li><li><a href="function.pdf-set-word-spacing.html">PDF_set_word_spacing</a> &mdash; 単語間の空白を設定する [古い関数]</li><li><a href="function.pdf-setcolor.html">PDF_setcolor</a> &mdash; 塗りつぶし色および輪郭色を設定する</li><li><a href="function.pdf-setdash.html">PDF_setdash</a> &mdash; 破線パターンを設定する</li><li><a href="function.pdf-setdashpattern.html">PDF_setdashpattern</a> &mdash; 破線パターンを設定する</li><li><a href="function.pdf-setflat.html">PDF_setflat</a> &mdash; 平面度を設定する</li><li><a href="function.pdf-setfont.html">PDF_setfont</a> &mdash; フォントを設定する</li><li><a href="function.pdf-setgray-fill.html">PDF_setgray_fill</a> &mdash; 塗りつぶし色をグレーに設定する [古い関数]</li><li><a href="function.pdf-setgray-stroke.html">PDF_setgray_stroke</a> &mdash; 描画色をグレーに設定する [古い関数]</li><li><a href="function.pdf-setgray.html">PDF_setgray</a> &mdash; 色をグレーに設定する [古い関数]</li><li><a href="function.pdf-setlinecap.html">PDF_setlinecap</a> &mdash; linecap パラメータを設定する</li><li><a href="function.pdf-setlinejoin.html">PDF_setlinejoin</a> &mdash; linejoin パラメータを設定する</li><li><a href="function.pdf-setlinewidth.html">PDF_setlinewidth</a> &mdash; 線幅を設定する</li><li><a href="function.pdf-setmatrix.html">PDF_setmatrix</a> &mdash; 現在の変換行列を設定する</li><li><a href="function.pdf-setmiterlimit.html">PDF_setmiterlimit</a> &mdash; miter limit を設定する</li><li><a href="function.pdf-setpolydash.html">PDF_setpolydash</a> &mdash; 複雑な破線パターンを設定する [古い関数]</li><li><a href="function.pdf-setrgbcolor-fill.html">PDF_setrgbcolor_fill</a> &mdash; 塗りつぶし RGB 色の値を設定する</li><li><a href="function.pdf-setrgbcolor-stroke.html">PDF_setrgbcolor_stroke</a> &mdash; 描画 RGB 色を設定する [古い関数]</li><li><a href="function.pdf-setrgbcolor.html">PDF_setrgbcolor</a> &mdash; 描画および塗りつぶし RGB 色を設定する [古い関数]</li><li><a href="function.pdf-shading-pattern.html">PDF_shading_pattern</a> &mdash; シェーディングパターンを定義する</li><li><a href="function.pdf-shading.html">PDF_shading</a> &mdash; 混色を定義する</li><li><a href="function.pdf-shfill.html">PDF_shfill</a> &mdash; シェーディングで領域を塗りつぶす</li><li><a href="function.pdf-show-boxed.html">PDF_show_boxed</a> &mdash; ボックスにテキストを出力する [古い関数]</li><li><a href="function.pdf-show-xy.html">PDF_show_xy</a> &mdash; 指定した位置にテキストを出力する</li><li><a href="function.pdf-show.html">PDF_show</a> &mdash; 現在の位置にテキストを出力する</li><li><a href="function.pdf-skew.html">PDF_skew</a> &mdash; 座標系を歪ませる</li><li><a href="function.pdf-stringwidth.html">PDF_stringwidth</a> &mdash; テキストの幅を返す</li><li><a href="function.pdf-stroke.html">PDF_stroke</a> &mdash; パスを描く</li><li><a href="function.pdf-suspend-page.html">PDF_suspend_page</a> &mdash; ページを停止する</li><li><a href="function.pdf-translate.html">PDF_translate</a> &mdash; 座標系の原点を設定する</li><li><a href="function.pdf-utf16-to-utf8.html">PDF_utf16_to_utf8</a> &mdash; 文字列を UTF-16 から UTF-8 に変換する</li><li><a href="function.pdf-utf32-to-utf16.html">PDF_utf32_to_utf16</a> &mdash; 文字列を UTF-32 から UTF-16 に変換する</li><li><a href="function.pdf-utf8-to-utf16.html">PDF_utf8_to_utf16</a> &mdash; 文字列を UTF-8 から UTF-16 に変換する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113533""></a>
  <div class="note">
   <strong class="user">sebastien at malot dot fr</strong>
   <a href="#113533" class="date">26-Oct-2013 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
I post this comment here because I always wanted to extract text from PDF files, but I never found it.<br />
So now, I spread my tresor.<br />
<br />
So spend much time in creating a PHP library to extract text from pages.<br />
Based on TCPDF parser class, now my lib can handle many cases such as multiple charset encoding, base64 and octal encoding ...<br />
<br />
Project webiste : <a href="http://www.pdfparser.org" rel="nofollow" target="_blank">http://www.pdfparser.org</a><br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Include Composer autoloader if not already done.<br />
</span><span class="keyword">include </span><span class="string">'vendor/autoload.php'</span><span class="keyword">;<br />
&nbsp;<br />
</span><span class="comment">// Parse pdf file and build necessary objects.<br />
</span><span class="default">$parser </span><span class="keyword">= new \</span><span class="default">Smalot</span><span class="keyword">\</span><span class="default">PdfParser</span><span class="keyword">\</span><span class="default">Parser</span><span class="keyword">();<br />
</span><span class="default">$pdf&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">$parser</span><span class="keyword">-&gt;</span><span class="default">parseFile</span><span class="keyword">(</span><span class="string">'document.pdf'</span><span class="keyword">);<br />
&nbsp;<br />
</span><span class="comment">// Retrieve all pages from the pdf file.<br />
</span><span class="default">$pages&nbsp; </span><span class="keyword">= </span><span class="default">$pdf</span><span class="keyword">-&gt;</span><span class="default">getPages</span><span class="keyword">();<br />
&nbsp;<br />
</span><span class="comment">// Loop over each page to extract text.<br />
</span><span class="keyword">foreach (</span><span class="default">$pages </span><span class="keyword">as </span><span class="default">$page</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$page</span><span class="keyword">-&gt;</span><span class="default">getText</span><span class="keyword">();<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Don't hesitate to report any bug on github issue report tool.<br />
<br />
Thanks</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112931""></a>
  <div class="note">
   <strong class="user">sebastien at malot dot fr</strong>
   <a href="#112931" class="date">08-Aug-2013 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do you have a sample pdf ?<br />
Can you try those classes :<br />
<br />
<a href="http://gist.github.com/smalot/6183152" rel="nofollow" target="_blank">http://gist.github.com/smalot/6183152</a><br />
or<br />
<a href="http://www.zikko.se/resources/extractFromPDF.php" rel="nofollow" target="_blank">http://www.zikko.se/resources/extractFromPDF.php</a><br />
<br />
can you see your links on the extracted content ?<br />
BR</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90253""></a>
  <div class="note">
   <strong class="user">bolyde at gmail dot com</strong>
   <a href="#90253" class="date">12-Apr-2009 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
To find the page number of a PDF File, i find this :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">getNumPagesInPDF</span><span class="keyword">(array </span><span class="default">$arguments </span><span class="keyword">= array()) <br />
{<br />
@list(</span><span class="default">$PDFPath</span><span class="keyword">) = </span><span class="default">$arguments</span><span class="keyword">;<br />
</span><span class="default">$stream </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$PDFPath</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">$PDFContent </span><span class="keyword">= @</span><span class="default">fread </span><span class="keyword">(</span><span class="default">$stream</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$PDFPath</span><span class="keyword">));<br />
if(!</span><span class="default">$stream </span><span class="keyword">|| !</span><span class="default">$PDFContent</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$firstValue </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$secondValue </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\/N\s+([0-9]+)/"</span><span class="keyword">, </span><span class="default">$PDFContent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$firstValue </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
}<br />
&nbsp;<br />
if(</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\/Count\s+([0-9]+)/s"</span><span class="keyword">, </span><span class="default">$PDFContent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secondValue </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
}<br />
return ((</span><span class="default">$secondValue </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">$secondValue </span><span class="keyword">: </span><span class="default">max</span><span class="keyword">(</span><span class="default">$firstValue</span><span class="keyword">, </span><span class="default">$secondValue</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86245""></a>
  <div class="note">
   <strong class="user">bondo2 at bondo2 dot info</strong>
   <a href="#86245" class="date">09-Oct-2008 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">//getting new instance 
<br />
</span><span class="default">$pdfFile </span><span class="keyword">= </span><span class="default">new_pdf</span><span class="keyword">();
<br />

<br />
</span><span class="default">PDF_open_file</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//document info
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Auther"</span><span class="keyword">, </span><span class="string">"Ahmed Elbshry"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Creator"</span><span class="keyword">, </span><span class="string">"Ahmed Elbshry"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Title"</span><span class="keyword">, </span><span class="string">"PDFlib"</span><span class="keyword">);
<br />
</span><span class="default">pdf_set_info</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Subject"</span><span class="keyword">, </span><span class="string">"Using PDFlib"</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//starting our page and define the width and highet of the document
<br />
</span><span class="default">pdf_begin_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="default">595</span><span class="keyword">, </span><span class="default">842</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//check if Arial font is found, or exit
<br />
</span><span class="keyword">if(</span><span class="default">$font </span><span class="keyword">= </span><span class="default">PDF_findfont</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"Arial"</span><span class="keyword">, </span><span class="string">"winansi"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_setfont</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="default">$font</span><span class="keyword">, </span><span class="default">12</span><span class="keyword">);
<br />
} else {
<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">"Font Not Found!"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_end_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_close</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">PDF_delete</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; exit();
<br />
}
<br />

<br />
</span><span class="comment">//start writing from the point 50,780
<br />
</span><span class="default">PDF_show_xy</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">, </span><span class="string">"This Text In Arial Font"</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">780</span><span class="keyword">);
<br />
</span><span class="default">PDF_end_page</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="default">PDF_close</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//store the pdf document in $pdf
<br />
</span><span class="default">$pdf </span><span class="keyword">= </span><span class="default">PDF_get_buffer</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="comment">//get&nbsp; the len to tell the browser about it
<br />
</span><span class="default">$pdflen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//telling the browser about the pdf document
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/pdf"</span><span class="keyword">);
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-length: </span><span class="default">$pdflen</span><span class="string">"</span><span class="keyword">);
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: inline; filename=phpMade.pdf"</span><span class="keyword">);
<br />
</span><span class="comment">//output the document
<br />
</span><span class="keyword">print(</span><span class="default">$pdf</span><span class="keyword">);
<br />
</span><span class="comment">//delete the object
<br />
</span><span class="default">PDF_delete</span><span class="keyword">(</span><span class="default">$pdfFile</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80521""></a>
  <div class="note">
   <strong class="user">SID TRIVEDI</strong>
   <a href="#80521" class="date">20-Jan-2008 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/*<br />
Folks, There is an excellent tutorial from Rasmus Lerdorf available at (It does not support I.E.)<br />
<br />
<a href="http://talks.php.net/show/osconpdf/" rel="nofollow" target="_blank">http://talks.php.net/show/osconpdf/</a><br />
<br />
Where PHP Mastermind Guru (Father) explained nicely about text, fonts, images and their attributes with working snippets.<br />
<br />
Another tutorial can be found at<br />
<br />
www.devshed.com/c/a/PHP/Building-PDF-Documents-with-PHP-5<br />
<br />
Hence following is the various size of PDF Document.<br />
<br />
Origin is at the lower left and the basic unit is the DTP pt.<br />
<br />
1 pt = 1/72 inch = 0.35277777778 mm<br />
<br />
Some common page sizes<br />
<br />
Format&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Width&nbsp;&nbsp; Height<br />
US-Letter&nbsp; &nbsp; &nbsp; 612&nbsp; &nbsp; &nbsp; 792<br />
US-Legal&nbsp; &nbsp; &nbsp;&nbsp; 612&nbsp; &nbsp; &nbsp; 1008<br />
US-Ledger&nbsp; &nbsp;&nbsp; 1224&nbsp; &nbsp;&nbsp; 792<br />
11x17&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 792&nbsp; &nbsp; &nbsp; 1224<br />
A0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2380&nbsp; &nbsp; 3368<br />
A1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1684&nbsp; &nbsp; 2380<br />
A2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1190&nbsp; &nbsp; 1684<br />
A3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 842&nbsp; &nbsp; &nbsp; 1190<br />
A4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 595&nbsp; &nbsp; &nbsp; 842<br />
A5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 421&nbsp; &nbsp; &nbsp; 595<br />
A6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 297&nbsp; &nbsp; &nbsp; 421<br />
B5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 501&nbsp; &nbsp; &nbsp; 709<br />
<br />
*/</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80322""></a>
  <div class="note">
   <strong class="user">info at tecnick dot com</strong>
   <a href="#80322" class="date">10-Jan-2008 09:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of us that do not want to pay for a commercial license to use PDFlib I suggest TCPDF:<br />
<br />
<a href="http://tcpdf.sf.net" rel="nofollow" target="_blank">http://tcpdf.sf.net</a><br />
<br />
TCPDF is an Open Source PHP class for generating PDF files on-the-fly without requiring external extensions. This class is already adopted by a large number of php projects such as phpMyAdmin, Drupal, Joomla, Xoops, TCExam, etc.&nbsp; <br />
<br />
Starting from 2.1 version TCPDF supports UTF-8 Unicode and bidirectional languages such as Arabic and Hebrew.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79333""></a>
  <div class="note">
   <strong class="user">Ken McColl</strong>
   <a href="#79333" class="date">21-Nov-2007 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get this to work on Windows do not use escapeshellcmd()<br />
<br />
From online help:<br />
Following characters are preceded by a backslash: #&amp;;`|*?~&lt;&gt;^()[]{}$\, \x0A and \xFF. ' and " are escaped only if they are not paired. In Windows, all these characters plus % are replaced by a space instead.<br />
<br />
So you are probably passing duff paths to pdf2text.exe<br />
<br />
Removing escapeshellcmd worked for me. Just make darned sure you are in control of what is being passed through to your system call.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79266""></a>
  <div class="note">
   <strong class="user">kangaroo232002 at yahoo dot co dot uk</strong>
   <a href="#79266" class="date">18-Nov-2007 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To extend alex's example earlier, you can use a couple of switches inside the pdf doc to give you the total number of pages, without using any ext. I would have added the whole code, however the site keeps on saying "line is too long... yadayada".<br />
<br />
Open the doc using fopen("$file", "rb"); (for reading)<br />
<br />
Test the first approx 1000b for the following regex<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\/N\s+([0-9]+)/"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">, </span><span class="default">$found</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$found</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If that doesn't return anything, you have to read the rest of the file:<br />
<br />
<span class="default">&lt;?php<br />
<br />
preg_match_all</span><span class="keyword">(</span><span class="string">"/\/Type\s*\/Pages\s*\/Kids\s+<br />
\[.*?\]\s*\/Count\s+([0-9]+)/"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This may return more than one, so look through for the highest value, which is the total number of pages in your doc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74211""></a>
  <div class="note">
   <strong class="user">luc at phpt dot org</strong>
   <a href="#74211" class="date">30-Mar-2007 06:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I am trying to extract the text from PDF files and use it to feed a search engine (Intranet tool). I tried several functions "PDF2TXT" posted below, but not they do not produce the expected result. At least, all words need to be separated by spaces (then used as keywords), and the "junk" codes removed (for example: binary data, pictures...). I start modifying the interesting function posted by Swen, and here is the my current version that starts to work quite well (with PDF version 1.2). Sorry for having a quite different style of programming. Luc<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Patch for pdf2txt() posted Sven Schuberth<br />
// Add/replace following code (cannot post full program, size limitation)<br />
<br />
// handles the verson 1.2<br />
// New version of handleV2($data), only one line changed<br />
</span><span class="keyword">function </span><span class="default">handleV2</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// grab objects and then grab their contents (chunks)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a_obj </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">,</span><span class="string">"obj"</span><span class="keyword">,</span><span class="string">"endobj"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a_obj </span><span class="keyword">as </span><span class="default">$obj</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_filter </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">,</span><span class="string">"&lt;&lt;"</span><span class="keyword">,</span><span class="string">"&gt;&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a_filter</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_chunks</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="string">"filter"</span><span class="keyword">] = </span><span class="default">$a_filter</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_data </span><span class="keyword">= </span><span class="default">getDataArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">,</span><span class="string">"stream\r\n"</span><span class="keyword">,</span><span class="string">"endstream"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_chunks</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">][</span><span class="string">"data"</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"stream\r\n"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a_data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])-</span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"stream\r\n"</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"endstream"</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// decode the chunks<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$a_chunks </span><span class="keyword">as </span><span class="default">$chunk</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// look at each chunk and decide how to decode it - by looking at the contents of the filter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a_filter </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"filter"</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]!=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// look at the filter to find out which encoding has been used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"filter"</span><span class="keyword">],</span><span class="string">"FlateDecode"</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">=@ </span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$chunk</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)!=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// CHANGED HERE, before: $result_data .= ps2txt($data);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result_data </span><span class="keyword">.= </span><span class="default">PS2Text_New</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//$result_data .= "x";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result_data</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// New function - Extract text from PS codes<br />
</span><span class="keyword">function </span><span class="default">ExtractPSTextElement</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">)<br />
{<br />
</span><span class="default">$CurStartPos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while ((</span><span class="default">$CurStartText </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$CurStartPos</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// New text element found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$CurStartText </span><span class="keyword">- </span><span class="default">$CurStartPos </span><span class="keyword">&gt; </span><span class="default">8</span><span class="keyword">) </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$SpacingSize </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartPos</span><span class="keyword">, </span><span class="default">$CurStartText </span><span class="keyword">- </span><span class="default">$CurStartPos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$SpacingSize </span><span class="keyword">&lt; -</span><span class="default">25</span><span class="keyword">) </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">; else </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CurStartText</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$StartSearchEnd </span><span class="keyword">= </span><span class="default">$CurStartText</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while ((</span><span class="default">$CurStartPos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$StartSearchEnd</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) != </span><span class="string">'\\'</span><span class="keyword">) break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$StartSearchEnd </span><span class="keyword">= </span><span class="default">$CurStartPos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$CurStartPos </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">) break; </span><span class="comment">// something wrong happened<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // Remove ending '-'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'-'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Spacing </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Add to result<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Result </span><span class="keyword">.= </span><span class="default">$Spacing </span><span class="keyword">. </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$SourceString</span><span class="keyword">, </span><span class="default">$CurStartText</span><span class="keyword">, </span><span class="default">$CurStartPos </span><span class="keyword">- </span><span class="default">$CurStartText</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CurStartPos</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="comment">// Add line breaks (otherwise, result is one big line...)<br />
</span><span class="keyword">return </span><span class="default">$Result </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Global table for codes replacement <br />
</span><span class="default">$TCodeReplace </span><span class="keyword">= array (</span><span class="string">'\(' </span><span class="keyword">=&gt; </span><span class="string">'('</span><span class="keyword">, </span><span class="string">'\)' </span><span class="keyword">=&gt; </span><span class="string">')'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// New function, replacing old "pd2txt" function<br />
</span><span class="keyword">function </span><span class="default">PS2Text_New</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">)<br />
{<br />
global </span><span class="default">$TCodeReplace</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Catch up some codes<br />
</span><span class="keyword">if (</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &lt; </span><span class="default">10</span><span class="keyword">) return </span><span class="string">''</span><span class="keyword">; <br />
if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">) == </span><span class="string">'/CIDInit'</span><span class="keyword">) return </span><span class="string">''</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Some text inside (...) can be found outside the [...] sets, then ignored <br />
// =&gt; disable the processing of [...] is the easiest solution<br />
<br />
</span><span class="default">$Result </span><span class="keyword">= </span><span class="default">ExtractPSTextElement</span><span class="keyword">(</span><span class="default">$PS_Data</span><span class="keyword">);<br />
<br />
</span><span class="comment">// echo "Code=$PS_Data\nRES=$Result\n\n";<br />
<br />
// Remove/translate some codes<br />
</span><span class="keyword">return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$Result</span><span class="keyword">, </span><span class="default">$TCodeReplace</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69083""></a>
  <div class="note">
   <strong class="user">brendandonhue at comcast dot net</strong>
   <a href="#69083" class="date">22-Aug-2006 05:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to test whether a file is a PDF without using any external library.
<br />
<span class="default">&lt;?php
<br />
define</span><span class="keyword">(</span><span class="string">'PDF_MAGIC'</span><span class="keyword">, </span><span class="string">"\\x25\\x50\\x44\\x46\\x2D"</span><span class="keyword">);
<br />
function </span><span class="default">is_pdf</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {
<br />
&nbsp; return (</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">PDF_MAGIC</span><span class="keyword">)) === </span><span class="default">PDF_MAGIC</span><span class="keyword">) ? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>It's not checking if the whole file is valid, just if the correct header is present at the beginning of the file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68192""></a>
  <div class="note">
   <strong class="user">MAGnUm at magnumhome dot servehttp.com</strong>
   <a href="#68192" class="date">17-Jul-2006 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
domPDF is also a great PDF creation interface. it basically converts your code to CSS and then builds the PDF from that with the absolute positions, and what not...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60640""></a>
  <div class="note">
   <strong class="user">spingary at yahoo dot com</strong>
   <a href="#60640" class="date">12-Jan-2006 09:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was having trouble with streaming inline PDf's using PHP 5.0.2, Apache 2.0.54.<br />
<br />
This is my code:<br />
<br />
&lt;?<br />
header("Pragma: public");<br />
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");<br />
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");<br />
header("Cache-Control: must-revalidate");<br />
header("Content-type: application/pdf");<br />
header("Content-Length: ".filesize($file));<br />
header("Content-disposition: inline; filename=$file");<br />
header("Accept-Ranges: ".filesize($file)); <br />
readfile($file);<br />
exit();<br />
?&gt;<br />
It would work fine in Mozilla Firefox (1.0.7) but with IE (6.0.2800.1106) it would not bring up the Adobe Reader plugin and instead ask me to save it or open it as a PHP file.<br />
<br />
Oddly enough, I turned off ZLib.compression and it started working.&nbsp; I guess the compression is confusing IE.&nbsp; I tried leaving out the content-length header thinking maybe it was unmatched filesize (uncompressed number vs actual received compressed size), but then without it it screws up Firefox too.&nbsp; <br />
<br />
What I ended up doing was disabling Zlib compression for the PDF output pages using ini_set:<br />
<br />
&lt;?<br />
ini_set('zlib.output_compression','Off'); <br />
?&gt;<br />
<br />
Maybe this will help someone. Will post over in the PDF section as well.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58420""></a>
  <div class="note">
   <strong class="user">ontwerp AT zonnet.nl</strong>
   <a href="#58420" class="date">03-Nov-2005 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was searching for a lowcost/opensource option for combining static html files [as templates] and dynamic output from perl or php routines etc. And the sooner or later I found out that this was the most stable, 'speedest' and customizeable way to produce usable pdf 's with nice formatting :<br />
<br />
1] create html page output [perl-&gt; html output, direct html output from any app or php echo's etc. [sort these html files locally]<br />
<br />
2] parse all html [inluding webimages links, tables font formatting etc] to [E]PS files with the perl app : html2ps [as mentioned beneath] <br />
<a href="http://user.it.uu.se/~jan/html2ps.html [sort all ps files by future pdf page positions]" rel="nofollow" target="_blank">http://user.it.uu.se/~jan/html2ps.html [sort all ps files by future pdf page positions]</a><br />
<br />
3] use the free ps2pdf/ps2pdfwr linux application <br />
<a href="http://www.ps2pdf.com/convert/index.htm [uses gostscript, ghostview libs and so on etc]" rel="nofollow" target="_blank">http://www.ps2pdf.com/convert/index.htm [uses gostscript, ghostview libs and so on etc]</a><br />
Has great formatting options like headers, footers, numbering etc<br />
[sort pdf files]<br />
<br />
4] convert all pdf files to 1 pdf file with : pdftk [pdftoolkit], deliveres optional compressions/encryption, background stamps etc<br />
<br />
One should ask why using different scripts :<br />
- combination perl/php is great : perl is speedier at some issues like conversion to ps files in my experience<br />
- ps to pdf is quickier then direct php to pdf [in my exp.!]<br />
- I have total control over every files whenever i change html files as a template I use only editors or other app. for it [online or offline].<br />
<br />
p.s. I had to make a opensource solution for creating simpel report analyses that's based on things like :<br />
- first page [name / title / #/ date]<br />
- some static info [like introduction, copyrights etc]<br />
- some dynamic info [outputted from php-&gt;dbase queries] combined<br />
with html tags/images etc.<br />
<br />
And this all mixed [so seperated in files for transparancy]. Also the 3 way manner : data-&gt; html, html-&gt;ps, ps-&gt;pdf, is easier and quickier to program or adjust in every step.<br />
<br />
Correct me if i'm wrong [mail me to]<br />
<br />
ing. Valentijn Langendorff<br />
Design &amp; Technologist</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57595""></a>
  <div class="note">
   <strong class="user">ragnar at deulos dot com</strong>
   <a href="#57595" class="date">08-Oct-2005 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After one hole day understanding how pdflib works i got the conclusion that its enough hard to draw just with words to furthermore for drawing a line maybe you will need something like four lines of code, so i did my own functions to do the life easier and the code more understable to modify and draw. I also made a function that will draw a rect with the corners round and the posibility even to fill it ;)<br />
<br />
You can get it from <a href="http://www.deulos.com/pdf_php.php" rel="nofollow" target="_blank">http://www.deulos.com/pdf_php.php</a><br />
<br />
feel free to make suggestions or whatever u like ;o)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56492""></a>
  <div class="note">
   <strong class="user">thodge at ipswich dot qld dot gov dot au</strong>
   <a href="#56492" class="date">05-Sep-2005 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yet another addition to the PDF text extraction code last posted by jorromer. The code only seemed to work for PDF 1.2 (Acrobat 3.x) or below. This pdfExtractText function uses regular expressions to cover cases I have found in PDF 1.3 and 1.4 documents. The code also handles closing brackets in the text stream, which were ignored by the previous version. My regular expression skills are somewhat lacking, so improvements may possible by a more skilled programmer. I'm sure there are still cases that this function will not handle, but I haven't come across any yet...
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">function </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchstart </span><span class="keyword">= </span><span class="string">'stream'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchend </span><span class="keyword">= </span><span class="string">'endstream'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdfText </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchstart</span><span class="keyword">, </span><span class="default">$startpos</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchend</span><span class="keyword">, </span><span class="default">$startpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] == </span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">] == </span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] == </span><span class="default">0x0a</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textsection </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$content</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) - </span><span class="default">1
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$textsection</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pdfText </span><span class="keyword">.= </span><span class="default">pdfExtractText</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchend</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(\s)+/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$pdfText</span><span class="keyword">);
<br />

<br />
}
<br />

<br />
function </span><span class="default">pdfExtractText</span><span class="keyword">(</span><span class="default">$psData</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$psData</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Handle brackets in the text stream that could be mistaken for
<br />
&nbsp;&nbsp;&nbsp; // the end of a text field. I'm sure you can do this as part of the 
<br />
&nbsp;&nbsp;&nbsp; // regular expression, but my skills aren't good enough yet.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$psData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\)'</span><span class="keyword">, </span><span class="string">'##ENDBRACKET##'</span><span class="keyword">, </span><span class="default">$psData</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$psData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\]'</span><span class="keyword">, </span><span class="string">'##ENDSBRACKET##'</span><span class="keyword">, </span><span class="default">$psData</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/(T[wdcm*])[\s]*(\[([^\]]*)\]|\(([^\)]*)\))[\s]*Tj/si'</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$psData</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matches
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="string">''</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Run another match over the contents.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/\(([^)]*)\)/si'</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$subMatches</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$subMatches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$subMatch</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">$subMatch</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="string">''</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] == </span><span class="string">'Tc' </span><span class="keyword">? </span><span class="string">' ' </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">) . </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Translate special characters and put back brackets.
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$trans </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'...'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'...'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\205'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'...'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\221'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\222'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\223'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">147</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\224'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">148</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\226'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'-'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\267'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'?'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\('&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'('</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'\['&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'['</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'##ENDBRACKET##'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">')'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'##ENDSBRACKET##'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">']'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">133</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="string">'-'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">141</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">147</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">142</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">148</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">143</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">),
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">144</span><span class="keyword">)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =&gt; </span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">),
<br />
&nbsp;&nbsp;&nbsp; );
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$trans</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />

<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53628""></a>
  <div class="note">
   <strong class="user">jorromer at uchile dot cl  -- Krash</strong>
   <a href="#53628" class="date">07-Jun-2005 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recently use mattb code below for the extraction of text from PDF files. I modify this code for only extract text fields.<br />
<br />
Hope i can help some one<br />
<br />
Here is the Function<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $text </span><span class="keyword">= </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="string">"file.pdf"</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$text</span><span class="keyword">;<br />
<br />
&nbsp; function </span><span class="default">pdf2string</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$sourcefile</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchstart </span><span class="keyword">= </span><span class="string">'stream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchend </span><span class="keyword">= </span><span class="string">'endstream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdfdocument </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while( </span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchstart</span><span class="keyword">, </span><span class="default">$startpos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchend</span><span class="keyword">, </span><span class="default">$startpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]==</span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">2</span><span class="keyword">]==</span><span class="default">0x0d </span><span class="keyword">&amp;&amp; </span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos2</span><span class="keyword">-=</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if (</span><span class="default">$content</span><span class="keyword">[</span><span class="default">$pos2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]==</span><span class="default">0x0a</span><span class="keyword">) </span><span class="default">$pos2</span><span class="keyword">--;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textsection </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">, </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchstart</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress</span><span class="keyword">(</span><span class="default">$textsection</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">ExtractText2</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$startpos </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$searchend</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$data </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pdfdocument </span><span class="keyword">.= </span><span class="default">$data</span><span class="keyword">;}}<br />
&nbsp;&nbsp; return </span><span class="default">$pdfdocument</span><span class="keyword">;}<br />
<br />
function </span><span class="default">ExtractText2</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">){<br />
&nbsp; </span><span class="default">$sw </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">);<br />
<br />
&nbsp; while (</span><span class="default">$sw</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$ini</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) &amp;&amp; (</span><span class="default">$end</span><span class="keyword">&gt;</span><span class="default">$ini</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$valtext </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">,</span><span class="string">'Tj'</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$valtext </span><span class="keyword">== </span><span class="default">$end </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">,</span><span class="default">$ini</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$ini </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);}<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$len</span><span class="keyword">&lt;=</span><span class="default">$textStart</span><span class="keyword">) </span><span class="default">$sw</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$ini </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) &amp;&amp; (</span><span class="default">$end </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)) </span><span class="default">$sw</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;}<br />
&nbsp; <br />
&nbsp; </span><span class="default">$trans </span><span class="keyword">= array(</span><span class="string">"\\341" </span><span class="keyword">=&gt; </span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"\\351" </span><span class="keyword">=&gt; </span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"\\355" </span><span class="keyword">=&gt; </span><span class="string">"i"</span><span class="keyword">,</span><span class="string">"\\363" </span><span class="keyword">=&gt; </span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"\\223" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">,</span><span class="string">"\\224" </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$text&nbsp; </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$trans</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51623""></a>
  <div class="note">
   <strong class="user">webadmin at secretscreen dot com</strong>
   <a href="#51623" class="date">05-Apr-2005 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found this info about pdflib scope on a Chinese (I think) site and translated it.&nbsp; I was trying to do pdf_setfont and kept getting the wrong scope error.&nbsp; Turns out it has to be in the Page scope.&nbsp; So pdf_setfont will only work when called between pdf_begin_page and pdf_end_page.<br />
<br />
#########################################<br />
When API of the PDFlib is called, the error, Can't - IN 'document' scope occurs <br />
There is a concept of " the scope " in the PDFlib, as for all API of the PDFlib it is called with some scope, the *1 which is decided This error occurs when it is called other than the scope where API is appointed. The chart below in reference, please verify API call position.<br />
<br />
Path: PDF_moveto (), PDF_circle (), PDF_arc (), PDF_arcn (), PDF_rect () in each case PDF_stroke (), PDF_closepath_stroke (), PDF_fill (), PDF_fill_stroke (), PDF_closepath_fill_stroke (), PDF_clip (), PDF_endpath () the between <br />
<br />
Page: PDF_begin_page () with PDF_end_page () in between outside path&nbsp; <br />
<br />
Template: PDF_begin_template () with PDF_end_template () in between outside path&nbsp; <br />
<br />
Pattern: PDF_begin_pattern () with PDF_end_pattern () in between outside path&nbsp; <br />
<br />
Font: PDF_begin_font () with PDF_end_font () in between outside glyph&nbsp; <br />
<br />
Glyph: PDF_begin_glyph () with PDF_end_glyph () in between outside path&nbsp; <br />
<br />
Document: PDF_open_* () with PDF_close () in between outside page tempalte and pattern&nbsp; <br />
<br />
Object: The PDF_new () with the PDF_delete () it belongs to the other no scope in between the place <br />
<br />
Null: Outside object&nbsp; <br />
<br />
Any: All scopes other than&nbsp; <br />
<br />
##########################################<br />
<br />
Hope this helps others as much as it helped me!!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50678""></a>
  <div class="note">
   <strong class="user">chu61 dot tw at gmail dot com</strong>
   <a href="#50678" class="date">07-Mar-2005 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to get how many pages in a PDF? I read PDF spec. V1.6 and find this:<br />
<br />
PDF set&nbsp; a "Page Tree Node" to define the ordering of pages in the document. The tree structure allows PDF applications, using little memory to quickly open a document containing thousands of pages.<br />
<br />
If a PDF have 63 pages, the page tree node will like this...<br />
<br />
2 0 obj<br />
&lt;&lt; /Type /Pages<br />
&nbsp;&nbsp;&nbsp; /Kidsn [ 4 0 R<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10 0 R<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ]<br />
&nbsp;&nbsp; &nbsp; /Count 63&nbsp; &nbsp; &nbsp; &nbsp; &lt;---- YES, got it<br />
&gt;&gt;<br />
endobj<br />
<br />
[P.S]&nbsp;&nbsp; a&nbsp; PDF may not only a pages tree node, The right answer is in "root page tree node", if&nbsp; /Count XX with&nbsp; /Parent XXX node, it not "root page tree node"<br />
<br />
SO, You must find the node with /Count XX and Without /Parent&nbsp; terms, and you'll get total pages of PDF<br />
<br />
%PDF-1.0&nbsp; ~&nbsp; %PDF-1.5 all works<br />
<br />
Alex form Taipei,Taiwan</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43726""></a>
  <div class="note">
   <strong class="user">michi (Alt+Q) marel.at</strong>
   <a href="#43726" class="date">01-Jul-2004 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?PHP<br />
</span><span class="comment">/* A little helpful function to calculate millimeters to points */<br />
</span><span class="keyword">function </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">$intMillimeter</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$intPoints </span><span class="keyword">= (</span><span class="default">$intMillimeter</span><span class="keyword">*</span><span class="default">72</span><span class="keyword">)/</span><span class="default">25.4</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$intPoints </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$intPoints</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$intPoints</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/* For example: Create DIN A4 210x297 mm */<br />
</span><span class="default">pdf_begin_page</span><span class="keyword">( </span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">210</span><span class="keyword">), </span><span class="default">calcToPt</span><span class="keyword">(</span><span class="default">297</span><span class="keyword">)); </span><span class="comment">// 595x842 pt<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43476""></a>
  <div class="note">
   <strong class="user">donatas at spurgius dot com</strong>
   <a href="#43476" class="date">22-Jun-2004 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've been looking for a way to extract plain text from PDF documents (needed to search for text inside 'em). Not being able to find one I wrote the needed functions myself. here you go folks.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">pdf2string </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textArray </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">filesize </span><span class="keyword">(</span><span class="default">$sourceFile</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">fclose </span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchTagStart </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">10</span><span class="keyword">).</span><span class="string">'stream'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchTagStartLenght </span><span class="keyword">= </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$searchTagStart</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (((</span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$searchTagStart</span><span class="keyword">, </span><span class="default">$objStart</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$objEnd </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="string">'endstream'</span><span class="keyword">, </span><span class="default">$objStart</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">))))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">, </span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">$searchTagStartLenght </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$objEnd </span><span class="keyword">- (</span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">$searchTagStartLenght</span><span class="keyword">) - </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= @</span><span class="default">gzuncompress </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$data </span><span class="keyword">!== </span><span class="default">FALSE </span><span class="keyword">&amp;&amp; </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'BT'</span><span class="keyword">) !== </span><span class="default">FALSE </span><span class="keyword">&amp;&amp; </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="string">'ET'</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$textArray </span><span class="keyword">[] = </span><span class="default">ExtractText </span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$objStart </span><span class="keyword">= </span><span class="default">$objStart </span><span class="keyword">&lt; </span><span class="default">$objEnd </span><span class="keyword">? </span><span class="default">$objEnd </span><span class="keyword">: </span><span class="default">$objStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$textArray</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; function </span><span class="default">ExtractText </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; while (((</span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">'('</span><span class="keyword">, </span><span class="default">$textStart</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$textEnd </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="string">')'</span><span class="keyword">, </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)) &amp;&amp; </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) != </span><span class="string">'\\'</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$plainText </span><span class="keyword">.= </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">- </span><span class="default">$textStart </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">substr </span><span class="keyword">(</span><span class="default">$postScriptData</span><span class="keyword">, </span><span class="default">$textEnd </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">']'</span><span class="keyword">) </span><span class="comment">//this adds quite some additional spaces between the words<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$plainText </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$textStart </span><span class="keyword">= </span><span class="default">$textStart </span><span class="keyword">&lt; </span><span class="default">$textEnd </span><span class="keyword">? </span><span class="default">$textEnd </span><span class="keyword">: </span><span class="default">$textStart </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">stripslashes </span><span class="keyword">(</span><span class="default">$plainText</span><span class="keyword">);<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42356""></a>
  <div class="note">
   <strong class="user">uwe at steinmann dot cx</strong>
   <a href="#42356" class="date">13-May-2004 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Those looking for a free replacement of pdflib may consider<br />
pslib at <a href="http://pslib.sourceforge.net which produces PostScript but it can be easily turned into PDF by Acrobat Distiller or ghostscript. The API is very similar and even hypertext functions are supported. There" rel="nofollow" target="_blank">http://pslib.sourceforge.net which produces PostScript but it can be easily turned into PDF by Acrobat Distiller or ghostscript. The API is very similar and even hypertext functions are supported. There</a><br />
is also a php extension for pslib in PECL, called ps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33393""></a>
  <div class="note">
   <strong class="user">bmironov at jonview dot com</strong>
   <a href="#33393" class="date">25-Jun-2003 12:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
RedHat 9 + Apache 2.0 + PHP 4.3.2 + Oracle 9i + PDFlib 5.0.1 (binary distribution)<br />
<br />
It seems to be a working bundle if you do some magic with ./configure:<br />
<br />
RedHat 9:<br />
kernel-2.4.20-18.9<br />
<br />
Apache 2.0.46:<br />
./configure --enable-so --enable-rewrite=shared --enable-status --enable-mpm=prefork<br />
<br />
PHP 4.3.2:<br />
./configure \<br />
--program-prefix= \<br />
--prefix=/usr \<br />
--exec-prefix=/usr \<br />
--bindir=/usr/bin \<br />
--sbindir=/usr/sbin \<br />
--sysconfdir=/etc \<br />
--datadir=/usr/share \<br />
--includedir=/usr/include \<br />
--libdir=/usr/lib \<br />
--libexecdir=/usr/libexec \<br />
--localstatedir=/var \<br />
--sharedstatedir=/usr/com \<br />
--mandir=/usr/share/man \<br />
--infodir=/usr/share/info \<br />
--with-config-file-path=/etc \<br />
--with-config-file-scan-dir=/etc/php.d \<br />
--without-tsrm-pthreads \&nbsp; &nbsp; # !!!!!!!!!!!!!!!!!!!!<br />
--with-zlib \<br />
--with-gd \<br />
--enable-gd-native-ttf \<br />
--with-ttf \<br />
--without-mysql \<br />
--with-apxs2filter=/usr/local/apache2/bin/apxs \<br />
--with-oci8 \<br />
--enable-sigchild \<br />
--enable-inline-optimization<br />
<br />
Oracle9i:<br />
ln -s $ORACLE_HOME/rdbms/public/nzerror.h $ORACLE_HOME/rdbms/demo/nzerror.h<br />
<br />
ln -s $ORACLE_HOME/rdbms/public/nzt.h $ORACLE_HOME/rdbms/demo/nzt.h<br />
<br />
ln -s $ORACLE_HOME/rdbms/public/ociextp.h $ORACLE_HOME/rdbms/demo/ociextp.h<br />
<br />
If you want to use bundled GD-library then:<br />
1) install following packages: libjpeg, libjpeg-devel, libpng, libpng-devel, freetype, freetype-devel, libtiff, libtiff-devel, zlib, zlib-devel<br />
<br />
2) ln -s /usr/lib/libjpeg.so.62 /usr/lib/libjpeg.so<br />
ln -s /usr/lib/libpng.so.62 /usr/lib/libpng.so<br />
<br />
It seems to be a working combination, because it is NOT give you:<br />
1) error message in Apache's error_log:<br />
Module compiled with module API=20020429, debug=0, thread-safety=0<br />
PHP compiled with module API=20020429, debug=0, thread-safety=1<br />
<br />
2) error message in Apache's error_log:<br />
[notice] child pid 12345 exit signal Segmentation fault (11)<br />
<br />
3) MS Internet Explorer can show PDF-output from your PHP-script via Acrobat plug-in and does not crush. No confusing messages about opening "Adobe Acrobat Control for ActiveX".<br />
<br />
Hope it will save you some time.<br />
<br />
Good luck,<br />
Boris</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20245""></a>
  <div class="note">
   <strong class="user">pbierans at lynet dot de</strong>
   <a href="#20245" class="date">27-Mar-2002 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Load extension, open a PDF, add a font, modify PDF in memory and send<br />
it to browser:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// no cache headers:<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Expires: Mon, 26 Jul 1997 05:00:00 GMT"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Last-Modified: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">).</span><span class="string">" GMT"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Cache-Control: no-store, no-cache, must-revalidate"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Cache-Control: post-check=0, pre-check=0"</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Pragma: no-cache"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$ext_name</span><span class="keyword">=</span><span class="string">"libpdf_php.so"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// libpdf_php.so is the PDFLIB for SunOS by "PDFlib GmbH"<br />
&nbsp;&nbsp;&nbsp; // visit <a href="http://www.pdflib.com" rel="nofollow" target="_blank">http://www.pdflib.com</a><br />
<br />
&nbsp; // if the extension is not automatically loaded by Apache<br />
&nbsp; // dl() will try to load it on demand:<br />
&nbsp; </span><span class="keyword">if (!</span><span class="default">extension_loaded</span><span class="keyword">(</span><span class="default">$ext_name</span><span class="keyword">) &amp;&amp; !@</span><span class="default">dl</span><span class="keyword">(</span><span class="default">$ext_name</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &lt;table width="100%" border="0"&gt;&lt;tr&gt;&lt;td align="center"&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;table style="border: solid #f0f0f0 2px;"&gt;&lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;td valign="middle" style="padding: 20px; margin: 0px;"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;p style="font-family: arial; font-size: 12px; "&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;b&gt;Sorry,&lt;/b&gt;&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;nbsp;&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; A PDF can not be generated right now.&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The administrator has been informed and will fix this as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; soon as possible.&lt;br&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Please try again later.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/p&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; mail</span><span class="keyword">(</span><span class="string">'admin@domain.com'</span><span class="keyword">,</span><span class="string">'Error: PDFLib not found'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'Called by script:\n&nbsp; '</span><span class="keyword">.</span><span class="default">$SCRIPT_FILENAME</span><span class="keyword">.</span><span class="string">'?'</span><span class="keyword">.</span><span class="default">$QUERY_STRING</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"From: warnings@domain.com\n"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; exit;<br />
&nbsp; } </span><span class="comment">// verify that extension is usable<br />
<br />
&nbsp; // unique serial number:<br />
&nbsp; </span><span class="default">srand</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">()*</span><span class="default">10000</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$usnr</span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Ymd-His-"</span><span class="keyword">).</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1000</span><span class="keyword">,</span><span class="default">9999</span><span class="keyword">).</span><span class="string">'-'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$pdf_file</span><span class="keyword">=</span><span class="default">$usnr</span><span class="keyword">.</span><span class="string">'result.pdf'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$src_file</span><span class="keyword">=</span><span class="string">'source.pdf'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// create pdf object<br />
&nbsp; </span><span class="default">$pdf </span><span class="keyword">= </span><span class="default">pdf_new</span><span class="keyword">();<br />
&nbsp; </span><span class="default">pdf_open_file</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'serial'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; </span><span class="string">'if-you-have-one'</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// fonts to embed, they are in the folder of this file:<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontAFM'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">'TradeGothic=Tg______.afm'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontOutline'</span><span class="keyword">, </span><span class="string">'TradeGothic=Tg______.pfb'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_set_parameter</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'FontPFM'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">'TradeGothic=Tg______.pfm'</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// load the source file:<br />
&nbsp; </span><span class="default">$src_doc&nbsp;&nbsp; </span><span class="keyword">=</span><span class="default">pdf_open_pdi</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_file</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_page&nbsp; </span><span class="keyword">=</span><span class="default">pdf_open_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_width </span><span class="keyword">=</span><span class="default">pdf_get_pdi_value</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">'width' </span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$src_height</span><span class="keyword">=</span><span class="default">pdf_get_pdi_value</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="string">'height'</span><span class="keyword">,</span><span class="default">$src_doc</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">pdf_begin_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="default">$src_width</span><span class="keyword">, </span><span class="default">$src_height</span><span class="keyword">);<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// place the sourcefile to the background of the actual page:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_place_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_close_pdi_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">,</span><span class="default">$src_page</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// modify the page:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_set_font</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'TradeGothic'</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">, </span><span class="string">'host'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pdf_show_xy</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">, </span><span class="string">'Now: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y-m-d H:i:s"</span><span class="keyword">),</span><span class="default">50</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">pdf_end_page</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
&nbsp; </span><span class="default">pdf_close</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// prepare output:<br />
&nbsp; </span><span class="default">$pdfdata </span><span class="keyword">= </span><span class="default">pdf_get_buffer</span><span class="keyword">(</span><span class="default">$pdf</span><span class="keyword">); </span><span class="comment">// to echo the pdf-data<br />
&nbsp; </span><span class="default">$pdfsize </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pdfdata</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">// IE requires the datasize<br />
<br />
&nbsp; // real datatype headers:<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/pdf'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-disposition: attachment; filename="'</span><span class="keyword">.</span><span class="default">$pdf_file</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-length: '</span><span class="keyword">.</span><span class="default">$pdfsize</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$pdfdata</span><span class="keyword">;<br />
&nbsp; exit; </span><span class="comment">// keep this one so no #13#10 or #32 will be written<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
