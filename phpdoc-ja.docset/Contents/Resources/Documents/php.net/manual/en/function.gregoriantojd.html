<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>グレゴリウス日をユリウス積算日に変換する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.frenchtojd.html">≪ FrenchToJD</a></li>
      <li style="float: right;"><a href="function.jddayofweek.html">JDDayOfWeek ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.calendar.html">カレンダー 関数</a></li>
    <li>グレゴリウス日をユリウス積算日に変換する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.gregoriantojd" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">GregorianToJD</h1> 
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">GregorianToJD</span> &mdash; <span class="dc-title">グレゴリウス日をユリウス積算日に変換する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.gregoriantojd-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>gregoriantojd</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$month</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$day</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$year</code></span>
   )</div>

  <p class="para rdfs-comment">
   有効なグレゴリウス暦の範囲は紀元前 4714 年から紀元 9999 年までです。
  </p>
  <p class="para">
   このソフトウェアは日付けを全て紀元前 4714 年にさかのぼることが
   出来ますが、この様な使い方は特に意味があるわけではありません。
   グレゴリウス暦は 1582 年 10 月 15 日(ユリウス暦では
   1582 年 10 月 5 日)まで制定されていませんでした。
   この暦は、いくつかの国でもっと後まで受け入れられませんでした。
   例えば、イギリスは 1752 年、ロシア(USSR)は 1918 年、ギリシャは 1923 年に
   移行しました。  ほとんどのヨーロッパの国々では、グレゴリウス暦の前は
   ユリウス暦を使用していました。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gregoriantojd-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">month</code></dt>

     <dd>

      <p class="para">
       月を表す、1 (January) から 12 (December) までの数字。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">day</code></dt>

     <dd>

      <p class="para">
       日を表す、1 から 31 までの数字。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">year</code></dt>

     <dd>

      <p class="para">
       年を表す、-4714 から 9999 までの数字。
      </p>
     </dd>

      
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gregoriantojd-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   指定したグレゴリウス日をユリウス積算日になおした結果を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gregoriantojd-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-2338">
    <p><strong>例1 カレンダー関数</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$jd&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">GregorianToJD</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">11</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1970</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$jd</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$gregorian&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">JDToGregorian</span><span style="color: #007700">(</span><span style="color: #0000BB">$jd</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$gregorian</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.gregoriantojd-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.jdtogregorian.html" class="function" rel="rdfs-seeAlso">jdtogregorian()</a> - ユリウス積算日をグレゴリウス日に変換する</span></li> 
    <li class="member"><span class="function"><a href="function.cal-to-jd.html" class="function" rel="rdfs-seeAlso">cal_to_jd()</a> - サポートされるカレンダーからユリウス積算日に変換する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="97821""></a>
  <div class="note">
   <strong class="user">brian at slaapkop dot net</strong>
   <a href="#97821" class="date">10-May-2010 04:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some people might find it useful to use a function that takes in dates formatted by ISO8601 standards (yyyy-mm-dd):<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">function </span><span class="default">daysBetweenDate</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$till</span><span class="keyword">) {<br />
</span><span class="comment">/*<br />
&nbsp;*This function will calculate the difference between two given dates.<br />
&nbsp;*<br />
&nbsp;*Please input time by ISO 8601 standards (yyyy-mm-dd).<br />
&nbsp;*i.e: daysBetweenDate('2009-01-01', '2010-01-01');<br />
&nbsp;*This will return 365.<br />
&nbsp;*<br />
&nbsp;*Author: brian [at] slaapkop [dot] net<br />
&nbsp;*May 5th 2010<br />
*/<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$till </span><span class="keyword">&lt; </span><span class="default">$from</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"The date till is before the date from"</span><span class="keyword">, </span><span class="default">E_USER_NOTICE</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Explode date since gregoriantojd() requires mm, dd, yyyy input;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$from</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$till </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$till</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Calculate date to Julian Day Count with freshly created array $from.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$from</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$from</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Calculate date to Julian Day Count with freshly created array $till.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$till </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$till</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$till</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$till</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Substract the days $till (largest number) from $from (smallest number) to get the amount of days<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= (</span><span class="default">$till </span><span class="keyword">- </span><span class="default">$from</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Return the number of days.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$days</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Isn't it sad how my comments use more lines than the actual code? <br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90138""></a>
  <div class="note">
   <strong class="user">jfg</strong>
   <a href="#90138" class="date">07-Apr-2009 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need the same output as the g_date_get_julian function of the GlibC, here is my php implementation :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Glib g_date_get_julian PHP implementation<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param&nbsp; $str&nbsp; Date string in a format accepted by strtotime<br />
&nbsp;&nbsp; &nbsp; * @author jfg<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">_get_julian</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$d </span><span class="keyword">== </span><span class="default">false </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day_in_year </span><span class="keyword">= (int) </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="string">"z"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">= (int) </span><span class="default">date_format</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="string">"Y"</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">* </span><span class="default">365</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= (</span><span class="default">$year </span><span class="keyword">&gt;&gt;= </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">-= (</span><span class="default">$year </span><span class="keyword">/= </span><span class="default">25</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= </span><span class="default">$year </span><span class="keyword">&gt;&gt; </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$julian_days </span><span class="keyword">+= </span><span class="default">$day_in_year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$julian_days</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67265""></a>
  <div class="note">
   <strong class="user">ryker at ridgex dot net</strong>
   <a href="#67265" class="date">06-Jun-2006 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="comment">/*
<br />
* ComputeDateDifference(...)
<br />
*&nbsp;&nbsp; Description:
<br />
*&nbsp; &nbsp;&nbsp; Calculates the difference between two dates.
<br />
*
<br />
*&nbsp;&nbsp; Parameter:
<br />
*&nbsp; &nbsp;&nbsp; $m0, $d0, $y0&nbsp;&nbsp; =&gt; 1. Moth/Day/Year
<br />
*&nbsp; &nbsp;&nbsp; $m1, $d1, $y1&nbsp;&nbsp; =&gt; 2. Moth/Day/Year
<br />
*
<br />
*&nbsp;&nbsp; Return:
<br />
*&nbsp; &nbsp;&nbsp; Difference between given dates in days.
<br />
*
<br />
*&nbsp;&nbsp; Autor:
<br />
*&nbsp; &nbsp;&nbsp; 06.06.2006 - Christian Meyer &lt;ryker@ridgex.net&gt;
<br />
*/
<br />
</span><span class="keyword">function </span><span class="default">ComputeDateDifference</span><span class="keyword">(</span><span class="default">$m0</span><span class="keyword">,</span><span class="default">$d0</span><span class="keyword">,</span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$m1</span><span class="keyword">,</span><span class="default">$d1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$x0 </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$m0</span><span class="keyword">,</span><span class="default">$d0</span><span class="keyword">,</span><span class="default">$y0</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$m1</span><span class="keyword">,</span><span class="default">$d1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">);&nbsp; 
<br />
&nbsp; 
<br />
&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x0</span><span class="keyword">;
<br />
&nbsp; 
<br />
&nbsp; if (</span><span class="default">$diff </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">*= -</span><span class="default">1</span><span class="keyword">; </span><span class="comment">// abs
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$diff</span><span class="keyword">;&nbsp; &nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51040""></a>
  <div class="note">
   <strong class="user">jettyrat at jettyfishing dot com</strong>
   <a href="#51040" class="date">17-Mar-2005 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can obtain the decimal fraction of the Julian date with the php gregoriantojd() function or the function shown below by applying this code to the returned value.
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; $julianDate </span><span class="keyword">= </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);
<br />

<br />
&nbsp; </span><span class="comment">//correct for half-day offset
<br />
&nbsp; </span><span class="default">$dayfrac </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'G'</span><span class="keyword">) / </span><span class="default">24 </span><span class="keyword">- </span><span class="default">.5</span><span class="keyword">;
<br />
&nbsp; if (</span><span class="default">$dayfrac </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$dayfrac </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="comment">//now set the fraction of a day
<br />
&nbsp; </span><span class="default">$frac </span><span class="keyword">= </span><span class="default">$dayfrac </span><span class="keyword">+ (</span><span class="default">date</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">) + </span><span class="default">date</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">) / </span><span class="default">60</span><span class="keyword">) / </span><span class="default">60 </span><span class="keyword">/ </span><span class="default">24</span><span class="keyword">;
<br />

<br />
&nbsp; </span><span class="default">$julianDate </span><span class="keyword">= </span><span class="default">$julianDate </span><span class="keyword">+ </span><span class="default">$frac</span><span class="keyword">;
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43068""></a>
  <div class="note">
   <strong class="user">httpwebwitch</strong>
   <a href="#43068" class="date">09-Jun-2004 01:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function also ignores decimal fractions in JD dates, and it uses non-standard format for returning the Gregorian date. <br />
<br />
So, if your JD date is 2453056.28673, the Gregorian returned value is 2/20/2004, not "2004-02-20 23:45:36"<br />
<br />
The decimal part is important, since the Julian day begins at noon, for example 2453056.49 is on Friday, 2453056.50 is on Saturday. Discarding the decimal part means that your returned Gregorian Date will be wrong 50% of the time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
