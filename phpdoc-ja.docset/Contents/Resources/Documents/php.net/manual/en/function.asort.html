<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>連想キーと要素との関係を維持しつつ配列をソートする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.arsort.html">≪ arsort</a></li>
      <li style="float: right;"><a href="function.compact.html">compact ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.array.html">配列 関数</a></li>
    <li>連想キーと要素との関係を維持しつつ配列をソートする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.asort" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">asort</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">asort</span> &mdash; <span class="dc-title">連想キーと要素との関係を維持しつつ配列をソートする</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.asort-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>asort</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&$array</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$sort_flags</code><span class="initializer"> = SORT_REGULAR</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   この関数は、
   連想配列において各配列のキーと要素との関係を維持しつつ配列をソートします。
   この関数は、
   主に実際の要素の並び方が重要である連想配列をソートするために使われます。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.asort-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       入力の配列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">sort_flags</code></dt>

     <dd>

      <p class="para">
       オプションのパラメータ <code class="parameter">sort_flags</code>
       によりソートの動作を修正可能です。
       詳細については、<span class="function"><a href="function.sort.html" class="function">sort()</a></span> を参照ください。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.asort-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.asort-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5115">
    <p><strong>例1 <span class="function"><strong>asort()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"d"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"lemon"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"orange"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"banana"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">asort</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">);<br />foreach&nbsp;(</span><span style="color: #0000BB">$fruits&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">&nbsp;=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
c = apple
b = banana
d = lemon
a = orange
</pre></div>
    </div>
    <div class="example-contents"><p>
     fruits はアルファベットの昇順にソートされ、
     各要素とキーとの関係は維持されます。
    </p></div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.asort-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.arsort.html" class="function" rel="rdfs-seeAlso">arsort()</a> - 連想キーと要素との関係を維持しつつ配列を逆順にソートする</span></li>
    <li class="member"><a href="array.sorting.html" class="link">配列ソート関数の比較</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111537""></a>
  <div class="note">
   <strong class="user">stephen [ at ] brooksie-net [ dot ] co [ dot ] uk</strong>
   <a href="#111537" class="date">02-Mar-2013 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is obviously necessary to log the keys used as so we don't overwrite previous entries in the array ;o)
<br />

<br />
N.B. this also effects the timings, but still faster than the alternatives : 
<br />

<br />
&nbsp;&nbsp; &nbsp; * int : 0.00159&nbsp; &nbsp; (ms)
<br />
&nbsp;&nbsp; &nbsp; * str : 0.00092&nbsp; &nbsp; (ms)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">private function </span><span class="default">_keySort</span><span class="keyword">(Array </span><span class="default">$data</span><span class="keyword">) 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keyIncrement </span><span class="keyword">= 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (!isset(</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_orderField</span><span class="keyword">]])) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ? </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_orderField</span><span class="keyword">]] = </span><span class="default">0
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">: ++</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_orderField</span><span class="keyword">]];
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tempArray</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_orderField</span><span class="keyword">].</span><span class="default">$keyIncrement</span><span class="keyword">] = </span><span class="default">$row</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_orderDirection </span><span class="keyword">== </span><span class="string">'DESC'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$tempArray</span><span class="keyword">, </span><span class="default">SORT_NATURAL </span><span class="keyword">| </span><span class="default">SORT_FLAG_CASE </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$tempArray</span><span class="keyword">, </span><span class="default">SORT_NATURAL </span><span class="keyword">| </span><span class="default">SORT_FLAG_CASE</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$tempArray</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105797""></a>
  <div class="note">
   <strong class="user">nick ([AT]) nickyost ([DOT]) com</strong>
   <a href="#105797" class="date">16-Sep-2011 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can be used to sort multidimensional arrays with almost no work whatsoever by using the individual values within the custom sort function.<br />
<br />
This function passes the entire child element even if it is not a string. If it is an array, as would be the case in multidimensional arrays, it will pass the whole child array as one parameter.<br />
<br />
Therefore, do something elegant like this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// Sort the multidimensional array<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">, </span><span class="string">"custom_sort"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">// Define the custom sort function<br />
&nbsp;&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">custom_sort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'some_sub_var'</span><span class="keyword">]&gt;</span><span class="default">$b</span><span class="keyword">[</span><span class="string">'some_sub_var'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This does in 4 lines what other functions took 40 to 50 lines to do. This does not require you to create temporary arrays or anything. This is, for me, a highly preferred solution.<br />
<br />
Hope it helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103858""></a>
  <div class="note">
   <strong class="user">Anon</strong>
   <a href="#103858" class="date">07-May-2011 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Case insensitive sort in one line:<br />
<br />
<span class="default">&lt;?php<br />
<br />
array_multisort</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103703""></a>
  <div class="note">
   <strong class="user">rick at toewsweb dot net</strong>
   <a href="#103703" class="date">29-Apr-2011 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On sorting by value first, then by key (cf., 2008-01-31 notes by mike at clear-link dot com):<br />
<br />
What occurred to me to solve this problem was to extract the keys and values into separate arrays, then use array_multisort to get the desired order:<br />
<br />
Ex:<br />
<span class="default">&lt;?php<br />
$kvpairs </span><span class="keyword">= array(</span><span class="string">'noun' </span><span class="keyword">=&gt; </span><span class="string">'thought'</span><span class="keyword">, </span><span class="string">'animal' </span><span class="keyword">=&gt; </span><span class="string">'fish'</span><span class="keyword">, </span><span class="string">'abstract' </span><span class="keyword">=&gt; </span><span class="string">'thought'</span><span class="keyword">, </span><span class="string">'food' </span><span class="keyword">=&gt; </span><span class="string">'fish'</span><span class="keyword">, </span><span class="string">'verb' </span><span class="keyword">=&gt; </span><span class="string">'fish'</span><span class="keyword">);<br />
print </span><span class="string">"before:\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$kvpairs</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Essentially, one line of code is all that's needed for the sort:<br />
</span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$kvpairs</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$kvpairs</span><span class="keyword">), </span><span class="default">$kvpairs</span><span class="keyword">);<br />
<br />
print </span><span class="string">"after:\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$kvpairs</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
before:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [noun] =&gt; thought<br />
&nbsp;&nbsp;&nbsp; [animal] =&gt; fish<br />
&nbsp;&nbsp;&nbsp; [abstract] =&gt; thought<br />
&nbsp;&nbsp;&nbsp; [food] =&gt; fish<br />
&nbsp;&nbsp;&nbsp; [verb] =&gt; fish<br />
)<br />
after:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [animal] =&gt; fish<br />
&nbsp;&nbsp;&nbsp; [food] =&gt; fish<br />
&nbsp;&nbsp;&nbsp; [verb] =&gt; fish<br />
&nbsp;&nbsp;&nbsp; [abstract] =&gt; thought<br />
&nbsp;&nbsp;&nbsp; [noun] =&gt; thought<br />
)<br />
<br />
Of course, array_multisort allows you to specify sort order (SORT_ASC, SORT_DESC) and sort type (SORT_REGULAR, SORT_STRING, SORT_NUMERIC) for each array you pass it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90425""></a>
  <div class="note">
   <strong class="user">Eran</strong>
   <a href="#90425" class="date">22-Apr-2009 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i made this sample multi dimensional array sort to someone who needed to read lines from a text file instead of using sql - order by statement.<br />
<br />
the idea is to take the key and sort(order) the specific column and then order the entire of the array as the selected column asort returned.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* <br />
&nbsp;* This sample is reading text data<br />
&nbsp;* and perform a sort to a 2 dimensional array<br />
&nbsp;* just like a normal sql do to "order by asc" <br />
&nbsp;* <br />
&nbsp;*/<br />
<br />
</span><span class="default">$foo </span><span class="keyword">= array();<br />
<br />
</span><span class="comment">/*<br />
# SORT_REGULAR - compare items normally (don't change types)<br />
# SORT_NUMERIC - compare items numerically<br />
# SORT_STRING - compare items as strings<br />
*/<br />
</span><span class="default">$sort_by </span><span class="keyword">= </span><span class="default">SORT_REGULAR</span><span class="keyword">;<br />
<br />
</span><span class="comment">/*<br />
# 0 - order by name column<br />
# 1 - order by age column<br />
# 2 - order by rank column<br />
# 3 - order by color column<br />
*/<br />
</span><span class="default">$order_by </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="comment">// source file<br />
</span><span class="default">$line_of_text</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'a1name|f2age|h3rank|jcolor'</span><span class="keyword">;<br />
</span><span class="default">$line_of_text</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'b1name|d2age|i3rank|k4color'</span><span class="keyword">;<br />
</span><span class="default">$line_of_text</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">'c1name|e2age|g3rank|l4color'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// make array<br />
</span><span class="keyword">for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">&lt;=</span><span class="default">2</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">,</span><span class="default">$line_of_text</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// save it by coulmns otherwise it will saved like rows<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">3</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$foo</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">$line</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// get the key order<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$foo</span><span class="keyword">[</span><span class="default">$order_by</span><span class="keyword">];<br />
<br />
</span><span class="comment">// sort<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$sort_by</span><span class="keyword">);<br />
<br />
</span><span class="comment">// start print<br />
</span><span class="keyword">echo </span><span class="string">"&lt;table cellpudding=0 cellspacing=0 border=1&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;tr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;key&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;name&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;age&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;rank&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;color&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;/tr&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// print by key order<br />
</span><span class="keyword">foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;tr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;</span><span class="default">$k</span><span class="string">&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// you can print here a for loop (0 to num of columns[=3])<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;td&gt;"</span><span class="keyword">.</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">].</span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;"</span><span class="keyword">.</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">].</span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;"</span><span class="keyword">.</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">].</span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;"</span><span class="keyword">.</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">].</span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/tr&gt;\n"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"&lt;/table&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81155""></a>
  <div class="note">
   <strong class="user">bakatamas at freemail dot hu</strong>
   <a href="#81155" class="date">15-Feb-2008 11:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dear mike at clear-link dot com!<br />
<br />
I needed a case insensitive version of your function. It is still not perfect as I have to do something with country specific characters (ouo?uea?iOUO?UEA?I)<br />
<br />
function akisort(&amp;$array,$valrev=false,$keyrev=false)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if ($valrev)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; arsort($array);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; asort($array);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp;&nbsp; $vals = array_count_values($array);<br />
&nbsp;&nbsp;&nbsp; $i = 0;<br />
&nbsp;&nbsp;&nbsp; foreach ($vals AS $val=&gt;$num)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $first = array_splice($array,0,$i);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $tmp = array_splice($array,0,$num);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $tmp2 = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($tmp as $key =&gt; $value)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tmp2[] = $key;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $number = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; natcasesort($tmp2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; reset($tmp2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print_r($tmp2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset($tmp);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($tmp2 as $key =&gt; $value)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tmp[$value] = $number;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($keyrev)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tmp = array_reverse($tmp, true);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $array = array_merge($first,$tmp,$array);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset($tmp);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $i = $i+$num;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
};</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80802""></a>
  <div class="note">
   <strong class="user">mike at clear-link dot com</strong>
   <a href="#80802" class="date">01-Feb-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Small typo in the aksort function I just submitted. Here's the entire thing again, with the correction noted:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">aksort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$valrev</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$keyrev</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$valrev</span><span class="keyword">) { </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); } else { </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); }<br />
&nbsp; </span><span class="default">$vals </span><span class="keyword">= </span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$vals </span><span class="keyword">AS </span><span class="default">$val</span><span class="keyword">=&gt;</span><span class="default">$num</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$keyrev</span><span class="keyword">) { </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">); } else { </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">); }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">,</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">$num</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Fixed from previous post: $i = $num;<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80798""></a>
  <div class="note">
   <strong class="user">mike at clear-link dot com</strong>
   <a href="#80798" class="date">01-Feb-2008 12:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For a recent project I needed to sort an associative array by value first, and then by key if a particular value appeared multiple times. I wrote this function to accomplish the task. Note that the parameters default to sort ascending on both keys and values, but allow granular control over each.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">aksort</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$valrev</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$keyrev</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$valrev</span><span class="keyword">) { </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); } else { </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vals </span><span class="keyword">= </span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$vals </span><span class="keyword">AS </span><span class="default">$val</span><span class="keyword">=&gt;</span><span class="default">$num</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$keyrev</span><span class="keyword">) { </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">); } else { </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">); }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$first</span><span class="keyword">,</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$tmp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$num</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Example<br />
</span><span class="default">$tmp </span><span class="keyword">= array(</span><span class="string">'ca'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'cb'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'ce'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">'pa'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">'pe'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Standard asort<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Sort value ASC, key ASC<br />
</span><span class="default">aksort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Sort value DESC, key ASC<br />
</span><span class="default">aksort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Sort value DESC, key DESC<br />
</span><span class="default">aksort</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Results<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">pe</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ca</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ce</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">cb</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pa</span><span class="keyword">] =&gt; </span><span class="default">2<br />
</span><span class="keyword">)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">ca</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ce</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pe</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">cb</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pa</span><span class="keyword">] =&gt; </span><span class="default">2<br />
</span><span class="keyword">)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">cb</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pa</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ca</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ce</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pe</span><span class="keyword">] =&gt; </span><span class="default">1<br />
</span><span class="keyword">)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">pa</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">cb</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">pe</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ce</span><span class="keyword">] =&gt; </span><span class="default">1<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">ca</span><span class="keyword">] =&gt; </span><span class="default">1<br />
</span><span class="keyword">)</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80450""></a>
  <div class="note">
   <strong class="user">mzvarik at gmail dot com</strong>
   <a href="#80450" class="date">16-Jan-2008 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed that my function mentioned earlier is very misleading - somebody please delete that note!<br />
<br />
This is how you sort:<br />
<span class="default">&lt;?php<br />
setlocale </span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'czech'</span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"?"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">);<br />
</span><span class="default">usort </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'strcoll'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78925""></a>
  <div class="note">
   <strong class="user">przemekkus [at] interia [dot] pl</strong>
   <a href="#78925" class="date">02-Nov-2007 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function written by a dot brandon at chello dot nl has an error&nbsp; - wrong variable name. It should be:<br />
<br />
if($rev) arsort($named_hash,$flags=0) ;<br />
<br />
instead of<br />
<br />
if($reverse) arsort($named_hash,$flags=0) ;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75991""></a>
  <div class="note">
   <strong class="user">a dot brandon at chello dot nl</strong>
   <a href="#75991" class="date">26-Jun-2007 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this for quasi-SQL orderby. Loosely based on smileaf. Any good for you nerds?<br />
<br />
&lt;?<br />
<br />
function named_records_sort($named_recs, $order_by, $rev=false, $flags=0)<br />
{// Create 1-dimensional named array with just <br />
&nbsp;// sortfield (in stead of record) values<br />
&nbsp;&nbsp;&nbsp; $named_hash = array(); <br />
&nbsp;&nbsp; &nbsp; foreach($named_recs as $key=&gt;$fields) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $named_hash["$key"] = $fields[$order_by];<br />
&nbsp;<br />
&nbsp;// Order 1-dimensional array, <br />
&nbsp;// maintaining key-value relations&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if($reverse) arsort($named_hash,$flags=0) ;<br />
&nbsp;&nbsp;&nbsp; else asort($named_hash, $flags=0);<br />
&nbsp; <br />
&nbsp;// Create copy of named records array <br />
&nbsp;// in order of sortarray&nbsp; <br />
&nbsp;&nbsp;&nbsp; $sorted_records = array(); <br />
&nbsp;&nbsp;&nbsp; foreach($named_hash as $key=&gt;$val) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $sorted_records["$key"]= $named_recs[$key];<br />
&nbsp; <br />
return $sorted_records;} // named_recs_sort()<br />
<br />
function show_sorted_records($named_recs, $order_by, $rev=false, $flags=0)<br />
{$sorted_records=named_records_sort($named_recs, $order_by, $rev, $flags);<br />
foreach($sorted_records as $name=&gt;$fields) <br />
&nbsp; {echo "&lt;b&gt;$name&lt;/b&gt;&nbsp;&nbsp; "; <br />
&nbsp;&nbsp; foreach($fields as $field=&gt;$val) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "$field = $val "; echo "&lt;br&gt;";}<br />
} // show_sorted_records()<br />
<br />
$girl_friends=array();<br />
$girl_friends["Anna"]=<br />
array("born"=&gt;'1989-08-22',"cupsize"=&gt;'B-',"IQ"=&gt;105, "daddy"=&gt;'rich');<br />
$girl_friends["Zoe"]<br />
=array("born"=&gt;'1978-03-11',"cupsize"=&gt;'C#',"IQ"=&gt;130, "daddy"=&gt;'poor');<br />
$girl_friends["Lilly"]<br />
=array("born"=&gt;'1985-06-16',"cupsize"=&gt;'DD',"IQ"=&gt;90, "daddy"=&gt;'nasty');<br />
<br />
$order_by="cupsize"; echo "And the winners are: &lt;br&gt;";<br />
show_sorted_records($girl_friends, $order_by, true);<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75749""></a>
  <div class="note">
   <strong class="user">gunnar at taljaren dot se</strong>
   <a href="#75749" class="date">14-Jun-2007 10:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for ($i=0;$i&lt;5;$i++)<br />
&nbsp;&nbsp; $values[] = $i;<br />
asort($values);&nbsp; <br />
<br />
works, but<br />
for ($i=0;$i&lt;5;$i++)<br />
&nbsp;&nbsp; $values[$i] =$i;<br />
asort($values);<br />
doesn't!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72582""></a>
  <div class="note">
   <strong class="user">smileaf at smileaf dot org</strong>
   <a href="#72582" class="date">25-Jan-2007 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ok I was mistaken, after re-reading the previous post the ".$key" is important. What caused the sorting issue for me wasn't that at all. But rather something else.<br />
doing an: asort($records, $flags); before returning fixes the sorting problems.<br />
The sorting problem I was refearing to causes a character based sorting done on numeric data.<br />
so instead of:<br />
1<br />
2<br />
3<br />
...<br />
10<br />
12<br />
20<br />
It was returned back as<br />
1<br />
10<br />
12<br />
2<br />
20<br />
3<br />
...<br />
basically what I was trying to fix in the first place.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71344""></a>
  <div class="note">
   <strong class="user">richard at happymango dot me dot uk</strong>
   <a href="#71344" class="date">23-Nov-2006 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a fixed version of the same function I posted below. Now it will handle duplicate entries in the sorted field. EG: If there were two records that had the name Heathrow it would still work. <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">record_sort</span><span class="keyword">(</span><span class="default">$records</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hash </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$records </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$record</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hash</span><span class="keyword">[</span><span class="default">$record</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">].</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$record</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; (</span><span class="default">$reverse</span><span class="keyword">)? </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">) : </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$records </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$hash </span><span class="keyword">as </span><span class="default">$record</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$records </span><span class="keyword">[]= </span><span class="default">$record</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$records</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71318""></a>
  <div class="note">
   <strong class="user">richard at happymango dot me dot uk</strong>
   <a href="#71318" class="date">22-Nov-2006 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a function to sort an indexed 2D array by a specified sub array key, either ascending or descending.<br />
<br />
It is usefull for sorting query results from a database by a particular field after the query has been returned<br />
<br />
This function can be quite greedy. It recreates the array as a hash to use ksort() then back again<br />
<br />
By default it will sort ascending but if you specify $reverse as true it will return the records sorted descending <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">record_sort</span><span class="keyword">(</span><span class="default">$records</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">, </span><span class="default">$reverse</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$hash </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$records </span><span class="keyword">as </span><span class="default">$record</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hash</span><span class="keyword">[</span><span class="default">$record</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">]] = </span><span class="default">$record</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; (</span><span class="default">$reverse</span><span class="keyword">)? </span><span class="default">krsort</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">) : </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$records </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$hash </span><span class="keyword">as </span><span class="default">$record</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$records </span><span class="keyword">[]= </span><span class="default">$record</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$records</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Example below<br />
<br />
</span><span class="default">$airports </span><span class="keyword">= array<br />
(<br />
&nbsp;&nbsp;&nbsp; array( </span><span class="string">"code" </span><span class="keyword">=&gt; </span><span class="string">"LHR"</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Heathrow" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; array( </span><span class="string">"code" </span><span class="keyword">=&gt; </span><span class="string">"LGW"</span><span class="keyword">, </span><span class="string">"name" </span><span class="keyword">=&gt; </span><span class="string">"Gatwick" </span><span class="keyword">),<br />
);<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Before: &lt;pre&gt;%s&lt;/pre&gt;"</span><span class="keyword">, </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$airports</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
<br />
</span><span class="default">$airports </span><span class="keyword">= </span><span class="default">record_sort</span><span class="keyword">(</span><span class="default">$airports</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">);<br />
<br />
</span><span class="default">printf</span><span class="keyword">(</span><span class="string">"After: &lt;pre&gt;%s&lt;/pre&gt;"</span><span class="keyword">, </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$airports</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example Outputs:<br />
<br />
Before: Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array ( [code] =&gt; LHR, [name] =&gt; Heathrow )<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array ( [code] =&gt; LGW, [name] =&gt; Gatwick )<br />
)<br />
<br />
After: Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array ( [code] =&gt; LGW, [name] =&gt; Gatwick )<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array ( [code] =&gt; LHR, [name] =&gt; Heathrow )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69425""></a>
  <div class="note">
   <strong class="user">php at web-in-time dot com</strong>
   <a href="#69425" class="date">05-Sep-2006 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
acecream's function works fine, especially with the spectre extension.<br />
<br />
nevertheless sometimes the index values have to be kept. To achieve this, just replace:<br />
<br />
$sorted_arr[] = $array[$arr_key];&nbsp; <br />
<br />
with:<br />
<br />
$sorted_arr[$arr_key] = $array[$arr_key];</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43513""></a>
  <div class="note">
   <strong class="user">rojaro</strong>
   <a href="#43513" class="date">24-Jun-2004 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Advanced sort array by second index function, which produces ascending (default) or descending output and uses optionally natural case insensitive sorting (which can be optionally case sensitive as well).<br />
Only the first two arguments are required.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sabsi </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">, </span><span class="default">$order</span><span class="keyword">=</span><span class="string">'asc'</span><span class="keyword">, </span><span class="default">$natsort</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$case_sensitive</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">$natsort</span><span class="keyword">) (</span><span class="default">$order</span><span class="keyword">==</span><span class="string">'asc'</span><span class="keyword">)? </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">) : </span><span class="default">arsort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; (</span><span class="default">$case_sensitive</span><span class="keyword">)? </span><span class="default">natsort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">) : </span><span class="default">natcasesort</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$order</span><span class="keyword">!=</span><span class="string">'asc'</span><span class="keyword">) </span><span class="default">$temp</span><span class="keyword">=</span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">))? </span><span class="default">$sorted</span><span class="keyword">[]=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] : </span><span class="default">$sorted</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sorted</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31628""></a>
  <div class="note">
   <strong class="user">spectre at hellfish dot NOSPAM dot org</strong>
   <a href="#31628" class="date">28-Apr-2003 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
that works nicely, tho it breaks the result-array up if one or more of arrays indexes are deleted before sorting. this one should fix it up:<br />
<br />
change:<br />
for ($i = 0; $i &lt; sizeof($array); $i++) {<br />
<br />
to:<br />
foreach ($array as $i =&gt; $k) {</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27372""></a>
  <div class="note">
   <strong class="user">mbevan at marginsoftware dot com</strong>
   <a href="#27372" class="date">03-Dec-2002 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Nevermind... use my last note as a quick tip: if you wish to keep the keys, use asort() and arsort() in place of sort() and rsort().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23920""></a>
  <div class="note">
   
   <a href="#23920" class="date">01-Aug-2002 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry, my last post had a typo:
<br />
// unnecessary backslashes break create_function, oops.
<br />
&nbsp; if ( is_string($var) ) $var = "\'$var\'";
<br />
//it should be:
<br />
&nbsp; if ( is_string($var) ) $var = "'$var'";
<br />

<br />
-- FIXED and TESTED -- :)
<br />

<br />
Similar to above but for an array of arrays instead of an array of objects.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">aasort</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">,</span><span class="default">$cmp</span><span class="keyword">=</span><span class="string">'strcasecmp'</span><span class="keyword">){
<br />
&nbsp; if ( </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) ) </span><span class="default">$var </span><span class="keyword">= </span><span class="string">"'</span><span class="default">$var</span><span class="string">'"</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'return '</span><span class="keyword">.</span><span class="default">$cmp</span><span class="keyword">.</span><span class="string">'( $a['</span><span class="keyword">.</span><span class="default">$var</span><span class="keyword">.</span><span class="string">'],$b['</span><span class="keyword">.</span><span class="default">$var</span><span class="keyword">.</span><span class="string">']);'</span><span class="keyword">)
<br />
&nbsp; );
<br />
&nbsp; return </span><span class="default">$x</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23919""></a>
  <div class="note">
   <strong class="user">phzzzt .a.t. acm .d.o.t. org</strong>
   <a href="#23919" class="date">01-Aug-2002 03:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Similar to above but for an array of arrays instead of an array of objects.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">aasort</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$var</span><span class="keyword">,</span><span class="default">$cmp</span><span class="keyword">=</span><span class="string">'strcasecmp'</span><span class="keyword">){
<br />
&nbsp; if ( </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) ) </span><span class="default">$var </span><span class="keyword">= </span><span class="string">"\'</span><span class="default">$var</span><span class="string">\'"</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">uasort</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$a,$b'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="string">'return '</span><span class="keyword">.</span><span class="default">$cmp</span><span class="keyword">.</span><span class="string">'( $a['</span><span class="keyword">.</span><span class="default">$var</span><span class="keyword">.</span><span class="string">'],$b['</span><span class="keyword">.</span><span class="default">$var</span><span class="keyword">.</span><span class="string">']);'</span><span class="keyword">)
<br />
&nbsp; );
<br />
&nbsp; return </span><span class="default">$x</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20433""></a>
  <div class="note">
   <strong class="user">salchicha at cable dot net dot co</strong>
   <a href="#20433" class="date">03-Apr-2002 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's one I whipped up to allow you to sort an array of a specific class by a member or function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// Sort a class by one of its members (even lowercase!!!)
<br />
</span><span class="keyword">function </span><span class="default">casort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">) {
<br />
&nbsp;&nbsp; </span><span class="default">$tarr </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; </span><span class="default">$rarr </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tarr</span><span class="keyword">[] = </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">-&gt;{</span><span class="default">$var</span><span class="keyword">});
<br />
&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$tarr</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$tarr</span><span class="keyword">);
<br />
&nbsp;&nbsp; </span><span class="default">$karr </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$tarr</span><span class="keyword">);
<br />
&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$tarr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$rarr</span><span class="keyword">[] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$karr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])];
<br />
&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; return </span><span class="default">$rarr</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
It works very well. For example, I have a Room class with members title, isActive(), date, etc. I can sort an array by casort($rooms, "title") or casort($rooms, "isActive()") and it'll work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19545""></a>
  <div class="note">
   <strong class="user">rcwang at cmu dot edu</strong>
   <a href="#19545" class="date">03-Mar-2002 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's my version of sorting multi-dimensional array by 2nd index.
<br />
Feel free to change the code to suit your needs.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">aSortBySecondIndex</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, </span><span class="default">$secondIndex</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; while (list(</span><span class="default">$firstIndex</span><span class="keyword">, ) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$indexMap</span><span class="keyword">[</span><span class="default">$firstIndex</span><span class="keyword">] = </span><span class="default">$multiArray</span><span class="keyword">[</span><span class="default">$firstIndex</span><span class="keyword">][</span><span class="default">$secondIndex</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$indexMap</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; while (list(</span><span class="default">$firstIndex</span><span class="keyword">, ) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$indexMap</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$firstIndex</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortedArray</span><span class="keyword">[] = </span><span class="default">$multiArray</span><span class="keyword">[</span><span class="default">$firstIndex</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$sortedArray</span><span class="keyword">[</span><span class="default">$firstIndex</span><span class="keyword">] = </span><span class="default">$multiArray</span><span class="keyword">[</span><span class="default">$firstIndex</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sortedArray</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="12757""></a>
  <div class="note">
   <strong class="user">freeman at generalresources dot com</strong>
   <a href="#12757" class="date">04-May-2001 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The asortbyindex($sortarray, $index) looks like sort not asort. The key of the $sortarray was changed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7787""></a>
  <div class="note">
   <strong class="user">sweetland at whoadammit dot com</strong>
   <a href="#7787" class="date">15-Aug-2000 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a little routine I whipped up to sort multi-dimensional arrays:
<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;** comesafter ($s1, $s2)
<br />
&nbsp;**
<br />
&nbsp;** Returns 1 if $s1 comes after $s2 alphabetically, 0 if not.
<br />
&nbsp;**/
<br />

<br />
</span><span class="keyword">function </span><span class="default">comesafter </span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ** We don't want to overstep the bounds of one of the strings and segfault,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ** so let's see which one is shorter.
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; **/
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) &gt; </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$s1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">$s2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$temp</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$order </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$index </span><span class="keyword">&lt; </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">); </span><span class="default">$index</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ** $s1 comes after $s2
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; **/
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$s1</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] &gt; </span><span class="default">$s2</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]) return (</span><span class="default">$order</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ** $s1 comes before $s2
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; **/
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$s1</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] &lt; </span><span class="default">$s2</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]) return (</span><span class="default">1 </span><span class="keyword">- </span><span class="default">$order</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ** Special case in which $s1 is a substring of $s2
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; **/
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return (</span><span class="default">$order</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="comment">/**
<br />
&nbsp;** asortbyindex ($sortarray, $index)
<br />
&nbsp;**
<br />
&nbsp;** Sort a multi-dimensional array by a second-degree index. For instance, the 0th index
<br />
&nbsp;** of the Ith member of both the group and user arrays is a string identifier. In the
<br />
&nbsp;** case of a user array this is the username; with the group array it is the group name.
<br />
&nbsp;** asortby
<br />
&nbsp;**/
<br />

<br />
</span><span class="keyword">function </span><span class="default">asortbyindex </span><span class="keyword">(</span><span class="default">$sortarray</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastindex </span><span class="keyword">= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$sortarray</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$subindex </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$subindex </span><span class="keyword">&lt; </span><span class="default">$lastindex</span><span class="keyword">; </span><span class="default">$subindex</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lastiteration </span><span class="keyword">= </span><span class="default">$lastindex </span><span class="keyword">- </span><span class="default">$subindex</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$iteration </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$iteration </span><span class="keyword">&lt; </span><span class="default">$lastiteration</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$iteration</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nextchar </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">comesafter </span><span class="keyword">(</span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">], </span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">][</span><span class="default">$index</span><span class="keyword">])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration</span><span class="keyword">] = </span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sortarray</span><span class="keyword">[</span><span class="default">$iteration </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] = </span><span class="default">$temp</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">$sortarray</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
It's a bit long with all the comments, but I hope it helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7386""></a>
  <div class="note">
   <strong class="user">bwuhlman at tallships dot ca</strong>
   <a href="#7386" class="date">03-Aug-2000 12:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, actually, asort has *two* annoying features.
<br />

<br />
It works perfectly well sorting hashes (or associative arrays, as you might have it), but doggedly refuses to sort regular arrays maintaining index assocation. Kind've makes sense, but the docs don't explicitly say you can't do it.
<br />

<br />
Urgggh.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="3984""></a>
  <div class="note">
   <strong class="user">jacko at kring dot co dot uk</strong>
   <a href="#3984" class="date">25-Feb-2000 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
asort has one anoying feature, it ignores any default or implicit order in the data.&nbsp; i.e. if two elements of an array contain "banana" then it is not garanteed that the first will still be the first after the sort.
<br />
This makes the Burrows-Wheeler block sort a bit of a pain to impliment, with a trailing string having to be appended to all strings before sorting, and removed after sorting. To maintain the so called "banana" order.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
