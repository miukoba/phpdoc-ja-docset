<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定したマスク内に含まれる文字からなる文字列の最初のセグメントの長さを探す</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strrpos.html">≪ strrpos</a></li>
      <li style="float: right;"><a href="function.strstr.html">strstr ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">String 関数</a></li>
    <li>指定したマスク内に含まれる文字からなる文字列の最初のセグメントの長さを探す</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strspn" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strspn</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strspn</span> &mdash; <span class="dc-title">
   指定したマスク内に含まれる文字からなる文字列の最初のセグメントの長さを探す
  </span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strspn-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>strspn</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$subject</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$mask</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <code class="parameter">subject</code> の中で、
   <code class="parameter">mask</code> 内の文字<em class="emphasis">だけ</em>を含む最初の部分の長さを返します。
  </p>
  <p class="para">
   <code class="parameter">start</code> と <code class="parameter">length</code>
   を省略した場合は、<code class="parameter">subject</code> 全体を調べます。
   指定した場合は、<em>strspn(substr($subject, $start, $length),
   $mask)</em> (詳細は <a href="function.substr.html" class="xref">substr</a>
   を参照ください) をコールするのと同じ働きをします。
  </p>
  <p class="para">
   たとえば、
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strspn</span><span style="color: #007700">(</span><span style="color: #DD0000">"42&nbsp;is&nbsp;the&nbsp;answer&nbsp;to&nbsp;the&nbsp;128th&nbsp;question."</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"1234567890"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   このコードは、<var class="varname"><var class="varname">$var</var></var> に <em>2</em> を代入します。これは、
   <code class="parameter">subject</code> の中で &quot;1234567890&quot; 内の文字だけで構成される
   最初の部分が &quot;42&quot; であるためです。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strspn-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       調べたい文字列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mask</code></dt>

     <dd>

      <p class="para">
       許可する文字の一覧。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">start</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">subject</code> の中で調べ始める位置。
      </p>
      <p class="para">
       <code class="parameter">start</code> に非負の値を指定すると、
       <span class="function"><strong>strspn()</strong></span> は
       <code class="parameter">subject</code> の
       <code class="parameter">start</code> 番目の位置から調査を始めます。
       たとえば、文字列 &#039;<em>abcdef</em>&#039; において
       <em>0</em> 番目の位置にある文字は &#039;<em>a</em>&#039;
       で <em>2</em> 番目の位置にある文字は
       &#039;<em>c</em>&#039; のようになります。
      </p>
      <p class="para">
       <code class="parameter">start</code> に負の値を指定すると、
       <span class="function"><strong>strspn()</strong></span> は
       <code class="parameter">subject</code> の最後から
       <code class="parameter">start</code> 番目の位置から調査を始めます。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">length</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">subject</code> 内で調べる部分の長さ。
      </p>
      <p class="para">
       <code class="parameter">length</code> に非負の値を指定すると、
       <code class="parameter">subject</code> の開始位置から
       <code class="parameter">length</code> 文字ぶんの範囲を調査します。
      </p>
      <p class="para">
        <code class="parameter">length</code> に負の値を指定すると、
        <code class="parameter">subject</code> の調査範囲は
        開始位置から始まって <code class="parameter">subject</code>
        の最後から <code class="parameter">length</code> だけさかのぼったところまでとなります。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strspn-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">subject</code> の中で、全て
   <code class="parameter">mask</code> の中の文字からなる最初のセグメントの長さを返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strspn-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5014">
    <p><strong>例1 <span class="function"><strong>strspn()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;subjectの最初の文字がmaskのどの文字とも一致しません<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">strspn</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;subject&nbsp;のオフセット&nbsp;1&nbsp;から&nbsp;2&nbsp;文字を調べます<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">strspn</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;subject&nbsp;のオフセット&nbsp;1&nbsp;から&nbsp;1&nbsp;文字を調べます<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">strspn</span><span style="color: #007700">(</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
int(0)
int(2)
int(1)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strspn-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">この関数はバイナリデータに対応しています。
</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strspn-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.strcspn.html" class="function" rel="rdfs-seeAlso">strcspn()</a> - マスクにマッチしない最初のセグメントの長さを返す</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="108922""></a>
  <div class="note">
   <strong class="user">bob at example dot com</strong>
   <a href="#108922" class="date">06-Jun-2012 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Quick way to check if a string consists entirely of characters within the mask is to compare strspn with strlen eg:
<br />

<br />
<span class="default">&lt;?php
<br />
$path </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PATH_INFO'</span><span class="keyword">];
<br />
if (</span><span class="default">strspn</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">) == </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//PATH_INFO is empty
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102190""></a>
  <div class="note">
   <strong class="user">mrsohailkhan at gmail dot com</strong>
   <a href="#102190" class="date">01-Feb-2011 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
very dificult to get from the definition directly, while i search for that,i came to know that
<br />

<br />
strspn() will tell you the length of a string consisting entirely of the set of characters in accept set. That is, it starts walking down str until it finds a character that is not in the set (that is, a character that is not to be accepted), and returns the length of the string so far. 
<br />

<br />
and 
<br />

<br />
strcspn() works much the same way, except that it walks down str until it finds a character in the reject set (that is, a character that is to be rejected.) It then returns the length of the string so far.
<br />

<br />
<span class="default">&lt;?php
<br />
$acceptSet </span><span class="keyword">= </span><span class="string">"aeiou"</span><span class="keyword">;
<br />
</span><span class="default">$rejectSet&nbsp; </span><span class="keyword">= </span><span class="string">"y"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$str1 </span><span class="keyword">=</span><span class="string">"a banana"</span><span class="keyword">;
<br />
</span><span class="default">$str2 </span><span class="keyword">=</span><span class="string">"the bolivian navy on manuvers in the south pacific"</span><span class="keyword">;
<br />

<br />
echo </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strspn</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">,</span><span class="default">$acceptSet</span><span class="keyword">);</span><span class="comment">// $n == 1, just "a"
<br />

<br />
</span><span class="keyword">echo </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strcspn</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">,</span><span class="default">$rejectSet</span><span class="keyword">);</span><span class="comment">// n = 16, "the bolivian nav"
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
hope this example will help in understanding the concept of strspn() and strcspn().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101133""></a>
  <div class="note">
   <strong class="user">AT-HE (at_he.hotmail)</strong>
   <a href="#101133" class="date">28-Nov-2010 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you can use this function with strlen to check illegal characters, string lenght must be the same than strspn (characters from my string contained in another)<br />
<br />
<span class="default">&lt;?php<br />
<br />
$digits</span><span class="keyword">=</span><span class="string">'0123456789'</span><span class="keyword">;<br />
<br />
if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$phone</span><span class="keyword">) != </span><span class="default">strspn</span><span class="keyword">(</span><span class="default">$phone</span><span class="keyword">,</span><span class="default">$digits</span><span class="keyword">))<br />
&nbsp;echo </span><span class="string">"illegal characters"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89362""></a>
  <div class="note">
   <strong class="user">Dmitry Mazur</strong>
   <a href="#89362" class="date">04-Mar-2009 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The second parameter is a set of allowed characters.<br />
strspn will return an zero-based index of a first non-allowed character.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84980""></a>
  <div class="note">
   <strong class="user">barry dot balkowski at gmail dot com</strong>
   <a href="#84980" class="date">08-Aug-2008 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me some time to understand the way this function works...<br />
I've compiled my own explanation with my own words that is more understandable for me personally than the official one or those that can be found in different tutorials on the web.<br />
Perhaps, it will save someone several minutes...<br />
<br />
<span class="default">&lt;?php <br />
strspn</span><span class="keyword">(</span><span class="default">string $haystack</span><span class="keyword">, </span><span class="default">string $char_list </span><span class="keyword">[, </span><span class="default">int $start </span><span class="keyword">[, </span><span class="default">int $length</span><span class="keyword">]])<br />
</span><span class="default">?&gt;<br />
</span><br />
The way it works:<br />
&nbsp;-&nbsp;&nbsp; searches for a segment of $haystack that consists entirely from supplied through the second argument chars <br />
&nbsp;-&nbsp;&nbsp; $haystack must start from one of the chars supplied through $char_list, otherwise the function will find nothing<br />
&nbsp;-&nbsp;&nbsp; as soon as the function encounters a char that was not mentioned in $chars it understands that the segment is over and stops (it doesn't search for the second, third and so on segments)<br />
&nbsp;-&nbsp;&nbsp; finally, it measures the segment's length and return it (i.e. length)<br />
<br />
In other words it finds a span (only the first one) in the string that consists entirely form chars supplied in $chars_list and returns its length</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78200""></a>
  <div class="note">
   <strong class="user">B Crawford</strong>
   <a href="#78200" class="date">03-Oct-2007 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is significantly faster for checking illegal characters than the equivalent preg_match() method.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
