<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>単語のスペルについて修正候補を示す</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.pspell-store-replacement.html">≪ pspell_store_replacement</a></li>
      <li style="float: right;"><a href="book.recode.html">Recode ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.pspell.html">Pspell 関数</a></li>
    <li>単語のスペルについて修正候補を示す</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.pspell-suggest" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">pspell_suggest</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.2, PHP 5)</p><p class="refpurpose"><span class="refname">pspell_suggest</span> &mdash; <span class="dc-title">単語のスペルについて修正候補を示す</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.pspell-suggest-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>pspell_suggest</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$dictionary_link</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$word</code></span>
   )</div>

  <p class="simpara">
   <span class="function"><strong>pspell_suggest()</strong></span> は、
   指定した単語について可能性のあるスペルの配列を返します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.pspell-suggest-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">dictionary_link</code></dt>

     <dd>

      <p class="para">
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">word</code></dt>

     <dd>

      <p class="para">
       調べたい単語。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.pspell-suggest-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   修正候補の配列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.pspell-suggest-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-2831">
    <p><strong>例1 <span class="function"><strong>pspell_suggest()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$pspell_link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pspell_new</span><span style="color: #007700">(</span><span style="color: #DD0000">"en"</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">pspell_check</span><span style="color: #007700">(</span><span style="color: #0000BB">$pspell_link</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"testt"</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$suggestions&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">pspell_suggest</span><span style="color: #007700">(</span><span style="color: #0000BB">$pspell_link</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"testt"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$suggestions&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$suggestion</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Possible&nbsp;spelling:&nbsp;</span><span style="color: #0000BB">$suggestion</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="41503""></a>
  <div class="note">
   <strong class="user">webmaster at hostpure dot com</strong>
   <a href="#41503" class="date">13-Apr-2004 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems if you are trying to do something similar to the Google 'Did you mean:' suggestions and are selecting the first word given by the pspell_suggest() function, then it will not work well with custom dictionaries and replacements. Take the following code for example:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $pspell_config </span><span class="keyword">= </span><span class="default">pspell_config_create</span><span class="keyword">(</span><span class="string">"en"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pspell_config_personal</span><span class="keyword">(</span><span class="default">$pspell_config</span><span class="keyword">, </span><span class="string">"/home/user/public_html/custom.pws"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pspell_config_repl</span><span class="keyword">(</span><span class="default">$pspell_config</span><span class="keyword">, </span><span class="string">"/home/user/public_html/custom.repl"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pspell_link </span><span class="keyword">= </span><span class="default">pspell_new_config</span><span class="keyword">(</span><span class="default">$pspell_config</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$words </span><span class="keyword">= </span><span class="default">preg_split </span><span class="keyword">(</span><span class="string">"/\s+/"</span><span class="keyword">, </span><span class="default">$query</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ii </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; global </span><span class="default">$spellchecked</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$spellchecked </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$ii</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">pspell_check</span><span class="keyword">(</span><span class="default">$pspell_link</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$spellchecked </span><span class="keyword">.= </span><span class="default">$words</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$erroneous </span><span class="keyword">= </span><span class="string">"yes"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$suggestions </span><span class="keyword">= </span><span class="default">pspell_suggest</span><span class="keyword">(</span><span class="default">$pspell_link</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$spellchecked </span><span class="keyword">.= </span><span class="default">$suggestions</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$erroneous </span><span class="keyword">== </span><span class="string">"yes"</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Did you mean: &lt;i&gt;"</span><span class="keyword">.</span><span class="default">$spellchecked</span><span class="keyword">.</span><span class="string">"?"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$spellchecked </span><span class="keyword">. </span><span class="string">" is a valid word/phrase"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This works fine most of the time, and gives suggestions to what you meant when inserting a spelling mistake with most inputs. However, if you specify a custom replacement and then search for the misspelt word that you specified, then if it is not the first returned suggestion it wont be used in the 'Did you mean' end result. What you need to do is open up the custom dictionary using fopen and fread, and then for each of the suggested words, check if they are in the dictionary. If the suggested word is in the custom dictionary then use it in the 'Did you mean' part, if not, discard it and try the next. Hope this helps anyone who comes across this problem with trying to get more accurate suggestions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
