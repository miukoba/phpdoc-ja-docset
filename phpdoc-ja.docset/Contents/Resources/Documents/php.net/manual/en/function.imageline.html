<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>直線を描画する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imagelayereffect.html">≪ imagelayereffect</a></li>
      <li style="float: right;"><a href="function.imageloadfont.html">imageloadfont ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.image.html">GD および Image 関数</a></li>
    <li>直線を描画する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.imageline" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imageline</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imageline</span> &mdash; <span class="dc-title">直線を描画する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imageline-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>imageline</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$image</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$x1</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$y1</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$x2</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$y2</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$color</code></span>
   )</div>

  <p class="para rdfs-comment">
   指定したふたつの点を結ぶ直線を描画します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imageline-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
image</code></dt>
<dd>
<p class="para"><span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>
のような画像作成関数が返す画像リソース。</p></dd>

    
     <dt>
<code class="parameter">x1</code></dt>

     <dd>

      <p class="para">
       最初の点の x 座標。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">y1</code></dt>

     <dd>

      <p class="para">
       最初の点の y 座標。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">x2</code></dt>

     <dd>

      <p class="para">
       二番目の点の x 座標。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">y2</code></dt>

     <dd>

      <p class="para">
       二番目の点の y 座標。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">color</code></dt>

     <dd>

      <p class="para">
       直線の色。
       <span class="function"><a href="function.imagecolorallocate.html" class="function">imagecolorallocate()</a></span>
       で作成した色 ID です。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imageline-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imageline-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-3351">
    <p><strong>例1 太い線を描画する</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">imagelinethick</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;この方法は直行する線の場合のみうまく動作します<br />&nbsp;&nbsp;&nbsp;&nbsp;imagesetthickness($image,&nbsp;$thick);<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;imageline($image,&nbsp;$x1,&nbsp;$y1,&nbsp;$x2,&nbsp;$y2,&nbsp;$color);<br />&nbsp;&nbsp;&nbsp;&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imageline</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">)&nbsp;/&nbsp;(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//y&nbsp;=&nbsp;kx&nbsp;+&nbsp;q<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">sqrt</span><span style="color: #007700">(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">pow</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$points&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">imagefilledpolygon</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$points</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imagepolygon</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$points</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imageline-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imagecreatetruecolor.html" class="function" rel="rdfs-seeAlso">imagecreatetruecolor()</a> - TrueColor イメージを新規に作成する</span></li>
    <li class="member"><span class="function"><a href="function.imagecolorallocate.html" class="function" rel="rdfs-seeAlso">imagecolorallocate()</a> - 画像で使用する色を作成する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="107923""></a>
  <div class="note">
   <strong class="user">Nils</strong>
   <a href="#107923" class="date">15-Mar-2012 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A quick function using imageline that I wrote so i could specify a starting point, angle and length of vector.<br />
<br />
Thought other people might find this useful.<br />
<br />
<span class="default">&lt;?php<br />
$size </span><span class="keyword">= </span><span class="default">600</span><span class="keyword">;<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">);<br />
<br />
</span><span class="default">$white </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">$black </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$white</span><span class="keyword">);<br />
<br />
function </span><span class="default">Vector</span><span class="keyword">(</span><span class="default">$palette</span><span class="keyword">,</span><span class="default">$startx</span><span class="keyword">,</span><span class="default">$starty</span><span class="keyword">,</span><span class="default">$angle</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$colour</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$angle </span><span class="keyword">= </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$endx </span><span class="keyword">= </span><span class="default">$startx</span><span class="keyword">+</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">)*</span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$endy </span><span class="keyword">= </span><span class="default">$starty</span><span class="keyword">-</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">)*</span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$palette</span><span class="keyword">,</span><span class="default">$startx</span><span class="keyword">,</span><span class="default">$starty</span><span class="keyword">,</span><span class="default">$endx</span><span class="keyword">,</span><span class="default">$endy</span><span class="keyword">,</span><span class="default">$colour</span><span class="keyword">));<br />
}<br />
<br />
</span><span class="default">Vector</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">$black</span><span class="keyword">);<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
For this script angles work in a anti-clockwise direction (modify + and - in function to change start of 0 degrees and also direction of angle calculated)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105038""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#105038" class="date">24-Jul-2011 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most bold-line-functions i found have problems with lines in a certian direction (they draw smaller lines with some angles). To do a real bold line just use this function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">imageBoldLine</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">, </span><span class="default">$BoldNess</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">, </span><span class="default">$func</span><span class="keyword">=</span><span class="string">'imageLine'</span><span class="keyword">) 
<br />
{
<br />
&nbsp;</span><span class="default">$center </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$BoldNess</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">);
<br />
&nbsp;for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$BoldNess</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;{&nbsp; 
<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$center</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">; if(</span><span class="default">$a</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){</span><span class="default">$a </span><span class="keyword">-= </span><span class="default">$a</span><span class="keyword">;}
<br />
&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">$BoldNess</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++)
<br />
&nbsp; {
<br />
&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$center</span><span class="keyword">-</span><span class="default">$j</span><span class="keyword">; if(</span><span class="default">$b</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){</span><span class="default">$b </span><span class="keyword">-= </span><span class="default">$b</span><span class="keyword">;}
<br />
&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">*</span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">*</span><span class="default">$b</span><span class="keyword">);
<br />
&nbsp;&nbsp; if(</span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="default">$BoldNess</span><span class="keyword">)
<br />
&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">$j</span><span class="keyword">, </span><span class="default">$x2 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">+</span><span class="default">$j</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">);
<br />
&nbsp;&nbsp; }
<br />
&nbsp; }
<br />
&nbsp;}&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98192""></a>
  <div class="note">
   <strong class="user">allenn at hot dot ee</strong>
   <a href="#98192" class="date">31-May-2010 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function drawing of a line by a brush uses midpoint circle algorithm..., if dullness I agree to remove :))) <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//function drawLine(resource$image,int $x0,int $y0,int $x1,int $y1,int $lineWidth,int $color)<br />
</span><span class="keyword">function </span><span class="default">drawLine</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$ddF_x</span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$ddF_y </span><span class="keyword">= -</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$radius</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$x</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$radius</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
<br />
&nbsp; while(</span><span class="default">$x</span><span class="keyword">&lt; </span><span class="default">$y</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$f </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$y</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ddF_y </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">+= </span><span class="default">$ddF_y</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ddF_x</span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">+= </span><span class="default">$ddF_x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
<br />
&nbsp; }<br />
}<br />
</span><span class="default">header </span><span class="keyword">(</span><span class="string">'Content-type: image/png'</span><span class="keyword">);<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">600</span><span class="keyword">,</span><span class="default">600</span><span class="keyword">);<br />
</span><span class="default">$col </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">252</span><span class="keyword">);<br />
</span><span class="comment">//use the function<br />
</span><span class="default">rasterCircle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">,</span><span class="default">540</span><span class="keyword">,</span><span class="default">540</span><span class="keyword">,</span><span class="default">40</span><span class="keyword">,</span><span class="default">$col</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94624""></a>
  <div class="note">
   <strong class="user">sbm007 at gmail dot com</strong>
   <a href="#94624" class="date">15-Nov-2009 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a analog clock representation of the system time along with digits for hours and little dots for minutes/seconds:<br />
<br />
<span class="default">&lt;?php<br />
$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">450</span><span class="keyword">, </span><span class="default">450</span><span class="keyword">);<br />
<br />
</span><span class="default">$white </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">$red </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$black </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$grey </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">);<br />
<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$white</span><span class="keyword">);<br />
</span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br />
</span><span class="default">imagefilledarc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">, </span><span class="default">IMG_ARC_PIE</span><span class="keyword">);<br />
<br />
for (</span><span class="default">$zz </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$zz </span><span class="keyword">&lt; </span><span class="default">60</span><span class="keyword">; </span><span class="default">$zz</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][] = </span><span class="default">175 </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$zz</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][] = </span><span class="default">175 </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$zz</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
}<br />
<br />
for (</span><span class="default">$zz </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$zz </span><span class="keyword">&lt; </span><span class="default">60</span><span class="keyword">; </span><span class="default">$zz</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$zz </span><span class="keyword">% </span><span class="default">5 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">] - </span><span class="default">4</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">] - </span><span class="default">6</span><span class="keyword">, (</span><span class="default">$zz</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagefilledarc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">], </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">], </span><span class="default">3</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$grey</span><span class="keyword">, </span><span class="default">IMG_ARC_PIE</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$seconds </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">);<br />
</span><span class="default">$minutes </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">) + (</span><span class="default">$seconds</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);<br />
</span><span class="default">$hours </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h'</span><span class="keyword">) + (</span><span class="default">$minutes</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);<br />
<br />
</span><span class="default">$r_sec </span><span class="keyword">= </span><span class="default">175</span><span class="keyword">;<br />
</span><span class="default">$r_min </span><span class="keyword">= </span><span class="default">175</span><span class="keyword">;<br />
</span><span class="default">$r_hr </span><span class="keyword">= </span><span class="default">125</span><span class="keyword">;<br />
<br />
</span><span class="default">$x_sec </span><span class="keyword">= </span><span class="default">$r_sec </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$seconds</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
</span><span class="default">$y_sec </span><span class="keyword">= </span><span class="default">$r_sec </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$seconds</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
<br />
</span><span class="default">$x_min </span><span class="keyword">= </span><span class="default">$r_min </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$minutes</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
</span><span class="default">$y_min </span><span class="keyword">= </span><span class="default">$r_min </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$minutes</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
<br />
</span><span class="default">$x_hr </span><span class="keyword">= </span><span class="default">$r_hr </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$hours</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">12</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
</span><span class="default">$y_hr </span><span class="keyword">= </span><span class="default">$r_hr </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$hours</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">12</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br />
<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_sec</span><span class="keyword">, </span><span class="default">$y_sec</span><span class="keyword">, </span><span class="default">$red</span><span class="keyword">);<br />
</span><span class="default">imagesetthickness</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_min</span><span class="keyword">, </span><span class="default">$y_min</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br />
</span><span class="default">imagesetthickness</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_hr</span><span class="keyword">, </span><span class="default">$y_hr</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92168""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#92168" class="date">12-Jul-2009 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's another way of modifying likavcan's code to display filled arrows. This makes use of imagefilledpolygon(...) instead of recursive function calls.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrow</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength</span><span class="keyword">, </span><span class="default">$awidth</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$distance </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">pow</span><span class="keyword">(</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) + </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dx </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ (</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dy </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ (</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$awidth </span><span class="keyword">/ </span><span class="default">$alength</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x2o </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$dx</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y2o </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dx</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y3 </span><span class="keyword">= </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dy</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x4 </span><span class="keyword">= </span><span class="default">$dx </span><span class="keyword">- </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y4 </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$dx</span><span class="keyword">, </span><span class="default">$dy</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagefilledpolygon</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, array(</span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89971""></a>
  <div class="note">
   <strong class="user">ca dot ddy at gmx dot de</strong>
   <a href="#89971" class="date">31-Mar-2009 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've modified the Arrow function of likavcan.
<br />

<br />
This arrowFunction draws the arrow filled :
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">arrow</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength</span><span class="keyword">, </span><span class="default">$awidth</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">) {
<br />

<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$alength </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">arrow</span><span class="keyword">( </span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$awidth </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$color </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$distance </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">pow</span><span class="keyword">(</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) + </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dx </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ (</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dy </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ (</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$awidth </span><span class="keyword">/ </span><span class="default">$alength</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x2o </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$dx</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y2o </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dx</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y3 </span><span class="keyword">= </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dy</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x4 </span><span class="keyword">= </span><span class="default">$dx </span><span class="keyword">- </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y4 </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$dx</span><span class="keyword">, </span><span class="default">$dy</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br />

<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87496""></a>
  <div class="note">
   <strong class="user">keksnicoh</strong>
   <a href="#87496" class="date">07-Dec-2008 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Little function I made to draw faaaaat lines...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* imageBoldLine function<br />
&nbsp;* this function allows you to draw faaaat lines.<br />
&nbsp;*<br />
&nbsp;* To keep the function a bit more flexible, it's possible to change the function which draw the lines<br />
&nbsp;* @param resource $resource<br />
&nbsp;* @param int $x1<br />
&nbsp;* @param int $y1<br />
&nbsp;* @param int $x2<br />
&nbsp;* @param int $y2<br />
&nbsp;* @param int $Color<br />
&nbsp;* @param int $BoldNess (1 = thin, 2=bold, 1000 = extreme fat)<br />
&nbsp;* @param string $func Functionname. Notice that the function must got the same signature.<br />
&nbsp;* @return void<br />
&nbsp;* @author Nicolas 'keksnicoh' Heimann &lt;www.salamipla.net&gt;<br />
&nbsp;* @date nov08<br />
&nbsp;* &lt;code&gt;&lt;?php<br />
&nbsp;* imageBoldLine($res, 0, 0, 100, 100, $col, 5);<br />
&nbsp;* ?&gt;&lt;/code&gt;<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">imageBoldLine</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">, </span><span class="default">$BoldNess</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">, </span><span class="default">$func</span><span class="keyword">=</span><span class="string">'imageLine'</span><span class="keyword">) <br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x1 </span><span class="keyword">-= (</span><span class="default">$buf</span><span class="keyword">=</span><span class="default">ceil</span><span class="keyword">((</span><span class="default">$BoldNess</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">) /</span><span class="default">2</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x2 </span><span class="keyword">-= </span><span class="default">$buf</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$BoldNess</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80816""></a>
  <div class="note">
   <strong class="user">huirong dot jin at gmail dot com</strong>
   <a href="#80816" class="date">01-Feb-2008 05:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example to draw Lissajous Curve (<a href="http://en.wikipedia.org/wiki/Lissajous_curve" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Lissajous_curve</a>):<br />
x = a1 * cos(t/T1);<br />
y = a2 * sin(t/T2);<br />
<br />
You can easily modify the codes to create your own oscilloscope application!<br />
<br />
<span class="default">&lt;?php<br />
header </span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
<br />
</span><span class="default">$T1 </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">$T2 </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;<br />
<br />
</span><span class="default">$myImage </span><span class="keyword">= @</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">640</span><span class="keyword">, </span><span class="default">480</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; or die(</span><span class="string">"Cannot Initialize new GD image stream"</span><span class="keyword">);<br />
</span><span class="default">$text_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br />
</span><span class="default">$poly_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">124</span><span class="keyword">, </span><span class="default">120</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br />
<br />
</span><span class="comment">//calculate x-value and y-value point by point<br />
</span><span class="default">$points </span><span class="keyword">= array();<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//define curve's function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">310</span><span class="keyword">*</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">/</span><span class="default">$T1</span><span class="keyword">); </span><span class="comment">//define x-value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">230</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">/</span><span class="default">$T2</span><span class="keyword">);</span><span class="comment">//define y-value<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; //move the coordinate, append a point's x-value and y-value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">320</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">; </span><span class="comment">//x-value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">240</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">;&nbsp; </span><span class="comment">//y-value<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//count points<br />
</span><span class="default">$totalPoints </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$points</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br />
<br />
</span><span class="comment">//drawing title<br />
</span><span class="default">$title </span><span class="keyword">= </span><span class="string">"Final Plot (</span><span class="default">$totalPoints</span><span class="string"> points)"</span><span class="keyword">;<br />
</span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="default">$title</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br />
<br />
</span><span class="comment">/** drawing points one by one, notice if there <br />
&nbsp;* are 10 points, we need to draw 9 lines: <br />
&nbsp;* 1) point 0 to 1; <br />
&nbsp;* 2) point 1 to 2;<br />
&nbsp;* ...<br />
&nbsp;* ...<br />
&nbsp;* 9) point 8 to 9; <br />
&nbsp;*/<br />
</span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$totalPoints</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageLine</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$poly_color</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="comment">//finalizing<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80797""></a>
  <div class="note">
   <strong class="user">huirong dot jin at gmail dot com</strong>
   <a href="#80797" class="date">31-Jan-2008 10:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An example to draw Amplitude Modulation curve: y = c * sin (x/a) * sin (x/b) . You can easily modify the codes to create your own oscilloscope application!<br />
<br />
<span class="default">&lt;?php<br />
header </span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">$myImage </span><span class="keyword">= @</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">640</span><span class="keyword">, </span><span class="default">480</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; or die(</span><span class="string">"Cannot Initialize new GD image stream"</span><span class="keyword">);<br />
</span><span class="default">$text_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br />
</span><span class="default">$poly_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">124</span><span class="keyword">, </span><span class="default">120</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br />
<br />
</span><span class="comment">//calculate x-value and y-value point by point<br />
</span><span class="default">$points </span><span class="keyword">= array();<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">640</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//define curve's function<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">; </span><span class="comment">//define x-value, which is $i itself <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">150</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">/</span><span class="default">80</span><span class="keyword">)*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">);</span><span class="comment">//define y-value<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; //append a point's x-value and y-value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">$x</span><span class="keyword">; </span><span class="comment">//x-value<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">240</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">;&nbsp; </span><span class="comment">//y-value<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//count points<br />
</span><span class="default">$totalPoints </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$points</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br />
<br />
</span><span class="comment">//drawing title<br />
</span><span class="default">$title </span><span class="keyword">= </span><span class="string">"Final Plot (</span><span class="default">$totalPoints</span><span class="string"> points)"</span><span class="keyword">;<br />
</span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="default">$title</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br />
<br />
</span><span class="comment">/** drawing points one by one, notice if there <br />
&nbsp;* are 10 points, we need to draw 9 lines: <br />
&nbsp;* 1) point 0 to 1; <br />
&nbsp;* 2) point 1 to 2;<br />
&nbsp;* ...<br />
&nbsp;* ...<br />
&nbsp;* 9) point 8 to 9; <br />
&nbsp;*/<br />
</span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$totalPoints</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageLine</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$poly_color</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
<br />
</span><span class="comment">//finalizing<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74856""></a>
  <div class="note">
   <strong class="user">admin at xpmail dot net</strong>
   <a href="#74856" class="date">01-May-2007 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
example of a Simple grid...<br />
bool imagegrid ( resource $image, int $width, int $Height, int $size, mixed $color )<br />
<br />
<span class="default">&lt;?php<br />
Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">$Width</span><span class="keyword">=</span><span class="default">450</span><span class="keyword">;<br />
</span><span class="default">$Height</span><span class="keyword">=</span><span class="default">450</span><span class="keyword">;<br />
<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">ImageCreateTrueColor</span><span class="keyword">(</span><span class="default">$Width</span><span class="keyword">, </span><span class="default">$Height</span><span class="keyword">);<br />
<br />
</span><span class="default">$bg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$bg</span><span class="keyword">);<br />
<br />
</span><span class="default">$grid </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">225</span><span class="keyword">, </span><span class="default">245</span><span class="keyword">, </span><span class="default">249</span><span class="keyword">);<br />
<br />
</span><span class="default">imagesetstyle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, array(</span><span class="default">$bg</span><span class="keyword">, </span><span class="default">$grid</span><span class="keyword">));<br />
</span><span class="default">imagegrid</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$Width</span><span class="keyword">, </span><span class="default">$Height</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">IMG_COLOR_STYLED</span><span class="keyword">);<br />
</span><span class="comment">//makegrid($img, $Width, $Height, 10, $grid);<br />
<br />
</span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
<br />
function </span><span class="default">imagegrid</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$iw</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$iw</span><span class="keyword">&lt;</span><span class="default">$w</span><span class="keyword">/</span><span class="default">$s</span><span class="keyword">; </span><span class="default">$iw</span><span class="keyword">++){</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$iw</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$iw</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);}<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$ih</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$ih</span><span class="keyword">&lt;</span><span class="default">$h</span><span class="keyword">/</span><span class="default">$s</span><span class="keyword">; </span><span class="default">$ih</span><span class="keyword">++){</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ih</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$ih</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);}<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74779""></a>
  <div class="note">
   <strong class="user">Jonathan W.</strong>
   <a href="#74779" class="date">27-Apr-2007 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've modified the previous entry for drawing on a polar coordinate system to better represent angles based on a 360o whole circle bearing.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">imagepolarline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$angle</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">sin</span><span class="keyword">( </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">) ) * </span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">cos</span><span class="keyword">( </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">+</span><span class="default">180</span><span class="keyword">) ) * </span><span class="default">$length</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$x2</span><span class="keyword">,</span><span class="default">$y2</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62606""></a>
  <div class="note">
   <strong class="user">pb_2001 at haefft dot de</strong>
   <a href="#62606" class="date">04-Mar-2006 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a function to make a dotted line. It accepts (it actually requires) 7 parameters and returns 1 if everything went OK and 0 if there was a problem.<br />
<br />
int imagelinedotted ( resource im, int x1, int y1, int x2, int y2, int dist, int col )<br />
<br />
imagelinedotted() draws a line from x1, y1 to x2, y2 (top left is 0, 0) in image im of colour col where dist defines the distance (measured in pixels) between one dot and another.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">imagelinedotted </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$dist</span><span class="keyword">, </span><span class="default">$col</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$transp </span><span class="keyword">= </span><span class="default">imagecolortransparent </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$style </span><span class="keyword">= array (</span><span class="default">$col</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$dist</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$style</span><span class="keyword">, </span><span class="default">$transp</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Generate style array - loop needed for customisable distance between the dots<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagesetstyle </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$style</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return (integer) </span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">IMG_COLOR_STYLED</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagesetstyle </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, array(</span><span class="default">$col</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Reset style - just in case...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61301""></a>
  <div class="note">
   <strong class="user">fatpratmatt at gmail dot com</strong>
   <a href="#61301" class="date">30-Jan-2006 08:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function which draws lines that cross at a specific point [It may need some tweaking]:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Image Cross by Matt Evans<br />
// $im - image resource<br />
// $x - x coordinate where the lines should cross<br />
// $y - y coordinate where the lines should cross<br />
// $size - the length of each line<br />
// $colour - the colour of the cross<br />
<br />
</span><span class="keyword">function </span><span class="default">imagecross</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">) {<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">);<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// Example<br />
</span><span class="default">imagecross</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">$crosscolour</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58010""></a>
  <div class="note">
   
   <a href="#58010" class="date">21-Oct-2005 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
imageline coordinate variables are documented as int ,&nbsp; a value in decimal format will be truncated.<br />
<br />
This may be useful when, for example, applying a non-integer scaling factor in generating an image.<br />
<br />
Care should be taken to ensure this does not create significant errors that affect the quality of the image. For example :<br />
<br />
<span class="default">&lt;?php<br />
$x</span><span class="keyword">=</span><span class="default">0.00000000001</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">=</span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">);<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">-</span><span class="default">$x</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
the first line will be straight , the second will have a step. Use round() where appropriate.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56565""></a>
  <div class="note">
   <strong class="user">meid at gmx dot at</strong>
   <a href="#56565" class="date">07-Sep-2005 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some simple code to draw lines with specific thickness using "imagefilledpolygon". Useful if your gdlib does not support "imagesetthickness". <br />
<br />
&lt;?<br />
function dickelinie($img,$start_x,$start_y,$end_x,$end_y,$color,$thickness) <br />
{<br />
&nbsp;&nbsp;&nbsp; $angle=(atan2(($start_y - $end_y),($end_x - $start_x))); <br />
<br />
&nbsp;&nbsp;&nbsp; $dist_x=$thickness*(sin($angle));<br />
&nbsp;&nbsp;&nbsp; $dist_y=$thickness*(cos($angle));<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $p1x=ceil(($start_x + $dist_x));<br />
&nbsp;&nbsp;&nbsp; $p1y=ceil(($start_y + $dist_y));<br />
&nbsp;&nbsp;&nbsp; $p2x=ceil(($end_x + $dist_x));<br />
&nbsp;&nbsp;&nbsp; $p2y=ceil(($end_y + $dist_y));<br />
&nbsp;&nbsp;&nbsp; $p3x=ceil(($end_x - $dist_x));<br />
&nbsp;&nbsp;&nbsp; $p3y=ceil(($end_y - $dist_y));<br />
&nbsp;&nbsp;&nbsp; $p4x=ceil(($start_x - $dist_x));<br />
&nbsp;&nbsp;&nbsp; $p4y=ceil(($start_y - $dist_y));<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $array=array(0=&gt;$p1x,$p1y,$p2x,$p2y,$p3x,$p3y,$p4x,$p4y);<br />
&nbsp;&nbsp;&nbsp; imagefilledpolygon ( $img, $array, (count($array)/2), $color );<br />
}<br />
// Example:<br />
header ("Content-type: image/jpeg");<br />
$img = ImageCreate (210, 210) or die("Cannot Initialize new GD image stream ");<br />
$backgroundcolor = ImageColorAllocate ($img, 255, 255, 255);<br />
$orange = ImageColorAllocate($img, 252, 102, 4);<br />
dickelinie($img, 10, 10, 10, 200,$orange,2);<br />
dickelinie($img, 10, 200, 200, 10,$orange,2);&nbsp; &nbsp; <br />
dickelinie($img, 200, 10, 200, 200,$orange,2);<br />
imagejpeg($img);&nbsp;&nbsp; <br />
ImageDestroy($img);<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56524""></a>
  <div class="note">
   <strong class="user">d [AT] sprid [DOT] de</strong>
   <a href="#56524" class="date">06-Sep-2005 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here my function do clear all problems. With this, you can draw firstly smooth lines (basic code adapted from code_couturier at graffiti dot net, with some performance changes). The special is, you can define the alpha-value of the line (0 = normal smooth line, 127 = fully transparent). Change whatever you want to make it better, but post your results ;) <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* function imageSmoothAlphaLine() - version 1.0<br />
&nbsp;* Draws a smooth line with alpha-functionality<br />
&nbsp;*<br />
&nbsp;* @param&nbsp;&nbsp; ident&nbsp; &nbsp; the image to draw on<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; x1<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; y1<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; x2<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; y2<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; red (0 to 255)<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; green (0 to 255)<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; blue (0 to 255)<br />
&nbsp;* @param&nbsp;&nbsp; integer&nbsp; alpha (0 to 127)<br />
&nbsp;*<br />
&nbsp;* @access&nbsp; public<br />
&nbsp;*<br />
&nbsp;* @author&nbsp; DASPRiD &lt;d@sprid.de&gt;<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">imageSmoothAlphaLine </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">, </span><span class="default">$g</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$alpha</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$icr </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$icg </span><span class="keyword">= </span><span class="default">$g</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$icb </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$dcol </span><span class="keyword">= </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$icr</span><span class="keyword">, </span><span class="default">$icg</span><span class="keyword">, </span><span class="default">$icb</span><span class="keyword">, </span><span class="default">$alpha</span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">$y2 </span><span class="keyword">|| </span><span class="default">$x1 </span><span class="keyword">== </span><span class="default">$x2</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$dcol</span><span class="keyword">);<br />
&nbsp; else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= (</span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1</span><span class="keyword">) / (</span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$x1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$m </span><span class="keyword">* </span><span class="default">$x1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">abs </span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">) &lt;</span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$endx </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; while (</span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$endx</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">* </span><span class="default">$x </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ya </span><span class="keyword">= (</span><span class="default">$y </span><span class="keyword">== </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) ? </span><span class="default">1</span><span class="keyword">: </span><span class="default">$y </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yb </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) - </span><span class="default">$y</span><span class="keyword">;<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$endy </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; while (</span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">$endy</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= (</span><span class="default">$y </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">) / </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$xa </span><span class="keyword">= (</span><span class="default">$x </span><span class="keyword">== </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) ? </span><span class="default">1</span><span class="keyword">: </span><span class="default">$x </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$xb </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) - </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">, </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imagesetpixel </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">, </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
} </span><span class="comment">// end of 'imageSmoothAlphaLine()' function<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52464""></a>
  <div class="note">
   <strong class="user">Tyron</strong>
   <a href="#52464" class="date">02-May-2005 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Here's a function for drawing a rotated gradient Rectangle (based on a previous note)<br />
<br />
// Create An Image 255x255<br />
$img = ImageCreateTrueColor(255, 255);<br />
<br />
GradientRect($img,50,50,80,80,30);<br />
<br />
ImagePng($img,"test.png");<br />
ImageDestroy($img);<br />
echo "&lt;br&gt;&lt;img src=\"test.png\"&gt;";<br />
<br />
function GradientRect($img, $x1, $y1, $x2, $y2, $wdt) {<br />
&nbsp; $alpha = atan2($y2-$y1,$x2-$x1);<br />
&nbsp; $real_wdt = $wdt*sin($alpha);<br />
&nbsp; $real_hgt = $wdt*cos($alpha);<br />
&nbsp; echo "real wdt:".$real_wdt;<br />
&nbsp; echo "&lt;br&gt;real hgt:".$real_hgt;<br />
&nbsp; echo "&lt;br&gt;angle: ".($angle*180/pi());<br />
&nbsp; $plotD = 0;<br />
&nbsp; $i=0; <br />
<br />
&nbsp; $dy = $real_hgt/$wdt;<br />
&nbsp; $dx = $real_wdt/$wdt;<br />
&nbsp; $drgb= 256/$wdt;<br />
&nbsp; while($i++ &lt; $wdt) {<br />
&nbsp;&nbsp;&nbsp; // Draw a line and move it down and make it lighter to get the gradient effect<br />
&nbsp;&nbsp;&nbsp; ImageLine($img, $x1-$i*$dx, $y1+$i*$dy, $x2-$i*$dx, $y2+$i*$dy, ImageColorAllocate($img, $i*$drgb, 0, 0));<br />
&nbsp;&nbsp;&nbsp; ImageLine($img, $x1-$i*$dx+1, $y1+$i*$dy, $x2-$i*$dx+1, $y2+$i*$dy, ImageColorAllocate($img, $i*$drgb, 0, 0));<br />
<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52184""></a>
  <div class="note">
   <strong class="user">ajreading at classixshop dot com</strong>
   <a href="#52184" class="date">23-Apr-2005 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// An easy bit of code showing how you can use the ImageLine() function to create gradients<br />
<br />
// Create An Image 255x255<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">ImageCreateTrueColor</span><span class="keyword">(</span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
<br />
</span><span class="default">$plotD </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while(</span><span class="default">$plotD </span><span class="keyword">&lt; </span><span class="default">256</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Draw a line and move it down and make it lighter to get the gradient effect<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$plotD </span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$plotD</span><span class="keyword">++;<br />
}<br />
</span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">ImagePng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49429""></a>
  <div class="note">
   <strong class="user">eviloverlord at gmail dot com</strong>
   <a href="#49429" class="date">27-Jan-2005 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This code is used to draw a board of hexagons (for games, classes, etc.)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Draws a hexagonal board<br />
<br />
// User-defined values<br />
</span><span class="default">$maxTiles </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The number of tiles at the center (widest part) of the board<br />
</span><span class="default">$minTiles </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The number of tiles at the edges of the board<br />
</span><span class="default">$side </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The length of the sides of the tiles in pixels<br />
</span><span class="default">$bgColor </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The background color in RGB format<br />
</span><span class="default">$fgColor </span><span class="keyword">= array(</span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);</span><span class="comment">//The foreground color in RGB format<br />
<br />
//Calculated values<br />
</span><span class="default">$widthInTiles </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$maxTiles</span><span class="keyword">, </span><span class="default">$minTiles</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//In our example: 7, 6, 5, 4<br />
</span><span class="default">$rowsInTiles </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$widthInTiles</span><span class="keyword">)*</span><span class="default">2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the total number of rows on our board<br />
</span><span class="default">$xSide </span><span class="keyword">= </span><span class="default">$side</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">60</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the length of the x-part of the angled sides<br />
</span><span class="default">$ySide </span><span class="keyword">= </span><span class="default">$side</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the length of the y-part of the angled sides<br />
</span><span class="default">$boardWidth </span><span class="keyword">= </span><span class="default">$xSide</span><span class="keyword">*</span><span class="default">$widthInTiles</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The entire width of the board<br />
</span><span class="default">$boardHeight </span><span class="keyword">= </span><span class="default">$rowsInTiles</span><span class="keyword">*(</span><span class="default">$side </span><span class="keyword">+ </span><span class="default">$ySide</span><span class="keyword">) + </span><span class="default">$ySide</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//The entire height of the board<br />
<br />
// create a blank image and allocate the foreground, background colors<br />
</span><span class="default">$image </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$boardWidth</span><span class="keyword">, </span><span class="default">$boardHeight</span><span class="keyword">);<br />
</span><span class="default">$bg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
</span><span class="default">$fg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
<br />
</span><span class="comment">// draw the board<br />
</span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
foreach(</span><span class="default">$widthInTiles </span><span class="keyword">as </span><span class="default">$tiles</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$tiles</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">*</span><span class="default">$xSide </span><span class="keyword">+ </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$xSide</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">$boardHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y1Dif </span><span class="keyword">= (</span><span class="default">$side</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">) + </span><span class="default">$row</span><span class="keyword">*(</span><span class="default">$side</span><span class="keyword">+</span><span class="default">$ySide</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$xSide</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">$y1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y2Dif </span><span class="keyword">= </span><span class="default">$ySide</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$xSide</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$tiles</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,&nbsp; </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$side</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$side</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$row</span><span class="keyword">++;<br />
}<br />
<br />
</span><span class="comment">// output the picture<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42984""></a>
  <div class="note">
   <strong class="user">likavcan at NOSPAN sturak nospan dot sk</strong>
   <a href="#42984" class="date">06-Jun-2004 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function draws arrow.<br />
<br />
function arrow($im, $x1, $y1, $x2, $y2, $alength, $awidth, $color) {<br />
<br />
&nbsp;&nbsp;&nbsp; $distance = sqrt(pow($x1 - $x2, 2) + pow($y1 - $y2, 2));<br />
<br />
&nbsp;&nbsp;&nbsp; $dx = $x2 + ($x1 - $x2) * $alength / $distance;<br />
&nbsp;&nbsp;&nbsp; $dy = $y2 + ($y1 - $y2) * $alength / $distance;<br />
<br />
&nbsp;&nbsp;&nbsp; $k = $awidth / $alength;<br />
<br />
&nbsp;&nbsp;&nbsp; $x2o = $x2 - $dx;<br />
&nbsp;&nbsp;&nbsp; $y2o = $dy - $y2;<br />
<br />
&nbsp;&nbsp;&nbsp; $x3 = $y2o * $k + $dx;<br />
&nbsp;&nbsp;&nbsp; $y3 = $x2o * $k + $dy;<br />
<br />
&nbsp;&nbsp;&nbsp; $x4 = $dx - $y2o * $k;<br />
&nbsp;&nbsp;&nbsp; $y4 = $dy - $x2o * $k;<br />
<br />
&nbsp;&nbsp;&nbsp; imageline($im, $x1, $y1, $dx, $dy, $color);<br />
&nbsp;&nbsp;&nbsp; imageline($im, $x3, $y3, $x4, $y4, $color);<br />
&nbsp;&nbsp;&nbsp; imageline($im, $x3, $y3, $x2, $y2, $color);<br />
&nbsp;&nbsp;&nbsp; imageline($im, $x2, $y2, $x4, $y4, $color);<br />
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42596""></a>
  <div class="note">
   <strong class="user">Lionel Van Bemten</strong>
   <a href="#42596" class="date">23-May-2004 12:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here is a code to draw a "degraded" ... :<br />
&lt;?<br />
header("Content-type : image/jpeg");<br />
<br />
$image = @ImageCreate(200, 100)<br />
&nbsp; or die ("Erreur de cr?ation de l'image");<br />
<br />
$lignes_colorees = 1;<br />
$couleur_fond = ImageColorAllocate($image, 255, 255, 255);<br />
<br />
$rouge_depart = 100;<br />
$vert_depart = 255;<br />
$bleu_depart = 0;<br />
<br />
$rouge_fin = 0;<br />
$vert_fin = 100;<br />
$bleu_fin = 0;<br />
<br />
$lignes = 100; //nb de lignes de l'image<br />
<br />
$vert_diff = $vert_fin - $vert_depart;<br />
$vert1 = $vert_diff / $lignes;<br />
<br />
$bleu_diff = $bleu_fin - $bleu_depart;<br />
$bleu1 = $bleu_diff / $lignes;<br />
<br />
$rouge_diff = $rouge_fin - $rouge_depart;<br />
$rouge1 = $rouge_diff / $lignes;<br />
<br />
while ($lignes_colorees &lt;= 100)<br />
{<br />
&nbsp;&nbsp;&nbsp; $rouge2 = $lignes_colorees * $rouge1;&nbsp; &nbsp; $rouge3 = $rouge_depart + $rouge2;<br />
&nbsp;&nbsp;&nbsp; $rouge = round($rouge3);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $vert2 = $lignes_colorees * $vert1;<br />
&nbsp;&nbsp;&nbsp; $vert3 = $vert_depart + $vert2;<br />
&nbsp;&nbsp;&nbsp; $vert = round($vert2);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $bleu2 = $lignes_colorees * $bleu1;<br />
&nbsp;&nbsp;&nbsp; $bleu3 = $bleu_depart + $bleu2;<br />
&nbsp;&nbsp;&nbsp; $bleu = round($bleu2);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $y1 = $lignes_colorees;<br />
&nbsp;&nbsp;&nbsp; $y2 = $lignes_colorees;<br />
&nbsp;&nbsp;&nbsp; $x1 = 1;&nbsp; &nbsp; $x2 = 200;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $couleur = ImageColorAllocate($image, $rouge, $vert, $bleu);<br />
&nbsp;&nbsp;&nbsp; //dessine la ligne<br />
&nbsp;&nbsp;&nbsp; ImageLine($image, $x1, $y1, $x2, $y2, $couleur);&nbsp; &nbsp; $lignes_colorees ++;<br />
}<br />
<br />
//dessine l'image<br />
ImageJpeg($image);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42390""></a>
  <div class="note">
   <strong class="user">ruturaj_v at yahoo dot com</strong>
   <a href="#42390" class="date">14-May-2004 05:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here is a function that helps you create arrows...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_arrowheads </span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$arrhead</span><span class="keyword">, </span><span class="default">$arrang</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$debug </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">"INFINITE"</span><span class="keyword">, </span><span class="string">'INFINITE'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$x1</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$slope </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$slope </span><span class="keyword">= </span><span class="default">INFINITE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$slope </span><span class="keyword">= -(</span><span class="default">$y2</span><span class="keyword">-</span><span class="default">$y1</span><span class="keyword">)/(</span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$x1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//$slope = number_format($slope, 2, '.','');<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$slope </span><span class="keyword">== </span><span class="string">'INFINITE'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ang </span><span class="keyword">= </span><span class="default">90</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ang </span><span class="keyword">= </span><span class="default">atan </span><span class="keyword">(</span><span class="default">$slope</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ang </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">* </span><span class="default">180</span><span class="keyword">)/</span><span class="default">pi</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//$ang = number_format($ang, 2, '.', '');<br />
&nbsp;&nbsp;&nbsp; //echo ($ang);<br />
&nbsp;&nbsp;&nbsp; //exit;<br />
<br />
&nbsp;&nbsp;&nbsp; //convert the angle<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrang1 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">- </span><span class="default">$arrang</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrangdeg1 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">- </span><span class="default">$arrang</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//echo ($arrang1);exit;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrang1 </span><span class="keyword">= (</span><span class="default">$arrang1</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">())/</span><span class="default">180</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrang2 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">+ </span><span class="default">$arrang</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrangdeg2 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">+ </span><span class="default">$arrang</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrang2 </span><span class="keyword">= (</span><span class="default">$arrang2</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">())/</span><span class="default">180</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//echo ($arrang1);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$arrang1</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ary1 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$arrang1</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$arrang2</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ary2 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$arrang2</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$debug</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"Values of arx1.. before add/sub&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"</span><span class="default">$arx1</span><span class="string">,</span><span class="default">$ary1</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$arx2</span><span class="string">,</span><span class="default">$ary2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ang</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ang </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$ang </span><span class="keyword">&lt; </span><span class="default">90</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ang</span><span class="keyword">==</span><span class="default">90</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ang </span><span class="keyword">&gt; -</span><span class="default">90 </span><span class="keyword">&amp;&amp; </span><span class="default">$ang </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif ((</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$debug</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"Angle of line is ("</span><span class="keyword">.</span><span class="default">$ang</span><span class="keyword">*</span><span class="default">180</span><span class="keyword">/</span><span class="default">pi</span><span class="keyword">().</span><span class="string">")&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"Angle of line1 is </span><span class="default">$arrangdeg1</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"Angle of line2 is </span><span class="default">$arrangdeg2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"</span><span class="default">$arx1</span><span class="string">,</span><span class="default">$ary1</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$x2</span><span class="string">,</span><span class="default">$y2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"</span><span class="default">$arx2</span><span class="string">,</span><span class="default">$ary2</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$x2</span><span class="string">,</span><span class="default">$y2</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; exit;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array_arrows </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'x1' </span><span class="keyword">=&gt;</span><span class="default">$arx1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'y1' </span><span class="keyword">=&gt; </span><span class="default">$ary1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'x2' </span><span class="keyword">=&gt; </span><span class="default">$arx2</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'y2' </span><span class="keyword">=&gt; </span><span class="default">$ary2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array_arrows</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">; </span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">;<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">400</span><span class="keyword">; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br />
</span><span class="default">$arrhead </span><span class="keyword">= </span><span class="default">15</span><span class="keyword">; </span><span class="comment">//10px<br />
</span><span class="default">$arrang </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">; </span><span class="comment">//10 deg<br />
<br />
</span><span class="default">$ar_arrws </span><span class="keyword">= </span><span class="default">get_arrowheads </span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$arrhead</span><span class="keyword">, </span><span class="default">$arrang</span><span class="keyword">);<br />
<br />
</span><span class="default">$im&nbsp; </span><span class="keyword">= </span><span class="default">imagecreate </span><span class="keyword">(</span><span class="default">400</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">); <br />
</span><span class="default">$w&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">); <br />
</span><span class="default">$red </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); <br />
<br />
</span><span class="comment">//creates the base line<br />
</span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$green</span><span class="keyword">);<br />
</span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$red</span><span class="keyword">);<br />
</span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'x1'</span><span class="keyword">], </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'y1'</span><span class="keyword">], </span><span class="default">$green</span><span class="keyword">);<br />
</span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'x2'</span><span class="keyword">], </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'y2'</span><span class="keyword">], </span><span class="default">$green</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41550""></a>
  <div class="note">
   <strong class="user">yl at sota dot ch</strong>
   <a href="#41550" class="date">14-Apr-2004 06:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple function to create border for jpg-images:<br />
<br />
function createImageBorder($imgName){<br />
<br />
&nbsp;&nbsp; &nbsp; $img&nbsp; &nbsp;&nbsp; =&nbsp; substr($imgName, 0, -4); // remove fileExtension<br />
&nbsp;&nbsp; &nbsp; $ext&nbsp; &nbsp;&nbsp; = ".jpg";<br />
&nbsp;&nbsp; &nbsp; $quality = 95;<br />
&nbsp;&nbsp; &nbsp; $borderColor = 255;&nbsp; // 255 = white<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; b<br />
&nbsp;&nbsp; &nbsp; +-------------------------+<br />
&nbsp;&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMAGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; +-------------------------+<br />
&nbsp;&nbsp; &nbsp; c&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; d&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $scr_img = imagecreatefromjpeg($img.$ext);<br />
&nbsp;&nbsp;&nbsp; $width&nbsp;&nbsp; = imagesx($scr_img);<br />
&nbsp;&nbsp;&nbsp; $height&nbsp; = imagesy($scr_img);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // line a - b<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $abX&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $abY&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $abX1 = $width;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $abY1 = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // line a - c<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $acX&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $acY&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $acX1 = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $acY1 = $height;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // line b - d<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $bdX&nbsp; = $width-1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $bdY&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $bdX1 = $width-1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $bdY1 = $height;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // line c - d<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $cdX&nbsp; = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $cdY&nbsp; = $height-1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $cdX1 = $width;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $cdY1 = $height-1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; // DRAW LINES&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imageline($scr_img,$abX,$abY,$abX1,$abY1,$borderColor);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imageline($scr_img,$acX,$acY,$acX1,$acY1,$borderColor);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imageline($scr_img,$bdX,$bdY,$bdX1,$bdY1,$borderColor);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imageline($scr_img,$cdX,$cdY,$cdX1,$cdY1,$borderColor);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; // create copy from image&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imagejpeg($scr_img, $img."_border.jpg", $quality);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; imagedestroy($scr_img); <br />
&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; createImageBorder("myfile.jpg");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39895""></a>
  <div class="note">
   <strong class="user">XxXoldsaltXxX at hotmail dot com</strong>
   <a href="#39895" class="date">14-Feb-2004 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Script to draw a grid of lines, which make the entire side of the picture look like a quarter circle.. very cool :)<br />
<span class="default">&lt;?php<br />
$img_disp </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">1000</span><span class="keyword">,</span><span class="default">1000</span><span class="keyword">);<br />
</span><span class="default">$backcolor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$backcolor</span><span class="keyword">);<br />
</span><span class="default">$textcolor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">1000</span><span class="keyword">;<br />
for(;;){<br />
</span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">20</span><span class="keyword">;<br />
</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$x2</span><span class="keyword">,</span><span class="default">$y2</span><span class="keyword">,</span><span class="default">$textcolor</span><span class="keyword">);<br />
if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">1000</span><span class="keyword">){<br />
break;<br />
}<br />
}<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">); </span><span class="comment">// Draw the image<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">); </span><span class="comment">// Delete the image from the server's memory<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38742""></a>
  <div class="note">
   <strong class="user">mueller at inf dot ufsc dot br</strong>
   <a href="#38742" class="date">05-Jan-2004 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
an algorithm to draw a bezier spline<br />
<br />
<span class="default">&lt;?php<br />
<br />
$segmentos </span><span class="keyword">=</span><span class="default">30</span><span class="keyword">;<br />
</span><span class="default">$x</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">80</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">);<br />
</span><span class="default">$y</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">40</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">);<br />
<br />
function </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">,</span><span class="default">$steps</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">$steps</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$t </span><span class="keyword">* </span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fd </span><span class="keyword">= </span><span class="default">3 </span><span class="keyword">* (</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) * </span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdd_per_2</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">*(</span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-</span><span class="default">2</span><span class="keyword">*</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$p</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])*</span><span class="default">$temp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fddd_per_2</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">*(</span><span class="default">3</span><span class="keyword">*(</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$p</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])+</span><span class="default">$p</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]-</span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])*</span><span class="default">$temp</span><span class="keyword">*</span><span class="default">$t</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fddd </span><span class="keyword">= </span><span class="default">$fddd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fdd </span><span class="keyword">= </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fdd_per_2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fddd_per_6 </span><span class="keyword">= </span><span class="default">$fddd_per_2 </span><span class="keyword">* (</span><span class="default">1.0 </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$loop</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$loop</span><span class="keyword">&lt;</span><span class="default">$steps</span><span class="keyword">; </span><span class="default">$loop</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">,</span><span class="default">$f</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">$f </span><span class="keyword">+ </span><span class="default">$fd </span><span class="keyword">+ </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_6</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fd </span><span class="keyword">= </span><span class="default">$fd </span><span class="keyword">+ </span><span class="default">$fdd </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fdd </span><span class="keyword">= </span><span class="default">$fdd </span><span class="keyword">+ </span><span class="default">$fddd</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fdd_per_2 </span><span class="keyword">= </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$by </span><span class="keyword">= </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$segmentos</span><span class="keyword">);<br />
</span><span class="default">$bx </span><span class="keyword">= </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$segmentos</span><span class="keyword">);<br />
</span><span class="default">header </span><span class="keyword">(</span><span class="string">"Content-type: image/jpeg"</span><span class="keyword">);<br />
</span><span class="default">$tam </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">;<br />
</span><span class="default">$im </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$tam</span><span class="keyword">,</span><span class="default">$tam</span><span class="keyword">);<br />
</span><span class="default">$background_color </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">);<br />
</span><span class="default">$tc </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">233</span><span class="keyword">, </span><span class="default">14</span><span class="keyword">, </span><span class="default">91</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$segmentos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">,</span><span class="default">$bx</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$tam</span><span class="keyword">-</span><span class="default">$by</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$bx</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$tam</span><span class="keyword">-</span><span class="default">$by</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$tc</span><span class="keyword">);<br />
</span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">); <br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36667""></a>
  <div class="note">
   <strong class="user">code_couturier at graffiti dot net</strong>
   <a href="#36667" class="date">18-Oct-2003 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
# antialiased draw_line function 1.1 (faster) <br />
<br />
# here is a drawLine() posted by nanobot at chipx86 dot com <br />
# on php.net and enhanced/optimized by myself :) <br />
<br />
# here are some changes i made: <br />
# 1. changed for true-color images (no index_var used) <br />
# 2. changed rgb extraction to logical shift <br />
# 3. reducing function call's<br />
<br />
function drawQSLine ($image,$x1,$y1,$x2,$y2,$r,$g,$b) {<br />
$icr=$r;<br />
$icg=$g;<br />
$icb=$b;<br />
&nbsp;$dcol = ImageColorAllocate ($image,$icr,$icg,$icb);<br />
&nbsp;if ($y1 == $y2) imageline ($image,$x1,$y1,$x2,$y1,$dcol);<br />
&nbsp;else if ($x1 == $x2) {&nbsp; <br />
&nbsp;&nbsp; imageline ($image,$x1,$y1,$x1,$y2,$dcol); <br />
&nbsp;} else {<br />
&nbsp;$m = ($y2 - $y1) / ($x2 - $x1);<br />
&nbsp;$b = $y1 - $m * $x1;<br />
<br />
&nbsp;if (abs ($m) &lt;2) {<br />
<br />
&nbsp;$x = min ($x1,$x2);<br />
&nbsp;$endx = max ($x1,$x2)+1;<br />
<br />
&nbsp;while ($x &lt; $endx) {<br />
&nbsp;$y=$m * $x + $b;<br />
&nbsp;$y == floor ($y) ? $ya = 1 : $ya = $y - floor ($y);<br />
&nbsp;$yb = ceil ($y) - $y;<br />
&nbsp;<br />
&nbsp;$trgb = ImageColorAt($image,$x,floor($y));<br />
&nbsp;$tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br />
&nbsp;$tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br />
&nbsp;$tcb = $trgb &amp; 0xFF;<br />
&nbsp;imagesetpixel ($image,$x,floor ($y),imagecolorallocate ($image,($tcr * $ya + $icr * $yb),<br />
($tcg * $ya + $icg * $yb),<br />
($tcb * $ya + $icb * $yb)));<br />
<br />
&nbsp;$trgb = ImageColorAt($image,$x,ceil($y));<br />
&nbsp;$tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br />
&nbsp;$tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br />
&nbsp;$tcb = $trgb &amp; 0xFF;<br />
&nbsp;imagesetpixel ($image,$x,ceil ($y),imagecolorallocate ($image,($tcr * $yb + $icr * $ya),<br />
($tcg * $yb + $icg * $ya), <br />
($tcb * $yb + $icb * $ya)));<br />
<br />
&nbsp;$x ++;<br />
&nbsp;} # while_x_end<br />
&nbsp;} # if_end<br />
&nbsp;else { # else_abs_end<br />
<br />
&nbsp;$y = min ($y1,$y2);<br />
&nbsp;$endy = max ($y1,$y2)+1;<br />
<br />
&nbsp;while ($y &lt; $endy) {<br />
&nbsp;$x=($y - $b) / $m;<br />
&nbsp;$x == floor ($x) ? $xa = 1 : $xa = $x - floor ($x);<br />
&nbsp;$xb = ceil ($x) - $x;<br />
<br />
&nbsp;$trgb = ImageColorAt($image,floor($x),$y);<br />
&nbsp;$tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br />
&nbsp;$tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br />
&nbsp;$tcb = $trgb &amp; 0xFF;<br />
&nbsp;imagesetpixel ($image,floor ($x),$y,imagecolorallocate ($image,($tcr * $xa + $icr * $xb),<br />
($tcg * $xa + $icg * $xb),<br />
($tcb * $xa + $icb * $xb)));<br />
<br />
&nbsp;$trgb = ImageColorAt($image,ceil($x),$y);<br />
&nbsp;$tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br />
&nbsp;$tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br />
&nbsp;$tcb = $trgb &amp; 0xFF;<br />
&nbsp;imagesetpixel ($image,ceil ($x),$y,imagecolorallocate ($image, ($tcr * $xb + $icr * $xa),<br />
($tcg * $xb + $icg * $xa),<br />
($tcb * $xb + $icb * $xa)));<br />
<br />
&nbsp;$y ++;<br />
&nbsp;}# while_y_end<br />
&nbsp;}# else_abs_end<br />
&nbsp;}# else_y=y_x=x_end <br />
}# drawOSLine_end</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36236""></a>
  <div class="note">
   <strong class="user">code_couturier at graffiti dot net</strong>
   <a href="#36236" class="date">02-Oct-2003 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
# antialiased lines with true-type-fonts !?
<br />
# yip, it works - not very good - but faster
<br />
# (below 3 sec) than other routines (~7 sec)
<br />
# i saw here.
<br />

<br />
# the antialiased effect is minimal and only 
<br />
# at the top of the line - but, as better as
<br />
# nothing ;)
<br />

<br />
# here is a drawLine routine from Logan Gunthorpe 
<br />
# (logang at deltatee dot com) posted by nanobot at chipx86 dot com
<br />
# on php.net and enhanced/optimized by myself :)
<br />

<br />
function drawSoftLine ($image, $x1, $y1, $x2, $y2, $r,$g,$b) {
<br />

<br />
$fontfile="arial.ttf"; # the font for the dot
<br />
$str="?" ; # the point_char for the dot
<br />
$size=12; # the point for the dot_size
<br />

<br />
&nbsp;$color = ImageColorAllocate ($image, $r,$g,$b);
<br />

<br />
&nbsp;if ($x2 == $x1) {
<br />
&nbsp;$tmp = $x1; $x1 = $y1; $y1 = $tmp;
<br />
&nbsp;$tmp = $x2; $x2 = $y2; $y2 = $tmp;
<br />
&nbsp;$swapx = true;
<br />
&nbsp;}
<br />

<br />
&nbsp;$m = (float)(( $y2 - $y1 ) / ( $x2 - $x1 ));
<br />
&nbsp;$b = (float)($y1 - $m*$x1);
<br />

<br />
&nbsp;$strx = min ( $x1 , $x2 );
<br />
&nbsp;$endx = max ( $x1 , $x2 );
<br />
&nbsp;$x=(int)0;
<br />

<br />
# the original loop was based on one for_loop
<br />
# with the if_swap inside. to speed up this loop
<br />
# i double it, to keep off the permanent if_call's. 
<br />

<br />
if (!$swapx) {
<br />
&nbsp;for ($x = $strx; $x &lt;= $endx; $x++) { 
<br />
&nbsp;&nbsp; $y = (int)($m*$x + $b);&nbsp; 
<br />
&nbsp;&nbsp; imagettftext($image, $size, 0, $x, $y, 
<br />
&nbsp;&nbsp; $color, $fontfile,$str);
<br />
&nbsp;}
<br />
} else {
<br />
&nbsp;for ($x = $strx; $x &lt;= $endx; $x++) { 
<br />
&nbsp;&nbsp; $y = (int)($m*$x + $b);&nbsp; 
<br />
&nbsp;&nbsp; imagettftext($image, $size, 0, $y, $x, 
<br />
&nbsp;&nbsp; $color, $fontfile,$str);
<br />
&nbsp; }
<br />
}
<br />

<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33122""></a>
  <div class="note">
   <strong class="user">nanobot at chipx86 dot com</strong>
   <a href="#33122" class="date">17-Jun-2003 02:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function for making antialiased lines:<br />
<br />
&nbsp;function imagesmoothline ( $image , $x1 , $y1 , $x2 , $y2 , $color )<br />
&nbsp;{<br />
&nbsp; $colors = imagecolorsforindex ( $image , $color );<br />
&nbsp; if ( $x1 == $x2 )<br />
&nbsp; {<br />
&nbsp;&nbsp; imageline ( $image , $x1 , $y1 , $x2 , $y2 , $color ); // Vertical line<br />
&nbsp; }<br />
&nbsp; else<br />
&nbsp; {<br />
&nbsp;&nbsp; $m = ( $y2 - $y1 ) / ( $x2 - $x1 );<br />
&nbsp;&nbsp; $b = $y1 - $m * $x1;<br />
&nbsp;&nbsp; if ( abs ( $m ) &lt;= 1 )<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $x = min ( $x1 , $x2 );<br />
&nbsp;&nbsp;&nbsp; $endx = max ( $x1 , $x2 );<br />
&nbsp;&nbsp;&nbsp; while ( $x &lt;= $endx )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; $y = $m * $x + $b;<br />
&nbsp;&nbsp; &nbsp; $y == floor ( $y ) ? $ya = 1 : $ya = $y - floor ( $y );<br />
&nbsp;&nbsp; &nbsp; $yb = ceil ( $y ) - $y;<br />
&nbsp;&nbsp; &nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , $x , floor ( $y ) ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors['red'] = $tempcolors['red'] * $ya + $colors['red'] * $yb;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['green'] = $tempcolors['green'] * $ya + $colors['green'] * $yb;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $ya + $colors['blue'] * $yb;<br />
&nbsp;&nbsp; &nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br />
&nbsp;&nbsp; &nbsp; imagesetpixel ( $image , $x , floor ( $y ) , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , $x , ceil ( $y ) ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors['red'] = $tempcolors['red'] * $yb + $colors['red'] * $ya;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $tempcolors['green'] = $tempcolors['green'] * $yb + $colors['green'] * $ya;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $yb + $colors['blue'] * $ya;<br />
&nbsp;&nbsp; &nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br />
&nbsp;&nbsp; &nbsp; imagesetpixel ( $image , $x , ceil ( $y ) , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br />
&nbsp;&nbsp; &nbsp; $x ++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; else<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $y = min ( $y1 , $y2 );<br />
&nbsp;&nbsp;&nbsp; $endy = max ( $y1 , $y2 );<br />
&nbsp;&nbsp;&nbsp; while ( $y &lt;= $endy )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; $x = ( $y - $b ) / $m;<br />
&nbsp;&nbsp; &nbsp; $x == floor ( $x ) ? $xa = 1 : $xa = $x - floor ( $x );<br />
&nbsp;&nbsp; &nbsp; $xb = ceil ( $x ) - $x;<br />
&nbsp;&nbsp; &nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , floor ( $x ) , $y ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors['red'] = $tempcolors['red'] * $xa + $colors['red'] * $xb;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['green'] = $tempcolors['green'] * $xa + $colors['green'] * $xb;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $xa + $colors['blue'] * $xb;<br />
&nbsp;&nbsp; &nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br />
&nbsp;&nbsp; &nbsp; imagesetpixel ( $image , floor ( $x ) , $y , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , ceil ( $x ) , $y ) );<br />
&nbsp;&nbsp; &nbsp; $tempcolors['red'] = $tempcolors['red'] * $xb + $colors['red'] * $xa;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['green'] = $tempcolors['green'] * $xb + $colors['green'] * $xa;<br />
&nbsp;&nbsp; &nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $xb + $colors['blue'] * $xa;<br />
&nbsp;&nbsp; &nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br />
&nbsp;&nbsp; &nbsp; imagesetpixel ( $image , ceil ( $x ) , $y , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br />
&nbsp;&nbsp; &nbsp; $y ++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp;}<br />
<br />
EDITOR: My previous code contained bugs. Please use this one instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19403""></a>
  <div class="note">
   <strong class="user">kramesch_NOSPAM_ at _nospam_idsolutions dot at</strong>
   <a href="#19403" class="date">26-Feb-2002 10:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple code to draw a line with an arbitrary stroke. The parameter aStroke is treated as a cyclic boolean array where true equals "set a point"<br />
e.g. $aDotStroke = array(true,false);<br />
<br />
function ImageStrokeLine($im,$x1,$y1,$x2,$y2,$farbe, $aStroke)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $deltax = abs($x2 - $x1);&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; $deltay = abs($y2 - $y1);&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; $x = $x1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $y = $y1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($x2 &gt;= $x1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc1 = 1;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc2 = 1;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc1 = -1;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc2 = -1;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($y2 &gt;= $y1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc1 = 1;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc2 = 1;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc1 = -1;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc2 = -1;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($deltax &gt;= $deltay)&nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc1 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc2 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $den = $deltax;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $num = $deltax / 2;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $numadd = $deltay;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $numpixels = $deltax; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $xinc2 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $yinc1 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $den = $deltay;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $num = $deltay / 2;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $numadd = $deltax;<br />
&nbsp;&nbsp; &nbsp;&nbsp; $numpixels = $deltay; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for ($curpixel = 0; $curpixel &lt;= $numpixels; $curpixel++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($iStrokeCount &gt;= count($aStroke))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $iStrokeCount = 0;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($aStroke[$iStrokeCount++]) <br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ImageSetPixel($im,$x, $y,$farbe);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $num += $numadd;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($num &gt;= $den)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $num -= $den;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $x += $xinc1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $y += $yinc1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; $x += $xinc2;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $y += $yinc2;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="9345""></a>
  <div class="note">
   <strong class="user">darren at php4hosting dot com</strong>
   <a href="#9345" class="date">28-Oct-2000 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It does work (With a bit of editing)
<br />
save the following as graph.php (You dont need any directorys)
<br />

<br />
<span class="default">&lt;?php 
<br />
Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);
<br />
</span><span class="default">$picWidth</span><span class="keyword">=</span><span class="default">360</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">; 
<br />
</span><span class="default">$picHeight</span><span class="keyword">=</span><span class="default">200</span><span class="keyword">; 
<br />
</span><span class="default">$pic</span><span class="keyword">=</span><span class="default">ImageCreate</span><span class="keyword">(</span><span class="default">$picWidth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">); 
<br />
</span><span class="default">$cWhite</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">); 
<br />
</span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picWidth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$cWhite</span><span class="keyword">); 
<br />
</span><span class="default">$cRed</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">); 
<br />
</span><span class="default">$cBlue</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">); 
<br />
</span><span class="default">$curX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; 
<br />
</span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$picHeight</span><span class="keyword">; 
<br />
for(</span><span class="default">$pt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">&lt;</span><span class="default">$picWidth</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">++){ 
<br />
</span><span class="default">$newX</span><span class="keyword">=</span><span class="default">$curX</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; 
<br />
</span><span class="default">$newY</span><span class="keyword">=(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)+(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$newX</span><span class="keyword">))*(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)); 
<br />
</span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">$curX</span><span class="keyword">,</span><span class="default">$curY</span><span class="keyword">,</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">,</span><span class="default">$cRed</span><span class="keyword">); 
<br />
</span><span class="default">$curX</span><span class="keyword">=</span><span class="default">$newX</span><span class="keyword">; 
<br />
</span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$newY</span><span class="keyword">; 
<br />
} 
<br />
</span><span class="default">$curX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; 
<br />
</span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">; 
<br />
for(</span><span class="default">$pt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">&lt;</span><span class="default">$picWidth</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">++){ 
<br />
</span><span class="default">$newX</span><span class="keyword">=</span><span class="default">$curX</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; 
<br />
</span><span class="default">$newY</span><span class="keyword">=(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)+(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$newX</span><span class="keyword">))*(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)); 
<br />
</span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">$curX</span><span class="keyword">,</span><span class="default">$curY</span><span class="keyword">,</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">,</span><span class="default">$cBlue</span><span class="keyword">); 
<br />
</span><span class="default">$curX</span><span class="keyword">=</span><span class="default">$newX</span><span class="keyword">; 
<br />
</span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$newY</span><span class="keyword">; 
<br />
} 
<br />
</span><span class="default">$cBlack</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">); 
<br />
</span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">,</span><span class="default">$cBlack</span><span class="keyword">); 
<br />
</span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$picWidth</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$cBlack</span><span class="keyword">); 
<br />
</span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">); 
<br />
</span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">); 
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
