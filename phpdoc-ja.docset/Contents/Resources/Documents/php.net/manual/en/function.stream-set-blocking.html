<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ストリームのブロックモードを有効にする / 解除する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.stream-select.html">≪ stream_select</a></li>
      <li style="float: right;"><a href="function.stream-set-chunk-size.html">stream_set_chunk_size ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.stream.html">ストリーム 関数</a></li>
    <li>ストリームのブロックモードを有効にする / 解除する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.stream-set-blocking" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">stream_set_blocking</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">stream_set_blocking</span> &mdash; <span class="dc-title">ストリームのブロックモードを有効にする / 解除する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.stream-set-blocking-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>stream_set_blocking</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$stream</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code></span>
   )</div>

  <p class="para rdfs-comment">
   <code class="parameter">stream</code> のモードをブロックあるいは非ブロックに設定します。
  </p>
  <p class="para">
   この関数は、非ブロックモードをサポートするすべてのストリーム
   (現在は、通常のファイルストリームとソケットストリームのみ)
   において利用可能です。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.stream-set-blocking-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">stream</code></dt>

     <dd>

      <p class="para">
       ストリーム。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">mode</code> が 0 の時、ストリームは
       非ブロックモードに切り替えられ、1 の場合は、
       ブロックモードに切り替えられます。このモードの違いは、
       <span class="function"><a href="function.fgets.html" class="function">fgets()</a></span> や <span class="function"><a href="function.fread.html" class="function">fread()</a></span>
       といった、ストリームからデータを読む関数に影響します。
       非ブロックモードにおいては <span class="function"><a href="function.fgets.html" class="function">fgets()</a></span> を呼び出すと
       どんな場合でもただちに呼び出し元に戻りますが、ブロックモードの場合では、
       ストリームがデータを読み出せる状態になるまで待ちつづけます。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.stream-set-blocking-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.stream-set-blocking-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    この関数は以前は
    <span class="function"><a href="function.set-socket-blocking.html" class="function">set_socket_blocking()</a></span> という名前で後に
    <span class="function"><a href="function.socket-set-blocking.html" class="function">socket_set_blocking()</a></span> に変わりましたが、
    この使用法は廃止されました。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.stream-set-blocking-seealso">
  <h3 class="title">参考</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="function.stream-select.html" class="function" rel="rdfs-seeAlso">stream_select()</a> - select() システムコールと同等の操作を、
   ストリームの配列に対して tv_sec と tv_usec で指定されたタイムアウト時間をもって行う</span></li>
  </ul>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="110997""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#110997" class="date">04-Jan-2013 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On Windows this function does not work with pipes opened with proc_open (https://bugs.php.net/bug.php?id=47918, https://bugs.php.net/bug.php?id=34972, https://bugs.php.net/bug.php?id=51800)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69505""></a>
  <div class="note">
   <strong class="user">MagicalTux at ookoo dot org</strong>
   <a href="#69505" class="date">08-Sep-2006 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you use fwrite() on a non-blocking stream, data isn't discarded silently as t dot starling said.<br />
<br />
Remember that fwrite() returns an int, and this int represents the amount of data really written to the stream. So, if you see that fwrite() returns less than the amount of written data, it means you'll have to call fwrite() again in the future to write the remaining amount of data.<br />
<br />
You can use stream_select() to wait for the stream to be available for writing, then continue writing data to the stream.<br />
<br />
Non-blocking streams are useful as you can have more than one non-blocking stream, and wait for them to be available for writing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
