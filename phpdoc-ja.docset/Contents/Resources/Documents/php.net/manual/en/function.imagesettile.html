<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>塗りつぶし用のイメージを設定する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.imagesetthickness.html">≪ imagesetthickness</a></li>
      <li style="float: right;"><a href="function.imagestring.html">imagestring ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.image.html">GD および Image 関数</a></li>
    <li>塗りつぶし用のイメージを設定する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.imagesettile" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imagesettile</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5)</p><p class="refpurpose"><span class="refname">imagesettile</span> &mdash; <span class="dc-title">塗りつぶし用のイメージを設定する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imagesettile-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>imagesettile</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$image</code></span>
   , <span class="methodparam"><span class="type">resource</span> <code class="parameter">$tile</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>imagesettile()</strong></span> は、特別な色
   <strong><code>IMG_COLOR_TILED</code></strong> を指定して塗りつぶされた場合に、
   (<span class="function"><a href="function.imagefill.html" class="function">imagefill()</a></span> や
   <span class="function"><a href="function.imagefilledpolygon.html" class="function">imagefilledpolygon()</a></span> のような)
   領域塗りつぶし関数で使用されるタイルイメージを設定します。
  </p>
  <p class="para">
   タイルは、領域を塗りつぶすために繰り返し使用されるイメージです。
   全ての GD イメージをタイルとして使用可能で、
   <span class="function"><a href="function.imagecolortransparent.html" class="function">imagecolortransparent()</a></span> でタイルの透過色 ID
   を設定することにより、
   その一部から下の部分が透けて見えるようなタイルを作成することが可能です。
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    タイルの使用が終った際には、特別な処理は不要ですが、
    タイルイメージを破棄する場合には、新たにタイルイメージを設定するまでは、色
    <strong><code>IMG_COLOR_TILED</code></strong> を使用してはいけません。
   </p>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imagesettile-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>
<code class="parameter">
image</code></dt>
<dd>
<p class="para"><span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>
のような画像作成関数が返す画像リソース。</p></dd>

    
     <dt>
<code class="parameter">tile</code></dt>

     <dd>

      <p class="para">
       タイルとして使用する画像リソース。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imagesettile-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imagesettile-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-3371">
    <p><strong>例1 <span class="function"><strong>imagesettile()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;外部の画像を読み込みます<br /></span><span style="color: #0000BB">$zend&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreatefromgif</span><span style="color: #007700">(</span><span style="color: #DD0000">'./zend.gif'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;200x200&nbsp;の画像を作成します<br /></span><span style="color: #0000BB">$im&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000BB">200</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">200</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;タイルを設定します<br /></span><span style="color: #0000BB">imagesettile</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$zend</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;画像の繰り返しを設定します<br /></span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">199</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">199</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">IMG_COLOR_TILED</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;画像をブラウザに出力します<br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type:&nbsp;image/png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">imagepng</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$im</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000BB">$zend</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
    <div class="mediaobject">
     
     <div class="imageobject">
      <img src="images/21009b70229598c6a80eef8b45bf282b-imagesettile.png" alt="出力例 : imagesettile()" width="200" height="200" />
     </div>
    </div>
   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="58539""></a>
  <div class="note">
   <strong class="user">onion at ooer dot com</strong>
   <a href="#58539" class="date">07-Nov-2005 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using a tile image that has some form of transparency you'll need to make sure your destination image is set to use alpha blending. By default it will be, but if for any reason you've changed it you'll need to do:<br />
<br />
imagealphablending($image,true);<br />
<br />
before any operation using IMG_COLOR_TILED.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42855""></a>
  <div class="note">
   <strong class="user">aquilo at xtram dot net</strong>
   <a href="#42855" class="date">01-Jun-2004 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is very little information about this function so I thought I'd add a few notes I found while trying to get this <br />
<br />
working.<br />
<br />
First make sure your version of PHP is above 4.3.2 I spent an hour searching goggles 13000+ mirrors of this same page and <br />
<br />
finally found the info I needed at AltaVista, there is a bug in PHP 4.3.2 that makes this none functional.<br />
<br />
if your creating the base image you need to create it with imageCreateTrueColor() if your using a PNG with transparency, I <br />
<br />
found even nullifying the PNG's transparency with GD doesn't work. the tiling PNG has to be created without transparency to work with imageCreate(). but from what I've seen imageCreateFromXXX() can use transparent and nonetransparent PNG's.<br />
<br />
here is an example.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $diagramWidth </span><span class="keyword">= </span><span class="default">300</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diagramHeight </span><span class="keyword">= </span><span class="default">50</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="default">imageCreateTrueColor </span><span class="keyword">(</span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$imagebg </span><span class="keyword">= </span><span class="default">imageCreateFromPNG </span><span class="keyword">(</span><span class="string">'tile.png'</span><span class="keyword">); </span><span class="comment">// transparent PNG<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageSetTile </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$imagebg</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageFilledRectangle </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$diagramWidth</span><span class="keyword">, </span><span class="default">$diagramHeight</span><span class="keyword">, </span><span class="default">IMG_COLOR_TILED</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor1 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$textcolor2 </span><span class="keyword">= </span><span class="default">imageColorAllocate </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imageString </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">,&nbsp; </span><span class="default">9</span><span class="keyword">, </span><span class="default">19</span><span class="keyword">, </span><span class="string">'Transparent PNG Tile Test...'</span><span class="keyword">, </span><span class="default">$textcolor2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagePNG </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">imagedestroy </span><span class="keyword">(</span><span class="default">$imagebg</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
hope this helps someone else!<br />
Aquilo</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
