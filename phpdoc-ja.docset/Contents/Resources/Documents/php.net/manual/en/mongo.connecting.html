<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>接続</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongo.sqltomongo.html">≪ SQL から Mongo への対応表</a></li>
      <li style="float: right;"><a href="mongo.connecting.ssl.html">SSL での接続 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mongo.manual.html">マニュアル</a></li>
    <li>接続</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongo.connecting" class="chapter">
 <h1>接続</h1>
<h2>目次</h2><ul class="chunklist chunklist_chapter"><li><a href="mongo.connecting.ssl.html">SSL での接続</a></li><li><a href="mongo.connecting.auth.html">認証</a></li><li><a href="mongo.connecting.rs.html">レプリカセット</a></li><li><a href="mongo.connecting.mongos.html">シャーディング</a></li><li><a href="mongo.connecting.uds.html">ドメインソケットのサポート</a></li><li><a href="mongo.connecting.pools.html">接続プーリング (バージョン 1.2.0-1.2.12 限定)</a></li><li><a href="mongo.connecting.persistent.html">持続的接続 (バージョン 1.1.4 まで限定)</a></li></ul>


 <p class="para">
  MongoDB への接続は単に <em>new Mongo</em> とするだけの簡単なものですが、
  オプションや設定項目が多数あります。
  <span class="function"><strong>MongoClient::__construct()</strong></span> のページにすべての API
  オプションをまとめましたが、ここではより実用的な使用例とアドバイスをとりあげます。
 </p>

 

 

 

 

 

 

 

</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111102""></a>
  <div class="note">
   <strong class="user">daveg at smartbombinteractive dot com</strong>
   <a href="#111102" class="date">15-Jan-2013 02:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was getting "couldn't determine master" when trying to connect to a replica set.&nbsp; It turns out there was a typo in my /etc/hosts entry for on of the replica set members.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110728""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#110728" class="date">29-Nov-2012 02:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The whole part of persistent connections is outdated. In version 1.3.0:<br />
<br />
≪Removed the "persist" option, as all connections are now persistent. It can still be used, but it doesn't affect anything.≫<br />
<br />
As a matter of fact, this note is also wrong. Using option "persist" will throw an<br />
<br />
Uncaught exception 'MongoConnectionException' with message '- Found unknown connection string option 'persist' with value 'x'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109462""></a>
  <div class="note">
   <strong class="user">james at dunmore dot me dot uk</strong>
   <a href="#109462" class="date">19-Jul-2012 08:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We've got a strange gotcha (it maybe a bug with the mongo driver and we will raise an appropriate bug with them), but I think this is worth noting here.....
<br />

<br />
We were connecting to a replica set, but always getting "couldn't determine master" being returned. Connecting to individual notes without replicaset being set worked fine (directly to the master, or slave okay for reads). Replicaset working fine, and all setup okay.
<br />

<br />
The issue was our network setup, despite being able to resolve dbname-X.domain.com the server names were returning as dbname-X without the domain. 
<br />

<br />
Pinging dbname-X worked, but for some reason the driver isn't resolving it. Adding the entry to hosts fixed this though.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
