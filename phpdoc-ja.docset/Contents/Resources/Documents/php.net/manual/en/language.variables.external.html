<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>外部から来る変数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="language.variables.variable.html">≪ 可変変数</a></li>
      <li style="float: right;"><a href="language.constants.html">定数 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.variables.html">変数</a></li>
    <li>外部から来る変数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="language.variables.external" class="sect1">
   <h2 class="title">外部から来る変数</h2>
   
   <div class="sect2" id="language.variables.external.form">
    <h3 class="title">HTML フォーム (GET と POST)</h3>
    
    <p class="simpara">
     フォームが PHP スクリプトに投稿された時、フォームから渡された全て
     の変数は PHP により自動的にスクリプトから使用可能となります。
     この情報にアクセスする手段は複数あります。例を以下に示します。
    </p>

    <p class="para">
     <div class="example" id="example-121">
      <p><strong>例1 簡単なHTMLフォーム</strong></p>
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;form action=&quot;foo.php&quot; method=&quot;post&quot;&gt;
    Name:  &lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;&lt;br /&gt;
    Email: &lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Submit me!&quot; /&gt;
&lt;/form&gt;</pre>
</div>
      </div>

     </div>
    </p>

    <p class="para">
     PHP 5.4.0 以降、HTML フォームからデータにアクセスする方法は二種類だけとなります。
     現在使える方法を、以下にまとめます。
    </p>

    <p class="para">
     <div class="example" id="example-122">
      <p><strong>例2 簡単なPOST HTMLフォームからのデータにアクセスする</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php&nbsp;<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br />echo&nbsp;</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="para">
     古いバージョンの PHP では、これら以外にもユーザーの入力にアクセスする方法がありました。 
     それを以下にまとめます。詳細は、最後の変更履歴を参照ください。
     <div class="example" id="example-123">
      <p><strong>例3 ユーザーの入力にアクセスするための古い方法</strong></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;注意：これらの方法は、現在はサポートされていません。<br />//&nbsp;現在使えるのは、先ほどの方法だけです。<br /><br />//&nbsp;import_request_variables()&nbsp;を使う方法：この関数は&nbsp;PHP&nbsp;5.4.0&nbsp;で削除されました<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">import_request_variables</span><span style="color: #007700">(</span><span style="color: #DD0000">'p'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p_'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$p_username</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;長い形式の定義済み変数を使う方法：この変数は&nbsp;PHP&nbsp;5.4.0&nbsp;で削除されました<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$HTTP_POST_VARS</span><span style="color: #007700">[</span><span style="color: #DD0000">'username'</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;register_globals&nbsp;を使う方法：この機能は&nbsp;PHP&nbsp;5.4.0&nbsp;で削除されました<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$username</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>

    <p class="para">
     GETフォームを使用した場合も同じですが、かわりに適当な定義済みの
     GET変数を使用するところが異なります。
     GETは、<em>QUERY_STRING</em> (URLの&#039;?&#039;の後の情報)にも代入されます。
     例えば、
     <em>http://www.example.com/test.php?id=3</em>には、
     <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET['id']</a></var></var>によりアクセス可能なGETデータ
     が含まれます。
     <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var> も参照ください。
    </p>

    <blockquote class="note"><p><strong class="note">注意</strong>: 
     <p class="para">
      変数名のドットやスペースはアンダースコアに変換されます。
      たとえば <em>&lt;input name=&quot;a.b&quot; /&gt;</em> は
      <em>$_REQUEST[&quot;a_b&quot;]</em> となります。
     </p>
    </p></blockquote>

    <p class="simpara">
     PHPではフォーム変数のコンテキスト内で配列が使用可能です(<a href="faq.html.html" class="link">FAQの関連箇所</a>も参照してください)。
     例えば、関連する変数をグループ化したり、select inputで複数の値を
     取得するといったことが可能です。フォームを同じスクリプトに投稿し、
     投稿したデータを表示する例を示します。
    </p>

    <p class="para">
     <div class="example" id="example-124">
      <p><strong>例4 より複雑なフォーム変数</strong></p>
      <div class="example-contents">
<div class="cdata"><pre>
&lt;?php
if ($_POST) {
    echo &#039;&lt;pre&gt;&#039;;
    echo htmlspecialchars(print_r($_POST, true));
    echo &#039;&lt;/pre&gt;&#039;;
}
?&gt;
&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;
    Name:  &lt;input type=&quot;text&quot; name=&quot;personal[name]&quot; /&gt;&lt;br /&gt;
    Email: &lt;input type=&quot;text&quot; name=&quot;personal[email]&quot; /&gt;&lt;br /&gt;
    Beer: &lt;br /&gt;
    &lt;select multiple name=&quot;beer[]&quot;&gt;
        &lt;option value=&quot;warthog&quot;&gt;Warthog&lt;/option&gt;
        &lt;option value=&quot;guinness&quot;&gt;Guinness&lt;/option&gt;
        &lt;option value=&quot;stuttgarter&quot;&gt;Stuttgarter Schwabenbrau&lt;/option&gt;
    &lt;/select&gt;&lt;br /&gt;
    &lt;input type=&quot;submit&quot; value=&quot;submit me!&quot; /&gt;
&lt;/form&gt;
</pre></div>
      </div>

     </div>
    </p>

    <div class="sect3" id="language.variables.external.form.submit">
     <h4 class="title">IMAGE SUBMIT 変数名</h4>

     <p class="simpara">
      フォームを投稿する際、次のタグのように標準の投稿ボタンの代わりに
      画像を使用することができます。
     </p>

     <div class="informalexample">
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input type=&quot;image&quot; src=&quot;image.gif&quot; name=&quot;sub&quot; /&gt;</pre>
</div>
      </div>

     </div>

     <p class="simpara">
      画像のどこかがクリックされた場合、二つの変数 <var class="varname"><var class="varname">sub_x</var></var> および <var class="varname"><var class="varname">sub_y</var></var>
      が付け加えられてこのフォームはサーバーに転送されます。これらの変
      数は、ユーザーがこの画像をクリックした座標を示しています。経験の
      ある人は、ブラウザにより送られた変数の名前においてアンダースコア
      がピリオドになってしまっていることを心配するかもしれません。
      しかし、PHP はピリオドをアンダースコアに自動的に変換します。
     </p>
    </div>

   </div>

   <div class="sect2" id="language.variables.external.cookies">
    <h3 class="title">HTTP Cookie</h3>

    <p class="simpara">
     PHP は、<a href="http://www.faqs.org/rfcs/rfc6265" class="link external" title="Link : http://www.faqs.org/rfcs/rfc6265">&raquo;&nbsp;RFC 6265</a>
     に定義されたHTTP Cookieを完全にサポートします。Cookieは、リモート
     ブラウザにデータを保持し、再訪するユーザーを追跡し、特定する機構
     です。<span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span> 関数によりCookieをセットす
     ることができます。Cookieは、HTTP ヘッダの一部なので、SetCookie
     関数をブラウザに何かを出力する前にコールする必要があります。
     この制約は、<span class="function"><a href="function.header.html" class="function">header()</a></span> 関数のものと同じです。
     Cookieのデータは、<var class="varname"><var class="varname"><a href="reserved.variables.cookies.html" class="classname">$_COOKIE</a></var></var> のような適当なCookieデータ
     配列で参照可能です。また、 <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>でも
     参照可能です。詳細および例については、
     <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span>のマニュアルページを参照してください。
    </p>

    <p class="simpara">
     単一のCookieに複数の値を代入したい場合は、配列として
     代入することが可能です。以下に例を示します。
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"MyCookie[foo]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Testing&nbsp;1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"MyCookie[bar]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Testing&nbsp;2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

    <p class="simpara">
     上記スクリプトにおいては、2つの異なるCookieを生成されますが、
     この場合、スクリプトでは <var class="varname"><var class="varname">MyCookie</var></var> という単一の配列になります。
     一つのCookieに複数の値を設定したい場合、最初の値に
     <span class="function"><a href="function.serialize.html" class="function">serialize()</a></span>または
     <span class="function"><a href="function.explode.html" class="function">explode()</a></span>を用いることを考えてください。
    </p>

    <p class="simpara">
     Cookieは、パスまたはドメインが異ならない限り、
     以前のクッキーをブラウザ上の同じ名前の変数に置き換えることに
     注意してください。
     さて、買い物かご(Shopping Cart) プログラムの場合、カウンタを保持し、
     受け渡したいと思うかもしれません。
     これは、次のようになります。
    </p>

    <div class="example" id="example-125">
     <p><strong>例5 <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span>の例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]&nbsp;+&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">'count'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cart[</span><span style="color: #0000BB">$count</span><span style="color: #DD0000">]"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()+</span><span style="color: #0000BB">3600</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>

   </div>

   <div class="sect2" id="language.variables.external.dot-in-names">
    <h3 class="title">外部変数名のドット</h3>
    
    <p class="para">
     通常、PHP はスクリプトに渡された変数の名前を変更しません。しかし、
     ドット(ピリオド、終止符)はPHPの変数名で有効な文字ではないというこ
     とに注意する必要があります。次の例を見てみましょう。
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$varname</span><span style="color: #007700">.</span><span style="color: #0000BB">ext</span><span style="color: #007700">;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;無効な変数名&nbsp;*/<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     ここで、パーサは、<var class="varname"><var class="varname">$varname</var></var>という名前の変数の後に
     文字列結合演算子があり、その後に、裸の文字列(すなわち、既知のキー
     または予約語にマッチしない引用符無しの文字列) &#039;ext&#039; が続くとして
     解釈します。この場合、明らかに意図する結果にはなりません。
    </p>

    <p class="para">
     重要なことを記述しておくと、このため、外部変数に含まれるドットを
     PHP は自動的にアンダースコアに変換します。
    </p>
    
   </div>
 
   <div class="sect2" id="language.variables.determining-type-of">
    <h3 class="title">変数の型の定義</h3>

    <p class="para">
     PHPは、変数の型を定義し、必要に応じて変換します。このため、ある変
     数の型がある時点で常に明らかであるわけではありません。PHPは、変数
     の型を調べる複数の関数をサポートしています。それらは、
    <span class="function"><a href="function.gettype.html" class="function">gettype()</a></span>, <span class="function"><a href="function.is-array.html" class="function">is_array()</a></span>,
     <span class="function"><a href="function.is-float.html" class="function">is_float()</a></span>, <span class="function"><a href="function.is-int.html" class="function">is_int()</a></span>,
     <span class="function"><a href="function.is-object.html" class="function">is_object()</a></span>,
     <span class="function"><a href="function.is-string.html" class="function">is_string()</a></span> です。
     <a href="language.types.html" class="link">型</a>の章も参照ください。
    </p>
   </div>

   <div class="sect2" id="language.variables.external.changelog">
    <h3 class="title">変更履歴</h3>

    <p class="para">
     <table class="doctable informaltable">
      
       <thead>
        <tr>
         <th>バージョン</th>
         <th>説明</th>
        </tr>

       </thead>

       <tbody class="tbody">
        <tr>
         <td>5.4.0</td>
         <td>
          <a href="security.globals.html" class="link">グローバル変数の登録機能</a>、
          <a href="security.magicquotes.html" class="link">マジッククォート</a>および
          <a href="ini.core.html#ini.register-long-arrays" class="link">register_long_arrays</a>
          が削除されました。
         </td>
        </tr>

        <tr>
         <td>5.3.0</td>
         <td>
          <a href="security.globals.html" class="link">グローバル変数の登録機能</a>、
          <a href="security.magicquotes.html" class="link">マジッククォート</a>および
          <a href="ini.core.html#ini.register-long-arrays" class="link">register_long_arrays</a>
          が非推奨となりました。
         </td>
        </tr>

        <tr>
         <td>4.2.0</td>
         <td>
          <a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
          のデフォルトが <em class="emphasis">off</em> になりました。
         </td>
        </tr>

        <tr>
         <td>4.1.0</td>
         <td>
          <a href="language.variables.superglobals.html" class="link">スーパーグローバル配列</a>、
          つまり <var class="varname"><var class="varname"><a href="reserved.variables.post.html" class="classname">$_POST</a></var></var> や <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var>
          が使えるようになりました。
         </td>
        </tr>

       </tbody>
      
     </table>

    </p>
   </div>

  </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114372""></a>
  <div class="note">
   <strong class="user">johnbendie at gmail dot com</strong>
   <a href="#114372" class="date">13-Feb-2014 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please describe how the request is built and passed to the script on the server side. That will make things more clearer. Or provide a link detailing such process. Don't assume anything.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114302""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#114302" class="date">05-Feb-2014 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From HTML 5.1 Draft:<br />
<a href="http://www.w3.org/html/wg/drafts/html/master/forms.html#naming-form-controls:-the-name-attribute" rel="nofollow" target="_blank">http://www.w3.org/html/wg/drafts/html/master/forms.html#naming-form-controls:-the-name-attribute</a><br />
<br />
The name content attribute gives the name of the form control, as used in form submission and in the form element's elements object. If the attribute is specified, its value must not be the empty string.<br />
Any non-empty value for name is allowed.<br />
<br />
So use the format like this &lt;select multiple name="beer[]"&gt; is still in the HTML 5 standard.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105228""></a>
  <div class="note">
   <strong class="user">walf</strong>
   <a href="#105228" class="date">04-Aug-2011 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING! replacement of spaces and dots does not occur in array keys.<br />
<br />
E.g. If you have<br />
&lt;input name="a. b[x. y]" value="foo" /&gt;<br />
<br />
var_dump($_POST);<br />
gives<br />
array(1) {<br />
&nbsp; ["a__b"]=&gt;<br />
&nbsp; array(1) {<br />
&nbsp;&nbsp;&nbsp; ["x. y"]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(3) "foo"<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94607""></a>
  <div class="note">
   <strong class="user">POSTer</strong>
   <a href="#94607" class="date">13-Nov-2009 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple function to give you an uncorrupted version of $_POST:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Function to fix up PHP's messing up POST input containing dots, etc.<br />
</span><span class="keyword">function </span><span class="default">getRealPOST</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pairs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vars </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$pairs </span><span class="keyword">as </span><span class="default">$pair</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nv </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$pair</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$nv</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$nv</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vars</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$vars</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81080""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#81080" class="date">13-Feb-2008 03:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The full list of field-name characters that PHP converts to _ (underscore) is the following (not just dot):<br />
chr(32) ( ) (space)<br />
chr(46) (.) (dot)<br />
chr(91) ([) (open square bracket)<br />
chr(128) - chr(159) (various)<br />
<br />
PHP irreversibly modifies field names containing these characters in an attempt to maintain compatibility with the deprecated register_globals feature.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77344""></a>
  <div class="note">
   <strong class="user">vierubino dot r3m0oFdisB1T at gmail dot com</strong>
   <a href="#77344" class="date">25-Aug-2007 06:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you are using checkboxes to submit multiple choices, there is no need to use the complex method further down the page where you assign a unique name to each checkbox.<br />
<br />
Instead, just name each checkbox as the same array, e.g.:<br />
<br />
&lt;input type="checkbox" name="items[]" value="foo" /&gt;<br />
&lt;input type="checkbox" name="items[]" value="bar" /&gt;<br />
&lt;input type="checkbox" name="items[]" value="baz" /&gt;<br />
<br />
This way your $_POST["items"] variable will return as an array containing all and only the checkboxes that were clicked on.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74775""></a>
  <div class="note">
   <strong class="user">t.montg AT gmail DOT com</strong>
   <a href="#74775" class="date">27-Apr-2007 02:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For anyone else having trouble figuring out how to access values in a SELECT element from a POST or GET form, you can't set the "id" attribute to the same thing as your "name" attribute.&nbsp; i.e. don't do this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">//Not so good<br />
&nbsp; </span><span class="keyword">&lt;</span><span class="default">select multiple</span><span class="keyword">=</span><span class="string">"multiple" </span><span class="default">id</span><span class="keyword">=</span><span class="string">"selectElem" </span><span class="default">name</span><span class="keyword">=</span><span class="string">"selectElem[]"</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"ham"</span><span class="keyword">&gt;</span><span class="default">Ham</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"cheese"</span><span class="keyword">&gt;</span><span class="default">Cheese</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"hamcheese"</span><span class="keyword">&gt;</span><span class="default">Ham </span><span class="keyword">and </span><span class="default">Cheese</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp; &lt;/</span><span class="default">select</span><span class="keyword">&gt;<br />
</span><span class="default">?&gt;<br />
</span><br />
If you do the above, the variable $_POST['selectElem'] will not be set.&nbsp; Instead, either change the id or name attribute so that they are dissimilar.&nbsp; i.e. do this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">//So good (notice the new "id" value)<br />
&nbsp; </span><span class="keyword">&lt;</span><span class="default">select multiple</span><span class="keyword">=</span><span class="string">"multiple" </span><span class="default">id</span><span class="keyword">=</span><span class="string">"selectElemId" </span><span class="default">name</span><span class="keyword">=</span><span class="string">"selectElem[]"</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"ham"</span><span class="keyword">&gt;</span><span class="default">Ham</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"cheese"</span><span class="keyword">&gt;</span><span class="default">Cheese</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;</span><span class="default">option value</span><span class="keyword">=</span><span class="string">"hamcheese"</span><span class="keyword">&gt;</span><span class="default">Ham </span><span class="keyword">and </span><span class="default">Cheese</span><span class="keyword">&lt;/</span><span class="default">option</span><span class="keyword">&gt;<br />
&nbsp; &lt;/</span><span class="default">select</span><span class="keyword">&gt;<br />
</span><span class="default">?&gt;<br />
</span><br />
Then you can access the value(s) of the SELECT element through the array $_POST['selectElem'][] or $_GET['selectElem'][].&nbsp; It took me quite some time to figure out the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63295""></a>
  <div class="note">
   <strong class="user">ch1902uk at hotmail dot com</strong>
   <a href="#63295" class="date">18-Mar-2006 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding image input buttons, above where it says:<br />
<br />
"When the user clicks somewhere on the image, the accompanying form will be transmitted to the server with two *additional* variables, sub_x and sub_y. These contain the coordinates of the user click within the image." <br />
<br />
This is the case with Firefox (and probably other standards browsers), however my experience with Internet Explorer is that when image inputs are clicked, they only submit the location of the click on the button and *not* the name of the input.<br />
<br />
So if you have a form to move/delete entries like this<br />
<br />
entry[]&nbsp; [delete_0] [up_0] [down_0]<br />
entry[]&nbsp;&nbsp; [delete_1] [up_1] [down_1]<br />
entry[]&nbsp;&nbsp; [delete_2] [up_2] [down_2]<br />
<br />
Then submitting the form in firefox will give you post variables such as <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $_POST</span><span class="keyword">[</span><span class="string">'delete_2'</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">// "Delete" - button value<br />
&nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'delete_2_x'</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">// 23 - x coord <br />
&nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'delete_2_y'</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">// 3 - y coord <br />
</span><span class="default">?&gt;<br />
</span><br />
In IE you only get<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; $_POST</span><span class="keyword">[</span><span class="string">'delete_2_x'</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">// 23 - x coord <br />
&nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'delete_2_y'</span><span class="keyword">];&nbsp;&nbsp; </span><span class="comment">// 3 - y coord <br />
</span><span class="default">?&gt;<br />
</span><br />
So if you are checking for what button was clicked do something like this<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'entry'</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'delete_' </span><span class="keyword">. </span><span class="default">$i </span><span class="keyword">. </span><span class="string">'_x'</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do delete<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58228""></a>
  <div class="note">
   <strong class="user">aescomputer AT yahoo DOT com</strong>
   <a href="#58228" class="date">28-Oct-2005 08:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are two usefull functions for forms:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// clean html tags out of url attributes<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(!empty(</span><span class="default">$_REQUEST</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$_REQUEST </span><span class="keyword">as </span><span class="default">$x </span><span class="keyword">=&gt; </span><span class="default">$y</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="string">'&amp;lt;'</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="string">'&amp;gt;'</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">// replace carrage returns in url attributes with &lt;br&gt;<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(!empty(</span><span class="default">$_REQUEST</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$_REQUEST </span><span class="keyword">as </span><span class="default">$x </span><span class="keyword">=&gt; </span><span class="default">$y</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">'&lt;br&gt;'</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52503""></a>
  <div class="note">
   <strong class="user">krydprz at iit dot edu</strong>
   <a href="#52503" class="date">03-May-2005 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This post is with regards to handling forms that have more than one submit button.
<br />

<br />
Suppose we have an HTML form with a submit button specified like this:
<br />

<br />
&lt;input type="submit" value="Delete" name="action_button"&gt;
<br />

<br />
Normally the 'value' attribute of the HTML 'input' tag (in this case "Delete") that creates the submit button can be accessed in PHP after post like this:
<br />

<br />
<span class="default">&lt;?php
<br />
$_POST</span><span class="keyword">[</span><span class="string">'action_button'</span><span class="keyword">];
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
We of course use the 'name' of the button as an index into the $_POST array.
<br />

<br />
This works fine, except when we want to pass more information with the click of this particular button.
<br />

<br />
Imagine a scenario where you're dealing with user management in some administrative interface.&nbsp; You are presented with a list of user names queried from a database and wish to add a "Delete" and "Modify" button next to each of the names in the list.&nbsp; Naturally the 'value' of our buttons in the HTML form that we want to display will be "Delete" and "Modify" since that's what we want to appear on the buttons' faceplates.
<br />

<br />
Both buttons (Modify and Delete) will be named "action_button" since that's what we want to index the $_POST array with.&nbsp; In other words, the 'name' of the buttons along cannot carry any uniquely identifying information if we want to process them systematically after submit. Since these buttons will exist for every user in the list, we need some further way to distinguish them, so that we know for which user one of the buttons has been pressed.
<br />

<br />
Using arrays is the way to go.&nbsp; Assuming that we know the unique numerical identifier of each user, such as their primary key from the database, and we DON'T wish to protect that number from the public, we can make the 'action_button' into an array and use the user's unique numerical identifier as a key in this array.
<br />

<br />
Our HTML code to display the buttons will become:
<br />

<br />
&lt;input type="submit" value="Delete" name="action_button[0000000002]"&gt;
<br />
&lt;input type="submit" value="Modify" name="action_button[0000000002]"&gt;
<br />

<br />
The 0000000002 is of course the unique numerical identifier for this particular user.
<br />

<br />
Then when we handle this form in PHP we need to do the following to extract both the 'value' of the button ("Delete" or "Modify") and the unique numerical identifier of the user we wish to affect (0000000002 in this case). The following will print either "Modify" or "Delete", as well as the unique number of the user:
<br />

<br />
<span class="default">&lt;?php
<br />
$submitted_array </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'action_button'</span><span class="keyword">]);
<br />
echo (</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'action_button'</span><span class="keyword">][</span><span class="default">$submitted_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$submitted_array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
$submitted_array[0] carries the 0000000002.
<br />
When we index that into the $_POST['action_button'], like we did above, we will extract the string that was used as 'value' in the HTML code 'input' tag that created this button.
<br />

<br />
If we wish to protect the unique numerical identifier, we must use some other uniquely identifying attribute of each user. Possibly that attribute should be encrypted when output into the form for greater security.
<br />

<br />
Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52466""></a>
  <div class="note">
   <strong class="user">user: &quot;someuser&quot; at mai1server &quot;ua.fm&quot;</strong>
   <a href="#52466" class="date">02-May-2005 09:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Numerous string like:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"var1"</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$var1</span><span class="keyword">=</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"var1"</span><span class="keyword">];
<br />
else </span><span class="default">$var1</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;
<br />
</span><span class="comment">//...
<br />
</span><span class="keyword">if (isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"varN"</span><span class="keyword">]))
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$varN</span><span class="keyword">=</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"varN"</span><span class="keyword">];
<br />
else </span><span class="default">$varN</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Can be replaced with:
<br />

<br />
<span class="default">&lt;?php
<br />
get_superglobal_vars_from_POST</span><span class="keyword">(</span><span class="string">'var1'</span><span class="keyword">,</span><span class="string">'...'</span><span class="keyword">,</span><span class="string">'varN'</span><span class="keyword">);
<br />

<br />
function </span><span class="default">get_superglobal_vars_from_POST</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$numargs </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$setargs </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// for counting set variables
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$numargs</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$varname</span><span class="keyword">=</span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (!isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$varname</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$varname</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$setargs</span><span class="keyword">++;
<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"</span><span class="default">$varname</span><span class="string">"</span><span class="keyword">]=</span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$setargs</span><span class="keyword">; </span><span class="comment">// who cares?
<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52423""></a>
  <div class="note">
   <strong class="user">tim at timpauly dot com</strong>
   <a href="#52423" class="date">30-Apr-2005 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This code module can be added to every form using require_once().
<br />
It will process any and all form data, prepending each variable with
<br />
a unique identifier (so you know which method was used to get the data).
<br />

<br />
My coding could be neater, but this sure makes processing forms much easier!
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">// -----------------------------------------------------------------
<br />
// Basic Data PHP module. This module captures all GET, POST
<br />
// and COOKIE data and processes it into variables.
<br />
// Coded April, 2005 by Timothy J. Pauly 
<br />
// -----------------------------------------------------------------
<br />
//
<br />
// coo_ is prepended to each cookie variable
<br />
// get_ is prepended to each GET variable
<br />
// pos_ is prepended to each POST variable
<br />
// ses_ is prepended to each SESSION variable
<br />
// ser_ is prepended to each SERVER variable
<br />

<br />
</span><span class="default">session_start</span><span class="keyword">(); </span><span class="comment">// initialize session data
<br />
</span><span class="default">$ArrayList </span><span class="keyword">= array(</span><span class="string">"_POST"</span><span class="keyword">, </span><span class="string">"_GET"</span><span class="keyword">, </span><span class="string">"_SESSION"</span><span class="keyword">, </span><span class="string">"_COOKIE"</span><span class="keyword">, </span><span class="string">"_SERVER"</span><span class="keyword">); </span><span class="comment">// create an array of the autoglobal arrays
<br />
// we want to process
<br />

<br />
</span><span class="keyword">foreach(</span><span class="default">$ArrayList </span><span class="keyword">as </span><span class="default">$gblArray</span><span class="keyword">) </span><span class="comment">// process each array in the array list
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp; </span><span class="default">$prefx </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$gblArray</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)).</span><span class="string">"_"</span><span class="keyword">; </span><span class="comment">// derive the prepend string 
<br />
// from the autoglobal type name
<br />
&nbsp;&nbsp; </span><span class="default">$tmpArray </span><span class="keyword">= $</span><span class="default">$gblArray</span><span class="keyword">;
<br />
&nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$tmpArray</span><span class="keyword">); </span><span class="comment">// extract the keys from the array being processed
<br />
&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">) </span><span class="comment">// process each key
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arcnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$arcnt </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) </span><span class="comment">// Break down passed arrays and 
<br />
// process each element seperately
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$lcount </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] as </span><span class="default">$dval</span><span class="keyword">) 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$prkey </span><span class="keyword">= </span><span class="default">$prefx</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">; </span><span class="comment">// create a new key string 
<br />
// with the prepend string added
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$prdata</span><span class="keyword">[</span><span class="string">'$prkey'</span><span class="keyword">] = </span><span class="default">$dval</span><span class="keyword">; </span><span class="comment">// this step could be eliminated
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">${</span><span class="default">$prkey</span><span class="keyword">}[</span><span class="default">$lcount</span><span class="keyword">] = </span><span class="default">$prdata</span><span class="keyword">[</span><span class="string">'$prkey'</span><span class="keyword">]; </span><span class="comment">//create new key and insert the data
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lcount</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else { </span><span class="comment">// process passed single variables
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prkey </span><span class="keyword">= </span><span class="default">$prefx</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">; </span><span class="comment">// create a new key string 
<br />
// with the prepend string added
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prdata</span><span class="keyword">[</span><span class="string">'$prkey'</span><span class="keyword">] = </span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]; </span><span class="comment">// insert the data from 
<br />
// the old array into the new one
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">$</span><span class="default">$prkey </span><span class="keyword">= </span><span class="default">$prdata</span><span class="keyword">[</span><span class="string">'$prkey'</span><span class="keyword">]; </span><span class="comment">// create the newly named 
<br />
// (prepended) key pair using variable variables :-)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />

<br />
</span><span class="comment">// -------------------------------------------------------------
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51727""></a>
  <div class="note">
   <strong class="user">tmk-php at infeline dot org</strong>
   <a href="#51727" class="date">08-Apr-2005 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To handle forms with or without [] you can do something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">repairPost</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// combine rawpost and $_POST ($data) to rebuild broken arrays in $_POST
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rawpost </span><span class="keyword">= </span><span class="string">"&amp;"</span><span class="keyword">.</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(list(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)= </span><span class="default">each</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/&amp;"</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">"=([^&amp;]*)/i"</span><span class="keyword">,</span><span class="default">$rawpost</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">, </span><span class="default">PREG_PATTERN_ORDER</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$pos </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qform</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$pos</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qform</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qform</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$qform</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// --- MAIN
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_POST </span><span class="keyword">= </span><span class="default">repairPost</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The function will check every field in the $_POST with the raw post data and rebuild the arrays that got lost.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50546""></a>
  <div class="note">
   <strong class="user">Murat TASARSU</strong>
   <a href="#50546" class="date">03-Mar-2005 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want your multiple select returned variable in comma seperated form you can use this. hope that helps. regards...<br />
<br />
$myvariable <br />
&nbsp;&nbsp; Array ( [0] =&gt; one [1] =&gt; two [2] =&gt; three ) <br />
turns into<br />
&nbsp;&nbsp; one,two,three<br />
<br />
<span class="default">&lt;?php<br />
$myvariable</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
</span><span class="default">$myseperator</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br />
foreach ( </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"myvariable"</span><span class="keyword">] as </span><span class="default">$v</span><span class="keyword">) {<br />
if (!isset(</span><span class="default">$nofirstcomma</span><span class="keyword">)) </span><span class="default">$nofirstcomma</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; else </span><span class="default">$myseperator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">;<br />
</span><span class="default">$myvariable </span><span class="keyword">= </span><span class="default">$myvariable</span><span class="keyword">.</span><span class="default">$myseperator</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">$myvariable</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49574""></a>
  <div class="note">
   <strong class="user">jlratwil at yahoo dot com</strong>
   <a href="#49574" class="date">02-Feb-2005 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get multiple selected (with "multiple" ) lists in &lt;select&gt; tag, make sure that the "name" attribute is added to braces, like this:<br />
<br />
&lt;select multiple="multiple" name="users[]"&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;option value="foo"&gt;Foo&lt;/option&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;option value="bar"&gt;Bar&lt;/option&gt;<br />
&lt;/select&gt;<br />
<br />
When submitted to PHP file (assume that you have a complete form) it will return an array of strings. Otherwise, it will just return the last element of the &lt;select&gt; tag you selected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49116""></a>
  <div class="note">
   <strong class="user">__kbanks at (__ignoreunderscores) dot gmail dot com</strong>
   <a href="#49116" class="date">17-Jan-2005 12:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi all:<br />
<br />
I'm presently building a solution to programmatically build, view, and validate HTML forms when I came across the ol' PHP non-scalar form variable handling problem.&nbsp; Because my form validator class would really have no way of knowing if a given form variable was meant to be scalar or not, I decided to TREAT ALL PHP FORM VARIABLES AS ARRAYS, i.e., to use the '[]' syntax for all variables, scalar or not.&nbsp; This way, the form designer need not remember to specify the '[]' syntax, and the Form-&gt;HTML transformer need not scan for every input within the form, looking for duplicate names.&nbsp; This also eliminates the risk of losing data you meant to keep in an array but to which you forgot to apply the '[]' syntax.&nbsp; <br />
<br />
You may then either treat all form variables as arrays in your form handling code, or you may, as I intend to do, filter each HTML request through a Front Controller (desc. in Fowler, PoEAA).&nbsp; The Front Controller would convert all arrays of length 1 to a scalar variable and leave multi-element arrays as they are.&nbsp; This should essentially convert PHP's handling of non-scalar form variables to that of ASP's (or slightly better, since multiple form values of the same name will actually be arrays, not just comma-seperated values).&nbsp; <br />
<br />
This way my Form Validator class can just check if the input to validate is an array, and then apply some constraint across each element in the array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47188""></a>
  <div class="note">
   <strong class="user">mattij at nitro  fi no at no dot no</strong>
   <a href="#47188" class="date">05-Nov-2004 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you try to refer or pass HTML-form data which has arrays with javascript remember that you should point to that array like this<br />
<br />
&lt;script type="text/javascript"&gt;<br />
&nbsp;&nbsp;&nbsp; window.opener.document.forms[0]["to[where][we][point]"];<br />
&lt;/script&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43949""></a>
  <div class="note">
   <strong class="user">lennynyktyk at yahoo dot com</strong>
   <a href="#43949" class="date">09-Jul-2004 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with multiple select boxes and the name=some_name[] so that PHP will understand that is needs to interpet the input as an array an not as a single value. If you want to access this in Javascript you should assign an id attribute to the select box as well as the name attribute. Then proceed to use the id attribute in Javascript to reference the select box and the name attribute to reference the select box in PHP.<br />
Example<br />
<br />
&lt;select multiple id="select_id" name="select_name[]"&gt;<br />
....<br />
<br />
&lt;/select&gt;<br />
<br />
<span class="default">&lt;?PHP<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$select_name</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
</span><span class="default">?&gt;<br />
</span><br />
&lt;script language="javascript"&gt;<br />
&nbsp; document.forms[0].select_id.options[0].selected = true;<br />
&lt;/script&gt;<br />
<br />
I hope you get the idea</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41025""></a>
  <div class="note">
   <strong class="user">arjini at mac dot com</strong>
   <a href="#41025" class="date">27-Mar-2004 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with form inputs named_like_this[5] and javascript, instead of trying to get PHP to do something fancy as mentioned below, just try this on the javascript side of things:<br />
<br />
&lt;form name="myForm"&gt;<br />
<br />
&lt;script&gt;<br />
my_fancy_input_name = 'array_of_things[1]';<br />
/* now just refer to it like this in the dom tree <br />
<br />
document[myForm][my_fancy_input_name].value<br />
<br />
etc*/<br />
&lt;/script&gt;<br />
<br />
&lt;input type="text" name="array_of_things[1]" value="1"/&gt;<br />
&lt;/form&gt;<br />
<br />
No fancy PHP, in fact, you shouldn't need to change your PHP at all.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39270""></a>
  <div class="note">
   <strong class="user">jim at jamesdavis dot it</strong>
   <a href="#39270" class="date">22-Jan-2004 08:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to pass a numerically indexed array.
<br />
This is the part inside the form. Notice that the name is not 'english[$r]' which you would normally write, but 'english[]'. PHP adds the index when it receives the post and it starts at 0.
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="keyword">for (</span><span class="default">$r</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$r </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$english</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$r</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;TEXTAREA NAME='english[]'&gt;"</span><span class="keyword">.</span><span class="default">$english</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">].</span><span class="string">"&lt;/TEXTAREA&gt;"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
&lt;?php
<br />

<br />
</span><span class="keyword">And </span><span class="default">this will get it out at the other end
<br />
</span><span class="keyword">function </span><span class="default">retrieve_english</span><span class="keyword">(){
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$r</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$r </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'english'</span><span class="keyword">])-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$r</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'english'</span><span class="keyword">][</span><span class="default">$r</span><span class="keyword">].</span><span class="string">"&lt;BR&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Keys are useful but so are numerical indices!
<br />
Cheers everyone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37887""></a>
  <div class="note">
   <strong class="user">darren at sullivan dot net</strong>
   <a href="#37887" class="date">01-Dec-2003 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is a simple solution for getting the array of selectes from a checkbox list or a dropdown list out of the Querry String. I took an example posted earlier and simplified it. 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">multi_post_item</span><span class="keyword">(</span><span class="default">$repeatedString</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Gets the specified array of multiple selects and/or 
<br />
&nbsp;&nbsp;&nbsp; // checkboxes from the Query String
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ArrayOfItems </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$raw_input_items </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"QUERY_STRING"</span><span class="keyword">]);
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$raw_input_items </span><span class="keyword">as </span><span class="default">$input_item</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$itemPair </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$input_item</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$itemPair</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="default">$repeatedString</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ArrayOfItems</span><span class="keyword">[] = </span><span class="default">$itemPair</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ArrayOfItems</span><span class="keyword">;
<br />
} 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Use the name of the field as the agrument. Example:
<br />

<br />
<span class="default">&lt;?php
<br />
$Order </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'Order'</span><span class="keyword">];
<br />
</span><span class="default">$Name </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'Name'</span><span class="keyword">];
<br />
</span><span class="default">$States </span><span class="keyword">= </span><span class="default">multi_post_item</span><span class="keyword">(</span><span class="string">'States'</span><span class="keyword">);
<br />
</span><span class="default">$Products </span><span class="keyword">= </span><span class="default">multi_post_item</span><span class="keyword">(</span><span class="string">'Products'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Be sure to check for NULL if there are no selections or boxes checked.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37185""></a>
  <div class="note">
   <strong class="user">soeren at hattel dot dk</strong>
   <a href="#37185" class="date">06-Nov-2003 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The decision in PHP to translate a query string like:<br />
<br />
a=2&amp;a=3&amp;a=4 <br />
<br />
into one single variable a=4 is simply strupid! <br />
<br />
The "wonderful" hack allowing multiple values to be read only if one uses:<br />
<br />
a[]=2&amp;a[]=3&amp;a[]=4<br />
<br />
is - at first sight - a nice feature but soon become a pain in the a..!<br />
<br />
In ASP and ASPX the first situation is handled as:<br />
<br />
a=2,3,4<br />
<br />
which is better than the PHP behaviour but still bad (what if your variable values contain commas?).<br />
<br />
It seems to me that the proper behaviour would be:<br />
<br />
a=2&amp;a=3&amp;a=4<br />
<br />
automatically generates an array with all the variables inside. I know this would require proper error handling but evevy things does anyway!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34820""></a>
  <div class="note">
   <strong class="user">kevinrlat nospam dot ccs dot neu dot edu</strong>
   <a href="#34820" class="date">07-Aug-2003 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you use an array of checkboxes to submit info to a database or what have you, be careful of the case when no boxes are checked.&nbsp; for example:<br />
<br />
&lt;form method="post"&gt;<br />
&lt;input type="checkbox" name="checkstuff[]" value="0"&gt;<br />
&lt;input type="checkbox" name="checkstuff[]" value="1"&gt;<br />
&lt;input type="checkbox" name="checkstuff[]" value="2"&gt;<br />
<br />
. . .<br />
<br />
&lt;/form&gt;<br />
<br />
if these are submitted and none are checked, the $_POST['checkstuff'] variable will not contain an empty array, but a NULL value.&nbsp; this bothered me when trying to implode() the values of my checkboxes to insert into a database, i got a warning saying the 2nd argument was the wrong type.&nbsp; <br />
<br />
hope this helps!<br />
-kevin</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30866""></a>
  <div class="note">
   <strong class="user">un shift at yahoo dot com</strong>
   <a href="#30866" class="date">01-Apr-2003 07:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes a recurring form item from php://input and loads it into an array - useful for javascript/dom incompatibility with form_input_item[] names for checkboxes, multiple selects, etc.&nbsp; The fread maxes out at 100k on this one.&nbsp; I guess a more portable option would be pulling in ini_get('post_max_size') and converting it to an integer.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">multi_post_item</span><span class="keyword">(</span><span class="default">$input_item_name</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$array_output </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$in_handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"php://input"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$raw_input_items </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$in_handle</span><span class="keyword">, </span><span class="default">100000</span><span class="keyword">)));
<br />
&nbsp;&nbsp; &nbsp; foreach (</span><span class="default">$raw_input_items </span><span class="keyword">as </span><span class="default">$input_item</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// split this item into name/value pair
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$input_item</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// form item name
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item_name </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// form item value
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item_value </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$item_name </span><span class="keyword">== </span><span class="default">$input_item_name</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array_output</span><span class="keyword">[] = </span><span class="default">$item_value</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$array_output</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30485""></a>
  <div class="note">
   <strong class="user">vb at bertola dot eu dot org</strong>
   <a href="#30485" class="date">19-Mar-2003 06:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For what I understand, since PHP 4.3 it is possible to access the content of a POST request (or other methods as well) as an input stream named php://input, example:<br />
<br />
readfile("php://input");&nbsp;&nbsp; <br />
[to display it]<br />
<br />
or<br />
<br />
$fp = fopen("php://input", "r");&nbsp; &nbsp; <br />
[to open it and then do whatever you want]<br />
<br />
This is very useful to access the content of POST requests which actually have a content (and not just variable-value couples, which appear in $_POST).<br />
<br />
This substitutes the old $HTTP_RAW_POST_DATA variable available in some of the previous 4.x versions. It is available for other upload methods different from POST too, but it is not available for POSTs with multipart/form-data content type, since the file upload handler has already taken care of the content in that case.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30257""></a>
  <div class="note">
   <strong class="user">mail at paulodeon dot com</strong>
   <a href="#30257" class="date">12-Mar-2003 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have form data that could be coming in via either GET or POST and register_globals is off (as it should be) use the empty() function to find out where the data is coming from, as in the following example
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if(empty(</span><span class="default">$_GET</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$clientfilter </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'clientfilter'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$branchfilter </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'branchfilter'</span><span class="keyword">];
<br />
}
<br />
if(empty(</span><span class="default">$_POST</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clientfilter </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'clientfilter'</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$branchfilter </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'branchfilter'</span><span class="keyword">];
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30019""></a>
  <div class="note">
   
   <a href="#30019" class="date">04-Mar-2003 04:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"...the dot (period, full stop) is not a valid character in a PHP variable name."<br />
<br />
That's not completely correct, consider this example:<br />
$GLOBALS['foo.bar'] = 'baz';<br />
echo ${'foo.bar'};<br />
This will output baz as expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="29118""></a>
  <div class="note">
   <strong class="user">keli at kmdsz dot ro</strong>
   <a href="#29118" class="date">03-Feb-2003 04:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
image type inputs apparently return their "value" argument from Mozilla, but not from IEXplorer... :(<br />
<br />
example:<br />
<br />
&nbsp;&lt;input type="image" name="sb" value="first" src="first.jpg"&gt;<br />
<br />
using a mozilla will give you <br />
&nbsp; $sb="first" AND $sb_x, $sb_y ... whereas from IE there's just no $sb. :(<br />
<br />
[this in short form, as I'm still using trackvars :) ]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23117""></a>
  <div class="note">
   <strong class="user">steiner277 at charter dot net</strong>
   <a href="#23117" class="date">10-Jul-2002 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When accessing variables from a post, do NOT put $_POST['fieldname'] in double quotes or you will get an error message.<br />
<br />
e.g. the following works fine:<br />
<br />
$msg = "The message is:\t" . $_POST['message'] . "\n";<br />
<br />
but the following will cause errors:<br />
<br />
$msg = "The message is:\t$_POST['message']\n";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21752""></a>
  <div class="note">
   <strong class="user">hjncom at hjncom dot net</strong>
   <a href="#21752" class="date">25-May-2002 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think '[' and ']' are valid characters for name attributes.<br />
<br />
<a href="http://www.w3.org/TR/html401/interact/forms.html#h-17.4" rel="nofollow" target="_blank">http://www.w3.org/TR/html401/interact/forms.html#h-17.4</a><br />
-&gt; InputType of 'name' attribute is 'CDATA'(not 'NAME' type)<br />
<br />
<a href="http://www.w3.org/TR/html401/types.html#h-6.2" rel="nofollow" target="_blank">http://www.w3.org/TR/html401/types.html#h-6.2</a><br />
-&gt; about CDATA('name' attribute is not 'NAME' type!)<br />
...CDATA is a sequence of characters from the document character set and may include character entities...<br />
<br />
<a href="http://www.w3.org/TR/html401/sgml/entities.html" rel="nofollow" target="_blank">http://www.w3.org/TR/html401/sgml/entities.html</a><br />
--&gt; about Character entity references in HTML 4<br />
([ - &amp;#91, ] - &amp;#93)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21401""></a>
  <div class="note">
   <strong class="user">jesper at codecrew dot dk</strong>
   <a href="#21401" class="date">11-May-2002 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just to help others with the same stupid problem i have:<br />
<br />
I you use a checkbox in your form, it will only return the value specified in value if it is checked.<br />
<br />
ex. &lt;input type="checkbox" value="yes"&gt;<br />
<br />
in php code you then write<br />
<br />
$checkboxchecked = ($checkbox == "yes");<br />
<br />
I guess :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18737""></a>
  <div class="note">
   <strong class="user">a at b dot c dot de</strong>
   <a href="#18737" class="date">03-Feb-2002 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As far as whether or not "[]" in name attributes goes, The HTML4.01 specification only requires that it be a case-insensitive CDATA token, which can quite happily include "[]". Leading and trailing whitespace may be trimmed and shouldn't be used.<br />
<br />
It is the id= attribute which is restricted, to a case-sensitive NAME token (not to be confused with a name= attribute).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18655""></a>
  <div class="note">
   <strong class="user">carl_steinhilber at NOSPAMmentor dot com</strong>
   <a href="#18655" class="date">30-Jan-2002 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A group of identically-named checkbox form elements returning an array is a pretty standard feature of HTML forms. It would seem that, if the only way to get it to work is a non-HTML-standard-compliant workaround, it's a problem with PHP.<br />
<br />
Since the array is passed in the header in a post, or the URL in a get, it's the PHP interpretation of those values that's failing.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="11873""></a>
  <div class="note">
   <strong class="user">yasuo_ohgaki at hotmail dot com</strong>
   <a href="#11873" class="date">11-Mar-2001 01:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Important:&nbsp; Pay attention to the following security concerns when handling user submitted&nbsp; data :
<br />

<br />
<a href="http://www.php.net/manual/en/security.registerglobals.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/security.registerglobals.php</a>
<br />
<a href="http://www.php.net/manual/en/security.variables.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/security.variables.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
