<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>オフセットの値を削除する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="arrayiterator.offsetset.html">≪ ArrayIterator::offsetSet</a></li>
      <li style="float: right;"><a href="arrayiterator.rewind.html">ArrayIterator::rewind ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.arrayiterator.html">ArrayIterator</a></li>
    <li>オフセットの値を削除する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="arrayiterator.offsetunset" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ArrayIterator::offsetUnset</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.0.0)</p><p class="refpurpose"><span class="refname">ArrayIterator::offsetUnset</span> &mdash; <span class="dc-title">オフセットの値を削除する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-arrayiterator.offsetunset-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>ArrayIterator::offsetUnset</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$index</code></span>
   )</div>

  <p class="para rdfs-comment">
   オフセットの値を削除します。
  </p>

  <div class="warning"><strong class="warning">警告</strong><p class="simpara">この関数は、
現在のところ詳細な情報はありません。引数のリストのみが
記述されています。</p></div>

 </div>


 <div class="refsect1 parameters" id="refsect1-arrayiterator.offsetunset-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">index</code></dt>

     <dd>

      <p class="para">
       削除したいオフセット。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-arrayiterator.offsetunset-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   値を返しません。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-arrayiterator.offsetunset-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="methodname"><a href="arrayiterator.offsetget.html" class="methodname" rel="rdfs-seeAlso">ArrayIterator::offsetGet()</a> - オフセットの値を取得する</span></li>
    <li class="member"><span class="methodname"><a href="arrayiterator.offsetset.html" class="methodname" rel="rdfs-seeAlso">ArrayIterator::offsetSet()</a> - オフセットの値を設定する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114386""></a>
  <div class="note">
   <strong class="user">rkos...</strong>
   <a href="#114386" class="date">14-Feb-2014 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is my solution for problem with offsetUnset<br />
<span class="default">&lt;?php<br />
<br />
$a </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">( </span><span class="default">range</span><span class="keyword">( </span><span class="default">0</span><span class="keyword">,</span><span class="default">9 </span><span class="keyword">) );<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">);<br />
<br />
for ( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">();&nbsp; )<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"#</span><span class="keyword">{</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">()}</span><span class="string"> - </span><span class="keyword">{</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()}</span><span class="string"> - &lt;br&gt;\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">()==</span><span class="default">0 </span><span class="keyword">|| </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">()==</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">offsetUnset</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() );<br />
&nbsp;&nbsp;&nbsp; }else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104789""></a>
  <div class="note">
   <strong class="user">olav at fwt dot no</strong>
   <a href="#104789" class="date">07-Jul-2011 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When unsetting elements as you go it will not remove the second index of the Array being worked on. Im not sure exactly why but there is some speculations that when calling unsetOffset(); it resets the pointer aswell.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">( </span><span class="default">range</span><span class="keyword">( </span><span class="default">0</span><span class="keyword">,</span><span class="default">9 </span><span class="keyword">) );<br />
</span><span class="default">$b </span><span class="keyword">= new </span><span class="default">ArrayIterator</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">);<br />
<br />
for ( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">() )<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"#</span><span class="keyword">{</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">()}</span><span class="string"> - </span><span class="keyword">{</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">()}</span><span class="string"> - \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">offsetUnset</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() );<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
To avoid this bug you can call offsetUnset in the for loop<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*** ... ***/<br />
</span><span class="keyword">for ( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">rewind</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">(); </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">offsetUnset</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() ) )<br />
{<br />
</span><span class="comment">/*** ... ***/<br />
</span><span class="default">?&gt;<br />
</span><br />
Or unset it directly in the ArrayObject<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*** ... ***/<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">-&gt;</span><span class="default">offsetUnset</span><span class="keyword">( </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() );<br />
</span><span class="comment">/*** ... ***/<br />
</span><span class="default">?&gt;<br />
</span><br />
which will produce correct results</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104588""></a>
  <div class="note">
   <strong class="user">Adil Baig @ AIdezigns</strong>
   <a href="#104588" class="date">24-Jun-2011 08:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Make sure you use this function to unset a value. You can't access this iterator's values as an array. Ex:
<br />

<br />
<span class="default">&lt;?php
<br />
$iterator </span><span class="keyword">= new \</span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(new \</span><span class="default">RecursiveArrayIterator</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));
<br />

<br />
foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$iterator</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]); 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Will return :
<br />

<br />
PHP Fatal error:&nbsp; Cannot use object of type RecursiveIteratorIterator as array
<br />

<br />
offsetUnset works properly even when removing items from nested arrays.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
