<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>正規表現により文字列を分割し、配列に格納する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.eregi.html">≪ eregi</a></li>
      <li style="float: right;"><a href="function.spliti.html">spliti ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.regex.html">POSIX 正規表現関数</a></li>
    <li>正規表現により文字列を分割し、配列に格納する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.split" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">split</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">split</span> &mdash; <span class="dc-title">正規表現により文字列を分割し、配列に格納する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.split-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>split</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$limit</code><span class="initializer"> = -1</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   <code class="parameter">string</code> を、正規表現によって配列に分割します。
  </p>
  <div class="warning"><strong class="warning">警告</strong><p class="simpara">この関数は PHP 5.3.0 で
<em class="emphasis">非推奨</em>となりました。
この機能を使用しないことを強く推奨します。</p></div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.split-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       大文字小文字を区別する正規表現。
      </p>
      <p class="para">
       正規表現で特殊文字とみなされる文字を分割したい場合、それらを
       まずエスケープする必要があります。<span class="function"><strong>split()</strong></span>
       (または他の正規表現関数に関して)の動作が何か変であると感じたならば、
       PHP 配布ファイルの
       <var class="filename">regex/</var> サブディレクトリにあるファイル
       <var class="filename">regex.7</var> を読んでください。このファイルは
       man ページ形式となっており、読むには
       <strong class="command">man /usr/local/src/regex/regex.7</strong> のようにします。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       入力文字列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">limit</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">limit</code> が指定された場合、返される配列には
       最大 <code class="parameter">limit</code> の要素が含まれます。この場合、
       最後の要素には <code class="parameter">string</code> の残りの部分が全て
       入っています。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.split-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   文字列の配列を返します。配列の各要素は、大文字小文字を区別する正規表現
   <code class="parameter">pattern</code> により区切られた
   <code class="parameter">string</code> 中の部分文字列です。
  </p>
  <p class="para">
   <code class="parameter">pattern</code> が <span class="replaceable">n</span> 回
   現れる場合、返される配列には、
   <em><span class="replaceable">n</span>+1</em> 個のアイテムが
   含まれます。例えば、<code class="parameter">pattern</code> が現れない場合、
   1 個の要素のみを有する配列が返されます。もちろん、これは
   エラーを生じた場合、<span class="function"><strong>split()</strong></span> は
   <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.split-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4922">
    <p><strong>例1 <span class="function"><strong>split()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
     <var class="filename">/etc/passwd</var> の行から最初の 4 つのフィールドを
     取り出すには、以下のようにします。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">list(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$uid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$extra</span><span style="color: #007700">)&nbsp;=<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">":"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$passwd_line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4923">
    <p><strong>例2 <span class="function"><strong>split()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
     スラッシュ、ドット、ハイフンをデリミタとすると日付を処理する例を
     以下に示します。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;デリミタはスラッシュ、ドット、ハイフンのどれかです。<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"04/30/1973"</span><span style="color: #007700">;<br />list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">'[/.-]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"Month:&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #DD0000">;&nbsp;Day:&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">;&nbsp;Year:&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.split-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <p class="para">PHP 5.3.0 以降、
regex 拡張モジュールは非推奨となりました。かわりに
<a href="book.pcre.html" class="link">PCRE 拡張モジュール</a> を使うことが推奨されています。
この関数をコールすると <strong><code>E_DEPRECATED</code></strong> が発生します。
PCRE への変換についてのヘルプは <a href="reference.pcre.pattern.posix.html" class="link">
相違点の一覧</a> を参照ください。</p></p></blockquote>
  <div class="tip"><strong class="tip">ヒント</strong>
   <p class="para">
    <span class="function"><strong>split()</strong></span> は PHP 5.3.0 以降で非推奨になりました。この関数のかわりに
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> を使うことを推奨します。
    正規表現の威力が必要ないのであれば、<span class="function"><a href="function.explode.html" class="function">explode()</a></span>
    を使用するほうがより高速です。これは正規表現エンジンの
    オーバーヘッドを受けません。
   </p>
  </div>
  <div class="tip"><strong class="tip">ヒント</strong>
   <p class="para">
    Perl の <strong class="command">@chars = split(&#039;&#039;, $str)</strong>
    と同等の処理をする方法を知りたい場合は、
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> あるいは
    <span class="function"><a href="function.str-split.html" class="function">str_split()</a></span> の例を参照ください。
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.split-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - 正規表現で文字列を分割する</span></li>
    <li class="member"><span class="function"><a href="function.spliti.html" class="function" rel="rdfs-seeAlso">spliti()</a> - 大文字小文字を区別しない正規表現により文字列を分割し、配列に格納する</span></li>
    <li class="member"><span class="function"><a href="function.str-split.html" class="function" rel="rdfs-seeAlso">str_split()</a> - 文字列を配列に変換する</span></li>
    <li class="member"><span class="function"><a href="function.explode.html" class="function" rel="rdfs-seeAlso">explode()</a> - 文字列を文字列により分割する</span></li>
    <li class="member"><span class="function"><a href="function.implode.html" class="function" rel="rdfs-seeAlso">implode()</a> - 配列要素を文字列により連結する</span></li>
    <li class="member"><span class="function"><a href="function.chunk-split.html" class="function" rel="rdfs-seeAlso">chunk_split()</a> - 文字列をより小さな部分に分割する</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - 指定した文字数で文字列を分割する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="87428""></a>
  <div class="note">
   <strong class="user">Greg Levine</strong>
   <a href="#87428" class="date">04-Dec-2008 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I kept running into the same issue Chris Tyler experienced with lewis [ at t] hcoms [d dot t] co [d dot t] uk's function before realizing that Chris had come up with a solution. However, that solution was just a little off it seems, unless your CSV only contains one line.<br />
<br />
If you simply add another --length; in the place you suggested, then the function will always trim the last two characters on the line. Since the newline character is the last character on the line and the redundant quote (or other enclosure) is the second to last character, this works for the final segment. But when parsing segments that do not include a newline character, you end up trimming the redundant enclosure and the last character before the enclosure.<br />
<br />
For example,<br />
<br />
"he","she","him","her"\r\n<br />
<br />
becomes<br />
<br />
[0] =&gt; h<br />
[1] =&gt; sh<br />
[2] =&gt; hi<br />
[3] =&gt; her<br />
<br />
Since the segment could end with the enclosure (i.e., ") or the enclosure followed by the newline (i.e., "\r\n), you have make sure you are only adding another --length; when the latter is the case. Replacing the code block that you suggested with the following will do the trick.<br />
<br />
# Is the last thing a newline?<br />
if( $char == $newline )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
# Is the last thing a quote?<br />
if( $trim_quote )<br />
{<br />
&nbsp;&nbsp;&nbsp; # Well then get rid of it<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
}<br />
<br />
I've tested this only for the purposes of the script I'm working on at this time. So, there could be other bugs I haven't come across, but this seems like the easiest way to eliminate the redundant enclosure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84419""></a>
  <div class="note">
   <strong class="user">pascalaschwandenNOSPAM at gmail dot com</strong>
   <a href="#84419" class="date">13-Jul-2008 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following code will mimick the explode functionality: explode( " ", $s );&nbsp; The difference, of course, is that the split method takes a regular expression instead of a string.<br />
<br />
$s = "Split this sentence by spaces";<br />
$words = split("[ ]+", $s);<br />
print_r($words);<br />
<br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Split<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; this<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; sentence<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; by<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; spaces<br />
)<br />
<a href="http://www.codesplunk.com/nr/questions/php12.html" rel="nofollow" target="_blank">http://www.codesplunk.com/nr/questions/php12.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82413""></a>
  <div class="note">
   <strong class="user">Chris Tyler</strong>
   <a href="#82413" class="date">10-Apr-2008 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thank you Dave for your code below.&nbsp; Here is one change I made to avoid a redundant quote at the end of some lines (at least when I used excel:&nbsp; <br />
<br />
Added another --length;&nbsp; into the if statement below:<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($trim_quote){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // ADD TO FIX extra quote<br />
&nbsp;&nbsp;&nbsp; --$length;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82050""></a>
  <div class="note">
   <strong class="user">lewis [ at t] hcoms [d dot t] co [d dot t] uk</strong>
   <a href="#82050" class="date">26-Mar-2008 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Those of you trying to use split for CSV, it won't always work as expected. Instead, try using a simple stack method:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Create a 2D array from a CSV string<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param mixed $data 2D array<br />
&nbsp;&nbsp; &nbsp; * @param string $delimiter Field delimiter<br />
&nbsp;&nbsp; &nbsp; * @param string $enclosure Field enclosure<br />
&nbsp;&nbsp; &nbsp; * @param string $newline Line seperator<br />
&nbsp;&nbsp; &nbsp; * @return<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">parse</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">','</span><span class="keyword">, </span><span class="default">$enclosure </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$newline </span><span class="keyword">= </span><span class="string">"\n"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$last_pos </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create a continuous loop<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;; ++</span><span class="default">$i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get the positions<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comma_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newline_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$newline</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Which one comes first?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">((</span><span class="default">$comma_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$comma_pos</span><span class="keyword">, (</span><span class="default">$quote_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$quote_pos</span><span class="keyword">, (</span><span class="default">$newline_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$newline_pos</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Cache it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$char </span><span class="keyword">= (isset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">])) ? </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] : </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$done </span><span class="keyword">= (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">$end</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It it a special character?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$delimiter </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Ignore it as we're still in a quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">&amp;&amp; !</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">- ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Is the last thing a quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$trim_quote</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Well then get rid of it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">--</span><span class="default">$length</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Get all the contents of this column<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">][] = (</span><span class="default">$length </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$enclosure </span><span class="keyword">. </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$last_pos</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)) : </span><span class="string">''</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And we're done<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$done</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Save the last position<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$last_pos </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Next row?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Our quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$enclosure</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Toggle it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's an opening quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim this opening quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$last_pos </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">== </span><span class="default">$pos</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ++</span><span class="default">$last_pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// It's a closing quote<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim the last quote?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This *should* work for any valid CSV string, regardless of what it contains inside its quotes (using RFC 4180). It should also be faster than most of the others I've seen. It's very simple in concept, and thoroughly commented.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81490""></a>
  <div class="note">
   <strong class="user">Dave Walter</strong>
   <a href="#81490" class="date">01-Mar-2008 12:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to&nbsp; the getCSVValues() function posted by justin at cam dot org, my testing indicates that it has a problem with a CSV string like this:<br />
<br />
1,2,"3,""4,5"",6",7<br />
<br />
This parses as:<br />
<br />
array(6) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(4) "3,"4"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "5"<br />
&nbsp; [4]=&gt;<br />
&nbsp; string(0) ""<br />
&nbsp; [5]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
instead of:<br />
<br />
array(4) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(1) "1"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(1) "2"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(9) "3,"4,5",6"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(1) "7"<br />
}<br />
<br />
To fix this, I changed the second substr_count to look for an odd number of quotes, as opposed to any quotes at all:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nquotes </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">) %</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// Look for an odd-number of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Put the quoted string's pieces back together again<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Remove first and last quotes, then merge pairs of quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">=&amp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$qstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75236""></a>
  <div class="note">
   <strong class="user">Mike</strong>
   <a href="#75236" class="date">19-May-2007 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
// Split a string into words on boundaries of one or more spaces, tabs or new-lines<br />
$s = "Please cut&nbsp;&nbsp; \t me \n in pieces";<br />
$words = split("[\n\r\t ]+", $s);<br />
print_r($words);<br />
<br />
// Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Please<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; cut<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; me<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; in<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; pieces<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73899""></a>
  <div class="note">
   <strong class="user">Jort</strong>
   <a href="#73899" class="date">14-Mar-2007 09:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for EITHER open square brackets OR close square brackets, then '[[]]' won't work (reasonably expected), but neither will '[\[\]]', nor with any number of escapes. HOWEVER, if your pattern is '[][]' it will work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61648""></a>
  <div class="note">
   <strong class="user">RE: gcerretini at technica dot net /UTF8</strong>
   <a href="#61648" class="date">08-Feb-2006 01:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Original problem:<br />
=================<br />
<br />
I've try using split function.<br />
<br />
<span class="default">&lt;?php<br />
$ferro</span><span class="keyword">=</span><span class="string">"2&amp;#65533;12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[&amp;#65533;]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$ferro</span><span class="keyword">=</span><span class="string">"2d12"</span><span class="keyword">;<br />
</span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[d]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br />
echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This return:<br />
============<br />
<br />
2&amp;#65533;12<br />
p1-2<br />
p2-<br />
p3-12<br />
2d12<br />
p1-2<br />
p2-12<br />
p3-<br />
<br />
I use charset UTF-8. When I use char &amp;#65533; the split function ad an empty string between "2" and "12"... Why?<br />
<br />
Explanation:<br />
============<br />
<br />
UTF-8 charset codes some characters (like the "&amp;#65533;" character) into two bytes. In fact the regular expresion "[&amp;#65533;]" contains 4 bytes (4 non-unicode characters). To demonstrate the real situation I wrote following example:<br />
<br />
$ferro="2de12";<br />
$valore=split("[de]",$ferro);<br />
echo $ferro."&lt;br&gt;";<br />
echo "p1-".$valore[0]."&lt;br&gt;";<br />
echo "p2-".$valore[1]."&lt;br&gt;";<br />
echo "p3-".$valore[2]."&lt;br&gt;";<br />
<br />
This returns:<br />
=============<br />
<br />
2d12<br />
p1-2<br />
p2-<br />
p3-12</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58445""></a>
  <div class="note">
   <strong class="user">franz at fholzinger dot com</strong>
   <a href="#58445" class="date">04-Nov-2005 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The example from ramkumar rajendran did not work. <br />
$line = split("/\n", $input_several_lines_long);<br />
I do not know why this does not work for me.<br />
<br />
The following has worked for me to get a maximum of 2 array parts separated by the first new line (independant if saved under UNIX or WINDOWS):<br />
$line = preg_split('/[\n\r]+/',$input_several_lines_long,2);<br />
Also empty lines are not considered here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54306""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54306" class="date">30-Jun-2005 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Actually, this version is better than the last I submitted.&nbsp; The goal here is to be able to engage in *multiple* delimeter removal passes; for all but the last pass, set the third value to "1", and everything should go well.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s, $restore_quotes=0 )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $restore_quotes )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].'"'.$val.'"';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54304""></a>
  <div class="note">
   <strong class="user">robin at teddyb dot org</strong>
   <a href="#54304" class="date">30-Jun-2005 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
wchris's quotesplit assumes that anything that is quoted must also be a complete delimiter-seperated entry by itself.&nbsp; This version does not.&nbsp; It also uses split's argument order.<br />
<br />
&nbsp;&nbsp;&nbsp; function quotesplit( $splitter=',', $s )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //First step is to split it up into the bits that are surrounded by quotes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //the logic further down<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Add the whole string, untouched to the previous value in the array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[count($result)-1] = $result[count($result)-1].$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Break up the string according to the delimiter character<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50113""></a>
  <div class="note">
   <strong class="user">wchris</strong>
   <a href="#50113" class="date">18-Feb-2005 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
moritz's quotesplit didn't work for me. It seemed to split on a comma even though it was between a pair of quotes. However, this did work:<br />
<br />
function quotesplit($s, $splitter=',')<br />
{<br />
//First step is to split it up into the bits that are surrounded by quotes and the bits that aren't. Adding the delimiter to the ends simplifies the logic further down<br />
<br />
&nbsp;&nbsp;&nbsp; $getstrings = split('\"', $splitter.$s.$splitter);<br />
<br />
//$instring toggles so we know if we are in a quoted string or not<br />
&nbsp;&nbsp;&nbsp; $delimlen = strlen($splitter);<br />
&nbsp;&nbsp;&nbsp; $instring = 0;<br />
<br />
&nbsp;&nbsp;&nbsp; while (list($arg, $val) = each($getstrings))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($instring==1)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Add the whole string, untouched to the result array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = $val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
//Break up the string according to the delimiter character<br />
//Each string has extraneous delimiters around it (inc the ones we added above), so they need to be stripped off<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(list($iarg, $ival) = each($temparray))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[] = trim($ival);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $instring = 1;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49130""></a>
  <div class="note">
   <strong class="user">ramkumar rajendran</strong>
   <a href="#49130" class="date">17-Jan-2005 07:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A correction to a earlier note<br />
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("/\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure to do</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47127""></a>
  <div class="note">
   <strong class="user">claes at dot2me.com</strong>
   <a href="#47127" class="date">04-Nov-2004 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though this is obvious, the manual is a bit incorrect when claiming that the return will always be 1+number of time the split pattern occures.&nbsp; If the split pattern is the first part of the string, the return will still be 1.&nbsp; E.g.<br />
<br />
$a = split("zz," "zzxsj.com");<br />
count($a);<br />
<br />
=&gt; 1.<br />
<br />
The return of this can not in anyway be seperated from the return where the split pattern is not found.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41133""></a>
  <div class="note">
   <strong class="user">alphibia at alphibia dot com</strong>
   <a href="#41133" class="date">31-Mar-2004 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'd like to correct myself, I found that after testing my last solution it will create 5 lines no matter what... So I added this to make sure that it only displays 5 if there are five newlines. :-)<br />
<br />
<span class="default">&lt;?php <br />
&nbsp;&nbsp;&nbsp; $MaxNewLines </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$BRCount </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$Message</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$BRCount</span><span class="keyword">&lt;</span><span class="default">$MaxNewLines</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">$BRCount</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; else if(</span><span class="default">$BRCount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; <br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$MessageArray </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">, </span><span class="default">$MaxNewLines</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; do&nbsp; &nbsp; { <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u</span><span class="keyword">++; <br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$u</span><span class="keyword">&lt;(</span><span class="default">$MaxNewLines</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">]); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;</span> <br />
<br />
-Tim<br />
<a href="http://www.alphibia.com" rel="nofollow" target="_blank">http://www.alphibia.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37635""></a>
  <div class="note">
   <strong class="user">nomail at please dot now</strong>
   <a href="#37635" class="date">21-Nov-2003 06:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use split to check on line feeds (\n), the following won't work:<br />
<br />
$line = split("\n", $input_several_lines_long);<br />
<br />
You really have to do this instead, notice the second slash:<br />
$line = split("\\n", $input_several_lines_long);<br />
<br />
Took me a little while to figure out.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36853""></a>
  <div class="note">
   <strong class="user">krahn at niehs dot nih dot gov</strong>
   <a href="#36853" class="date">24-Oct-2003 09:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; strange things happen with split<br />
&gt; this didn't work<br />
&gt; $vontag $vonmonat were empty strings<br />
...<br />
&gt; list ($vontag , $vonmonat) = split ('.' , $fromdate); // &lt;&lt; bad<br />
<br />
Split is acting exactly as it should; it splits on regular expressions.<br />
A period is a regular expression pattern for a single character.<br />
So, an actual period must be escaped with a backslash:&nbsp; '\.'<br />
A period within brackets is not an any-character pattern, because it does<br />
not make sense in that context.<br />
<br />
Beware that regular expressions can be confusing becuase there<br />
are a few different varieties of patterns.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36398""></a>
  <div class="note">
   <strong class="user">dalu at uni dot de</strong>
   <a href="#36398" class="date">08-Oct-2003 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
php4.3.0<br />
<br />
strange things happen with split<br />
<br />
this didn't work<br />
$vontag $vonmonat were empty strings<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
however this one worked perfectly<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
btw this fn checks if $now if between $fromdate and $todate<br />
use it if you like</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28369""></a>
  <div class="note">
   <strong class="user">jeffrey at jhu dot edu</strong>
   <a href="#28369" class="date">10-Jan-2003 10:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In answer to gwyne at gmx dot net, dec 1, 2002:<br />
<br />
For split(), when using a backslash as the delimiter, you have to *double escape* the backslash.<br />
<br />
example:<br />
==================================<br />
&lt;pre&gt;<br />
&lt;?<br />
$line = 'stuff\\\thing\doodad\\';<br />
$linearray = split('\\\\', $line); //&lt;--NOTE USE OF FOUR(4)backslashes<br />
print join(":", $linearray);<br />
?&gt;<br />
&lt;/pre&gt;<br />
<br />
==================================<br />
output is:<br />
<br />
&lt;pre&gt;<br />
stuff::thing:doodad:<br />
&lt;/pre&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23546""></a>
  <div class="note">
   <strong class="user">paha at paha dot hu</strong>
   <a href="#23546" class="date">22-Jul-2002 03:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's evident but not mentioned in the documentation that using asterisks is more restricted than in a normal regular expression.<br />
<br />
for exaple you cannot say:<br />
<br />
split(";*",$string);<br />
<br />
because what if there's no ";" separator?(which is covered by this regular expression) <br />
<br />
so you have to use at least<br />
<br />
split(";+",$quotatxt);<br />
<br />
in this situation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22415""></a>
  <div class="note">
   <strong class="user">fotw at gmx dot net</strong>
   <a href="#22415" class="date">17-Jun-2002 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ups! It seems that neither explode nor split REALY takes a STRING but only a single character as a string for splitting the string.<br />
&nbsp;I found this problem in one of my codes when trying to split a string using ";\n" as breaking string. The result, only ";" was thaken... the rest of the string was ignored.<br />
&nbsp;Same when I tried to substitute "\n" by any other thing. :(</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22396""></a>
  <div class="note">
   <strong class="user">not at anythingspecial dot com</strong>
   <a href="#22396" class="date">17-Jun-2002 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to do a split on a period make sure you escape the period out..<br />
<br />
$ext_arr = split("\.","something.jpg");<br />
... because<br />
$ext_arr = split(".","something.jpg"); won't work properly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22267""></a>
  <div class="note">
   <strong class="user">kang at elpmis dot com</strong>
   <a href="#22267" class="date">12-Jun-2002 08:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a good way to display a comma delimited file with two columns.&nbsp; The first column is the URL's description, the second is the actual URL.<br />
<br />
&lt;ul&gt;<br />
<span class="default">&lt;?php<br />
&nbsp; $fname</span><span class="keyword">=</span><span class="string">"relatedlinks.csv"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fname</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">) or die(</span><span class="string">"Error found."</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$desc</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$dummy</span><span class="keyword">) = </span><span class="default">split</span><span class="keyword">( </span><span class="string">","</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;li&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;a href='</span><span class="default">$url</span><span class="string">'&gt;</span><span class="default">$desc</span><span class="string">&lt;/a&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;/li&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>&lt;/ul&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21942""></a>
  <div class="note">
   <strong class="user">jchart at sdccu dot net</strong>
   <a href="#21942" class="date">31-May-2002 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Ed. note: Close. The pipe *is* an operator in PHP, but
<br />
the reason this fails is because it's also an operator
<br />
in the regex syntax. The distinction here is important
<br />
since a PHP operator inside a string is just a character.]
<br />

<br />
The reason your code:
<br />

<br />
$line = "12|3|Fred"; 
<br />
list ($msgid, $msgref, $msgtopic)=split('|', $line); 
<br />

<br />
didn't work is because the "|" symbol is an operator in PHP. If you want to use the pipe symbol as a delimiter you must excape it with a back slash, "\|". You code should look like this:
<br />

<br />
$line = "12|3|Fred"; 
<br />
list ($msgid, $msgref, $msgtopic)=split('\|', $line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21557""></a>
  <div class="note">
   <strong class="user">mcgarry at tig dot com dot au</strong>
   <a href="#21557" class="date">17-May-2002 12:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
split() doesn't like NUL characters within the string, it treats the first one it meets as the end of the string, so if you have data you want to split that can contain a NUL character you'll need to convert it into something else first, eg:<br />
<br />
$line=str_replace(chr(0),'',$line);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
