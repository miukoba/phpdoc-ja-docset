<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>SoapClient コンストラクタ</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="soapclient.soapcall.html">≪ SoapClient::__soapCall</a></li>
      <li style="float: right;"><a href="class.soapserver.html">SoapServer ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.soapclient.html">SoapClient</a></li>
    <li>SoapClient コンストラクタ</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="soapclient.soapclient" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SoapClient::SoapClient</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.0.1)</p><p class="refpurpose"><span class="refname">SoapClient::SoapClient</span> &mdash; <span class="dc-title">SoapClient コンストラクタ</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-soapclient.soapclient-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>SoapClient::SoapClient</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$wsdl</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   このコンストラクタは、<em>WSDL</em> モードもしくは
   <em>非 WSDL</em> モードで <a href="class.soapclient.html" class="classname">SoapClient</a>
   オブジェクトを生成します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-soapclient.soapclient-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">wsdl</code></dt>

     <dd>

      <p class="para">
       <em>WSDL</em> ファイルの URI もしくは
       <em>非 WSDL</em> モードの場合 <strong><code>NULL</code></strong>
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        開発中は、WSDL のキャッシュを <var class="filename">php.ini</var> の
        <em>soap.wsdl_cache_ttl</em> で無効にしておくとよいでしょう。
        そうしないと、WSDL を変更しても
        <em>soap.wsdl_cache_ttl</em> で設定した時間が経過するまで
        それが反映されなくなります。
       </p>
      </p></blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       オプションの配列。もし WSDL モードで動作させる場合、
       このパラメータはオプションです。非 WSDL モードで動作させる場合、
       <em>location</em> と <em>uri</em>
       オプションを指定する必要があります。ここで、
       <em>location</em> はリクエストの送り先である SOAP サーバーの URL、
       <em>uri</em> は SOAP サービスのターゲット名前空間です。
      </p>
      <p class="para">
       <em>style</em> および <em>use</em>
       オプション は非 WSDL モードでのみ動作します。
       WSDL モードでは、これらは WSDL ファイルで指定されます。
      </p>
      <p class="para">
       <em>soap_version</em> オプションは、
       <strong><code>SOAP_1_1</code></strong> あるいは <strong><code>SOAP_1_2</code></strong>
       のどちらかを指定しなければいけません。それぞれ SOAP 1.2、SOAP 1.2 を表します。
       省略した場合は 1.1 を使います。
      </p>
      <p class="para">
       HTTP 認証用として、<em>login</em> および
       <em>password</em> オプションが使用可能です。
       プロキシサーバー経由で HTTP 接続を確立する場合は、
       <em>proxy_host</em>,
       <em>proxy_port</em>, <em>proxy_login</em>
       および <em>proxy_password</em>
       の各オプションを使用してください。
       HTTPS クライアント証明書による認証には
       <em>local_cert</em> と <em>passphrase</em>
       を使用します。認証情報は <em>authentication</em> 
       オプションで指定します。認証方式は
       <strong><code>SOAP_AUTHENTICATION_BASIC</code></strong> (デフォルト) あるいは
       <strong><code>SOAP_AUTHENTICATION_DIGEST</code></strong> のいずれかとなります。
      </p>
      <p class="para">
       <em>compression</em> オプションにより、
       HTTP SOAP リクエストやレスポンスの圧縮を行うことができます。
      </p>
      <p class="para">
       <em>encoding</em>
       オプションは内部的な文字エンコーディングを定義します。
       このオプションは SOAP リクエストのエンコーディング (常に utf-8)
       を変更しませんが、その中の文字列を変換します。
      </p>
      <p class="para">
       <em>trace</em> オプションはリクエストのトレースを有効にします。
       失敗したときにバックトレースが可能となります。
       デフォルトは <strong><code>FALSE</code></strong> です。
      </p>
      <p class="para">
       <em>classmap</em> オプションは WSDL 型を PHP
       クラスにマッピングするために使用可能です。
       このオプションには、キーとしてWSDL 型、値として PHP
       クラスの名前を持つ配列を指定する必要があります。
      </p>
      <p class="para">
       boolean のオプション <em>trace</em> を設定すると、
       <a href="soapclient.getlastrequest.html" class="link">
       SoapClient-&gt;__getLastRequest</a>、
      <a href="soapclient.getlastrequestheaders.html" class="link">
       SoapClient-&gt;__getLastRequestHeaders</a>、
       <a href="soapclient.getlastresponse.html" class="link">
       SoapClient-&gt;__getLastResponse</a> および
       <a href="soapclient.getlastresponseheaders.html" class="link">
       SoapClient-&gt;__getLastResponseHeaders</a>
       といったメソッドが使用できるようになります。
      </p>
      <p class="para">
       <em>exceptions</em> オプションは boolean 値で、soap のエラー時に
       <a href="soapfault.soapfault.html" class="link">
       SoapFault</a> 型の例外をスローさせるかどうかを設定します。
      </p>
      <p class="para">
       <em>connection_timeout</em> オプションは、SOAP
       サービスに接続する際のタイムアウト秒数を指定します。
       これを使用しても、レスポンスが遅いサービスのタイムアウトを定義することはできません。
       サービスのコールが完了するまでの待ち時間を制限するには、設定項目
       <a href="filesystem.configuration.html#ini.default-socket-timeout" class="link">default_socket_timeout</a>
       を使用します。
      </p>
      <p class="para">
       <em>typemap</em> オプションは、型マッピングの配列です。
       この配列のキーは <em>type_name</em>、
       <em>type_ns</em> (名前空間 URI)、<em>from_xml</em>
       (引数として文字列をひとつ受け取るコールバック) そして <em>to_xml</em>
       (引数としてオブジェクトをひとつ受け取るコールバック) です。
      </p>
      <p class="para">
       <em>cache_wsdl</em> オプションは
       <strong><code>WSDL_CACHE_NONE</code></strong>、
       <strong><code>WSDL_CACHE_DISK</code></strong>、
       <strong><code>WSDL_CACHE_MEMORY</code></strong> あるいは
       <strong><code>WSDL_CACHE_BOTH</code></strong> のいずれかです。
      </p>
      <p class="para">
       <em>user_agent</em> オプションは、
       <em>User-Agent</em> ヘッダで使用する文字列を指定します。
      </p>
      <p class="para">
       <em>stream_context</em> オプションは、
       <a href="context.html" class="link">context</a> 用のリソースです。
      </p>
      <p class="para">
       <em>features</em> オプションは
       <strong><code>SOAP_SINGLE_ELEMENT_ARRAYS</code></strong>、
       <strong><code>SOAP_USE_XSI_ARRAY_TYPE</code></strong>、
       <strong><code>SOAP_WAIT_ONE_WAY_CALLS</code></strong> のビットマスクです。
      </p>
      <p class="para">
       <em>keep_alive</em> オプションは boolean 値で、
       <em>Connection: Keep-Alive</em> ヘッダーと
       <em>Connection: close</em> ヘッダーのどちらを送信するかを決めます。
      </p>
      <p class="para">
       <em>ssl_method</em> オプションは
       <strong><code>SOAP_SSL_METHOD_TLS</code></strong> か
       <strong><code>SOAP_SSL_METHOD_SSLv2</code></strong>、
       <strong><code>SOAP_SSL_METHOD_SSLv3</code></strong>、あるいは
       <strong><code>SOAP_SSL_METHOD_SSLv23</code></strong> のいずれかです。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-soapclient.soapclient-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   <span class="methodname"><strong>SoapClient::SoapClient()</strong></span> は、
   非 WSDL モードで <em>location</em> や
   <em>uri</em> オプションを指定しなかったときに
   <strong><code>E_ERROR</code></strong> エラーとなります。
  </p>
  <p class="para">
   <code class="parameter">wsdl</code> URI が読み込めなかった場合に
   <a href="class.soapfault.html" class="classname">SoapFault</a> をスローします。
  </p>
 </div>


<div class="refsect1 changelog" id="refsect1-soapclient.soapclient-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.5.0</td>
       <td>
        <em>ssl_method</em> オプションが追加されました。
       </td>
      </tr>

      <tr>
       <td>5.4.0</td>
       <td>
        <em>keep_alive</em> オプションが追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-soapclient.soapclient-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5429">
    <p><strong>例1 <span class="function"><strong>SoapClient::SoapClient()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'soap_version'&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">SOAP_1_2</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'login'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"some_name"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'password'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"some_password"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'proxy_host'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_port'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">8080</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'proxy_host'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_port'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">8080</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_login'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"some_name"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'proxy_password'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"some_password"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'local_cert'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"cert_key.pem"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'location'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://localhost/soap.php"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'uri'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://test-uri/"</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'location'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://localhost/soap.php"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'uri'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"http://test-uri/"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'style'&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">SOAP_DOCUMENT</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'use'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">SOAP_LITERAL</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$client&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;array(</span><span style="color: #DD0000">'compression'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">SOAP_COMPRESSION_ACCEPT&nbsp;</span><span style="color: #007700">|&nbsp;</span><span style="color: #0000BB">SOAP_COMPRESSION_GZIP</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"some.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'encoding'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">));<br /><br />class&nbsp;</span><span style="color: #0000BB">MyBook&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$title</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$author</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"books.wsdl"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'classmap'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'book'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"MyBook"</span><span style="color: #007700">)));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114976""></a>
  <div class="note">
   <strong class="user">Peter</strong>
   <a href="#114976" class="date">08-May-2014 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you need to use ws-security with a nonce and a timestamp, you can use this :<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">WsseAuthHeader </span><span class="keyword">extends </span><span class="default">SoapHeader </span><span class="keyword">{<br />
<br />
private </span><span class="default">$wss_ns </span><span class="keyword">= </span><span class="string">'<a href="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" rel="nofollow" target="_blank">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd</a>'</span><span class="keyword">;<br />
private </span><span class="default">$wsu_ns </span><span class="keyword">= </span><span class="string">'<a href="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" rel="nofollow" target="_blank">http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd</a>'</span><span class="keyword">;<br />
<br />
function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$created </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'Y-m-d\TH:i:s\Z'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nonce </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$passdigest </span><span class="keyword">= </span><span class="default">base64_encode</span><span class="keyword">( </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">, </span><span class="default">sha1</span><span class="keyword">( </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'H*'</span><span class="keyword">, </span><span class="default">$nonce</span><span class="keyword">) . </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'a*'</span><span class="keyword">,</span><span class="default">$created</span><span class="keyword">).&nbsp; </span><span class="default">pack</span><span class="keyword">(</span><span class="string">'a*'</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">))));<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auth </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auth</span><span class="keyword">-&gt;</span><span class="default">Username </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$user</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auth</span><span class="keyword">-&gt;</span><span class="default">Password </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$pass</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auth</span><span class="keyword">-&gt;</span><span class="default">Nonce </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$passdigest</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$auth</span><span class="keyword">-&gt;</span><span class="default">Created </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$created</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wsu_ns</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$username_token </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$username_token</span><span class="keyword">-&gt;</span><span class="default">UsernameToken </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$auth</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="string">'UsernameToken'</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$security_sv </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$username_token</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="string">'UsernameToken'</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="string">'Security'</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">wss_ns</span><span class="keyword">, </span><span class="string">'Security'</span><span class="keyword">, </span><span class="default">$security_sv</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
}<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
and with your SoapClient do :<br />
<br />
<span class="default">&lt;?php<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://host/path" rel="nofollow" target="_blank">http://host/path</a>"</span><span class="keyword">);<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__setSoapHeaders</span><span class="keyword">(Array(new </span><span class="default">WsseAuthHeader</span><span class="keyword">(</span><span class="string">"user"</span><span class="keyword">, </span><span class="string">"pass"</span><span class="keyword">)));<br />
</span><span class="default">?&gt;<br />
</span><br />
works for me. based on a stackoverlfow post which only did the username and password, not the nonce and the timestamp</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114252""></a>
  <div class="note">
   <strong class="user">michael dot arnauts at gmail dot com</strong>
   <a href="#114252" class="date">30-Jan-2014 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This doesn't seem to be documented, but when you want to use compression for your outgoing requests, you have to OR with the compression level:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"some.wsdl"</span><span class="keyword">, <br />
&nbsp; array(</span><span class="string">'compression' </span><span class="keyword">=&gt; </span><span class="default">SOAP_COMPRESSION_ACCEPT </span><span class="keyword">| </span><span class="default">SOAP_COMPRESSION_GZIP </span><span class="keyword">| </span><span class="default">9</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
This can be really usefull if you want to send large amounts of data.<br />
<br />
Source: https://bugs.php.net/bug.php?id=36283</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112970""></a>
  <div class="note">
   <strong class="user">tolean dot dj at gmail dot com</strong>
   <a href="#112970" class="date">13-Aug-2013 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function for easier debugging:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">soapDebug</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$requestHeaders </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastRequestHeaders</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$request </span><span class="keyword">= </span><span class="default">prettyXml</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastRequest</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$responseHeaders </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastResponseHeaders</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$response </span><span class="keyword">= </span><span class="default">prettyXml</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastResponse</span><span class="keyword">());<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;code&gt;' </span><span class="keyword">. </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$requestHeaders</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)) . </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'&lt;code&gt;' </span><span class="keyword">. </span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$responseHeaders</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)) . </span><span class="string">'&lt;/code&gt;' </span><span class="keyword">. </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">highlight_string</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) . </span><span class="string">"&lt;br/&gt;\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'location' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://sita.local/_mpay/server.php" rel="nofollow" target="_blank">http://sita.local/_mpay/server.php</a>'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'uri' </span><span class="keyword">=&gt; </span><span class="string">'<a href="http://sita.local/_mpay/" rel="nofollow" target="_blank">http://sita.local/_mpay/</a>'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
));<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="string">'getDate'</span><span class="keyword">, array(</span><span class="string">'format' </span><span class="keyword">=&gt; </span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">));<br />
</span><span class="default">soapDebug</span><span class="keyword">(</span><span class="default">$client</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112549""></a>
  <div class="note">
   <strong class="user">miguel dot angel dot fuentes dot casanova at gmail dot com</strong>
   <a href="#112549" class="date">28-Jun-2013 04:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Somebody using SoapClient has sometimes a lot of CLOSE_WAIT states?<br />
<br />
It's in a local connection in a openSuse 11 (x86_64, version 11, patchlevel 2) with Apache 2.2.22 and PHP 5.3.15.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111892""></a>
  <div class="note">
   <strong class="user">pgl at yoyo dot org</strong>
   <a href="#111892" class="date">09-Apr-2013 09:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if libxml_disable_entity_loader() has been called, you cannot specify a WSDL file - you'll get an error that PHP "failed to load external entity".<br />
<br />
To resolve this, add<br />
<br />
<span class="default">&lt;?php<br />
libxml_disable_entity_loader</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Above any calls to instantiate SoapClient.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111682""></a>
  <div class="note">
   <strong class="user">francesco [at] paladinux [dot] net</strong>
   <a href="#111682" class="date">16-Mar-2013 05:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Where you have the problem of <br />
"looks like we got no XML document SoapClient", really the real problem is the xml code from remote server is not clear (after last tag is possible that you have space or other caracter that the your supplier of service have lost :&nbsp; no one is perfect!)<br />
I've read some solution, like here, but you must to know that is possible, that is possible that the remote server don't wrong, and the "surplus" (latin word for added values) is needed.<br />
In particolar with axis Java server, is possible that the configuration of server is needed and the "surplus" is one or more attachments...<br />
The solution is 3:<br />
1) contact your supplier if is possible to remove caracter if is an error (good luck! ;) )<br />
2) use another class like nusoap resolve the problem (but has other problem!)<br />
3) this technical solution:<br />
when call the wsdl be sure that the option trace and exceptions are setted (the first true and the second false)<br />
<br />
<span class="default">&lt;?php<br />
$SoapClient </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">NULL</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array( <br />
....<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'trace'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span>(if you don't do that you can't use the __getLastResponse)<br />
<br />
Now You can do the request and use __getLastResponse() to obtain all the part..<br />
<span class="default">&lt;?php<br />
$result&nbsp; </span><span class="keyword">= </span><span class="default">$SoapClient </span><span class="keyword">-&gt; </span><span class="default">problematicCall</span><span class="keyword">(</span><span class="default">$par</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
After all&nbsp; you obtain a variable like that:<br />
<br />
-----=_Part_9325_126764118.1363377774664<br />
Content-Type: text/xml; CHARSET=shift-jis<br />
Content-Transfer-Encoding: binary<br />
Content-Id: &lt;1C06F7FBA057796C5A6185605F9F93E4&gt;<br />
<br />
&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;...etc &gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;<br />
<br />
&amp;lt;MESSAGGIO&amp;gt;<br />
&nbsp; &amp;lt;DA&amp;gt;MI&amp;lt;/DA&amp;gt;<br />
&nbsp; &amp;lt;A&amp;gt;PALADINUX&amp;lt;/A&amp;gt;<br />
&nbsp; &amp;lt;ID&amp;gt;12345&amp;lt;/ID&amp;gt;<br />
&nbsp; &amp;lt;TIPODOC&amp;gt;RC&amp;lt;/TIPODOC&amp;gt;<br />
&nbsp; &amp;lt;RISPOSTA&amp;gt;<br />
&amp;lt;/MESSAGGIO&amp;gt;<br />
&lt;/rxproblematicCallReturn&gt;&lt;/ns1:rxCatalogoMaterialiResponse&gt;&lt;/soapenv:Body&gt;&lt;/soapenv:Envelope&gt;<br />
------=_Part_9325_126764118.1234567890123<br />
Content-Type: application/zip<br />
Content-Transfer-Encoding: binary<br />
Content-Id: &lt;43E91F7E7PALADINUXE07BF041A7BAC9&gt;<br />
-------------------------<br />
<br />
Is easy understand if the added part is needed or not!<br />
Now you can explode all the part and parse!<br />
<br />
Hope this can help you.See ya in the cyberspace!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109000""></a>
  <div class="note">
   <strong class="user">ale dot comp_06 at xox dot ch</strong>
   <a href="#109000" class="date">12-Jun-2012 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your service is protected through basic http authentication and you're not using wsdl, you will have to put the login in the SoapClient's option:
<br />

<br />
<span class="default">&lt;?php
<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">null</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'soap_version' </span><span class="keyword">=&gt; </span><span class="default">SOAP_1_2</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'location' </span><span class="keyword">=&gt; ...
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ...,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'login' </span><span class="keyword">=&gt; </span><span class="string">'username'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'password' </span><span class="keyword">=&gt; </span><span class="string">'*******'</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; )
<br />
);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106393""></a>
  <div class="note">
   <strong class="user">chris at phblock dot atNoSpam</strong>
   <a href="#106393" class="date">04-Nov-2011 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this is the syntax of typemap (found at <a href="http://svn.php.net/viewvc/php/php-src/trunk/ext/soap/tests/typemap012.phpt?view=markup" rel="nofollow" target="_blank">http://svn.php.net/viewvc/php/php-src/trunk/ext/soap/tests/typemap012.phpt?view=markup</a>)<br />
<span class="default">&lt;?php<br />
$options</span><span class="keyword">=Array(<br />
</span><span class="string">'typemap' </span><span class="keyword">=&gt; array(<br />
array(</span><span class="string">"type_ns"&nbsp; </span><span class="keyword">=&gt; </span><span class="string">"<a href="http://schemas.nothing.com" rel="nofollow" target="_blank">http://schemas.nothing.com</a>"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"type_name" </span><span class="keyword">=&gt; </span><span class="string">"soap"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"to_xml"&nbsp; </span><span class="keyword">=&gt; </span><span class="string">"some_funktion_name"</span><span class="keyword">)<br />
));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105398""></a>
  <div class="note">
   <strong class="user">Chris Gunawardena</strong>
   <a href="#105398" class="date">15-Aug-2011 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To monitor SOAP calls in and out of a unix server:<br />
<br />
sudo tcpdump -nn -vv -A -s 0 -i eth0 dst or src host xxx.xxx.xxx.xxx and port 80<br />
<br />
And always use 'cache_wsdl' =&gt; WSDL_CACHE_NONE</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105091""></a>
  <div class="note">
   <strong class="user">svenr at selfhtml dot org</strong>
   <a href="#105091" class="date">27-Jul-2011 12:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "classmap" option actually is a mapping from the "ComplexType" used within the SOAP to your PHP Classes.<br />
<br />
Do not confuse the XML tag names returned for your request with these ComplexTypes. SOAP allows them to be different.<br />
<br />
I had something like this:<br />
...<br />
&lt;soapenv:body&gt;<br />
&lt;ns1:TagName&gt;<br />
&nbsp; &lt;ns1:Content&gt;FooBar&lt;/ns1:Content&gt;<br />
&lt;/ns1:TagName&gt;<br />
&lt;/soapenv:body&gt;<br />
<br />
TagName is not the key you want to put in your classmap, you have to know the name of the ComplexType this TagName refers to. This info is contained inside the WSDL resource.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104177""></a>
  <div class="note">
   <strong class="user">willem dot stuursma at hyves dot nl</strong>
   <a href="#104177" class="date">30-May-2011 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use classes in a different namespace in your classmap, just use the backslash in the the target class name.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
$classmap </span><span class="keyword">= array(</span><span class="string">'result' </span><span class="keyword">=&gt; </span><span class="string">'MyNamespace\\Result'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You need to specify the backslash twice because it is the escape character in strings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103305""></a>
  <div class="note">
   <strong class="user">simonlang at gmx dot ch</strong>
   <a href="#103305" class="date">06-Apr-2011 03:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example for a soap client with HTTP authentication over a proxy:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">new </span><span class="default">SoapClient</span><span class="keyword">(
<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'service.wsdl'</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Stuff for development.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'trace' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'cache_wsdl' </span><span class="keyword">=&gt; </span><span class="default">WSDL_CACHE_NONE</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'features' </span><span class="keyword">=&gt; </span><span class="default">SOAP_SINGLE_ELEMENT_ARRAYS</span><span class="keyword">,
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Auth credentials for the SOAP request.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'login' </span><span class="keyword">=&gt; </span><span class="string">'username'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'password' </span><span class="keyword">=&gt; </span><span class="string">'password'</span><span class="keyword">,
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Proxy url.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy_host' </span><span class="keyword">=&gt; </span><span class="string">'example.com'</span><span class="keyword">, </span><span class="comment">// Do not add the schema here (http or https). It won't work.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy_port' </span><span class="keyword">=&gt; </span><span class="default">44300</span><span class="keyword">,
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Auth credentials for the proxy.
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy_login' </span><span class="keyword">=&gt; </span><span class="default">NULL</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy_password' </span><span class="keyword">=&gt; </span><span class="default">NULL</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; )
<br />
);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Providing an URL to a WSDL file on the remote server (which as well is protected with HTTP authentication) didn't work. I downloaded the WSDL and stored it on the local server.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101835""></a>
  <div class="note">
   <strong class="user">Asaf Meller</strong>
   <a href="#101835" class="date">13-Jan-2011 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a full working php .net soap configuration :
<br />
notes
<br />
1. web.config on .net server must work with basichttp binding.
<br />
2. paramaters to soap functions must be passed as :
<br />
array ('parm1_name'=&gt;'parm1_value',
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 'parm2_name'=&gt;'parm2_value'...)
<br />

<br />
<span class="default">&lt;?php
<br />
header</span><span class="keyword">(</span><span class="string">'Content-Type: text/plain'</span><span class="keyword">);
<br />

<br />
try { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options </span><span class="keyword">= array( 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'soap_version'</span><span class="keyword">=&gt;</span><span class="default">SOAP_1_1</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions'</span><span class="keyword">=&gt;</span><span class="default">true</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'trace'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'cache_wsdl'</span><span class="keyword">=&gt;</span><span class="default">WSDL_CACHE_NONE 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com/end_point.wsdl" rel="nofollow" target="_blank">http://www.example.com/end_point.wsdl</a>'</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">); 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Note where 'Get' and 'request' tags are in the XML 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} catch (</span><span class="default">Exception $e</span><span class="keyword">) { 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;h2&gt;Exception Error!&lt;/h2&gt;"</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">(); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } 
<br />

<br />
echo </span><span class="string">'running HelloWorld :'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;
<br />
&nbsp;try {
<br />
&nbsp;&nbsp; </span><span class="default">$response</span><span class="keyword">=</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">HelloWorld</span><span class="keyword">();
<br />
&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; 
<br />
} 
<br />
catch (</span><span class="default">Exception $e</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Caught exception: '</span><span class="keyword">,&nbsp; </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">(), </span><span class="string">"\n"</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
good luck !
<br />
Asaf.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101503""></a>
  <div class="note">
   <strong class="user">faebu at faebu dot ch</strong>
   <a href="#101503" class="date">21-Dec-2010 03:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm experiencing the same problems when trying to load a WDSL fiel which is protected by basic http authentication, since the parameters login and password are just used for the request but not when reading the wdsl file. I just use the following workaround by downloading the xml file to a non-protected location on my server. Please notice that this doesn't support any kind of caching.
<br />

<br />
Hope it helps
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">SoapAuthClient </span><span class="keyword">extends </span><span class="default">SoapClient </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; * Since the PHP SOAP package does not support basic authentication
<br />
&nbsp;&nbsp; &nbsp; * this class downloads the WDSL file using the cURL package and
<br />
&nbsp;&nbsp; &nbsp; * creates a local copy of the wdsl on your server. 
<br />
&nbsp;&nbsp; &nbsp; * Make sure you provide the following additional parameter in the
<br />
&nbsp;&nbsp; &nbsp; * $options Array:
<br />
&nbsp;&nbsp; &nbsp; * wdsl_local_copy =&gt; true
<br />
&nbsp;&nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">private </span><span class="default">$cache_dir </span><span class="keyword">= </span><span class="string">'/home/example/htdocs/cache/'</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$cache_url </span><span class="keyword">= </span><span class="string">'<a href="http://www.example.com/cache/" rel="nofollow" target="_blank">http://www.example.com/cache/</a>'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; 
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">SoapAuthClient</span><span class="keyword">(</span><span class="default">$wdsl</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'wdsl_local_copy'</span><span class="keyword">]) &amp;&amp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options</span><span class="keyword">[</span><span class="string">'wdsl_local_copy'</span><span class="keyword">] == </span><span class="default">true </span><span class="keyword">&amp;&amp;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; isset(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'login'</span><span class="keyword">]) &amp;&amp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; isset(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'password'</span><span class="keyword">])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$file </span><span class="keyword">= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">uniqid</span><span class="keyword">()).</span><span class="string">'.xml'</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache_dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"w"</span><span class="keyword">)) == </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Could not create local WDSL file ('</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache_dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">')'</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$credit </span><span class="keyword">= (</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'login'</span><span class="keyword">].</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'password'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$wdsl</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPAUTH</span><span class="keyword">, </span><span class="default">CURLAUTH_BASIC</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERPWD</span><span class="keyword">, </span><span class="default">$credit</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FILE</span><span class="keyword">, </span><span class="default">$fp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//curl_close($ch);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache_dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$wdsl </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache_url</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'wdsl_local_copy'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'wdsl_force_local_copy'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$wdsl</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$wdsl</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cache_dir</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101491""></a>
  <div class="note">
   <strong class="user">tatupheba at gmail dot com</strong>
   <a href="#101491" class="date">20-Dec-2010 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello folks!<br />
<br />
A hint for developers:<br />
<br />
When programming some soap server set the "soap.wsdl_cache_enabled" directive in php.ini file to 0:<br />
<br />
soap.wsdl_cache_enabled=0<br />
<br />
Otherwise it will give a bunch of strange errors saying that your wsdl is incorrect or is missing.<br />
<br />
Doing that will save you from a lot of useless pain.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100292""></a>
  <div class="note">
   <strong class="user">titan at phpdevshell dot org</strong>
   <a href="#100292" class="date">06-Oct-2010 03:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that if you receive a return error : 'Object reference not set to an instance of an object.'. This could be due to something as simple as passing the incorrect parameters. When you look at this XML:
<br />

<br />
&nbsp;&nbsp;&nbsp; &lt;Get xmlns="<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;request&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;CustomerId&gt;string&lt;/CustomerId&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;From&gt;dateTime&lt;/From&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;To&gt;dateTime&lt;/To&gt;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/request&gt;
<br />
&nbsp;&nbsp;&nbsp; &lt;/Get&gt;
<br />

<br />
Your code should look something like this:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">try {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'soap_version'</span><span class="keyword">=&gt;</span><span class="default">SOAP_1_2</span><span class="keyword">, 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'exceptions'</span><span class="keyword">=&gt;</span><span class="default">true</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'trace'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'cache_wsdl'</span><span class="keyword">=&gt;</span><span class="default">WSDL_CACHE_NONE
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">'<a href="http://example.com/doc.asmx?WSDL" rel="nofollow" target="_blank">http://example.com/doc.asmx?WSDL</a>'</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br />
</span><span class="comment">// Note where 'Get' and 'request' tags are in the XML
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Get</span><span class="keyword">(array(</span><span class="string">'request'</span><span class="keyword">=&gt;array(</span><span class="string">'CustomerId'</span><span class="keyword">=&gt;</span><span class="string">'1234'</span><span class="keyword">)));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } catch (</span><span class="default">Exception $e</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;h2&gt;Exception Error!&lt;/h2&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
</span><span class="default">$results </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Get</span><span class="keyword">(array(</span><span class="string">'request'</span><span class="keyword">=&gt;array(</span><span class="string">'CustomerId'</span><span class="keyword">=&gt;</span><span class="string">'842115'</span><span class="keyword">)));
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98658""></a>
  <div class="note">
   <strong class="user">marcovtwout at hotmail dot com</strong>
   <a href="#98658" class="date">29-Jun-2010 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your WSDL file containts a parameter with a base64Binary type, you should not use base64_encode() when passing along your soap vars. When doing the request, the SOAP library automatically base64 encodes your data, so otherwise you'll be encoding it twice.<br />
<br />
WSDL snipplet:<br />
&lt;element name="content" type="base64Binary" xmime:expectedContentTypes="*/*"/&gt;<br />
<br />
<span class="default">&lt;?php<br />
$string </span><span class="keyword">= </span><span class="string">'data_you_want_to_send___like_xml_in_soap'</span><span class="keyword">;<br />
</span><span class="default">$soap_data </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">//'content' =&gt; base64_encode($string ) // don't do this<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'content' </span><span class="keyword">=&gt; </span><span class="default">$string </span><span class="comment">//do this<br />
</span><span class="keyword">);<br />
</span><span class="default">$response </span><span class="keyword">= </span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">Send</span><span class="keyword">(</span><span class="default">$soap_data</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98613""></a>
  <div class="note">
   <strong class="user">marcovtwout at hotmail dot com</strong>
   <a href="#98613" class="date">26-Jun-2010 03:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Being new to SOAP, I was searching for a while to find out why my message was getting a response in soapUI, but not with my php code. The specific service I was addressing gives a HTTP 202 Accepted on success (no response), but returns a SOAP message on errors.<br />
<br />
Situation:<br />
Using an (authenticated) client connection, and a WDSL file, SOAP calls with type "One-Way" don't give a response header, even though a response is expected.<br />
<br />
Solution:<br />
When calling the client constructor, set SOAP_WAIT_ONE_WAY_CALLS in the $options['features'].</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98357""></a>
  <div class="note">
   <strong class="user">tim at tdinternet dot com</strong>
   <a href="#98357" class="date">10-Jun-2010 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP 5.2.11 seems to not be very picky about the correctness of a WSDL.<br />
<br />
Other SOAP clients were complaining about schema and namespace issues, while PHP's SoapClient worked completely fine.&nbsp; Fixing those issues for the other clients however broke PHP's SoapClient to the point where objects being passed to the SOAP method were becoming empty arrays on the server side.<br />
<br />
Lesson learned:&nbsp; some elements were being prefixed with xsd: and others were not -- make absolutely sure your WSDL is correct and consistent (I'm using a tweaked WSDL_Gen.php).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98346""></a>
  <div class="note">
   <strong class="user">james dot ellis at gmail dot com</strong>
   <a href="#98346" class="date">10-Jun-2010 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was having troubles getting responses from a Coldfusion SOAP server, with no obvious issues in the SoapClient used.<br />
<br />
Eventually I found that the server was only accepting SOAP 1.1 requests and not 1.2. Not sure if this is&nbsp; a system wide Coldfusion setting but if you hit the same wall, try setting the SoapClient option "soap_version" to the constant SOAP_1_1 (which is the default but mine was defaulting to 1.2 as the client was being reused for another service)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98326""></a>
  <div class="note">
   <strong class="user">ajcartmell at fonant dot com</strong>
   <a href="#98326" class="date">09-Jun-2010 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There seems to be a problem with specifying empty strings for proxy_host and proxy_port options in recent versions of PHP (from a version later than 5.2.9, and equal to or earlier than 5.2.11).<br />
<br />
Supplying empty string values for proxy_host and proxy_port causes "host not found" type errors: supplying NULL or FALSE works fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98086""></a>
  <div class="note">
   <strong class="user">reinaldo at mandic dot com dot br</strong>
   <a href="#98086" class="date">25-May-2010 04:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You need both certificates, privateKey and publicKey on the same file, on local_cert path to work.<br />
<br />
# cat publicKey.pem privateKey.pem &gt; key.pem</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97273""></a>
  <div class="note">
   <strong class="user">bhargav dot khatana at gmail dot com</strong>
   <a href="#97273" class="date">11-Apr-2010 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It took me longer than a week to figure out how to implement WSSE (Web Service Security) headers in native PHP SOAP. There are no much resource available on this, so thought to add this here for community benefit.
<br />

<br />
Step1: Create two classes to create a structure for WSSE headers
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">class </span><span class="default">clsWSSEAuth </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$Username</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$Password</span><span class="keyword">;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Username</span><span class="keyword">=</span><span class="default">$username</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Password</span><span class="keyword">=</span><span class="default">$password</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />

<br />
class </span><span class="default">clsWSSEToken </span><span class="keyword">{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private </span><span class="default">$UsernameToken</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">__construct </span><span class="keyword">(</span><span class="default">$innerVal</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">UsernameToken </span><span class="keyword">= </span><span class="default">$innerVal</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step2: Create Soap Variables for UserName and Password
<br />

<br />
<span class="default">&lt;?php
<br />
$username </span><span class="keyword">= </span><span class="default">1111</span><span class="keyword">;
<br />
</span><span class="default">$password </span><span class="keyword">= </span><span class="default">1111</span><span class="keyword">;
<br />

<br />
</span><span class="comment">//Check with your provider which security name-space they are using.
<br />
</span><span class="default">$strWSSENS </span><span class="keyword">= </span><span class="string">"<a href="http://schemas.xmlsoap.org/ws/2002/07/secext" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/ws/2002/07/secext</a>"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$objSoapVarUser </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">);
<br />
</span><span class="default">$objSoapVarPass </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$password</span><span class="keyword">, </span><span class="default">XSD_STRING</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step3: Create Object for Auth Class and pass in soap var
<br />

<br />
<span class="default">&lt;?php
<br />
$objWSSEAuth </span><span class="keyword">= new </span><span class="default">clsWSSEAuth</span><span class="keyword">(</span><span class="default">$objSoapVarUser</span><span class="keyword">, </span><span class="default">$objSoapVarPass</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step4: Create SoapVar out of object of Auth class
<br />

<br />
<span class="default">&lt;?php
<br />
$objSoapVarWSSEAuth </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$objWSSEAuth</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="string">'UsernameToken'</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step5: Create object for Token Class
<br />

<br />
<span class="default">&lt;?php
<br />
$objWSSEToken </span><span class="keyword">= new </span><span class="default">clsWSSEToken</span><span class="keyword">(</span><span class="default">$objSoapVarWSSEAuth</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step6: Create SoapVar out of object of Token class
<br />

<br />
<span class="default">&lt;?php
<br />
$objSoapVarWSSEToken </span><span class="keyword">= new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$objWSSEToken</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="string">'UsernameToken'</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step7: Create SoapVar for 'Security' node
<br />

<br />
<span class="default">&lt;?php
<br />
$objSoapVarHeaderVal</span><span class="keyword">=new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$objSoapVarWSSEToken</span><span class="keyword">, </span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="string">'Security'</span><span class="keyword">, </span><span class="default">$strWSSENS</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step8: Create header object out of security soapvar
<br />

<br />
<span class="default">&lt;?php
<br />
$objSoapVarWSSEHeader </span><span class="keyword">= new </span><span class="default">SoapHeader</span><span class="keyword">(</span><span class="default">$strWSSENS</span><span class="keyword">, </span><span class="string">'Security'</span><span class="keyword">, </span><span class="default">$objSoapVarHeaderVal</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">, </span><span class="string">'<a href="http://abce.com" rel="nofollow" target="_blank">http://abce.com</a>'</span><span class="keyword">);
<br />

<br />
</span><span class="comment">//Third parameter here makes 'mustUnderstand=1
<br />
//Forth parameter generates 'actor="<a href="http://abce.com" rel="nofollow" target="_blank">http://abce.com</a>"'
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step9: Create object of Soap Client
<br />

<br />
<span class="default">&lt;?php
<br />
$objClient </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$WSDL</span><span class="keyword">, </span><span class="default">$arrOptions</span><span class="keyword">); 
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step10: Set headers for soapclient object
<br />

<br />
<span class="default">&lt;?php
<br />
$objClient</span><span class="keyword">-&gt;</span><span class="default">__setSoapHeaders</span><span class="keyword">(array(</span><span class="default">$objSoapVarWSSEHeader</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Step 11: Final call to method
<br />

<br />
<span class="default">&lt;?php
<br />
$objResponse </span><span class="keyword">= </span><span class="default">$objClient</span><span class="keyword">-&gt;</span><span class="default">__soapCall</span><span class="keyword">(</span><span class="default">$strMethod</span><span class="keyword">, </span><span class="default">$requestPayloadString</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97029""></a>
  <div class="note">
   <strong class="user">meltir at meltir dot com</strong>
   <a href="#97029" class="date">29-Mar-2010 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To those fighting with NTLM authenticated proxy servers, here's a solution I'm using atm:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* A child of SoapClient with support for ntlm proxy authentication
<br />
&nbsp;* 
<br />
&nbsp;* @author Meltir &lt;meltir@meltir.com&gt;
<br />
&nbsp;*
<br />
&nbsp;*/
<br />
</span><span class="keyword">class </span><span class="default">NTLM_SoapClient </span><span class="keyword">extends </span><span class="default">SoapClient </span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">, </span><span class="default">$options </span><span class="keyword">= array()) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_login'</span><span class="keyword">]) || empty(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_password'</span><span class="keyword">])) throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Login and password required for NTLM authentication!'</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_login </span><span class="keyword">= </span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_login'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_password </span><span class="keyword">= </span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_password'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_host </span><span class="keyword">= (empty(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_host'</span><span class="keyword">]) ? </span><span class="string">'localhost' </span><span class="keyword">: </span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_host'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_port </span><span class="keyword">= (empty(</span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_port'</span><span class="keyword">]) ? </span><span class="default">8080 </span><span class="keyword">: </span><span class="default">$options</span><span class="keyword">[</span><span class="string">'proxy_port'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; * Call a url using curl with ntlm auth
<br />
&nbsp;&nbsp; &nbsp; * 
<br />
&nbsp;&nbsp; &nbsp; * @param string $url
<br />
&nbsp;&nbsp; &nbsp; * @param string $data
<br />
&nbsp;&nbsp; &nbsp; * @return string
<br />
&nbsp;&nbsp; &nbsp; * @throws SoapFault on curl connection error
<br />
&nbsp;&nbsp; &nbsp; */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected function </span><span class="default">callCurl</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$handle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, Array(</span><span class="string">"PHP SOAP-NTLM Client"</span><span class="keyword">) );
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_PROXYUSERPWD</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_login</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_password</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_PROXY</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_host</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">proxy_port</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_PROXYAUTH</span><span class="keyword">, </span><span class="default">CURLAUTH_NTLM</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$response </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if (empty(</span><span class="default">$response</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; throw new </span><span class="default">SoapFault</span><span class="keyword">(</span><span class="string">'CURL error: '</span><span class="keyword">.</span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">),</span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$response</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__doRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">,</span><span class="default">$location</span><span class="keyword">,</span><span class="default">$action</span><span class="keyword">,</span><span class="default">$version</span><span class="keyword">,</span><span class="default">$one_way </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callCurl</span><span class="keyword">(</span><span class="default">$location</span><span class="keyword">,</span><span class="default">$request</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Requires curl and could be extended, but it works for my simple needs.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95963""></a>
  <div class="note">
   <strong class="user">eric dot caron at gmail dot com</strong>
   <a href="#95963" class="date">31-Jan-2010 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though pointed out by jan at bestbytes, and discussed in bug #27777, one common source of the "Parsing WSDL: Couldn't find &lt;definitions&gt;" error is from trying to access a WSDL that is protected by HTTP authentication. Passing the login/password in the 2nd parameter doesn't always work; so if you encounter this error message and are trying to access a protected WSDL file, try passing the username and password in with the first parameter.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95576""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#95576" class="date">10-Jan-2010 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had to struggle with a rather strange behavior when trying to consume standard Parlay X web services with no success. However, I found a remedy to my problem.<br />
<br />
The problem which I faced was about an erroneous invalid HTTP basic authentication request sent to the web service. Although I was sending the right credentials, I was getting an authentication error. It turns out that PHP was sending HTTP requests to another endpoint which is not exposed directly through the web service and that end point does not require authentication. <br />
<br />
My remedy for that issue was by using this simple lines in the example of using sendSms Paraly-X method.<br />
<br />
First, creating a soap client without any HTTP authentication options: <br />
<br />
<span class="default">&lt;?php<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">?&gt;<br />
</span><br />
The above request will cache the wsdl in the /tmp directory. Immediately after this construction we create another soap client, this time with HTTP authentication options:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">try {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">, array(</span><span class="string">'login' </span><span class="keyword">=&gt; </span><span class="string">"griffin"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'password'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">"password"</span><span class="keyword">));<br />
} catch (</span><span class="default">Exception $e</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Error:sendSms: %s\n"</span><span class="keyword">,</span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">__toString</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
} <br />
</span><span class="default">?&gt;<br />
</span><br />
Now it should work without any problem. Without the second call, PHP will call sendSms without credentials resulting in a failed attempt due to missing authentication information. I found this procedure to be the simplest.<br />
<br />
This process should be done every time the cached wsdl expires, or simply a one can increase the time-to-live for the cached wsdl from php.ini</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95085""></a>
  <div class="note">
   <strong class="user">jon dot gilbert at net-entwicklung dot de</strong>
   <a href="#95085" class="date">12-Dec-2009 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that creating a soap client for an invalid URL (you do test what happens, when a service is not available, right?) usually throws an exception which can be caught with try..catch. However, if xdebug is active you will get a fatal error, which obviously cannot be caught.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94151""></a>
  <div class="note">
   <strong class="user">sloloem at gmail dot com</strong>
   <a href="#94151" class="date">19-Oct-2009 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had an issue figuring out the use of classmap that took me quite a while to figure out.&nbsp; I was assuming the WSDL type the docs were referring to was the name of the element being returned in the SOAP, so like,<br />
&lt;ns1:node id="8675309" /&gt;<br />
<br />
and I was wondering why mapping<br />
'classmap'=&gt;array('node'=&gt;'MyNode')<br />
<br />
did nothing.<br />
That's because in my WSDL I defined node as:<br />
<br />
&lt;xsd:element name="node" type="tns:nodeType" /&gt;<br />
<br />
The classmap I needed was:<br />
'classmap'=&gt;array('nodeType'=&gt;'MyNode')<br />
<br />
I was able to find the type names using SoapClient-&gt;__getTypes()<br />
Later, I realized where I could look inside the WSDL for the typename I needed.<br />
<br />
I dunno if I missed something painfully obvious but maybe this can clear up some of the docs.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90725""></a>
  <div class="note">
   <strong class="user">Jon</strong>
   <a href="#90725" class="date">06-May-2009 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We've had some problems using SoapClient connecting to an external server via Microsoft ISA (presently v.2006 but this may apply to other versions too). We supply the proxy_host, proxy_port, proxy_login and proxy_password but the ISA server reports the login in its logs as "anonymous".<br />
<br />
Our sysadmin believes this is because PHP is not supplying NTLN information (Windows security protocol) in the correct format (and whether it should work with proprietary proxies is of course another debate). We'd tried "username", "DOMAIN\username" to no effect. The solution is to add an exception in the ISA server for the target hostname/IP; null can then be supplied for proxy_login and proxy_password and the connection should then work as expected.<br />
<br />
On a slightly related note, if you are having problems make sure the port number is supplied as an integer. Some versions of PHP will not use the proxy with SoapClient if the port number is supplied as a string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88902""></a>
  <div class="note">
   <strong class="user">jan at bestbytes dot de</strong>
   <a href="#88902" class="date">12-Feb-2009 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You CAN get a wsdl, if basic authentication is required:<br />
<br />
<span class="default">&lt;?php <br />
<br />
$login </span><span class="keyword">= </span><span class="string">'bert'</span><span class="keyword">;<br />
</span><span class="default">$password </span><span class="keyword">= </span><span class="string">'berts password'</span><span class="keyword">;<br />
<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'<a href="http://" rel="nofollow" target="_blank">http://</a>' </span><span class="keyword">. </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$login</span><span class="keyword">) . </span><span class="string">':' </span><span class="keyword">. </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$password</span><span class="keyword">) . </span><span class="string">'@www.server.com/path/to/wsdl'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'login' </span><span class="keyword">=&gt; </span><span class="default">$login</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'password' </span><span class="keyword">=&gt; </span><span class="default">$password<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86908""></a>
  <div class="note">
   <strong class="user">info at nicksilvestro dot net</strong>
   <a href="#86908" class="date">10-Nov-2008 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For anyone having trouble with ArrayOf_xsd_string and getting an error similar to 'No deserializer defined for array type {<a href="http://www.w3.org/2001/XMLSchema}string" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema}string</a>'<br />
Try using the 'features' param, set to SOAP_USE_XSI_ARRAY_TYPE - this makes sure the correct deserializer is used.<br />
<br />
eg, <br />
<span class="default">&lt;?php<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"some.wsdl"</span><span class="keyword">, array(</span><span class="string">'features' </span><span class="keyword">=&gt; </span><span class="default">SOAP_USE_XSI_ARRAY_TYPE</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86004""></a>
  <div class="note">
   <strong class="user">sniper</strong>
   <a href="#86004" class="date">28-Sep-2008 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i was looking for a good example and couldnt find one,<br />
finally found it somewhere(forgot where) i think this is<br />
the best example to make a soap request with multiple params<br />
&nbsp;&nbsp; <br />
$params-&gt;AWSAccessKeyId = AMAZON_API_KEY;<br />
$params-&gt;Request-&gt;SearchIndex = 'Books';<br />
$params-&gt;Request-&gt;Keywords = 'php5 oop';<br />
<br />
$amazon = new SoapClient('<a href="http://webservices.amazon.com" rel="nofollow" target="_blank">http://webservices.amazon.com</a><br />
/AWSECommerceService/AWSECommerceService.wsdl');<br />
$result = $amazon-&gt;itemSearch($params);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85757""></a>
  <div class="note">
   <strong class="user">taras dot dot dot di at gmail dot com</strong>
   <a href="#85757" class="date">16-Sep-2008 06:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This took me a while to figure out.<br />
<br />
As described at the bottom of here: <a href="http://bugs.php.net/bug.php?id=38703" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=38703</a><br />
<br />
having xdebug may interfere with the constructor throwing exceptions</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85648""></a>
  <div class="note">
   <strong class="user">alex on reutone comma com</strong>
   <a href="#85648" class="date">10-Sep-2008 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To connect PHP SOAP to MS SOAP (CRM/EXCHANGE/...) I have created some classes using the explanation below and in other places.<br />
www.reutone.com/heb/articles.php?instance_id=62&amp;actions=show&amp;id=521</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83932""></a>
  <div class="note">
   <strong class="user">naugtur at gmail dot com</strong>
   <a href="#83932" class="date">19-Jun-2008 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SoapFault exception: [Client] looks like we got no XML document in &lt;document&gt; has been already mentioned to occur when your server outputs something before &lt;?xml ... &gt; tag. <br />
<br />
For all those having problems with that, and no access to the server code:<br />
This is how to make a proxy that would clean responses for You<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Simple class taken from a note by James Ellis [in __doRequest() page of manual]<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Proxy_Client </span><span class="keyword">extends </span><span class="default">SoapClient </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$cacheDocument </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * SetCacheDocument() sets the previously cached document contents<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">SetCacheDocument</span><span class="keyword">(</span><span class="default">$document</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cacheDocument </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * __doRequest() overrides the standard SoapClient to handle a local request<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__doRequest</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">cacheDocument</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">//put this code in your function or wherever You have all required variables set<br />
<br />
</span><span class="default">$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">,</span><span class="default">$settings_array</span><span class="keyword">);<br />
</span><span class="default">$void</span><span class="keyword">=</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);&nbsp; </span><span class="comment">//call this to get response from server<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$response_string</span><span class="keyword">=</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">__getLastResponse</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="comment">//this part removes stuff<br />
</span><span class="default">$start</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$response_string</span><span class="keyword">,</span><span class="string">'&lt;?xml'</span><span class="keyword">);<br />
</span><span class="default">$end</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$response_string</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">);&nbsp; &nbsp; <br />
</span><span class="default">$response_string</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$response_string</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
<br />
</span><span class="comment">//get your proxy prepared<br />
</span><span class="default">$proxy </span><span class="keyword">= new </span><span class="default">Proxy_Client</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">,</span><span class="default">$settings_array</span><span class="keyword">);<br />
</span><span class="comment">//and fill it with the server's response<br />
</span><span class="default">$proxy</span><span class="keyword">-&gt;</span><span class="default">SetCacheDocument</span><span class="keyword">(</span><span class="default">$response_string</span><span class="keyword">);<br />
<br />
</span><span class="default">$and_finally_the_result_is</span><span class="keyword">=</span><span class="default">$proxy</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$and_finally_the_result_is</span><span class="keyword">); </span><span class="comment">//this allows You to see what's there<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$method is the method's name eg. $method='getVersion';<br />
$params - typical params for a soap method</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83718""></a>
  <div class="note">
   <strong class="user">david at globulebleu dot com</strong>
   <a href="#83718" class="date">09-Jun-2008 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using classmap option to map the SOAP results to a class, the constructor<br />
of the object you've mapped to is not called. <br />
<br />
$client = new SoapClient("url_to_wsdl", <br />
&nbsp;&nbsp; array('classmap' =&gt; array('contact' =&gt; "Contact"));<br />
<br />
$params = array("1");<br />
<br />
$contact = $client-&gt;__soapCall("get_contact", $params);<br />
<br />
Expected result:<br />
<br />
A contact object that has properties initialized (i.e. db connections,<br />
....).<br />
<br />
Actual result:<br />
<br />
A contact object without the properties.<br />
<br />
Thanks for your help.<br />
<br />
David Georges.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83474""></a>
  <div class="note">
   <strong class="user">Anno v. Heimburg</strong>
   <a href="#83474" class="date">27-May-2008 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; When using HTTP basic authentication, PHP will only send<br />
&gt; the credentials when invoking the service, not when<br />
&gt; fetching the WSDL. <br />
<br />
The same goes for using an SSL client certficate, the SoapClient will only present the certificate on the actual remote call, not when getting the WSDL. The workaround is the same as above. HttpRequest works as expected.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82876""></a>
  <div class="note">
   <strong class="user">cw at netresearch dot de</strong>
   <a href="#82876" class="date">30-Apr-2008 10:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "cache_wsdl" option takes constants like WSDL_CACHE_NONE or WSDL_CACHE_DISK that are listed on the "SOAP constants" page -&gt; /manual/en/soap.constants.php</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80715""></a>
  <div class="note">
   <strong class="user">james dot ellis at gmail dot com</strong>
   <a href="#80715" class="date">30-Jan-2008 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note regarding boolean values that may seem obvious on reflection but could be a gotcha for some:<br />
<br />
Seeing a SOAP request example with &lt;SomeBooleanParam&gt;true&lt;/SomeBooleanParam&gt; may lead you to pass in string "true" or "false" as the parameter, which is incorrect - the correct method is to use boolean data types.<br />
<br />
<span class="default">&lt;?php<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">,</span><span class="default">$options</span><span class="keyword">);<br />
</span><span class="default">$method </span><span class="keyword">= </span><span class="string">"DoSomething"</span><span class="keyword">;<br />
</span><span class="default">$params </span><span class="keyword">= new </span><span class="default">stdClass</span><span class="keyword">;<br />
<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">SomeBooleanParam </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
</span><span class="comment">/**<br />
&nbsp;simplified request snippet would be<br />
&nbsp;&lt;SomeBooleanParam&gt;true&lt;/SomeBooleanParam&gt;<br />
**/<br />
<br />
//this will also be correct, but not for the right reasons:<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">SomeBooleanParam </span><span class="keyword">= </span><span class="string">"true"</span><span class="keyword">;<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
</span><span class="comment">/**<br />
&nbsp;simplified request snippet would be<br />
&nbsp;&lt;SomeBooleanParam&gt;true&lt;/SomeBooleanParam&gt;<br />
**/<br />
<br />
//this is where you may be wondering what is going on<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">SomeBooleanParam </span><span class="keyword">= </span><span class="string">"false"</span><span class="keyword">;<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
</span><span class="comment">/**<br />
&nbsp;simplified request snippet would be<br />
&nbsp;&lt;SomeBooleanParam&gt;true&lt;/SomeBooleanParam&gt;<br />
**/<br />
<br />
//you need to do this instead<br />
</span><span class="default">$params</span><span class="keyword">-&gt;</span><span class="default">SomeBooleanParam </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
</span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">$method</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">);<br />
</span><span class="comment">/**<br />
&nbsp;simplified request snippet would be<br />
&nbsp;&lt;SomeBooleanParam&gt;false&lt;/SomeBooleanParam&gt;<br />
**/<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope that helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76269""></a>
  <div class="note">
   <strong class="user">giosh94mhz</strong>
   <a href="#76269" class="date">08-Jul-2007 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Oops!<br />
<br />
I have written the wrong exception message in my last post.<br />
<br />
The correct exception is:<br />
<br />
SoapFault exception: [Client] looks like we got no XML document in &lt;document&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73082""></a>
  <div class="note">
   <strong class="user">lsmith at php dot net</strong>
   <a href="#73082" class="date">08-Feb-2007 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As noted in the bug report <a href="http://bugs.php.net/bug.php?id=36226, it is considered a feature that sequences with a single element do not come out as arrays. To override this " rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=36226, it is considered a feature that sequences with a single element do not come out as arrays. To override this </a>"feature" you can do the following:<br />
<br />
$x = new SoapClient($wsdl, array('features' =&gt;<br />
SOAP_SINGLE_ELEMENT_ARRAYS));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71477""></a>
  <div class="note">
   <strong class="user">matt_schiros at academicsuperstore dot com</strong>
   <a href="#71477" class="date">30-Nov-2006 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using classmap to map the SOAP results to a class, the constructor of the object you've mapped to is _not_ called.&nbsp; This applies to the PHP5 __construct() and the PHP4 ClassName() constructors.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62471""></a>
  <div class="note">
   <strong class="user">Marius Mathiesen</strong>
   <a href="#62471" class="date">01-Mar-2006 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I kept having a problem using an HTTP proxy with SOAP. The proxy_port parameter has to be an integer, ie. "proxy_port"=&gt;"80" won't work, you'll have to use "proxy_port"=&gt;80.<br />
<br />
HTH,<br />
Marius</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60004""></a>
  <div class="note">
   <strong class="user">php at sowen dot de</strong>
   <a href="#60004" class="date">22-Dec-2005 03:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using CLI and there are multiple IP addresses available for outgoing SOAP-requests, try this "secret" to set outgoing IP:<br />
<br />
e.g. for local IP 10.1.4.71:<br />
<br />
$opts = array('socket' =&gt; array('bindto' =&gt; '10.1.4.71:0'));<br />
$context = stream_context_create($opts);<br />
$client&nbsp; = new SoapClient(null, array('location'=&gt;'<a href="http://..." rel="nofollow" target="_blank">http://...</a>','uri' =&gt; '...','stream_context' =&gt; $context));<br />
<br />
You can also set other options for the stream context, please refer to this page:<br />
<br />
Appendix M: <a href="http://www.php.net/manual/en/wrappers.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/wrappers.php</a><br />
<br />
Bye,<br />
&nbsp;&nbsp; Nils Sowen</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56256""></a>
  <div class="note">
   <strong class="user">jared at ws-db dot com</strong>
   <a href="#56256" class="date">28-Aug-2005 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you connect to a SoapServer, that has been created with session persistence, you can access the server's session id via SoapClient-&gt;_cookies[&lt;session_id_name&gt;][0]. This property becomes available after your first client method call.<br />
<br />
I have only tested this with session.use_cookies=1.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55744""></a>
  <div class="note">
   <strong class="user">Arjan van Bentem</strong>
   <a href="#55744" class="date">12-Aug-2005 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using HTTP basic authentication, PHP will only send the credentials when invoking the service, not when fetching the WSDL. <br />
<br />
To solve this, one needs to fetch the WSDL manually (or using PHP, of course!) and store it on the file system. Obviously, the first parameter for SoapClient(..) then needs to refer to that local copy.<br />
<br />
Alternatively, the user annotations at <a href="http://nl3.php.net/manual/en/ref.soap.php state that one could encode the login and password into the URL as well." rel="nofollow" target="_blank">http://nl3.php.net/manual/en/ref.soap.php state that one could encode the login and password into the URL as well.</a><br />
<br />
See <a href="http://bugs.php.net/bug.php?id=27777" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=27777</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54657""></a>
  <div class="note">
   <strong class="user">Jim Plush</strong>
   <a href="#54657" class="date">11-Jul-2005 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of version 5.0.4 you can now dynamically change your location even if you're using a wsdl<br />
<br />
<span class="default">&lt;?php<br />
<br />
$client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"<a href="http://some.host.net/wsdl/somefile.wsdl" rel="nofollow" target="_blank">http://some.host.net/wsdl/somefile.wsdl</a>"</span><span class="keyword">,array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"location" </span><span class="keyword">=&gt; </span><span class="string">'myurl.com'</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
notice you can now use the "location" key. <br />
This means you can have the same wsdl file not define a location until runtime which is great if you have a development test site or if you distribute your files to other companies. <br />
Prior to this change you would have to ship a custom wsdl file to every client you had with their location hardcoded.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50621""></a>
  <div class="note">
   <strong class="user">Brian Grayless</strong>
   <a href="#50621" class="date">04-Mar-2005 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using a WSDL file is the way to go, however, for my particular application, the LOCATION:PORT needed to be dynamic so that my SOAP clients would be able to call a different service based on the client domain.<br />
<br />
If you are using a WSDL, SoapClient() requires a URL direct to an actual URL and does not let you use a PHP file that outputs the dynamic WSDL XML in its stead. So, I ended up making a separate WSDL for each possible service needed and had to maintain them all if the service description changed.<br />
<br />
Finally, after some fiddling, I was able to create a PHP page with the proper Mime type headers so that I could then trick SoapClient() to think that it was being passed a file with a ".wsdl" extension.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// filename: wsdl.php<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: application/xml; CHARSET=shift-jis'</span><span class="keyword">);<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Disposition: attachment; filename="filename.wsdl"'</span><span class="keyword">);<br />
<br />
</span><span class="default">$wsdl </span><span class="keyword">= </span><span class="string">'path/wsdl_name.wsdl'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// read in file<br />
</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
</span><span class="default">$wsdl_xml </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$wsdl</span><span class="keyword">));<br />
</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
<br />
</span><span class="comment">// put code here to replace url and port in xml<br />
<br />
</span><span class="keyword">echo </span><span class="default">$wsdl_xml</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Now, in order to make this work, you can't just call a relative path to the file. I believe it has to go through Apache to properly set the mime type headers, etc... So you would use a full "<a href="http://....." rel="nofollow" target="_blank">http://.....</a>" address as the path to the wsdl.php file.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//... somewhere in your soap client code<br />
<br />
</span><span class="default">$wsdl_loc </span><span class="keyword">= </span><span class="string">"<a href="http://yourdomain.com/wsdl.php" rel="nofollow" target="_blank">http://yourdomain.com/wsdl.php</a>"</span><span class="keyword">;<br />
<br />
</span><span class="default">$soap_client </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="default">$wsdl_loc</span><span class="keyword">, </span><span class="default">$client_param_array</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Another, perhaps not so clean, way of achieving this would be to modify your .htaccess file in the directory where your WSDL file exists to force ".wsdl" files to run through the PHP engine. Add the following to your .htaccess:<br />
<br />
AddType application/x-httpd-php .php .wsdl<br />
<br />
You can then put dynamic PHP code snippets in your *.wsdl files to change whatever values you need to.<br />
<br />
There are pros and cons to each solutions. The Mime solution probably taxes the system more as it has to read the file in every time a soap request is made. The htaccess solution makes it so you have to depend on either a modified .htaccess or Apache conf file.<br />
<br />
Perhaps if you set the "soap.wsdl_cache_enabled", using ini_set(), to 1 (default), the caching will make it so it doesn't read the file every time for the Mime solution.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
