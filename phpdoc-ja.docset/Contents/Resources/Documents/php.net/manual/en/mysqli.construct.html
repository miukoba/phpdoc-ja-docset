<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>新規に MySQL サーバーへの接続をオープンする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysqli.connect-error.html">≪ mysqli::$connect_error</a></li>
      <li style="float: right;"><a href="mysqli.debug.html">mysqli::debug ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mysqli.html">mysqli</a></li>
    <li>新規に MySQL サーバーへの接続をオープンする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysqli.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysqli::__construct</h1>
  <h1 class="refname">mysqli_connect</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">mysqli::__construct</span> -- <span class="refname">mysqli_connect</span> &mdash; <span class="dc-title">新規に MySQL サーバーへの接続をオープンする</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mysqli.construct-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="constructorsynopsis dc-description">
   <span class="methodname"><strong>mysqli::__construct</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$host</code><span class="initializer"> = ini_get(&quot;mysqli.default_host&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code><span class="initializer"> = ini_get(&quot;mysqli.default_user&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$passwd</code><span class="initializer"> = ini_get(&quot;mysqli.default_pw&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code><span class="initializer"> = &quot;&quot;</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$port</code><span class="initializer"> = ini_get(&quot;mysqli.default_port&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$socket</code><span class="initializer"> = ini_get(&quot;mysqli.default_socket&quot;)</span></span>
  ]]]]]] )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.mysqli.html" class="type mysqli">mysqli</a></span> <span class="methodname"><a href="function.mysqli-connect.html" class="methodname">mysqli_connect</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$host</code><span class="initializer"> = ini_get(&quot;mysqli.default_host&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code><span class="initializer"> = ini_get(&quot;mysqli.default_user&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$passwd</code><span class="initializer"> = ini_get(&quot;mysqli.default_pw&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$dbname</code><span class="initializer"> = &quot;&quot;</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$port</code><span class="initializer"> = ini_get(&quot;mysqli.default_port&quot;)</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$socket</code><span class="initializer"> = ini_get(&quot;mysqli.default_socket&quot;)</span></span>
  ]]]]]] )</div>

  <p class="para rdfs-comment">
   実行中の MySQL サーバーへの接続をオープンします。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-mysqli.construct-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">host</code></dt>

     <dd>

      <p class="para">
       ホスト名または IP アドレスです。この引数に <strong><code>NULL</code></strong> または &quot;localhost&quot; を渡すと
       ローカルホストとみなされます。もし可能な場合、TCP/IP プロトコルの代わりに
       パイプが使用されます。
      </p>
      <p class="para">
       ホストの前に <em>p:</em> をつけると、持続的な接続を開きます。
       接続プールから開いた接続上で
       <span class="function"><a href="mysqli.change-user.html" class="function">mysqli_change_user()</a></span> が自動的にコールされます。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       MySQL のユーザー名。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">passwd</code></dt>

     <dd>

      <p class="para">
       省略したり <strong><code>NULL</code></strong> を渡したりした場合、MySQL サーバーは
       パスワードを持たないユーザーレコードについてのみ認証を試みます。
       これによってひとつのユーザー名において(パスワードが指定されたか
       否かによって)違うパーミッションを与えることができます。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">dbname</code></dt>

     <dd>

      <p class="para">
       指定した場合は、
       クエリが行われるデフォルトのデータベースとなります。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">port</code></dt>

     <dd>

      <p class="para">
       MySQL サーバーに接続する際のポート番号を指定します。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">socket</code></dt>

     <dd>

      <p class="para">
       使用するソケットあるいは名前つきパイプを指定します。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        <code class="parameter">socket</code> 引数を指定しても、MySQL サーバーへの
        接続時の型を明示的に定義することにはなりません。MySQL サーバーへの
        接続方法については <code class="parameter">host</code> 引数で定義されます。
       </p>
      </p></blockquote>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mysqli.construct-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   MySQL サーバーへの接続を表すオブジェクトを返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-mysqli.construct-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        持続的な接続機能が追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-mysqli.construct-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-1734">
   <p><strong>例1 <span class="methodname"><strong>mysqli::__construct()</strong></span> の例</strong></p>
   <div class="example-contents"><p>オブジェクト指向型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mysqli&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*<br />&nbsp;*&nbsp;これは&nbsp;"公式な"&nbsp;オブジェクト指向のやりかたですが、<br />&nbsp;*&nbsp;PHP&nbsp;5.2.9&nbsp;および&nbsp;5.3.0&nbsp;より前のバージョンでは&nbsp;$connect_error&nbsp;は動作していませんでした<br />&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect_error</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error&nbsp;('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect_errno&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">')&nbsp;'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">connect_error</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">/*<br />&nbsp;*&nbsp;PHP&nbsp;5.2.9&nbsp;および&nbsp;5.3.0&nbsp;より前のバージョンとの互換性を保ちたい場合は<br />&nbsp;*&nbsp;$connect_error&nbsp;のかわりにこのようにします<br />&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error&nbsp;('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">')&nbsp;'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">'Success...&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">host_info&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>オブジェクト指向型で mysqli クラスを継承する例</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo_mysqli&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">mysqli&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$host</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$host</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error&nbsp;('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">')&nbsp;'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo_mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">'Success...&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">host_info&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>手続き型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$link&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Connect&nbsp;Error&nbsp;('&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_errno</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">')&nbsp;'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_connect_error</span><span style="color: #007700">());<br />}<br /><br />echo&nbsp;</span><span style="color: #DD0000">'Success...&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysqli_get_host_info</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">mysqli_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$link</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
Success... MySQL host info: localhost via TCP/IP
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 notes" id="refsect1-mysqli.construct-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
<p class="para">MySQLnd は常に、サーバーのデフォルト文字セットを想定しています。この文字セットは接続時の
ハンドシェイク/認証 のときに送信され、これを mysqlnd が使います。</p>
<p class="para">Libmysqlclient が使うデフォルトの文字セットは <var class="filename">my.cnf</var>
で設定したものです。あるいは明示的に <span class="function"><a href="mysqli.options.html" class="function">mysqli_options()</a></span> をコールして設定することもできます。
これは、<span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span> のあとで <span class="function"><a href="mysqli.real-connect.html" class="function">mysqli_real_connect()</a></span>
を実行する前にコールします。</p></p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    オブジェクト指向の構文に関する注意:
    接続に失敗した場合にもオブジェクトが返されます。
    接続が失敗したかどうかを確かめるには、先ほどの例のように
    <span class="function"><a href="mysqli.connect-error.html" class="function">mysqli_connect_error()</a></span> 関数あるいは <a href="mysqli.connect-error.html" class="link">mysqli-&gt;connect_error</a>
    プロパティを使用しましょう。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    接続タイムアウトなどのオプションを設定する必要がある場合は、かわりに
    <span class="function"><a href="mysqli.real-connect.html" class="function">mysqli_real_connect()</a></span> を使わなければなりません。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    コンストラクタをパラメータなしでコールするのは、
    <span class="function"><a href="mysqli.init.html" class="function">mysqli_init()</a></span> をコールするのと同じ意味になります。
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    エラー &quot;Can&#039;t create TCP/IP socket (10106)&quot; が発生するのは、たいていは <a href="ini.core.html#ini.variables-order" class="link">variables_order</a> 設定ディレクティブに
    <em>E</em> が含まれていない場合です。
    Windows では、これが含まれていなければ <em>SYSTEMROOT</em>
    環境変数が使用できず、PHP が Winsock の読み込みに失敗します。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-mysqli.construct-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mysqli.real-connect.html" class="function" rel="rdfs-seeAlso">mysqli_real_connect()</a> - mysql サーバーとの接続をオープンする</span></li>
    <li class="member"><span class="function"><a href="mysqli.options.html" class="function" rel="rdfs-seeAlso">mysqli_options()</a> - オプションを設定する</span></li>
    <li class="member"><span class="function"><a href="mysqli.connect-errno.html" class="function" rel="rdfs-seeAlso">mysqli_connect_errno()</a> - 直近の接続コールに関するエラーコードを返す</span></li>
    <li class="member"><span class="function"><a href="mysqli.connect-error.html" class="function" rel="rdfs-seeAlso">mysqli_connect_error()</a> - 直近の接続エラーの内容を文字列で返す</span></li>
    <li class="member"><span class="function"><a href="mysqli.close.html" class="function" rel="rdfs-seeAlso">mysqli_close()</a> - 事前にオープンしているデータベース接続を閉じる</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115143""></a>
  <div class="note">
   <strong class="user">andres at 21brains dot com</strong>
   <a href="#115143" class="date">03-Jun-2014 06:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please do use set_charset("utf8") after establishing the connection if you want to avoid weird string issues. I do not know why the documentation does not warn you about this kind of stuff.<br />
<br />
We had a hard time figuring out what was going on since we were using mb_detect_encoding and it said everything was UTF-8, but of course the display was wrong. If we used iconv from ISO-8859-1 to UTF-8 the strings looked fine, even though everything in the database had the right collation. So in the end, it was the connection that was the filter and although the notes for this function mention default charsets, it almost reads as a sidenote instead of a central issue when dealing with UTF and PHP/MySQL.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114749""></a>
  <div class="note">
   <strong class="user">fugyl13 at gmail dot com</strong>
   <a href="#114749" class="date">02-Apr-2014 01:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that on all &gt;=Windows 7 Servers, a host name "localhost" will create a very expensive lookup (~1 Second). <br />
<br />
That's because since Windows 7, the hosts file doesn't come with a preconfigured<br />
127.0.0.1 localhost<br />
anymore<br />
<br />
So, if you notice a long connection creation, try "127.0.0.1" instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112328""></a>
  <div class="note">
   <strong class="user">paul at mtnlist dot com</strong>
   <a href="#112328" class="date">02-Jun-2013 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to connect via an alternate port (other than 3306), as you might when using an ssh tunnel to another host, using "localhost" as the hostname will not work. <br />
<br />
Using 127.0.0.1 will work.&nbsp; Apparently, if you specify the host as "localhost", the constructor ignores the port specified as an argument to the constructor.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111991""></a>
  <div class="note">
   <strong class="user">oleg at mastak dot fi</strong>
   <a href="#111991" class="date">19-Apr-2013 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to connect to local named pipe on windows and you get error "php_network_getaddresses: getaddrinfo failed: No such host is known. ", even if you using using "." as host, please check your if you are using mysqlnd driver: If this is true, then probably you need to update to version 5.4 of php:<br />
<br />
Named pipes support for Windows was added in PHP version 5.4.0.<br />
@ <a href="http://php.net/manual/en/mysqlnd.overview.php " rel="nofollow" target="_blank">http://php.net/manual/en/mysqlnd.overview.php </a><br />
<br />
Hopefully that will save you some time.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103521""></a>
  <div class="note">
   <strong class="user">boukeversteegh at gmail dot com</strong>
   <a href="#103521" class="date">18-Apr-2011 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
(php 5.3.3)<br />
<br />
If $port is a string, such as "3306", mysqli::query() will not work, even though mysqli_connect_errno() reports no error (value 0)!<br />
<br />
<span class="default">&lt;?php<br />
$mysqli </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">, </span><span class="string">"user"</span><span class="keyword">,</span><span class="string">"password"</span><span class="keyword">,</span><span class="string">"database"</span><span class="keyword">, </span><span class="string">"3306"</span><span class="keyword">); </span><span class="comment">//port is a string!<br />
</span><span class="default">$mysqli</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"SELECT 1;"</span><span class="keyword">)-&gt;</span><span class="default">fetch_assoc</span><span class="keyword">();<br />
</span><span class="comment">// Fatal error: Call to a member function fetch_assoc() on a non-object<br />
</span><span class="default">?&gt;<br />
</span><br />
This is particularly strange, since mysqli::query() should return a result object, or a boolean.<br />
<br />
So, be careful when you read your port from a string or config file. Cast it to int first:<br />
<span class="default">&lt;?php<br />
$port </span><span class="keyword">= (int)</span><span class="default">$port</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93508""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#93508" class="date">14-Sep-2009 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get an error like 
<br />
&nbsp; Can't connect to MySQL server on 'localhost' (10061)
<br />
and you use named pipes/socket connections (or aren't sure how you installed the MySQL server) try the following connect command:
<br />

<br />
<span class="default">&lt;?php
<br />
mysqli_connect</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$user_name</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$database_name</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="string">'mysql'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The '.' as hostname is absolutely necessary when using named pipes. 'localhost' won't work. 'mysql' is the standard name for the pipe/socket.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85955""></a>
  <div class="note">
   <strong class="user">Slavyansk2.ru</strong>
   <a href="#85955" class="date">26-Sep-2008 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have error like "Trying to clone an uncloneable object of class..." when trying connect, add record <br />
<br />
php_value zend.ze1_compatibility_mode 0<br />
<br />
in your .htaccess file. This resolve connection problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
