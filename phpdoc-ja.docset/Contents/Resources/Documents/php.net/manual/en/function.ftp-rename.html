<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>FTP サーバー上のファイルまたはディレクトリの名前を変更する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ftp-rawlist.html">≪ ftp_rawlist</a></li>
      <li style="float: right;"><a href="function.ftp-rmdir.html">ftp_rmdir ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ftp.html">FTP 関数</a></li>
    <li>FTP サーバー上のファイルまたはディレクトリの名前を変更する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.ftp-rename" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_rename</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">ftp_rename</span> &mdash; <span class="dc-title">FTP サーバー上のファイルまたはディレクトリの名前を変更する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-rename-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>ftp_rename</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$ftp_stream</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$oldname</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$newname</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ftp_rename()</strong></span> は FTP サーバー上のファイルやディレクトリの
   名前を変更します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-rename-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">ftp_stream</code></dt>

     <dd>

      <p class="para">
       FTP 接続のリンク ID 。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">oldname</code></dt>

     <dd>

      <p class="para">
       現在のファイル/ディレクトリの名前。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">newname</code></dt>

     <dd>

      <p class="para">
       新しい名前。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-rename-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.ftp-rename-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4416">
    <p><strong>例1 <span class="function"><strong>ftp_rename()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$old_file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'somefile.txt.bak'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$new_file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'somefile.txt'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;接続を確立する<br /></span><span style="color: #0000BB">$conn_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ユーザー名とパスワードでログインする<br /></span><span style="color: #0000BB">$login_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;$old_file&nbsp;を&nbsp;$new_file&nbsp;に変更することを試みる<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">ftp_rename</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$old_file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$new_file</span><span style="color: #007700">))&nbsp;{<br />&nbsp;echo&nbsp;</span><span style="color: #DD0000">"successfully&nbsp;renamed&nbsp;</span><span style="color: #0000BB">$old_file</span><span style="color: #DD0000">&nbsp;to&nbsp;</span><span style="color: #0000BB">$new_file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;echo&nbsp;</span><span style="color: #DD0000">"There&nbsp;was&nbsp;a&nbsp;problem&nbsp;while&nbsp;renaming&nbsp;</span><span style="color: #0000BB">$old_file</span><span style="color: #DD0000">&nbsp;to&nbsp;</span><span style="color: #0000BB">$new_file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;接続を閉じる<br /></span><span style="color: #0000BB">ftp_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="79769""></a>
  <div class="note">
   <strong class="user">alishahnovin at hotmail dot com</strong>
   <a href="#79769" class="date">12-Dec-2007 04:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You want to make sure you check the existence of the new name before renaming files, because otherwise you could risk losing files. Just do a simple check with ftp_size with the new name. If it's !=-1, you're going to want to throw some kind of error, otherwise you'll be losing a file...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73049""></a>
  <div class="note">
   <strong class="user">aventaria at hotmxxx dot com</strong>
   <a href="#73049" class="date">07-Feb-2007 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function isn't only able to rename files, but also folders. And it is not only able to rename them, but also move them, and, in the case of folders, their contents as well (so folders don't have to be empty to move). For example:<br />
<br />
<span class="default">&lt;?php<br />
ftp_rename</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">"./dir1/dir2/"</span><span class="keyword">, </span><span class="string">"./dir3/"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Now the folder dir2 (which prevously was in folder dir1) has moved to the same folder as dir1, and it has kept its original contents (the content just moved along).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71392""></a>
  <div class="note">
   <strong class="user">Hazem dot Khaled at gmail dot com</strong>
   <a href="#71392" class="date">26-Nov-2006 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to rename the file or folder you should use ftp_chdir to select the current directory on ftp server or you should write the full path to file in old name and in new name<br />
<br />
Ex. 1<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// open the folder that have the file<br />
</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'/www/ftp-filemanager/'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// rename the file<br />
</span><span class="default">ftp_rename</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'file1.jpg'</span><span class="keyword">, </span><span class="string">'new_name_4_file.jpg'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
or write full path Ex. 2<br />
&lt;?<br />
// rename the file<br />
ftp_rename($conn_id, '/www/ftp-filemanager/file1.jpg', '/www/ftp-filemanager/new_name_4_file.jpg');<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27096""></a>
  <div class="note">
   <strong class="user">Hugo locobyte at hotmail dot NO_SPAM dot com</strong>
   <a href="#27096" class="date">22-Nov-2002 09:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using "ftp_rename" to move files to other directories on server ftp<br />
..<br />
...<br />
if(ftp_rename($conn_ftp, $xfiles[$i], "./dirx/".$xfiles[$i])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo "File $xfiles[$i] moved to ./dirx";<br />
} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; echo "ERROR!!!. The file could not be moved";<br />
}<br />
...<br />
..<br />
#--&gt;&gt;h2m,&nbsp; bye</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
