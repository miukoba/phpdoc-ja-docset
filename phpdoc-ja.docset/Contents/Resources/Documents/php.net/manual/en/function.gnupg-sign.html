<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定したテキストに署名する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.gnupg-setsignmode.html">≪ gnupg_setsignmode</a></li>
      <li style="float: right;"><a href="function.gnupg-verify.html">gnupg_verify ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.gnupg.html">GnuPG 関数</a></li>
    <li>指定したテキストに署名する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.gnupg-sign" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gnupg_sign</h1>
  <p class="verinfo">(PECL gnupg &gt;= 0.1)</p><p class="refpurpose"><span class="refname">gnupg_sign</span> &mdash; <span class="dc-title">指定したテキストに署名する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.gnupg-sign-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>gnupg_sign</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$identifier</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$plaintext</code></span>
   )</div>

  <p class="para rdfs-comment">
   事前に <a href="function.gnupg-addsignkey.html" class="link">gnupg_addsignkey</a>
   で設定したキーを使用して <code class="parameter">plaintext</code> に署名し、
   <a href="function.gnupg-setsignmode.html" class="link">gnupg_setsignmode</a>
   の設定に応じて署名済みテキストあるいは署名を返します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gnupg-sign-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">identifier</code></dt>

     <dd>

      <p class="para"><span class="function"><a href="function.gnupg-init.html" class="function">gnupg_init()</a></span>
あるいは <strong class="classname">gnupg</strong> のコールで得られた gnupg ID。</p>
     </dd>

    
    
     <dt>
<code class="parameter">plaintext</code></dt>

     <dd>

      <p class="para">
       署名したい平文テキスト。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gnupg-sign-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合、この関数は署名済みテキストあるいは署名を返します。
   失敗した場合、この関数は <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gnupg-sign-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-3627">
    <p><strong>例1 手続き型の <span class="function"><strong>gnupg_sign()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gnupg_init</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">gnupg_addsignkey</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,</span><span style="color: #DD0000">"8660281B6051D071D94B5B230549F9DC851566DC"</span><span style="color: #007700">,</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$signed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gnupg_sign</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"just&nbsp;a&nbsp;test"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$signed</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-3628">
    <p><strong>例2 オブジェクト指向の <span class="function"><strong>gnupg_sign()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$gpg&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">gnupg</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$gpg&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">setsignkey</span><span style="color: #007700">(</span><span style="color: #DD0000">"8660281B6051D071D94B5B230549F9DC851566DC"</span><span style="color: #007700">,</span><span style="color: #DD0000">"test"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$signed&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$gpg&nbsp;</span><span style="color: #007700">-&gt;&nbsp;</span><span style="color: #0000BB">sign</span><span style="color: #007700">(</span><span style="color: #DD0000">"just&nbsp;a&nbsp;test"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$signed</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="71024""></a>
  <div class="note">
   <strong class="user">phplist2REMOVE AT REMtincanOVE.co.uk</strong>
   <a href="#71024" class="date">09-Nov-2006 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's a bit confusing how the "keyinfo" for a key returns "can_sign". <br />
<br />
If you have only added your Public Key, it will indicate "can_sign" for the key in "keyinfo", but that doesn't mean yet, that you can sign with the key. You will also need to add your Private Key to actually make signing work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
