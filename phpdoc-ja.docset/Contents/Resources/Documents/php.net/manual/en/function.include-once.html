<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>include_once</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.require-once.html">≪ require_once</a></li>
      <li style="float: right;"><a href="control-structures.goto.html">goto ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">制御構造</a></li>
    <li>include_once</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.include-once" class="sect1">
 <h2 class="title">include_once</h2>
 <p class="verinfo">(PHP 4, PHP 5)</p>
 <p class="para">
  <em>include_once</em> 命令は、スクリプトの実行時に指定
  したファイルを読み込み評価します。この動作は、
  <span class="function"><a href="function.include.html" class="function">include</a></span> 命令と似ていますが、ファイルからのコー
  ドが既に読み込まれている場合は、再度読み込まれないという重要な違い
  があります。その名が示す通り、ファイルは一度しか読み込まれません。
 </p>
 <p class="para">
  <em>include_once</em> は、スクリプトの実行時に同じファイ
  ルが複数回読み込まれ、評価される可能性がある場合に、関数の再定義や
  変数値の再代入といった問題を回避するために一回だけ読み込ませるため
  に使用します。
 </p>
 <p class="para">
  この関数の動作についての情報は
  <span class="function"><a href="function.include.html" class="function">include</a></span> のドキュメントを参照ください。
 </p>
 <p class="para">
  <blockquote class="note"><p><strong class="note">注意</strong>: 
  <p class="para">
   PHP 4 では、大文字小文字を区別しない OS (Windows など)
   では <em>_once</em> の動作が多少異なります。次に例を示します。
   <div class="example" id="example-160">
    <p><strong>例1 PHP 4 における、大文字小文字を区別しない OS 上での <em>include_once</em></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">include_once&nbsp;</span><span style="color: #DD0000">"a.php"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;a.phpを読み込みます<br /></span><span style="color: #007700">include_once&nbsp;</span><span style="color: #DD0000">"A.php"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;これもa.phpを読み込みます!&nbsp;(PHP&nbsp;4&nbsp;のみ)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    この挙動は PHP 5 で変更されました。たとえば Windows ではまず最初にパスが正規化され、
    <var class="filename">C:\PROGRA~1\A.php</var> は
    <var class="filename">C:\Program Files\a.php</var> と同じ扱いとなります。
    ファイルは一度だけ読み込まれるようになります。
   </p>
  </p></blockquote>
 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="110372""></a>
  <div class="note">
   <strong class="user">Kamil Pawelkiewicz</strong>
   <a href="#110372" class="date">17-Oct-2012 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP can distinguish if file is a symlink while including.<br />
I've created example.php file containing code below:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">print </span><span class="default">__FILE__</span><span class="keyword">.</span><span class="string">' included'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Then I've created symlink to example.php in the same directory.<br />
Executing this code in the working directory:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">include_once </span><span class="string">'example.php'</span><span class="keyword">;<br />
&nbsp; include_once </span><span class="string">'symlink'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
prints only 'example.php included' instead of 2 lines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84108""></a>
  <div class="note">
   <strong class="user">roach dot scott+spam at googlemail dot com</strong>
   <a href="#84108" class="date">28-Jun-2008 02:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you include a file that does not exist with include_once, the return result will be false. <br />
<br />
If you try to include that same file again with include_once the return value will be true.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(include_once </span><span class="string">'fakefile.ext'</span><span class="keyword">); </span><span class="comment">// bool(false)<br />
</span><span class="default">var_dump</span><span class="keyword">(include_once </span><span class="string">'fakefile.ext'</span><span class="keyword">); </span><span class="comment">// bool(true)<br />
</span><span class="default">?&gt;<br />
</span><br />
This is because according to php the file was already included once (even though it does not exist).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83280""></a>
  <div class="note">
   <strong class="user">emanuele at rogledi dot com</strong>
   <a href="#83280" class="date">19-May-2008 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For include_once a file in every paths of application we can do simply this<br />
<br />
include_once($_SERVER["DOCUMENT_ROOT"] . "mypath/my2ndpath/myfile.php");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68776""></a>
  <div class="note">
   <strong class="user">webmaster AT domaene - kempten DOT de</strong>
   <a href="#68776" class="date">10-Aug-2006 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since I like to reuse a lot of code it came handy to me to begin some sort of library that I stored in a subdir<br />
e.g. "lib"<br />
<br />
The only thing that bothered me for some time was that although everything worked all IDEs reported during editing<br />
these useless warnings "file not found" when library files included other library files, since my path were given all relative to the corresponding document-root.<br />
<br />
Here is a short workaround that makes that gone:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Change to your path<br />
<br />
</span><span class="keyword">if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">,</span><span class="string">'/lib/'</span><span class="keyword">) != </span><span class="default">FALSE</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="string">".."</span><span class="keyword">);<br />
}<br />
include_once (</span><span class="string">'./lib/other_lib.inc'</span><span class="keyword">);<br />
</span><span class="comment">// ... or any other include[_once] / require[_once]<br />
</span><span class="default">?&gt;<br />
</span><br />
just adjust the path and it will be fine - also for your IDE.<br />
<br />
greetings</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53239""></a>
  <div class="note">
   <strong class="user">flobee at gmail dot com</strong>
   <a href="#53239" class="date">26-May-2005 04:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i already had a discussion with several people about "not shown errors"<br />
error reporting and all others in php.ini set to: "show errors" to find problems: <br />
the answer i finally found:<br />
if you have an "@include..." instead of "include..." or "require..('somthing') in any place in your code <br />
all following errors are not shown too!!!<br />
<br />
so, this is actually a bad idea when developing because paser errors will be droped too:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!@include_once(</span><span class="string">'./somthing'</span><span class="keyword">) ) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'can not include'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
solution:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!@</span><span class="default">file_exists</span><span class="keyword">(</span><span class="string">'./somthing'</span><span class="keyword">) ) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'can not include'</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp; include(</span><span class="string">'./something'</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
