<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>DOMNamedNodeMap クラス</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="domimplementation.hasfeature.html">≪ DOMImplementation::hasFeature</a></li>
      <li style="float: right;"><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.dom.html">DOM</a></li>
    <li>DOMNamedNodeMap クラス</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.domnamednodemap" class="reference">
 <h1 class="title">DOMNamedNodeMap クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 



 
  <div class="section" id="domnamednodemap.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">DOMNamedNodeMap</strong>
     </span>
 
     <span class="oointerface">implements 
      <span class="interfacename"><a href="class.traversable.html" class="interfacename">Traversable</a></span>
     </span>
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* プロパティ */</div>

    <div class="fieldsynopsis">
     <span class="modifier">readonly</span>
     <span class="modifier">public</span>
     <span class="type">int</span>
      <var class="varname"><a href="class.domnamednodemap.html#domnamednodemap.props.length">$<var class="varname">length</var></a></var>
    ;</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.getnameditem.html" class="methodname">getNamedItem</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.getnameditemns.html" class="methodname">getNamedItemNS</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespaceURI</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$localName</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">DOMNode</span> <span class="methodname"><a href="domnamednodemap.item.html" class="methodname">item</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>

 
   }</div>

 
  </div>
 

  <div class="section" id="domnamednodemap.props">
   <h2 class="title">プロパティ</h2>
   <dl>

    
     <dt id="domnamednodemap.props.length"><var class="varname"><var class="varname">length</var></var></dt>

     <dd>

      <p class="para">
       マップ内のノードの数。子ノードのインデックスとして有効な範囲は
       <em>0</em> から <em>length - 1</em> まで (両端を含む) です。
      </p>
     </dd>

    
   </dl>

  </div>

  



 
 </div>
 
 





















 
<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a> &mdash; 名前で指定されたノードを取得する</li><li><a href="domnamednodemap.getnameditemns.html">DOMNamedNodeMap::getNamedItemNS</a> &mdash; ローカル名および名前空間 URI で指定したノードを取得する</li><li><a href="domnamednodemap.item.html">DOMNamedNodeMap::item</a> &mdash; インデックスで指定したノードを取得する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="94346""></a>
  <div class="note">
   <strong class="user">kendsnyder at gmail dot com</strong>
   <a href="#94346" class="date">29-Oct-2009 04:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to xafford's comment. When iterating a named node map collection using -&gt;item() or using foreach, removing a attribute with DOMNode-&gt;removeAttribute() or DOMNode-&gt;removeAttributeNode() alters the collection as if it were a stack. To illustrate, the code below tries to remove all attributes from each element but only removes the first. One work around is to copy the named node map into an array before removing attributes. Using PHP 5.2.9 on Windows XP.<br />
<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
</span><span class="default">$html&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;h1 id="h1test" class="h1test"&gt;Heading&lt;/h1&gt;'</span><span class="keyword">;<br />
</span><span class="default">$html </span><span class="keyword">.= </span><span class="string">'&lt;p align="left" class="ptest"&gt;Hello World&lt;/p&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
<br />
</span><span class="comment">// remove attributes from&nbsp; the h1 element<br />
</span><span class="default">$h1 </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'h1'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">$length </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)-&gt;</span><span class="default">name</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h1</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"h1: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// remove attributes from the p element<br />
</span><span class="default">$p </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'p'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
foreach (</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$attrNode</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"p: removed attribute `</span><span class="default">$name</span><span class="string">`&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
OUTPUT:<br />
-------<br />
h1: removed attribute `id`<br />
<br />
Notice: Trying to get property of non-object in nodemap.php on line 13<br />
h1: removed attribute ``<br />
p: removed attribute `align`</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94078""></a>
  <div class="note">
   <strong class="user">xafford</strong>
   <a href="#94078" class="date">15-Oct-2009 12:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I stumbled upon a problem with DOMNamedNodeMap. If you iterate over a DOMNamedNodeMap, representing the attributes of a DOMElement with foreach and you use DOMElement::removeAttributeNode only the first attribute will be handled.
<br />

<br />
Example (not complete):
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
</span><span class="comment">/*
<br />
&nbsp;* Imagine you got a node like this:
<br />
&nbsp;* &lt;a onclick="alert('evil')" href="<a href="http://example.com" rel="nofollow" target="_blank">http://example.com</a>"&gt;evil&lt;/a&gt;
<br />
&nbsp;* and onclick should be removed, href would not be tested.
<br />
&nbsp;*/
<br />

<br />
</span><span class="keyword">foreach ( </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes </span><span class="keyword">as </span><span class="default">$attribute </span><span class="keyword">)
<br />
{
<br />

<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'checking attribute '</span><span class="keyword">, </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if ( ! </span><span class="default">in_array </span><span class="keyword">( </span><span class="default">$attribute</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="default">$allowed_attributes </span><span class="keyword">) )
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">removeAttributeNode </span><span class="keyword">( </span><span class="default">$attribute </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The output would be:
<br />

<br />
checking attribute onclick</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
