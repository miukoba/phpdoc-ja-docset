<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>SWFAction クラス</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.ming-useswfversion.html">≪ ming_useswfversion</a></li>
      <li style="float: right;"><a href="swfaction.construct.html">SWFAction::__construct ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.ming.html">Ming</a></li>
    <li>SWFAction クラス</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.swfaction" class="reference">
 <h1 class="title">SWFAction クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5 &lt;= 5.3.0, PECL ming SVN)</p>
 

  <div class="section" id="swfaction.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    SWFAction.
   </p>
  </div>

 
  <div class="section" id="swfaction.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">SWFAction</strong>
     </span>
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="methodsynopsis dc-description">
   <span class="methodname"><a href="swfaction.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$script</code></span>
   )</div>

 
   }</div>

 
  </div>
 
 <div class="section">
  <h2 class="title">説明</h2>
  <p class="para">
   スクリプトの文法は C 言語をもとにしていますが、多くの機能が
   省略されています - SWF バイトコードマシンは、より単純であることを
   志向しています。例えば、相当手の込んだ細工をしなければ、関数のコールを
   実装することもできません。なぜなら、バイトコードの jump 命令は
   ハードコードされたオフセット値を使用しているからです。
   呼び出し元のアドレスをスタックに格納したりはしません
   - すべての関数は、戻ってくる場所を正確に知っている必要があるのです。
  </p>
  <p class="para">
   結局、どんな機能が残っているのでしょう? コンパイラが理解できるトークンは
   以下のとおりです。
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      break
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      for
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      continue
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      if
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      else
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      do
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      while
     </span>
    </li>
   </ul>
  </p>
  <p class="para">
   データ型は存在しません。SWF アクションマシンにおいては、すべての値は
   文字列として扱われます。以下の関数が使用可能です。
   <dl>

    
     <dt>
time()</dt>

     <dd>

      <span class="simpara">
       ムービーが開始してからの経過時間を、ミリ秒 (?) で返します。
      </span>
     </dd>

    
    
     <dt>
random(seed)</dt>

     <dd>

      <span class="simpara">
       0 から seed までの範囲の擬似乱数を返します。
      </span>
     </dd>

    
    
     <dt>
length(expr)</dt>

     <dd>

      <span class="simpara">
       指定した式の長さを返します。
      </span>
     </dd>

    
    
     <dt>
int(number)</dt>

     <dd>

      <span class="simpara">
       指定した数値を、一番近い整数に切り下げた値を返します。
      </span>
     </dd>

    
    
     <dt>
concat(expr, expr)</dt>

     <dd>

      <span class="simpara">
       指定した式を連結して返します。
      </span>
     </dd>

    
    
     <dt>
ord(expr)</dt>

     <dd>

      <span class="simpara">
       指定した文字の ASCII コードを返します。
      </span>
     </dd>

    
    
     <dt>
chr(num)</dt>

     <dd>

      <span class="simpara">
       指定した ASCII コードに対応する文字を返します。
      </span>
     </dd>

    
    
     <dt>
substr(string, location, length)</dt>

     <dd>

      <span class="simpara">
       指定した文字列 <code class="parameter">string</code> の、
       位置 <code class="parameter">location</code> から始まる
       長さ <code class="parameter">length</code> の部分文字列を返します。
      </span>
     </dd>

    
   </dl>

  </p>
  <p class="para">
   さらに、以下のコマンドも使用できるでしょう。
   <dl>

    
     <dt>
duplicateClip(clip, name, depth)</dt>

     <dd>

      <span class="simpara">
       指定したムービークリップ (またの名をスプライト)
       <code class="parameter">clip</code> を複製します。
       新しいムービークリップの名前は <code class="parameter">name</code> で、
       深度は <code class="parameter">depth</code> となります。
      </span>
     </dd>

    
    
     <dt>
removeClip(expr)</dt>

     <dd>

      <span class="simpara">
       指定したムービークリップを削除します。
      </span>
     </dd>

    
    
     <dt>
trace(expr)</dt>

     <dd>

      <span class="simpara">
       指定した式をトレースログに書き込みます。ブラウザのプラグインが
       これをきちんと扱ってくれるかは疑わしいものです。
      </span>
     </dd>

    
    
     <dt>
startDrag(target, lock, [left, top, right, bottom])</dt>

     <dd>

      <span class="simpara">
       ムービークリップ <code class="parameter">target</code> のドラッグを開始します。
       引数 <code class="parameter">lock</code> で、マウスをロックするかどうか (?)
       を指定します - 0 (<strong><code>FALSE</code></strong>) あるいは 1 (<strong><code>TRUE</code></strong>) を指定します。
       オプションのパラメータでは、ドラッグする範囲のを指定します。
      </span>
     </dd>

    
    
     <dt>
stopDrag()</dt>

     <dd>

      <span class="simpara">
       つかれきった心を落ち着かせます。そしてムービークリップの
       ドラッグも修了させます。
      </span>
     </dd>

    
    
     <dt>
callFrame(expr)</dt>

     <dd>

      <span class="simpara">
       指定したフレームを関数としてコールします。
      </span>
     </dd>

    
    
     <dt>
getURL(url, target, [method])</dt>

     <dd>

      <span class="simpara">
       指定した URL を読み込みます。引数 <code class="parameter">target</code> は、
       (たとえば &quot;_top&quot; や &quot;_blank&quot; のような) HTML ドキュメントの target
       に対応します。オプションの引数 <code class="parameter">method</code> は、
       サーバーに変数を返したい場合に POST あるいは GET を指定します。
      </span>
     </dd>

    
    
     <dt>
loadMovie(url, target)</dt>

     <dd>

      <span class="simpara">
       指定した URL を読み込みます。引数 <code class="parameter">target</code> は、
       (おそらく) フレームの名前か
       あるいは特別な値 &quot;_level0&quot; (現在のムービーを置き換える) 、
       &quot;_level1&quot; (現在のムービーの前面に新しいムービーを表示する) 
       のうちのいずれかです。
      </span>
     </dd>

    
    
     <dt>
nextFrame()</dt>

     <dd>

      <span class="simpara">
       次のフレームに移動します。
      </span>
     </dd>

    
    
     <dt>
prevFrame()</dt>

     <dd>

      <span class="simpara">
       直前の (あるいは一つ前の) フレームに移動します。
      </span>
     </dd>

    
    
     <dt>
play()</dt>

     <dd>

      <span class="simpara">
       ムービーの再生を開始します。
      </span>
     </dd>

    
    
     <dt>
stop()</dt>

     <dd>

      <span class="simpara">
       ムービーの再生を停止します。
      </span>
     </dd>

    
    
     <dt>
toggleQuality()</dt>

     <dd>

      <span class="simpara">
       高品質/低品質を切り替えます。
      </span>
     </dd>

    
    
     <dt>
stopSounds()</dt>

     <dd>

      <span class="simpara">
       音声の再生を停止します。
      </span>
     </dd>

    
    
     <dt>
gotoFrame(num)</dt>

     <dd>

      <span class="simpara">
       フレーム番号 <code class="parameter">num</code> に移動します。
       フレーム番号は 0 からはじまります。
      </span>
     </dd>

    
    
     <dt>
gotoFrame(name)</dt>

     <dd>

      <span class="simpara">
       <code class="parameter">name</code> という名前のフレームに移動します。
       これは便利です。というのもまだフレームのラベルを追加していないからです。
      </span>
     </dd>

    
    
     <dt>
setTarget(expr)</dt>

     <dd>

      <span class="simpara">
       アクションのコンテキストといわれるものを設定します。
       これが何をするものなのかは実際のところよくわかりません。
      </span>
     </dd>
   
    
   </dl>

   そしてもうひとつ変なものがあります。if 文や while ループの中で、
   指定したフレーム番号が読み込まれているかどうかを調べるために、
   式 frameLoaded(num) が使用可能です。ええ。そのようにいわれています。
   しかし私は実際にこれをテストしたことがなく、実際に動作するのか
   疑問に思っています。かわりに /:framesLoaded を使用するとよいでしょう。
  </p>
  <p class="para">
    ムービークリップ (さぁみなさんご一緒に - またの名をスプライト)
    はプロパティをひじしています。すべてのプロパティが読み込み可能で、
    そのうちのいくつかには値を設定することも可能です。プロパティの
    一覧は以下のとおりです。
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       x
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       y 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       xScale 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       yScale 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       currentFrame - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       totalFrames - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       alpha - 透明度
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       visible - 1=on, 0=off (?) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       width - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       height - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       rotation 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       target - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       framesLoaded - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       name 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       dropTarget - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       url - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       highQuality - 1=high, 0=low (?) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       focusRect - (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       soundBufTime - (???) 
      </span>
     </li>
    </ul>
    ということで、スプライトの x 位置を指定するには単に <em>/box.x = 100;</em>
    とすればよいわけです。なぜ box の前のスラッシュがあるのでしょう?
    これは、flash がムービー内のスプライトを Unix ファイルシステム風に
    管理しているからです - つまり、この場合 box がトップレベルに存在する
    ことになります。box という名前のスプライトがその中に biff という名前の
    スプライトを保持している場合、その x 位置を指定するには
    /box/biff.x = 100; とします。すくなくとも私はそう思っています。
    もし間違っていたら指摘してください。
  </p>
 </div>
 
 </div>
 
 







 
<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="swfaction.construct.html">SWFAction::__construct</a> &mdash; 新しい SWFAction を作成する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="88960""></a>
  <div class="note">
   <strong class="user">Mark Omohundro, ajamyajax dot com</strong>
   <a href="#88960" class="date">15-Feb-2009 08:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">// tip: if you want to STOP an animation using SWFAction(),<br />
// add a nextFrame() method immediately after, like this:<br />
<br />
</span><span class="default">$p </span><span class="keyword">= new </span><span class="default">SWFSprite</span><span class="keyword">();<br />
</span><span class="comment">// ...<br />
</span><span class="default">$i</span><span class="keyword">-&gt;</span><span class="default">rotate</span><span class="keyword">(</span><span class="default">15</span><span class="keyword">);<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();<br />
</span><span class="comment">// ...<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">"stop();"</span><span class="keyword">));<br />
</span><span class="default">$p</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();&nbsp; </span><span class="comment">// stops right here<br />
//(eop)<br />
<br />
// this also seems to work, stopping a movie *exactly* where you want<br />
// but only if not using SWFSprite() movie clips... then try the above.<br />
</span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">"stop();"</span><span class="keyword">));<br />
</span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();<br />
</span><span class="comment">//(eop)<br />
<br />
// also: setFrames(n) doesn't seem to stop animation immediately...<br />
// by design, or perhaps a current version/older release bug(?)<br />
// the above was only tested with Ming 0.3beta1.&nbsp; hope this helps.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85574""></a>
  <div class="note">
   <strong class="user">jon at nux dot co dot uk</strong>
   <a href="#85574" class="date">06-Sep-2008 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little story that may help some others - part 2<br />
<br />
and this didn't work... why not.. the trace gave me a clue:<br />
<br />
Warning: createEmptyMovieClip is not a function<br />
<br />
After a bit of digging around I found that this was because the flash movie was not running in the right version. There is a ming option that is mentioned in other posts but does not seem to be well documented and that is:<br />
<br />
ming_useswfversion(setversion)<br />
<br />
This makes the world of a difference as it sets what version of flash ming outputs its movies as. <br />
<br />
So the monent I added:<br />
<br />
ming_useswfversion(6)<br />
<br />
To the top of my php I not only did the createEmptyMovieClip function work but so did the loading and the variable was accessible. Huruh! <br />
<br />
So my final code now looks like this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; ming_useswfversion</span><span class="keyword">(</span><span class="default">6</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= new </span><span class="default">SWFMovie</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setRate</span><span class="keyword">(</span><span class="default">30.000000</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setDimension</span><span class="keyword">(</span><span class="default">480</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setBackground</span><span class="keyword">(</span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; myvar = "variable to pass to flash";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; this.createEmptyMovieClip("mc", 99999);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; mc.loadMovie ("/flash_file_created_by_hand.swf");<br />
&nbsp;&nbsp;&nbsp; '</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/x-shockwave-flash'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
instead of this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $m </span><span class="keyword">= new </span><span class="default">SWFMovie</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setRate</span><span class="keyword">(</span><span class="default">30.000000</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setDimension</span><span class="keyword">(</span><span class="default">480</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setBackground</span><span class="keyword">(</span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; myvar = "variable to pass to flash";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; LoadMovie("/flash_file_created_by_hand.swf", "mc");<br />
&nbsp;&nbsp;&nbsp; '</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* -- make movie clip 'mc' that we will load flash_file_created_by_hand.swf into -- */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s1 </span><span class="keyword">= new </span><span class="default">SWFSprite</span><span class="keyword">();&nbsp; </span><span class="comment">/* (1 frames) */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s1</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();&nbsp; </span><span class="comment">/* (end of sprite frame 0) */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i1 </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i1</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">(</span><span class="string">'mc'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();&nbsp; </span><span class="comment">/* (end of frame 0) */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/x-shockwave-flash'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
I dont pretend to be a flash guru.. but i know it took me a while to figure this all out.. so I thought that this post might one day be of help to someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85573""></a>
  <div class="note">
   <strong class="user">jon at nux dot co dot uk</strong>
   <a href="#85573" class="date">06-Sep-2008 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little story that may help some others - part 1<br />
<br />
Upgrading from:<br />
<br />
I have used ming for several years now for injecting variables into flash, usually for menus. In a recent move to a new server all the ming/php stopped working. Ming was working and properly installed but the variables just weren't apparent within the flash movie. <br />
<br />
The old server is running:<br />
ming-0.2a_1&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; LGPL'ed Flash 4/5 movie output library with many languages <br />
php4-ming-4.4.1_1&nbsp;&nbsp; The ming shared extension for php<br />
<br />
The new one is running:<br />
ming-0.3.0_3&nbsp; &nbsp; &nbsp; &nbsp; LGPL'ed Flash 4/5 movie output library with many languages <br />
php5-ming-5.2.6_1&nbsp;&nbsp; The ming shared extension for php<br />
<br />
So the way I have always done this is to put all my data together in php, and then put it into an array/variable in Flash. I then create a movie clip and load my movie.swf (made by hand in flash) into the movieclip. <br />
<br />
I know there are now cleaner ways of getting data loaded into Flash (even directly from Flash without ming) but as I have many many movies out there using ming it is far easier to change a few lines of php to get them working again than change every flash movie.<br />
<br />
So anyhow, here is the code:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $m </span><span class="keyword">= new </span><span class="default">SWFMovie</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setRate</span><span class="keyword">(</span><span class="default">30.000000</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setDimension</span><span class="keyword">(</span><span class="default">480</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setBackground</span><span class="keyword">(</span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; myvar = "variable to pass to flash";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; LoadMovie("/flash_file_created_by_hand.swf", "mc");<br />
&nbsp;&nbsp;&nbsp; '</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/* -- make movie clip 'mc' that we will load flash_file_created_by_hand.swf into -- */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s1 </span><span class="keyword">= new </span><span class="default">SWFSprite</span><span class="keyword">();&nbsp; </span><span class="comment">/* (1 frames) */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s1</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();&nbsp; </span><span class="comment">/* (end of sprite frame 0) */<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i1 </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i1</span><span class="keyword">-&gt;</span><span class="default">setName</span><span class="keyword">(</span><span class="string">'mc'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">nextFrame</span><span class="keyword">();&nbsp; </span><span class="comment">/* (end of frame 0) */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-type: application/x-shockwave-flash'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
So what stopped working. Well this took me a while to work out, and even know I am not 100% sure but I can tell you what does work and how I got there.<br />
<br />
Firstly I needed some more debugging, and so installing the flash debug player <a href="http://www.adobe.com/support/flashplayer/downloads.html and " rel="nofollow" target="_blank">http://www.adobe.com/support/flashplayer/downloads.html and </a>'Flash Tracer' https://addons.mozilla.org/en-US/firefox/addon/3469 enabled me to see trace output of the ming movie and my loaded movie (flash_file_created_by_hand.swf).&nbsp; If you don't already know then this is worth knowing about. I had to play around a bit to get the debug player to write its log file, but it is worth it. <br />
Make sure you have the write settings when you publish your movie otherwise you will not be able to see the trace output.<br />
<br />
So now I can see trace... well I used to this run a few checks to see for instance if the movie clip was there :<br />
<br />
$s1-&gt;add(new SWFAction('<br />
&nbsp;&nbsp;&nbsp; trace ("location of movie clip is: " + this._target);<br />
');&nbsp; &nbsp; <br />
<br />
and so I played around.. and I could see that the movie clip 'mc' was being created and that the movie flash_file_created_by_hand.swf was being loaded into&nbsp; it but well not much else. So I still coudn't see what was happening to the data. I currently suspect that the loadMovie was loading the movie into level0 or _root rather than into /mc (_root.mc) as thus wiping out the ming vabiables.. but I can't be sure. Given that the trace of the target etc happens before the loadmovie function I think this is entirely possible.<br />
<br />
Anyhow, I thought I may aswell try to do this a differt way.. that is create the movieclip from actionsript rather than with php/ming.. ie:<br />
<br />
$m-&gt;add(new SWFAction('<br />
&nbsp;&nbsp;&nbsp; this.createEmptyMovieClip("mc", 999);<br />
');<br />
<br />
instead of:<br />
<br />
/* -- make movie clip 'mc' that we will load flash_file_created_by_hand.swf into -- */<br />
$s1 = new SWFSprite();&nbsp; /* (1 frames) */<br />
$s1-&gt;nextFrame();&nbsp; /* (end of sprite frame 0) */<br />
$i1 = $m-&gt;add($s1);<br />
$i1-&gt;setName('mc');<br />
$m-&gt;nextFrame();&nbsp; /* (end of frame 0) */</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80858""></a>
  <div class="note">
   <strong class="user">PHP User</strong>
   <a href="#80858" class="date">04-Feb-2008 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Typo in first example above:
<br />

<br />
&nbsp; $m-&gt;add(new SWFAction("/box.x += 3;"));
<br />

<br />
Should be:
<br />

<br />
&nbsp; $m-&gt;add(new SWFAction("box.x += 3;"));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79387""></a>
  <div class="note">
   <strong class="user">tore dot aurstad at ntebb dot no</strong>
   <a href="#79387" class="date">24-Nov-2007 04:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is some difficulty adressing objects in the swfmovie using swfaction, at least when using Windows and Flash Player 9. I debugged the .swf file generated with php ming in 
<br />
Adobe Flash CS3 and saw that my references on swfdisplayitems was not set correctly. I tried labelling a submovie (swfsprite object) "showmovie", but the actionscript did not seem to be able to reference the object. The debugging in Adobe Flash 9 showed the "showmovie" object to instead have the labelling "_level0.instance1", I adjusted the code and then was able to manipulate the objects in my swfmovie. The naming scheme seems to follow this "_level0.instanceX" labelling, check by debugging your .swf movies generated from php ming at least in Windows+Flash player 9 to check if swfdisplayitem's method setname also does not work here.
<br />

<br />
Tore Aurstad, Norway</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68848""></a>
  <div class="note">
   <strong class="user">samrerb at gmail dot com</strong>
   <a href="#68848" class="date">13-Aug-2006 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for creating a play/pause button I used this script:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//pause button<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= new </span><span class="default">SWFButton</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addShape</span><span class="keyword">(</span><span class="default">rect</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">), </span><span class="default">SWFBUTTON_HIT </span><span class="keyword">| </span><span class="default">SWFBUTTON_UP </span><span class="keyword">| </span><span class="default">SWFBUTTON_DOWN </span><span class="keyword">| </span><span class="default">SWFBUTTON_OVER</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addAction</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">"stop();"</span><span class="keyword">),</span><span class="default">SWFBUTTON_MOUSEDOWN</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$movie</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
<br />
</span><span class="comment">//play button<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= new </span><span class="default">SWFButton</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addShape</span><span class="keyword">(</span><span class="default">rect_two</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0xff</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">), </span><span class="default">SWFBUTTON_HIT </span><span class="keyword">| </span><span class="default">SWFBUTTON_UP </span><span class="keyword">| </span><span class="default">SWFBUTTON_DOWN </span><span class="keyword">| </span><span class="default">SWFBUTTON_OVER</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addAction</span><span class="keyword">(new </span><span class="default">SWFAction</span><span class="keyword">(</span><span class="string">"play();"</span><span class="keyword">),</span><span class="default">SWFBUTTON_MOUSEDOWN</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$movie</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>it has to be run during every frame for the buttons to be in every frame... hope that helps somebody....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61149""></a>
  <div class="note">
   <strong class="user">julien/*AT*/theoconcept.com</strong>
   <a href="#61149" class="date">26-Jan-2006 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fscommand, the proper way to call a javascript function from a flash animation seems not to work in Ming at the moment, here is a commented example on how to do that :<br />
<br />
<a href="http://blog.theoconcept.com/flashlink.php" rel="nofollow" target="_blank">http://blog.theoconcept.com/flashlink.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46839""></a>
  <div class="note">
   <strong class="user">ifrost at uos dot de</strong>
   <a href="#46839" class="date">25-Oct-2004 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to open an URL in a new window, define a shape ($ashape) and use this code:<br />
<br />
<span class="default">&lt;?php<br />
$b </span><span class="keyword">= new </span><span class="default">SWFButton</span><span class="keyword">();<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addShape</span><span class="keyword">(</span><span class="default">$ashape</span><span class="keyword">, </span><span class="default">SWFBUTTON_HIT </span><span class="keyword">| </span><span class="default">SWFBUTTON_UP </span><span class="keyword">| </span><span class="default">SWFBUTTON_DOWN </span><span class="keyword">| </span><span class="default">SWFBUTTON_OVER</span><span class="keyword">);<br />
</span><span class="default">$b</span><span class="keyword">-&gt;</span><span class="default">addAction</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">SWFAction</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'getURL("<a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>","_blank");' </span><span class="comment">// _blank is the target like in html<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">), </span><span class="default">SWFBUTTON_MOUSEDOWN<br />
</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
But if you want it in the same window use this addAction():<br />
<br />
<span class="default">&lt;?php<br />
$b</span><span class="keyword">-&gt;</span><span class="default">addAction</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; new </span><span class="default">SWFAction</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'this.getURL("<a href="http://www.php.net" rel="nofollow" target="_blank">http://www.php.net</a>");'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">), </span><span class="default">SWFBUTTON_MOUSEDOWN<br />
</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38722""></a>
  <div class="note">
   <strong class="user">jerryscript at aol dot com</strong>
   <a href="#38722" class="date">05-Jan-2004 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ming 0.3 (current cvs) can use most MX actionscript, just set the swf version to 6<br />
<br />
ming_useswfversion(6);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37110""></a>
  <div class="note">
   <strong class="user">Anze</strong>
   <a href="#37110" class="date">03-Nov-2003 09:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
fscommand() doesn't work (at least in Ming 0.2a), but there is a workaround. <br />
Instead of:<br />
&nbsp;fscommand("do","something");<br />
use:<br />
&nbsp;getURL("fscommand:do","something");</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25191""></a>
  <div class="note">
   <strong class="user">jamesNOSPAMbarros at hotNOSPAMmail dot com</strong>
   <a href="#25191" class="date">13-Sep-2002 08:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Printing Flash Movies<br />
<br />
When a browser tries to print flash, the autoscaling can make it look ugly. users have to right click on the flash and select "print" to get it to print properly. (so that thier flash player is handling the printing, not the browser) If you dont want to require this of your users, you can create a print button with the following action:<br />
<br />
getURL('print:', '/');<br />
<br />
by default, this prints ALL frames. to avoid this, just put:<br />
&nbsp;<br />
$m-&gt;labelFrame("#p");<br />
before:<br />
$m-&gt;nextFrame();<br />
<br />
where $m is your SWFMovie. the #p label denotes a printable frame. (this also allows you to build your movie, then throw the print button into the next frame and not have it show up when you print. )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18776""></a>
  <div class="note">
   <strong class="user">diem at writeme dot com</strong>
   <a href="#18776" class="date">05-Feb-2002 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry Guys ....<br />
the /box.x syntax is for fash version 4 ... and _root.box._x is used for flash version 5 ....<br />
Ming &gt;= 0.2 assumes version 5 by default .... to use version 4 syntax, you must use ming_useswfversion before ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
