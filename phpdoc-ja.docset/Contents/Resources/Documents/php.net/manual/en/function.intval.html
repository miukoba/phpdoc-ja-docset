<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>変数の整数としての値を取得する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.import-request-variables.html">≪ import_request_variables</a></li>
      <li style="float: right;"><a href="function.is-array.html">is_array ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.var.html">変数操作 関数</a></li>
    <li>変数の整数としての値を取得する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.intval" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">intval</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">intval</span> &mdash; <span class="dc-title">変数の整数としての値を取得する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.intval-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>intval</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$var</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$base</code><span class="initializer"> = 10</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   指定された値 <code class="parameter">base</code> を基数（デフォルトは 10）とする、
   <code class="parameter">var</code> の <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> としての値を返します。
   オブジェクトに <span class="function"><strong>intval()</strong></span> を使用することはできません。
   その場合は <strong><code>E_NOTICE</code></strong> レベルのエラーを発して 1 を返します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.intval-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">var</code></dt>

     <dd>

      <p class="para">
       整数に変換するスカラー値
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">base</code></dt>

     <dd>

      <p class="para">
       変換のための基数
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        <code class="parameter">base</code> が 0 の場合は、
        <code class="parameter">var</code> のフォーマットに基づいて利用する基数を決めます。
        <ul class="itemizedlist">
         <li class="listitem">
          <span class="simpara">
           文字列の先頭が &quot;0x&quot; (あるいは &quot;0X&quot;) の場合は、基数を 16 (十六進数) とします。
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           そうではなく、文字列の先頭が &quot;0&quot; の場合は、基数を 8 (八進数) とします。
           otherwise,
          </span>
         </li>
         <li class="listitem">
          <span class="simpara">
           それ以外の場合は、基数を 10 (十進数) とします。
          </span>
         </li>
        </ul>
       </p>
      </p></blockquote>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.intval-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功時は <code class="parameter">var</code> の整数値、失敗時は 0。
   空の配列の場合は 0、空でない配列の場合は
   1 を返します。
  </p>
  <p class="para">
   最大値はシステムに依存します。32 ビットシステムでは、
   最大の符号付き整数の範囲 -2147483648 〜 2147483647 となります。
   このため、そのようなシステムでは <em>intval(&#039;1000000000000&#039;)</em>
   は 2147483647 を返します。
   64 ビットシステムにおける最大の符号付き整数は 9223372036854775807
   となります。
  </p>
  <p class="para">
   文字列の場合、文字列の最左の文字に依存しますが、ほとんどの場合で 0
   を返します。
   <a href="language.types.integer.html#language.types.integer.casting" class="link">整数への変換</a>
   の一般的なルールが適用されます。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.intval-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5361">
    <p><strong>例1 <span class="function"><strong>intval()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
     以下の例は 32 ビットシステムに基づきます。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">42</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">4.2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;4<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'42'</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'+42'</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'-42'</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;-42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">042</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;34<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'042'</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">1e10</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;1410065408<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'1e10'</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;1<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">0x1A</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;26<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">42000000</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42000000<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">420000000000000000000</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'420000000000000000000'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;2147483647<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #0000BB">42</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;42<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(</span><span style="color: #DD0000">'42'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;34<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(array());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">intval</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;1<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.intval-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    パラメータ <code class="parameter">base</code> はパラメータ
    <code class="parameter">var</code> が文字列でない限り意味がありません。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.intval-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.1.0</td>
       <td>
        オブジェクトを <code class="parameter">var</code>
        に渡すと、<strong><code>E_NOTICE</code></strong>
        が発生して 1 を返します。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.intval-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.boolval.html" class="function" rel="rdfs-seeAlso">boolval()</a> - 変数の boolean としての値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.floatval.html" class="function" rel="rdfs-seeAlso">floatval()</a> - 変数の float 値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.strval.html" class="function" rel="rdfs-seeAlso">strval()</a> - 変数の文字列としての値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.settype.html" class="function" rel="rdfs-seeAlso">settype()</a> - 変数の型をセットする</span></li>
    <li class="member"><span class="function"><a href="function.is-numeric.html" class="function" rel="rdfs-seeAlso">is_numeric()</a> - 変数が数字または数値形式の文字列であるかを調べる</span></li>
    <li class="member"><a href="language.types.type-juggling.html" class="link">型の相互変換</a></li>
    <li class="member"><a href="ref.bc.html" class="link">BCMath任意精度数学関数</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115362""></a>
  <div class="note">
   <strong class="user">nlong121 at gmail dot com</strong>
   <a href="#115362" class="date">12-Jul-2014 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As a note using intval() as a check for string comparison will not work<br />
<br />
$string="Pork";<br />
$test=intval($string);<br />
echo $test.'=='.$string;<br />
if($string==$test)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; echo '::Test PASS';&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp;&nbsp; echo '::Test FAIL';&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
if(is_numeric($string))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; echo '::Test PASS';&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp;&nbsp; echo '::Test FAIL';&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
/*Produces <br />
0==Pork :: Test PASS<br />
is_numeric(Pork) :: Test FAIL</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114045""></a>
  <div class="note">
   <strong class="user">jplevene at netscape dot net</strong>
   <a href="#114045" class="date">06-Jan-2014 08:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have found intval very useful for database security.<br />
<br />
If you are passing a value via<br />
<br />
- Data from user input<br />
- Data that you have stored RAW on DB (witch is the best way) and you are using on a new sql statment<br />
- Data from unknown/other origin<br />
<br />
and the data is supposed to be an integer, I always run it through intval before I put it into the query (or you could use real_escape_string)<br />
<br />
This prevents hackers from passing the variable as an SQL statement instead of a number in order to attack your database.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112039""></a>
  <div class="note">
   <strong class="user">pfreet at gmail dot com</strong>
   <a href="#112039" class="date">26-Apr-2013 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do not use intval() when you really want round(). This is due to how PHP handles precision. <br />
<br />
echo number_format(8.20*100, 20), "&lt;br /&gt;";<br />
echo intval(8.20*100), "&lt;br /&gt;";<br />
echo floor(8.20*100), "&lt;br /&gt;";<br />
echo round(8.20*100), "&lt;br /&gt;";<br />
<br />
819.99999999999988631316<br />
819 <br />
819<br />
820</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111582""></a>
  <div class="note">
   <strong class="user">espertalhao04 at hotmail dot com</strong>
   <a href="#111582" class="date">06-Mar-2013 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to take a number from a string, no matter what it may contain, here is a good solution:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">int</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">){return(int)</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[^\-\d]*(\-?\d*).*/'</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);}<br />
<br />
echo </span><span class="default">int</span><span class="keyword">(</span><span class="string">'j18ugj9hu0gj5hg'</span><span class="keyword">);<br />
</span><span class="comment">//output: 18<br />
</span><span class="default">?&gt;<br />
</span>this example returns an int, so it will follow the int rules, and has support for negative values.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">int</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">){return(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[^\-\d]*(\-?\d*).*/'</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">))?</span><span class="default">$a</span><span class="keyword">:</span><span class="string">'0'</span><span class="keyword">;}<br />
<br />
echo </span><span class="default">int</span><span class="keyword">(</span><span class="string">'j-1809809808908099878758765ugj9hu0gj5hg'</span><span class="keyword">);<br />
</span><span class="comment">//output: -1809809808908099878758765<br />
</span><span class="default">?&gt;<br />
</span><br />
this one returns a string with just the numeric value.<br />
it also supports negative values.<br />
<br />
the latter is better when you have a 32 bit system and you want a huge int that is higher than PHP_MAX_INT.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109750""></a>
  <div class="note">
   <strong class="user">gregrobson at gmail dot com</strong>
   <a href="#109750" class="date">17-Aug-2012 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just wanted to be sure that a string was going to be valid if I intval'ed it. This regular expression matches:<br />
0<br />
Any positive integer (no + sign)<br />
Any negative integer (with a - sign)<br />
<br />
It does not match a leading 0 or any other character. You are advised to strip out commas, trim the string and check range yourself ;)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Loops through each non-array element and actions a function.<br />
&nbsp;*<br />
&nbsp;* @return boolean|integer TRUE if the value matches as an integer, FALSE if<br />
&nbsp;* an error occured or 0 if not match was found.<br />
&nbsp;*/<br />
</span><span class="keyword">public function </span><span class="default">validate</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^(0|(-{0,1}[1-9]\d*))$/'</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$value </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you use intval() now, you are merely changing the data type.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106478""></a>
  <div class="note">
   <strong class="user">Ken</strong>
   <a href="#106478" class="date">12-Nov-2011 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not mentioned elsewhere: intval(NULL) also returns 0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101583""></a>
  <div class="note">
   <strong class="user">yves</strong>
   <a href="#101583" class="date">28-Dec-2010 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The behaviour of intval() is interesting when supplying a base, and you better check your intval base-based expressions, as it is counter-intuitive.<br />
As the example shows<br />
<span class="default">&lt;?php<br />
&nbsp; intval</span><span class="keyword">(</span><span class="string">'42'</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">); </span><span class="comment">// =&gt; 34<br />
&nbsp; </span><span class="default">intval</span><span class="keyword">(</span><span class="default">42</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// =&gt; 42 !<br />
</span><span class="default">?&gt;<br />
</span>PHP considers the 42 as being already an integer, and doesn't apply any conversion. And supplying<br />
<span class="default">&lt;?php<br />
&nbsp; intval</span><span class="keyword">(</span><span class="default">49</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);&nbsp; </span><span class="comment">// =&gt; 49 !<br />
</span><span class="default">?&gt;<br />
</span>produces no error and no warning.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101439""></a>
  <div class="note">
   <strong class="user">winbill at hotmail dot com</strong>
   <a href="#101439" class="date">16-Dec-2010 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful :<br />
<br />
<span class="default">&lt;?php<br />
$n</span><span class="keyword">=</span><span class="string">"19.99"</span><span class="keyword">;<br />
print </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">*</span><span class="default">100</span><span class="keyword">); </span><span class="comment">// prints 1998<br />
</span><span class="keyword">print </span><span class="default">intval</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">*</span><span class="default">100</span><span class="keyword">)); </span><span class="comment">// prints 1999<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99345""></a>
  <div class="note">
   <strong class="user">jeremy at cfegames dot com</strong>
   <a href="#99345" class="date">12-Aug-2010 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When retrieving numbers or integers from a MySQL DB, it's best to use intval(), or it will continue to be a string.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$check</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">] = </span><span class="default">inval</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]);<br />
&nbsp;</span><span class="default">$user_id </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]); </span><span class="comment">// Not sure if you need to do it again, but doesn't hurt.<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">])<br />
</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$user_id</span><span class="keyword">)<br />
</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">])<br />
</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$user_id</span><span class="keyword">)<br />
<br />
</span><span class="comment">// Output<br />
</span><span class="default">true<br />
true<br />
false<br />
false<br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91649""></a>
  <div class="note">
   <strong class="user">spoon_reloaded at gmail dot com</strong>
   <a href="#91649" class="date">21-Jun-2009 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a really useful undocumented feature:
<br />

<br />
You can have it automatically deduce the base of the number from the prefix of the string using the same syntax as integer literals in PHP ("0x" for hexadecimal, "0" for octal, non-"0" for decimal) by passing a base of 0 to intval():
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="string">"0x1a"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// hex; prints "26"
<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="string">"057"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// octal; prints "47"
<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="string">"42"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// decimal; prints "42"
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91342""></a>
  <div class="note">
   <strong class="user">bert at nospam dot thinc dot nl</strong>
   <a href="#91342" class="date">07-Jun-2009 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need the reverse function of intval(), the code hereunder might be helpfull.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">itoa</span><span class="keyword">( </span><span class="default">$ii</span><span class="keyword">, </span><span class="default">$radix</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">, </span><span class="default">$stritoa</span><span class="keyword">=</span><span class="string">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabc" </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$radix </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$stritoa </span><span class="keyword">) )&nbsp; &nbsp; </span><span class="comment">//&nbsp; &nbsp; does request makes sense?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//&nbsp; &nbsp; think of your own way to handle this case<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sign </span><span class="keyword">= </span><span class="default">$ii</span><span class="keyword">&lt;</span><span class="default">0 </span><span class="keyword">? </span><span class="string">"-"</span><span class="keyword">: </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ii </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">( </span><span class="default">$ii </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rc </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rc </span><span class="keyword">.= </span><span class="default">$stritoa</span><span class="keyword">[ </span><span class="default">$ii </span><span class="keyword">% </span><span class="default">$radix </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ii </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">( </span><span class="default">$ii </span><span class="keyword">/ </span><span class="default">$radix </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } while ( </span><span class="default">$ii </span><span class="keyword">&gt;</span><span class="default">0 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$sign </span><span class="keyword">. </span><span class="default">strrev</span><span class="keyword">( </span><span class="default">$rc </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89807""></a>
  <div class="note">
   <strong class="user">ittasks at gmail dot com</strong>
   <a href="#89807" class="date">24-Mar-2009 10:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when converting some optional form values to positive integers and to be on the safe side, you can use this:
<br />

<br />
<span class="default">&lt;?php $q</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="string">"0"</span><span class="keyword">.</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'q'</span><span class="keyword">]); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85392""></a>
  <div class="note">
   <strong class="user">Seally</strong>
   <a href="#85392" class="date">28-Aug-2008 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Re: nobodyisperfect88 at hotmail dot de<br />
jay at w3prodigy dot com had it right. I believe it is an issue with the floating point registers on computers, which have a precision of about 17 digits. When you get more precise than that, it rounds.<br />
<br />
Since the second example can fit in the register, no rounding occurs, and PHP can truncate the portion after the decimal. However, the system automatically rounds the first example to 1, which is what PHP returns.<br />
<br />
(Tested on Windows XP 32bit)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85145""></a>
  <div class="note">
   <strong class="user">yhoko at yhoko dot com</strong>
   <a href="#85145" class="date">17-Aug-2008 04:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this function behaves different in PHP4/5 when parsing NAN-values. Try the following example:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">die( </span><span class="string">"Result = " </span><span class="keyword">. </span><span class="default">intval</span><span class="keyword">( </span><span class="default">NAN </span><span class="keyword">) ); </span><span class="default">?&gt;<br />
</span><br />
- In PHP 4 the result is 0<br />
- In PHP 5 the result is 2^31 (running on 32bit)<br />
<br />
Yhoko</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83769""></a>
  <div class="note">
   <strong class="user">phpben hood id au</strong>
   <a href="#83769" class="date">11-Jun-2008 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
kris at mha dot ca:<br />
<br />
Implicit typing. This is a feature, not a bug.<br />
<br />
The == operator will convert your string to an int automatically (in this case) so that it is really comparing 123 and 123, which is of course the same.<br />
<br />
If you use the === operator then this will not occur, as it will only match on the same value and type. This works as expected:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$tmp_array </span><span class="keyword">= </span><span class="string">"123,232,141"</span><span class="keyword">;<br />
<br />
if (</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">) === </span><span class="default">$tmp_array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"'"</span><span class="keyword">.</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">).</span><span class="string">"' equals '</span><span class="default">$tmp_array</span><span class="string">'\n"</span><span class="keyword">;<br />
}<br />
else<br />
{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"'"</span><span class="keyword">.</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">).</span><span class="string">"' does not equal '</span><span class="default">$tmp_array</span><span class="string">'\n"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82043""></a>
  <div class="note">
   <strong class="user">jay at w3prodigy dot com</strong>
   <a href="#82043" class="date">25-Mar-2008 09:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note:<br />
<br />
$int = 0.99999999999999999;<br />
echo intval($int); // returns 1<br />
<br />
and<br />
<br />
$int = 0.9999999999999999;<br />
echo intval($int); // returns 0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79766""></a>
  <div class="note">
   <strong class="user">michiel ed thalent nl</strong>
   <a href="#79766" class="date">12-Dec-2007 02:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function to get an integer from everywhere in a string (concatenated or not).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str2int</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$concat </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$int </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$concat_flag </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) &amp;&amp; </span><span class="default">$concat_flag</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">.= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif(!</span><span class="default">$concat </span><span class="keyword">&amp;&amp; </span><span class="default">$concat_flag </span><span class="keyword">&amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$int</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$concat_flag </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return (int) </span><span class="default">$int</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">str2int</span><span class="keyword">(</span><span class="string">'sh12apen11'</span><span class="keyword">)); </span><span class="comment">// int(12)<br />
</span><span class="keyword">echo </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">str2int</span><span class="keyword">(</span><span class="string">'sh12apen11'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">)); </span><span class="comment">// int(1211)<br />
</span><span class="keyword">echo </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">str2int</span><span class="keyword">(</span><span class="string">'shap99en'</span><span class="keyword">)); </span><span class="comment">// int(99)<br />
</span><span class="keyword">echo </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">intval</span><span class="keyword">(</span><span class="string">'shap99en'</span><span class="keyword">)); </span><span class="comment">// int(0)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78875""></a>
  <div class="note">
   <strong class="user">lrdsatyr8 at hotmail dot com</strong>
   <a href="#78875" class="date">31-Oct-2007 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just want to get the integer value of a number without all the hassle, just use intval()... like so:<br />
<br />
$a1 = 10.4;<br />
$a2 = -12.5;<br />
$a3 = 44.1238503;<br />
<br />
print intval($a1);&nbsp;&nbsp; // returns 10<br />
print intval($a2);&nbsp;&nbsp; // returns -12<br />
print intval($a3);&nbsp;&nbsp; // returns 44<br />
<br />
it's that easy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76803""></a>
  <div class="note">
   <strong class="user">jazeik at gmail dot com</strong>
   <a href="#76803" class="date">31-Jul-2007 03:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@kris:<br />
If you had followed the following links:<br />
"The common rules of integer casting apply." =&gt; <a href="http://us.php.net/manual/en/language.types.integer.php" rel="nofollow" target="_blank">http://us.php.net/manual/en/language.types.integer.php</a><br />
"See String conversion to numbers" =&gt; <a href="http://us.php.net/manual/en/language.types.integer.php" rel="nofollow" target="_blank">http://us.php.net/manual/en/language.types.integer.php</a><br />
<br />
Then you would have found the following: "The value is given by the initial portion of the string. If the string starts with valid numeric data, this will be the value used."<br />
<br />
So this behaviour is a feature not a bug. <br />
<br />
The following code will work:<br />
<span class="default">&lt;?php<br />
<br />
$tmp_array </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="string">"123,232,141"</span><span class="keyword">);<br />
<br />
if(</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">) == </span><span class="default">$tmp_array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">) . </span><span class="string">" equals </span><span class="default">$tmp_array</span><span class="string">\n"</span><span class="keyword">; <br />
}else{<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$tmp_array</span><span class="keyword">) . </span><span class="string">" does not equal </span><span class="default">$tmp_array</span><span class="string">\n"</span><span class="keyword">; <br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
123232141 equals 123232141</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75956""></a>
  <div class="note">
   <strong class="user">vizigr0u at gmail dot com</strong>
   <a href="#75956" class="date">24-Jun-2007 01:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
intval used on bools returns either 1 or 0<br />
I usually use this to properly set bools in my tables <br />
(assuming you use some kind of int like tinyints as booleans) : <br />
<span class="default">&lt;?php <br />
$myvar </span><span class="keyword">= </span><span class="string">'right value'</span><span class="keyword">;<br />
</span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">'INSERT INTO mytable (activated) <br />
VALUES(' </span><span class="keyword">. </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$myvar </span><span class="keyword">=== </span><span class="string">'right value'</span><span class="keyword">) . </span><span class="string">')'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74767""></a>
  <div class="note">
   <strong class="user">aryel at redtwilightNO dot comSPAM dot brNOT</strong>
   <a href="#74767" class="date">26-Apr-2007 07:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since integers are stored on multiple bytes in the memory in binary format, once an signed long integer reaches the maximum value of 2147483646 (which is the maximum value that 8 bits of memory, size of a long int, can store, binary-wise), atleast on C/C++ the number starts to roll back, going gradually to ...45, ...45 and eventually reaching a negative value. Some REALLY large values will return -1, probably because PHP simply rejects the number, though I'm not sure why.
<br />

<br />
For further info:
<br />
<a href="http://www.rwc.uc.edu/koehler/comath/13.html" rel="nofollow" target="_blank">http://www.rwc.uc.edu/koehler/comath/13.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74312""></a>
  <div class="note">
   <strong class="user">maciek dot iwanowskis at glasspartnership dot co dot uk</strong>
   <a href="#74312" class="date">04-Apr-2007 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that if you're trying to cast to integer (or use intval()) on integer of value bigger then 2147483646 it's hard to predict returned value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65248""></a>
  <div class="note">
   
   <a href="#65248" class="date">27-Apr-2006 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Operating on integers gives puzzling results--which don't seem to have to do with the number of bits...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">1e10</span><span class="keyword">);&nbsp; </span><span class="comment">// -1 on my system; 1410065408 in the example<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">1e5</span><span class="keyword">); </span><span class="comment">// 100000 (my own example: lower number--works all right)<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">4e9</span><span class="keyword">);&nbsp; </span><span class="comment">// -294967296 ! (my own example: somewhere in the middle)<br />
<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">42000000</span><span class="keyword">);&nbsp; </span><span class="comment">// 42000000 (as in the manual; reasonable)<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">420000000000000000000</span><span class="keyword">);&nbsp; </span><span class="comment">// -1 on my system at least. 0 in the example<br />
// ...and yet still odder...<br />
</span><span class="keyword">echo </span><span class="default">intval</span><span class="keyword">(</span><span class="default">4200000000</span><span class="keyword">);&nbsp; </span><span class="comment">// -94967296! (my own example: somewhere in between)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62680""></a>
  <div class="note">
   <strong class="user">mkamerma at science dot uva dot nl</strong>
   <a href="#62680" class="date">07-Mar-2006 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As addendum, the "if ($int &gt; 0)" check in the encode function is redundant. It doesn't do anything bad to keep it in since it will always be true when reaching that point, but it's a meaningless conditional this way. It's a remnant from when I tried to write the function in terms of bitshifts, which could lead to negative ints when shifting if the 32nd bit was set (instead of always padding with 0's when using &gt;&gt; it pads with 1's leading to negative ints).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62613""></a>
  <div class="note">
   <strong class="user">mkamerma at science dot uva dot nl</strong>
   <a href="#62613" class="date">05-Mar-2006 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you need to work with integer values that exceed maxint, the following functions may be of use to you - they form a codec pair for integers of variable length rather than fixed length, encoded in a byte as a 7 bit numberal with a 1 bit has-more flag, indicating that the next byte encodes a higher order part of the same number still.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* encode integer as 7bit with has-more bit numeral,<br />
&nbsp;&nbsp;&nbsp; ordered lowest byte first. */<br />
</span><span class="keyword">function </span><span class="default">encode_7bhm</span><span class="keyword">(</span><span class="default">$int</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$int</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) return </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">); </span><span class="comment">// shortcut<br />
&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">$int </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$int </span><span class="keyword">/ </span><span class="default">128</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">// overflow for this round<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$int </span><span class="keyword">- (</span><span class="default">$high </span><span class="keyword">* </span><span class="default">128</span><span class="keyword">); </span><span class="comment">// 7 bit numeral<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$int </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$high </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) { </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$low </span><span class="keyword">+ </span><span class="default">128</span><span class="keyword">; } </span><span class="comment">// has-more flag<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$low</span><span class="keyword">); } </span><span class="comment">//encode<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">$high</span><span class="keyword">;&nbsp; </span><span class="comment">// set overflow as next round's number<br />
&nbsp; </span><span class="keyword">}<br />
&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/* decode a 7bit with has-more bit numeral,<br />
&nbsp;&nbsp;&nbsp; ordered lowest byte first. */<br />
</span><span class="keyword">function </span><span class="default">decode_7bhm</span><span class="keyword">(</span><span class="default">$hmb</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">$high </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$hmb</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$byte</span><span class="keyword">/</span><span class="default">128</span><span class="keyword">); </span><span class="comment">// gets has-more flag<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$byte </span><span class="keyword">- (</span><span class="default">$high</span><span class="keyword">*</span><span class="default">128</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= </span><span class="default">$low </span><span class="keyword">* </span><span class="default">pow</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">++); </span><span class="comment">// decode<br />
&nbsp; </span><span class="keyword">}<br />
&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This codec pair is also quite useful when needing to write ints to files, as this is a low-numeral biased encoding: most of the time this will only require 8 or 16 bit rather than the 32 bits an int will use in fixed-length encoding.<br />
<br />
The encoding range:<br />
<br />
&nbsp; 1 byte&nbsp; - 0 through 128 (2^7)<br />
&nbsp; 2 bytes - 129 through 16,384 (2^14)<br />
&nbsp; 3 bytes - 16,385 through 2,097,152 (2^21)<br />
&nbsp; 4 bytes - 2,097,153 through 268,435,456 (2^28)<br />
<br />
while indeed a 32 bit encoded variable length integer will be lower than maxint, rather than needing a new 32 bit block to represent higher range only 8 more bits are required to represent this higher number (for completeness the range of representation by bytes 5-8 are listed):<br />
<br />
&nbsp; 5 bytes - 268,435,457 through 34,359,738,368 (2^35)<br />
&nbsp; 6 bytes - 343,59,738,369 through 4,398,046,511,104 (2^42)<br />
&nbsp; 7 bytes - 4,398,046,511,105 through 562,949,953,421,312 (2^49)<br />
&nbsp; 8 bytes - 562,949,953,421,313 through 720,57,594,037,927,936 (2^56)<br />
<br />
Also for completeness, the function to read a 7 bit with has-more bit from a filepointer:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// read a 7bhm numeral from file<br />
</span><span class="keyword">function </span><span class="default">read_7bhm</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$bytestring </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">$high</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$byte</span><span class="keyword">)/</span><span class="default">128</span><span class="keyword">); </span><span class="comment">// check for has-more bit<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bytestring </span><span class="keyword">.= </span><span class="default">$byte</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">decode_7bhm</span><span class="keyword">(</span><span class="default">$bytestring</span><span class="keyword">); }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61292""></a>
  <div class="note">
   <strong class="user">simon at npkk dot cz</strong>
   <a href="#61292" class="date">30-Jan-2006 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Still have on mind, that if you convert big numbers by adding zero, PHP makes automatic "to a float" conversion, so it is same as floatVal(). So if the number is realy big (over 13 digits), you can lose preciosity. Do not use it for such long numbers, if all bits do matter (IPv6 addresses and similar).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61290""></a>
  <div class="note">
   <strong class="user">simon at npkk dot cz</strong>
   <a href="#61290" class="date">30-Jan-2006 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
intval() returns maxint on number_in_string, if the result would be bigger than it. But for float returns the signed 32 bit integer with the "same" value:
<br />
<span class="default">&lt;?php
<br />
$num</span><span class="keyword">=-</span><span class="default">1000</span><span class="keyword">;
<br />
print(</span><span class="default">$num</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);
<br />
</span><span class="default">$i_str</span><span class="keyword">=</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%u"</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">);
<br />
print(</span><span class="default">$i_str</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);
<br />
</span><span class="default">$i1</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$i_str</span><span class="keyword">);
<br />
print(</span><span class="default">$i1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);
<br />
</span><span class="default">$i2</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$i_str</span><span class="keyword">));
<br />
print(</span><span class="default">$i2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
prints:
<br />

<br />
-1000
<br />
4294966296
<br />
2147483647
<br />
-1000</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60818""></a>
  <div class="note">
   <strong class="user">anonymous at place dot com</strong>
   <a href="#60818" class="date">17-Jan-2006 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
re: Disturbing issue with intval()<br />
<br />
It's probably just good practice to round decimals anyways.&nbsp; i.e...<br />
<br />
$amount = round(19.99 * 100);<br />
$test2 = intVal($amount);<br />
$test3 = intVal("$amount");<br />
<br />
echo $test2 . "&lt;br /&gt;\n";<br />
echo $test3 . "&lt;br /&gt;\n";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60793""></a>
  <div class="note">
   <strong class="user">Ben Laurienti</strong>
   <a href="#60793" class="date">16-Jan-2006 10:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You guys are going to love this.&nbsp; I found something that I found quite disturbing.<br />
<br />
$test1 = intVal(1999);<br />
<br />
$amount = 19.99 * 100;<br />
$test2 = intVal($amount);<br />
$test3 = intVal("$amount");<br />
<br />
echo $test1 . "&lt;br /&gt;\n";<br />
echo $test2 . "&lt;br /&gt;\n";<br />
echo $test3 . "&lt;br /&gt;\n";<br />
<br />
expected output:<br />
1999<br />
1999<br />
1999<br />
<br />
actual output<br />
1999<br />
1998<br />
1999<br />
<br />
Appears to be a floating point issue, but the number 1999 is the only number that I was able to get to do this.&nbsp; 19.99 is the price of many things, and for our purpose we must pass it as 1999 instead of 19.99.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55301""></a>
  <div class="note">
   <strong class="user">adspeed.com</strong>
   <a href="#55301" class="date">29-Jul-2005 05:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Say you have a string $s="3763328634" to be used as a key into the database, intval() this string will result in a different,smaller number (depends on the machine/OS). To keep the number intact but as an int/long type, do $s +=0; instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42617""></a>
  <div class="note">
   
   <a href="#42617" class="date">24-May-2004 05:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying to read 32bit values (32 bit limitation depends on the word size of your machine)&nbsp; from a string that is represented in hex with the high bit set, <br />
eg. F9833234 <br />
<br />
intval returns -1. The reason is the sign bit being set. This number is larger than can be saved in a signed int.<br />
<br />
The way around this is to read the value in using two calls to intval.<br />
<br />
eg. <br />
<br />
$val = intval(substr($str,0,4), 16); // read high 16 bit word<br />
$val &lt;&lt;= 16; // shift hi word correct position<br />
$val |= intval(substr($str, 4, 4), 16); //&nbsp; read low 16 bit word</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39681""></a>
  <div class="note">
   <strong class="user">tuxedobob at mac dot com</strong>
   <a href="#39681" class="date">07-Feb-2004 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes intval just won't cut it. For example if you want to use an unsigned 32-bit int and need all 32 bits. Recently, I wrote a little script that took and integer and converted it to an IP address. After realizing I couldn't just mod the whole thing, since the sign bit throws it off (and compensating for that), we ran into a problem where if it was entered into a form, the value somehow wasn't converted to an integer properly, at least not implicitly. The solution for this, and the way I recommend converting a string to an integer, is:<br />
<br />
$num = $num + 0;<br />
<br />
and PHP will leave your number alone; it'll just know it's a number. Such is the fun of a loosely-typed language. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32063""></a>
  <div class="note">
   <strong class="user">Robin Y. Millette http://rym.waglo.com</strong>
   <a href="#32063" class="date">15-May-2003 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Rob_Kohr at no_need_to_email dot me dot com
<br />
11-Nov-2002 12:24&nbsp; &nbsp;&nbsp; 
<br />

<br />
[snip]
<br />

<br />
$var=intval("122.5");
<br />
//$var==122
<br />

<br />
This is nice if you want to turn a double into an int automatically rounding down
<br />

<br />
Hum, I had a bug earlier today, involving ===. Coming from a c++ background, I can't help testing for types. I was using floor() to get an integer from a division by 2, and comparing that to a known integer from a for loop. Well, first I changed the === to == because the test would always be false otherwise. Next, I looked up this function, and converted most of my floor() calls to intval() calls, because I really meant to get an int, and not a float with no decimal part. So I have to disagree with the editor note here. Oh, and I'm comfortably back to using ===.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7707""></a>
  <div class="note">
   <strong class="user">zak at php dot net</strong>
   <a href="#7707" class="date">12-Aug-2000 10:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
intval converts doubles to integers by truncating the fractional component of the number.
<br />

<br />
When dealing with some values, this can give odd results.&nbsp; Consider the following:
<br />

<br />
print intval ((0.1 + 0.7) * 10);
<br />

<br />
This will most likely print out 7, instead of the expected value of 8.
<br />

<br />
For more information, see the section on floating point numbers in the PHP manual (<a href="http://www.php.net/manual/language.types.double.php" rel="nofollow" target="_blank">http://www.php.net/manual/language.types.double.php</a>)
<br />

<br />
Also note that if you try to convert a string to an integer, the result is often 0.
<br />

<br />
However, if the leftmost character of a string looks like a valid numeric value, then PHP will keep reading the string until a character that is not valid in a number is encountered.
<br />

<br />
For example:
<br />

<br />
"101 Dalmations" will convert to 101
<br />

<br />
"$1,000,000" will convert to 0 (the 1st character is not a valid start for a number
<br />

<br />
"80,000 leagues ..." will convert to 80
<br />

<br />
"1.4e98 microLenats were generated when..." will convert to 1.4e98
<br />

<br />
Also note that only decimal base numbers are recognized in strings.
<br />

<br />
"099" will convert to 99, while "0x99" will convert to 0.
<br />

<br />
One additional note on the behavior of intval.&nbsp; If you specify the base argument, the var argument should be a string - otherwise the base will not be applied.
<br />

<br />
For Example:
<br />

<br />
print intval (77, 8);&nbsp;&nbsp; // Prints 77
<br />
print intval ('77', 8); // Prints 63</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
