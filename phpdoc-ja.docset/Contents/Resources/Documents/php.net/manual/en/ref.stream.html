<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ストリーム 関数</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="streamwrapper.url-stat.html">≪ streamWrapper::url_stat</a></li>
      <li style="float: right;"><a href="function.set-socket-blocking.html">set_socket_blocking ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="book.stream.html">ストリーム</a></li>
    <li>ストリーム 関数</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="ref.stream" class="reference">
 <h1 class="title">ストリーム 関数</h1>

 





























































































































































































 




























































































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.set-socket-blocking.html">set_socket_blocking</a> &mdash; stream_set_blocking のエイリアス</li><li><a href="function.stream-bucket-append.html">stream_bucket_append</a> &mdash; bucket を brigade に追加する</li><li><a href="function.stream-bucket-make-writeable.html">stream_bucket_make_writeable</a> &mdash; 操作する brigade から bucket オブジェクトを返す</li><li><a href="function.stream-bucket-new.html">stream_bucket_new</a> &mdash; 現在のストリームで使用する新しい bucket を作成する</li><li><a href="function.stream-bucket-prepend.html">stream_bucket_prepend</a> &mdash; bucket を brigade の先頭に追加する</li><li><a href="function.stream-context-create.html">stream_context_create</a> &mdash; ストリームコンテキストを作成する</li><li><a href="function.stream-context-get-default.html">stream_context_get_default</a> &mdash; デフォルトのストリームコンテキストを取得する</li><li><a href="function.stream-context-get-options.html">stream_context_get_options</a> &mdash; ストリーム / ラッパー / コンテキストに設定されているオプションを取得する</li><li><a href="function.stream-context-get-params.html">stream_context_get_params</a> &mdash; コンテキストのパラメータを取得する</li><li><a href="function.stream-context-set-default.html">stream_context_set_default</a> &mdash; デフォルトのストリームコンテキストを設定する</li><li><a href="function.stream-context-set-option.html">stream_context_set_option</a> &mdash; ストリーム / ラッパー / コンテキストのオプションを設定する</li><li><a href="function.stream-context-set-params.html">stream_context_set_params</a> &mdash; ストリーム / ラッパー / コンテキストのパラメータを設定する</li><li><a href="function.stream-copy-to-stream.html">stream_copy_to_stream</a> &mdash; データをあるストリームから別のストリームにコピーする</li><li><a href="function.stream-encoding.html">stream_encoding</a> &mdash; ストリームのエンコード用の文字セットを設定する</li><li><a href="function.stream-filter-append.html">stream_filter_append</a> &mdash; ストリームにフィルタを付加する</li><li><a href="function.stream-filter-prepend.html">stream_filter_prepend</a> &mdash; フィルタをストリームに付加する</li><li><a href="function.stream-filter-register.html">stream_filter_register</a> &mdash; ユーザー定義のストリームフィルタを登録する</li><li><a href="function.stream-filter-remove.html">stream_filter_remove</a> &mdash; ストリームからフィルタを取り除く</li><li><a href="function.stream-get-contents.html">stream_get_contents</a> &mdash; 残りのストリームを文字列に読み込む</li><li><a href="function.stream-get-filters.html">stream_get_filters</a> &mdash; 登録されているフィルタのリストを取得する</li><li><a href="function.stream-get-line.html">stream_get_line</a> &mdash; 指定されたデリミタの位置までのデータを一行分としてストリームから読み込む</li><li><a href="function.stream-get-meta-data.html">stream_get_meta_data</a> &mdash; ヘッダーあるいはメタデータをストリームまたはファイルポインタから取得する</li><li><a href="function.stream-get-transports.html">stream_get_transports</a> &mdash; 登録されたソケットのトランスポートの一覧を取得する</li><li><a href="function.stream-get-wrappers.html">stream_get_wrappers</a> &mdash; 登録されているストリームのラッパーのリストを取得する</li><li><a href="function.stream-is-local.html">stream_is_local</a> &mdash; ローカルストリームかどうかを調べる</li><li><a href="function.stream-notification-callback.html">stream_notification_callback</a> &mdash; notification コンテキストパラメータ用のコールバック関数</li><li><a href="function.stream-register-wrapper.html">stream_register_wrapper</a> &mdash; stream_wrapper_register のエイリアス</li><li><a href="function.stream-resolve-include-path.html">stream_resolve_include_path</a> &mdash; インクルードパスに対してファイル名を解決する</li><li><a href="function.stream-select.html">stream_select</a> &mdash; select() システムコールと同等の操作を、
   ストリームの配列に対して tv_sec と tv_usec で指定されたタイムアウト時間をもって行う</li><li><a href="function.stream-set-blocking.html">stream_set_blocking</a> &mdash; ストリームのブロックモードを有効にする / 解除する</li><li><a href="function.stream-set-chunk-size.html">stream_set_chunk_size</a> &mdash; ストリームのチャンクサイズを設定する</li><li><a href="function.stream-set-read-buffer.html">stream_set_read_buffer</a> &mdash; 指定したストリームのファイル読み込みバッファリングを有効にする</li><li><a href="function.stream-set-timeout.html">stream_set_timeout</a> &mdash; ストリームにタイムアウトを設定する</li><li><a href="function.stream-set-write-buffer.html">stream_set_write_buffer</a> &mdash; 指定されたストリームのファイル書き込みバッファリングを有効にする</li><li><a href="function.stream-socket-accept.html">stream_socket_accept</a> &mdash; stream_socket_server で作られたソケットの接続を受け入れる</li><li><a href="function.stream-socket-client.html">stream_socket_client</a> &mdash; インターネットドメインまたは Unix ドメインのソケット接続を開く</li><li><a href="function.stream-socket-enable-crypto.html">stream_socket_enable_crypto</a> &mdash; 接続済みのソケットについて暗号化の on/off を切り替える</li><li><a href="function.stream-socket-get-name.html">stream_socket_get_name</a> &mdash; ローカルまたはリモートのソケットの名前を取得する</li><li><a href="function.stream-socket-pair.html">stream_socket_pair</a> &mdash; 接続された、区別できないソケットストリームの組を作成する</li><li><a href="function.stream-socket-recvfrom.html">stream_socket_recvfrom</a> &mdash; 接続されているかどうかにかかわらず、ソケットからのデータを受信する</li><li><a href="function.stream-socket-sendto.html">stream_socket_sendto</a> &mdash; 接続されているかどうかにかかわらず、ソケットにデータを送信する</li><li><a href="function.stream-socket-server.html">stream_socket_server</a> &mdash; インターネットドメインまたは Unix ドメインのサーバーソケットを作成する</li><li><a href="function.stream-socket-shutdown.html">stream_socket_shutdown</a> &mdash; 全二重接続を終了する</li><li><a href="function.stream-supports-lock.html">stream_supports_lock</a> &mdash; ストリームがロックをサポートしているかどうかを調べる</li><li><a href="function.stream-wrapper-register.html">stream_wrapper_register</a> &mdash; PHP のクラスとして実装された URL ラッパーを登録する</li><li><a href="function.stream-wrapper-restore.html">stream_wrapper_restore</a> &mdash; 事前に登録を解除された組み込みラッパーを復元する</li><li><a href="function.stream-wrapper-unregister.html">stream_wrapper_unregister</a> &mdash; URL ラッパーの登録を解除する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="79222""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#79222" class="date">16-Nov-2007 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I can't find any real documentation on the quoted-printable-encode stream filter, but I've gathered info from several places. It seems there are 4 options that can be passed in the param array as in my other note on this subject:<br />
<br />
line-length: integer, simply sets line length before a soft break is inserted<br />
line-break-chars: Which char or chars to consider as a line break - note that "\r\n" will only match CRLF, not CR or LF, so make sure it matches your content.<br />
binary: boolean, hex encodes all control chars, including spaces and line breaks, but leaves alphanumerics untouched<br />
force-encode-first: Forcibly hex-encodes the first char on each line, even if it's alphanumeric. This is useful for avoiding corruption in some incompetent mail servers, like Exchange.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70826""></a>
  <div class="note">
   <strong class="user">marcus at synchromedia dot co dot uk</strong>
   <a href="#70826" class="date">30-Oct-2006 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As this article says, there is no quoted_printable_encode function() in PHP: <a href="http://www.zend.com/manual/filters.convert.php" rel="nofollow" target="_blank">http://www.zend.com/manual/filters.convert.php</a><br />
<br />
However there is a stream filter for quoted printable encoding. Here's an example function that produces output suitable for email and doesn't explicitly use external files (though it might do for strings over 2Mb due to the nature of the temp stream type):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">quoted_printable_encode</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'php://temp/'</span><span class="keyword">, </span><span class="string">'r+'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$params </span><span class="keyword">= array(</span><span class="string">'line-length' </span><span class="keyword">=&gt; </span><span class="default">70</span><span class="keyword">, </span><span class="string">'line-break-chars' </span><span class="keyword">=&gt; </span><span class="string">"\r\n"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">stream_filter_append</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="string">'convert.quoted-printable-encode'</span><span class="keyword">, </span><span class="default">STREAM_FILTER_READ</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">rewind</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">quoted_printable_encode</span><span class="keyword">(</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"hello there "</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">).</span><span class="string">" a=1\r\n"</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The filter needs to be restricted to STREAM_FILTER_READ because by default it will get filtered both going into and out of the stream, and will thus get encoded twice.<br />
<br />
It should be much faster than using a PHP implementation of the same thing, though note that this will only work in PHP 5.1+.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66150""></a>
  <div class="note">
   <strong class="user">jausions at php dot net</strong>
   <a href="#66150" class="date">16-May-2006 05:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For the "notification" index of the $params for stream_context_set_params() function, a callable function is accepted. That is array(&amp;$object, 'methodName') will also work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
