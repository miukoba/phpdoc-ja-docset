<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>乱数を生成する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.rad2deg.html">≪ rad2deg</a></li>
      <li style="float: right;"><a href="function.round.html">round ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.math.html">Math 関数</a></li>
    <li>乱数を生成する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.rand" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">rand</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">rand</span> &mdash; <span class="dc-title">乱数を生成する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.rand-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>rand</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>rand</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$min</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$max</code></span>
   )</div>

  <p class="simpara">
   オプションの引数
   <code class="parameter">min</code>,<code class="parameter">max</code>
   を省略してコールした場合、<span class="function"><strong>rand()</strong></span> は 0 と
   <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span> の間の擬似乱数(整数)を返します。 
   例えば、5 から 15 まで（両端を含む）の乱数を得たい場合、
   <em>rand(5, 15)</em> とします。
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <span class="simpara">
    （Windows のような）いくつかのプラットフォームでは、<span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>
    は 32767 と小さな値となっています。
    32767 より広い範囲にしたい場合、
    <code class="parameter">min</code> および <code class="parameter">max</code> を指定することで、
    これより大きな範囲の乱数を生成することができます。
    もしくは、
    <span class="function"><a href="function.mt-rand.html" class="function">mt_rand()</a></span> をかわりに使用してみてください。
   </span>
  </p></blockquote>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.rand-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">min</code></dt>

     <dd>

      <p class="para">
       返す値の最小値 (デフォルトは 0)。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">max</code></dt>

     <dd>

      <p class="para">
       返す値の最大値 (デフォルトは <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>)。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.rand-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">min</code> (あるいは 0)
   から <code class="parameter">max</code> (あるいは <span class="function"><a href="function.getrandmax.html" class="function">getrandmax()</a></span>、それぞれ端点を含む)
   までの間の疑似乱数値を返します。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.rand-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-3569">
    <p><strong>例1 <span class="function"><strong>rand()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #0000BB">rand</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">15</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
7771
22264
11
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.rand-notes">
  <h3 class="title">注意</h3>
  <div class="caution"><strong class="caution">警告</strong><p class="para">この関数が生成する値は、暗号学的に安全ではありません。そのため、これを暗号として使ってはいけません。暗号学的に安全な値が必要な場合は、<span class="function"><a href="function.openssl-random-pseudo-bytes.html" class="function">openssl_random_pseudo_bytes()</a></span> を使いましょう。</p></div>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.rand-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.srand.html" class="function" rel="rdfs-seeAlso">srand()</a> - 乱数ジェネレータを初期化する</span></li>
    <li class="member"><span class="function"><a href="function.getrandmax.html" class="function" rel="rdfs-seeAlso">getrandmax()</a> - 乱数の最大値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.mt-rand.html" class="function" rel="rdfs-seeAlso">mt_rand()</a> - よりよい乱数値を生成する</span></li>
    <li class="member"><span class="function"><a href="function.openssl-random-pseudo-bytes.html" class="function" rel="rdfs-seeAlso">openssl_random_pseudo_bytes()</a> - 疑似乱数のバイト文字列を生成する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113393""></a>
  <div class="note">
   <strong class="user">simon at labs dot coop</strong>
   <a href="#113393" class="date">06-Oct-2013 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Something we discovered in Sydney running BBS Systems before the net advent was here, if we didn't seed of another BBS we would going in circles in our System Physicality Abstraction Layers.. The important thing is to seed from a remote system and easy way at the Centroidal Plexus of the web (Chronolabs Cooperative) we offer a seed feed and the following code will randomise you out of the number cycle:<br />
<br />
See in PHP both the letters and numbers are seedable as letters are treated as numbers as well. You can always use individual tokens by extracting the Element with DOM.. But below is equally effective!<br />
<br />
<span class="default">&lt;?php<br />
<br />
srand</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'<a href="http://seed.feeds.labs.coop" rel="nofollow" target="_blank">http://seed.feeds.labs.coop</a>'</span><span class="keyword">)); <br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111277""></a>
  <div class="note">
   <strong class="user">matheus at matheusloureiro dot com</strong>
   <a href="#111277" class="date">02-Feb-2013 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for generate a random expression, like password with alphanumeric or any other character, use this function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">GeraHash</span><span class="keyword">(</span><span class="default">$qtd</span><span class="keyword">){
<br />
</span><span class="comment">//Under the string $Caracteres you write all the characters you want to be used to randomly generate the code.
<br />
</span><span class="default">$Caracteres </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMOPQRSTUVXWYZ0123456789'</span><span class="keyword">;
<br />
</span><span class="default">$QuantidadeCaracteres </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Caracteres</span><span class="keyword">);
<br />
</span><span class="default">$QuantidadeCaracteres</span><span class="keyword">--;
<br />

<br />
</span><span class="default">$Hash</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$x</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;=</span><span class="default">$qtd</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Posicao </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$QuantidadeCaracteres</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Hash </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Caracteres</span><span class="keyword">,</span><span class="default">$Posicao</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
return </span><span class="default">$Hash</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="comment">//Here you specify how many characters the returning string must have
<br />
</span><span class="keyword">echo </span><span class="default">GeraHash</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111242""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#111242" class="date">30-Jan-2013 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Windows rand() function is quite a lot worse than merely having a low maximum value. It's an ordinary Linear Congruential Generator, which means you only need three consecutive values to be able to predict its entire future output.<br />
<br />
Given the numbers 13050,&nbsp; 4267,&nbsp; 25352, construct the equations<br />
4267 = (13050a+c) % 32768<br />
25352 = (4267a+c) % 32768<br />
<br />
Solving for a and c gives<br />
<br />
a = 20077<br />
c = 12345<br />
<br />
Which means the next number that should be spat out is (25352×20077+12345) % 32768 = 19105 -- which indeed it is.<br />
<br />
It's not the small rand_max that breaks the algorithm, it's a weakness in the&nbsp; LCG algorithm itself. It's designed for when you only want a few kinda-random numbers occasionally, not if you want to generate any random-looking data.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109511""></a>
  <div class="note">
   <strong class="user">thibault dot debatty at gmail dot com</strong>
   <a href="#109511" class="date">24-Jul-2012 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In Suhosin version 0.9.26 (released 2008.08.22) and above:<br />
- rand() and srand() are transparently modified to use the Mersenne Twister algorithm with separate state<br />
- rand() and mt_rand() have better internal seeding<br />
- srand() and mt_srand() are ignored (can be configured)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108100""></a>
  <div class="note">
   <strong class="user">Justin Richer</strong>
   <a href="#108100" class="date">28-Mar-2012 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since many people (myself included) come to this page looking for a way to do a random string, I present a way that uses arrays and shuffle() instead of rand(). This also has the effect of not repeating any characters in the value set.<br />
<br />
&nbsp;&nbsp;&nbsp; $arr = str_split('ABCDEFGHIJKLMNOP'); // get all the characters into an array<br />
&nbsp;&nbsp;&nbsp; shuffle($arr); // randomize the array<br />
&nbsp;&nbsp;&nbsp; $arr = array_slice($arr, 0, 6); // get the first six (random) characters out<br />
&nbsp;&nbsp;&nbsp; $str = implode('', $arr); // smush them back into a string</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107712""></a>
  <div class="note">
   <strong class="user">matthias dot isler at gmail dot com</strong>
   <a href="#107712" class="date">29-Feb-2012 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had to create a function that generates a random binominal distributed integer. Take a look at the following Wiki article:<br />
<br />
<a href="http://en.wikipedia.org/wiki/Binomial_distribution" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Binomial_distribution</a><br />
<br />
Here is my solution:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">bin_rand</span><span class="keyword">(</span><span class="default">$min </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$min </span><span class="keyword">= (</span><span class="default">$min</span><span class="keyword">) ? (int) </span><span class="default">$min </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= (</span><span class="default">$max</span><span class="keyword">) ? (int) </span><span class="default">$max </span><span class="keyword">: </span><span class="default">PHP_INT_MAX</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$range </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$average </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$range</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$range</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$dist </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">$min</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt;= </span><span class="default">$max</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dist</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">] = -</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$average </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">) + </span><span class="default">$average </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$map </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$dist </span><span class="keyword">as </span><span class="default">$int </span><span class="keyword">=&gt; </span><span class="default">$quantity</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$quantity</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$map</span><span class="keyword">[] = </span><span class="default">$int</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$map</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">current</span><span class="keyword">(</span><span class="default">$map</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106004""></a>
  <div class="note">
   <strong class="user">Zak</strong>
   <a href="#106004" class="date">02-Oct-2011 05:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I couldn't find a suitable random alpha-numeric generator function so I rolled my own. It gives a random number in base 36 (0-9, a-z) to a given length.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">randomAlphaNum</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rangeMin </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">36</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">); </span><span class="comment">//smallest number to give length digits in base 36
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rangeMax </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">36</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="comment">//largest number to give length digits in base 36
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$base10Rand </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">$rangeMin</span><span class="keyword">, </span><span class="default">$rangeMax</span><span class="keyword">); </span><span class="comment">//get the random number
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$newRand </span><span class="keyword">= </span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">$base10Rand</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">36</span><span class="keyword">); </span><span class="comment">//convert it
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$newRand</span><span class="keyword">; </span><span class="comment">//spit it out
<br />

<br />
</span><span class="keyword">}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
hopefully helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105195""></a>
  <div class="note">
   <strong class="user">shiawase at gmail dot com</strong>
   <a href="#105195" class="date">02-Aug-2011 04:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another one-liner to generate strings:<br />
<span class="default">&lt;?php<br />
substr</span><span class="keyword">(</span><span class="default">str_shuffle</span><span class="keyword">(</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)),</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>The strings can be repeated to have the possibility that a character appears multiple times.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103009""></a>
  <div class="note">
   <strong class="user">Alex Khimch alex at khim dot removeit dot ich dot org</strong>
   <a href="#103009" class="date">19-Mar-2011 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random is NOT actually random.<br />
<br />
It is easily illustrated by multiplying rand(1,500) by rand(1,500) and showing the output on the image:<br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br />
</span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">500</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">);<br />
<br />
</span><span class="default">$ink </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">);<br />
<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">500</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">500</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">), </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">500</span><span class="keyword">), </span><span class="default">$ink1</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
</span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I expected to get pixel noise, but instead one can see plain diagonal lines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102618""></a>
  <div class="note">
   <strong class="user">szeryf.wordpress.com</strong>
   <a href="#102618" class="date">24-Feb-2011 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Much easier way to generate random string of numbers and letters:<br />
<br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">10e16</span><span class="keyword">, </span><span class="default">10e20</span><span class="keyword">);<br />
echo </span><span class="default">base_convert</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">36</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This generates strings of about 11 characters. Experiment with the range for rand() if you want shorter or longer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99859""></a>
  <div class="note">
   <strong class="user">Alireza Eliaderani</strong>
   <a href="#99859" class="date">10-Sep-2010 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Random integers with normal distribution, 
<br />
it's not scientifically approved, but worked for me.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/*
<br />
* @param float&nbsp; $mean, desired average
<br />
* @param number $sd, number of items in array
<br />
* @param number $min, minimum desired random number
<br />
* @param number $max, maximum desired random number
<br />
* @return array
<br />
*/
<br />
</span><span class="keyword">function </span><span class="default">array_distribute</span><span class="keyword">(</span><span class="default">$mean</span><span class="keyword">,</span><span class="default">$sd</span><span class="keyword">,</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$total_mean </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$mean</span><span class="keyword">*</span><span class="default">$sd</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$sd</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allowed_max </span><span class="keyword">= </span><span class="default">$total_mean </span><span class="keyword">- </span><span class="default">$sd </span><span class="keyword">- </span><span class="default">$min</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$allowed_min </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$total_mean</span><span class="keyword">/</span><span class="default">$sd</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$random </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">max</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">,</span><span class="default">$allowed_min</span><span class="keyword">),</span><span class="default">min</span><span class="keyword">(</span><span class="default">$max</span><span class="keyword">,</span><span class="default">$allowed_max</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[]=</span><span class="default">$random</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sd</span><span class="keyword">--;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$total_mean</span><span class="keyword">-=</span><span class="default">$random</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$total_mean</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98195""></a>
  <div class="note">
   <strong class="user">liveonaware [at] gmail [dot] com</strong>
   <a href="#98195" class="date">01-Jun-2010 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//To Pull 7 Unique Random Values Out Of AlphaNumeric<br />
<br />
//removed number 0, capital o, number 1 and small L<br />
//Total: keys = 32, elements = 33<br />
</span><span class="default">$characters </span><span class="keyword">= array(<br />
</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"D"</span><span class="keyword">,</span><span class="string">"E"</span><span class="keyword">,</span><span class="string">"F"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"H"</span><span class="keyword">,</span><span class="string">"J"</span><span class="keyword">,</span><span class="string">"K"</span><span class="keyword">,</span><span class="string">"L"</span><span class="keyword">,</span><span class="string">"M"</span><span class="keyword">,<br />
</span><span class="string">"N"</span><span class="keyword">,</span><span class="string">"P"</span><span class="keyword">,</span><span class="string">"Q"</span><span class="keyword">,</span><span class="string">"R"</span><span class="keyword">,</span><span class="string">"S"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"U"</span><span class="keyword">,</span><span class="string">"V"</span><span class="keyword">,</span><span class="string">"W"</span><span class="keyword">,</span><span class="string">"X"</span><span class="keyword">,</span><span class="string">"Y"</span><span class="keyword">,</span><span class="string">"Z"</span><span class="keyword">,<br />
</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"4"</span><span class="keyword">,</span><span class="string">"5"</span><span class="keyword">,</span><span class="string">"6"</span><span class="keyword">,</span><span class="string">"7"</span><span class="keyword">,</span><span class="string">"8"</span><span class="keyword">,</span><span class="string">"9"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//make an "empty container" or array for our keys<br />
</span><span class="default">$keys </span><span class="keyword">= array();<br />
<br />
</span><span class="comment">//first count of $keys is empty so "1", remaining count is 1-6 = total 7 times<br />
</span><span class="keyword">while(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">) &lt; </span><span class="default">7</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//"0" because we use this to FIND ARRAY KEYS which has a 0 value<br />
&nbsp;&nbsp;&nbsp; //"-1" because were only concerned of number of keys which is 32 not 33<br />
&nbsp;&nbsp;&nbsp; //count($characters) = 33<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$characters</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, </span><span class="default">$keys</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$keys</span><span class="keyword">[] = </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$random_chars </span><span class="keyword">.= </span><span class="default">$characters</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
}<br />
echo </span><span class="default">$random_chars</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96583""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#96583" class="date">06-Mar-2010 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generate a random 5 character A-Z0-9&nbsp; string
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">6</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) { 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">)%</span><span class="default">2</span><span class="keyword">; 
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$d </span><span class="keyword">? </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) : </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">48</span><span class="keyword">,</span><span class="default">57</span><span class="keyword">)); 
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
# php -r 'for ($i=0; $i&lt;6; $i++) { $d=rand(1,30)%2; echo $d ? chr(rand(65,90)) : chr(rand(48,57)); } echo "\n";'
<br />
14BW1A</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95420""></a>
  <div class="note">
   <strong class="user">John Galt</strong>
   <a href="#95420" class="date">02-Jan-2010 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to create an array of random numbers where there are no identical numbers.<br />
<br />
($n = number of random numbers to return in the array<br />
$min = minimum number<br />
$max = maximum number)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">function </span><span class="default">uniqueRand</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">, </span><span class="default">$min </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$max </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;{<br />
&nbsp; if(</span><span class="default">$max </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">getrandmax</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$keys </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92561""></a>
  <div class="note">
   <strong class="user">Hugo Scott hrmscott at hotmail dot com</strong>
   <a href="#92561" class="date">29-Jul-2009 04:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a simple function to generate a random date between a start date and an end date. <br />
<br />
It is inclusive of BOTH dates - so using dates 2009-04-01 and 2009-04-03 would generate a random date that could be 2009-04-01, 2009-04-02 or 2009-04-03.<br />
<br />
It won't work if the end date is prior to the start date and if you use a non-existant date (eg 2009-02-30) it defaults to 1970-01-01<br />
<br />
the longer version:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">,</span><span class="default">$endDate</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$endDate</span><span class="keyword">) - </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">)) / (</span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$days</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"</span><span class="default">$startDate</span><span class="string"> + </span><span class="default">$n</span><span class="string"> days"</span><span class="keyword">));&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
and the one-line version for compactness freaks:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">,</span><span class="default">$endDate</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"</span><span class="default">$startDate</span><span class="string"> + "</span><span class="keyword">.</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">round</span><span class="keyword">((</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$endDate</span><span class="keyword">) - </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$startDate</span><span class="keyword">)) / (</span><span class="default">60 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">24</span><span class="keyword">))).</span><span class="string">" days"</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
it is called like this <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">makeRandomDateInclusive</span><span class="keyword">(</span><span class="string">'2009-04-01'</span><span class="keyword">,</span><span class="string">'2009-04-03'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Hope this is of some use to someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91534""></a>
  <div class="note">
   <strong class="user">Greg R.</strong>
   <a href="#91534" class="date">16-Jun-2009 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I thought this function (random color) might be of use to someone [to create and return a random hex for HTML colors]:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_random_color</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">6</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">.=&nbsp; </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">15</span><span class="keyword">));
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"#</span><span class="default">$c</span><span class="string">"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91135""></a>
  <div class="note">
   <strong class="user">david [at] ddrewdesign [dot] com</strong>
   <a href="#91135" class="date">27-May-2009 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To Jano and Peta:<br />
<br />
Thanks for the code. In real world usage, I only had one problem with it: It will never return the first result of the array (or it will return nothing if there's only one item in the array). To remedy this, I simply subtracted 1 from <br />
<br />
<span class="default">&lt;?php<br />
$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
like so:<br />
<br />
<span class="default">&lt;?php<br />
$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks though, for the code you supplied. It was exactly what I needed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90773""></a>
  <div class="note">
   <strong class="user">kyle dot florence [@t] gmail dot com</strong>
   <a href="#90773" class="date">09-May-2009 12:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Improved random string generation function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Generate a random character string<br />
</span><span class="keyword">function </span><span class="default">rand_str</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">32</span><span class="keyword">, </span><span class="default">$chars </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890'</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Length of character list<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chars_length </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$chars</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Start our string<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">$chars</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$chars_length</span><span class="keyword">)};<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Generate random string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Grab a random character from our list<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$chars</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$chars_length</span><span class="keyword">)};<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Make sure the same two characters don't appear next to each other<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$r </span><span class="keyword">!= </span><span class="default">$string</span><span class="keyword">{</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">}) </span><span class="default">$string </span><span class="keyword">.=&nbsp; </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return the string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90509""></a>
  <div class="note">
   <strong class="user">admin at djs-music dot com</strong>
   <a href="#90509" class="date">25-Apr-2009 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A nice function to generate a random string, using any character:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">generateRandStr</span><span class="keyword">(</span><span class="default">$length</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$randnum </span><span class="keyword">= </span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">61</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$randnum </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">48</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }else if(</span><span class="default">$randnum </span><span class="keyword">&lt; </span><span class="default">36</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">55</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$randstr </span><span class="keyword">.= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$randnum</span><span class="keyword">+</span><span class="default">61</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$randstr</span><span class="keyword">;
<br />
&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Simply use:
<br />
generateRandStr(10);
<br />

<br />
Sample output: $%29zon(4f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89590""></a>
  <div class="note">
   <strong class="user">petabyte.se</strong>
   <a href="#89590" class="date">15-Mar-2009 05:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As an further optimization on janoserki[at]gmail[dot]com previous post i would recommend that you optimize you first part of php/sql code to something like this.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// estimate the number of rows in a table<br />
</span><span class="default">$lekerdezes </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select count(*) as rows from table"</span><span class="keyword">);<br />
while (</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysql_fetch_assoc</span><span class="keyword">(</span><span class="default">$lekerdezes</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">"rows"</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span>the count(*) is much faster for the database than grabbing the hole dataset from the table.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89343""></a>
  <div class="note">
   <strong class="user">janoserki [at] gmail [dot] com</strong>
   <a href="#89343" class="date">04-Mar-2009 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easy way for mysql: random row<br />
the original form is: "... order by rand()"<br />
but this is not the best way, because it's very slow by a big database (it can take more minutes to complete the request!)<br />
My suggestion:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// estimate the number of rows in a table<br />
</span><span class="default">$lekerdezes </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from table"</span><span class="keyword">);<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">mysql_num_rows</span><span class="keyword">(</span><span class="default">$lekerdezes</span><span class="keyword">);<br />
<br />
</span><span class="comment">// pick one<br />
</span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">$max</span><span class="keyword">);<br />
<br />
</span><span class="default">$lekerdezes2 </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from table limit </span><span class="default">$rand</span><span class="string">, 1"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// that's all folks :)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87487""></a>
  <div class="note">
   <strong class="user">whatchildisthis at gmail dot com</strong>
   <a href="#87487" class="date">07-Dec-2008 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also enjoy making one-liners.
<br />

<br />
Here's a non-regular expression approach. It generates a random 32 character string consisting of, by default, only A-Z, a-z, and 0-9, but you can change the value of $a for other characters. The random string will be in variable $s after this line.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">for (</span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">32</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$i</span><span class="keyword">++);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
If you don't want the same character to appear beside itself, use this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">= </span><span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890'</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">)}, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">32</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$a</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$s </span><span class="keyword">= (</span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">} == </span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">} ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$s</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">));
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
For those of you who want both as a function, use this:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">rand_chars</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">, </span><span class="default">$u </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {
<br />
&nbsp;if (!</span><span class="default">$u</span><span class="keyword">) for (</span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$i</span><span class="keyword">++);
<br />
&nbsp;else for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$z </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">, </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">)}, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">), </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">$c</span><span class="keyword">{</span><span class="default">$x</span><span class="keyword">}, </span><span class="default">$s </span><span class="keyword">= (</span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">} == </span><span class="default">$s</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">} ? </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) : </span><span class="default">$s</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">));
<br />
&nbsp;return </span><span class="default">$s</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
string $c is the string of characters to use.
<br />
integer $l is how long you want the string to be.
<br />
boolean $u is whether or not a character can appear beside itself.
<br />

<br />
Examples:
<br />
rand_chars("ABCEDFG", 10) == GABGFFGCDA
<br />
rand_chars("ABCEDFG", 10, TRUE) == CBGFAEDFEC</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86465""></a>
  <div class="note">
   <strong class="user">opbarnes</strong>
   <a href="#86465" class="date">20-Oct-2008 09:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generate a random 5 character alpha string:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([ ])/e'</span><span class="keyword">, </span><span class="string">'chr(rand(97,122))'</span><span class="keyword">, </span><span class="string">'&nbsp; &nbsp;&nbsp; '</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84810""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#84810" class="date">31-Jul-2008 01:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
quick way to generate randomish numbers and simple strings.<br />
no messing around with functions, so you can just pop the line into the middle of your existing code.<br />
<br />
not the most perfect for sure, but ok for plenty of situations...<br />
<br />
<span class="default">&lt;?php<br />
<br />
$random_number </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">( </span><span class="string">"0" </span><span class="keyword">. </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) . </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">) ); </span><span class="comment">// random(ish) 5 digit int<br />
<br />
</span><span class="default">$random_string </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)) . </span><span class="default">chr</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">65</span><span class="keyword">,</span><span class="default">90</span><span class="keyword">)); </span><span class="comment">// random(ish) 5 character string<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
hope someone finds it useful for somthing.<br />
<br />
regards,<br />
deeeeeen alxndr0u</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82807""></a>
  <div class="note">
   <strong class="user">davidsteinsland [at] gmail [dot] com</strong>
   <a href="#82807" class="date">26-Apr-2008 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
emad_ramahi at hotmail dot com:<br />
I've actually noticed that with a large dataset (100k rows), the query dramatically slows down the server and performance is way too bad.<br />
<br />
The way I see it, you have to workable solutions:<br />
<br />
Using PHP:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//$Table holds the name of the table we're getting the random row from<br />
//$Rows specifies how many rows we need to fetch <br />
</span><span class="keyword">function </span><span class="default">mysql_rand </span><span class="keyword">(</span><span class="default">$Query</span><span class="keyword">, </span><span class="default">$Rows </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//getting the table name from $query<br />
&nbsp;&nbsp;&nbsp; //what you can do, is replace the $query argument with $table,<br />
&nbsp;&nbsp;&nbsp; //this way to dont have to search for the table's name<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$SQL </span><span class="keyword">= </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">'SELECT COUNT(*) FROM %s'</span><span class="keyword">, </span><span class="default">substr </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="default">stripos </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="string">'from'</span><span class="keyword">)+</span><span class="default">5</span><span class="keyword">, </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Max </span><span class="keyword">= </span><span class="default">mysql_result </span><span class="keyword">(</span><span class="default">mysql_query </span><span class="keyword">(</span><span class="default">$SQL</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Random </span><span class="keyword">= </span><span class="default">rand </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$Max</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//If the random number is 99, and the database only has 100 rows<br />
&nbsp;&nbsp;&nbsp; //We'll subtract the random number, so we don't exceed 100, thus preventing a MySQL error message<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$Query </span><span class="keyword">. </span><span class="default">sprintf </span><span class="keyword">(</span><span class="string">'LIMIT %d, %d'</span><span class="keyword">, (</span><span class="default">$Max </span><span class="keyword">&lt; </span><span class="default">$Rows</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: ((</span><span class="default">$Random </span><span class="keyword">&gt; </span><span class="default">$Max </span><span class="keyword">- </span><span class="default">$Rows</span><span class="keyword">) ? </span><span class="default">$Max </span><span class="keyword">- </span><span class="default">$Rows </span><span class="keyword">: </span><span class="default">$Random</span><span class="keyword">), </span><span class="default">$Rows</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">//Instead of using MySQL's RAND(), we use LIMIT to fetch rows<br />
//E.g. LIMIT 5,9 fetches from row 5, and the subsequent 9<br />
</span><span class="default">$SQL </span><span class="keyword">= </span><span class="default">mysql_rand </span><span class="keyword">(</span><span class="string">'SELECT row FROM table'</span><span class="keyword">); </span><span class="comment">//SELECT row FROM table LIMIT x, y<br />
</span><span class="default">?&gt;<br />
</span><br />
or SQL:<br />
SELECT * FROM Table T JOIN (SELECT FLOOR(MAX(ID)*RAND()) AS ID FROM Table) AS x ON T.ID &gt;= x.ID LIMIT 1;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77716""></a>
  <div class="note">
   <strong class="user">Ishtar</strong>
   <a href="#77716" class="date">10-Sep-2007 03:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A small comment on phpdev-dunnbypauls conclusion that rand() only generates numbers that are a multiply of 3. <br />
<span class="default">&lt;?php<br />
$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">100000</span><span class="keyword">); </span><span class="comment">// with MAX_RAND=32768<br />
</span><span class="default">?&gt;<br />
</span>Since, 100000/32768=3.05 you get multiples of 3. The random integer will be multiplied by 3.05 to fit between 0 and 100000. rand() works fine, if you don't ask for bigger numbers then RAND_MAX.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75325""></a>
  <div class="note">
   <strong class="user">bozo_z_clown at yahoo dot com</strong>
   <a href="#75325" class="date">24-May-2007 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the automatic seeding seems to be done with the current number of seconds which means you can get the same results for several runs on a fast server.&nbsp; Either call srand() yourself with a more frequently changing seed or use mt_rand() which doesn't appear to suffer from the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74325""></a>
  <div class="note">
   <strong class="user">jont at live dot co dot uk</strong>
   <a href="#74325" class="date">05-Apr-2007 12:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
isn't this just a simpler way of making a random id for somthing? I mean i know that there is a very slight chance that a duplicate could be made but its a very, very, very small chance, nearly impossible.<br />
<br />
$rand = mt_rand(0, 32);<br />
$code = md5($rand . time());<br />
echo "$code";<br />
<br />
and if you don't want it the md5 can be removed, I've just added it as a prefer it there :)<br />
<br />
Jon</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73730""></a>
  <div class="note">
   <strong class="user">phpdev at dunnbypaul dot net</strong>
   <a href="#73730" class="date">08-Mar-2007 05:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's an interesting note about the inferiority of the rand() function. Try, for example, the following code...<br />
<br />
<span class="default">&lt;?php<br />
$r </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000000</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">100000</span><span class="keyword">);<br />
&nbsp; if (</span><span class="default">$n</span><span class="keyword">&lt;=</span><span class="default">10</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]++;<br />
&nbsp; }<br />
}<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">); <br />
</span><span class="default">?&gt;<br />
</span><br />
which produces something similar to the following output (on my windows box, where RAND_MAX is 32768):<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 30<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 0<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 31<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; 0<br />
)<br />
<br />
Within this range only multiples of 3 are being selected. Also note that values that are filled are always 30 or 31 (no other values! really!) <br />
<br />
Now replace rand() with mt_rand() and see the difference...<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 14<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 16<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 11<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 8<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 9<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; 9<br />
)<br />
<br />
Much more randomly distributed!<br />
<br />
Conclusion: mt_rand() is not just faster, it is a far superior algorithm.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69934""></a>
  <div class="note">
   <strong class="user">ludicruz at yahoo dot com</strong>
   <a href="#69934" class="date">27-Sep-2006 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
frank, nick at nerdynick dot com, and kniht<br />
this is now O(n) instead of O(n^2) ish...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">rand_permute</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$retval </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//initialize an array of integers from $min to $max<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$min</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$max</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//start with the the first index ($min).<br />
&nbsp;&nbsp;&nbsp; //randomly swap this number with any other number in the array.<br />
&nbsp;&nbsp;&nbsp; //this way we guarantee all numbers are permuted in the array,<br />
&nbsp;&nbsp;&nbsp; //and we assure no number is used more than once (technically reiterating prev line).<br />
&nbsp;&nbsp;&nbsp; //therefore we don't have to do the random checking each time we put something into the array.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">$min</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$tmpkey </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$max</span><span class="keyword">)];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">[</span><span class="default">$tmpkey</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$retval</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53600""></a>
  <div class="note">
   <strong class="user">smaaps at kaldamar dot de</strong>
   <a href="#53600" class="date">07-Jun-2005 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lately I needed some random numbers with a gaussian (normal) distribution, not evenly distributed as the numbers generated by rand(). After googling a while, I found out that there is no perfect algrorithm that creates such numbers out of evenly distruted random numbers but a few methods that have similar effect. The following function implements all three algorithms I found- The the last two methods create numbers where you can find a lower and upper boundary and the first one will create a number from time to time (such as one in every 10000) that may be very far from the average value. Have fun testing and using it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">gauss</span><span class="keyword">(</span><span class="default">$algorithm </span><span class="keyword">= </span><span class="string">"polar"</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$randmax </span><span class="keyword">= </span><span class="default">9999</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">$algorithm</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//polar-methode by marsaglia
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"polar"</span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u1 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u2 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) + (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$u2 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">2</span><span class="keyword">* </span><span class="default">$u1 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * (( -</span><span class="default">2 </span><span class="keyword">* </span><span class="default">log</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) / </span><span class="default">$v</span><span class="keyword">) ^ </span><span class="default">0.5</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// box-muller-method
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"boxmuller"</span><span class="keyword">: 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u1 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$u2 </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(-</span><span class="default">2 </span><span class="keyword">* </span><span class="default">log</span><span class="keyword">(</span><span class="default">$u1</span><span class="keyword">)) * </span><span class="default">cos</span><span class="keyword">(</span><span class="default">2 </span><span class="keyword">* </span><span class="default">pi</span><span class="keyword">() * </span><span class="default">$u2</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } while (</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) == </span><span class="string">"1.#INF" </span><span class="keyword">or </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) == </span><span class="string">"-1.#INF"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// the check has to be done cause sometimes (1:10000)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // values such as "1.#INF" occur and i dont know why
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$x</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// twelve random numbers&nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">case </span><span class="string">"zwoelfer"</span><span class="keyword">:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">12</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">+= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$randmax</span><span class="keyword">) / </span><span class="default">$randmax</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; }&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49246""></a>
  <div class="note">
   <strong class="user">relsqui at armory dot com</strong>
   <a href="#49246" class="date">21-Jan-2005 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't forget, it's faster to use bitwise operations when you need a random number that's less than some power of two. For example,<br />
<br />
<span class="default">&lt;?php<br />
rand</span><span class="keyword">()&amp;</span><span class="default">1</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="comment">// for generating 0 or 1,<br />
<br />
</span><span class="default">rand</span><span class="keyword">()&amp;</span><span class="default">3</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="comment">// for generating 0, 1, 2, or 3,<br />
<br />
</span><span class="default">rand</span><span class="keyword">()&amp;</span><span class="default">7</span><span class="keyword">;<br />
</span><span class="comment">// instead of<br />
</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">)<br />
</span><span class="comment">// for generating 0, 1, 2, 3, 4, 5, 6, or 7,<br />
</span><span class="default">?&gt;<br />
</span><br />
and so on. All you're doing there is generating a default random number (so PHP doesn't have to parse any arguments) and chopping off the piece that's useful to you (using a bitwise operation which is faster than even basic math).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
