<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ユーザーのブラウザの機能を取得する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.exit.html">≪ exit</a></li>
      <li style="float: right;"><a href="function.halt-compiler.html">__halt_compiler ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.misc.html">その他の関数</a></li>
    <li>ユーザーのブラウザの機能を取得する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.get-browser" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">get_browser</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">get_browser</span> &mdash; <span class="dc-title">ユーザーのブラウザの機能を取得する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.get-browser-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>get_browser</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$user_agent</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$return_array</code><span class="initializer"> = false</span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   ユーザーのブラウザの機能を調べます。これは、<var class="filename">browscap.ini</var>
   ファイルのブラウザ情報を調べることにより行います。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.get-browser-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">user_agent</code></dt>

     <dd>

      <p class="para">
       処理するユーザーエージェント。デフォルトでは、HTTP の User-Agent
       ヘッダの内容を使用します。しかし、このパラメータを渡すことでこれを変更する
       (別のブラウザの情報を取得する) ことが可能です。
      </p>
      <p class="para">
       このパラメータを処理しないようにするには <strong><code>NULL</code></strong> 値を渡します。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_array</code></dt>

     <dd>

      <p class="para">
       <strong><code>TRUE</code></strong> を指定すると、この関数はオブジェクトでなく配列を返します。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.get-browser-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   情報は、オブジェクトあるいは配列形式で返されます。
   たとえばブラウザのメジャーバージョン番号、マイナーバージョン番号や
   ID 文字列といったさまざまなデータが含まれています。また、
   フレームや JavaScript、クッキーといった機能についての
   <strong><code>TRUE</code></strong>/<strong><code>FALSE</code></strong> 値も含んでいます。
  </p>
  <p class="para">
   <em>cookies</em> の値は、単にそのブラウザがクッキーを扱う機能を
   有していることを示すだけであり、ユーザーがクッキーを受け入れる設定に
   しているかどうかを表すものではありません。それをチェックする唯一の方法は、
   いったん <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span> でクッキーを設定してからリロードし、
   その値を調べることです。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.get-browser-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-3900">
    <p><strong>例1 ユーザーのブラウザについての全情報の一覧</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_USER_AGENT'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$browser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_browser</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$browser</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3

Array
(
    [browser_name_regex] =&gt; ^mozilla/5\.0 (windows; .; windows nt 5\.1; .*rv:.*) gecko/.* firefox/0\.9.*$
    [browser_name_pattern] =&gt; Mozilla/5.0 (Windows; ?; Windows NT 5.1; *rv:*) Gecko/* Firefox/0.9*
    [parent] =&gt; Firefox 0.9
    [platform] =&gt; WinXP
    [browser] =&gt; Firefox
    [version] =&gt; 0.9
    [majorver] =&gt; 0
    [minorver] =&gt; 9
    [cssversion] =&gt; 2
    [frames] =&gt; 1
    [iframes] =&gt; 1
    [tables] =&gt; 1
    [cookies] =&gt; 1
    [backgroundsounds] =&gt;
    [vbscript] =&gt;
    [javascript] =&gt; 1
    [javaapplets] =&gt; 1
    [activexcontrols] =&gt;
    [cdf] =&gt;
    [aol] =&gt;
    [beta] =&gt; 1
    [win16] =&gt;
    [crawler] =&gt;
    [stripper] =&gt;
    [wap] =&gt;
    [netclr] =&gt;
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.get-browser-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    この関数が正常に機能するためには、<var class="filename">php.ini</var> の <a href="misc.configuration.html#ini.browscap" class="link">browscap</a>
    設定が、システム上の <var class="filename">browscap.ini</var> の正確な位置を
    指している必要があります。
   </p>
   <p class="para">
    <var class="filename">browscap.ini</var> は PHP にはバンドルされていません。
    しかし、ここで最新の <a href="http://browscap.org/" class="link external" title="Link : http://browscap.org/">&raquo;&nbsp;php_browscap.ini</a>
    を入手することができます。
   </p>
   <p class="para">
    <var class="filename">browscap.ini</var> は多くのブラウザに関する情報をもっていますが、
    データベースを最新に保つのはユーザーによる更新に依存しています。
    ファイルのフォーマット自体を見ればおおよそのことがわかります。
   </p>
  </p></blockquote>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115073""></a>
  <div class="note">
   <strong class="user">tim at digicol dot de</strong>
   <a href="#115073" class="date">22-May-2014 10:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that loading php_browscap.ini via the browscap php.ini setting may consume a non-trivial amount of memory. Current versions are several MB in size (even the "lite" one) and can eat tens of MB of RAM in each PHP process. This happens even if you never call get_browser() since php_browscap.ini is loaded when PHP is starting up.<br />
<br />
Make sure to leave the browscap php.ini setting empty if you don't use get_browser() - maybe you only call it only from PHP Web pages, but not from PHP CLI code.<br />
<br />
I'd recommend comparing your processes' memory consumption with and without php_browscap.ini being loaded. If necesseray, consider creating your own stripped-down copy of php_browscap.ini with just the browsers that are important to you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115068""></a>
  <div class="note">
   <strong class="user">haci at muratyaman dot co dot uk</strong>
   <a href="#115068" class="date">22-May-2014 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've just lost a day because of this stupid browser_name_regex property:<br />
<br />
e.g. "§^mozilla/5\.0 \(.*windows nt 6\.1.*wow64.*\) gecko/.* firefox/29\.0.*$§"<br />
<br />
To replicate the issue and work around bloody '§' character, please below. Whose idea was it to use that character?!<br />
<br />
<span class="default">&lt;?php<br />
$ua </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">];<br />
echo </span><span class="string">'$_SERVER[\'HTTP_USER_AGENT\'] =&gt; "' </span><span class="keyword">. </span><span class="default">$ua </span><span class="keyword">. </span><span class="string">'"&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$browser </span><span class="keyword">= </span><span class="default">get_browser</span><span class="keyword">(</span><span class="default">$ua</span><span class="keyword">);<br />
echo </span><span class="string">'get_browser($ua) =&gt; &lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$browser</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$browser</span><span class="keyword">, </span><span class="default">JSON_PRETTY_PRINT</span><span class="keyword">);<br />
echo </span><span class="string">'json_encode($browser) =&gt; &lt;pre&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">$json</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;/pre&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'json_last_error() =&gt; "' </span><span class="keyword">. </span><span class="default">json_last_error</span><span class="keyword">() . </span><span class="string">'"&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">//echo 'unsetting $browser-&gt;browser_name_regex &lt;br /&gt;';<br />
//unset($browser-&gt;browser_name_regex);<br />
//or<br />
</span><span class="keyword">echo </span><span class="string">'$browser-&gt;browser_name_regex = utf8_encode($browser-&gt;browser_name_regex);&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">$browser</span><span class="keyword">-&gt;</span><span class="default">browser_name_regex </span><span class="keyword">= </span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">$browser</span><span class="keyword">-&gt;</span><span class="default">browser_name_regex</span><span class="keyword">);<br />
<br />
</span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$browser</span><span class="keyword">, </span><span class="default">JSON_PRETTY_PRINT</span><span class="keyword">);<br />
echo </span><span class="string">'json_encode($browser) =&gt; &lt;pre&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">$json</span><span class="keyword">;<br />
echo </span><span class="string">'&lt;/pre&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'json_last_error() =&gt; "' </span><span class="keyword">. </span><span class="default">json_last_error</span><span class="keyword">() . </span><span class="string">'"&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115036""></a>
  <div class="note">
   <strong class="user">ibi at tlr dot de</strong>
   <a href="#115036" class="date">16-May-2014 12:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@ruudrp:<br />
you might want to distinguish the OS even further:<br />
(at least for windows that is)<br />
<br />
&nbsp;&nbsp;&nbsp; elseif (preg_match('/windows|win32/i', $u_agent)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $platform = 'Windows';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (preg_match('/NT 6.2/i', $u_agent)) { $platform .= ' 8'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (preg_match('/NT 6.3/i', $u_agent)) { $platform .= ' 8.1'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (preg_match('/NT 6.1/i', $u_agent)) { $platform .= ' 7'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (preg_match('/NT 6.0/i', $u_agent)) { $platform .= ' Vista'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (preg_match('/NT 5.1/i', $u_agent)) { $platform .= ' XP'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (preg_match('/NT 5.0/i', $u_agent)) { $platform .= ' 2000'; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (preg_match('/WOW64/i', $u_agent) || preg_match('/x64/i', $u_agent)) { $platform .= ' (x64)'; }<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114275""></a>
  <div class="note">
   <strong class="user">cbonfrate at gmail dot com</strong>
   <a href="#114275" class="date">01-Feb-2014 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You could add this to the ruudrp's code, to recognize MSIE 11<br />
<br />
if(preg_match('/Trident/i', $u_agent) &amp;&amp; !preg_match('/Opera/i',$u_agent))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $bname = 'Internet Explorer';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $ub = "Trident";<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113861""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#113861" class="date">11-Dec-2013 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning! <br />
For All Users there is a new website about new <br />
"Browser Capabilities Project" <br />
browscap.org<br />
<br />
look here : goo.gl/gOPxHp<br />
this is a question about one of the problems have been fixed in the new version.<br />
<br />
?????!<br />
??? ?????????? ??? ???? ???? ???? ?? ????? ????? ???????<br />
"Browser Capabilities Project" <br />
browscap.org<br />
<br />
???? ??? : goo.gl/gOPxHp<br />
??? ?? ???? ?? ??? ??????? ???? ?? ???????? ?? ??????? ??????</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113524""></a>
  <div class="note">
   <strong class="user">wind_born at yahoo dot com</strong>
   <a href="#113524" class="date">25-Oct-2013 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Your system may have problems parsing browscap.ini if the value fields are not quoted (see bishop's note). This is often true even for the PHP specific version of the published browscap.ini. The sed command below adds quotations to the values:<br />
<br />
sed '/^[a-zA-Z0-9].*=[a-zA-Z0-9]/s/=\(.*\)/="\1"/' $inFile &gt; $fixedFile<br />
<br />
If you're using a script to fetch the latest browscap.ini, consider adding this operation to the script.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107005""></a>
  <div class="note">
   <strong class="user">meduza</strong>
   <a href="#107005" class="date">27-Dec-2011 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I stopped trying to detect the browser name and the browser's version, due to the non standard user-agents, is impossible to cover all the possible browsers, and cover only the most used ones is not good.<br />
I only detect the platform, the engine and the version, that cover a lot of possible browsers and let me code based on that, for example, the engine gecko, covers firefox, seamonkey and all the gecko based browsers.<br />
<br />
this is a example piece of code taken from my own, is maybe incomplete but as example is good, to detect the engines.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/****** browser engine detection **************/<br />
//browsers<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"UNKNOWN"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"TRIDENT"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"GECKO"</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"PRESTO"</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"WEBKIT"</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"VALIDATOR"</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"ROBOTS"</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);<br />
<br />
if(!isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">UNKNOWN</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">] = </span><span class="default">UNKNOWN</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'platform'</span><span class="keyword">] = </span><span class="string">'Unknown'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$navigator_user_agent </span><span class="keyword">= </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">'linux'</span><span class="keyword">)) :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'platform'</span><span class="keyword">] = </span><span class="string">'Linux'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">'mac'</span><span class="keyword">)) :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'platform'</span><span class="keyword">] = </span><span class="string">'Mac'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">'win'</span><span class="keyword">)) :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'platform'</span><span class="keyword">] = </span><span class="string">'Windows'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; endif;<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"trident"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">TRIDENT</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">] = </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"trident/"</span><span class="keyword">) + </span><span class="default">8</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"webkit"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">WEBKIT</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">] = </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"webkit/"</span><span class="keyword">) + </span><span class="default">7</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"presto"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">PRESTO</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">] = </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"presto/"</span><span class="keyword">) + </span><span class="default">6</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"gecko"</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">GECKO</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">] = </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"gecko/"</span><span class="keyword">) + </span><span class="default">6</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"robot"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">ROBOTS</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"spider"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">ROBOTS</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"bot"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">ROBOTS</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"crawl"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">ROBOTS</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"search"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">ROBOTS</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"w3c_validator"</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">VALIDATOR</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$navigator_user_agent</span><span class="keyword">, </span><span class="string">"jigsaw"</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">] = </span><span class="default">VALIDATOR</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"&lt;pre&gt;\n\nEngine detected: "</span><span class="keyword">.</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">];<br />
switch(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'engine'</span><span class="keyword">]) {<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">UNKNOWN</span><span class="keyword">: echo </span><span class="string">" (unknown)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">TRIDENT</span><span class="keyword">: echo </span><span class="string">" (trident)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">GECKO</span><span class="keyword">: echo </span><span class="string">" (gecko)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">PRESTO</span><span class="keyword">: echo </span><span class="string">" (presto)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">WEBKIT</span><span class="keyword">: echo </span><span class="string">" (Webkit)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">VALIDATOR</span><span class="keyword">: echo </span><span class="string">" (validator)"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; case </span><span class="default">ROBOTS</span><span class="keyword">: echo </span><span class="string">" (robot)"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"\nEngine version: "</span><span class="keyword">.</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'version'</span><span class="keyword">];<br />
echo </span><span class="string">"\nPlataform detected: "</span><span class="keyword">.</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">"info"</span><span class="keyword">][</span><span class="string">'browser'</span><span class="keyword">][</span><span class="string">'platform'</span><span class="keyword">];<br />
echo </span><span class="string">" \n\n&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
PD: you can add more engines and use an array, I just removed that and put the most popular engines as example, and used elseif instead, this code maybe have errors because is just an example.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104848""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#104848" class="date">11-Jul-2011 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you using this function to target MSIE, a better idea maybe to use MSIE specific conditional comments. More info: &lt;<a href="http://msdn.microsoft.com/en-us/library/ms537512%28VS.85%29.aspx&gt;. " rel="nofollow" target="_blank">http://msdn.microsoft.com/en-us/library/ms537512%28VS.85%29.aspx&gt;. </a>
<br />

<br />
For example to indicate your disregard for users of MSIE 6 or earlier:
<br />

<br />
&lt;!--[if lt IE 7]&gt;It appears that you are using a &lt;em&gt;very&lt;/em&gt; old version of MS Internet Explorer (MSIE). If you seriously want to continue to use MSIE, at least &lt;a href="<a href="http://www.microsoft.com/windows/internet-explorer/" rel="nofollow" target="_blank">http://www.microsoft.com/windows/internet-explorer/</a>"&gt;upgrade&lt;/a&gt;.&lt;![endif]--&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101314""></a>
  <div class="note">
   <strong class="user">Simeon</strong>
   <a href="#101314" class="date">09-Dec-2010 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This code is for placing a box in the corner of IE user's page warning of the disregard the web-designer has for the website's appearance in IE.&nbsp; Call the box with ie_box(). Style and position the box how you want using the iebox css class. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">using_ie</span><span class="keyword">() <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_agent </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="default">False</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/MSIE/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="default">True</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ub</span><span class="keyword">; <br />
} <br />
<br />
function </span><span class="default">ie_box</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">using_ie</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class="iebox"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; This page is not designed for Intenet Explorer.&nbsp; If you want to see this webpage as intended, please use a standards compliant browser, such as &lt;a href="<a href="http://www.google.com/chrome" rel="nofollow" target="_blank">http://www.google.com/chrome</a>"&gt;Google Chrome&lt;/a&gt;.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/div&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return;<br />
&nbsp;&nbsp;&nbsp; }<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101125""></a>
  <div class="note">
   <strong class="user">ruudrp at live dot nl</strong>
   <a href="#101125" class="date">28-Nov-2010 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To my surprise I found that none of the get_browser alternatives output the correct name / version combination that I was looking for using Opera or Chrome. They either give the wrong name eg Safari when in fact it should be Chrome and if the ua string includes a version number as with the latest versions of Chrome and Opera the wrong number is reported. So I took bits and pieces from the various examples and combined them and added a check for version. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getBrowser</span><span class="keyword">() <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_agent </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'Unknown'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//First get the platform?<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/linux/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'linux'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/macintosh|mac os x/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'mac'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/windows|win32/i'</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$platform </span><span class="keyword">= </span><span class="string">'windows'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Next get the name of the useragent yes seperately and for good reason<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/MSIE/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">) &amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Internet Explorer'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"MSIE"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Firefox/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Mozilla Firefox'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Firefox"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Chrome/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Google Chrome'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Chrome"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Safari/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Apple Safari'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Safari"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Opera'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Opera"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Netscape/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bname </span><span class="keyword">= </span><span class="string">'Netscape'</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"Netscape"</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// finally get the correct version number<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$known </span><span class="keyword">= array(</span><span class="string">'Version'</span><span class="keyword">, </span><span class="default">$ub</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'#(?&lt;browser&gt;' </span><span class="keyword">. </span><span class="default">join</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$known</span><span class="keyword">) .<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">')[/ ]+(?&lt;version&gt;[0-9.|a-zA-Z.]*)#'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$u_agent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we have no matching number just continue<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// see how many we have<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//we will have two since we are not using 'other' argument yet<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //see if version is before or after the name<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="string">"Version"</span><span class="keyword">) &lt; </span><span class="default">strripos</span><span class="keyword">(</span><span class="default">$u_agent</span><span class="keyword">,</span><span class="default">$ub</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$version</span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// check if we have a number<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$version</span><span class="keyword">==</span><span class="default">null </span><span class="keyword">|| </span><span class="default">$version</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">) {</span><span class="default">$version</span><span class="keyword">=</span><span class="string">"?"</span><span class="keyword">;}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'userAgent' </span><span class="keyword">=&gt; </span><span class="default">$u_agent</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'name'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$bname</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'version'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$version</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'platform'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$platform</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'pattern'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$pattern<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
} <br />
<br />
</span><span class="comment">// now try it<br />
</span><span class="default">$ua</span><span class="keyword">=</span><span class="default">getBrowser</span><span class="keyword">();<br />
</span><span class="default">$yourbrowser</span><span class="keyword">= </span><span class="string">"Your browser: " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">] . </span><span class="string">" on " </span><span class="keyword">.</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'platform'</span><span class="keyword">] . </span><span class="string">" reports: &lt;br &gt;" </span><span class="keyword">. </span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'userAgent'</span><span class="keyword">];<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$yourbrowser</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99408""></a>
  <div class="note">
   <strong class="user">henda dot exe at gmail dot com</strong>
   <a href="#99408" class="date">16-Aug-2010 06:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a warning to anybody using the preg_match function to determine what browser the viewer is using. I found with google chrome the array contains the following entries;<br />
(Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.4 (KHTML, like Gecko) Chrome/5.0.375.126 Safari/533.4<br />
<br />
As I was using preg_match('/Chrome/i',$u_agent)) and preg_match('/Safari/i',$u_agent)) i found my script was reporting browsers as safari when infact the browser in use was google chrome.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97154""></a>
  <div class="note">
   <strong class="user">Becheru Petru-Ioan</strong>
   <a href="#97154" class="date">05-Apr-2010 12:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
IE has a nasty bug called the Peekaboo bug that affected my website. I found that printing a '_' before the html tag of the webpage gets rid of this nasty bug. Using code inspirated by comment bellow here is the&nbsp; code that detects if a visitor is using internet explorer:
<br />

<br />
<span class="default">&lt;?php
<br />
$known </span><span class="keyword">= array(</span><span class="string">'msie'</span><span class="keyword">, </span><span class="string">'firefox'</span><span class="keyword">, </span><span class="string">'safari'</span><span class="keyword">, </span><span class="string">'webkit'</span><span class="keyword">, </span><span class="string">'opera'</span><span class="keyword">, </span><span class="string">'netscape'</span><span class="keyword">, </span><span class="string">'konqueror'</span><span class="keyword">, </span><span class="string">'gecko'</span><span class="keyword">);
<br />
</span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="string">'#(?&lt;browser&gt;' </span><span class="keyword">. </span><span class="default">join</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$known</span><span class="keyword">) .
<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">')[/ ]+(?&lt;version&gt;[0-9]+(?:\.[0-9]+)?)#'</span><span class="keyword">, </span><span class="default">strtolower</span><span class="keyword">( </span><span class="default">$_SERVER</span><span class="keyword">[ </span><span class="string">'HTTP_USER_AGENT ' </span><span class="keyword">]), </span><span class="default">$browser </span><span class="keyword">);
<br />
if(</span><span class="default">$browser</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]==</span><span class="string">'msie'</span><span class="keyword">) print(</span><span class="string">'_'</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97127""></a>
  <div class="note">
   <strong class="user">Brinley Ang</strong>
   <a href="#97127" class="date">02-Apr-2010 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the latest format of the array returned from this call<br />
<br />
Array<br />
{<br />
&nbsp;&nbsp;&nbsp; [browser_name_regex] =&gt; ^mozilla/5\.0 (x11; .*; .*linux.*; .*; rv:1\.9\..*) gecko/.* firefox/3\.5.*$<br />
&nbsp;&nbsp;&nbsp; [browser_name_pattern] =&gt; Mozilla/5.0 (X11; *; *Linux*; *; rv:1.9.*) Gecko/* Firefox/3.5*<br />
&nbsp;&nbsp;&nbsp; [parent] =&gt; Firefox 3.5<br />
&nbsp;&nbsp;&nbsp; [platform] =&gt; Linux<br />
&nbsp;&nbsp;&nbsp; [browser] =&gt; Firefox<br />
&nbsp;&nbsp;&nbsp; [version] =&gt; 3.5<br />
&nbsp;&nbsp;&nbsp; [majorver] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [minorver] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [frames] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [iframes] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [tables] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [cookies] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [javaapplets] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [javascript] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [cssversion] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [supportscss] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [alpha] =&gt; <br />
&nbsp;&nbsp;&nbsp; [beta] =&gt; <br />
&nbsp;&nbsp;&nbsp; [win16] =&gt; <br />
&nbsp;&nbsp;&nbsp; [win32] =&gt; <br />
&nbsp;&nbsp;&nbsp; [win64] =&gt; <br />
&nbsp;&nbsp;&nbsp; [backgroundsounds] =&gt; <br />
&nbsp;&nbsp;&nbsp; [cdf] =&gt; <br />
&nbsp;&nbsp;&nbsp; [vbscript] =&gt; <br />
&nbsp;&nbsp;&nbsp; [activexcontrols] =&gt; <br />
&nbsp;&nbsp;&nbsp; [isbanned] =&gt; <br />
&nbsp;&nbsp;&nbsp; [ismobiledevice] =&gt; <br />
&nbsp;&nbsp;&nbsp; [issyndicationreader] =&gt; <br />
&nbsp;&nbsp;&nbsp; [crawler] =&gt; <br />
&nbsp;&nbsp;&nbsp; [aol] =&gt; <br />
&nbsp;&nbsp;&nbsp; [aolversion] =&gt; 0<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92310""></a>
  <div class="note">
   <strong class="user">robert at broofa dot com</strong>
   <a href="#92310" class="date">18-Jul-2009 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're just finding this API, note that you may want to use a lighter-weight<br />
browser detection script.&nbsp; get_browser() requires the "browscap.ini" file,<br />
which is 300KB+.&nbsp; Loading and processing this file will likely impact script<br />
performance.&nbsp; Although it surely provides excellent detection results, in most<br />
cases a much simpler method can be just as effective.&nbsp; This is why so many<br />
previous commenters have provided alternate implementations.<br />
<br />
Here's the solution I ended up using, which I've tested on the agents listed at<br />
<a href="http://whatsmyuseragent.com/CommonUserAgents.asp It has the advantage of being" rel="nofollow" target="_blank">http://whatsmyuseragent.com/CommonUserAgents.asp It has the advantage of being</a><br />
compact and reasonably easy to extend (just add entries to the $known array<br />
defined at the top).&nbsp; It should be fairly performant as well, since it doesn't<br />
do any iteratoin or recursion.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">browser_info</span><span class="keyword">(</span><span class="default">$agent</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// Declare known browsers to look for<br />
&nbsp; </span><span class="default">$known </span><span class="keyword">= array(</span><span class="string">'msie'</span><span class="keyword">, </span><span class="string">'firefox'</span><span class="keyword">, </span><span class="string">'safari'</span><span class="keyword">, </span><span class="string">'webkit'</span><span class="keyword">, </span><span class="string">'opera'</span><span class="keyword">, </span><span class="string">'netscape'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'konqueror'</span><span class="keyword">, </span><span class="string">'gecko'</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// Clean up agent and build regex that matches phrases for known browsers<br />
&nbsp; // (e.g. "Firefox/2.0" or "MSIE 6.0" (This only matches the major and minor<br />
&nbsp; // version numbers.&nbsp; E.g. "2.0.0.6" is parsed as simply "2.0"<br />
&nbsp; </span><span class="default">$agent </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$agent </span><span class="keyword">? </span><span class="default">$agent </span><span class="keyword">: </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'#(?&lt;browser&gt;' </span><span class="keyword">. </span><span class="default">join</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$known</span><span class="keyword">) .<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">')[/ ]+(?&lt;version&gt;[0-9]+(?:\.[0-9]+)?)#'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">// Find all phrases (or return empty array if none found)<br />
&nbsp; </span><span class="keyword">if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$agent</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) return array();<br />
<br />
&nbsp; </span><span class="comment">// Since some UAs have more than one phrase (e.g Firefox has a Gecko phrase,<br />
&nbsp; // Opera 7,8 have a MSIE phrase), use the last one found (the right-most one<br />
&nbsp; // in the UA).&nbsp; That's usually the most correct.<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">])-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp; return array(</span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] =&gt; </span><span class="default">$matches</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;<br />
</span>This returns an array with the detected browser as the key, and the version as<br />
the value, and also sets 'browser' and 'version' keys.&nbsp; For example on Firefox<br />
3.5:<br />
<span class="default">&lt;?php<br />
$ua </span><span class="keyword">= </span><span class="default">browser_info</span><span class="keyword">();<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$ua</span><span class="keyword">);<br />
</span><span class="comment">/* Yields ...<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [firefox] =&gt; 3.5<br />
&nbsp;&nbsp;&nbsp; [browser] =&gt; firefox<br />
&nbsp;&nbsp;&nbsp; [version] =&gt; 3.5<br />
)<br />
*/<br />
<br />
// Various browser tests you can do with the returned array ...<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'firefox'</span><span class="keyword">]) ... </span><span class="comment">// true<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'firefox'</span><span class="keyword">] &gt; </span><span class="default">3</span><span class="keyword">) ... </span><span class="comment">// true<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'firefox'</span><span class="keyword">] &gt; </span><span class="default">4</span><span class="keyword">) ... </span><span class="comment">// false<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'browser'</span><span class="keyword">] == </span><span class="string">'firefox'</span><span class="keyword">) ... </span><span class="comment">// true<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'version'</span><span class="keyword">] &gt; </span><span class="default">3.5</span><span class="keyword">) ... </span><span class="comment">// true<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'msie'</span><span class="keyword">]) ... </span><span class="comment">// false ('msie' key not defined)<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'opera'</span><span class="keyword">] &gt; </span><span class="default">3</span><span class="keyword">) ... </span><span class="comment">// false ('opera' key not defined)<br />
</span><span class="keyword">if (</span><span class="default">$ua</span><span class="keyword">[</span><span class="string">'safari'</span><span class="keyword">] &lt; </span><span class="default">3</span><span class="keyword">) ... </span><span class="comment">// false also ('safari' key not defined)<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91655""></a>
  <div class="note">
   <strong class="user">Steve Perkins</strong>
   <a href="#91655" class="date">22-Jun-2009 01:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple class to detect the client browser and version using regular expressions. 
<br />

<br />
<span class="default">&lt;?PHP
<br />
</span><span class="keyword">class </span><span class="default">Browser
<br />
</span><span class="keyword">{
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$props&nbsp; &nbsp; </span><span class="keyword">= array(</span><span class="string">"Version" </span><span class="keyword">=&gt; </span><span class="string">"0.0.0"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"unknown"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Agent" </span><span class="keyword">=&gt; </span><span class="string">"unknown"</span><span class="keyword">) ;
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__Construct</span><span class="keyword">()
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$browsers </span><span class="keyword">= array(</span><span class="string">"firefox"</span><span class="keyword">, </span><span class="string">"msie"</span><span class="keyword">, </span><span class="string">"opera"</span><span class="keyword">, </span><span class="string">"chrome"</span><span class="keyword">, </span><span class="string">"safari"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"mozilla"</span><span class="keyword">, </span><span class="string">"seamonkey"</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"konqueror"</span><span class="keyword">, </span><span class="string">"netscape"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"gecko"</span><span class="keyword">, </span><span class="string">"navigator"</span><span class="keyword">, </span><span class="string">"mosaic"</span><span class="keyword">, </span><span class="string">"lynx"</span><span class="keyword">, </span><span class="string">"amaya"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"omniweb"</span><span class="keyword">, </span><span class="string">"avant"</span><span class="keyword">, </span><span class="string">"camino"</span><span class="keyword">, </span><span class="string">"flock"</span><span class="keyword">, </span><span class="string">"aol"</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Agent </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$browsers </span><span class="keyword">as </span><span class="default">$browser</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#(</span><span class="default">$browser</span><span class="string">)[/ ]?([0-9.]*)#"</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Agent</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Name </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] ;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Version </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] ;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break ;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__Get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die </span><span class="string">"No such property or function </span><span class="default">$name</span><span class="string">)" </span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] ;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__Set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">SimpleError</span><span class="keyword">(</span><span class="string">"No such property or function."</span><span class="keyword">, </span><span class="string">"Failed to set </span><span class="default">$name</span><span class="string">"</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">) ;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die ;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$val </span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
}
<br />

<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
example code
<br />
<span class="default">&lt;?PHP
<br />
$browser </span><span class="keyword">= new </span><span class="default">Browser </span><span class="keyword">;
<br />
echo </span><span class="string">"</span><span class="default">$Browser</span><span class="keyword">-&gt;</span><span class="default">Name</span><span class="string"> </span><span class="default">$Browser</span><span class="keyword">-&gt;</span><span class="default">Version</span><span class="string">" </span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>result when client using Firefox 3.0.11
<br />
firefox 3.0.11
<br />

<br />
result when client using unknown browser
<br />
unknown 0.0.0
<br />
&nbsp;
<br />
etc etc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91648""></a>
  <div class="note">
   <strong class="user">Steve Perkins</strong>
   <a href="#91648" class="date">21-Jun-2009 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple class to detect the client browser and version using regular expressions. <br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">class </span><span class="default">Browser </span><span class="keyword">extends </span><span class="default">BaseObjects_PropertyArray<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$props&nbsp; &nbsp; </span><span class="keyword">= array(</span><span class="string">"Version" </span><span class="keyword">=&gt; </span><span class="string">"0.0.0"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Name" </span><span class="keyword">=&gt; </span><span class="string">"unknown"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Agent" </span><span class="keyword">=&gt; </span><span class="string">"unknown"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"AllowsHeaderRedirect" </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__Construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$browsers </span><span class="keyword">= array(</span><span class="string">"firefox"</span><span class="keyword">, </span><span class="string">"msie"</span><span class="keyword">, </span><span class="string">"opera"</span><span class="keyword">, </span><span class="string">"chrome"</span><span class="keyword">, </span><span class="string">"safari"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"mozilla"</span><span class="keyword">, </span><span class="string">"seamonkey"</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">"konqueror"</span><span class="keyword">, </span><span class="string">"netscape"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"gecko"</span><span class="keyword">, </span><span class="string">"navigator"</span><span class="keyword">, </span><span class="string">"mosaic"</span><span class="keyword">, </span><span class="string">"lynx"</span><span class="keyword">, </span><span class="string">"amaya"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"omniweb"</span><span class="keyword">, </span><span class="string">"avant"</span><span class="keyword">, </span><span class="string">"camino"</span><span class="keyword">, </span><span class="string">"flock"</span><span class="keyword">, </span><span class="string">"aol"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Agent </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$browsers </span><span class="keyword">as </span><span class="default">$browser</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#(</span><span class="default">$browser</span><span class="string">)[/ ]?([0-9.]*)#"</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Agent</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Name </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Version </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">AllowsHeaderRedirect </span><span class="keyword">= !(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Name </span><span class="keyword">== </span><span class="string">"msie" </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Version </span><span class="keyword">&lt; </span><span class="default">7</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__Get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die </span><span class="string">"No such property or function </span><span class="default">$name</span><span class="string">)" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">props</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] ;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
example code<br />
<span class="default">&lt;?PHP<br />
$browser </span><span class="keyword">= new </span><span class="default">Browser </span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$Browser</span><span class="keyword">-&gt;</span><span class="default">Name</span><span class="string"> </span><span class="default">$Browser</span><span class="keyword">-&gt;</span><span class="default">Version</span><span class="string">" </span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>result when client using Firefox 3.0.11<br />
firefox 3.0.11<br />
<br />
result when client using unknown browser<br />
unknown 0.0.0<br />
&nbsp;<br />
etc etc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90562""></a>
  <div class="note">
   <strong class="user">Mattkun Koder</strong>
   <a href="#90562" class="date">28-Apr-2009 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to use: ceo /a/ mmg5 /./ com 's improved version and STILL detect Google Chrome you need to move CHROME earlier on the list Before Safari otherwise it will be detected as safari.<br />
<br />
&nbsp;&nbsp;&nbsp; $browser_list = 'msie firefox chrome konqueror safari netscape navigator opera mosaic lynx amaya omniweb avant camino flock seamonkey aol mozilla gecko';</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88923""></a>
  <div class="note">
   <strong class="user">assadvirgo at gmail dot com</strong>
   <a href="#88923" class="date">13-Feb-2009 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a very useful function to get user browser. A great utility function for those are fed up of get_browser() issues :)
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">get_user_browser</span><span class="keyword">()
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$u_agent </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">];
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/MSIE/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"ie"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Firefox/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"firefox"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Safari/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"safari"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Chrome/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"chrome"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Flock/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"flock"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/Opera/i'</span><span class="keyword">,</span><span class="default">$u_agent</span><span class="keyword">))
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ub </span><span class="keyword">= </span><span class="string">"opera"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ub</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79282""></a>
  <div class="note">
   <strong class="user">jesdisciple [at] gmail -dawt- com</strong>
   <a href="#79282" class="date">19-Nov-2007 05:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use this to ensure that the costly call in its standard form never needs to be repeated:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getBrowser</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$browser</span><span class="keyword">;</span><span class="comment">//No accident can arise from depending on an unset variable.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$browser</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$browser </span><span class="keyword">= </span><span class="default">get_browser</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$browser</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78613""></a>
  <div class="note">
   <strong class="user">Steffen</strong>
   <a href="#78613" class="date">19-Oct-2007 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind that get_browser(); really slows down your application.&nbsp; It takes about 22 ms to execute on an idle server with Ubuntu Linux, Apache 2, PHP 5.1.3.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78322""></a>
  <div class="note">
   <strong class="user">digibrisk at gmail dot NOSPAM dot SPAMNO dot com</strong>
   <a href="#78322" class="date">06-Oct-2007 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the "browscap" directive isn't set in your server's php.ini, then an error warning is shown. Just in case, you could make a call to ini_get() to check if the browscap directive is set before using browser_get().<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">"browscap"</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$browser </span><span class="keyword">= </span><span class="default">get_browse</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76614""></a>
  <div class="note">
   <strong class="user">mike at mike-griffiths dot co dot uk</strong>
   <a href="#76614" class="date">23-Jul-2007 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You should not rely on just this for cross-browser compatibility issues.&nbsp; Good practice would be to include HTML if-statements for IE stylesheets as well as dynamically checking the browser type.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74059""></a>
  <div class="note">
   <strong class="user">ansar dot ahmed at impelsys dot com</strong>
   <a href="#74059" class="date">22-Mar-2007 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We are using get_browser() function for useragent Mozilla/4.0 (compatible; MSIE 4.01; Windows NT) the get_browser function is returning as Default Browser and Platform = unknown.<br />
<br />
So i added this to my browscap.ini manually:<br />
<br />
[Mozilla/4.0 (compatible; MSIE 4.01; Windows NT)]<br />
Parent=IE 4.01<br />
Platform=WinNT</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70641""></a>
  <div class="note">
   <strong class="user">sam</strong>
   <a href="#70641" class="date">23-Oct-2006 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I thought this function might be useful to those without access to the php.ini file (such as those on a shared hosting system):
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">php_get_browser</span><span class="keyword">(</span><span class="default">$agent </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">){
<br />
</span><span class="default">$agent</span><span class="keyword">=</span><span class="default">$agent</span><span class="keyword">?</span><span class="default">$agent</span><span class="keyword">:</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_USER_AGENT'</span><span class="keyword">];
<br />
</span><span class="default">$yu</span><span class="keyword">=array();
<br />
</span><span class="default">$q_s</span><span class="keyword">=array(</span><span class="string">"#\.#"</span><span class="keyword">,</span><span class="string">"#\*#"</span><span class="keyword">,</span><span class="string">"#\?#"</span><span class="keyword">);
<br />
</span><span class="default">$q_r</span><span class="keyword">=array(</span><span class="string">"\."</span><span class="keyword">,</span><span class="string">".*"</span><span class="keyword">,</span><span class="string">".?"</span><span class="keyword">);
<br />
</span><span class="default">$brows</span><span class="keyword">=</span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">"php_browscap.ini"</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);
<br />
foreach(</span><span class="default">$brows </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$t</span><span class="keyword">){
<br />
&nbsp; if(</span><span class="default">fnmatch</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$agent</span><span class="keyword">)){
<br />
&nbsp; </span><span class="default">$yu</span><span class="keyword">[</span><span class="string">'browser_name_pattern'</span><span class="keyword">]=</span><span class="default">$k</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$pat</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$q_s</span><span class="keyword">,</span><span class="default">$q_r</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$yu</span><span class="keyword">[</span><span class="string">'browser_name_regex'</span><span class="keyword">]=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="string">"^</span><span class="default">$pat</span><span class="string">$"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$brows </span><span class="keyword">as </span><span class="default">$g</span><span class="keyword">=&gt;</span><span class="default">$r</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">$t</span><span class="keyword">[</span><span class="string">'Parent'</span><span class="keyword">]==</span><span class="default">$g</span><span class="keyword">){ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$brows </span><span class="keyword">as </span><span class="default">$a</span><span class="keyword">=&gt;</span><span class="default">$b</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$r</span><span class="keyword">[</span><span class="string">'Parent'</span><span class="keyword">]==</span><span class="default">$a</span><span class="keyword">){ 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$yu</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$yu</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$yu </span><span class="keyword">as </span><span class="default">$d</span><span class="keyword">=&gt;</span><span class="default">$z</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$l</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hu</span><span class="keyword">[</span><span class="default">$l</span><span class="keyword">]=</span><span class="default">$z</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; break;
<br />
&nbsp; }
<br />
}
<br />
return </span><span class="default">$hu</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
define the location of php_browscap.ini wherever you want
<br />
always returns an array, same functionality as get_browser(NULL,true) 
<br />
Hope someone finds it useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56443""></a>
  <div class="note">
   <strong class="user">adspeed.com</strong>
   <a href="#56443" class="date">02-Sep-2005 07:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is what we do to fix the parsing error messages for php_browscap.ini downloaded from Gary's website.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// fix the browsecap.ini for php<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php_browscap.ini'</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\r/"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/="(.*)"/i'</span><span class="keyword">,</span><span class="string">'=\\1'</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/platform=(.*)/i"</span><span class="keyword">,</span><span class="string">"platform=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/parent=(.*)/i"</span><span class="keyword">,</span><span class="string">"parent=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/minorver=(.*)/i"</span><span class="keyword">,</span><span class="string">"minorver=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/majorver=(.*)/i"</span><span class="keyword">,</span><span class="string">"majorver=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/version=(.*)/i"</span><span class="keyword">,</span><span class="string">"version=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/browser=(.*)/i"</span><span class="keyword">,</span><span class="string">"browser=\"\\1\""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">$v</span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"[*]"</span><span class="keyword">,</span><span class="string">"*"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="string">'browscap.ini'</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41008""></a>
  <div class="note">
   <strong class="user">max at phpexpert dot de</strong>
   <a href="#41008" class="date">26-Mar-2004 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of the fact that this function shows what a specific browser might be able to show, but NOT what the user has turned on/off.<br />
<br />
So maybe this function tells you that the browser is abel to to javascript even when javascript is turned off by the user.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34743""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#34743" class="date">05-Aug-2003 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP is sensitive to characters outside the range [ A-Za-z0-9_] as values in .ini files.&nbsp; For example<br />
<br />
browser=Opera (Bork Version)<br />
<br />
causes PHP to complain, as it doesn't like the parentheses.<br />
<br />
If you place quotation marks around the values for all keys in the browscap.ini file, you'll save yourself parsing problems.&nbsp; Do this in eg vi with %s/=\(.*\)/="\1"/g<br />
<br />
You could of course use PHP itself to fixup the file.&nbsp; Exercise left to the reader.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27506""></a>
  <div class="note">
   <strong class="user">verx at implix dot com</strong>
   <a href="#27506" class="date">09-Dec-2002 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please keep in mind that you should somehow (for example in session) cache the required results of get_browser() because it really slows thinks down. <br />
<br />
We have experienced that without querying for browser data our scripts would run 120-130% faster. the explanation is that over 200kb long file (browscap.ini) has to be loaded and parsed everytime someone access any page (we need browser results on all pages).<br />
<br />
So keep results in session and expect a performance boost.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15261""></a>
  <div class="note">
   <strong class="user">les at hazlewood dot com</strong>
   <a href="#15261" class="date">04-Sep-2001 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
phpSniff (noted in a few places above) is absolutely fantastic.&nbsp; I just installed it, and it is a godsend!&nbsp; It now handles all of my session information needed to go in my database.&nbsp; Thanks for you folks who posted that great Sourceforge resource!&nbsp; <a href="http://phpsniff.sourceforge.net/" rel="nofollow" target="_blank">http://phpsniff.sourceforge.net/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="13347""></a>
  <div class="note">
   <strong class="user">nick at category4 dot com</strong>
   <a href="#13347" class="date">13-Jun-2001 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a quick way to test for a Netscape browser.&nbsp; IE and Konqueror and several others call themselves "Mozilla", but they always qualify it with the word "compatible."
<br />

<br />
$isns = stristr($HTTP_USER_AGENT, "Mozilla") &amp;&amp; (!(stristr($HTTP_USER_AGENT, "compatible")));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="7265""></a>
  <div class="note">
   <strong class="user">triad at df dot lth dot se</strong>
   <a href="#7265" class="date">31-Jul-2000 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The only way browscap examines the target browser is through the HTTP_USER_AGENT so there is no way you can determine installed plug-ins. The only way to do that is through client-side JavaScripts.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
