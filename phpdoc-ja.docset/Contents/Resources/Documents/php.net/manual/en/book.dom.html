<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>Document Object Model</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="refs.xml.html">≪ XML 操作</a></li>
      <li style="float: right;"><a href="intro.dom.html">導入 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.xml.html">XML 操作</a></li>
    <li>Document Object Model</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.dom" class="book">
 
 <h1 class="title">Document Object Model</h1>
 

 
 
 








 



 
 


 



   



 



 



 







 



 



 



 



 



 



 



 



 



 



 



 



 



 



 




 



 




 



 




 



 




 



 



 



 




 



 




 



 



 



 



 



 




 



 
 

 
 
<ul class="chunklist chunklist_book"><li><a href="intro.dom.html">導入</a></li><li><a href="dom.setup.html">インストール/設定</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="dom.requirements.html">要件</a></li><li><a href="dom.installation.html">インストール手順</a></li><li><a href="dom.configuration.html">実行時設定</a></li><li><a href="dom.resources.html">リソース型</a></li></ul></li><li><a href="dom.constants.html">定義済み定数</a></li><li><a href="dom.examples.html">例</a></li><li><a href="class.domattr.html">DOMAttr</a> &mdash; DOMAttr クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domattr.construct.html">DOMAttr::__construct</a> &mdash; 新しい DOMAttr オブジェクトを作成する</li><li><a href="domattr.isid.html">DOMAttr::isId</a> &mdash; 属性が定義済みの ID かどうかを調べる</li></ul></li><li><a href="class.domcdatasection.html">DOMCdataSection</a> &mdash; DOMCdataSection クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcdatasection.construct.html">DOMCdataSection::__construct</a> &mdash; 新しい DOMCdataSection オブジェクトを作成する</li></ul></li><li><a href="class.domcharacterdata.html">DOMCharacterData</a> &mdash; DOMCharacterData クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcharacterdata.appenddata.html">DOMCharacterData::appendData</a> &mdash; ノードの文字データの最後に文字列を追加する</li><li><a href="domcharacterdata.deletedata.html">DOMCharacterData::deleteData</a> &mdash; 指定した範囲の文字列をノードから削除する</li><li><a href="domcharacterdata.insertdata.html">DOMCharacterData::insertData</a> &mdash; 指定した 16 ビット単位のオフセットに、文字列を挿入する</li><li><a href="domcharacterdata.replacedata.html">DOMCharacterData::replaceData</a> &mdash; DOMCharacterData ノードの文字列の一部を置換する</li><li><a href="domcharacterdata.substringdata.html">DOMCharacterData::substringData</a> &mdash; ノードから指定した範囲のデータを抽出する</li></ul></li><li><a href="class.domcomment.html">DOMComment</a> &mdash; DOMComment クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domcomment.construct.html">DOMComment::__construct</a> &mdash; 新しい DOMComment オブジェクトを作成する</li></ul></li><li><a href="class.domdocument.html">DOMDocument</a> &mdash; DOMDocument クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domdocument.construct.html">DOMDocument::__construct</a> &mdash; 新しい DOMDocument オブジェクトを作成する</li><li><a href="domdocument.createattribute.html">DOMDocument::createAttribute</a> &mdash; 新しい属性を作成する</li><li><a href="domdocument.createattributens.html">DOMDocument::createAttributeNS</a> &mdash; 関連付けられた名前空間に新しい属性を作成する</li><li><a href="domdocument.createcdatasection.html">DOMDocument::createCDATASection</a> &mdash; 新しい cdata ノードを作成する</li><li><a href="domdocument.createcomment.html">DOMDocument::createComment</a> &mdash; 新しい comment ノードを作成する</li><li><a href="domdocument.createdocumentfragment.html">DOMDocument::createDocumentFragment</a> &mdash; 新しい文書片を作成する</li><li><a href="domdocument.createelement.html">DOMDocument::createElement</a> &mdash; 新しい要素ノードを作成する</li><li><a href="domdocument.createelementns.html">DOMDocument::createElementNS</a> &mdash; 関連付けられた名前空間に新しい要素を作成する</li><li><a href="domdocument.createentityreference.html">DOMDocument::createEntityReference</a> &mdash; 新しいエンティティ参照ノードを作成する</li><li><a href="domdocument.createprocessinginstruction.html">DOMDocument::createProcessingInstruction</a> &mdash; 新しい PI ノードを作成する</li><li><a href="domdocument.createtextnode.html">DOMDocument::createTextNode</a> &mdash; 新しいテキストノードを作成する</li><li><a href="domdocument.getelementbyid.html">DOMDocument::getElementById</a> &mdash; id に対応する要素を検索する</li><li><a href="domdocument.getelementsbytagname.html">DOMDocument::getElementsByTagName</a> &mdash; 指定したローカルタグ名に対応するすべての要素を検索する</li><li><a href="domdocument.getelementsbytagnamens.html">DOMDocument::getElementsByTagNameNS</a> &mdash; 指定した名前空間で、タグ名に対応するすべての要素を検索する</li><li><a href="domdocument.importnode.html">DOMDocument::importNode</a> &mdash; 現在のドキュメントにノードをインポートする</li><li><a href="domdocument.load.html">DOMDocument::load</a> &mdash; ファイルから XML を読み込む</li><li><a href="domdocument.loadhtml.html">DOMDocument::loadHTML</a> &mdash; 文字列から HTML を読み込む</li><li><a href="domdocument.loadhtmlfile.html">DOMDocument::loadHTMLFile</a> &mdash; ファイルから HTML を読み込む</li><li><a href="domdocument.loadxml.html">DOMDocument::loadXML</a> &mdash; 文字列から XML を読み込む</li><li><a href="domdocument.normalizedocument.html">DOMDocument::normalizeDocument</a> &mdash; ドキュメントを正規化する</li><li><a href="domdocument.registernodeclass.html">DOMDocument::registerNodeClass</a> &mdash; 基底ノード型を作成する際に使用する拡張クラスを登録する</li><li><a href="domdocument.relaxngvalidate.html">DOMDocument::relaxNGValidate</a> &mdash; ドキュメントを relaxNG で検証する</li><li><a href="domdocument.relaxngvalidatesource.html">DOMDocument::relaxNGValidateSource</a> &mdash; ドキュメントを relaxNG で検証する</li><li><a href="domdocument.save.html">DOMDocument::save</a> &mdash; 内部の XML ツリーをファイルに出力する</li><li><a href="domdocument.savehtml.html">DOMDocument::saveHTML</a> &mdash; 内部のドキュメントを HTML 形式の文字列として出力する</li><li><a href="domdocument.savehtmlfile.html">DOMDocument::saveHTMLFile</a> &mdash; 内部のドキュメントを HTML 形式でファイルに出力する</li><li><a href="domdocument.savexml.html">DOMDocument::saveXML</a> &mdash; 内部の XML ツリーを文字列として出力する</li><li><a href="domdocument.schemavalidate.html">DOMDocument::schemaValidate</a> &mdash; スキーマに基づいてドキュメントを検証する</li><li><a href="domdocument.schemavalidatesource.html">DOMDocument::schemaValidateSource</a> &mdash; スキーマに基づいてドキュメントを検証する</li><li><a href="domdocument.validate.html">DOMDocument::validate</a> &mdash; DTD に基づいてドキュメントを検証する</li><li><a href="domdocument.xinclude.html">DOMDocument::xinclude</a> &mdash; DOMDocument オブジェクト内の XIncludes を置換する</li></ul></li><li><a href="class.domdocumentfragment.html">DOMDocumentFragment</a> &mdash; DOMDocumentFragment クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domdocumentfragment.appendxml.html">DOMDocumentFragment::appendXML</a> &mdash; 生の XML データを追加する</li></ul></li><li><a href="class.domdocumenttype.html">DOMDocumentType</a> &mdash; DOMDocumentType クラス</li><li><a href="class.domelement.html">DOMElement</a> &mdash; DOMElement クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domelement.construct.html">DOMElement::__construct</a> &mdash; 新しい DOMElement オブジェクトを作成する</li><li><a href="domelement.getattribute.html">DOMElement::getAttribute</a> &mdash; 属性の値を返す</li><li><a href="domelement.getattributenode.html">DOMElement::getAttributeNode</a> &mdash; 属性ノードを返す</li><li><a href="domelement.getattributenodens.html">DOMElement::getAttributeNodeNS</a> &mdash; 属性ノードを返す</li><li><a href="domelement.getattributens.html">DOMElement::getAttributeNS</a> &mdash; 属性の値を返す</li><li><a href="domelement.getelementsbytagname.html">DOMElement::getElementsByTagName</a> &mdash; タグ名から要素を取得する</li><li><a href="domelement.getelementsbytagnamens.html">DOMElement::getElementsByTagNameNS</a> &mdash; 名前空間 URI とローカル名から要素を取得する</li><li><a href="domelement.hasattribute.html">DOMElement::hasAttribute</a> &mdash; 属性が存在するかどうかを調べる</li><li><a href="domelement.hasattributens.html">DOMElement::hasAttributeNS</a> &mdash; 属性が存在するかどうかを調べる</li><li><a href="domelement.removeattribute.html">DOMElement::removeAttribute</a> &mdash; 属性を削除する</li><li><a href="domelement.removeattributenode.html">DOMElement::removeAttributeNode</a> &mdash; 属性を削除する</li><li><a href="domelement.removeattributens.html">DOMElement::removeAttributeNS</a> &mdash; 属性を削除する</li><li><a href="domelement.setattribute.html">DOMElement::setAttribute</a> &mdash; 新しい属性を追加する</li><li><a href="domelement.setattributenode.html">DOMElement::setAttributeNode</a> &mdash; 新しい属性ノードを要素に追加する</li><li><a href="domelement.setattributenodens.html">DOMElement::setAttributeNodeNS</a> &mdash; 新しい属性ノードを要素に追加する</li><li><a href="domelement.setattributens.html">DOMElement::setAttributeNS</a> &mdash; 新しい属性を追加する</li><li><a href="domelement.setidattribute.html">DOMElement::setIdAttribute</a> &mdash; ID 型の属性を名前で宣言する</li><li><a href="domelement.setidattributenode.html">DOMElement::setIdAttributeNode</a> &mdash; ID 型の属性をノードで宣言する</li><li><a href="domelement.setidattributens.html">DOMElement::setIdAttributeNS</a> &mdash; ID 型の属性をローカル名および名前空間 URI で宣言する</li></ul></li><li><a href="class.domentity.html">DOMEntity</a> &mdash; DOMEntity クラス</li><li><a href="class.domentityreference.html">DOMEntityReference</a> &mdash; DOMEntityReference クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domentityreference.construct.html">DOMEntityReference::__construct</a> &mdash; 新しい DOMEntityReference オブジェクトを作成する</li></ul></li><li><a href="class.domexception.html">DOMException</a> &mdash; DOMException クラス</li><li><a href="class.domimplementation.html">DOMImplementation</a> &mdash; DOMImplementation クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domimplementation.construct.html">DOMImplementation::__construct</a> &mdash; 新しい DOMImplementation オブジェクトを作成する</li><li><a href="domimplementation.createdocument.html">DOMImplementation::createDocument</a> &mdash; 指定した型とドキュメント要素の DOMDocument オブジェクトを作成する</li><li><a href="domimplementation.createdocumenttype.html">DOMImplementation::createDocumentType</a> &mdash; 空の DOMDocumentType オブジェクトを作成する</li><li><a href="domimplementation.hasfeature.html">DOMImplementation::hasFeature</a> &mdash; DOM 実装が、指定した機能を実装しているかどうかを調べる</li></ul></li><li><a href="class.domnamednodemap.html">DOMNamedNodeMap</a> &mdash; DOMNamedNodeMap クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnamednodemap.getnameditem.html">DOMNamedNodeMap::getNamedItem</a> &mdash; 名前で指定されたノードを取得する</li><li><a href="domnamednodemap.getnameditemns.html">DOMNamedNodeMap::getNamedItemNS</a> &mdash; ローカル名および名前空間 URI で指定したノードを取得する</li><li><a href="domnamednodemap.item.html">DOMNamedNodeMap::item</a> &mdash; インデックスで指定したノードを取得する</li></ul></li><li><a href="class.domnode.html">DOMNode</a> &mdash; DOMNode クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnode.appendchild.html">DOMNode::appendChild</a> &mdash; 子要素群の最後に新しい子要素を追加する</li><li><a href="domnode.c14n.html">DOMNode::C14N</a> &mdash; ノードを文字列に正規化する</li><li><a href="domnode.c14nfile.html">DOMNode::C14NFile</a> &mdash; ノードをファイルに正規化する</li><li><a href="domnode.clonenode.html">DOMNode::cloneNode</a> &mdash; ノードを複製する</li><li><a href="domnode.getlineno.html">DOMNode::getLineNo</a> &mdash; ノードが存在する行の番号を取得します。</li><li><a href="domnode.getnodepath.html">DOMNode::getNodePath</a> &mdash; ノードの XPath を取得する</li><li><a href="domnode.hasattributes.html">DOMNode::hasAttributes</a> &mdash; ノードが属性を保持しているかどうかを調べる</li><li><a href="domnode.haschildnodes.html">DOMNode::hasChildNodes</a> &mdash; ノードが子を保持しているかどうかを調べる</li><li><a href="domnode.insertbefore.html">DOMNode::insertBefore</a> &mdash; 参照しているノードの前に新しい子を追加する</li><li><a href="domnode.isdefaultnamespace.html">DOMNode::isDefaultNamespace</a> &mdash; 指定した namespaceURI がデフォルトの名前空間かどうかを調べる</li><li><a href="domnode.issamenode.html">DOMNode::isSameNode</a> &mdash; 2 つのノードが等しいかどうかを調べる</li><li><a href="domnode.issupported.html">DOMNode::isSupported</a> &mdash; 指定したバージョンで機能がサポートされているかどうかを調べる</li><li><a href="domnode.lookupnamespaceuri.html">DOMNode::lookupNamespaceURI</a> &mdash; プレフィックスに基づいて、ノードの名前空間 URI を取得する</li><li><a href="domnode.lookupprefix.html">DOMNode::lookupPrefix</a> &mdash; 名前空間 URI に基づいて、ノードの名前空間プレフィックスを取得する</li><li><a href="domnode.normalize.html">DOMNode::normalize</a> &mdash; ノードを正規化する</li><li><a href="domnode.removechild.html">DOMNode::removeChild</a> &mdash; 子要素群から子要素を削除する</li><li><a href="domnode.replacechild.html">DOMNode::replaceChild</a> &mdash; 子を置き換える</li></ul></li><li><a href="class.domnodelist.html">DOMNodeList</a> &mdash; DOMNodeList クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domnodelist.item.html">DOMNodelist::item</a> &mdash; インデックスで指定したノードを取得する</li></ul></li><li><a href="class.domnotation.html">DOMNotation</a> &mdash; DOMNotation クラス</li><li><a href="class.domprocessinginstruction.html">DOMProcessingInstruction</a> &mdash; DOMProcessingInstruction クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domprocessinginstruction.construct.html">DOMProcessingInstruction::__construct</a> &mdash; 新しい DOMProcessingInstruction オブジェクトを作成する</li></ul></li><li><a href="class.domtext.html">DOMText</a> &mdash; DOMText クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domtext.construct.html">DOMText::__construct</a> &mdash; 新しい DOMText オブジェクトを作成する</li><li><a href="domtext.iswhitespaceinelementcontent.html">DOMText::isWhitespaceInElementContent</a> &mdash; このテキストノードが空白を含むかどうかを示す</li><li><a href="domtext.splittext.html">DOMText::splitText</a> &mdash; 指定したオフセットでノードを 2 つに分割する</li></ul></li><li><a href="class.domxpath.html">DOMXPath</a> &mdash; DOMXPath クラス<ul class="chunklist chunklist_book chunklist_children"><li><a href="domxpath.construct.html">DOMXPath::__construct</a> &mdash; 新しい DOMXPath オブジェクトを作成する</li><li><a href="domxpath.evaluate.html">DOMXPath::evaluate</a> &mdash; 与えられた XPath 式を評価し、可能であれば結果を返す</li><li><a href="domxpath.query.html">DOMXPath::query</a> &mdash; 与えられた XPath 式を評価する</li><li><a href="domxpath.registernamespace.html">DOMXPath::registerNamespace</a> &mdash; DOMXPath オブジェクトの名前空間を登録する</li><li><a href="domxpath.registerphpfunctions.html">DOMXPath::registerPhpFunctions</a> &mdash; PHP の関数を XPath 関数として登録する</li></ul></li><li><a href="ref.dom.html">DOM 関数</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.dom-import-simplexml.html">dom_import_simplexml</a> &mdash; SimpleXMLElement オブジェクトから DOMElement オブジェクトを取得する</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115016""></a>
  <div class="note">
   <strong class="user">super dot puma at gmail dot com</strong>
   <a href="#115016" class="date">13-May-2014 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If&nbsp; you want to print the DOM XML file content, you can use the next code:<br />
<br />
$doc = new DOMDocument();<br />
$doc-&gt;load($xmlFileName);<br />
echo "&lt;br&gt;" . $doc-&gt;documentURI;<br />
$x = $doc-&gt;documentElement;<br />
getNodeContent($x-&gt;childNodes, 0);<br />
<br />
function getNodeContent($nodes, $level){<br />
&nbsp;&nbsp;&nbsp; foreach ($nodes AS $item) {<br />
&nbsp;&nbsp;&nbsp; //&nbsp; print "&lt;br&gt;&lt;br&gt;TIPO: " . $item-&gt;nodeType ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; printValues($item, $level);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($item-&gt;nodeType == 1) { //DOMElement<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($item-&gt;attributes AS $itemAtt) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; printValues($itemAtt, $level+3);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($item-&gt;childNodes || $item-&gt;childNodes-&gt;lenth &gt; 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; getNodeContent($item-&gt;childNodes, $level+5);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function printValues($item, $level){<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 1) { //DOMElement<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;nodeName . " = " . $item-&gt;nodeValue;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 2) { //DOMAttr<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;name . " = " . $item-&gt;value ;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($item-&gt;nodeType == 3) { //DOMText<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($item-&gt;isWhitespaceInElementContent() == false){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; printLevel($level);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print $item-&gt;wholeText ;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
function printLevel($level)<br />
{<br />
&nbsp;&nbsp;&nbsp; print "&lt;br&gt;";<br />
&nbsp;&nbsp;&nbsp; if ($level == 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print "&lt;br&gt;";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for($i=0; $i &lt; $level; $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print "-";<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105815""></a>
  <div class="note">
   <strong class="user">Drupella</strong>
   <a href="#105815" class="date">17-Sep-2011 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a fast innerHTML function that returns the result without iterating over child nodes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">innerHTML</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">));<br />
&nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">());<br />
&nbsp; </span><span class="default">$tag </span><span class="keyword">= </span><span class="default">$el</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'@^&lt;' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">'[^&gt;]*&gt;|&lt;/' </span><span class="keyword">. </span><span class="default">$tag </span><span class="keyword">. </span><span class="string">'&gt;$@'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example<br />
<span class="default">&lt;?php<br />
$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="comment">// A corrupt HTML string<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="string">'&lt;HTML&gt;&lt;A HREF="ss"&gt;asd&lt;/A&gt;'</span><span class="keyword">);<br />
</span><span class="default">$body </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'body'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
print </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">innerHTML</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">));<br />
</span><span class="comment">// Prints &lt;a href="ss"&gt;asd&lt;/a&gt;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97518""></a>
  <div class="note">
   <strong class="user">ben_demott at hotmail dot com</strong>
   <a href="#97518" class="date">23-Apr-2010 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function among several others to parse a google results page, I wrote this some time ago - google has probably changed their site since then, but I thought this might be helpful to someone.<br />
<br />
I'm moving servers, but I will probably throw this up on my blog when I get it back up.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">googleResult</span><span class="keyword">(</span><span class="default">$listItem</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// given a LIST ITEM element, this will validate, and return an array for that LI entry as an inline result from google.<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; * &lt;li class='g w0'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; &lt;h3 class='r'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp;&nbsp; &lt;a href='the URL' class='l'&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp;&nbsp; Description &lt;em&gt;description&lt;/em&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp;&nbsp; &lt;/a&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp;&nbsp; &lt;/h3&gt;<br />
&nbsp;&nbsp; &nbsp; * &lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; UPDATE:<br />
&nbsp;&nbsp; &nbsp; &nbsp; This function will now look for any subcontainer that has an href, it doesn't have to be an H3<br />
&nbsp;&nbsp; &nbsp; &nbsp; this will make it work with a few more formatted search results.<br />
&nbsp;&nbsp; &nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$listItem </span><span class="keyword">= </span><span class="default">$listItem</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Yes I don't use instanceof - I guess you'll have to deal.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach(</span><span class="default">$listItem </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">) == </span><span class="string">'DOMElement' </span><span class="keyword">&amp;&amp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hrefContainer </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$hrefContainer </span><span class="keyword">as </span><span class="default">$element2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$element2</span><span class="keyword">) &amp;&amp; </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$element2</span><span class="keyword">) == </span><span class="string">'DOMElement' </span><span class="keyword">&amp;&amp; </span><span class="default">$element2</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">== </span><span class="string">'a' </span><span class="keyword">&amp;&amp; </span><span class="default">$element2</span><span class="keyword">-&gt;</span><span class="default">hasAttribute</span><span class="keyword">(</span><span class="string">'href'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$anchor </span><span class="keyword">= </span><span class="default">$element2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$h3</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$element2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Breaking out of loop (normal result) element is not an annchor Element='".$element2-&gt;nodeName."'\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$element</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$listItem</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$anchor</span><span class="keyword">) || !</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$anchor</span><span class="keyword">) || </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$anchor</span><span class="keyword">) != </span><span class="string">'DOMElement'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Returning false, did not locate anchor through iteration...";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$href </span><span class="keyword">= </span><span class="default">$anchor</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'href'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$href</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//print __LINE__ ." :: Found anchor object, could not read href attribute / href is empty? href='$href'\n";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$description </span><span class="keyword">= </span><span class="default">$anchor</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$description </span><span class="keyword">as </span><span class="default">$words</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">=&nbsp; </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$name </span><span class="keyword">== </span><span class="string">'em' </span><span class="keyword">|| </span><span class="default">$name </span><span class="keyword">== </span><span class="string">'#text' </span><span class="keyword">|| </span><span class="default">$name </span><span class="keyword">== </span><span class="string">'b'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">$urlDescription </span><span class="keyword">. </span><span class="default">$text </span><span class="keyword">. </span><span class="string">' '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">htmlspecialchars_decode</span><span class="keyword">(</span><span class="default">$urlDescription</span><span class="keyword">, </span><span class="default">ENT_QUOTES</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$urlDescription </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$urlDescription</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return array(</span><span class="string">'description' </span><span class="keyword">=&gt; </span><span class="default">$urlDescription</span><span class="keyword">, </span><span class="string">'href' </span><span class="keyword">=&gt; </span><span class="default">$href</span><span class="keyword">);<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93717""></a>
  <div class="note">
   <strong class="user">sweisman at pobox dot com</strong>
   <a href="#93717" class="date">24-Sep-2009 10:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had problems with the dom2array_full function by "nospam at ya dot ru". Here's my function, which works correctly for my project, and might work for yours:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">())
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attrs </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$attrs </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$attr</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XML_TEXT_NODE</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'_value'</span><span class="keyword">] = </span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">[</span><span class="string">'_value'</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$group </span><span class="keyword">= array();
<br />

<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$group</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = array(</span><span class="default">$tmp</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$group</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">][] = </span><span class="default">dom_to_array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93637""></a>
  <div class="note">
   <strong class="user">odessa131 at aol dot nospam dot com</strong>
   <a href="#93637" class="date">20-Sep-2009 03:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had the hardest time updating a complex XML document. Here's a quick example on how to do it.<br />
<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="comment">// Load the XML from a file.<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">"a2062.xml"</span><span class="keyword">; </span><span class="comment">// This is an XFDL form previously unencoded and ungzipped.<br />
</span><span class="default">$dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">Load</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create an XPath query.<br />
// Note: you must define the namespace if the XML document has defined namespaces.<br />
</span><span class="default">$xpath </span><span class="keyword">= new </span><span class="default">DOMXPath</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">);<br />
</span><span class="default">$xpath</span><span class="keyword">-&gt;</span><span class="default">registerNamespace</span><span class="keyword">(</span><span class="string">'xfdl'</span><span class="keyword">, </span><span class="string">"<a href="http://www.PureEdge.com/XFDL/6.5" rel="nofollow" target="_blank">http://www.PureEdge.com/XFDL/6.5</a>"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Locate the value for the first Item Description field.<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="string">"//xfdl:page/xfdl:field[@sid='ITEMDESA']/xfdl:value"</span><span class="keyword">;<br />
</span><span class="default">$nodeList </span><span class="keyword">= </span><span class="default">$xpath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
<br />
</span><span class="default">$nodeList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">)-&gt;</span><span class="default">nodeValue </span><span class="keyword">= </span><span class="string">"This is the text in the value node of the first Item Description field inside the DA 2062 PureEdge form."</span><span class="keyword">;<br />
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92571""></a>
  <div class="note">
   <strong class="user">philipwaynerollins at gmail dot com</strong>
   <a href="#92571" class="date">29-Jul-2009 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can get the "innerHTML" by nodeValue so<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'p'</span><span class="keyword">, </span><span class="string">'Sensei Ninja' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$ele</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
You can even set it if you want<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">( );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">( </span><span class="string">'p' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ele</span><span class="keyword">-&gt;</span><span class="default">nodeValue </span><span class="keyword">= </span><span class="string">'Sensei Ninja'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">( </span><span class="default">$ele </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; print </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">( );<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89718""></a>
  <div class="note">
   <strong class="user">Junior</strong>
   <a href="#89718" class="date">20-Mar-2009 10:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
innerHTML in PHP DOM 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">DOMinnerHTML</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$innerHTML </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) 
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_dom </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$innerHTML</span><span class="keyword">.=</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$tmp_dom</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">());
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$innerHTML</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example:
<br />

<br />
<span class="default">&lt;?php
<br />
$dom</span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(); 
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="default">$html_string</span><span class="keyword">);
<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">preserveWhiteSpace </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />

<br />
</span><span class="default">$domTable </span><span class="keyword">= </span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">"table"</span><span class="keyword">);
<br />

<br />
foreach (</span><span class="default">$domTable </span><span class="keyword">as </span><span class="default">$tables</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">DOMinnerHTML</span><span class="keyword">(</span><span class="default">$tables</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88025""></a>
  <div class="note">
   <strong class="user">nospam at ya dot ru</strong>
   <a href="#88025" class="date">06-Jan-2009 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">dom2array_full</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array(); <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XML_TEXT_NODE</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">()) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attributes </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$attributes</span><span class="keyword">))&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$attributes </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">=&gt;</span><span class="default">$attr</span><span class="keyword">)&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$attr</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasChildNodes</span><span class="keyword">()){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$child </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">!= </span><span class="string">'#text'</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!isset(</span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">])) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = </span><span class="default">dom2array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aux </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">]; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">] = array( </span><span class="default">$aux </span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">][] = </span><span class="default">dom2array</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">; <br />
} <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87471""></a>
  <div class="note">
   <strong class="user">fantasyman3000 at gmail dot com</strong>
   <a href="#87471" class="date">06-Dec-2008 02:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to "simlee at indiana dot edu",<br />
- First of all thanks for sharing your funciton.<br />
- It didn't work for me so i rewrite it from scratch using different method.<br />
<br />
Here is the new version, hope it helps someone : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
* result sample : /html[1]/body[1]/span[1]/fieldset[1]/div[1]<br />
* @return string<br />
*/<br />
</span><span class="keyword">function </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$node </span><span class="keyword">) {&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$parentNode </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">=-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeTagIndex</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$testNode </span><span class="keyword">= </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">( </span><span class="default">$nodeIndex </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">==</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName </span><span class="keyword">and </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">) and </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "{$testNode-&gt;parentNode-&gt;nodeName}-{$testNode-&gt;nodeName}-{}&lt;br/&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeTagIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } while (!</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">(</span><span class="default">$testNode</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="string">"/</span><span class="keyword">{</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$nodeTagIndex</span><span class="keyword">}</span><span class="string">]"</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$node</span><span class="keyword">=</span><span class="default">$parentNode</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; };<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
By Sina.Salek.ws</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86436""></a>
  <div class="note">
   <strong class="user">cgorbit spamless_at ya dot ru</strong>
   <a href="#86436" class="date">18-Oct-2008 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Show expandable DOM like in Firebug.<br />
<br />
<a href="http://cgorbit.itkm.ru/temp/phpdotnet/common.js needed for script, sorry, but it" rel="nofollow" target="_blank">http://cgorbit.itkm.ru/temp/phpdotnet/common.js needed for script, sorry, but it</a>'s my framework.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">gaie</span><span class="keyword">( </span><span class="default">$node</span><span class="keyword">, &amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$attr </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">( </span><span class="default">$attr </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[ </span><span class="default">$attr </span><span class="keyword">] = </span><span class="default">u2w</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">innerXML</span><span class="keyword">( </span><span class="default">$l</span><span class="keyword">, </span><span class="default">$collapse_all </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$top_run </span><span class="keyword">= </span><span class="default">true </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atts4elements </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'href'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'table' </span><span class="keyword">=&gt; </span><span class="string">'border,cellpadding,cellspacing'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'td' </span><span class="keyword">=&gt; </span><span class="string">'colspan,rowspan'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$top_run </span><span class="keyword">) :<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ob_start</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">?&gt;</span>&lt;html&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;head&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;meta http-uquiv="Content-type" content="text/html; charset=windows-1251" /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;script type="text/javascript" src="/common.js"&gt;&lt;/script&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/head&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;body&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;style type="text/css"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; body {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list-style-type: none;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; font-size: 1em;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; font-family: monospace;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list ul {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list-style-type: none;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list li.text-node span.value {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: black;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; font-weight: bold;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; background-color: lightgrey;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; margin-right: 1em;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; padding: 0em 0.2em;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list li.text-node span.hex {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: gray;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; font-style: italic;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list li.element-node {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: blue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list .attribute-name {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: green;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list .attribute-value {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: red;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; color: rgb( 205, 0, 0 );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list .node-with-childs {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; cursor: pointer;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //cursor: hand;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list .collapsed-node {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; background-color: yellow;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .root-inner-xml-list .collapsed-node + ul {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; display: none;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/style&gt;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;ul class="root-inner-xml-list"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;?&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $s .= ob_get_clean();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; endif;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //if ( $top_run ) $l = $l-&gt;childNodes;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( $l as $i =&gt; $node )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $node-&gt;nodeType == XML_ELEMENT_NODE )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $atts = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $atts2get = array( 'id', 'class', 'style' );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( @$atts4elements[ $node-&gt;tagName ] )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $atts2get = array_merge( $atts2get, explode( ',', $atts4elements[ $node-&gt;tagName ] ) );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ( $atts2get as $att2get )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; gaie( $node, $atts, $att2get );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $attr_arr = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ( $atts as $name =&gt; $value )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $attr_arr[] = sprintf( '&lt;span class="attribute-name"&gt;%s&lt;/span&gt;="&lt;span class="attribute-value"&gt;%s&lt;/span&gt;"', $name, $value );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $atts_s = '';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $attr_arr )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $atts_s = join( ' ', $attr_arr );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $span_class_name = array( 'node-name' );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $node-&gt;childNodes-&gt;length )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $span_class_name[] = 'node-with-childs';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $collapse_all )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $span_class_name[] = 'collapsed-node';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $span_class_name = join( ' ', $span_class_name );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $inner = '&lt;span class="' . $span_class_name . '"&gt;&amp;lt;'. $node-&gt;tagName . ' ' . $atts_s . '&amp;gt;&lt;/span&gt;';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $node-&gt;childNodes-&gt;length )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $inner .= '&lt;ul&gt;' . innerXML( $node-&gt;childNodes, $collapse_all, false ) . '&lt;/ul&gt;';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $className = 'element-node';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif ( $node-&gt;nodeType == XML_TEXT_NODE )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = htmlspecialchars( u2w( $node-&gt;nodeValue ) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $inner = '&lt;span class="value"&gt;' . $value . '&lt;/span&gt;&lt;span class="hex"&gt;' . string2hex( $value ) . '&lt;/span&gt;';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $className = 'text-node';<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $s .= '&lt;li class="' . $className . '"&gt;' . $inner . '&lt;/li&gt;';<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( $top_run ) echo '&lt;hr /&gt;';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( $top_run ):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ob_start();&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ?&gt;&lt;/ul&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;script type="text/javascript"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; onLoad( function(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; addEvent( $( '.root-inner-xml-list .node-with-childs', true ), 'click', function( e ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; var el = e.target;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ul = getNextSibling( el );<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( !ul || ul.tagName != 'UL' ) return;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; invertClass( el, 'collapsed-node' );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; });<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; });<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; globalInit();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/script&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/body&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/html&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;?<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $s .= ob_get_clean();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; endif;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $s;<br />
&nbsp;&nbsp;&nbsp; }<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85874""></a>
  <div class="note">
   <strong class="user">miguelangelhdz  at  NOSPAM  dot  com</strong>
   <a href="#85874" class="date">22-Sep-2008 03:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After searching how to extend the DOMDocument and DOMElement I found a way in the bug: <a href="http://bugs.php.net/bug.php?id=35104. The following code shows how:" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=35104. The following code shows how:</a><br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">extDOMDocument </span><span class="keyword">extends </span><span class="default">DOMDocument </span><span class="keyword">{<br />
&nbsp;public function </span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$orphan </span><span class="keyword">= new </span><span class="default">extDOMElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">); </span><span class="comment">// new&nbsp; sub-class object<br />
&nbsp; </span><span class="default">$docFragment </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">createDocumentFragment</span><span class="keyword">(); </span><span class="comment">// lightweight container maintains "ownerDocument"<br />
&nbsp; </span><span class="default">$docFragment</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$orphan</span><span class="keyword">); </span><span class="comment">// attach<br />
&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$docFragment</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$orphan</span><span class="keyword">); </span><span class="comment">// remove<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$ret</span><span class="keyword">; </span><span class="comment">// ownerDocument set; won't be destroyed on&nbsp; method exit<br />
&nbsp;</span><span class="keyword">}<br />
&nbsp;</span><span class="comment">// .. more class definition<br />
</span><span class="keyword">}<br />
<br />
class </span><span class="default">extDOMElement </span><span class="keyword">extends </span><span class="default">DOMElement </span><span class="keyword">{<br />
&nbsp;function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$namespaceURI</span><span class="keyword">);<br />
&nbsp;}<br />
&nbsp; </span><span class="comment">//&nbsp; ... more class definition here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">extDOMDocument</span><span class="keyword">(</span><span class="string">'test'</span><span class="keyword">);<br />
</span><span class="default">$el </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'tagname'</span><span class="keyword">);<br />
</span><span class="default">$el</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">"attr"</span><span class="keyword">, </span><span class="string">"val"</span><span class="keyword">);<br />
</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">); <br />
<br />
</span><span class="comment">// append discards the DOMDocumentFragment and just adds its child nodes, but ownerDocument is maintained.<br />
</span><span class="keyword">echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">).</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">).</span><span class="string">"&lt;br/&gt;"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;xmp&gt;"</span><span class="keyword">.</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">().</span><span class="string">"&lt;/xmp&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84771""></a>
  <div class="note">
   <strong class="user">tobiasz.cudnik[at]gmail.com</strong>
   <a href="#84771" class="date">29-Jul-2008 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need simple interface to DOM check out phpQuery - jQuery port to PHP:<br />
<a href="http://code.google.com/p/phpquery/" rel="nofollow" target="_blank">http://code.google.com/p/phpquery/</a><br />
<br />
It uses CSS selectors to fetch nodes.<br />
Here's example how it works:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// just one file to include<br />
</span><span class="keyword">require(</span><span class="string">'phpQuery/phpQuery.php'</span><span class="keyword">);<br />
<br />
</span><span class="default">$html </span><span class="keyword">= </span><span class="string">'<br />
&lt;div&gt;<br />
&nbsp;&nbsp;&nbsp; mydiv<br />
&nbsp;&nbsp;&nbsp; &lt;ul&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;1&lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;2&lt;/li&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;li&gt;3&lt;/li&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/ul&gt;<br />
&lt;/div&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// intialize new DOM from markup<br />
</span><span class="default">phpQuery</span><span class="keyword">::</span><span class="default">newDocument</span><span class="keyword">(</span><span class="default">$markup</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; -&gt;</span><span class="default">find</span><span class="keyword">(</span><span class="string">'ul &gt; li'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'my-new-class'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">filter</span><span class="keyword">(</span><span class="string">':last'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'last-li'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// query all unordered lists in last used DOM<br />
</span><span class="default">pq</span><span class="keyword">(</span><span class="string">'ul'</span><span class="keyword">)-&gt;</span><span class="default">insertAfter</span><span class="keyword">(</span><span class="string">'div'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// iterate all LIs from last used DOM<br />
</span><span class="keyword">foreach(</span><span class="default">pq</span><span class="keyword">(</span><span class="string">'li'</span><span class="keyword">) as </span><span class="default">$li</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// iteration returns plain DOM nodes, not phpQuery objects<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">pq</span><span class="keyword">(</span><span class="default">$li</span><span class="keyword">)-&gt;</span><span class="default">addClass</span><span class="keyword">(</span><span class="string">'my-second-new-class'</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// same as pq('anything')-&gt;htmlOuter()<br />
// but on document root (returns doctype etc)<br />
</span><span class="keyword">print </span><span class="default">phpQuery</span><span class="keyword">::</span><span class="default">getDocument</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
It uses DOM extension and XPath so it works only in PHP5.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81860""></a>
  <div class="note">
   <strong class="user">Sven Arduwie</strong>
   <a href="#81860" class="date">17-Mar-2008 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function that quickly converts an xml with key/value pairs to an array.<br />
<br />
for example:<br />
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />
&lt;test&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Array key #1" value="Value #1"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Array key #2" value="Value #2"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Dupe" value="Duplicate keys"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="Dupe" value="create numeric arrays"/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;key id="And another key"&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;![CDATA[<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Multiline<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; works<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; just<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; well.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ]]&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/key&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;nested&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;key id="Nested key" value="Nested data works as well, but it still results in a 1 dimensional array."/&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/nested&gt;<br />
&lt;/test&gt;<br />
<br />
Results in the following array:<br />
array(5) {<br />
&nbsp; ["Array key #1"]=&gt;<br />
&nbsp; string(8) "Value #1"<br />
&nbsp; ["Array key #2"]=&gt;<br />
&nbsp; string(8) "Value #2"<br />
&nbsp; ["Dupe"]=&gt;<br />
&nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(14) "Duplicate keys"<br />
&nbsp;&nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(21) "create numeric arrays"<br />
&nbsp; }<br />
&nbsp; ["And another key"]=&gt;<br />
&nbsp; string(49) "Multiline<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; works<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; just<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; as<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; well."<br />
&nbsp; ["Nested key"]=&gt;<br />
&nbsp; string(73) "Nested data works as well, but it still results in a 1 dimensional array."<br />
}<br />
<br />
Here's the code:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">xml2array</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domDocument </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domDocument</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$domXPath </span><span class="keyword">= new </span><span class="default">DOMXPath</span><span class="keyword">(</span><span class="default">$domDocument</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$domXPath</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'//key'</span><span class="keyword">) as </span><span class="default">$keyDOM</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">hasAttribute</span><span class="keyword">(</span><span class="string">'value'</span><span class="keyword">) ? </span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'value'</span><span class="keyword">) : </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$keyDOM</span><span class="keyword">-&gt;</span><span class="default">textContent</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = array(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81360""></a>
  <div class="note">
   <strong class="user">danf dot 1979 at []gmail[] dot com</strong>
   <a href="#81360" class="date">24-Feb-2008 04:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a couple of classes to deal with yahoo yui menu.<br />
<br />
/*<br />
&nbsp; $menubar = new MenuBar();<br />
<br />
&nbsp; $file = new Menu("File");<br />
&nbsp; $file-&gt;setAttribute("href", "<a href="http://file.com" rel="nofollow" target="_blank">http://file.com</a>");<br />
<br />
&nbsp; $quit = new Menu("Quit");<br />
&nbsp; $quit-&gt;setAttribute("href", "<a href="http://quit.com" rel="nofollow" target="_blank">http://quit.com</a>");<br />
<br />
&nbsp; $file-&gt;appendChild($quit);<br />
&nbsp; $menubar-&gt;appendChild($file);<br />
<br />
&nbsp; echo $menubar-&gt;grab();<br />
*/<br />
<br />
//<br />
// Author: Daniel Queirolo.<br />
// LGPL<br />
//<br />
<br />
/** ---------------------------------<br />
/**&nbsp; Class MenuBar()<br />
/**&nbsp; Creates a the menubar and appends<br />
/**&nbsp; yuimenubaritems to it.<br />
/** ---------------------------------*/<br />
<br />
class MenuBar extends DOMDocument<br />
{<br />
<br />
&nbsp; public $menuID = "nav_menu";&nbsp; // holds the css id that javascript yui menu code should have to recognize<br />
&nbsp; private $UL;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // This node holds every menu, This is THE node.<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; Constructor<br />
&nbsp; /**&nbsp; Generates a menubar skeleton and the UL node<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function __construct() {<br />
<br />
&nbsp;&nbsp;&nbsp; parent::__construct();<br />
<br />
&nbsp;&nbsp;&nbsp; $rootdiv = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $rootdiv-&gt;setAttribute("class", "yui-skin-sam");<br />
<br />
&nbsp;&nbsp;&nbsp; parent::appendChild($rootdiv);<br />
<br />
&nbsp;&nbsp;&nbsp; $yui_menubar = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;setAttribute("id", $this-&gt;menuID);<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;setAttribute("class", "yuimenubar");<br />
<br />
&nbsp;&nbsp;&nbsp; $rootdiv-&gt;appendChild($yui_menubar);<br />
<br />
&nbsp;&nbsp;&nbsp; $bd = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;setAttribute("class", "bd");<br />
<br />
&nbsp;&nbsp;&nbsp; $yui_menubar-&gt;appendChild($bd);<br />
<br />
&nbsp;&nbsp;&nbsp; $ul = parent::createElement("ul");<br />
&nbsp;&nbsp;&nbsp; $ul-&gt;setAttribute("class", "first-of-type");<br />
<br />
&nbsp;&nbsp;&nbsp; // ALL Menu() instances ocurr inside an &lt;ul&gt; tag.<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;UL = $bd-&gt;appendChild($ul);<br />
<br />
&nbsp; }<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; appendChild()<br />
&nbsp; /**&nbsp; Appends a new yuimenubaritem to the menubar UL node.<br />
&nbsp; /**&nbsp; This function changes &lt;li&gt; and &lt;a&gt; classes to yuiMENUBARsomething<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function appendChild($child) {<br />
<br />
&nbsp;&nbsp;&nbsp; $li = parent::importNode($child-&gt;LI, true);<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;setAttribute("class", "yuimenubaritem");<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;getElementsByTagName("a")-&gt;item(0)-&gt;setAttribute("class", "yuimenubaritemlabel");<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;UL-&gt;appendChild($li);<br />
<br />
&nbsp; }<br />
<br />
&nbsp; public function grab() {<br />
<br />
&nbsp;&nbsp;&nbsp; return parent::saveHTML();<br />
<br />
&nbsp; }<br />
<br />
}<br />
<br />
/** ---------------------------------<br />
/**&nbsp; Class Menu()<br />
/**&nbsp; Creates a yuimenuitem li node<br />
/** ---------------------------------*/<br />
<br />
class Menu extends DOMDocument {<br />
<br />
&nbsp; public $LI; // stores the &lt;li&gt; node (THE link) that will be exported to MenuBar() or used on appendChild()<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; Constructor<br />
&nbsp; /**&nbsp; Generates a yuimenuitem li node<br />
&nbsp; /**&nbsp; No yuimenubar items are created here. MenuBar handles that.<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function __construct($link_name) {<br />
<br />
&nbsp;&nbsp;&nbsp; parent::__construct();<br />
<br />
&nbsp;&nbsp;&nbsp; $li = parent::createElement("li");<br />
&nbsp;&nbsp;&nbsp; $li-&gt;setAttribute("class", "yuimenuitem");<br />
<br />
&nbsp;&nbsp;&nbsp; // LI node stores THE link.<br />
&nbsp;&nbsp;&nbsp; // if appendChild is used, the new (sub) Menu() would be LI node child.<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;LI = parent::appendChild($li);<br />
<br />
&nbsp;&nbsp;&nbsp; $a = parent::createElement("a", $link_name);<br />
&nbsp;&nbsp;&nbsp; $a-&gt;setAttribute("class", "yuimenuitemlabel");<br />
<br />
&nbsp;&nbsp;&nbsp; $li-&gt;appendChild($a);<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;li = $li;<br />
&nbsp;&nbsp;&nbsp; $this-&gt;a = $a;<br />
<br />
&nbsp; }<br />
<br />
&nbsp; /** ---------------------------------<br />
&nbsp; /**&nbsp; appendChild<br />
&nbsp; /**&nbsp; Appends a (sub) Menu() to current Menu() in LI<br />
&nbsp; /** ---------------------------------*/<br />
<br />
&nbsp; public function appendChild($child) {<br />
<br />
&nbsp;&nbsp;&nbsp; $yuimenu = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $yuimenu-&gt;setAttribute("class", "yuimenu");<br />
<br />
&nbsp;&nbsp;&nbsp; $this-&gt;LI-&gt;appendChild($yuimenu);<br />
<br />
&nbsp;&nbsp;&nbsp; $bd = parent::createElement("div");<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;setAttribute("class", "bd");<br />
<br />
&nbsp;&nbsp;&nbsp; $yuimenu-&gt;appendChild($bd);<br />
<br />
&nbsp;&nbsp;&nbsp; $ul = parent::createElement("ul");<br />
<br />
&nbsp;&nbsp;&nbsp; $bd-&gt;appendChild($ul);<br />
<br />
&nbsp;&nbsp;&nbsp; // child-&gt;NODE holds THE link from the new child (from child's __construct())<br />
<br />
&nbsp;&nbsp;&nbsp; $ul-&gt;appendChild(parent::importNode($child-&gt;LI, true));<br />
<br />
&nbsp; }<br />
<br />
&nbsp; public function setAttribute($name, $value, $node="a") {<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($node == "a") {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;a-&gt;setAttribute($name, $value);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;li-&gt;setAttribute($name, $value);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80985""></a>
  <div class="note">
   <strong class="user">ptichy at pobox dot sk</strong>
   <a href="#80985" class="date">09-Feb-2008 11:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to get contents of node with all tags by PHP Dom:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// XML data<br />
</span><span class="default">$xml_string </span><span class="keyword">= </span><span class="string">"&lt;?xml version='1.0' ?&gt;<br />
&lt;sentence&gt;<br />
How to get contents of node with all tags by PHP Dom: &lt;br/&gt;<br />
&lt;b&gt;cabbages&lt;/b&gt;, &lt;i&gt;tomatoes&lt;/i&gt;,<br />
&nbsp; &lt;i&gt;apples&lt;/i&gt;, &lt;font&nbsp; color='purple'&gt;aubergines&lt;/font&gt;<br />
&lt;ol&gt;<br />
&nbsp;&nbsp; &lt;li&gt; row 1&lt;/li&gt;<br />
&nbsp;&nbsp; &lt;li&gt; row 2 &lt;/li&gt;<br />
&nbsp;&nbsp; &lt;li&gt; row 3 &lt;/li&gt;<br />
&nbsp;&lt;/ol&gt;<br />
&nbsp;&lt;table border = '1'&gt;<br />
&nbsp; &lt;tbody&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;td&gt;I am best&lt;/td&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;tr&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;td&gt;Programmer&lt;/td&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/tr&gt;<br />
&nbsp; &lt;/tbody&gt;<br />
&lt;/table&gt;<br />
You see my projects at:<br />
&lt;strong&gt;&lt;a href='<a href="http://www.itdeveloping.eu" rel="nofollow" target="_blank">http://www.itdeveloping.eu</a>' &gt;www.itdeveloping.eu&lt;/a&gt;&lt;/strong&gt;<br />
&lt;/sentence&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// parse it<br />
</span><span class="default">$doc</span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
if (!</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml_string</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp; echo (</span><span class="string">"Error in XML document"</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$nody </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'sentence'</span><span class="keyword">); </span><span class="comment">// gets NodeList<br />
<br />
</span><span class="default">$nod</span><span class="keyword">=</span><span class="default">$nody</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);</span><span class="comment">//Node <br />
</span><span class="default">getContent</span><span class="keyword">(</span><span class="default">$Content</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">);<br />
echo </span><span class="default">$Content</span><span class="keyword">;<br />
<br />
function </span><span class="default">getContent</span><span class="keyword">(&amp;</span><span class="default">$NodeContent</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">,</span><span class="default">$nod</span><span class="keyword">)<br />
{&nbsp; &nbsp; </span><span class="default">$NodList</span><span class="keyword">=</span><span class="default">$nod</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for( </span><span class="default">$j</span><span class="keyword">=</span><span class="default">0 </span><span class="keyword">;&nbsp; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$NodList</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++ )<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nod2</span><span class="keyword">=</span><span class="default">$NodList</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$j</span><span class="keyword">);</span><span class="comment">//Node j<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodemane</span><span class="keyword">=</span><span class="default">$nod2</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodevalue</span><span class="keyword">=</span><span class="default">$nod2</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$nod2</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XML_TEXT_NODE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$NodeContent </span><span class="keyword">.=&nbsp; </span><span class="default">$nodevalue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {&nbsp; &nbsp;&nbsp; </span><span class="default">$NodeContent </span><span class="keyword">.= </span><span class="string">"&lt;</span><span class="default">$nodemane</span><span class="string"> "</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attAre</span><span class="keyword">=</span><span class="default">$nod2</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$attAre </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$NodeContent </span><span class="keyword">.=</span><span class="string">"</span><span class="keyword">{</span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">='</span><span class="keyword">{</span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">}</span><span class="string">'" </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$NodeContent </span><span class="keyword">.=</span><span class="string">"&gt;"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">getContent</span><span class="keyword">(</span><span class="default">$NodeContent</span><span class="keyword">,</span><span class="default">$nod2</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$NodeContent </span><span class="keyword">.= </span><span class="string">"&lt;/</span><span class="default">$nodemane</span><span class="string">&gt;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80724""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#80724" class="date">30-Jan-2008 08:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to...<br />
"If you create your own custom element extending DOMElement and append him in place of the document element, you cannot access to any new members newly defined in your custom class via DOMDocument::$documentElement."<br />
<br />
... it is not a bug, it is a feature. The DOMDocument::$documentElement property name may be misleading but according to the DOM Level 2 Core specification it is a convenience attribute meant to access the root element of your DOMDocument. See here: <a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html#i-Document</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80613""></a>
  <div class="note">
   <strong class="user">ryoroxdahouse at hotmail dot com</strong>
   <a href="#80613" class="date">25-Jan-2008 09:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use DOM to generate dynamically XHTML document.<br />
<br />
When trying to extend the DOMDocument and DOMElement classes, I found a very annoying bug concerning DOMDocument::$documentElement.<br />
<br />
If you create your own custom element extending DOMElement and append him in place of the document element, you cannot access to any new members newly defined in your custom class via DOMDocument::$documentElement.<br />
<br />
In my situation, I cannot use DOMDocument::registerNodeClass() because the document element is not necessarily the base class for all the elements in my document.<br />
<br />
*******<br />
problem<br />
*******<br />
<br />
See bellow for the repro step:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">MyElement </span><span class="keyword">extends </span><span class="default">DOMElement</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$myProp</span><span class="keyword">=</span><span class="string">"myProp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">myMethod</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'myMethod()'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">=new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">MyElement</span><span class="keyword">(</span><span class="string">'myElement'</span><span class="keyword">,</span><span class="string">'myElement'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myProp :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myProp</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myMethod :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myMethod</span><span class="keyword">().</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will output:<br />
<br />
Notice: Undefined property: DOMElement::$myProp in C:\Program Files\EasyPHP 2.0b1\www\testDOMBug\test2.php on line 11<br />
$myElement-&gt;myProp :<br />
<br />
Fatal error: Call to undefined method DOMElement::myMethod() in C:\Program Files\EasyPHP 2.0b1\www\testDOMBug\test2.php on line 12<br />
<br />
*******<br />
solution<br />
*******<br />
<br />
After searching around, I found a pretty odd way to fix this problem. It seems that you have to stock a reference to your appended document element in an user-defined (and persistent) variable (in other words, not only in DOMDocument::$documentElement). See below:<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">MyElement </span><span class="keyword">extends </span><span class="default">DOMElement</span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$myProp</span><span class="keyword">=</span><span class="string">"myProp"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function </span><span class="default">myMethod</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">'myMethod()'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$myDocument</span><span class="keyword">=new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mydocumentElement</span><span class="keyword">=</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(new </span><span class="default">MyElement</span><span class="keyword">(</span><span class="string">'myElement'</span><span class="keyword">,</span><span class="string">'myElement'</span><span class="keyword">)); </span><span class="comment">//here is the hack<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo (</span><span class="string">'$myElement-&gt;myProp :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myProp</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">'$myElement-&gt;myMethod :'</span><span class="keyword">.</span><span class="default">$myDocument</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">myMethod</span><span class="keyword">().</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will output:<br />
<br />
$myElement-&gt;myProp :myProp<br />
$myElement-&gt;myMethod :myMethod()<br />
<br />
Hope it will help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80293""></a>
  <div class="note">
   <strong class="user">moshedolev at gmail dot com</strong>
   <a href="#80293" class="date">08-Jan-2008 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I developed a group of functions that make it very easy to extract any information you want from any page you load from the internet. All based on the DOMDocument object.<br />
You can read the entire documentation and download the source code here:<br />
<a href="http://www.tintetoner-shop.de/DomUtilities/" rel="nofollow" target="_blank">http://www.tintetoner-shop.de/DomUtilities/</a><br />
<br />
Enjoy !!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80200""></a>
  <div class="note">
   <strong class="user">naudyj at aus3d.com</strong>
   <a href="#80200" class="date">04-Jan-2008 02:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following can take a XML_TEXT_NODE node and return the contents in an array. Yanick's contribution rocks - but<br />
it overwrote with duplicates only keeping the last line<br />
in the returned array. All the other functions i tested from various sources failed to handle text nodes correctly. Hope this helps someone. It is adapted from code on this site.<br />
<br />
function myTextNode($n, &amp;$a)<br />
{<br />
&nbsp;static $depth = 0;<br />
&nbsp;static $sz = '';<br />
<br />
&nbsp;if ($cn = $n-&gt;firstChild) <br />
&nbsp;{<br />
&nbsp; while ($cn)<br />
&nbsp; {<br />
&nbsp;&nbsp; if ($cn-&gt;nodeType == XML_TEXT_NODE) <br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $sz .= $cn-&gt;nodeValue;<br />
&nbsp;&nbsp; } <br />
&nbsp;&nbsp; elseif ($cn-&gt;nodeType == XML_ELEMENT_NODE) <br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $b = 1;<br />
&nbsp;&nbsp;&nbsp; if ($cn-&gt;hasChildNodes()) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; $depth++;<br />
&nbsp;&nbsp; &nbsp; if ($this-&gt;myHeadings($cn, $a)) <br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($sz){<br />
&nbsp;&nbsp; &nbsp; &nbsp; array_push($a, $sz);<br />
&nbsp;&nbsp; &nbsp; &nbsp; $sz = '';<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; $depth--;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; $cn = $cn-&gt;nextSibling;<br />
&nbsp; }<br />
&nbsp; return $b;<br />
&nbsp;}<br />
} <br />
<br />
so you could use:&nbsp;&nbsp; <br />
<br />
$nodes = $dom-&gt;getElementsByTagName("td"); <br />
if($nodes){<br />
&nbsp;foreach ($nodes as $node){<br />
&nbsp; $a = Array();<br />
&nbsp; myTextNode($node, $a);<br />
&nbsp;}<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79125""></a>
  <div class="note">
   <strong class="user">trollboy at shoggoth dot net</strong>
   <a href="#79125" class="date">13-Nov-2007 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a simple class to turn an associative array into xml, as this seems like something fairly simple, but nothing out there does it that I know of.&nbsp; That said,&nbsp; enjoy.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * basic class for converting an array to xml.<br />
&nbsp;&nbsp; &nbsp; * @author Matt Wiseman (trollboy at shoggoth.net)<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">class </span><span class="default">array2xml </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public </span><span class="default">$dom_tree</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * basic constructor<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">public&nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'array2xml requires an array'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'array is empty'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dom_tree </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'result'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dom_tree</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">recurse_node</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">dom_tree</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * recurse a nested array and return dom back<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param array $data<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @param dom element $obj<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">recurse_node</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$obj</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//recurse if neccisary<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">recurse_node</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//no object support so just say what it is<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="string">'Object: "' </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'" type: "'&nbsp; </span><span class="keyword">. </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) . </span><span class="string">'"'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//straight up data, no weirdness<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$sub_obj</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * get the finished xml<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">saveXML</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'cat'</span><span class="keyword">=&gt;</span><span class="string">'animal'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'container'</span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'thing'</span><span class="keyword">=&gt;</span><span class="string">'stuff'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'thing2'</span><span class="keyword">=&gt;</span><span class="string">'stuff2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'thing3'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'thing4'</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'wtf'</span><span class="keyword">=&gt; new </span><span class="default">stdClass</span><span class="keyword">(),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'foo'</span><span class="keyword">=&gt;</span><span class="string">'bar'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; try {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o_test </span><span class="keyword">= new </span><span class="default">array2xml</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } catch (</span><span class="default">Exception $e</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$o_test</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78941""></a>
  <div class="note">
   <strong class="user">jim.filter (at gmail.com)</strong>
   <a href="#78941" class="date">03-Nov-2007 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Array to DOM<br />
<br />
Here is a recursive function to turn a multidimensional array into an XML document.&nbsp; It will handle multiple elements of the same tag, but only one per parent element. IE: <br />
<br />
Can't generate:&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Can generate:<br />
&lt;root&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;root&gt;<br />
&nbsp; &lt;sub1&gt;data1&lt;/sub1&gt;&nbsp; &nbsp; &nbsp; &lt;subs1&gt;<br />
&nbsp; &lt;sub1&gt;data2&lt;/sub1&gt;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data1&lt;/value&gt;<br />
&nbsp; &lt;sub2&gt;data1&lt;/sub2&gt;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data2&lt;/value&gt;<br />
&nbsp; &lt;sub2&gt;data2&lt;/sub2&gt;&nbsp; &nbsp; &nbsp; &lt;/subs1&gt;<br />
&lt;/root&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;subs2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data1&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;value&gt;data2&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;subs2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/root&gt;<br />
<br />
Also, the function performs no type of error checking on your array and will throw a DOMException if a key value you used in your array contains invalid characters for a proper DOM tag. This function is untested for "deep" multidimensional arrays.<br />
<br />
Complete code ready to run with example:<br />
<br />
<span class="default">&lt;?PHP<br />
&nbsp; </span><span class="keyword">function </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$DOM&nbsp; </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">){</span><span class="default">$DOM&nbsp; </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">, </span><span class="string">'iso-8859-1'</span><span class="keyword">);}<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$root </span><span class="keyword">== </span><span class="default">null</span><span class="keyword">){</span><span class="default">$root </span><span class="keyword">= </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'root'</span><span class="keyword">));}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'#MULTIPLE_ELEMENT_NAME'</span><span class="keyword">];<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">$name </span><span class="keyword">!= </span><span class="default">null</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subroot </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$subroot</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) &amp;&amp; </span><span class="default">$key </span><span class="keyword">!= </span><span class="string">'#MULTIPLE_ELEMENT_NAME'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subroot </span><span class="keyword">= </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$subroot</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$root</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$DOM</span><span class="keyword">;&nbsp; <br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; </span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'GenericDatas'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Date'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'November 03, 2007'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Company'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Facility One'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Field'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Facility Management Software'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Employees' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'Employee'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Cindy'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Sean'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Joe'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Owen'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Jim'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Dale'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Kelly'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Ryan'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Johnathan'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Robin'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'William Marcus'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'NewCoops' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#MULTIPLE_ELEMENT_NAME' </span><span class="keyword">=&gt; </span><span class="string">'Coop'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'John'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Tyler'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Ray'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Dawn'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Datas'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'DATAS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'OtherDatas'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; </span><span class="default">$DOM&nbsp; </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">, </span><span class="string">'iso-8859-1'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$root </span><span class="keyword">= </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">createElement</span><span class="keyword">(</span><span class="string">'CompanyData'</span><span class="keyword">)); <br />
&nbsp; </span><span class="default">$DOM&nbsp; </span><span class="keyword">= </span><span class="default">AtoX</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$DOM</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$DOM</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="string">'C:\test.xml'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78929""></a>
  <div class="note">
   <strong class="user">freyjkell at gmail dot com</strong>
   <a href="#78929" class="date">02-Nov-2007 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In order to REALLY well handle XHTML entities with DOM, you can do following things:<br />
<br />
1. Add this DOCTYPE to your documents<br />
&lt;!DOCTYPE xhtmlentities PUBLIC "-//W3C//ENTITIES XHTML Character Entities 1.0//EN" "/xhtml11.ent"&gt;<br />
<br />
2. Copy <a href="http://freyjkell.ovh.org/xhtml11.ent into your document root." rel="nofollow" target="_blank">http://freyjkell.ovh.org/xhtml11.ent into your document root.</a><br />
<br />
3. In your PHP:<br />
<span class="default">&lt;?php<br />
$dom</span><span class="keyword">=new </span><span class="default">DOMDocument</span><span class="keyword">();<br />
</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="string">'file.xhtml'</span><span class="keyword">,</span><span class="default">LIBXML_DTDLOAD</span><span class="keyword">); </span><span class="comment">// NOT resolveExternals - it needs true doctype, and includes crap code<br />
// some DOM operations<br />
</span><span class="default">$doctype</span><span class="keyword">=</span><span class="default">DOMImplementation</span><span class="keyword">::</span><span class="default">createDocumentType</span><span class="keyword">(</span><span class="string">"html"</span><span class="keyword">,</span><span class="string">"-//W3C//DTD XHTML 1.1//EN"</span><span class="keyword">,</span><span class="string">"<a href="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</a>"</span><span class="keyword">); </span><span class="comment">// creating real doctype<br />
</span><span class="default">$output</span><span class="keyword">=</span><span class="default">DOMImplementation</span><span class="keyword">::</span><span class="default">createDocument</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$doctype</span><span class="keyword">);<br />
</span><span class="default">$output</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">$output</span><span class="keyword">-&gt;</span><span class="default">encoding</span><span class="keyword">=</span><span class="string">'utf-8'</span><span class="keyword">;<br />
</span><span class="default">$output</span><span class="keyword">=</span><span class="default">$output</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br />
</span><span class="default">$xhtml</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'/application\/xhtml\+xml(?![+a-z])'</span><span class="keyword">.<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'(;q=(0\.\d{1,3}|[01]))?/i'</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_ACCEPT'</span><span class="keyword">],</span><span class="default">$xhtml</span><span class="keyword">) &amp;&amp; <br />
&nbsp;&nbsp;&nbsp; (isset(</span><span class="default">$xhtml</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])?</span><span class="default">$xhtml</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]:</span><span class="default">1</span><span class="keyword">) &gt; </span><span class="default">0 </span><span class="keyword">|| <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"HTTP_USER_AGENT"</span><span class="keyword">], <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"W3C_Validator"</span><span class="keyword">)!==</span><span class="default">false </span><span class="keyword">|| <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"HTTP_USER_AGENT"</span><span class="keyword">], <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"WebKit"</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">; </span><span class="comment">// XHTML Content-Negotiation<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: '</span><span class="keyword">.(</span><span class="default">$xhtml</span><span class="keyword">?</span><span class="string">'application/xhtml+xml'</span><span class="keyword">:</span><span class="string">'text/html'</span><span class="keyword">).</span><span class="string">'; CHARSET=shift-jis'</span><span class="keyword">);<br />
print </span><span class="default">$output</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77627""></a>
  <div class="note">
   <strong class="user">PHPdeveloper</strong>
   <a href="#77627" class="date">06-Sep-2007 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Yanik's dom2array() function (added on 14-Mar-2007 08:40) does not handle multiple nodes with the same name, i.e.:<br />
<br />
&lt;foo&gt;<br />
&nbsp; &lt;name&gt;aa&lt;/name&gt;<br />
&nbsp; &lt;name&gt;bb&lt;/name&gt;<br />
&lt;/foo&gt;<br />
<br />
It will overwrite former and your array will contain just the last one ("bb")</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76838""></a>
  <div class="note">
   <strong class="user">Francois  Hill</strong>
   <a href="#76838" class="date">01-Aug-2007 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to lutfi at smartconsultant dot us :<br />
<br />
(see my post on<br />
<a href="http://fr2.php.net/manual/en/" rel="nofollow" target="_blank">http://fr2.php.net/manual/en/</a><br />
function.dom-domdocument-getelementsbytagname.php<br />
)<br />
<br />
Use this class I wrote:<br />
<br />
class XPathableNode extends DOMNode<br />
{<br />
&nbsp;&nbsp;&nbsp; protected $Node;<br />
&nbsp;&nbsp;&nbsp; protected $DOMDocument_from_node;<br />
&nbsp;&nbsp;&nbsp; protected $DOMXpath_for_node;<br />
<br />
&nbsp;&nbsp;&nbsp; public function __construct(/* DOMNode */ $node)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;Node=$node;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DOMDocument_from_node=new <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; DomDocument();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $domNode=$this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&gt;importNode($this-&gt;Node, true);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;appendChild($domNode);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;DomXpath_for_node = <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; new Domxpath($this-&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DOMDocument_from_node);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function convertHTML()<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; return $this-&gt;DOMDocument_from_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;saveHTML();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public /*DomNodeList*/ function applyXpath($xpath)<br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; return $this-&gt;DomXpath_for_node<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;query($xpath);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
(sorry for the display... What a terrible hinderance on the<br />
part of php.net !)<br />
<br />
Then :<br />
Make a new XPathableNode out of your parent node.<br />
You may then retrieve a DOMNodeList from it by applying a<br />
xpath (thus being able to specify the depth&nbsp; and name of <br />
elements you want).<br />
<br />
Has got me around some (of the many) DOM awkwardnesses a few times.<br />
<br />
;o)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76551""></a>
  <div class="note">
   <strong class="user">lutfi at smartconsultant dot us</strong>
   <a href="#76551" class="date">20-Jul-2007 06:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i have some problem parsing recurred xml tree here:<br />
<br />
&lt;menu name='parent1' &gt;<br />
&nbsp; &lt;submenu name='file' &gt;<br />
&nbsp;&nbsp; &nbsp; &lt;submenu name='open' &gt;Open file&lt;/submenu&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;submenu name='close' &gt;Close file&lt;/submenu&gt;<br />
&nbsp; &lt;/submenu&gt;<br />
&nbsp; &lt;submenu name='edit' &gt;<br />
&nbsp;&nbsp; &nbsp; &lt;submenu name='cut' &gt;Cut Clipboards&lt;/submenu&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;submenu name='copy' &gt;Copy Clipboards&lt;/submenu&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;submenu name='paste' &gt;Paste Clipboards&lt;/submenu&gt;<br />
&nbsp; &lt;/submenu&gt;<br />
&lt;/menu&gt;<br />
<br />
with getElementsByTagName all submenu is on the same level.<br />
i want it to be structured like tree list, but not change the 'submenu' tag</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75553""></a>
  <div class="note">
   <strong class="user">Sanados at failure dot at</strong>
   <a href="#75553" class="date">05-Jun-2007 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
appended to <br />
brian dot reynolds at risaris dot com<br />
20-Feb-2007 10:09<br />
<br />
when you got variable nodes at start you array fails and looses nodes&nbsp; beneath.<br />
solution that counts occurance though eats up performance:<br />
<br />
function xmlToArray($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $xml_array = array();<br />
&nbsp;&nbsp;&nbsp; $occurance = array();<br />
<br />
&nbsp;&nbsp; &nbsp; foreach($n-&gt;childNodes as $nc)<br />
&nbsp;&nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $occurance[$nc-&gt;nodeName]++;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( $nc-&gt;hasChildNodes() )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($occurance[$nc-&gt;nodeName] &gt; 1)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xml_array[$nc-&gt;nodeName][] = xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xml_array[$nc-&gt;nodeName] = xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return utf8_decode($nc-&gt;nodeValue);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $xml_array;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73875""></a>
  <div class="note">
   <strong class="user">Yanik &lt;clonyara(at)ahoo(dot)com&gt;</strong>
   <a href="#73875" class="date">14-Mar-2007 08:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I hate DOM model !<br />
so I wrote dom2array simple function (simple for use):<br />
<br />
function dom2array($node) {<br />
&nbsp; $res = array();<br />
&nbsp; print $node-&gt;nodeType.'&lt;br/&gt;';<br />
&nbsp; if($node-&gt;nodeType == XML_TEXT_NODE){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $res = $node-&gt;nodeValue;<br />
&nbsp; }<br />
&nbsp; else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($node-&gt;hasAttributes()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $attributes = $node-&gt;attributes;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!is_null($attributes)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res['@attributes'] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach ($attributes as $index=&gt;$attr) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res['@attributes'][$attr-&gt;name] = $attr-&gt;value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($node-&gt;hasChildNodes()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $children = $node-&gt;childNodes;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for($i=0;$i&lt;$children-&gt;length;$i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $child = $children-&gt;item($i);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $res[$child-&gt;nodeName] = dom2array($child);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $res;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73793""></a>
  <div class="note">
   <strong class="user">Nevyn at N dot O dot S dot P dot A dot M dot emai dot it</strong>
   <a href="#73793" class="date">10-Mar-2007 04:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a couple of functions to:<br />
&nbsp;- create a DOMDocument from a file<br />
&nbsp;- parse the namespaces in it<br />
&nbsp;- create a XPath object with all the namespaces registered<br />
&nbsp;- load the schemalocations<br />
&nbsp;- validate the file on the main schema (the one without prefix)<br />
<br />
It is useful for me, see if it is also for someone else!!<br />
<br />
Giulio<br />
<br />
function decodeNode($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $out = $node-&gt;ownerDocument-&gt;saveXML($node);<br />
&nbsp;&nbsp;&nbsp; $re = "{^&lt;((?:\\w*:)?\\w*)". //the tag name<br />
&nbsp;&nbsp;&nbsp; "[\\s\n\r]*((?:[\\s\n\r]*". <br />
&nbsp;&nbsp;&nbsp; "(?:\\w*:)?\\w+[\\s\n\r]*=[\\s\n\r]*". //possible attribute name<br />
&nbsp;&nbsp;&nbsp; "(?:\"[^\"]*\"|\'[^\']*\'))*)". //attribute value<br />
&nbsp;&nbsp;&nbsp; "[\\s\n\r]*&gt;[\r\n]*".<br />
&nbsp;&nbsp;&nbsp; "((?:.*[\r\n]*)*)". //content<br />
&nbsp;&nbsp;&nbsp; "[\r\n]*&lt;/\\1&gt;$}"; //closing tag<br />
&nbsp;&nbsp;&nbsp; preg_match($re, $out, $mat);<br />
&nbsp;&nbsp;&nbsp; return $mat;<br />
}<br />
<br />
function innerXml($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $mat = decodeNode($node);<br />
&nbsp;&nbsp;&nbsp; return $mat[3];<br />
}<br />
<br />
function getnodeAttributes($node)<br />
{<br />
&nbsp;&nbsp;&nbsp; $mat = decodeNode($node);<br />
&nbsp;&nbsp;&nbsp; $txt = $mat[2];<br />
&nbsp;&nbsp;&nbsp; $re = "{((?:\\w*:)?\\w+)[\\s\n\r]*=[\\s\n\r]*(\"[^\"]*\"|\'[^\']*\')}";<br />
&nbsp;&nbsp;&nbsp; preg_match_all($re, $txt, $mat);<br />
&nbsp;&nbsp;&nbsp; $att = array();<br />
&nbsp;&nbsp;&nbsp; for ($i=0; $i&lt;count($mat[0]); $i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = $mat[2][$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($value[0] == "\'" || $value[0] == "\"")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $len = strlen($value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = substr($value, 1, strlen($value)-2);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $att[ $mat[1][$i] ] = $value;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $att;<br />
}<br />
<br />
function loadXml($file)<br />
{<br />
&nbsp;&nbsp;&nbsp; $doc = new DOMDocument();<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;load($file);<br />
&nbsp;&nbsp;&nbsp; //cerca l'attributo xmlns<br />
&nbsp;&nbsp;&nbsp; $xsi = false;<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;namespaces = array();<br />
&nbsp;&nbsp;&nbsp; $doc-&gt;xpath = new DOMXPath($doc);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $attr = getnodeAttributes($doc-&gt;documentElement);<br />
&nbsp;&nbsp;&nbsp; foreach ($attr as $name =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (substr($name,0,5) == "xmlns")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $uri = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pre = $doc-&gt;documentElement-&gt;lookupPrefix($uri);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($uri == "<a href="http://www.w3.org/2001/XMLSchema-instance" rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xsi = $pre;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;namespaces[$pre] = $uri;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($pre == "")<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pre = "noname";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;xpath-&gt;registerNamespace($pre, $uri);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if ($xsi)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;schemaLocations = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $lst = $doc-&gt;xpath-&gt;query("//@$xsi:schemaLocation");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($lst as $el)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $re = "{[\\s\n\r]*([^\\s\n\r]+)[\\s\n\r]*([^\\s\n\r]+)}";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; preg_match_all($re, $el-&gt;nodeValue, $mat);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ($i=0; $i&lt;count($mat[0]); $i++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = $mat[2][$i];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $doc-&gt;schemaLocations[ $mat[1][$i] ] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $olddir = getcwd();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; chdir(dirname($file));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $schema = $doc-&gt;schemaLocations[$doc-&gt;namespaces[""]];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (substr($schema,0,7) == "file://")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $schema = substr($value,7);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!$doc-&gt;schemaValidate($schema))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; dbg()-&gt;err("Invalid file");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; chdir($olddir);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $doc;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73365""></a>
  <div class="note">
   <strong class="user">brian dot reynolds at risaris dot com</strong>
   <a href="#73365" class="date">20-Feb-2007 10:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found the xml2array function below very useful, but there seems to be a bug in it. The $item variable was never getting set. I've expanded this out to be a bit more readable, and the corrected code is : <br />
<br />
function xmlToArray($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $return=array();<br />
<br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( $nc-&gt;hasChildNodes() ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $n-&gt;firstChild-&gt;nodeName== $n-&gt;lastChild-&gt;nodeName&amp;&amp;$n-&gt;childNodes-&gt;length&gt;1){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $item = $n-&gt;firstChild;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return[$nc-&gt;nodeName][]=$this-&gt;xmlToArray($item);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $return[$nc-&gt;nodeName]=$this-&gt;xmlToArray($nc);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $return=$nc-&gt;nodeValue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71317""></a>
  <div class="note">
   <strong class="user">cooper at asu dot ntu-kpi dot kiev dot ua</strong>
   <a href="#71317" class="date">22-Nov-2006 11:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using not object-oriented functions and it takes too much time to change them all (or you'll be replacing them later) then as a temporary decision can be used this modules:<br />
<br />
For DOM XML:<br />
<a href="http://alexandre.alapetite.net/doc-alex/domxml-php4-php5/" rel="nofollow" target="_blank">http://alexandre.alapetite.net/doc-alex/domxml-php4-php5/</a><br />
<br />
For XSLT:<br />
<a href="http://alexandre.alapetite.net/doc-alex/xslt-php4-php5/" rel="nofollow" target="_blank">http://alexandre.alapetite.net/doc-alex/xslt-php4-php5/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70449""></a>
  <div class="note">
   <strong class="user">cormac at idreamproducts dot com</strong>
   <a href="#70449" class="date">17-Oct-2006 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most email clients ignore stylesheets in HTML formatted emails.&nbsp; The best way to ensure your HTML is formatted correctly by a broad spectrum of email clients, including webmail implementations as Gmail, is to use inline style attributes.&nbsp; The following function uses DOM to parse an inline stylesheet, and will replace element class and id attributes with inline style attributes, and add inline style attributes for generic tag stylesheet rules.&nbsp; It will remove the stylesheet and any used class and id attributes as these are defunct for most email clients.&nbsp; It is a fairly lightweight function and does not support CSS inheritance, but will work for simple stylesheets e.g.:<br />
<br />
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"<br />
"<a href="http://www.w3.org/TR/html4/loose.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/html4/loose.dtd</a>"&gt;<br />
&lt;html&gt;<br />
&lt;head&gt;<br />
&lt;title&gt;HTML EMAIL&lt;/title&gt;<br />
&lt;style type="text/css"&gt;<br />
body {<br />
&nbsp; margin: 10px 10px;<br />
&nbsp; font: 8pt arial;<br />
&nbsp; background: #fff;<br />
&nbsp; color: #000;<br />
}<br />
p {<br />
&nbsp; margin: 0 0 10px;<br />
&nbsp; line-height: 1.2em;<br />
&nbsp; text-align: justify;<br />
}<br />
p.centered {<br />
&nbsp; text-align: centre;<br />
}<br />
p#right {<br />
&nbsp; text-align: right;<br />
}<br />
&lt;/style&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&lt;p&gt;Sample text justified&lt;/p&gt;<br />
&lt;p class="centered"&gt;Centered text here&lt;/p&gt;<br />
&lt;p id="right"&gt;Right-aligned text&lt;/p&gt;<br />
&lt;/body&gt;<br />
&lt;/html&gt;<br />
<br />
Here's the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">parseStyleSheetfor Email</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$doc </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadHTML</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// grab inline stylesheet as DOM object<br />
&nbsp; </span><span class="default">$oStyle </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// grab rule identifiers and rules<br />
&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/^([-#._a-z0-9]+) ?\{(.*?)\}/ims'</span><span class="keyword">, </span><span class="default">$oStyle</span><span class="keyword">-&gt;</span><span class="default">nodeValue</span><span class="keyword">, </span><span class="default">$aMatches</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER</span><span class="keyword">);<br />
&nbsp; foreach (</span><span class="default">$aMatches </span><span class="keyword">as </span><span class="default">$aRule</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rule_id </span><span class="keyword">= </span><span class="default">$aRule</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// clean up rules<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rule </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">'&nbsp; '</span><span class="keyword">, </span><span class="string">'; '</span><span class="keyword">), array(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="string">';'</span><span class="keyword">), </span><span class="default">$aRule</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rule </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">'/^ /'</span><span class="keyword">, </span><span class="string">'/;$/'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// generic rules<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$rule_id</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">) &amp;&amp; !</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$rule_id</span><span class="keyword">, </span><span class="string">'#'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$items </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="default">$rule_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// set style attribute equal to rule from stylesheet<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$items </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if there is already inline style append it to end of stylesheet rule<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_style </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$current_style</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$rule </span><span class="keyword">. </span><span class="string">';' </span><span class="keyword">. </span><span class="default">$current_style</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// classes<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} elseif (</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$rule_id</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; list(</span><span class="default">$rule_tag</span><span class="keyword">, </span><span class="default">$rule_class</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$rule_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$items </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="default">$rule_tag</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$items </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$class </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'class'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$class </span><span class="keyword">== </span><span class="default">$rule_class</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if there is already inline style append it to end of stylesheet rule<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_style </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$current_style</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$current_style </span><span class="keyword">. </span><span class="string">';' </span><span class="keyword">. </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// remove class as it won't be used now<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="string">'class'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// ids<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} elseif (</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$rule_id</span><span class="keyword">, </span><span class="string">'#'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; list(</span><span class="default">$rule_tag</span><span class="keyword">, </span><span class="default">$id</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'#'</span><span class="keyword">, </span><span class="default">$rule_id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementById</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$current_style </span><span class="keyword">= </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$current_style</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$current_style </span><span class="keyword">. </span><span class="string">';' </span><span class="keyword">. </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">'style'</span><span class="keyword">, </span><span class="default">$rule</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// remove class as it won't be used now<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$item</span><span class="keyword">-&gt;</span><span class="default">removeAttribute</span><span class="keyword">(</span><span class="string">'id'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; </span><span class="comment">// remove inline stylesheet<br />
&nbsp; </span><span class="default">$oStyle</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">-&gt;</span><span class="default">removeChild</span><span class="keyword">(</span><span class="default">$oStyle</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">saveHTML</span><span class="keyword">();<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68967""></a>
  <div class="note">
   <strong class="user">sean at lookin3d dot com</strong>
   <a href="#68967" class="date">17-Aug-2006 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$xmlDoc=&lt;&lt;&lt;XML<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;methodCall&gt;<br />
&nbsp;&nbsp; &lt;methodName&gt;examples.getStateName&lt;/methodName&gt;<br />
&nbsp;&nbsp; &lt;params&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;param&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;value&gt;&lt;i4&gt;41&lt;/i4&gt;&lt;/value&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &lt;/param&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;/params&gt;<br />
&nbsp;&nbsp; &lt;/methodCall&gt;<br />
XML;<br />
<br />
$xml= new DOMDocument();<br />
$xml-&gt;preserveWhiteSpace=false;<br />
$xml-&gt;loadXML($xmlDoc);<br />
print_r(xml2array($xml));<br />
<br />
function xml2array($n)<br />
{<br />
&nbsp;&nbsp;&nbsp; $return=array();<br />
&nbsp;&nbsp;&nbsp; foreach($n-&gt;childNodes as $nc)<br />
&nbsp;&nbsp;&nbsp; ($nc-&gt;hasChildNodes())<br />
&nbsp;&nbsp;&nbsp; ?($n-&gt;firstChild-&gt;nodeName== $n-&gt;lastChild-&gt;nodeName&amp;&amp;$n-&gt;childNodes-&gt;length&gt;1)<br />
&nbsp;&nbsp;&nbsp; ?$return[$nc-&gt;nodeName][]=xml2array($item)<br />
&nbsp;&nbsp;&nbsp; :$return[$nc-&gt;nodeName]=xml2array($nc)<br />
&nbsp;&nbsp;&nbsp; :$return=$nc-&gt;nodeValue;<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60188""></a>
  <div class="note">
   <strong class="user">simlee at indiana dot edu</strong>
   <a href="#60188" class="date">29-Dec-2005 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The project I'm currently working on uses XPaths to dynamically navigate through chunks of an XML file.&nbsp; I couldn't find any PHP code on the net that would build the XPath to a node for me, so I wrote my own function.&nbsp; Turns out it wasn't as hard as I thought it might be (yay recursion), though it does entail using some PHP shenanigans...&nbsp; <br />
<br />
Hopefully it'll save someone else the trouble of reinventing this wheel. <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$node </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// REMEMBER THAT XPATHS USE BASE-1 INSTEAD OF BASE-0!!!<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Get the index for the current node by looping through the siblings.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parentNode </span><span class="keyword">= </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">parentNode</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$parentNode </span><span class="keyword">!= </span><span class="default">null </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$testNode </span><span class="keyword">= </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">( </span><span class="default">$nodeIndex </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeName </span><span class="keyword">= </span><span class="default">$testNode</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nodeIndex</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// PHP trickery!&nbsp; Here we create a counter based on the node <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; name of the test node to use in the XPath.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( !isset( $</span><span class="default">$nodeName </span><span class="keyword">) ) $</span><span class="default">$nodeName </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else $</span><span class="default">$nodeName</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Failsafe return value.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">$nodeIndex </span><span class="keyword">&gt; </span><span class="default">$parentNode</span><span class="keyword">-&gt;</span><span class="default">childNodes</span><span class="keyword">-&gt;</span><span class="default">length </span><span class="keyword">) return( </span><span class="string">"/" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } while( !</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">isSameNode</span><span class="keyword">( </span><span class="default">$testNode </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Recursively get the XPath for the parent.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return( </span><span class="default">getNodeXPath</span><span class="keyword">( </span><span class="default">$parentNode </span><span class="keyword">) . </span><span class="string">"/</span><span class="keyword">{</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeName</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{$</span><span class="default">$nodeName</span><span class="keyword">}</span><span class="string">]" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Hit the root node!&nbsp; Note that the slash is added when <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //&nbsp; building the XPath, so we return just an empty string.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return( </span><span class="string">"" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59734""></a>
  <div class="note">
   <strong class="user">johanwthijs-at-hotmail-dot-com</strong>
   <a href="#59734" class="date">14-Dec-2005 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Being an experienced ASP developer I was wondering how to replace textual content of a node (with msxml this is simply acheived by setting the 'text' property of a node). Out of frustration I started to play around with SimpleXml but I could not get it to work in combination with xPath.<br />
<br />
I took me a lot of time to find out so I hope this helps others:<br />
<br />
function replaceNodeText($objXml, $objNode, $strNewContent){<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp;&nbsp; This function replaces a node's string content with strNewContent<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp;&nbsp; $objNodeListNested = &amp;$objNode-&gt;childNodes;<br />
&nbsp;&nbsp;&nbsp; foreach ( $objNodeListNested as $objNodeNested ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if ($objNodeNested-&gt;nodeType == XML_TEXT_NODE)$objNode-&gt;removeChild ($objNodeNested);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $objNode-&gt;appendChild($objXml-&gt;createTextNode($strNewContent));<br />
}<br />
<br />
$objXml= new DOMDocument();<br />
$objXml-&gt;loadXML('&lt;root&gt;&lt;node id="1"&gt;bla&lt;/note&gt;&lt;/root&gt;');<br />
$objXpath = new domxpath($objXml);<br />
<br />
$strXpath="/root/node[@id='1']";<br />
$objNodeList = $objXpath -&gt;query($strXpath);<br />
foreach ($objNodeList as $objNode){<br />
//pass the node by reference<br />
replaceNodeText($objXml, &amp;$objNode, $strImportedValue);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58856""></a>
  <div class="note">
   <strong class="user">mark at vectrex dot org dot uk</strong>
   <a href="#58856" class="date">17-Nov-2005 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that these DOM functions expect (and presumably return) all their data in UTF-8 character encoding, regardless of what PHP's current encoding is. This means that text nodes, attribute values etc, should be in utf8.<br />
<br />
This applies even if you're generating an XML document which is not ultimately in utf8.<br />
<br />
Mark</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58056""></a>
  <div class="note">
   <strong class="user">toby at tobiasly dot com</strong>
   <a href="#58056" class="date">22-Oct-2005 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This module is not included by default either in the CentOS 4 "centosplus" repository. For those using PHP5 on CentOS 4, a simple "yum --enablerepo=centosplus install php-xml" will do the trick (this will install both the XML and DOM modules).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57274""></a>
  <div class="note">
   <strong class="user">pes_cz</strong>
   <a href="#57274" class="date">29-Sep-2005 09:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I tried to parse my XHTML Strict files with DOM extension, it couldn't understand xhtml entities (like &amp;copy;). I found post about it here (14-Jul-2005 09:05) which adviced to add resolveExternals = true, but it was very slow. There was some small note about xml catalogs but without any glue. Here it is:<br />
<br />
XML catalogs is something like cache. Download all needed dtd's to /etc/xml, edit file /etc/xml/catalog and add this line: &lt;public publicId="-//W3C//DTD XHTML 1.0 Strict//EN" uri="file:///etc/xml/xhtml1-strict.dtd" /&gt;<br />
<br />
Thats all. Thanks to <a href="http://www.whump.com/moreLikeThis/link/03815" rel="nofollow" target="_blank">http://www.whump.com/moreLikeThis/link/03815</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56059""></a>
  <div class="note">
   <strong class="user">amir.laherATcomplinet.com</strong>
   <a href="#56059" class="date">22-Aug-2005 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This particular W3C page provides invaluable documentation for the DOM classes implemented in php5 (via libxml2). It fills in plenty of php.net's gaps:<br />
<br />
<a href="http://www.w3.org/TR/DOM-Level-2-Core/core.html" rel="nofollow" target="_blank">http://www.w3.org/TR/DOM-Level-2-Core/core.html</a><br />
<br />
Some key examples:<br />
* concise summary of the class heirachy (1.1.1)<br />
* clarification that DOM level 2 doesn't allow for population of internal DTDs<br />
* explanation of DOMNode-&gt;normalize()<br />
* explanation of the DOMImplementation class<br />
<br />
The interfaces are described in OMG's Interface Definition Language</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54909""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#54909" class="date">19-Jul-2005 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of PHP 5.1, libxml options may be set using constants rather than the use of proprietary DomDocument properties.<br />
<br />
DomDocument-&gt;resolveExternals is equivilant to setting<br />
LIBXML_DTDLOAD<br />
LIBXML_DTDATTR<br />
<br />
DomDocument-&gt;validateOnParse is equivilant to setting<br />
LIBXML_DTDLOAD<br />
LIBXML_DTDVALID<br />
<br />
PHP 5.1 users are encouraged to use the new constants. <br />
<br />
Example:<br />
<br />
DomDocument-&gt;load($file, LIBXML_DTDLOAD|LIBXML_DTDATTR);<br />
<br />
DomDocument-&gt;load($file, LIBXML_DTDLOAD|LIBXML_DTDVALID);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54893""></a>
  <div class="note">
   <strong class="user">aidan at php dot net</strong>
   <a href="#54893" class="date">19-Jul-2005 05:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When dealing with validation or loading, the output errors can be quite annoying.<br />
<br />
PHP 5.1 introduces libxml_get_errors().<br />
<br />
<a href="http://php.net/libxml_get_errors" rel="nofollow" target="_blank">http://php.net/libxml_get_errors</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54777""></a>
  <div class="note">
   <strong class="user">php at webdevelopers dot cz</strong>
   <a href="#54777" class="date">14-Jul-2005 09:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's Note: If you're using entities, then you have no choice. XML Catalogs can speed DTD resolution.]
<br />

<br />
Never use 
<br />

<br />
$dom-&gt;resolveExternals=true;
<br />

<br />
when parsing XHTML document that has the DOCTYPE declaration with DTD URL specified in it.
<br />

<br />
Otherwise parsing the XHTML with DOCTYPE like this one:
<br />

<br />
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</a>"&gt;
<br />

<br />
will result in PHP/DOM downloading the DTD file from W3C site when parsing your document. It will add extra delay to your script - I experienced that $dom-&gt;load()'s total time was from 1 to 16 seconds.
<br />

<br />
elixon</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51817""></a>
  <div class="note">
   <strong class="user">spammable69 at hotmail dot com</strong>
   <a href="#51817" class="date">12-Apr-2005 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a framework to implement the StyleSheet interfaces as specified on the W3C website.&nbsp; The code is written in PHP, and is NOT a complete implementation.&nbsp; Use it how ya like.&nbsp; I was planning on adding the CSSStyleSheet interfaces as well.&nbsp; Feel free to ask.<br />
<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; class StyleSheetList {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public length;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; private self;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct ( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;self = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __get($property, $&amp;ret) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'length')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret = count($this-&gt;self);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'length')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function item( $index ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $this-&gt;self[$index];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class MediaList extends StyleSheetList {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function appendMedium ( $newMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_push($this-&gt;self, $newMedium);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function deleteMedium ( $oldMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($this-&gt;self as $item) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( $item == $oldMedium ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $item = $this-&gt;self[ $this-&gt;length-1 ];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_pop($this-&gt;self);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class DocumentStyle {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public styleSheets;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct ( ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;styleSheets = new StyleSheetList();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'styleSheets')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class LinkStyle {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public sheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct () {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;sheet = new StyleSheet();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __set($property, $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($property == 'sheet')<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class StyleSheet {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public type;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public disabled;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public ownerNode;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public parentStyleSheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public href;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public title;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public media;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function __construct( $type, $disabled, $ownerNode, $parentStyleSheet, $href, $title){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;type = $type;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;disabled = $disabled;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;media = new MediaList();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;ownerNode = $ownerNode;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;parentStyleSheet = $parentStyleSheet;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;href = $href;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;title = $title;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
?&gt;<br />
<br />
Only contactable via <a href="http://murpsoft.com/contact.html" rel="nofollow" target="_blank">http://murpsoft.com/contact.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
