<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定した名前の変数を外部から受け取り、オプションでそれをフィルタリングする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.filter-input-array.html">≪ filter_input_array</a></li>
      <li style="float: right;"><a href="function.filter-list.html">filter_list ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.filter.html">Filter 関数</a></li>
    <li>指定した名前の変数を外部から受け取り、オプションでそれをフィルタリングする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.filter-input" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">filter_input</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0)</p><p class="refpurpose"><span class="refname">filter_input</span> &mdash; <span class="dc-title">指定した名前の変数を外部から受け取り、オプションでそれをフィルタリングする</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.filter-input-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>filter_input</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$type</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$variable_name</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$filter</code><span class="initializer"> = FILTER_DEFAULT</span></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$options</code></span>
  ]] )</div>


 </div>

 <div class="refsect1 parameters" id="refsect1-function.filter-input-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">type</code></dt>

     <dd>

      <p class="para">
       <strong><code>INPUT_GET</code></strong>、<strong><code>INPUT_POST</code></strong>、
       <strong><code>INPUT_COOKIE</code></strong>、<strong><code>INPUT_SERVER</code></strong> あるいは
       <strong><code>INPUT_ENV</code></strong> のいずれか。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">variable_name</code></dt>

     <dd>

      <p class="para">
       取得する変数の名前。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">filter</code></dt>

     <dd>

      <p class="para">
       適用するフィルタの ID。<a href="filter.filters.html" class="xref">フィルタの型</a>
       に、利用できるフィルタの一覧があります。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       オプションあるいはフラグの論理和の連想配列。
       オプションを指定可能なフィルタの場合、この配列の &quot;flags&quot;
       フィールドにフラグを指定します。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.filter-input-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合は要求された変数の値、フィルタリングに失敗した場合に <strong><code>FALSE</code></strong>、
   あるいは変数 <code class="parameter">variable_name</code> が設定されていない場合に
   <strong><code>NULL</code></strong> を返します。フラグ <strong><code>FILTER_NULL_ON_FAILURE</code></strong>
   が指定されている場合は、変数が設定されていなければ <strong><code>FALSE</code></strong>、
   フィルタリングに失敗したら <strong><code>NULL</code></strong> を返します。
   </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.filter-input-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5202">
    <p><strong>例1 <span class="function"><strong>filter_input()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$search_html&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">filter_input</span><span style="color: #007700">(</span><span style="color: #0000BB">INPUT_GET</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'search'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FILTER_SANITIZE_SPECIAL_CHARS</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$search_url&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">filter_input</span><span style="color: #007700">(</span><span style="color: #0000BB">INPUT_GET</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'search'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FILTER_SANITIZE_ENCODED</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"You&nbsp;have&nbsp;searched&nbsp;for&nbsp;</span><span style="color: #0000BB">$search_html</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;a&nbsp;href='?search=</span><span style="color: #0000BB">$search_url</span><span style="color: #DD0000">'&gt;Search&nbsp;again.&lt;/a&gt;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
You have searched for Me &amp;#38; son.
&lt;a href=&#039;?search=Me%20%26%20son&#039;&gt;Search again.&lt;/a&gt;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.filter-input-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.filter-var.html" class="function" rel="rdfs-seeAlso">filter_var()</a> - 指定したフィルタでデータをフィルタリングする</span></li>
    <li class="member"><span class="function"><a href="function.filter-input-array.html" class="function" rel="rdfs-seeAlso">filter_input_array()</a> - 外部から変数を受け取り、オプションでそれらをフィルタリングする</span></li>
    <li class="member"><span class="function"><a href="function.filter-var-array.html" class="function" rel="rdfs-seeAlso">filter_var_array()</a> - 複数の変数を受け取り、オプションでそれらをフィルタリングする</span></li>
    <li class="member"><a href="filter.filters.html" class="xref">フィルタの型</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115086""></a>
  <div class="note">
   <strong class="user">CertaiN</strong>
   <a href="#115086" class="date">23-May-2014 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function provides us the extremely simple solution for type filtering.<br />
<br />
Without this function...<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
} elseif (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">])) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">];<br />
}<br />
</span><span class="default">$b </span><span class="keyword">= isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">]) &amp;&amp; </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">]) ? </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">] : </span><span class="string">''</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
With this function...<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= (string)</span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Yes, FILTER_REQUIRE_SCALAR seems to be set as a default option. <br />
It's very helpful for eliminating E_NOTICE, E_WARNING and E_ERROR. <br />
This fact should be documented.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114888""></a>
  <div class="note">
   <strong class="user">descartavel1+php at gmail dot com</strong>
   <a href="#114888" class="date">21-Apr-2014 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
contrary to what is stated here on the comments on thow to use the options for filters, there is no range option or default... in fact, there is not much option AT ALL. It is not mentioned in the manual anywhere, and the provided code on that comment does nothing with php-5.4.4..<br />
<br />
<span class="default">&lt;?php<br />
get</span><span class="keyword">(</span><span class="default">GET</span><span class="keyword">, </span><span class="string">'p'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">, array(</span><span class="string">'options'</span><span class="keyword">=&gt;array(</span><span class="string">'default'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">, </span><span class="string">'min_range'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">'max_range'</span><span class="keyword">=&gt;</span><span class="default">9</span><span class="keyword">)) );<br />
</span><span class="comment">// ?p=30 =&gt; 30<br />
// ?p="123" =&gt; 123<br />
// ?p=-23 =&gt; -23<br />
// ?p=asdf =&gt; null<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114405""></a>
  <div class="note">
   <strong class="user">Stefan Weinzierl</strong>
   <a href="#114405" class="date">17-Feb-2014 01:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is an example how to work with the options-parameter. Notice the 'options' in the 'options'-Parameter!<br />
<br />
<span class="default">&lt;?php<br />
$options</span><span class="keyword">=array(</span><span class="string">'options'</span><span class="keyword">=&gt;array(</span><span class="string">'default'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">, </span><span class="string">'min_range'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">'max_range'</span><span class="keyword">=&gt;</span><span class="default">9</span><span class="keyword">));<br />
<br />
</span><span class="default">$priority</span><span class="keyword">=</span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'priority'</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_INT</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$priority will be 5 if the priority-Parameter isn't set or out the given range.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113102""></a>
  <div class="note">
   <strong class="user">akshay dot leadindia at gmail dot com</strong>
   <a href="#113102" class="date">29-Aug-2013 11:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The beauty of using this instead of directly using filter_var( $_GET['search'] ) is that you don't need to check if( isset( $_GET['search'] ) ) as if you pass that to filter_var and the key is not set then it will result in a warning. This function simplifies this and will return the relevant result to you (as per your options set) if the key has not been set in the user input. <br />
<br />
If the type of filter you are using also supports a 'default' argument then this function will also stuff your missing input key with that value, again saving your efforts</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110729""></a>
  <div class="note">
   <strong class="user">west {:a7} jsausa {:d0t}~ com</strong>
   <a href="#110729" class="date">29-Nov-2012 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It's worth noting that the names for variables in filter input obey the same rules as variable naming in PHP (must start with an underscore or letter).&nbsp; We were allowing users to build custom forms but hashing the names to prevent them from putting arbitrary content into the dom.&nbsp; Turns out the hash function occasionally produced entirely numeric values for the field name... which doesn't work with filter_input but worked fine if you read directly from $_GET, $_POST, or $_REQUEST.&nbsp; A workaround is to always prefix an underscore to the field name.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107982""></a>
  <div class="note">
   <strong class="user">chris at chlab dot ch</strong>
   <a href="#107982" class="date">20-Mar-2012 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To use a class method for a callback function, as usual, provide an array with an instance of the class and the method name.<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">myValidator<br />
</span><span class="keyword">{<br />
&nbsp; public function </span><span class="default">username</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// return username or boolean false<br />
&nbsp; </span><span class="keyword">}<br />
}<br />
<br />
</span><span class="default">$myValidator </span><span class="keyword">= new </span><span class="default">myValidator</span><span class="keyword">;<br />
</span><span class="default">$options </span><span class="keyword">= array(</span><span class="string">'options' </span><span class="keyword">=&gt; array(</span><span class="default">$myValidator</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">));<br />
</span><span class="default">$username </span><span class="keyword">= </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'username'</span><span class="keyword">, </span><span class="default">FILTER_CALLBACK</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99124""></a>
  <div class="note">
   <strong class="user">ss23 at ss23 dot geek dot nz</strong>
   <a href="#99124" class="date">29-Jul-2010 08:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this function doesn't (or at least doesn't seem to) actually filter based on the current values of $_GET etc. Instead, it seems to filter based off the original values.<br />
<span class="default">&lt;?php<br />
$_GET</span><span class="keyword">[</span><span class="string">'search'</span><span class="keyword">] = </span><span class="string">'foo'</span><span class="keyword">; </span><span class="comment">// This has no effect on the filter_input<br />
<br />
</span><span class="default">$search_html </span><span class="keyword">= </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'search'</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_SPECIAL_CHARS</span><span class="keyword">);<br />
</span><span class="default">$search_url </span><span class="keyword">= </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, </span><span class="string">'search'</span><span class="keyword">, </span><span class="default">FILTER_SANITIZE_ENCODED</span><span class="keyword">);<br />
echo </span><span class="string">"You have searched for </span><span class="default">$search_html</span><span class="string">.\n"</span><span class="keyword">;<br />
echo </span><span class="string">"&lt;a href='?search=</span><span class="default">$search_url</span><span class="string">'&gt;Search again.&lt;/a&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
If you need to set a default input value and filter that, use filter_var on your required input variable instead</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99115""></a>
  <div class="note">
   <strong class="user">travismowens at gmail dot com</strong>
   <a href="#99115" class="date">28-Jul-2010 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wouldn't recommend people use this function to store their data in a database.&nbsp; It's best not to encode data when storing it, it's better to store it raw and convert in upon the time of need.<br />
<br />
One main reason for this is because if you have a short CHAR(16) field and the text contains encoded characters (quotes, ampersand) you can easily take a 12 character entry which obviously fits, but because of encoding it no longer fits.<br />
<br />
Also, while not as common, if you need to use this data in another place, such as a non webpage (perhaps in a desktop app, or to a cell phone SMS or to a pager) the HTML encoded data will appear raw, and now you have to decode the data.<br />
<br />
In summary, the best way to architect your system, is to store data as raw, and encode it only the moment you need to.&nbsp; So this means in your PHP upon doing a SQL query, instead of merely doing an&nbsp;&nbsp; echo $row['title']&nbsp; you need to run htmlentities() on your echos, or better yet, an abstract function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98686""></a>
  <div class="note">
   <strong class="user">med dot k1987 at yahoo dot com</strong>
   <a href="#98686" class="date">30-Jun-2010 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello,<br />
Does anybody know how to prevent FILTER_SANITIZE_SPECIAL_CHARS from converting the line breaks (\n) into (&amp;#10;).<br />
I'm developing a simple commenting system for my website and I found that the php filter converts \n to &amp;#10; so when using nl2br() there are no line breaks.<br />
help please.<br />
thanks :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89335""></a>
  <div class="note">
   <strong class="user">Maksym Karazeev</strong>
   <a href="#89335" class="date">03-Mar-2009 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a tip. 
<br />

<br />
Note how to setup default filter for filter_var_array
<br />

<br />
When I tried to use filter_var_array and didn't mentioned all array indexes in definition it filtered it with some filter and broke values so using this tip corrected everything
<br />

<br />
<span class="default">&lt;?php
<br />
$def </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">create_function</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">'return array("filter"=&gt;FILTER_UNSAFE_RAW);'</span><span class="keyword">), </span><span class="default">$input</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77307""></a>
  <div class="note">
   <strong class="user">anthony dot parsons at manx dot net</strong>
   <a href="#77307" class="date">23-Aug-2007 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
FastCGI seems to cause strange side-effects with unexpected null values when using INPUT_SERVER and INPUT_ENV with this function. You can use this code to see if it affects your server:<br />
<span class="default">&lt;?php<br />
var_dump</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">);<br />
foreach ( </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">) as </span><span class="default">$b </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_SERVER</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
}<br />
echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$_ENV</span><span class="keyword">);<br />
foreach ( </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$_ENV</span><span class="keyword">) as </span><span class="default">$b </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">filter_input</span><span class="keyword">(</span><span class="default">INPUT_ENV</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span>If you want to be on the safe side, using the superglobal $_SERVER and $_ENV variables will always work. You can still use the filter_* functions for Get/Post/Cookie without a problem, which is the important part!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
