<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>SplFixedArray クラス</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="splpriorityqueue.valid.html">≪ SplPriorityQueue::valid</a></li>
      <li style="float: right;"><a href="splfixedarray.construct.html">SplFixedArray::__construct ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="spl.datastructures.html">データ構造</a></li>
    <li>SplFixedArray クラス</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="class.splfixedarray" class="reference">
 <h1 class="title">SplFixedArray クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0)</p>
 

  <div class="section" id="splfixedarray.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    SplFixedArray クラスは配列の主要な機能を提供します。
    SplFixedArray と通常の PHP の配列との主な違いは、
    SplFixedArray は固定長であって、
    整数値で指定した範囲内の添字しか使用できないところです。
    これにより、より高速な配列の実装が可能となりました。
   </p>
  </div>

 
  <div class="section" id="splfixedarray.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">SplFixedArray</strong>
     </span>

     <span class="oointerface">implements 
      <span class="interfacename"><a href="class.iterator.html" class="interfacename">Iterator</a></span>
     </span>

     <span class="oointerface">, 
      <span class="interfacename"><a href="class.arrayaccess.html" class="interfacename">ArrayAccess</a></span>
     </span>
 
     <span class="oointerface">, 
      <span class="interfacename"><a href="class.countable.html" class="interfacename">Countable</a></span>
     </span>
 
     {</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="splfixedarray.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code><span class="initializer"> = 0</span></span>
  ] )</div>

    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splfixedarray.count.html" class="methodname">count</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splfixedarray.current.html" class="methodname">current</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">SplFixedArray</span> <span class="methodname"><a href="splfixedarray.fromarray.html" class="methodname">fromArray</a></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$save_indexes</code><span class="initializer"> = true</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splfixedarray.getsize.html" class="methodname">getSize</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splfixedarray.key.html" class="methodname">key</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splfixedarray.next.html" class="methodname">next</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="splfixedarray.offsetexists.html" class="methodname">offsetExists</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">mixed</span> <span class="methodname"><a href="splfixedarray.offsetget.html" class="methodname">offsetGet</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splfixedarray.offsetset.html" class="methodname">offsetSet</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newval</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splfixedarray.offsetunset.html" class="methodname">offsetUnset</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splfixedarray.rewind.html" class="methodname">rewind</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="splfixedarray.setsize.html" class="methodname">setSize</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><a href="splfixedarray.toarray.html" class="methodname">toArray</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="splfixedarray.valid.html" class="methodname">valid</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">void</span> <span class="methodname"><a href="splfixedarray.wakeup.html" class="methodname">__wakeup</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>
 
  </div>

  <div class="section" id="splfixedarray.examples">
   <h2 class="title">例</h2>
   <p class="para">
    <div class="example" id="example-3922">
     <p><strong>例1 <strong class="classname">SplFixedArray</strong> の使用例</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;固定長の配列を初期化します<br /></span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SplFixedArray</span><span style="color: #007700">(</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"foo"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]);&nbsp;</span><span style="color: #FF8000">//&nbsp;NULL<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]);&nbsp;</span><span style="color: #FF8000">//&nbsp;int(2)<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"4"</span><span style="color: #007700">]);&nbsp;</span><span style="color: #FF8000">//&nbsp;string(3)&nbsp;"foo"<br /><br />//&nbsp;配列のサイズを&nbsp;10&nbsp;に拡大します<br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setSize</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">9</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"asdf"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;配列のサイズを&nbsp;2&nbsp;に縮めます<br /></span><span style="color: #0000BB">$array</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setSize</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;以下は&nbsp;RuntimeException:&nbsp;Index&nbsp;invalid&nbsp;or&nbsp;out&nbsp;of&nbsp;range&nbsp;となります<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #DD0000">"non-numeric"</span><span style="color: #007700">]);<br />}&nbsp;catch(</span><span style="color: #0000BB">RuntimeException&nbsp;$re</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"RuntimeException:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$re</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[-</span><span style="color: #0000BB">1</span><span style="color: #007700">]);<br />}&nbsp;catch(</span><span style="color: #0000BB">RuntimeException&nbsp;$re</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"RuntimeException:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$re</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]);<br />}&nbsp;catch(</span><span style="color: #0000BB">RuntimeException&nbsp;$re</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"RuntimeException:&nbsp;"</span><span style="color: #007700">.</span><span style="color: #0000BB">$re</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">().</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
NULL
int(2)
string(3) &quot;foo&quot;
RuntimeException: Index invalid or out of range
RuntimeException: Index invalid or out of range
RuntimeException: Index invalid or out of range
</pre></div>
     </div>
    </div>
   </p>
  </div>

 

 
 </div>
 
 
















































































































 
<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="splfixedarray.construct.html">SplFixedArray::__construct</a> &mdash; 新しい固定長配列を作成する</li><li><a href="splfixedarray.count.html">SplFixedArray::count</a> &mdash; 配列のサイズを返す</li><li><a href="splfixedarray.current.html">SplFixedArray::current</a> &mdash; 現在の配列の要素を返す</li><li><a href="splfixedarray.fromarray.html">SplFixedArray::fromArray</a> &mdash; PHP の配列を SplFixedArray インスタンスにインポートする</li><li><a href="splfixedarray.getsize.html">SplFixedArray::getSize</a> &mdash; 配列のサイズを取得する</li><li><a href="splfixedarray.key.html">SplFixedArray::key</a> &mdash; 現在の配列の添字を返す</li><li><a href="splfixedarray.next.html">SplFixedArray::next</a> &mdash; 次のエントリに進む</li><li><a href="splfixedarray.offsetexists.html">SplFixedArray::offsetExists</a> &mdash; 指定した添字が存在するかどうかを返す</li><li><a href="splfixedarray.offsetget.html">SplFixedArray::offsetGet</a> &mdash; 指定した添字の値を返す</li><li><a href="splfixedarray.offsetset.html">SplFixedArray::offsetSet</a> &mdash; 指定した添字の新しい値を設定する</li><li><a href="splfixedarray.offsetunset.html">SplFixedArray::offsetUnset</a> &mdash; 指定した添字の値を消去する</li><li><a href="splfixedarray.rewind.html">SplFixedArray::rewind</a> &mdash; イテレータを先頭に巻き戻す</li><li><a href="splfixedarray.setsize.html">SplFixedArray::setSize</a> &mdash; 配列のサイズを変更する</li><li><a href="splfixedarray.toarray.html">SplFixedArray::toArray</a> &mdash; 固定長配列から PHP の配列を返す</li><li><a href="splfixedarray.valid.html">SplFixedArray::valid</a> &mdash; 配列にまだ要素があるかどうかを調べる</li><li><a href="splfixedarray.wakeup.html">SplFixedArray::__wakeup</a> &mdash; アンシリアライズ後に配列を再初期化する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="110612""></a>
  <div class="note">
   <strong class="user">artaxerxes</strong>
   <a href="#110612" class="date">13-Nov-2012 01:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As the documentation says, SplFixedArray is meant to be *faster* than array. Do not blindly believe other people's benchmarks, and beextra careful with the user comments on php.net. For instance, nairbv's benchmark code is completely wrong. Among other errors, it intends to increase the size of the arrays, but always initialize a 20 elements SplFixedArray.<br />
<br />
On a PHP 5.4 64 bits linux server, I found SplFixedArray to be always faster than array().<br />
* small data (1,000):<br />
&nbsp;&nbsp;&nbsp; * write: SplFixedArray is 15 % faster<br />
&nbsp;&nbsp;&nbsp; * read:&nbsp; SplFixedArray is&nbsp; 5 % faster<br />
* larger data (512,000):<br />
&nbsp;&nbsp;&nbsp; * write: SplFixedArray is 33 % faster<br />
&nbsp;&nbsp;&nbsp; * read:&nbsp; SplFixedArray is 10 % faster</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100916""></a>
  <div class="note">
   <strong class="user">alex dot andrienko at gmail dot com</strong>
   <a href="#100916" class="date">15-Nov-2010 11:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Memory footprint of splFixedArray is about 37% of a regular "array" of the same size. <br />
I was hoping for more, but that's also significant, and that's where you should expect to see difference, not in "performance".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92214""></a>
  <div class="note">
   <strong class="user">chrisstocktonaz at gmail dot com</strong>
   <a href="#92214" class="date">14-Jul-2009 08:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note, that this is considerably faster and should be used when the size of the array is known. Here are some very basic bench marks:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">for(</span><span class="default">$size </span><span class="keyword">= </span><span class="default">1000</span><span class="keyword">; </span><span class="default">$size </span><span class="keyword">&lt; </span><span class="default">50000000</span><span class="keyword">; </span><span class="default">$size </span><span class="keyword">*= </span><span class="default">2</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">PHP_EOL </span><span class="keyword">. </span><span class="string">"Testing size: </span><span class="default">$size</span><span class="string">" </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$s </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">), </span><span class="default">$container </span><span class="keyword">= Array(), </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$container</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Array(): " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$s</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$s </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">), </span><span class="default">$container </span><span class="keyword">= new </span><span class="default">SplFixedArray</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">), </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$container</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"SplArray(): " </span><span class="keyword">. (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$s</span><span class="keyword">) . </span><span class="default">PHP_EOL</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
OUTPUT
<br />
Testing size: 1000
<br />
Array(): 0.00046396255493164
<br />
SplArray(): 0.00023293495178223
<br />

<br />
Testing size: 2000
<br />
Array(): 0.00057101249694824
<br />
SplArray(): 0.0003058910369873
<br />

<br />
Testing size: 4000
<br />
Array(): 0.0015869140625
<br />
SplArray(): 0.00086307525634766
<br />

<br />
Testing size: 8000
<br />
Array(): 0.0024251937866211
<br />
SplArray(): 0.00211501121521
<br />

<br />
Testing size: 16000
<br />
Array(): 0.0057680606842041
<br />
SplArray(): 0.0041120052337646
<br />

<br />
Testing size: 32000
<br />
Array(): 0.011334896087646
<br />
SplArray(): 0.007631778717041
<br />

<br />
Testing size: 64000
<br />
Array(): 0.021990060806274
<br />
SplArray(): 0.013560056686401
<br />

<br />
Testing size: 128000
<br />
Array(): 0.053267002105713
<br />
SplArray(): 0.030976057052612
<br />

<br />
Testing size: 256000
<br />
Array(): 0.10280108451843
<br />
SplArray(): 0.056283950805664
<br />

<br />
Testing size: 512000
<br />
Array(): 0.20657992362976
<br />
SplArray(): 0.11510300636292
<br />

<br />
Testing size: 1024000
<br />
Array(): 0.4138810634613
<br />
SplArray(): 0.21826505661011
<br />

<br />
Testing size: 2048000
<br />
Array(): 0.85640096664429
<br />
SplArray(): 0.46247816085815
<br />

<br />
Testing size: 4096000
<br />
Array(): 1.7242450714111
<br />
SplArray(): 0.95304894447327
<br />

<br />
Testing size: 8192000
<br />
Array(): 3.448086977005
<br />
SplArray(): 1.96746301651</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
