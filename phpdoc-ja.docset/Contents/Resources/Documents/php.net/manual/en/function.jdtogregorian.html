<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ユリウス積算日をグレゴリウス日に変換する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.jdtofrench.html">≪ JDToFrench</a></li>
      <li style="float: right;"><a href="function.jdtojewish.html">jdtojewish ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.calendar.html">カレンダー 関数</a></li>
    <li>ユリウス積算日をグレゴリウス日に変換する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.jdtogregorian" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">JDToGregorian</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">JDToGregorian</span> &mdash; <span class="dc-title">ユリウス積算日をグレゴリウス日に変換する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.jdtogregorian-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>jdtogregorian</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$julianday</code></span>
   )</div>

  <p class="para rdfs-comment">
   ユリウス積算日を &quot;月/日/年&quot; の形式でグレゴリウス日を含む文字列に変換します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.jdtogregorian-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">julianday</code></dt>

     <dd>

      <p class="para">
       ユリウス積算日を表す整数値。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.jdtogregorian-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   グレゴリウス暦の日付を &quot;月/日/年&quot; 形式の文字列で返します。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.jdtogregorian-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.gregoriantojd.html" class="function" rel="rdfs-seeAlso">gregoriantojd()</a> - グレゴリウス日をユリウス積算日に変換する</span></li> 
    <li class="member"><span class="function"><a href="function.cal-from-jd.html" class="function" rel="rdfs-seeAlso">cal_from_jd()</a> - ユリウス積算日からサポートされるカレンダーに変換する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="88469""></a>
  <div class="note">
   <strong class="user">swiles at ddbc dot edu dot tw</strong>
   <a href="#88469" class="date">26-Jan-2009 06:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The php gregoriantojd() and jdtogregorian() functions, in addition to the limitations noted by httpwebwitch, does not take account of the 'Astronomical' system of reckoning - i.e. using a year zero, instead of going directly from 1BCE to 1CE, as with the Christian Anno Domini system.<br />
<br />
These functions can be used to wrap the php built-ins to return ISO 8601 compliant dates:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ISO8601toJD</span><span class="keyword">(</span><span class="default">$ceDate</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$day</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) = </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strrev'</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$ceDate</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$year </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">) </span><span class="default">$year</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">gregoriantojd</span><span class="keyword">(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">JDtoISO8601</span><span class="keyword">(</span><span class="default">$JD</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$JD </span><span class="keyword">&lt;= </span><span class="default">1721425</span><span class="keyword">) </span><span class="default">$JD </span><span class="keyword">+= </span><span class="default">365</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">jdtogregorian</span><span class="keyword">(</span><span class="default">$JD</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%+05d-%02d-%02d'</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43470""></a>
  <div class="note">
   <strong class="user">httpwebwitch</strong>
   <a href="#43470" class="date">22-Jun-2004 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
JD days may have decimal fractions which correspond to the time of day. The Julian day begins at noon, and the decimal fraction measures fractional days until the beginning of the next day at noon.<br />
<br />
For instance, Julian Day 2453179.00000 is June 22, 2004, at 12:00pm (noon). <br />
<br />
One hour later, it's 2453179.04167<br />
At 2453179.20833 I'll have dinner, and<br />
at 2453179.45833, it's time for the evening news.<br />
After a good night of sleep, my alarm will go off at 2453179.83333, <br />
then at noon on June 23, a new Julian Day begins at 2453180.<br />
<br />
To use these functions with fractional days, strip the fractional part with floor(), and apply the function to the integer part. <br />
<br />
Then add 12 hours, bringing you to noon of that day. That is the actual time returned by JDToGregorian().<br />
<br />
Then add the fractional part of the day, by multiplying the decimal part of the Julian Day by (24*60*60) seconds. This may take you forward or backward to a different Gregorian calendar date.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35774""></a>
  <div class="note">
   <strong class="user">uni_fl4r3  at t hotmail dot com</strong>
   <a href="#35774" class="date">14-Sep-2003 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have made a slight modification to treebe's jd to greg function, this one will transform a unix timestamp to Gregorian day/month/year format...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">unix_to_greg</span><span class="keyword">(</span><span class="default">$unix_timestamp</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((((</span><span class="default">$unix_timestamp </span><span class="keyword">/ </span><span class="string">"60"</span><span class="keyword">) / </span><span class="string">"60"</span><span class="keyword">) / </span><span class="string">"24"</span><span class="keyword">) + </span><span class="string">"2440588"</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1721119</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc1 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">/ </span><span class="default">146097</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">- </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$year</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$julian </span><span class="keyword">/ </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc2 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc2 </span><span class="keyword">/ </span><span class="default">1461</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc2 </span><span class="keyword">- </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$julian</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">4</span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc3 </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc3 </span><span class="keyword">/ </span><span class="default">153</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc3 </span><span class="keyword">- </span><span class="default">153 </span><span class="keyword">* </span><span class="default">$month</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">5</span><span class="keyword">) / </span><span class="default">5</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">$julian</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }else{
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">- </span><span class="default">9</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$day</span><span class="string">.</span><span class="default">$month</span><span class="string">.</span><span class="default">$year</span><span class="string">"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32561""></a>
  <div class="note">
   <strong class="user">treebe</strong>
   <a href="#32561" class="date">31-May-2003 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Julian to Gregorian date change.
<br />
If you do not have the calendar extensions loaded this is little function works realy well.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">jd_to_greg</span><span class="keyword">(</span><span class="default">$julian</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1721119</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc1 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$julian </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">/ </span><span class="default">146097</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc1 </span><span class="keyword">- </span><span class="default">146097 </span><span class="keyword">* </span><span class="default">$year</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$julian </span><span class="keyword">/ </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc2 </span><span class="keyword">= </span><span class="default">4 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$julian </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc2 </span><span class="keyword">/ </span><span class="default">1461</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc2 </span><span class="keyword">- </span><span class="default">1461 </span><span class="keyword">* </span><span class="default">$julian</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">4</span><span class="keyword">) / </span><span class="default">4</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$calc3 </span><span class="keyword">= </span><span class="default">5 </span><span class="keyword">* </span><span class="default">$day </span><span class="keyword">- </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$calc3 </span><span class="keyword">/ </span><span class="default">153</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$calc3 </span><span class="keyword">- </span><span class="default">153 </span><span class="keyword">* </span><span class="default">$month</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">$day </span><span class="keyword">+ </span><span class="default">5</span><span class="keyword">) / </span><span class="default">5</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">100 </span><span class="keyword">* </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">$julian</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">+ </span><span class="default">3</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$month </span><span class="keyword">- </span><span class="default">9</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$year </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"</span><span class="default">$day</span><span class="string">.</span><span class="default">$month</span><span class="string">.</span><span class="default">$year</span><span class="string">"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
