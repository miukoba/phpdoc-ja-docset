<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>正規表現検索および置換を行う</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.preg-replace-callback.html">≪ preg_replace_callback</a></li>
      <li style="float: right;"><a href="function.preg-split.html">preg_split ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.pcre.html">PCRE 関数</a></li>
    <li>正規表現検索および置換を行う</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.preg-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">preg_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">preg_replace</span> &mdash; <span class="dc-title">正規表現検索および置換を行う</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.preg-replace-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>preg_replace</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replacement</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$limit</code><span class="initializer"> = -1</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&$count</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <code class="parameter">subject</code> に関して
   <code class="parameter">pattern</code> を用いて検索を行い、
   <code class="parameter">replacement</code> に置換します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.preg-replace-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       検索を行うパターン。文字列もしくは配列とすることができます。
      </p>
      <p class="para">
       <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE 修飾子</a>
       も使えます。非推奨の &#039;<em>e</em>&#039; (PREG_REPLACE_EVAL) は、この関数でだけ使える修飾子です。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replacement</code></dt>

     <dd>

      <p class="para">
       置換を行う文字列もしくは文字列の配列。
       この引数が文字列で、<code class="parameter">pattern</code> 引数が配列の場合、
       すべてのパターンがこの文字列に置換されます。
       <code class="parameter">pattern</code> および <code class="parameter">replacement</code>
       のいずれもが配列の場合、各 <code class="parameter">pattern</code> は
       対応する <code class="parameter">replacement</code> に置換されます。
       もし、<code class="parameter">replacement</code> 配列の要素の数が <code class="parameter">pattern</code>
       配列よりも少ない場合は、余った <code class="parameter">pattern</code> は
       空文字に置換されます。
      </p>
      <p class="para">
       <code class="parameter">replacement</code> では、
       <em>\\<span class="replaceable">n</span></em> 形式または
       <em>$<span class="replaceable">n</span></em>
       形式（PHP 4.0.4 以降）で参照を指定することができます。
       後者の形式の方が好ましい形式です。各参照は、<span class="replaceable">n</span>
       番目のキャプチャ用サブパターンにマッチしたテキストにより置換されます。
       <span class="replaceable">n</span> は 0 から 99 までとすることができ、
       <em>\\0</em> または <em>$0</em> は
       パターン全体にマッチするテキストを参照します。キャプチャ用サブパターンの番号
       については、その左括弧が左から右に（1から）カウントされます。
       置換文字でバックスラッシュを使用する場合は、二重化する必要があります
       (PHP の文字列 <em>&quot;\\\\&quot;</em> となります)。
      </p>
      <p class="para">
       後方参照の直後に他の数字が続くような置換 (replacement) パターンを
       使用する場合（すなわち、マッチしたパターンの直後に数字リテラルを置く
       場合）、後方参照を行うために通常の <em>\\1</em> 表記を
       使用することができません。例えば、<em>\\11</em>　は、
       後方参照 <em>\\1</em> の後にリテラル
       <em>1</em> が続くのか、後方参照 <em>\\11</em> で
       その後には何も続かないのかが不明のため、
       <span class="function"><strong>preg_replace()</strong></span> を混乱させる可能性があります。
       この場合、解決策は、<em>\${1}1</em> を使用することです。
       こうすることで、<em>1</em> はリテラルとなり、後方参照
       <em>$1</em> を明確に作成できます。
      </p>
      <p class="para">
       非推奨の <em>e</em> 修飾子を使用する際に、
       この関数は後方参照を置換する文字列のうちの特定の文字
       (具体的には <em>&#039;</em>、<em>&quot;</em>、
       <em>\</em> および NULL) をエスケープします。
       これは、後方参照をシングルクォートやダブルクォートを共用した場合
       (たとえば <em>&#039;strlen(\&#039;$1\&#039;)+strlen(&quot;$2&quot;)&#039;</em>)
       に構文エラーが発生しないようにするためのものです。
       PHP の <a href="language.types.string.html" class="link">文字列構文</a> を意識し、
       文字列がどのように解釈されるのかを正確に知っておくようにしましょう。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       検索・置換対象となる文字列もしくは文字列の配列
      </p>
      <p class="para">
       <code class="parameter">subject</code> が配列の場合、検索と置換は
       <code class="parameter">subject</code>
       の各要素に対して行われ、返り値も配列となります。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">limit</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">subject</code> 文字列において、各パターンによる
       置換を行う最大回数。デフォルトは
       <em>-1</em> (制限無し)。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">count</code></dt>

     <dd>

      <p class="para">
       この引数が指定されると、置換回数が渡されます。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.preg-replace-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <span class="function"><strong>preg_replace()</strong></span> は、
   <code class="parameter">subject</code> 引数が配列の場合は配列を、
   その他の場合は文字列を返します。
  </p>
  <p class="para">
   パターンがマッチした場合、〔置換が行われた〕新しい <code class="parameter">subject</code>
   を返します。マッチしなかった場合、<code class="parameter">subject</code>
   をそのまま返します。エラーが発生した場合、<strong><code>NULL</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.preg-replace-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   &quot;\e&quot; 修飾子を使うと、
   <strong><code>E_DEPRECATED</code></strong> レベルのエラーが発生します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.preg-replace-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.5.0</td>
       <td>
        <em>/e</em> 修飾子が非推奨になりました。かわりに
        <span class="function"><a href="function.preg-replace-callback.html" class="function">preg_replace_callback()</a></span> を使いましょう。
        セキュリティ上のリスクの関する詳細は
        <a href="reference.pcre.pattern.modifiers.html#reference.pcre.pattern.modifiers.eval" class="link">PREG_REPLACE_EVAL</a>
        のドキュメントを参照ください。
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        <code class="parameter">count</code> 引数が追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.preg-replace-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4907">
    <p><strong>例1 数字リテラルが後に続く後方参照</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'April&nbsp;15,&nbsp;2003'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pattern&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/(\w+)&nbsp;(\d+),&nbsp;(\d+)/i'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$replacement&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'${1}1,$3'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$pattern</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacement</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
April1,2003
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4908">
    <p><strong>例2 添字配列の使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$patterns&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/quick/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/brown/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/fox/'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$replacements&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'bear'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'black'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'slow'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
The bear black slow jumped over the lazy dog.
</pre></div>
    </div>
    <div class="example-contents"><p>
     pattern と replacement を ksort すると、所望のものが得られます。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />ksort</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">ksort</span><span style="color: #007700">(</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
The slow black bear jumped over the lazy dog.
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4909">
    <p><strong>例3 複数値の置換</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$patterns&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">'/(19|20)(\d{2})-(\d{1,2})-(\d{1,2})/'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/^\s*{(\w+)}\s*=/'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">'\3/\4/\1\2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'$\1&nbsp;='</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'{startDate}&nbsp;=&nbsp;1999-5-27'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
$startDate = 5/27/1999
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4910">
    <p><strong>例4 空白の削除</strong></p>
    <div class="example-contents"><p>
     この例は、文字列から余分な空白を取り除きます。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo&nbsp;&nbsp;&nbsp;o'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s\s+/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;will&nbsp;be&nbsp;'foo&nbsp;o'&nbsp;now<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4911">
    <p><strong>例5 <code class="parameter">count</code> 引数の使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'/\d/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/\s/'</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'*'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'xp&nbsp;4&nbsp;to'</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//3<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
xp***to
3
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.preg-replace-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    <code class="parameter">pattern</code> および <code class="parameter">replacement</code>
    を使用する際、配列の並び順に処理されます。添字は整数であっても、
    その並びは値の小さい順になっているとは<em class="emphasis">限りません</em>。
    ですから、配列の添字を使って、どの <code class="parameter">pattern</code>
    が、どの <code class="parameter">replacement</code> に置換されるかを指定しようとする場合は、
    <span class="function"><strong>preg_replace()</strong></span> をコールする前に、各配列に対し
    <span class="function"><a href="function.ksort.html" class="function">ksort()</a></span> を実行しておくべきです。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.preg-replace-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="pcre.pattern.html" class="link">PCRE のパターン</a></li>
    <li class="member"><span class="function"><a href="function.preg-filter.html" class="function" rel="rdfs-seeAlso">preg_filter()</a> - 正規表現による検索と置換を行う</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 正規表現によるマッチングを行う</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace-callback.html" class="function" rel="rdfs-seeAlso">preg_replace_callback()</a> - 正規表現検索を行い、コールバック関数を使用して置換を行う</span></li>
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - 正規表現で文字列を分割する</span></li>
    <li class="member"><span class="function"><a href="function.preg-last-error.html" class="function" rel="rdfs-seeAlso">preg_last_error()</a> - 直近の PCRE 正規表現処理のエラーコードを返す</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115520""></a>
  <div class="note">
   <strong class="user">eurosat7 at yahoo dot de</strong>
   <a href="#115520" class="date">08-Aug-2014 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to limit multiple occurences of any char in a sequence you might want to use this function.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">limit_char_repeat</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$maxrepeat</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(.)\\1{"</span><span class="keyword">.</span><span class="default">$maxrepeat</span><span class="keyword">.</span><span class="string">",}/ms"</span><span class="keyword">,</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'\1'</span><span class="keyword">,</span><span class="default">$maxrepeat</span><span class="keyword">),</span><span class="default">$string</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<span class="default">&lt;?php<br />
$string</span><span class="keyword">=</span><span class="string">"<br />
---------------------<br />
Heeeeeeeeeeeeeeeeeeeello Woooooooooooooooorld!!!!!!!!!!!!!!!!!!!!!!!!<br />
===============================================================================================================<br />
~~~~~~~~~~~~~~~~ ~ ~ ~<br />
"</span><span class="keyword">;<br />
echo </span><span class="default">limit_char_repeat</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
-----<br />
Heeeeello Wooooorld!!!!!<br />
=====<br />
~~~~~ ~ ~ ~</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115176""></a>
  <div class="note">
   <strong class="user">elliot dot greene at att dot net</strong>
   <a href="#115176" class="date">10-Jun-2014 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
preg_replace to only show alpha numeric characters<br />
<br />
$info = "The Development of code . <a href="http://www." rel="nofollow" target="_blank">http://www.</a>";<br />
<br />
$info = preg_replace("/[^a-zA-Z0-9]+/", "", $info);<br />
<br />
echo $info;<br />
<br />
OUTPUTS: TheDevelopmentofcodehttpwww<br />
<br />
This is a good workable code<br />
<a href="http://www.sioure.com" rel="nofollow" target="_blank">http://www.sioure.com</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115032""></a>
  <div class="note">
   <strong class="user">dhgouveia at gmail dot com</strong>
   <a href="#115032" class="date">15-May-2014 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to replace only the content of specific div using the ID you can do this :<br />
<br />
<span class="default">&lt;?php<br />
$id </span><span class="keyword">= </span><span class="string">"my-id"</span><span class="keyword">;<br />
</span><span class="default">$content </span><span class="keyword">= </span><span class="string">'&lt;div id="my-id"&gt;Hello World&lt;/div&gt;&lt;div&nbsp; id="other-id"&gt; My World&lt;/div&gt;'</span><span class="keyword">;<br />
</span><span class="default">$replacement </span><span class="keyword">= </span><span class="string">"Hello Planet"</span><span class="keyword">;<br />
<br />
</span><span class="default">$result&nbsp; </span><span class="keyword">=&nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;div.*?id=\"'</span><span class="keyword">.</span><span class="default">$id</span><span class="keyword">.</span><span class="string">'\"[^&gt;]*&gt;)(.*?)(&lt;\/div&gt;)/i'</span><span class="keyword">, </span><span class="string">"$1</span><span class="keyword">{</span><span class="default">$replacement</span><span class="keyword">}</span><span class="string">$3"</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">);<br />
&nbsp;&nbsp; <br />
echo </span><span class="default">$result</span><span class="keyword">:<br />
</span><span class="default">?&gt;<br />
</span><br />
should print : <br />
&lt;div id="my-id"&gt;Hello Planet&lt;/div&gt;&lt;div&nbsp; id="other-id"&gt; My World&lt;/div&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113897""></a>
  <div class="note">
   <strong class="user">reigyx_x at yahoo dot co dot id</strong>
   <a href="#113897" class="date">15-Dec-2013 09:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hy php.net<br />
how to script preg replace for this code<br />
&gt;:( <br />
i want to use this smiley, buit dont know how to regex it..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112400""></a>
  <div class="note">
   <strong class="user">spamthishard at wtriple dot com</strong>
   <a href="#112400" class="date">12-Jun-2013 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to replace only the n-th occurrence of $pattern, you can use this function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">preg_replace_nth</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function(</span><span class="default">$found</span><span class="keyword">) use (&amp;</span><span class="default">$pattern</span><span class="keyword">, &amp;</span><span class="default">$replacement</span><span class="keyword">, &amp;</span><span class="default">$nth</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$nth</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$nth</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }, </span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$nth&nbsp; </span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">preg_replace_nth</span><span class="keyword">(</span><span class="string">"/(\w+)\|/"</span><span class="keyword">, </span><span class="string">'${1} is the 4th|'</span><span class="keyword">, </span><span class="string">"|aa|b|cc|dd|e|ff|gg|kkk|"</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
this outputs |aa|b|cc|dd is the 4th|e|ff|gg|kkk| <br />
backreferences are accepted in $replacement</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112363""></a>
  <div class="note">
   <strong class="user">jas at rephunter dot net</strong>
   <a href="#112363" class="date">07-Jun-2013 02:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is recommended that str_replace should be used instead of preg_replace when regex is not needed. In particular, at <a href="http://php.net/manual/en/function.str-replace.php it says " rel="nofollow" target="_blank">http://php.net/manual/en/function.str-replace.php it says </a>"If you don't need fancy replacing rules (like regular expressions), you should always use this function instead of preg_replace()."<br />
<br />
While this is usually true, I have found a significant exception to this guideline and benchmarked to show that str_replace is in fact slower in the case when the pattern to be replaced is an array. In particular, when the number of elements in the pattern gets to be around 7, then the preg_replace is faster. Of course this would depend on the specifics of the regex.<br />
<br />
In my case I had pattern arrays with about 40 elements. This becomes far slower with str_replace when there is a simple regex that will do the job.<br />
<br />
Below is the benchmark with some examples of arrays for patterns and an equivalent regex.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Title:&nbsp; &nbsp; Test Harness<br />
&nbsp;* Author:&nbsp; &nbsp; **********<br />
&nbsp;* Date:&nbsp; &nbsp; 27-May-13<br />
&nbsp;* Project:&nbsp; &nbsp; *********<br />
&nbsp;* Purpose:&nbsp; &nbsp; Test timer comparing str_replace and preg_replace<br />
&nbsp;*<br />
&nbsp;* Results:<br />
&nbsp;*<br />
&nbsp;* 1. preg_replace is a lot faster!<br />
&nbsp;* empty loop takes 0.12380504608154 microseconds.<br />
&nbsp;* Array size: 34<br />
&nbsp;*&nbsp; *** str_replace:&nbsp; 6.0163598060608 microseconds.<br />
&nbsp;*&nbsp; *** preg_replace: 2.1114869117737 microseconds.<br />
&nbsp;*<br />
&nbsp;* 2. str_replace is faster:<br />
&nbsp;* empty loop takes 0.11837291717529 microseconds.<br />
&nbsp;* Array size: 3<br />
&nbsp;*&nbsp; *** str_replace:&nbsp; 1.7525472640991 microseconds.<br />
&nbsp;*&nbsp; *** preg_replace: 2.0717389583588 microseconds.<br />
&nbsp;*<br />
&nbsp;* 3. preg_replace is faster:<br />
&nbsp;* empty loop takes 0.11982989311218 microseconds.<br />
&nbsp;* Array size: 10<br />
&nbsp;*&nbsp; *** str_replace:&nbsp; 2.6692891120911 microseconds.<br />
&nbsp;*&nbsp; *** preg_replace: 2.2716360092163 microseconds.<br />
&nbsp;*<br />
&nbsp;* 3. about the same: 6 element array is breakeven point to switch to preg_replace<br />
&nbsp;* empty loop takes 0.12036299705505 microseconds.<br />
&nbsp;* Array size: 6<br />
&nbsp;*&nbsp; *** str_replace:&nbsp; 2.0874700546265 microseconds.<br />
&nbsp;*&nbsp; *** preg_replace: 2.1840009689331 microseconds.<br />
&nbsp;*<br />
&nbsp;*/<br />
<br />
</span><span class="default">$iterations </span><span class="keyword">= </span><span class="default">1000000</span><span class="keyword">;<br />
</span><span class="default">$str1 </span><span class="keyword">= </span><span class="string">'this is a - test'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// empty loop<br />
</span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
}<br />
</span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$empty_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br />
echo </span><span class="string">"empty loop takes </span><span class="default">$empty_loop_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// test1 loop<br />
// alternate array variations<br />
//$aStr = array('\r\n','\r','\n','%','.','(',')',':',';','&amp;',"\x07","\x15",'!','\'','"',<br />
</span><span class="string">'#'</span><span class="keyword">,</span><span class="string">'^'</span><span class="keyword">,</span><span class="string">'*'</span><span class="keyword">,</span><span class="string">'_'</span><span class="keyword">,</span><span class="string">'='</span><span class="keyword">,</span><span class="string">'+'</span><span class="keyword">,</span><span class="string">'\\'</span><span class="keyword">,</span><span class="string">'?'</span><span class="keyword">,</span><span class="string">'|'</span><span class="keyword">,</span><span class="string">'&lt;'</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">,</span><span class="string">'{'</span><span class="keyword">,</span><span class="string">'}'</span><span class="keyword">,</span><span class="string">'''</span><span class="keyword">,</span><span class="string">'`'</span><span class="keyword">,</span><span class="string">'~'</span><span class="keyword">,</span><span class="string">'"'</span><span class="keyword">,</span><span class="string">'?'</span><span class="keyword">,</span><span class="string">'$'</span><span class="keyword">);<br />
</span><span class="comment">//$aStr = array('\r\n','\r','\n');<br />
//$aStr = array('0','1','2','3','4','5','6','7','8','9');<br />
</span><span class="default">$aStr </span><span class="keyword">= array(</span><span class="string">'0'</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">,</span><span class="string">'6'</span><span class="keyword">);<br />
</span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$aStr</span><span class="keyword">);<br />
echo </span><span class="string">'Array size: ' </span><span class="keyword">. </span><span class="default">$cnt </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$aStr</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$str1</span><span class="keyword">);<br />
}<br />
</span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$test1_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br />
<br />
echo </span><span class="string">' *** str_replace:&nbsp; '</span><span class="keyword">;<br />
</span><span class="default">$test_time </span><span class="keyword">= (</span><span class="default">$test1_loop_time </span><span class="keyword">- </span><span class="default">$empty_loop_time</span><span class="keyword">) * </span><span class="default">1000000 </span><span class="keyword">/ </span><span class="default">$iterations</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$test_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// test2 loop<br />
</span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[^a-zA-Z\s]/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$str1</span><span class="keyword">);<br />
}<br />
</span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">$test2_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br />
<br />
echo </span><span class="string">' *** preg_replace: '</span><span class="keyword">;<br />
</span><span class="default">$test_time </span><span class="keyword">= (</span><span class="default">$test2_loop_time </span><span class="keyword">- </span><span class="default">$empty_loop_time</span><span class="keyword">) * </span><span class="default">1000000 </span><span class="keyword">/ </span><span class="default">$iterations</span><span class="keyword">;<br />
echo </span><span class="string">"</span><span class="default">$test_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112203""></a>
  <div class="note">
   <strong class="user">Dustin</strong>
   <a href="#112203" class="date">16-May-2013 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Matching substrings where the match can exist at the end of the string was non-intuitive to me.<br />
<br />
I found this because:<br />
strtotime() interprets 'mon' as 'Monday', but Postgres uses interval types that return short names by default, e.g. interval '1 month' returns as '1 mon'.<br />
<br />
I used something like this:<br />
<br />
$str = "mon month monday Mon Monday Month MONTH MON";<br />
$strMonth = preg_replace('~(mon)([^\w]|$)~i', '$1th$2', $str);<br />
echo "$str\n$strMonth\n";<br />
<br />
//to output:<br />
mon month monday Mon Monday Month MONTH MON<br />
month month monday Month Monday Month MONTH MONth</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111695""></a>
  <div class="note">
   <strong class="user">nik at rolls dot cc</strong>
   <a href="#111695" class="date">18-Mar-2013 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To split Pascal/CamelCase into Title Case (for example, converting descriptive class names for use in human-readable frontends), you can use the below function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">expandCamelCase</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(?&lt;!^)([A-Z][a-z]|(?&lt;=[a-z])[^a-z]|(?&lt;=[A-Z])[0-9_])/'</span><span class="keyword">, </span><span class="string">' $1'</span><span class="keyword">, </span><span class="default">$source</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Before:<br />
&nbsp; ExpandCamelCaseAPIDescriptorPHP5_3_4Version3_21Beta<br />
After:<br />
&nbsp; Expand Camel Case API Descriptor PHP 5_3_4 Version 3_21 Beta</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110511""></a>
  <div class="note">
   <strong class="user">cincodenada at gmail dot dot dot com</strong>
   <a href="#110511" class="date">31-Oct-2012 07:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There seems to be some confusion over how greediness works.&nbsp; For those familiar with Regular Expressions in other languages, particularly Perl: it works like you would expect, and as documented.&nbsp; Greedy by default, un-greedy if you follow a quantifier with a question mark.<br />
<br />
There is a PHP/PCRE-specific U pattern modifier that flips the greediness, so that quantifiers are by default un-greedy, and become greedy if you follow the quantifier with a question mark: <a href="http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php</a><br />
<br />
To make things clear, a series of examples:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$preview </span><span class="keyword">= </span><span class="string">"a bunch of stuff &lt;code&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end"</span><span class="keyword">; <br />
<br />
</span><span class="default">$preview_default </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*)&lt;\/code&gt;/is'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br />
</span><span class="default">$preview_manually_ungreedy </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*?)&lt;\/code&gt;/is'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br />
<br />
</span><span class="default">$preview_U_default </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*)&lt;\/code&gt;/isU'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br />
</span><span class="default">$preview_U_manually_greedy </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*?)&lt;\/code&gt;/isU'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"Default, no ?: </span><span class="default">$preview_default</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"Default, with ?: </span><span class="default">$preview_manually_ungreedy</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"U flag, no ?: </span><span class="default">$preview_U_default</span><span class="string">\n"</span><span class="keyword">;<br />
echo </span><span class="string">"U flag, with ?: </span><span class="default">$preview_U_manually_greedy</span><span class="string">\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Results in this:<br />
<br />
Default, no ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end<br />
Default, with ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code class="prettyprint"&gt;with a second code block&lt;/code&gt; then extra at the end<br />
U flag, no ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code class="prettyprint"&gt;with a second code block&lt;/code&gt; then extra at the end<br />
U flag, with ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end<br />
<br />
As expected: greedy by default, ? inverts it to ungreedy.&nbsp; With the U flag, un-greedy by default, ? makes it greedy.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110077""></a>
  <div class="note">
   <strong class="user">henke at henke37 dot cjb dot net</strong>
   <a href="#110077" class="date">17-Sep-2012 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning: not all strings are from a regular language, some are from context free grammars.<br />
<br />
Here is a pair of strings that are impossible to correctly parse with regular expressions:<br />
<br />
a*(b+(c*d)-e)/(f-(g*h)+i)-j<br />
<br />
a[i]b[i]c[/i]d[/i]e[i]f[i]g[/i]h[/i]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109363""></a>
  <div class="note">
   <strong class="user">zzapper</strong>
   <a href="#109363" class="date">11-Jul-2012 02:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
yes you can use different pattern delimiters useful when working on an Url
<br />

<br />
<span class="default">&lt;?php
<br />
$logo</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\\.\\./images#'</span><span class="keyword">,</span><span class="string">'/images'</span><span class="keyword">,</span><span class="default">$logo</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109134""></a>
  <div class="note">
   <strong class="user">webmaster at antoinebouchard dot net</strong>
   <a href="#109134" class="date">22-Jun-2012 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It may seem useless, but the font tag in Internet Explorer won't recognize compressed hexa values. This is a simple function to uncompress hexa values in the font tag<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">colorfix</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/"#([a-f0-9])([a-f0-9])([a-f0-9])"/i'</span><span class="keyword">, </span><span class="string">'"#$1$1$2$2$3$3"'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107491""></a>
  <div class="note">
   <strong class="user">Ray dot Paseur at SometimesUsesGmail dot com</strong>
   <a href="#107491" class="date">14-Feb-2012 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please see Example #4 Strip whitespace.&nbsp; This works as designed, but if you are using Windows, it may not work as expected.&nbsp; The potential "gotcha" is the CR/LF line endings.&nbsp; On a Unix system, where there is only a single character line ending, that regex pattern will preserve line endings.&nbsp; On Windows, it may strip line endings.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107112""></a>
  <div class="note">
   <strong class="user">hvishnu999 at gmail dot com</strong>
   <a href="#107112" class="date">08-Jan-2012 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To covert a string to SEO friendly, do this:
<br />

<br />
<span class="default">&lt;?php
<br />
$realname </span><span class="keyword">= </span><span class="string">"This is the string to be made SEO friendly!"
<br />

<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\%/'</span><span class="keyword">,</span><span class="string">' percentage'</span><span class="keyword">,</span><span class="default">$realname</span><span class="keyword">);
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\@/'</span><span class="keyword">,</span><span class="string">' at '</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\&amp;/'</span><span class="keyword">,</span><span class="string">' and '</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s[\s]+/'</span><span class="keyword">,</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Strip off multiple spaces
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[\s\W]+/'</span><span class="keyword">,</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Strip off spaces and non-alpha-numeric
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/^[\-]+/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">); </span><span class="comment">// Strip off the starting hyphens
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[\-]+$/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">); </span><span class="comment">// // Strip off the ending hyphens
<br />
</span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$seoname</span><span class="keyword">);
<br />

<br />
echo </span><span class="default">$seoname</span><span class="keyword">;
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will print: this-is-the-string-to-be-made-seo-friendly</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107046""></a>
  <div class="note">
   <strong class="user">support ~ at ~ mbnad ~ dot ~ com</strong>
   <a href="#107046" class="date">03-Jan-2012 02:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wrong number of letters in words and how solve this problem and also remove extra spaces in a row:<br />
<br />
<span class="default">&lt;?php<br />
$message_body </span><span class="keyword">= </span><span class="string">'HHHHHEEEEELLLLLOOOOO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; IAM COOOOOOOOOOOOOOOOOOOL&nbsp; &nbsp; &nbsp; !!!!!!!!!!'</span><span class="keyword">;<br />
echo </span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$message_body</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$message_body </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~(.?)\1{3,}~'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$message_body</span><span class="keyword">);<br />
</span><span class="default">$message_body </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~\s+~'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$message_body</span><span class="keyword">));<br />
echo </span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$message_body</span><span class="keyword">.</span><span class="string">"\n\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106981""></a>
  <div class="note">
   <strong class="user">denis_truffaut a t hotmail d o t com</strong>
   <a href="#106981" class="date">24-Dec-2011 02:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to catch characters, as well european, russian, chinese, japanese, korean of whatever, just :<br />
- use mb_internal_encoding('UTF-8');<br />
- use preg_replace('`...`u', '...', $string) with the u (unicode) modifier<br />
<br />
For further information, the complete list of preg_* modifiers could be found at :<br />
<a href="http://php.net/manual/en/reference.pcre.pattern.modifiers.php" rel="nofollow" target="_blank">http://php.net/manual/en/reference.pcre.pattern.modifiers.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106263""></a>
  <div class="note">
   <strong class="user">akarmenia at gmail dot com</strong>
   <a href="#106263" class="date">23-Oct-2011 08:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's note: in this case it would be wise to rely on the preg_quote() function instead which was added for this specific purpose]
<br />

<br />
If your replacement string has a dollar sign or a backslash. it may turn into a backreference accidentally! This will fix it.
<br />

<br />
I want to replace 'text' with '$12345' but this becomes a backreference to $12 (which doesn't exist) and then it prints the remaining '34'. The function down below will return a string that escapes the backreferences.
<br />

<br />
OUTPUT:
<br />
string(8) "some 345"
<br />
string(11) "some \12345"
<br />
string(8) "some 345"
<br />
string(11) "some $12345"
<br />

<br />
<span class="default">&lt;?php
<br />

<br />
$a </span><span class="keyword">= </span><span class="string">'some text'</span><span class="keyword">;
<br />

<br />
</span><span class="comment">// Either of these will backreference and fail
<br />
</span><span class="default">$b1 </span><span class="keyword">= </span><span class="string">'\12345'</span><span class="keyword">; </span><span class="comment">// Should be '\\12345' to avoid backreference
<br />
</span><span class="default">$b2 </span><span class="keyword">= </span><span class="string">'$12345'</span><span class="keyword">; </span><span class="comment">// Should be '\$12345' to avoid backreference
<br />

<br />
</span><span class="default">$d </span><span class="keyword">= array(</span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$b2</span><span class="keyword">);
<br />

<br />
foreach (</span><span class="default">$d </span><span class="keyword">as </span><span class="default">$b</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result1 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(text)#'</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Fails
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result1</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result2 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(text)#'</span><span class="keyword">, </span><span class="default">preg_escape_back</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Succeeds
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result2</span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="comment">// Escape backreferences from string for use with regex
<br />
</span><span class="keyword">function </span><span class="default">preg_escape_back</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Replace $ with \$ and \ with \\
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(?&lt;!\\\\)(\\$|\\\\)#'</span><span class="keyword">, </span><span class="string">'\\\\$1'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br />
}
<br />

<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105956""></a>
  <div class="note">
   <strong class="user">randall dot reynolds at rightnow dot com</strong>
   <a href="#105956" class="date">28-Sep-2011 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The instructions say, use \\\\ (four backslashes) to represent a backslash.&nbsp; You can shorthand this and use \\\ (three backslashes) to represent a backslash, because of the way the parsers read it.<br />
<br />
It appears the double escaping is required because the string is parsed twice, once by PHP and once by the regular expression generator. Thus it is expected that the PHP parser turns both instances above into \\ (two backslashes) for the PCRE parser.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105943""></a>
  <div class="note">
   <strong class="user">erik dot stetina at gmail dot com</strong>
   <a href="#105943" class="date">27-Sep-2011 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
simple function to remove comments from string<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">remove_comments</span><span class="keyword">( &amp; </span><span class="default">$string </span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"%(#|;|(//)).*%"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"%/\*(?:(?!\*/).)*\*/%s"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">); </span><span class="comment">// google for negative lookahead<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$string</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
USAGE:<br />
<span class="default">&lt;?php<br />
$config </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"config.cfg"</span><span class="keyword">);<br />
print </span><span class="string">"before:"</span><span class="keyword">.</span><span class="default">$config</span><span class="keyword">;<br />
</span><span class="default">remove_comments</span><span class="keyword">(</span><span class="default">$config</span><span class="keyword">);<br />
print </span><span class="string">"after:"</span><span class="keyword">.</span><span class="default">$config</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
OUTPUT:<br />
before:<br />
/*<br />
&nbsp;*&nbsp; this is config file<br />
&nbsp;*/<br />
; logdir<br />
LOGDIR ./log/<br />
// logfile<br />
LOGFILE main.log<br />
# loglevel<br />
LOGLEVEL 3<br />
after:<br />
<br />
LOGDIR ./log/<br />
<br />
LOGFILE main.log<br />
<br />
LOGLEVEL 3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105490""></a>
  <div class="note">
   <strong class="user">kosalasl at gmail dot com</strong>
   <a href="#105490" class="date">22-Aug-2011 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote some useful function to display date format based on date function particular string. preg_replace function really help me to write this tiny code
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">mysql2formatDate</span><span class="keyword">(</span><span class="default">$strn</span><span class="keyword">,</span><span class="default">$outformat</span><span class="keyword">=</span><span class="string">'n/j/Y'</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\d{4})-(\d{2})-(\d{2})/e"</span><span class="keyword">,</span><span class="string">"Date('</span><span class="default">$outformat</span><span class="string">',strtotime('$0'))"</span><span class="keyword">,</span><span class="default">$strn</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105122""></a>
  <div class="note">
   <strong class="user">timitheenchanter</strong>
   <a href="#105122" class="date">28-Jul-2011 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have issues where preg_replace returns an empty string, please take a look at these two ini parameters:<br />
<br />
pcre.backtrack_limit<br />
pcre.recursion_limit<br />
<br />
The default is set to 100K.&nbsp; If your buffer is larger than this, look to increase these two values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104965""></a>
  <div class="note">
   <strong class="user">sreekanth at outsource-online dot net</strong>
   <a href="#104965" class="date">19-Jul-2011 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if your intention to code and decode mod_rewrite urls and handle it with php and mysql ,this should work<br />
<br />
to convert to url<br />
$url = preg_replace('/[^A-Za-z0-9_-]+/', '-', $string);<br />
<br />
And to check in mysql with the url value,use the same expression discounting '-'.<br />
first replace the url value&nbsp; with php using preg_replace&nbsp; and use with mysql REGEXP<br />
<br />
$sql = "select * from table where fieldname_to_check REGEXP '".preg_replace("/-+/",'[^A-Za-z0-9_]+',$url)."'"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104482""></a>
  <div class="note">
   <strong class="user">anyvie at devlibre dot fr</strong>
   <a href="#104482" class="date">17-Jun-2011 11:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A variable can handle a huge quantity of data but preg_replace can't.<br />
<br />
Example :<br />
<span class="default">&lt;?php<br />
$url </span><span class="keyword">= </span><span class="string">"ANY URL WITH LOTS OF DATA"</span><span class="keyword">;<br />
<br />
</span><span class="comment">// We get all the data into $data<br />
</span><span class="default">$data </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />
<br />
</span><span class="comment">// We just want to keep the content of &lt;head&gt;<br />
</span><span class="default">$head </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#(.*)&lt;head&gt;(.*?)&lt;/head&gt;(.*)#is"</span><span class="keyword">, </span><span class="string">'$2'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$head can have the desired content, or be empty, depends on the length of $data.<br />
<br />
For this application, just add :<br />
$data = substr($data, 0, 4096);<br />
before using preg_replace, and it will work fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104318""></a>
  <div class="note">
   <strong class="user">someuser at dot dot com</strong>
   <a href="#104318" class="date">09-Jun-2011 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Replacement of line numbers, with replacement limit per line.<br />
<br />
Solution that worked for me.<br />
I have a file with tasks listed each starting from number, and only starting number should be removed because forth going text has piles of numbers to be omitted.<br />
<br />
56 Patient A of 46 years suffering ... ...<br />
57 Newborn of 26 weeks was ...<br />
58 Jane, having age 18 years recollects onsets of ...<br />
...<br />
587 Patient of 70 years ...<br />
<br />
etc.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Array obtained from file&nbsp; &nbsp; <br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Decompile array with foreach loop<br />
</span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//&nbsp; &nbsp; Take away numbers 100-999<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; Starting from biggest <br />
&nbsp;&nbsp;&nbsp; //<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; %&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Delimiter<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; ^&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Make match from beginning of line<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; [0-9]&nbsp; &nbsp; &nbsp; &nbsp; Range of numbers<br />
&nbsp;&nbsp;&nbsp; //&nbsp; &nbsp; {3}&nbsp; &nbsp; &nbsp; &nbsp; Multiplication of digit range (For tree digit numbers)<br />
&nbsp;&nbsp;&nbsp; //<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]{3}%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Re-assing to value its modified copy<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]{3}%'</span><span class="keyword">, </span><span class="string">'-HERE WAS XXX NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Take away numbers 10-99<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]{2}%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]{2}%'</span><span class="keyword">, </span><span class="string">'-HERE WAS XX NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Take away numbers 0-9<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]%'</span><span class="keyword">, </span><span class="string">'-HERE WAS X NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Build array back<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[] = array(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103985""></a>
  <div class="note">
   <strong class="user">craiga at craiga dot id dot au</strong>
   <a href="#103985" class="date">16-May-2011 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If there's a chance your replacement text contains any strings such as "$0.95", you'll need to escape those $n backreferences:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">escape_backreference</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\$(\d)/'</span><span class="keyword">, </span><span class="string">'\\\$$1'</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102589""></a>
  <div class="note">
   <strong class="user">me at perochak dot com</strong>
   <a href="#102589" class="date">23-Feb-2011 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you would like to remove a tag along with the text inside it then use the following code.
<br />

<br />
<span class="default">&lt;?php
<br />
preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;tag&gt;.+?)+(&lt;\/tag&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
example
<br />
<span class="default">&lt;?php $string</span><span class="keyword">=</span><span class="string">'&lt;span class="normalprice"&gt;55 PKR&lt;/span&gt;'</span><span class="keyword">; </span><span class="default">?&gt;
<br />
</span>
<br />
<span class="default">&lt;?php
<br />
$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;span class="normalprice"&gt;.+?)+(&lt;\/span&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will results a null or empty string.
<br />

<br />
<span class="default">&lt;?php
<br />
$string</span><span class="keyword">=</span><span class="string">'My String &lt;span class="normalprice"&gt;55 PKR&lt;/span&gt;'</span><span class="keyword">;
<br />

<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;span class="normalprice"&gt;.+?)+(&lt;\/span&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This will results a " My String"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101938""></a>
  <div class="note">
   <strong class="user">nospam at probackup dot nl</strong>
   <a href="#101938" class="date">19-Jan-2011 02:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning: a common made mistake in trying to remove all characters except numbers and letters from a string, is to use code with a regex similar to preg_replace('[^A-Za-z0-9_]', '', ...). The output goes in an unexpected direction in case your input contains two double quotes.<br />
<br />
echo preg_replace('[^A-Za-z0-9_]', '', 'D"usseldorfer H"auptstrasse')<br />
<br />
D"usseldorfer H"auptstrasse<br />
<br />
It is important to not forget a leading an trailing forward slash in the regex: <br />
<br />
echo preg_replace('/[^A-Za-z0-9_]/', '', 'D"usseldorfer H"auptstrasse')<br />
<br />
Dusseldorfer Hauptstrasse<br />
<br />
PS An alternative is to use preg_replace('/\W/', '', $t) for keeping all alpha numeric characters including underscores.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101296""></a>
  <div class="note">
   <strong class="user">ude dot mpco at wotsrabt dot maps-on</strong>
   <a href="#101296" class="date">08-Dec-2010 07:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find it useful to output HTML form names to the user from time to time while going through the $_GET or $_POST on a user's submission and output keys of the GET or POST array... the only problem being in the name attribute I follow common programming guidelines and have names like the following: eventDate, eventTime, userEmail, etc. Not great to just output to the user-- so I came up with this function. It just adds a space before any uppercase letter in the string.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">caseSwitchToSpaces</span><span class="keyword">( </span><span class="default">$stringVariableName </span><span class="keyword">)
<br />
{
<br />

<br />
</span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/([A-Z])/'</span><span class="keyword">;
<br />
</span><span class="default">$replacement </span><span class="keyword">= </span><span class="string">' ${1}'</span><span class="keyword">;
<br />

<br />
return </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$stringVariableName </span><span class="keyword">);
<br />
}
<br />

<br />
</span><span class="comment">//ex. 
<br />
</span><span class="keyword">echo( </span><span class="default">caseSwitchToSpaces</span><span class="keyword">( </span><span class="string">"helloWorld" </span><span class="keyword">) );
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
would output:
<br />

<br />
"hello World"
<br />

<br />
You could also do title-style casing to it if desired so the first word isn't lowercase.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101236""></a>
  <div class="note">
   <strong class="user">Terminux (dot) anonymous at gmail</strong>
   <a href="#101236" class="date">04-Dec-2010 06:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function will strip all the HTML-like content in a string.<br />
I know you can find a lot of similar content on the web, but this one is simple, fast and robust. Don't simply use the built-in functions like strip_tags(), they dont work so good.<br />
<br />
Careful however, this is not a correct validation of a string ; you should use additional functions like mysql_real_escape_string and filter_var, as well as custom tests before putting a submission into your database.<br />
<br />
<span class="default">&lt;?php <br />
<br />
$html </span><span class="keyword">= &lt;&lt;&lt;END<br />
</span><span class="string">&lt;div id="function.preg-split" class="refentry"&gt; Bonjour1 \t<br />
&lt;div class="refnamediv"&gt; Bonjour2 \t<br />
&lt;h1 class="refname"&gt;Bonjour3 \t&lt;/h1&gt;<br />
&lt;h1 class="""&gt;Bonjour4 \t&lt;/h1&gt;<br />
&lt;h1 class="*%1"&gt;Bonjour5 \t&lt;/h1&gt;<br />
&lt;body&gt;Bonjour6 \t&lt;//body&gt;&gt;<br />
&lt;/ body&gt;Bonjour7 \t&lt;////&nbsp; &nbsp; &nbsp; &nbsp; body&gt;&gt;<br />
&lt;<br />
a href="image.php" alt="trans" /&nbsp; &nbsp; &nbsp; &nbsp; &gt;<br />
some leftover text...<br />
&nbsp;&nbsp; &nbsp; &lt; DIV class=noCompliant style = "text-align:left;" &gt;<br />
... and some other ...<br />
&lt; dIv &gt; &lt; empty&gt;&nbsp; &lt;/ empty&gt;<br />
&nbsp; &lt;p&gt; This is yet another text &lt;br&nbsp; &gt;<br />
&nbsp;&nbsp; &nbsp; that wasn't &lt;b&gt;compliant&lt;/b&gt; too... &lt;br&nbsp;&nbsp; /&gt;<br />
&nbsp;&nbsp; &nbsp; &lt;/p&gt;<br />
&nbsp;&lt;div class="noClass" &gt; this one is better but we don't care anyway &lt;/div &gt;&lt;P&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;input&nbsp;&nbsp; type= "text"&nbsp; name ='my "name' value&nbsp; = "nothin really." readonly&gt;<br />
end of paragraph &lt;/p&gt; &lt;/Div&gt;&nbsp;&nbsp; &lt;/div&gt;&nbsp;&nbsp; some trailing text <br />
</span><span class="keyword">END;<br />
<br />
</span><span class="comment">// This echoes correctly all the text that is not inside HTML tags<br />
</span><span class="default">$html_reg </span><span class="keyword">= </span><span class="string">'/&lt;+\s*\/*\s*([A-Z][A-Z0-9]*)\b[^&gt;]*\/*\s*&gt;+/i'</span><span class="keyword">;<br />
echo </span><span class="default">htmlentities</span><span class="keyword">( </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$html_reg</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$html </span><span class="keyword">) );<br />
<br />
</span><span class="comment">// This extracts only a small portion of the text<br />
</span><span class="keyword">echo </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96649""></a>
  <div class="note">
   <strong class="user">sergei dot garrison at gmail dot com</strong>
   <a href="#96649" class="date">09-Mar-2010 10:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to add simple rich text functionality to HTML input fields, preg_replace can be quite handy.<br />
<br />
For example, if you want users to be able to bold text by typing *text* or italicize it by typing _text_, you can use the following function.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">encode</span><span class="keyword">(&amp;</span><span class="default">$text</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\*([^\*]+)\*/'</span><span class="keyword">, </span><span class="string">'&lt;b&gt;\1&lt;/b&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/_([^_]+)_/'</span><span class="keyword">, </span><span class="string">'&lt;i&gt;\1&lt;/i&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This works for nested tags, too, although it will not fix nesting mistakes.<br />
<br />
To make this function more efficient, you could put the delimiters (* and _, in this case) and their HTML tag equivalents in an array and loop through them.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96586""></a>
  <div class="note">
   <strong class="user">hello at weblap dot ro</strong>
   <a href="#96586" class="date">06-Mar-2010 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Post slug generator, for creating clean urls from titles.
<br />
It works with many languages.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">remove_accent</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)
<br />
{
<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'AE'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'ae'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'IJ'</span><span class="keyword">, </span><span class="string">'ij'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'j'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'k'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'OE'</span><span class="keyword">, </span><span class="string">'oe'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'f'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'AE'</span><span class="keyword">, </span><span class="string">'ae'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">);
<br />
&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);
<br />
}
<br />

<br />
function </span><span class="default">post_slug</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)
<br />
{
<br />
&nbsp; return </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">'/[^a-zA-Z0-9 -]/'</span><span class="keyword">, </span><span class="string">'/[ -]+/'</span><span class="keyword">, </span><span class="string">'/^-|-$/'</span><span class="keyword">), 
<br />
&nbsp; array(</span><span class="string">''</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">), </span><span class="default">remove_accent</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Example: post_slug(' -Lo#&amp;@rem&nbsp; IPSUM //dolor-/sit - amet-/-consectetur! 12 -- ')
<br />
will output: lorem-ipsum-dolor-sit-amet-consectetur-12</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96455""></a>
  <div class="note">
   <strong class="user">roscoe-p-coltrane</strong>
   <a href="#96455" class="date">28-Feb-2010 07:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Reading arguments against variables in CSS got me to thinking. <br />
<br />
Process your CSS files in a fashion similar to the following. This particular routine is certainly not the most efficient way, but is what I came up with on the spur of the moment. The prefix token is entirely arbitrary - everything between the leading colon and terminating semicolon is the target. In this way, default values can be put in place, and the constant identifiers simply left as comments, should the stylesheet be used without processing; this would also inhibit your editor from emitting errors about your odd syntax. The declaration pattern at the top assumes something like this:<br />
<br />
/*@css_const<br />
&nbsp;[<br />
&nbsp;&nbsp; &nbsp; bgc_a=#ccccee,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; fc_a=#000099,<br />
&nbsp;&nbsp; &nbsp; bgc_b=#5555cc,<br />
&nbsp;&nbsp; &nbsp; bgc_c=#eeeeff,<br />
&nbsp;&nbsp; &nbsp; bgc_d=#599fee<br />
&nbsp;]<br />
*/<br />
<br />
...within the target CSS file.<br />
<br />
Usage like so:<br />
<br />
.Element {<br />
&nbsp;&nbsp; &nbsp; font-size:10pt;<br />
&nbsp;&nbsp; &nbsp; color:#000/*fc_a*/;<br />
&nbsp;&nbsp; &nbsp; background-color:#fff/*bgc_a*/;<br />
}<br />
<br />
And then...<br />
<br />
<span class="default">&lt;?php<br />
$dec_pat </span><span class="keyword">= </span><span class="string">'/^\/\*\@css_const\s+\[(.*)\]\s+\*\//Ums'</span><span class="keyword">;<br />
</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$dec_pat</span><span class="keyword">,</span><span class="default">$css</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">);<br />
</span><span class="default">$lhs </span><span class="keyword">= array();<br />
</span><span class="default">$rhs </span><span class="keyword">= array();<br />
foreach(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as &amp;</span><span class="default">$p</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="default">$p</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$p </span><span class="keyword">as &amp;</span><span class="default">$q</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$q</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lhs</span><span class="keyword">[] = </span><span class="string">'/(\w+\:).*\/\*' </span><span class="keyword">. </span><span class="default">$k </span><span class="keyword">. </span><span class="string">'\*\/;$/Um'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rhs</span><span class="keyword">[] = </span><span class="string">'\1' </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">';'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">$css </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$lhs</span><span class="keyword">,</span><span class="default">$rhs</span><span class="keyword">,</span><span class="default">$css</span><span class="keyword">);<br />
</span><span class="comment">// spit it out or return it; whatever<br />
</span><span class="default">?&gt;<br />
</span><br />
...resulting, of course, in:<br />
<br />
.Element {<br />
&nbsp;&nbsp; &nbsp; font-size:10pt;<br />
&nbsp;&nbsp; &nbsp; color:#000099;<br />
&nbsp;&nbsp; &nbsp; background-color:#ccccee;<br />
}<br />
<br />
Again, efficiency was not the immediate goal, so please don't slay me...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89471""></a>
  <div class="note">
   <strong class="user">arie dot benichou at gmail dot com</strong>
   <a href="#89471" class="date">09-Mar-2009 09:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//Be carefull with utf-8, even with unicode and utf-8 support enabled, a pretty odd bug occurs depending on your operating system<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"Hi, my name is Arie!&lt;br /&gt;"</span><span class="keyword">;<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\bArie\b#u'</span><span class="keyword">, </span><span class="string">'Gontran'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="comment">//on windows system, output is "Hi, my name is Gontran&lt;br /&gt;"<br />
//on unix system, output is "Hi, my name is Arie&lt;br /&gt;"<br />
</span><span class="keyword">echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\bArie(|\b)#u'</span><span class="keyword">, </span><span class="string">'Gontran'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="comment">//on windows and unix system, output is "Hi, my name is Gontran&lt;br /&gt;"</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89364""></a>
  <div class="note">
   <strong class="user">arkani at iol dot pt</strong>
   <a href="#89364" class="date">04-Mar-2009 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Because i search a lot 4 this:<br />
<br />
The following should be escaped if you are trying to match that character<br />
<br />
\ ^ . $ | ( ) [ ]<br />
* + ? { } ,<br />
<br />
Special Character Definitions<br />
\ Quote the next metacharacter<br />
^ Match the beginning of the line<br />
. Match any character (except newline)<br />
$ Match the end of the line (or before newline at the end)<br />
| Alternation<br />
() Grouping<br />
[] Character class<br />
* Match 0 or more times<br />
+ Match 1 or more times<br />
? Match 1 or 0 times<br />
{n} Match exactly n times<br />
{n,} Match at least n times<br />
{n,m} Match at least n but not more than m times<br />
More Special Character Stuff<br />
\t tab (HT, TAB)<br />
\n newline (LF, NL)<br />
\r return (CR)<br />
\f form feed (FF)<br />
\a alarm (bell) (BEL)<br />
\e escape (think troff) (ESC)<br />
\033 octal char (think of a PDP-11)<br />
\x1B hex char<br />
\c[ control char<br />
\l lowercase next char (think vi)<br />
\u uppercase next char (think vi)<br />
\L lowercase till \E (think vi)<br />
\U uppercase till \E (think vi)<br />
\E end case modification (think vi)<br />
\Q quote (disable) pattern metacharacters till \E<br />
Even More Special Characters<br />
\w Match a "word" character (alphanumeric plus "_")<br />
\W Match a non-word character<br />
\s Match a whitespace character<br />
\S Match a non-whitespace character<br />
\d Match a digit character<br />
\D Match a non-digit character<br />
\b Match a word boundary<br />
\B Match a non-(word boundary)<br />
\A Match only at beginning of string<br />
\Z Match only at end of string, or before newline at the end<br />
\z Match only at end of string<br />
\G Match only where previous m//g left off (works only with /g)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88997""></a>
  <div class="note">
   <strong class="user">akam AT akameng DOT com</strong>
   <a href="#88997" class="date">18-Feb-2009 01:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
$converted&nbsp; &nbsp; </span><span class="keyword">= <br />
array(<br />
</span><span class="comment">//3 of special chars<br />
<br />
</span><span class="string">'/(;)/ie'</span><span class="keyword">, <br />
</span><span class="string">'/(#)/ie'</span><span class="keyword">, <br />
</span><span class="string">'/(&amp;)/ie'</span><span class="keyword">, <br />
<br />
</span><span class="comment">//MySQL reserved words!<br />
//Check mysql website!<br />
</span><span class="string">'/(ACTION)/ie'</span><span class="keyword">, </span><span class="string">'/(ADD)/ie'</span><span class="keyword">, </span><span class="string">'/(ALL)/ie'</span><span class="keyword">, </span><span class="string">'/(ALTER)/ie'</span><span class="keyword">, </span><span class="string">'/(ANALYZE)/ie'</span><span class="keyword">, </span><span class="string">'/(AND)/ie'</span><span class="keyword">, </span><span class="string">'/(AS)/ie'</span><span class="keyword">, </span><span class="string">'/(ASC)/ie'</span><span class="keyword">,<br />
<br />
</span><span class="comment">//remaining of special chars<br />
</span><span class="string">'/(&lt;)/ie'</span><span class="keyword">, </span><span class="string">'/(&gt;)/ie'</span><span class="keyword">, </span><span class="string">'/(\.)/ie'</span><span class="keyword">, </span><span class="string">'/(,)/ie'</span><span class="keyword">, </span><span class="string">'/(\?)/ie'</span><span class="keyword">, </span><span class="string">'/(`)/ie'</span><span class="keyword">, </span><span class="string">'/(!)/ie'</span><span class="keyword">, </span><span class="string">'/(@)/ie'</span><span class="keyword">, </span><span class="string">'/(\$)/ie'</span><span class="keyword">, </span><span class="string">'/(%)/ie'</span><span class="keyword">, </span><span class="string">'/(\^)/ie'</span><span class="keyword">, </span><span class="string">'/(\*)/ie'</span><span class="keyword">, </span><span class="string">'/(\()/ie'</span><span class="keyword">, </span><span class="string">'/(\))/ie'</span><span class="keyword">, </span><span class="string">'/(_)/ie'</span><span class="keyword">, </span><span class="string">'/(-)/ie'</span><span class="keyword">, </span><span class="string">'/(\+)/ie'</span><span class="keyword">, <br />
</span><span class="string">'/(=)/ie'</span><span class="keyword">, </span><span class="string">'/(\/)/ie'</span><span class="keyword">, </span><span class="string">'/(\|)/ie'</span><span class="keyword">, </span><span class="string">'/(\\\)/ie'</span><span class="keyword">, </span><span class="string">"/(')/ie"</span><span class="keyword">, </span><span class="string">'/(")/ie'</span><span class="keyword">, </span><span class="string">'/(:)/'<br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">$input_text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$converted</span><span class="keyword">, </span><span class="string">"UTF_to_Unicode('\\1')"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
<br />
function </span><span class="default">UTF_to_Unicode</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br />
<br />
</span><span class="comment">//return $data;<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span>The above example useful for filtering input data, then saving into mysql database, it's not need tobe decoded again, just use UTF-8 as charset.<br />
Please Note escaping special chars between delimiter..</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88834""></a>
  <div class="note">
   <strong class="user">Svoop</strong>
   <a href="#88834" class="date">10-Feb-2009 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have written a short introduction and a colorful cheat sheet for Perl Compatible Regular Expressions (PCRE):<br />
<br />
<a href="http://www.bitcetera.com/en/techblog/2008/04/01/regex-in-a-nutshell/" rel="nofollow" target="_blank">http://www.bitcetera.com/en/techblog/2008/04/01/regex-in-a-nutshell/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87300""></a>
  <div class="note">
   <strong class="user">mdrisser at gmail dot com</strong>
   <a href="#87300" class="date">28-Nov-2008 07:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An alternative to the method suggested by sheri is to remember that the regex modifier '$' only looks at the end of the STRING, the example given is a single string consisting of multiple lines.<br />
<br />
Try:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Following is 1 string containing 3 lines<br />
</span><span class="default">$s </span><span class="keyword">= </span><span class="string">"Testing, testing.\r\n"<br />
&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Another testing line.\r\n"<br />
&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Testing almost done."</span><span class="keyword">;<br />
<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\.\\r\\n/m'</span><span class="keyword">, </span><span class="string">'@\r\n'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This results in the string:<br />
Testing, testing@\r\nAnother testing line@\r\nTesting almost done.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87102""></a>
  <div class="note">
   <strong class="user">jette at nerdgirl dot dk</strong>
   <a href="#87102" class="date">19-Nov-2008 01:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this to prevent users from overdoing repeated text. The following function only allows 3 identical characters at a time and also takes care of repetitions with whitespace added.<br />
<br />
This means that 'haaaaaaleluuuujaaaaa' becomes 'haaaleluuujaaa' and 'I am c o o o o o o l' becomes 'I am c o o o l'<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Example of user input<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="string">"aaaaaaaaaaabbccccccccaaaaad d d d&nbsp;&nbsp; d&nbsp; &nbsp; &nbsp; d d ddde''''''''''''"</span><span class="keyword">;<br />
<br />
function </span><span class="default">stripRepeat</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">//Do not allow repeated whitespace<br />
&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\s){2,}/"</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">//Result: aaaaaaaaaaabbccccccccaaaaad d d d d d d ddde''''''''''''<br />
<br />
&nbsp; //Do not allow more than 3 identical characters separated by any whitespace <br />
&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'{( ?.)\1{4,}}'</span><span class="keyword">,</span><span class="string">'$1$1$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">//Final result: aaabbcccaaad d d ddde'''<br />
<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
To prevent any repetitions of characters, you only need this:<br />
<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'{(.)\1+}'</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="comment">//Result: abcad d d d d d d de'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87058""></a>
  <div class="note">
   <strong class="user">7r6ivyeo at mail dot com</strong>
   <a href="#87058" class="date">17-Nov-2008 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
String to filename:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">string_to_filename</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/^\W+|\W+$/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">); </span><span class="comment">// remove all non-alphanumeric chars at begin &amp; end of string<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s+/'</span><span class="keyword">, </span><span class="string">'_'</span><span class="keyword">, </span><span class="default">$tmp</span><span class="keyword">); </span><span class="comment">// compress internal whitespace and replace with _<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\W-/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$tmp</span><span class="keyword">)); </span><span class="comment">// remove all non-alphanumeric chars except _ and -<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns a usable &amp; readable filename.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85722""></a>
  <div class="note">
   <strong class="user">tal at ashkenazi dot co dot il</strong>
   <a href="#85722" class="date">14-Sep-2008 10:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
after long time of tring get rid of \n\r and &lt;BR&gt; stuff i've came with this... <br />
(i done some changes in clicklein() function...)<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">clickable</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\r"</span><span class="keyword">,</span><span class="string">"\r"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\n"</span><span class="keyword">,</span><span class="string">"\n&lt;BR&gt;"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\n\\r"</span><span class="keyword">,</span><span class="string">"\n\r"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$in</span><span class="keyword">=array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'`((?:https?|ftp)://\S+[[:alnum:]]/?)`si'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'`((?&lt;!//)(www\.\S+[[:alnum:]]/?))`si'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">=array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;a href="$1"&nbsp; rel=nofollow&gt;$1&lt;/a&gt; '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;a href="<a href="http://$1" rel="nofollow" target="_blank">http://$1</a>" rel=\'nofollow\'&gt;$1&lt;/a&gt;'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85416""></a>
  <div class="note">
   <strong class="user">dyer85 at gmail dot com</strong>
   <a href="#85416" class="date">29-Aug-2008 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There seems to be some unexpected behavior when using the /m modifier when the line terminators are win32 or mac format.<br />
<br />
If you have a string like below, and try to replace dots, the regex won't replace correctly:<br />
<br />
<span class="default">&lt;?php<br />
$s </span><span class="keyword">= </span><span class="string">"Testing, testing.\r\n"<br />
&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Another testing line.\r\n"<br />
&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Testing almost done."</span><span class="keyword">;<br />
<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\.$/m'</span><span class="keyword">, </span><span class="string">'.@'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// only last . replaced<br />
</span><span class="default">?&gt;<br />
</span><br />
The /m modifier doesn't seem to work properly when CRLFs or CRs are used. Make sure to convert line endings to LFs (*nix format) in your input string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84816""></a>
  <div class="note">
   <strong class="user">halityesil [ at at] globya [ dot dot] net</strong>
   <a href="#84816" class="date">31-Jul-2008 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?PHP<br />
<br />
</span><span class="keyword">function </span><span class="default">strip_tags_attributes</span><span class="keyword">(</span><span class="default">$sSource</span><span class="keyword">, </span><span class="default">$aAllowedTags </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$aDisabledAttributes </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$aAllowedProperties </span><span class="keyword">= </span><span class="string">'font|font-size|font-weight|color' </span><span class="keyword">. </span><span class="string">'|text-align|text-decoration|margin|margin-left' </span><span class="keyword">. </span><span class="string">'|margin-top|margin-bottom|margin-right|padding' </span><span class="keyword">. </span><span class="string">'|padding-top|padding-left|padding-right|padding-bottom' </span><span class="keyword">. </span><span class="string">'|width|height'</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$aDisabledAttributes </span><span class="keyword">) ){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$aDisabledAttributes </span><span class="keyword">= array(</span><span class="string">'onabort'</span><span class="keyword">, </span><span class="string">'onactivate'</span><span class="keyword">, </span><span class="string">'onafterprint'</span><span class="keyword">, </span><span class="string">'onafterupdate'</span><span class="keyword">, </span><span class="string">'onbeforeactivate'</span><span class="keyword">, </span><span class="string">'onbeforecopy'</span><span class="keyword">, </span><span class="string">'onbeforecut'</span><span class="keyword">, </span><span class="string">'onbeforedeactivate'</span><span class="keyword">, </span><span class="string">'onbeforeeditfocus'</span><span class="keyword">, </span><span class="string">'onbeforepaste'</span><span class="keyword">, </span><span class="string">'onbeforeprint'</span><span class="keyword">, </span><span class="string">'onbeforeunload'</span><span class="keyword">, </span><span class="string">'onbeforeupdate'</span><span class="keyword">, </span><span class="string">'onblur'</span><span class="keyword">, </span><span class="string">'onbounce'</span><span class="keyword">, </span><span class="string">'oncellchange'</span><span class="keyword">, </span><span class="string">'onchange'</span><span class="keyword">, </span><span class="string">'onclick'</span><span class="keyword">, </span><span class="string">'oncontextmenu'</span><span class="keyword">, </span><span class="string">'oncontrolselect'</span><span class="keyword">, </span><span class="string">'oncopy'</span><span class="keyword">, </span><span class="string">'oncut'</span><span class="keyword">, </span><span class="string">'ondataavaible'</span><span class="keyword">, </span><span class="string">'ondatasetchanged'</span><span class="keyword">, </span><span class="string">'ondatasetcomplete'</span><span class="keyword">, </span><span class="string">'ondblclick'</span><span class="keyword">, </span><span class="string">'ondeactivate'</span><span class="keyword">, </span><span class="string">'ondrag'</span><span class="keyword">, </span><span class="string">'ondragdrop'</span><span class="keyword">, </span><span class="string">'ondragend'</span><span class="keyword">, </span><span class="string">'ondragenter'</span><span class="keyword">, </span><span class="string">'ondragleave'</span><span class="keyword">, </span><span class="string">'ondragover'</span><span class="keyword">, </span><span class="string">'ondragstart'</span><span class="keyword">, </span><span class="string">'ondrop'</span><span class="keyword">, </span><span class="string">'onerror'</span><span class="keyword">, </span><span class="string">'onerrorupdate'</span><span class="keyword">, </span><span class="string">'onfilterupdate'</span><span class="keyword">, </span><span class="string">'onfinish'</span><span class="keyword">, </span><span class="string">'onfocus'</span><span class="keyword">, </span><span class="string">'onfocusin'</span><span class="keyword">, </span><span class="string">'onfocusout'</span><span class="keyword">, </span><span class="string">'onhelp'</span><span class="keyword">, </span><span class="string">'onkeydown'</span><span class="keyword">, </span><span class="string">'onkeypress'</span><span class="keyword">, </span><span class="string">'onkeyup'</span><span class="keyword">, </span><span class="string">'onlayoutcomplete'</span><span class="keyword">, </span><span class="string">'onload'</span><span class="keyword">, </span><span class="string">'onlosecapture'</span><span class="keyword">, </span><span class="string">'onmousedown'</span><span class="keyword">, </span><span class="string">'onmouseenter'</span><span class="keyword">, </span><span class="string">'onmouseleave'</span><span class="keyword">, </span><span class="string">'onmousemove'</span><span class="keyword">, </span><span class="string">'onmoveout'</span><span class="keyword">, </span><span class="string">'onmouseover'</span><span class="keyword">, </span><span class="string">'onmouseup'</span><span class="keyword">, </span><span class="string">'onmousewheel'</span><span class="keyword">, </span><span class="string">'onmove'</span><span class="keyword">, </span><span class="string">'onmoveend'</span><span class="keyword">, </span><span class="string">'onmovestart'</span><span class="keyword">, </span><span class="string">'onpaste'</span><span class="keyword">, </span><span class="string">'onpropertychange'</span><span class="keyword">, </span><span class="string">'onreadystatechange'</span><span class="keyword">, </span><span class="string">'onreset'</span><span class="keyword">, </span><span class="string">'onresize'</span><span class="keyword">, </span><span class="string">'onresizeend'</span><span class="keyword">, </span><span class="string">'onresizestart'</span><span class="keyword">, </span><span class="string">'onrowexit'</span><span class="keyword">, </span><span class="string">'onrowsdelete'</span><span class="keyword">, </span><span class="string">'onrowsinserted'</span><span class="keyword">, </span><span class="string">'onscroll'</span><span class="keyword">, </span><span class="string">'onselect'</span><span class="keyword">, </span><span class="string">'onselectionchange'</span><span class="keyword">, </span><span class="string">'onselectstart'</span><span class="keyword">, </span><span class="string">'onstart'</span><span class="keyword">, </span><span class="string">'onstop'</span><span class="keyword">, </span><span class="string">'onsubmit'</span><span class="keyword">, </span><span class="string">'onunload'</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">stripcslashes</span><span class="keyword">( </span><span class="default">$sSource </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">strip_tags</span><span class="keyword">( </span><span class="default">$sSource</span><span class="keyword">, </span><span class="default">$aAllowedTags </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; if( empty(</span><span class="default">$aDisabledAttributes</span><span class="keyword">) ){<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$sSource</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">$aDisabledAttributes </span><span class="keyword">= @ </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$aDisabledAttributes</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;(.*?)&gt;/ie'</span><span class="keyword">, </span><span class="string">"'&lt;' . preg_replace(array('/javascript:[^\"\']*/i', '/(" </span><span class="keyword">. </span><span class="default">$aDisabledAttributes </span><span class="keyword">. </span><span class="string">")[ \\t\\n]*=[ \\t\\n]*[\"\'][^\"\']*[\"\']/i', '/\s+/'), array('', '', ' '), stripslashes('\\1')) . '&gt;'"</span><span class="keyword">, </span><span class="default">$sSource </span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s(' </span><span class="keyword">. </span><span class="default">$aDisabledAttributes </span><span class="keyword">. </span><span class="string">').*?([\s\&gt;])/'</span><span class="keyword">, </span><span class="string">'\\2'</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$regexp </span><span class="keyword">= </span><span class="string">'@([^;"]+)?(?&lt;!'</span><span class="keyword">. </span><span class="default">$aAllowedProperties </span><span class="keyword">.</span><span class="string">'):(?!\/\/(.+?)\/)((.*?)[^;"]+)(;)?@is'</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$regexp</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'@[a-z]*=""@is'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; return </span><span class="default">$sSource</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Online resource help skype name : globya <br />
<br />
good luck !</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84799""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#84799" class="date">30-Jul-2008 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People using functions like scandir with user input and protecting against "../" by using preg_replace make sure you run ir recursivly untill preg_match no-long finds it, because if you don't the following can happen.<br />
<br />
If a user gives the path:<br />
"./....//....//....//....//....//....//....//"<br />
then your script detects every "../" and removes them leaving:<br />
"./../../../../../../../"<br />
Which is proberly going back enough times to show root.<br />
<br />
I just found this vunrability in an old script of mine, which was written several years ago.<br />
<br />
Always do:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while( </span><span class="default">preg_match</span><span class="keyword">( [</span><span class="default">expression</span><span class="keyword">], </span><span class="default">$input </span><span class="keyword">) )<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( [</span><span class="default">expression</span><span class="keyword">], </span><span class="string">""</span><span class="keyword">, </span><span class="default">$input </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84703""></a>
  <div class="note">
   <strong class="user">marcin at pixaltic dot com</strong>
   <a href="#84703" class="date">26-Jul-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//:::replace with anything that you can do with searched string:::
<br />
&nbsp;&nbsp;&nbsp; //Marcin Majchrzak
<br />
&nbsp;&nbsp;&nbsp; //pixaltic.com
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="string">"2 4 8"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="default">$c</span><span class="keyword">); </span><span class="comment">//display:2 4 8
<br />

<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cp </span><span class="keyword">= </span><span class="string">"/(\d)\s(\d)\s(\d)/e"</span><span class="keyword">; </span><span class="comment">//pattern
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cr </span><span class="keyword">= </span><span class="string">"'\\3*\\2+\\1='.(('\\3')*('\\2')+('\\1'))"</span><span class="keyword">; </span><span class="comment">//replece
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$cp</span><span class="keyword">, </span><span class="default">$cr</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="default">$c</span><span class="keyword">); </span><span class="comment">//display:8*4+2=34
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84385""></a>
  <div class="note">
   <strong class="user">David</strong>
   <a href="#84385" class="date">11-Jul-2008 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Take care when you try to strip whitespaces out of an UTF-8 text. Using something like:<br />
<br />
<span class="default">&lt;?php<br />
$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">"{\s+}"</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
brokes in my case the letter a which is hex c3a0. But a0 is a whitespace. So use <br />
<br />
<span class="default">&lt;?php<br />
$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">"{[ \t]+}"</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
to strip all spaces and tabs, or better, use a multibyte function like mb_ereg_replace.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84285""></a>
  <div class="note">
   <strong class="user">akniep at rayo dot info</strong>
   <a href="#84285" class="date">08-Jul-2008 12:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
preg_replace (and other preg-functions) return null instead of a string when encountering problems you probably did not think about!<br />
-------------------------<br />
<br />
It may not be obvious to everybody that the function returns NULL if an error of any kind occurres. An error I happen to stumple about quite often was the back-tracking-limit:<br />
<a href="http://de.php.net/manual/de/pcre.configuration.php" rel="nofollow" target="_blank">http://de.php.net/manual/de/pcre.configuration.php</a><br />
#ini.pcre.backtrack-limit<br />
<br />
When working with HTML-documents and their parsing it happens that you encounter documents that have a length of over 100.000 characters and that may lead to certain regular-expressions to fail due the back-tracking-limit of above.<br />
<br />
A regular-expression that is ungreedy ("U", <a href="http://de.php.net/manual/de/reference.pcre.pattern.modifiers.php" rel="nofollow" target="_blank">http://de.php.net/manual/de/reference.pcre.pattern.modifiers.php</a>) often does the job, but still: sometimes you just need a greedy regular expression working on long strings ...<br />
<br />
Since, an unhandled return-value of NULL usually creates a consecutive error in the application with unwanted and unforeseen consequences, I found the following solution to be quite helpful and at least save the application from crashing:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$string_after </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/some_regexp/'</span><span class="keyword">, </span><span class="string">"replacement"</span><span class="keyword">, </span><span class="default">$string_before </span><span class="keyword">);<br />
<br />
</span><span class="comment">// if some error occurred we go on working with the unchanged original string<br />
</span><span class="keyword">if (</span><span class="default">PREG_NO_ERROR </span><span class="keyword">!== </span><span class="default">preg_last_error</span><span class="keyword">())<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string_after </span><span class="keyword">= </span><span class="default">$string_before</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// put email-sending or a log-message here<br />
</span><span class="keyword">} </span><span class="comment">//if<br />
<br />
// free memory<br />
</span><span class="keyword">unset( </span><span class="default">$string_before </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You may or should also put a log-message or the sending of an email into the if-condition in order to get informed, once, one of your regular-expressions does not have the effect you desired it to have.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83974""></a>
  <div class="note">
   <strong class="user">da_pimp2004_966 at hotmail dot com</strong>
   <a href="#83974" class="date">21-Jun-2008 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple BB like thing..
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">AddBB</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[b\](.*?)\[\/b\]/is'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[i\](.*?)\[\/i\]/is'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[u\](.*?)\[\/u\]/is'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[img\](.*?)\[\/img\]/is'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[url\](.*?)\[\/url\]/is'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/\[url\=(.*?)\](.*?)\[\/url\]/is'
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;em&gt;$1&lt;/em&gt;'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;u&gt;$1&lt;/u&gt;'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;img src="$1" /&gt;'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;a href="$1"&gt;$1&lt;/a&gt;'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'&lt;a href="$1"&gt;$2&lt;/a&gt;'
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">);
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$var</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82574""></a>
  <div class="note">
   <strong class="user">Michael W</strong>
   <a href="#82574" class="date">17-Apr-2008 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For filename tidying I prefer to only ALLOW certain characters rather than converting particular ones that we want to exclude. To this end I use ...<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $allowed </span><span class="keyword">= </span><span class="string">"/[^a-z0-9\\040\\.\\-\\_\\\\]/i"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$allowed</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Allows letters a-z, digits, space (\\040), hyphen (\\-), underscore (\\_) and backslash (\\\\), everything else is removed from the string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81486""></a>
  <div class="note">
   <strong class="user">php-comments-REMOVE dot ME at dotancohen dot com</strong>
   <a href="#81486" class="date">29-Feb-2008 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Below is a function for converting Hebrew final characters to their<br />
normal equivelants should they appear in the middle of a word.<br />
The /b argument does not treat Hebrew letters as part of a word,<br />
so I had to work around that limitation.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$text</span><span class="keyword">=</span><span class="string">"????? ???????"</span><span class="keyword">;<br />
<br />
function </span><span class="default">hebrewNotWordEndSwitch </span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$from</span><span class="keyword">.</span><span class="string">'([?-?])/u'</span><span class="keyword">,</span><span class="string">'$2'</span><span class="keyword">.</span><span class="default">$to</span><span class="keyword">.</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
}<br />
<br />
do {<br />
&nbsp;&nbsp; </span><span class="default">$text_before</span><span class="keyword">=</span><span class="default">$text</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"?"</span><span class="keyword">,</span><span class="string">"?"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br />
}&nbsp;&nbsp; while ( </span><span class="default">$text_before</span><span class="keyword">!=</span><span class="default">$text </span><span class="keyword">);<br />
<br />
print </span><span class="default">$text</span><span class="keyword">; </span><span class="comment">// ????? ??????!<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The do-while is necessary for multiple instances of letters, such<br />
as "????" which would start off as "????". Note that there's still the<br />
problem of acronyms with gershiim but that's not a difficult one<br />
to solve. The code is in use at <a href="http://gibberish.co.il which you can" rel="nofollow" target="_blank">http://gibberish.co.il which you can</a><br />
use to translate wrongly-encoded Hebrew, transliterize, and some<br />
other Hebrew-related functions.<br />
<br />
To ensure that there will be no regular characters at the end of a<br />
word, just convert all regular characters to their final forms, then<br />
run this function. Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79678""></a>
  <div class="note">
   <strong class="user">ulf dot reimers at tesa dot com</strong>
   <a href="#79678" class="date">07-Dec-2007 07:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
as I wasn't able to find another way to do this, I wrote a function converting any UTF-8 string into a correct NTFS filename (see <a href="http://en.wikipedia.org/wiki/Filename" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Filename</a>).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strToNTFSFilename</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$reserved </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="string">'\/:*?"&lt;&gt;'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\\x00-\\x1f</span><span class="keyword">{</span><span class="default">$forbidden</span><span class="keyword">}</span><span class="string">])/e"</span><span class="keyword">, </span><span class="string">"_"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It converts all control characters and filename characters which are reserved by Windows ('\/:*?"&lt;&gt;') into an underscore.<br />
This way you can safely create an NTFS filename out of any UTF-8 string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78597""></a>
  <div class="note">
   <strong class="user">mike dot hayward at mikeyskona dot co dot uk</strong>
   <a href="#78597" class="date">18-Oct-2007 05:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi.
<br />
Not sure if this will be a great help to anyone out there, but thought i'd post just in case.
<br />
I was having an Issue with a project that relied on $_SERVER['REQUEST_URI']. Obviously this wasn't working on IIS.
<br />
(i am using mod_rewrite in apache to call up pages from a database and IIS doesn't set REQUEST_URI). So i knocked up this simple little preg_replace to use the query string set by IIS when redirecting to a PHP error page.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//My little IIS hack :)
<br />
</span><span class="keyword">if(!isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">])){ 
<br />
&nbsp; </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/404;([a-zA-Z]+:\/\/)(.*?)\//i'</span><span class="keyword">, </span><span class="string">"/" </span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">] );
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Hope this helps someone else out there trying to do the same thing :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77317""></a>
  <div class="note">
   <strong class="user">sternkinder at gmail dot com</strong>
   <a href="#77317" class="date">24-Aug-2007 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From what I can see, the problem is, that if you go straight and substitute all 'A's wit 'T's you can't tell for sure which 'T's to substitute with 'A's afterwards. This can be for instance solved by simply replacing all 'A's by another character (for instance '_' or whatever you like), then replacing all 'T's by 'A's, and then replacing all '_'s (or whatever character you chose) by 'A's:
<br />

<br />
<span class="default">&lt;?php
<br />
$dna </span><span class="keyword">= </span><span class="string">"AGTCTGCCCTAG"</span><span class="keyword">;
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"_"</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">), array(</span><span class="string">"_"</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">), </span><span class="default">$dna</span><span class="keyword">); </span><span class="comment">//output will be TCAGACGGGATC
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Although I don't know how transliteration in perl works (though I remember that is kind of similar to the UNIX command "tr") I would suggest following function for "switching" single chars:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">switch_chars</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$switch_table</span><span class="keyword">,</span><span class="default">$unused_char</span><span class="keyword">=</span><span class="string">"_"</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; foreach ( </span><span class="default">$switch_table </span><span class="keyword">as </span><span class="default">$_1 </span><span class="keyword">=&gt; </span><span class="default">$_2 </span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$_1</span><span class="keyword">,</span><span class="default">$unused_char</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$_2</span><span class="keyword">,</span><span class="default">$_1</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$unused_char</span><span class="keyword">,</span><span class="default">$_2</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;
<br />
}
<br />

<br />
echo </span><span class="default">switch_chars</span><span class="keyword">(</span><span class="string">"AGTCTGCCCTAG"</span><span class="keyword">, array(</span><span class="string">"A"</span><span class="keyword">=&gt;</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">=&gt;</span><span class="string">"C"</span><span class="keyword">)); </span><span class="comment">//output will be TCAGACGGGATC
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77255""></a>
  <div class="note">
   <strong class="user">rob at ubrio dot us</strong>
   <a href="#77255" class="date">21-Aug-2007 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also worth noting is that you can use array_keys()/array_values() with preg_replace like:
<br />

<br />
<span class="default">&lt;?php
<br />
$subs </span><span class="keyword">= array(
<br />
&nbsp; </span><span class="string">'/\[b\](.+)\[\/b\]/Ui' </span><span class="keyword">=&gt; </span><span class="string">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="keyword">,
<br />
&nbsp; </span><span class="string">'/_(.+)_/Ui' </span><span class="keyword">=&gt; </span><span class="string">'&lt;em&gt;$1&lt;/em&gt;'
<br />
&nbsp; </span><span class="keyword">...
<br />
&nbsp; ...
<br />
);
<br />

<br />
</span><span class="default">$raw_text </span><span class="keyword">= </span><span class="string">'[b]this is bold[/b] and this is _italic!_'</span><span class="keyword">;
<br />

<br />
</span><span class="default">$bb_text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$subs</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$subs</span><span class="keyword">), </span><span class="default">$raw_text</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76665""></a>
  <div class="note">
   <strong class="user">lehongviet at gmail dot com</strong>
   <a href="#76665" class="date">25-Jul-2007 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I got problem echoing text that contains double-quotes into a text field. As it confuses value option. I use this function below to match and replace each pair of them by smart quotes. The last one will be replaced by a hyphen(-).
<br />

<br />
It works for me.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">smart_quotes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {
<br />
&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/"((.)*?)"/i'</span><span class="keyword">;
<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="string">""\\1""</span><span class="keyword">,</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">));
<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\""</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br />
&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76467""></a>
  <div class="note">
   <strong class="user">131 dot php at cloudyks dot org</strong>
   <a href="#76467" class="date">17-Jul-2007 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Based on previous comment, i suggest 
<br />
( this function already exist in php 6 )
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">unicode_decode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'#\\\u([0-9a-f]{4})#e'</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"unicode_value('\\1')"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str</span><span class="keyword">);
<br />
}
<br />

<br />
function </span><span class="default">unicode_value</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$value</span><span class="keyword">&lt;</span><span class="default">0x0080</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; elseif(</span><span class="default">$value</span><span class="keyword">&lt;</span><span class="default">0x0800</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x07c0</span><span class="keyword">)&gt;&gt;</span><span class="default">6</span><span class="keyword">)|</span><span class="default">0xc0</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; .</span><span class="default">chr</span><span class="keyword">((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x3f</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0xf000</span><span class="keyword">)&gt;&gt;</span><span class="default">12</span><span class="keyword">)|</span><span class="default">0xe0</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .</span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x0fc0</span><span class="keyword">)&gt;&gt;</span><span class="default">6</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; .</span><span class="default">chr</span><span class="keyword">((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x3f</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
[EDIT BY danbrown AT php DOT net:&nbsp; This function originally written by mrozenoer AT overstream DOT net.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76297""></a>
  <div class="note">
   <strong class="user">mtsoft at mt-soft dot com dot ar</strong>
   <a href="#76297" class="date">09-Jul-2007 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes a URL and returns a plain-text version of the page. It uses cURL to retrieve the page and a combination of regular expressions to strip all unwanted whitespace. This function will even strip the text from STYLE and SCRIPT tags, which are ignored by PHP functions such as strip_tags (they strip only the tags, leaving the text in the middle intact).
<br />

<br />
Regular expressions were split in 2 stages, to avoid deleting single carriage returns (also matched by \s) but still delete all blank lines and multiple linefeeds or spaces, trimming operations took place in 2 stages.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">webpage2txt</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)
<br />
{
<br />
</span><span class="default">$user_agent </span><span class="keyword">= </span><span class="default">"Mozilla</span><span class="keyword">/</span><span class="default">4.0 </span><span class="keyword">(</span><span class="default">compatible</span><span class="keyword">; </span><span class="default">MSIE 5.01</span><span class="keyword">; </span><span class="default">Windows NT 5.0</span><span class="keyword">)</span><span class="default">"</span><span class="keyword">;
<br />

<br />
</span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// initialize curl handle
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">); </span><span class="comment">// set url to post to
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Fail on errors
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// allow redirects
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// return into a variable
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_PORT</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Set the port number
<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">); </span><span class="comment">// times out after 15s
<br />

<br />
</span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$user_agent</span><span class="keyword">);
<br />

<br />
</span><span class="default">$document </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br />

<br />
</span><span class="default">$search </span><span class="keyword">= array(</span><span class="default">'</span><span class="keyword">@&lt;</span><span class="default">script</span><span class="keyword">[^&gt;]*</span><span class="default">?&gt;</span>.*?&lt;/script&gt;@si',&nbsp; // Strip out javascript
<br />
'@&lt;style[^&gt;]*?&gt;.*?&lt;/style&gt;@siU',&nbsp; &nbsp; // Strip style tags properly
<br />
'@&lt;[\/\!]*?[^&lt;&gt;]*?&gt;@si',&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Strip out HTML tags
<br />
'@&lt;![\s\S]*?-[ \t\n\r]*&gt;@',&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Strip multi-line comments including CDATA
<br />
'/\s{2,}/',
<br />

<br />
);
<br />

<br />
$text = preg_replace($search, "\n", html_entity_decode($document));
<br />

<br />
$pat[0] = "/^\s+/";
<br />
$pat[2] = "/\s+\$/";
<br />
$rep[0] = "";
<br />
$rep[2] = " ";
<br />

<br />
$text = preg_replace($pat, $rep, trim($text));
<br />

<br />
return $text;
<br />
}
<br />
?&gt;
<br />

<br />
Potential uses of this function are extracting keywords from a webpage, counting words and things like that. If you find it useful, drop us a comment and let us know where you used it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74037""></a>
  <div class="note">
   <strong class="user">ismith at nojunk dot motorola dot com</strong>
   <a href="#74037" class="date">21-Mar-2007 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware that when using the "/u" modifier, if your input text contains any bad UTF-8 code sequences, then preg_replace will return an empty string, regardless of whether there were any matches.<br />
<br />
This is due to the PCRE library returning an error code if the string contains bad UTF-8.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73063""></a>
  <div class="note">
   <strong class="user">dani dot church at gmail dot youshouldknowthisone</strong>
   <a href="#73063" class="date">07-Feb-2007 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that it is in most cases much more efficient to use preg_replace_callback(), with a named function or an anonymous function created with create_function(), instead of the /e modifier.&nbsp; When preg_replace() is called with the /e modifier, the interpreter must parse the replacement string into PHP code once for every replacement made, while preg_replace_callback() uses a function that only needs to be parsed once.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69478""></a>
  <div class="note">
   <strong class="user">Alexey Lebedev</strong>
   <a href="#69478" class="date">07-Sep-2006 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Wasted several hours because of this:
<br />

<br />
<span class="default">&lt;?php
<br />
$str</span><span class="keyword">=</span><span class="string">'It&amp;#039;s a string with HTML entities'</span><span class="keyword">;
<br />
</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~&amp;#(\d+);~e'</span><span class="keyword">, </span><span class="string">'code2utf($1)'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
This code must convert numeric html entities to utf8. And it does with a little exception. It treats wrong codes starting with &amp;#0
<br />

<br />
The reason is that code2utf will be called with leading zero, exactly what the pattern matches - code2utf(039).
<br />
And it does matter! PHP treats 039 as octal number.
<br />
Try <span class="default">&lt;?php </span><span class="keyword">print(</span><span class="default">011</span><span class="keyword">); </span><span class="default">?&gt;
<br />
</span>
<br />
Solution:
<br />
<span class="default">&lt;?php preg_replace</span><span class="keyword">(</span><span class="string">'~&amp;#0*(\d+);~e'</span><span class="keyword">, </span><span class="string">'code2utf($1)'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64828""></a>
  <div class="note">
   <strong class="user">robvdl at gmail dot com</strong>
   <a href="#64828" class="date">21-Apr-2006 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you that have ever had the problem where clients paste text from msword into a CMS, where word has placed all those fancy quotes throughout the text, breaking the XHTML validator... I have created a nice regular expression, that replaces ALL high UTF-8 characters with HTML entities, such as '.
<br />

<br />
Note that most user examples on php.net I have read, only replace selected characters, such as single and double quotes. This replaces all high characters, including greek characters, arabian characters, smilies, whatever.
<br />

<br />
It took me ages to get it just downto two regular expressions, but it handles all high level characters properly.
<br />

<br />
<span class="default">&lt;?php
<br />
$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([\xc0-\xdf].)/se'</span><span class="keyword">, </span><span class="string">"'&amp;#' . ((ord(substr('$1', 0, 1)) - 192) * 64 + (ord(substr('$1', 1, 1)) - 128)) . ';'"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);
<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([\xe0-\xef]..)/se'</span><span class="keyword">, </span><span class="string">"'&amp;#' . ((ord(substr('$1', 0, 1)) - 224) * 4096 + (ord(substr('$1', 1, 1)) - 128) * 64 + (ord(substr('$1', 2, 1)) - 128)) . ';'"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46639""></a>
  <div class="note">
   <strong class="user">gabe at mudbuginfo dot com</strong>
   <a href="#46639" class="date">18-Oct-2004 10:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is useful to note that the 'limit' parameter, when used with 'pattern' and 'replace' which are arrays, applies to each individual pattern in the patterns array, and not the entire array.<br />
<span class="default">&lt;?php<br />
<br />
$pattern </span><span class="keyword">= array(</span><span class="string">'/one/'</span><span class="keyword">, </span><span class="string">'/two/'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'uno'</span><span class="keyword">, </span><span class="string">'dos'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">"test one, one two, one two three"</span><span class="keyword">;<br />
<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
If limit were applied to the whole array (which it isn't), it would return:<br />
test uno, one two, one two three<br />
<br />
However, in reality this will actually return:<br />
test uno, one dos, one two three</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39713""></a>
  <div class="note">
   <strong class="user">steven -a-t- acko dot net</strong>
   <a href="#39713" class="date">08-Feb-2004 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
People using the /e modifier with preg_replace should be aware of the following weird behaviour. It is not a bug per se, but can cause bugs if you don't know it's there.<br />
<br />
The example in the docs for /e suffers from this mistake in fact.<br />
<br />
With /e, the replacement string is a PHP expression. So when you use a backreference in the replacement expression, you need to put the backreference inside quotes, or otherwise it would be interpreted as PHP code. Like the example from the manual for preg_replace:<br />
<br />
preg_replace("/(&lt;\/?)(\w+)([^&gt;]*&gt;)/e",<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "'\\1'.strtoupper('\\2').'\\3'",<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $html_body);<br />
<br />
To make this easier, the data in a backreference with /e is run through addslashes() before being inserted in your replacement expression. So if you have the string<br />
<br />
&nbsp;He said: "You're here"<br />
<br />
It would become:<br />
<br />
&nbsp;He said: \"You\'re here\"<br />
<br />
...and be inserted into the expression.<br />
However, if you put this inside a set of single quotes, PHP will not strip away all the slashes correctly! Try this:<br />
<br />
&nbsp;print ' He said: \"You\'re here\" ';<br />
&nbsp;Output: He said: \"You're here\"<br />
<br />
This is because the sequence \" inside single quotes is not recognized as anything special, and it is output literally.<br />
<br />
Using double-quotes to surround the string/backreference will not help either, because inside double-quotes, the sequence \' is not recognized and also output literally. And in fact, if you have any dollar signs in your data, they would be interpreted as PHP variables. So double-quotes are not an option.<br />
<br />
The 'solution' is to manually fix it in your expression. It is easiest to use a separate processing function, and do the replacing there (i.e. use "my_processing_function('\\1')" or something similar as replacement expression, and do the fixing in that function).<br />
<br />
If you surrounded your backreference by single-quotes, the double-quotes are corrupt:<br />
$text = str_replace('\"', '"', $text);<br />
<br />
People using preg_replace with /e should at least be aware of this.<br />
<br />
I'm not sure how it would be best fixed in preg_replace. Because double-quotes are a really bad idea anyway (due to the variable expansion), I would suggest that preg_replace's auto-escaping is modified to suit the placement of backreferences inside single-quotes (which seemed to be the intention from the start, but was incorrectly applied).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36810""></a>
  <div class="note">
   <strong class="user">thewolf at pixelcarnage dot com</strong>
   <a href="#36810" class="date">23-Oct-2003 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I got sick of trying to replace just a word, so I decided I would write my own string replacement code. When that code because far to big and a little faulty I decided to use a simple preg_replace:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">/**
<br />
&nbsp;* Written by Rowan Lewis
<br />
&nbsp;* $search(string), the string to be searched for
<br />
&nbsp;* $replace(string), the string to replace $search
<br />
&nbsp;* $subject(string), the string to be searched in
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">word_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[a-zA-Z]+/e'</span><span class="keyword">, </span><span class="string">'\'\0\' == \'' </span><span class="keyword">. </span><span class="default">$search </span><span class="keyword">. </span><span class="string">'\' ? \'' </span><span class="keyword">. </span><span class="default">$replace </span><span class="keyword">. </span><span class="string">'\': \'\0\';'</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
I hope that this code helpes someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
