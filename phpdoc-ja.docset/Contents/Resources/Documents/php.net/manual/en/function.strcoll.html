<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ロケールに基づく文字列比較</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.strcmp.html">≪ strcmp</a></li>
      <li style="float: right;"><a href="function.strcspn.html">strcspn ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.strings.html">String 関数</a></li>
    <li>ロケールに基づく文字列比較</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.strcoll" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strcoll</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5)</p><p class="refpurpose"><span class="refname">strcoll</span> &mdash; <span class="dc-title">ロケールに基づく文字列比較</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strcoll-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>strcoll</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str1</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$str2</code></span>
   )</div>

  <p class="para rdfs-comment">
   この比較は大文字小文字を区別すること、そして、
   <span class="function"><a href="function.strcmp.html" class="function">strcmp()</a></span> とは異なり、
   バイナリセーフではないことに注意してください。
  </p>
  <p class="para">
   <span class="function"><strong>strcoll()</strong></span> は比較を行う際に現在のロケールを使用します。
   ロケールが C または POSIX の場合、この関数は <span class="function"><a href="function.strcmp.html" class="function">strcmp()</a></span> と等価です。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strcoll-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">str1</code></dt>

     <dd>

      <p class="para">
       最初の文字列。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">str2</code></dt>

     <dd>

      <p class="para">
       次の文字列。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strcoll-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">str1</code> が <code class="parameter">str2</code>
   より小さい場合に 0 未満の値、<code class="parameter">str1</code> が
   <code class="parameter">str2</code> より大きい場合に 0 より大きな値、
   両者が等しい場合に 0 を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.strcoll-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.2.3</td>
       <td>
        この関数が win32 でも動作するようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strcoll-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 正規表現によるマッチングを行う</span></li>
    <li class="member"><span class="function"><a href="function.strcmp.html" class="function" rel="rdfs-seeAlso">strcmp()</a> - バイナリセーフな文字列比較</span></li>
    <li class="member"><span class="function"><a href="function.strcasecmp.html" class="function" rel="rdfs-seeAlso">strcasecmp()</a> - 大文字小文字を区別しないバイナリセーフな文字列比較を行う</span></li>
    <li class="member"><span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - 文字列の一部分を返す</span></li>
    <li class="member"><span class="function"><a href="function.stristr.html" class="function" rel="rdfs-seeAlso">stristr()</a> - 大文字小文字を区別しない strstr</span></li>
    <li class="member"><span class="function"><a href="function.strncasecmp.html" class="function" rel="rdfs-seeAlso">strncasecmp()</a> - バイナリセーフで大文字小文字を区別しない文字列比較を、最初の n 文字について行う</span></li>
    <li class="member"><span class="function"><a href="function.strncmp.html" class="function" rel="rdfs-seeAlso">strncmp()</a> - 最初の n 文字についてバイナリセーフな文字列比較を行う</span></li>
    <li class="member"><span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - 文字列が最初に現れる位置を見つける</span></li>
    <li class="member"><span class="function"><a href="function.setlocale.html" class="function" rel="rdfs-seeAlso">setlocale()</a> - ロケール情報を設定する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="30575""></a>
  <div class="note">
   <strong class="user">sakkarinlaohawisut15 at hotmail dot com</strong>
   <a href="#30575" class="date">22-Mar-2003 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strcoll()'s behavior is sometimes a little bit confusing. It depends on LC_COLLATE in your locale.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;$a </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$b </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br />
<br />
&nbsp;print </span><span class="default">strcmp </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints 1<br />
<br />
</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"C: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints 1<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_DE'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"de_DE: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_CH'</span><span class="keyword">);<br />
print </span><span class="string">"de_CH: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'en_US'</span><span class="keyword">);<br />
&nbsp;print </span><span class="string">"en_US: " </span><span class="keyword">. </span><span class="default">strcoll </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// prints -2<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is useful e. g. if want to sort an array by using strcoll:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;$a </span><span class="keyword">= array (</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);<br />
<br />
&nbsp;</span><span class="default">setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">usort </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'strcoll'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This is like sort($a):<br />
&nbsp;Array<br />
&nbsp;(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; B<br />
&nbsp; [2] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; ?<br />
&nbsp;)<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;setlocale </span><span class="keyword">(</span><span class="default">LC_COLLATE</span><span class="keyword">, </span><span class="string">'de_DE'</span><span class="keyword">);<br />
</span><span class="default">usort </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="string">'strcoll'</span><span class="keyword">);<br />
&nbsp;</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)<br />
<br />
</span><span class="default">?&gt;<br />
</span> <br />
This is completely different:<br />
&nbsp;Array<br />
&nbsp;(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; ?<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; b<br />
&nbsp; [5] =&gt; B<br />
&nbsp;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24730""></a>
  <div class="note">
   
   <a href="#24730" class="date">27-Aug-2002 04:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that some platforms implement strcmp() and strcasecmp() according to the current locale when strings are not binary equal, so that strcmp() and strcoll() will return the same value! This depends on how the PHP strcmp() function is compiled (i.e. if it uses the platform specific strcmp() found in its standard library!).<br />
In that case, the only difference between strcoll() and strcmp() is that strcoll() may return 0 for distinct strings(i.e. consider strings are equal) while strcmp() will differentiate them if they have distinct binary encoding! This typically occurs on Asian systems.<br />
What you can be sure is that strcmp() will always differentiate strings that are encoded differently, but the relative order may still use the current locale setting for collation order!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
