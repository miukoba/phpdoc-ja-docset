<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>相対的な書式</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="datetime.formats.compound.html">≪ 複合的な書式</a></li>
      <li style="float: right;"><a href="timezones.html">サポートされるタイムゾーンのリスト ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="datetime.formats.html">サポートする日付と時刻の書式</a></li>
    <li>相対的な書式</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="datetime.formats.relative" class="sect1">
  <h2 class="title">相対的な書式</h2>
  <p class="para">
   このページでは、
   <span class="function"><a href="function.strtotime.html" class="function">strtotime()</a></span> や <a href="class.datetime.html" class="classname">DateTime</a> そして
   <span class="function"><a href="function.date-create.html" class="function">date_create()</a></span> のパーサーが理解する、
   さまざまな相対日付/時刻フォーマットを説明します。
  </p>

  <table class="doctable table">
   <caption><strong>シンボル一覧</strong></caption>
   
    <thead>
     <tr>
      <th>シンボル</th>
      <th>書式</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><em>dayname</em></td>
      <td>&#039;sunday&#039; | &#039;monday&#039; | &#039;tuesday&#039; | &#039;wednesday&#039; | &#039;thursday&#039; |
      &#039;friday&#039; | &#039;saturday&#039; | &#039;sun&#039; | &#039;mon&#039; | &#039;tue&#039; | &#039;wed&#039; | &#039;thu&#039; | &#039;fri&#039; |
      &#039;sat&#039; | &#039;sun&#039;</td>
     </tr>

     <tr>
      <td><em>daytext</em></td>
      <td>&#039;weekday&#039; | &#039;weekdays&#039;</td>
     </tr>

     <tr>
      <td><em>number</em></td>
      <td>[+-]?[0-9]+</td>
     </tr>

     <tr>
      <td><em>ordinal</em></td>
      <td>&#039;first&#039; | &#039;second&#039; | &#039;third&#039; | &#039;fourth&#039; | &#039;fifth&#039; | &#039;sixth&#039; |
      &#039;seventh&#039; | &#039;eighth&#039; | &#039;ninth&#039; | &#039;tenth&#039; | &#039;eleventh&#039; | &#039;twelfth&#039; |
      &#039;next&#039; | &#039;last&#039; | &#039;previous&#039; | &#039;this&#039;</td>
     </tr>

     <tr>
      <td><em>reltext</em></td>
      <td>&#039;next&#039; | &#039;last&#039; | &#039;previous&#039; | &#039;this&#039;</td>
     </tr>

     <tr>
      <td><em>space</em></td>
      <td>[ \t]+</td>
     </tr>

     <tr>
      <td><em>unit</em></td>
      <td>((&#039;sec&#039; | &#039;second&#039; | &#039;min&#039; | &#039;minute&#039; | &#039;hour&#039; | &#039;day&#039; |
      &#039;fortnight&#039; | &#039;forthnight&#039; | &#039;month&#039; | &#039;year&#039;) &#039;s&#039;?) | &#039;weeks&#039; |
      <em>daytext</em></td>
     </tr>

    </tbody>
   
  </table>


  <table class="doctable table">
   <caption><strong>日付に基づいた表記</strong></caption>
   
    <thead>
     <tr>
      <th>書式</th>
      <th>説明</th>
      <th>例</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>&#039;yesterday&#039;</td>
      <td>昨日の00:00:00</td>
      <td>&quot;yesterday 14:00&quot;</td>
     </tr>

     <tr>
      <td>&#039;midnight&#039;</td>
      <td>時刻を00:00:00にします</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td>&#039;today&#039;</td>
      <td>時刻を00:00:00にします</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td>&#039;now&#039;</td>
      <td>今 - 単に無視されます</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td>&#039;noon&#039;</td>
      <td>時刻を12:00:00にします</td>
      <td>&quot;yesterday noon&quot;</td>
     </tr>

     <tr>
      <td>&#039;tomorrow&#039;</td>
      <td>明日の00:00:00</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td>&#039;back of&#039; <em>hour</em></td>
      <td>指定された時の15分前</td>
      <td>&quot;back of 7pm&quot;, &quot;back of 15&quot;</td>
     </tr>

     <tr>
      <td>&#039;front of&#039; <em>hour</em></td>
      <td>指定された時の15分後</td>
      <td>&quot;front of 5am&quot;, &quot;front of 23&quot;</td>
     </tr>

     <tr>
      <td>&#039;first day of&#039;</td>
      <td>現在月の最初の日にします。
      この書式に続けて月名を指定する使いかたが最適です。</td>
      <td>&quot;first day of January 2008&quot;</td>
     </tr>

     <tr>
      <td>&#039;last day of&#039;</td>
      <td>現在月の最後の日にします。
      この書式に続いて月名を指定する使いかたが最適です。</td>
      <td>&quot;last day of next month&quot;</td>
     </tr>

     <tr>
      <td><em>ordinal</em> <em>space</em> <em>dayname</em> <em>space</em> &#039;of&#039;</td>
      <td>現在月の<em>x</em>番目の曜日を計算します。</td>
      <td>&quot;first sat of July 2008&quot;</td>
     </tr>

     <tr>
      <td>&#039;last&#039; <em>space</em> <em>dayname</em> <em>space</em> &#039;of&#039;</td>
      <td>現在月の <em class="emphasis">最後の</em> 曜日を計算します。</td>
      <td>&quot;last sat of July 2008&quot;</td>
     </tr>

     <tr>
      <td><em>number</em> <em>space</em>? (<em>unit</em> | &#039;week&#039;)</td>
      <td>値を数値で指定するような、相対的な時間指定を処理します。</td>
      <td>&quot;+5 weeks&quot;, &quot;12 day&quot;, &quot;-7 weekdays&quot;</td>
     </tr>

     <tr>
      <td><em>ordinal</em> <em>space</em> <em>unit</em></td>
      <td>値を英単語で指定するような、相対的な時間指定を処理します。</td>
      <td>&quot;fifth day&quot;, &quot;second month&quot;</td>
     </tr>

     <tr>
      <td>&#039;ago&#039;</td>
      <td>直前に指定された相対的な時間指定について、正負反転します。</td>
      <td>&quot;2 days ago&quot;, &quot;8 days ago 14:00&quot;, &quot;2 months 5 days ago&quot;, &quot;2 months ago 5 days&quot;, &quot;2 days ago&quot;</td>
     </tr>

     <tr>
      <td><em>dayname</em></td>
      <td>現在からみて次にやってくる、指定された曜日にします。</td>
      <td>&quot;Monday&quot;</td>
     </tr>

     <tr>
      <td><em>reltext</em> <em>space</em> &#039;week&#039;</td>
      <td>特別な書式 &quot;weekday + last/this/next week&quot; を処理します。</td>
      <td>&quot;Monday next week&quot;</td>
     </tr>

    </tbody>
   
  </table>


  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    相対的な記述は、相対的でない記述の <em class="emphasis">後で</em> 処理されます。
    このため、 &quot;+1 week july 2008&quot; と &quot;july 2008 +1 week&quot; とは同一になります。
   </p>
   <p class="para">
    ただし、 &quot;yesterday&quot;、 &quot;midnight&quot;、 &quot;today&quot;、 &quot;noon&quot; そして &quot;tomorrow&quot;
    はこのルールの例外です。
    つまり、 &quot;tomorrow 11:00&quot; と &quot;11:00 tomorrow&quot; は異なります。
    たとえば、今日が2008年7月23日だとしましょう。
    このときの1つ目の結果は &quot;2008-07-24 11:00&quot; ですが、
    2つ目の方は &quot;2008-07-24 00:00&quot; となります。
    このような結果になる理由は、
    これら5つの記述が現在時刻に直接影響するためです。
   </p>
  </p></blockquote>

  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    日付/時刻文字列中の曜日指定が現在の曜日と同じ場合は、
    以下の点に注意してください。
    この場合、日付文字列中の曜日は、曜日を明示的に指定しなかった場合に
    日付文字列の相対的でない部分から計算される曜日と同一ではありますが、
    指定しなくても同じというわけではありません。
   </p>
   <ol type="1">
    <li class="listitem">
     <span class="simpara">
      &quot;<em>dayname</em>&quot; は、 日付を進め <em class="emphasis">ません</em> 。
      (例: &quot;Wed July 23rd, 2008&quot; は &quot;2008-07-23&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>number</em> <em>dayname</em>&quot; は、
      日付を進め<em class="emphasis">ません</em> 。
      (例: &quot;1 wednesday july 23rd, 2008&quot; は &quot;2008-07-23&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>number</em> week <em>dayname</em>&quot; は、
      指定された週を加算しますが、
      さらに日付を進めることは<em class="emphasis">しません</em>。
      この場合、&quot;<em>number</em> week&quot; と
      &quot;<em>dayname</em>&quot; は 2 つの別個のブロックとなります。
      (例: &quot;+1 week wednesday july 23rd, 2008&quot; は &quot;2008-07-30&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>ordinal</em> <em>dayname</em>&quot;
      は、日付を別の日まで進め<em class="emphasis">ます</em>。
      (例: &quot;first wednesday july 23rd, 2008&quot; は &quot;2008-07-30&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>number</em> week <em>ordinal</em>
      <em>dayname</em>&quot; は、まず指定された週を加算し、
      それから日付を別の日まで<em class="emphasis">進めます</em>。
      この場合、 &quot;<em>number</em> week&quot; と
      &quot;<em>ordinal</em> <em>dayname</em>&quot;
      は2つの別個のブロックとなります。
      (例: &quot;+1 week first wednesday july 23rd, 2008&quot; は &quot;2008-08-06&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>ordinal</em> <em>dayname</em> &#039;of&#039; &quot;
      は日付を進め <em class="emphasis">ません</em> 。
      (例: &quot;first wednesday of july 23rd, 2008&quot; は &quot;2008-07-02&quot; の意味です。
      なぜなら、&#039;of&#039;を含む一連の語群 &#039;first wednesday of july&#039; が
      相対的な書式として処理されることで
      日付を同月の &#039;1&#039; 日にリセットしてしまい、&#039;23rd&#039; は無視されてしまうのです。)
     </span>
    </li>
   </ol>
   <p class="para">
    また、書式 &quot;<em>ordinal</em>
    <em>space</em> <em>dayname</em>
    <em>space</em> &#039;of&#039; &quot; と &quot;&#039;last&#039; <em>space</em>
    <em>dayname</em> <em>space</em> &#039;of&#039; &quot;
    に含まれる &quot;of&quot; は少々特別扱いなので、注意してください。
   </p>
   <ol type="1">
    <li class="listitem">
     <span class="simpara">
      日付を指定月の1日にします。
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>ordinal</em> <em>dayname</em> &#039;of&#039; &quot;
      は日付を進め <em class="emphasis">ません</em> 。
      (例: &quot;first tuesday of july 2008&quot; は &quot;2008-07-01&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;<em>ordinal</em> <em>dayname</em> &quot;
      は日付を進め <em class="emphasis">ます</em> 。
      (例: &quot;first tuesday july 2008&quot; は &quot;2008-07-08&quot; の意味です。上記の項番4を参照。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;&#039;last&#039; <em>dayname</em> &#039;of&#039; &quot; は、
      指定された曜日（<em>dayname</em>）の同月最後の日を返します。
      (例: &quot;last wed of july 2008&quot; は &quot;2008-07-30&quot; の意味です。)
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      &quot;&#039;last&#039; <em>dayname</em>&quot; は、
      現在日付からみて直前の、指定された曜日（<em>dayname</em>）を返します。
      (例: &quot;last wed july 2008&quot; は &quot;2008-06-25&quot; の意味です。
      まず &quot;july 2008&quot; を処理して現在日付を &quot;2008-07-01&quot; とみなし、
      次に &quot;last wed&quot; により直前の水曜日、つまり &quot;2008-06-25&quot; へと移動します。)
     </span>
    </li>
   </ol>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    月数を相対指定すると、その途中に経過する月の日数を使って結果を算出します。
    たとえば &quot;+2 month 2011-11-30&quot; の結果は &quot;2012-01-30&quot; となります。
    11 月の日数は 30 日、12 月の日数は 31 日なので、
    その合計である 61 日後となるわけです。
   </p>
  </p></blockquote>
  
  <div class="sect2">
   <h3 class="title">変更履歴</h3>
   <p class="para">
    <table class="doctable informaltable">
     
      <thead>
       <tr>
        <th>バージョン</th>
        <th>説明</th>
       </tr>

      </thead>

      <tbody class="tbody">
       <tr>
        <td>5.3.3</td>
        <td>
         &quot;first day&quot; と &quot;last day&quot; が、それぞれ &quot;+1 day&quot; と &quot;-1 day&quot;
         のように振る舞うようになりました。以前はそれぞれ &quot;first day of&quot; と &quot;last day of&quot; でした。
        </td>
       </tr>

      </tbody>
     
    </table>

   </p>
  </div>
 </div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113140""></a>
  <div class="note">
   <strong class="user">shkkmo at gmail dot com</strong>
   <a href="#113140" class="date">05-Sep-2013 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a fairly simple function I wrote to avoid the issues with adding/subtracting months that has been mentioned by cristinawithout and many others.<br />
<br />
I needed this function to be able handle monthly billing cycles properly. It handles positive and negative values for months. It also can be used to side step a similar issues for adding years on leap days (e.g. strtotime('2012/2/29 +1 year') by passing in multiples of 12 (e.g. addMonthsToTime(12, strtotime('2012/2/29'))<br />
<br />
&lt;?<br />
function addMonthsToTime($numMonths = 1, $timeStamp = null){<br />
&nbsp;&nbsp;&nbsp; $timeStamp === null and $timeStamp = time();//Default to the present<br />
&nbsp;&nbsp;&nbsp; $newMonthNumDays =&nbsp; date('d',strtotime('last day of '.$numMonths.' months', $timeStamp));//Number of days in the new month<br />
&nbsp;&nbsp;&nbsp; $currentDayOfMonth = date('d',$timeStamp);<br />
&nbsp;&nbsp;&nbsp; if($currentDayOfMonth &gt; $newMonthNumDays){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $newTimeStamp = strtotime('-'.($currentDayOfMonth - $newMonthNumDays).' days '.$numMonths.' months', $timeStamp);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $newTimeStamp = strtotime($numMonths.' months', $timeStamp);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $newTimeStamp;<br />
&nbsp; }<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112126""></a>
  <div class="note">
   <strong class="user">chris at burnhamup dot com</strong>
   <a href="#112126" class="date">08-May-2013 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using strtotime('DAYNAME') like strtotime('Tuesday') returns midnight on the specified day. It doesn't preserve the current time or the time passed into the function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108317""></a>
  <div class="note">
   <strong class="user">oguzkonya34 at gmail dot com</strong>
   <a href="#108317" class="date">17-Apr-2012 05:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
April 1st, 2012 is Sunday. You might expect to get April 2nd, 2012 with 'Monday next week', however this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F jS, Y'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'Monday next week 2012-04-01'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
returns April 9th, 2012. To get April 2nd, you need to use this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F jS, Y'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'next Monday 2012-04-01'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Apparently 'next week' advances the week if and only if the day is Sunday. This:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F jS, Y'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'Monday next week 2012-03-31'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
would still return April 2nd.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106441""></a>
  <div class="note">
   <strong class="user">scragar at gmail dot com</strong>
   <a href="#106441" class="date">09-Nov-2011 05:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just for those who want the last day of the year without calling the function twice:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">strToTime</span><span class="keyword">(</span><span class="string">'1/1 next year -1 day'</span><span class="keyword">)<br />
);<br />
</span><span class="comment">//&nbsp;&nbsp; 2011-12-31<br />
</span><span class="default">?&gt;<br />
</span><br />
For reference this is actually saying "Take the first day of the first month next year, then subtract 1 day".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105784""></a>
  <div class="note">
   <strong class="user">matt</strong>
   <a href="#105784" class="date">14-Sep-2011 11:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the ordinal being used is "last" and the next month is n, use the "n 1". Otherwise, if the previous month is p and it has d number of days in it, use "p d".
<br />

<br />
For example: "last thursday of November" becomes "last thursday December 1" and "fourth thursday of November" becomes "fourth thursday September 30th"
<br />

<br />
Hopes this helps someone out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104214""></a>
  <div class="note">
   <strong class="user">erwin at darcoury dot nl</strong>
   <a href="#104214" class="date">01-Jun-2011 03:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP 5.2, "first monday of may 2011" is invalid, but "first monday may 2011" does work. Simply omit "of" if above examples do not work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103206""></a>
  <div class="note">
   <strong class="user">geneticdrift</strong>
   <a href="#103206" class="date">31-Mar-2011 07:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Month skipping has issues with number of days in the month.<br />
<br />
'+1 month' may move to the following month if the next month has less days than the current:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">print </span><span class="default">date</span><span class="keyword">(</span><span class="string">'d M Y H:i:s'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'+1 month'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'Thu Mar 31 19:50:41 IST 2011'</span><span class="keyword">))); </span><span class="default">?&gt;<br />
</span>Prints: 01 May 2011 19:50:41<br />
<br />
But with 'last day of +1 month' the result is different:<br />
<br />
<span class="default">&lt;?php </span><span class="keyword">print </span><span class="default">date</span><span class="keyword">(</span><span class="string">'d M Y H:i:s'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'last day of +1 month'</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'Thu Mar 31 19:50:41 IST 2011'</span><span class="keyword">))); </span><span class="default">?&gt;<br />
</span>Prints: 30 Apr 2011 19:50:41<br />
<br />
(PHP 5.3.3)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
