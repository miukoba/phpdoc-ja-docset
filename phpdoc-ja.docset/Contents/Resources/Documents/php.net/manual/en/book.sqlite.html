<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>SQLite</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.pg-version.html">≪ pg_version</a></li>
      <li style="float: right;"><a href="intro.sqlite.html">導入 ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="refs.database.vendors.html">ベンダー固有のモジュール</a></li>
    <li>SQLite</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="book.sqlite" class="book">
 <h1 class="title">SQLite</h1>
 
 
 
 
 
 









 







 




 




<ul class="chunklist chunklist_book"><li><a href="intro.sqlite.html">導入</a></li><li><a href="sqlite.setup.html">インストール/設定</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="sqlite.requirements.html">要件</a></li><li><a href="sqlite.installation.html">インストール手順</a></li><li><a href="sqlite.configuration.html">実行時設定</a></li><li><a href="sqlite.resources.html">リソース型</a></li></ul></li><li><a href="sqlite.constants.html">定義済の定数</a></li><li><a href="ref.sqlite.html">SQLite 関数</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.sqlite-array-query.html">sqlite_array_query</a> &mdash; 指定したデータベースに対してクエリを実行し、配列を返す</li><li><a href="function.sqlite-busy-timeout.html">sqlite_busy_timeout</a> &mdash; ビジータイムアウト時間を設定またはビジーハンドラを無効にする</li><li><a href="function.sqlite-changes.html">sqlite_changes</a> &mdash; 直近のSQLステートメントにより変更されたレコード数を返す</li><li><a href="function.sqlite-close.html">sqlite_close</a> &mdash; オープンされたSQLiteデータベースを閉じる</li><li><a href="function.sqlite-column.html">sqlite_column</a> &mdash; カレントの結果セットのレコードからカラムを1列取得する</li><li><a href="function.sqlite-create-aggregate.html">sqlite_create_aggregate</a> &mdash; SQLステートメントで使用する集約UDFを登録する</li><li><a href="function.sqlite-create-function.html">sqlite_create_function</a> &mdash; SQLステートメントで使用するために&quot;通常の&quot;ユーザー定義関数を登録する</li><li><a href="function.sqlite-current.html">sqlite_current</a> &mdash; 結果セットからカレントのレコードを配列として取得する</li><li><a href="function.sqlite-error-string.html">sqlite_error_string</a> &mdash; エラーコードの説明を返す</li><li><a href="function.sqlite-escape-string.html">sqlite_escape_string</a> &mdash; クエリパラメータ用に文字列をエスケープする</li><li><a href="function.sqlite-exec.html">sqlite_exec</a> &mdash; 与えられたデータベースに対して結果を伴わないクエリを実行する</li><li><a href="function.sqlite-factory.html">sqlite_factory</a> &mdash; SQLite データベースをオープンし、SQLiteDatabse オブジェクトを返す</li><li><a href="function.sqlite-fetch-all.html">sqlite_fetch_all</a> &mdash; 結果セットから全てのレコードを配列の配列として取得する</li><li><a href="function.sqlite-fetch-array.html">sqlite_fetch_array</a> &mdash; 結果セットから次のレコードを配列として取得する</li><li><a href="function.sqlite-fetch-column-types.html">sqlite_fetch_column_types</a> &mdash; 特定のテーブルからカラム型の配列を返す</li><li><a href="function.sqlite-fetch-object.html">sqlite_fetch_object</a> &mdash; 結果セットから次のレコードをオブジェクトとして取得する</li><li><a href="function.sqlite-fetch-single.html">sqlite_fetch_single</a> &mdash; 結果セットの最初のカラムを文字列として取得する</li><li><a href="function.sqlite-fetch-string.html">sqlite_fetch_string</a> &mdash; sqlite_fetch_single のエイリアス</li><li><a href="function.sqlite-field-name.html">sqlite_field_name</a> &mdash; 特定のフィールドの名前を返す</li><li><a href="function.sqlite-has-more.html">sqlite_has_more</a> &mdash; まだレコードがあるかないかを返す</li><li><a href="function.sqlite-has-prev.html">sqlite_has_prev</a> &mdash; 前のレコードがあるかどうかを返す</li><li><a href="function.sqlite-key.html">sqlite_key</a> &mdash; カレントレコードのインデックスを返す</li><li><a href="function.sqlite-last-error.html">sqlite_last_error</a> &mdash; データベースに関する直近のエラーコードを返す</li><li><a href="function.sqlite-last-insert-rowid.html">sqlite_last_insert_rowid</a> &mdash; 直近に挿入されたレコードのrowidを返す</li><li><a href="function.sqlite-libencoding.html">sqlite_libencoding</a> &mdash; リンクされているSQLiteライブラリのエンコーディングを返す</li><li><a href="function.sqlite-libversion.html">sqlite_libversion</a> &mdash; リンクされているSQLiteライブラリのバージョンを返す</li><li><a href="function.sqlite-next.html">sqlite_next</a> &mdash; 次のレコード番号へシークする</li><li><a href="function.sqlite-num-fields.html">sqlite_num_fields</a> &mdash; 結果セットのフィールド数を返す</li><li><a href="function.sqlite-num-rows.html">sqlite_num_rows</a> &mdash; 結果セットのレコード数を返す</li><li><a href="function.sqlite-open.html">sqlite_open</a> &mdash; SQLiteデータベースをオープンする。データベースが存在しない場合は作
   成する</li><li><a href="function.sqlite-popen.html">sqlite_popen</a> &mdash; SQLiteデータベースへの持続的ハンドルをオープンする。存在しない場合
   には、データベースを作成する</li><li><a href="function.sqlite-prev.html">sqlite_prev</a> &mdash; 結果セットの前のレコード番号へシークする</li><li><a href="function.sqlite-query.html">sqlite_query</a> &mdash; 指定したデータベースに対してクエリを実行し、結果ハンドル
  を返す</li><li><a href="function.sqlite-rewind.html">sqlite_rewind</a> &mdash; 先頭レコード番号へシークする</li><li><a href="function.sqlite-seek.html">sqlite_seek</a> &mdash; 特定のレコード番号へシークする</li><li><a href="function.sqlite-single-query.html">sqlite_single_query</a> &mdash; クエリを実行し、単一カラムもしくは先頭レコードの値に対する配列を返す</li><li><a href="function.sqlite-udf-decode-binary.html">sqlite_udf_decode_binary</a> &mdash; UDFにパラメータとして渡されたバイナリデータをデコードする</li><li><a href="function.sqlite-udf-encode-binary.html">sqlite_udf_encode_binary</a> &mdash; UDFから返す前にバイナリデータをエンコードする</li><li><a href="function.sqlite-unbuffered-query.html">sqlite_unbuffered_query</a> &mdash; 事前取得していないクエリを実行し、全てのデータをバッファリングする</li><li><a href="function.sqlite-valid.html">sqlite_valid</a> &mdash; まだレコードが残っているかどうかを返す</li></ul></li></ul></div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103842""></a>
  <div class="note">
   <strong class="user">nosdudefr at gmail dot com</strong>
   <a href="#103842" class="date">06-May-2011 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding&nbsp; the table creation you can optimize this code a bit by using the built in " CREATE TABLE IF NOT EXISTS &lt;tablename&gt;". This will let the table creation decision to the sqlite engine.<br />
<br />
Then, if i may, your code could be something like : <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">SQLiteDatabase</span><span class="keyword">(</span><span class="string">'filename'</span><span class="keyword">)) {<br />
</span><span class="comment">// first let the engine check table, and create it eventualy<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$q </span><span class="keyword">= @</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'CREATE TABLE IF NOT EXISTS tablename (id int, requests int, PRIMARY KEY (id))'</span><span class="keyword">;<br />
<br />
</span><span class="comment">//the rest of the code, according error checks etc<br />
// ...<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
For more "tweaks" feel free to look at sqlite language ref : <a href="http://www.sqlite.org/lang_createtable.html" rel="nofollow" target="_blank">http://www.sqlite.org/lang_createtable.html</a><br />
<br />
Have fun with this powerfull&amp;simple engine :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99057""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#99057" class="date">25-Jul-2010 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As of July 2010, there are two ways to use SQLite from PHP:<br />
- procedural: sqlite (=sqlite2), sqlite3<br />
- object-oriented: SQLite3, PDO</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91488""></a>
  <div class="note">
   <strong class="user">Andrew Paul Dickey</strong>
   <a href="#91488" class="date">12-Jun-2009 06:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you intend to implement 2.x releases of SQLite with your development you are in the right place, as this library is suitable for use with your application (reference <a href="http://us.php.net/manual/en/book.sqlite.php" rel="nofollow" target="_blank">http://us.php.net/manual/en/book.sqlite.php</a>).<br />
<br />
If you intend to use SQLite 3.x releases of SQLite with your development please refer to the section on PHP Data Objects, and specifically the PDO-SQLite implementation available at(references: <a href="http://us.php.net/manual/en/book.pdo.php , http://au2.php.net/manual/en/ref.pdo-sqlite.php" rel="nofollow" target="_blank">http://us.php.net/manual/en/book.pdo.php , http://au2.php.net/manual/en/ref.pdo-sqlite.php</a>).<br />
<br />
It is my hope that this post will save both new users and experienced developers time during their initial or a new implementation of PHP &amp; SQLite by encouraging them to use the appropriate libraries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82875""></a>
  <div class="note">
   <strong class="user">saivert at saivert dot com</strong>
   <a href="#82875" class="date">30-Apr-2008 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to open a database, create a table if it doesn't exist and inserting initial value.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$db </span><span class="keyword">= new </span><span class="default">SQLiteDatabase</span><span class="keyword">(</span><span class="string">'filename'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= @</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">'SELECT requests FROM tablename WHERE id = 1'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$q </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryExec</span><span class="keyword">(</span><span class="string">'CREATE TABLE tablename (id int, requests int, PRIMARY KEY (id)); INSERT INTO tablename VALUES (1,1)'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hits </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">fetchSingle</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$hits </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">queryExec</span><span class="keyword">(</span><span class="string">"UPDATE tablename SET requests = '</span><span class="default">$hits</span><span class="string">' WHERE id = 1"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; die(</span><span class="default">$err</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Use this as boilerplate code for any new project using SQLite.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
