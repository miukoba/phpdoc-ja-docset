<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>PHP と HTML</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="faq.passwords.html">≪ パスワードのハッシュ</a></li>
      <li style="float: right;"><a href="faq.com.html">PHP と COM ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="faq.html">FAQ</a></li>
    <li>PHP と HTML</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="faq.html" class="chapter">
  <h1>PHP と HTML</h1>

  
  
  <p class="para">
   PHP と HTML は深く関係しています。PHP は HTML を生成し、HTML には PHP に
   送信される情報が記述されています。
   以下の FAQ を読む前に、どうやって <a href="language.variables.external.html" class="link">
   外部から来る変数</a>を取得するかを読んでおくことは重要です。
   このマニュアルにはこのトピックに関するよい例があります。
   <em>register_globals</em> の意味するところにも
   注意を払ってください。
  </p>

  <div class="qandaset"><ol class="qandaset_questions"><li><a href="#faq.html.encoding">
     
      フォームから、もしくは URL から値を渡す場合にはどういった
      エンコード/デコードが必要なのですか？
     
    </a></li><li><a href="#faq.html.form-image">
     
      &lt;input type=&quot;image&quot;&gt; タグを使おうとしているのですが、変数
      $foo.x と $foo.y が使えません。どうすればよいのですか?
     
    </a></li><li><a href="#faq.html.arrays">
     HTML フォームで配列を使用するにはどうすればよいですか？
    </a></li><li><a href="#faq.html.select-multiple">
     
      &quot;select multiple&quot; タグで選択された全ての結果を取得するには
      どうすればよいですか?
     
    </a></li><li><a href="#faq.html.javascript-variable">
     
      Javascript から PHP に変数を渡すには?
     
    </a></li></ol></div>
   <dl class="qandaentry" id="faq.html.encoding">
    <dt><strong>
     
      フォームから、もしくは URL から値を渡す場合にはどういった
      エンコード/デコードが必要なのですか？
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      エンコードが重要になる場面はいくつかあります。
      <span class="type"><a href="language.types.string.html" class="type string">string</a></span> <var class="varname"><var class="varname">$data</var></var> という
      エンコードされていない文字列データを渡す場合について考えてみると、
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para">
         HTML を通じて渡す場合： 文字列にはどのような値が含まれるか分からないので、
         データは<em class="emphasis">必ず</em> htmlspecialchars を行い、
         ダブルクオートで囲まなければなりません。
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         URL を通じて渡す場合: URL はいくつかのパーツから成り立ちます。
         このデータをそのパーツのうちの一つであると解釈させたいならば、
         <span class="function"><a href="function.urlencode.html" class="function">urlencode()</a></span> でエンコード
         <em class="emphasis">しなければなりません。</em>
        </p>
       </li>
      </ul>
     </p>
     <p class="para">
      <div class="example" id="example-5686">
       <p><strong>例1 HTML の hidden 要素</strong></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;input&nbsp;type="hidden"&nbsp;value="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&nbsp;/&gt;'</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <span class="simpara">
        <var class="varname"><var class="varname">$data</var></var> を <span class="function"><a href="function.urlencode.html" class="function">urlencode()</a></span> をしては
        いけません。なぜなら、その作業はブラウザに任されているからです。
        一般に普及している全てのブラウザは正しくこの処理を行ってくれます。
        ただ、この処理はメソッド(GET や POST)が何であるかにかかわらずに
        行われるということに気をつけてください。この処理に気づくのは
        GET リクエストのときだけになるでしょう。なぜなら POST
        リクエストの内容は通常目に触れることは無いからです。
       </span>
      </p></blockquote>
      <div class="example" id="example-5687">
       <p><strong>例2 ユーザーによって編集するデータ</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;textarea&nbsp;name='mydata'&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/textarea&gt;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <span class="simpara">
        ブラウザはエスケープされたシンボルを解釈するので、data は
        意図したとおりに表示されます。
       </span>
       <span class="simpara">
        フォームの内容を送信するとき、GET か POST かにかかわらず data は
        ブラウザによって URL エンコードされ、PHP によって URL デコードされます。
        要は、URL エンコード/デコードを自分で行う必要はなく、これらの処理は
        すべて自動的に行われると言うことです。
       </span>
      </p></blockquote>
      <div class="example" id="example-5688">
       <p><strong>例3 URL 中の場合</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;a&nbsp;href="'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #DD0000">"/nextpage.php?stage=23&amp;data="&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">urlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">))&nbsp;.&nbsp;</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <span class="simpara">
        この例では、実は GET リクエストを摸擬しています。このため、data
        を手動で <span class="function"><a href="function.urlencode.html" class="function">urlencode()</a></span> する必要があります。
       </span>
      </p></blockquote>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <span class="simpara">
        全ての URL を <span class="function"><a href="function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span> する必要があります。
        なぜなら、この URL は HTML の value 属性として扱われるからです。
        この場合は、ブラウザはまず <span class="function"><a href="function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span> された
        データを元に戻し、それから URL を渡します。URL は
        <span class="function"><a href="function.urlencode.html" class="function">urlencode()</a></span> されているので、PHP はこれを正しく
        解釈することができます。
       </span>
       <span class="simpara">
        URL 中の <em>&amp;</em> が <em>&amp;amp;</em>
        に置き換えられていることに気づくでしょう。もしあなたがこれを忘れても
        ほとんどのブラウザは元に戻してくれますが、必ずそうしてくれるとは
        限りませんので、URL が動的に変更されるものでなくても
        URL は <span class="function"><a href="function.htmlspecialchars.html" class="function">htmlspecialchars()</a></span> される<em class="emphasis">べき
        </em>です。
       </span>
      </p></blockquote>
     </p>
     
    </dd>
   </dl>

   <dl class="qandaentry" id="faq.html.form-image">
    <dt><strong>
     
      &lt;input type=&quot;image&quot;&gt; タグを使おうとしているのですが、変数
      $foo.x と $foo.y が使えません。どうすればよいのですか?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      以下のようなタグを使えば、標準のボタンの代わりに画像を使用して
      フォームを送信することができます。
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input type=&quot;image&quot; src=&quot;image.gif&quot; name=&quot;foo&quot; /&gt;</pre>
</div>
      </div>

      ユーザーが画像のどこかをクリックすると、そのフォームの内容に foo.x
      と foo.y という 2 つの変数が追加され、サーバーに送信されます。
     </p>
     <p class="para">
      PHP では $foo.x と $foo.y という名前は変数名として正しくないので、
      自動的に $foo_x と $foo_y という名前に変換されます。要は、ピリオドが
      アンダースコアに置き換えられる、と言うことです。そのため、これらの
      変数にアクセスする際には
      <a href="language.variables.external.html" class="link">外部から来る変数
      </a> の取得についてのセクションで記述されているのと同様な方法を
      とります。たとえば <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET['foo_x']</a></var></var> などです。
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
         リクエスト変数名の中のスペースは、アンダースコアに置き換えられます。
       </p>
      </p></blockquote>
     </p>
    </dd>
   </dl>

   <dl class="qandaentry" id="faq.html.arrays">
    <dt><strong>
     HTML フォームで配列を使用するにはどうすればよいですか？
    </strong></dt>
    <dd class="answer">
     <p class="para">
      フォームの内容を PHP スクリプトで<a href="language.types.array.html" class="link">配列</a>として受け取るには、
      &lt;input&gt;、&lt;select&gt; あるいは &lt;textarea&gt; といった要素の name
      を以下のように指定します：
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input name=&quot;MyArray[]&quot; /&gt;
&lt;input name=&quot;MyArray[]&quot; /&gt;
&lt;input name=&quot;MyArray[]&quot; /&gt;
&lt;input name=&quot;MyArray[]&quot; /&gt;</pre>
</div>
      </div>

      変数名の最後にある括弧に注意してください。これにより、フォー
      ムの内容が配列として扱われます。異なる要素に同じ名前をつけること
      で要素を配列にグループ分けすることができます。
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input name=&quot;MyArray[]&quot; /&gt;
&lt;input name=&quot;MyArray[]&quot; /&gt;
&lt;input name=&quot;MyOtherArray[]&quot; /&gt;
&lt;input name=&quot;MyOtherArray[]&quot; /&gt;</pre>
</div>
      </div>

      上記の HTML の場合、MyArray と MyOtherArray という 2 つの配列が生成され、
      PHP スクリプトに送信されます。また、配列に特定のキーを設定する
      こともできます。
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;input name=&quot;AnotherArray[]&quot; /&gt;
&lt;input name=&quot;AnotherArray[]&quot; /&gt;
&lt;input name=&quot;AnotherArray[email]&quot; /&gt;
&lt;input name=&quot;AnotherArray[phone]&quot; /&gt;</pre>
</div>
      </div>

      この場合、配列 AnotherArray のキーは 0、1、email そして phone となります。
     </p>
     <p class="para">
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
         HTML に配列のキーを指定するかどうかは自由です。キーを指定しなかった
         場合はフォームに現れる順番に番号がつけられます。最初の例だと、
         キーは 0、1、2、3 となります。
       </p>
      </p></blockquote>
     </p>
     <p class="para">
      <a href="ref.array.html" class="link">配列関数</a>と
      <a href="language.variables.external.html" class="link">外部から来る変数
      </a>も参照ください。
     </p>
    </dd>
   </dl>
   
   <dl class="qandaentry" id="faq.html.select-multiple">
    <dt><strong>
     
      &quot;select multiple&quot; タグで選択された全ての結果を取得するには
      どうすればよいですか?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      &quot;select multiple&quot; タグを使うと、ユーザーはリストから複数の項目を
      選択することができるようになります。選択された項目はフォームの
      action で指定されたハンドラに渡されます。問題は、これらの値が全て
      同じ名前で渡されることです。つまり、
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;select name=&quot;var&quot; multiple=&quot;yes&quot;&gt;</pre>
</div>
      </div>

      選択されたそれぞれの項目は action のハンドラに次のように渡されます：
      <div class="example-contents"><div class="cdata"><pre>
var=option1
var=option2
var=option3
      </pre></div></div>

      それぞれの項目は前の変数 <var class="varname"><var class="varname">$var</var></var> の値を上書きして
      しまいます。この問題を解決するには、PHPの &quot;フォームの値を配列にする&quot;
      機能を使います。以下のようにするとよいでしょう。
      <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;select name=&quot;var[]&quot; multiple=&quot;yes&quot;&gt;</pre>
</div>
      </div>

      こうすれば PHP に <var class="varname"><var class="varname">$var</var></var> を配列として扱うように
      知らせることができ、各項目の value の値は配列の要素として var[] に
      追加されます。最初の項目は <var class="varname"><var class="varname">$var[0]</var></var> になり、
      次の項目は <var class="varname"><var class="varname">$var[1]</var></var>... というようになります。
      <span class="function"><a href="function.count.html" class="function">count()</a></span> 関数を使えば選択された項目の数を知る
      ことができます。またもし必要なら <span class="function"><a href="function.sort.html" class="function">sort()</a></span> 関数を
      使ってソートを行うこともできます。
     </p>
     <p class="para">
      JavaScript を使っている場合、フォーム要素に要素名を使って(訳注：
      document.myform.myelement.value 等の様に)アクセスしようとすると、
      要素名に含まれる <em>[]</em> が問題となることがあるので
      気をつけてください。この場合は、数字で表されるフォーム要素の ID を
      使用するか、シングルクオートで要素名を囲んでフォーム要素の配列の
      インデックスとしてアクセスしてください。例えば、以下のようにします：
      <div class="example-contents"><div class="cdata"><pre>
variable = documents.forms[0].elements[&#039;var[]&#039;];
      </pre></div></div>

     </p>
    </dd>
   </dl>

   <dl class="qandaentry" id="faq.html.javascript-variable">
    <dt><strong>
     
      Javascript から PHP に変数を渡すには?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      Javascript は（普通は）クライアントサイド技術であり、一方 PHP は（普通は）
      サーバーサイド技術です。また HTTP は&quot;ステートレスな&quot;プロトコルです。
      そのため、この二つの言語はダイレクトに変数を共有することができません。
     </p>
     <p class="para">
      しかしながら、この二つの言語の間で変数を渡すことは可能です。
      一つの方法は PHP と一緒に Javascript のコードを生成し、
      ブラウザに自動的にリフレッシュ（再ロード）させることです。
      以下の例はまさにそれで、PHP に画面の高さと幅を認識させています。
      これは通常はクライアントサイドでしかできないことです。
     </p>
     <p class="para">
      <div class="example" id="example-5689">
       <p><strong>例4 PHP による Javascript の生成</strong></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'width'</span><span style="color: #007700">])&nbsp;AND&nbsp;isset(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'height'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ジオメトリ値を出力する<br />&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"画面の幅:&nbsp;"</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'width'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"画面の高さ:&nbsp;"</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'height'</span><span style="color: #007700">]&nbsp;.</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;ジオメトリ変数を渡す<br />&nbsp;&nbsp;//&nbsp;(元のクエリ文字列を保持する<br />&nbsp;&nbsp;//&nbsp;&nbsp;&nbsp;--&nbsp;POST&nbsp;変数は別の方法で扱う必要がある)<br /><br />&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;script&nbsp;language='javascript'&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;location.href=\"</span><span style="color: #007700">${</span><span style="color: #0000BB">_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'SCRIPT_NAME'</span><span style="color: #007700">]}</span><span style="color: #DD0000">?</span><span style="color: #007700">${</span><span style="color: #0000BB">_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'QUERY_STRING'</span><span style="color: #007700">]}</span><span style="color: #DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&amp;width=\"&nbsp;+&nbsp;screen.width&nbsp;+&nbsp;\"&amp;height=\"&nbsp;+&nbsp;screen.height;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/script&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;exit();<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </dd>
   </dl>

  
 </div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114744""></a>
  <div class="note">
   <strong class="user">Jay</strong>
   <a href="#114744" class="date">01-Apr-2014 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a really large form, be sure to check your max_input_vars setting.&nbsp; Your array[] will get truncated if it exceeds this.&nbsp; <a href="http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars" rel="nofollow" target="_blank">http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107551""></a>
  <div class="note">
   <strong class="user">ciprian dot stingu at gmail dot com</strong>
   <a href="#107551" class="date">17-Feb-2012 06:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Using jquery is even easier to send (post) data between javascript and php
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//make an asynchronous request
<br />
</span><span class="keyword">$.</span><span class="default">post</span><span class="keyword">(</span><span class="string">"somefile.php"</span><span class="keyword">, {</span><span class="string">"Param1" </span><span class="keyword">: </span><span class="default">true</span><span class="keyword">, </span><span class="string">"Param2" </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">, </span><span class="string">"Param3" </span><span class="keyword">: </span><span class="string">"some text"</span><span class="keyword">}, 
<br />
&nbsp;&nbsp;&nbsp; function(</span><span class="default">received_data</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//do something with received data
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">$(</span><span class="string">"#some_element"</span><span class="keyword">).</span><span class="default">html</span><span class="keyword">(</span><span class="default">received_data</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; });
<br />

<br />
</span><span class="comment">//make a post request
<br />
</span><span class="keyword">$.</span><span class="default">ajax</span><span class="keyword">({
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">type</span><span class="keyword">: </span><span class="string">"POST"</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">url</span><span class="keyword">: </span><span class="string">"somefile.php"</span><span class="keyword">,
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">data</span><span class="keyword">: {</span><span class="string">"Param1" </span><span class="keyword">: </span><span class="default">true</span><span class="keyword">, </span><span class="string">"Param2" </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">, </span><span class="string">"Param3" </span><span class="keyword">: </span><span class="string">"some text"</span><span class="keyword">},
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">success</span><span class="keyword">: function(</span><span class="default">received_data</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {</span><span class="comment">//do something with received data},
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">async</span><span class="keyword">: </span><span class="default">false
<br />
</span><span class="keyword">});
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70990""></a>
  <div class="note">
   <strong class="user">francesco</strong>
   <a href="#70990" class="date">07-Nov-2006 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another way to pass variables from JavaScript to PHP.<br />
<br />
&lt;script type="text/javascript" language="JavaScript"&gt;<br />
&lt;!--<br />
function getScreenResolution()<br />
{<br />
&nbsp;&nbsp;&nbsp; return document.form.ScreenResolution.value = screen.width + "x" + screen.height;<br />
}<br />
//--&gt;<br />
&lt;/script&gt;<br />
&lt;form name="form" action="screen.php?show=ok" method="post" &gt;<br />
&lt;input name="ScreenResolution" type="text" size="20" maxlength="9" /&gt;<br />
&lt;input name="show" type="submit" value="Submit" onclick="getScreenResolution()" /&gt;<br />
&lt;/form&gt;<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'ScreenResolution'</span><span class="keyword">];<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68831""></a>
  <div class="note">
   <strong class="user">tchibolecafe at freemail dot hu</strong>
   <a href="#68831" class="date">12-Aug-2006 01:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notes on question "1. What encoding/decoding do I need when I pass a value through a<br />
form/URL?"<br />
<br />
Doing an htmlspecialchars() when echoing a string as an HTML attribute value is not enough to make the string safe if you have accented (non-ASCII) characters in it. See <a href="http://www.w3.org/TR/REC-html40/appendix/notes.html#non-ascii-chars " rel="nofollow" target="_blank">http://www.w3.org/TR/REC-html40/appendix/notes.html#non-ascii-chars </a><br />
<br />
The referred document recommends the following method to be used:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">fs_attr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">$path</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">};<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)&lt;</span><span class="default">128</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">.=</span><span class="default">$c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">.=</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$retval</span><span class="keyword">);<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$img_path</span><span class="keyword">=</span><span class="string">'eoua.jpg'</span><span class="keyword">;<br />
&nbsp; echo </span><span class="string">'&lt;img src="'</span><span class="keyword">.</span><span class="default">fs_attr</span><span class="keyword">(</span><span class="default">$img_path</span><span class="keyword">).</span><span class="string">'"&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
However, using utf8 encoding for path names is among others supported by Windows NT, above method fails when running for example on an Apache server on Linux.<br />
<br />
A more fail safe way:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">fs_attr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">$path</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">};<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">)&lt;</span><span class="default">128</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">.=</span><span class="default">$c</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">PHP_OS</span><span class="keyword">===</span><span class="string">'WINNT'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">.=</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$retval</span><span class="keyword">.=</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$retval</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
There may be operating systems that want utf8 encoding, other than WINNT. Even this latter one won't work on those systems. I don't know about any possibility to determine immediately which encoding to be used on the file system of the server...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60227""></a>
  <div class="note">
   <strong class="user">jetboy</strong>
   <a href="#60227" class="date">30-Dec-2005 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While previous notes stating that square brackets in the name attribute are valid in HTML 4 are correct, according to this:<br />
<br />
<a href="http://www.w3.org/TR/xhtml1/#C_8" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/#C_8</a><br />
<br />
the type of the name attribute has been changed in XHTML 1.0, meaning that square brackets in XHTML's name attribute are not valid.<br />
<br />
Regardless, at the time of writing, the W3C's validator doesn't pick this up on a XHTML document.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56639""></a>
  <div class="note">
   <strong class="user">dmsuperman at comcast dot net</strong>
   <a href="#56639" class="date">10-Sep-2005 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a great way to pass JavaScript to PHP without even leaving the page:<br />
<br />
&lt;script type="text/javascript"&gt;<br />
&lt;!--<br />
<br />
function xmlreq(){<br />
&nbsp; if(window.XMLHttpRequest){<br />
&nbsp;&nbsp;&nbsp; req = new XMLHttpRequest();<br />
&nbsp; }else if(window.ActiveXObject){<br />
&nbsp;&nbsp;&nbsp; req = new ActiveXObject("Microsoft.XMLHTTP");<br />
&nbsp; }<br />
&nbsp; return(req);<br />
}<br />
function sendPhp(url){<br />
&nbsp; var req = xmlreq();<br />
&nbsp; req.onreadystatechange = stateHandler;<br />
&nbsp; req.open("GET", url, true);<br />
&nbsp; req.send(null);<br />
}<br />
<br />
sendPhp("updatedatabase.php?username=blah&amp;displayname=whatever");<br />
//--&gt;<br />
&lt;/script&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53921""></a>
  <div class="note">
   <strong class="user">levinb at cs dot rpi dot edu</strong>
   <a href="#53921" class="date">17-Jun-2005 06:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Well, I was working on this one project, on the assumption that I could get the values of all elements with the same name from an appropriately named array.&nbsp; Well, I was *very* disappointed when I couldn't, so I made it so I did anyway.<br />
<br />
The following script should convert the raw post data to a $_POST variable, with form data from SELECT elements and their ilk being transformed into an array.&nbsp; It's heavily unoptimized, and I probably missed something, but it's relatively easy to read.&nbsp; I welcome corrections.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if (</span><span class="default">$_POST</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$postdata </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'php://input'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$uglybugger </span><span class="keyword">= </span><span class="string">'/(?&lt;=&amp;)([^&amp;=]+)(?:=([^&amp;]*))/'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matches </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$uglybugger</span><span class="keyword">, </span><span class="default">$postdata</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match_count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$match_count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]][] = </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match_count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$match_count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) == </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48636""></a>
  <div class="note">
   <strong class="user">dreptack at op dot pl</strong>
   <a href="#48636" class="date">02-Jan-2005 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to post html form through image input element. But my problem was I had to use multiple image-buttons, each one for a single row of form table. Pressing the button was mention to tell script to delete this row from table and also (in the same request) save other data from the form table.<br />
I wrote simple test-script to see what variable I should check for in a script:<br />
<br />
I have a html document:<br />
<br />
&lt;form action="test.php" method="post"&gt;<br />
&lt;input type="image" name="varscalar" src="/images/no.gif" /&gt;<br />
&lt;input type="image" name="vararray[12]" src="/images/no.gif" /&gt;<br />
&lt;/form&gt;<br />
<br />
And a php script:<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">$_POST</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"post: &lt;pre&gt;"</span><span class="keyword">; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">); echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
What I've discovered suprised me a lot!<br />
<br />
After hitting on varscalar: <br />
<br />
post: <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [varscalar_x] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [varscalar_y] =&gt; 7<br />
)<br />
<br />
After hitting on upper right corner of vararray:<br />
<br />
post: <br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [vararray] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [12] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
This mean when clicking on image-type input element, which name is an array, only y-part of a value is remembered.<br />
<br />
The result is the same on: php 4.1.2 on Win98se, php 4.3.9-1 on linux</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42968""></a>
  <div class="note">
   <strong class="user">vlad at vkelman dot com</strong>
   <a href="#42968" class="date">05-Jun-2004 04:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"4.&nbsp; How do I get all the results from a select multiple HTML tag?"<br />
<br />
I think that behavior of PHP which forces to use [] after a name of 'select' control with multiple attribute specified is very unfortunate. I understand it comes from old times when registerglobals = on was commonly used. But it creates incompatibility between PHP and ASP or other server-side scripting languages. The same HTML page with 'select' control cannot post to PHP and ASP server pages, because ASP does not require [] and automatically recognize when arrays are posted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40754""></a>
  <div class="note">
   <strong class="user">Kenn White kennwhite dot nospam at hotmail dot com</strong>
   <a href="#40754" class="date">13-Mar-2004 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Concerning XHTML Strict and array notation in forms, hopefully the information below will be useful:<br />
<br />
If I have a form, name="f", and, say, an input text box, name="user_data[Password]", then in Javascript, to reference it I would do something like:<br />
&nbsp;&nbsp;&nbsp; <br />
var foo = f['user_data[Password]'].value;<br />
<br />
Now, say that in making the switch to XHTML strict, I decide to fully embrace standards compliance, and change my form to id="f", and the input text box to id="user_data[Password]"<br />
<br />
Because these have id instead of name, I discover, that all my javascript validation routines just broke.&nbsp; It seems that I have to now change all my js code to something like:<br />
<br />
document.getElementById( 'user_data[Password]' ).focus();<br />
<br />
I test this on all the major modern browsers, and it works well.&nbsp; I'm thinking, Great!&nbsp; Until I try to validate said page.&nbsp; It turns out that the bracket characters are invalid in id attributes.&nbsp; Ack!&nbsp; So I read this thread:<br />
<br />
<a href="http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=" rel="nofollow" target="_blank">http://groups.google.com/groups?hl=en&amp;lr=&amp;ie=UTF-8&amp;oe=</a><br />
UTF-8&amp;th=78dea36fd65d9bbe&amp;seekm=<br />
pqx99.19%24006.13377%40news.ca.inter.net#link11<br />
(link needs to be spliced, sorry)<br />
<br />
What does this mean, I start asking myself?&nbsp; Do I have to abandon my goal to migrate to XHTML strict?&nbsp; Transitional seems so unsatisfying.&nbsp; And why bother with a technique that seems to work on most browsers, if it's broken.&nbsp; Alas, there is hope.<br />
<br />
But then I read <a href="http://www.w3.org/TR/xhtml1/#h-4.10 carefully.&nbsp; It says " rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/#h-4.10 carefully.&nbsp; It says </a>"name" is deprecated as a form attribute, but *NOT* specifically as an attribute in form *elements*.&nbsp; It seems my solution is to use "id" for the form itself, but I can legally use "name" for the individual form components, such as select and text input boxes.&nbsp; I get the impression that "name" as an attribute is eventually going away completely, but in extensive testing using the W3C validator, it passes "name" on form components, as long as "id" (or, strangely, nothing) is used to denote the form itself.<br />
<br />
So for XHTML strict, the bottom line:<br />
&nbsp;1. form, use id, not name<br />
&nbsp;2. input, use id if you can, but if you need to use bracketed notation (for example, passing PHP arrays), i.e., foo[], you *MUST* use name for XHTML strict validation.<br />
&nbsp;<br />
-kenn<br />
<br />
kennwhite.nospam@hotmail.com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38874""></a>
  <div class="note">
   <strong class="user">davis at risingtiger dot net</strong>
   <a href="#38874" class="date">09-Jan-2004 09:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I thought this might be useful to fellow PHP heads like myself out there.
<br />

<br />
I recently came across a need to transfer full fledged mutli-dimensional arrays from PHP to JAVASCRIPT.
<br />

<br />
So here it is and hopefuly good things come from it.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">phparray_jscript</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$jsarray</span><span class="keyword">)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">loop_through</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$dimen</span><span class="keyword">,</span><span class="default">$localarray</span><span class="keyword">)
<br />
&nbsp;&nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="default">$localarray</span><span class="keyword">.</span><span class="default">$dimen</span><span class="keyword">.</span><span class="string">"[\"</span><span class="default">$key</span><span class="string">\"] = new Array();\n"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">loop_through</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,(</span><span class="default">$dimen</span><span class="keyword">.</span><span class="string">"[\""</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">"\"]"</span><span class="keyword">),</span><span class="default">$localarray</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="default">$localarray</span><span class="keyword">.</span><span class="default">$dimen</span><span class="keyword">.</span><span class="string">"[\"</span><span class="default">$key</span><span class="string">\"] = \"</span><span class="default">$value</span><span class="string">\";\n"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;script language=\"Javascript1.1\"&gt;\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"var </span><span class="default">$jsarray</span><span class="string"> = new Array();\n"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">loop_through</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$jsarray</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/script&gt;"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30372""></a>
  <div class="note">
   <strong class="user">martellare at hotmail dot com</strong>
   <a href="#30372" class="date">15-Mar-2003 09:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I do not think you are right about not being able to specify something for the value attribute, but I can see where you would have thought it would fail:
<br />

<br />
A fair warning about testing to see if a variable exists...
<br />
when it comes to strings, the values '' and '0' are interpreted as false when tested this way...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if (</span><span class="default">$string</span><span class="keyword">) { ... }&nbsp; </span><span class="comment">//false for $string == '' || $string == '0'
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The best practice for testing to see if you received a variable from the form (which in the case of a checkbox, only happens when it is checked) is to test using this...
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">if ( isSet(</span><span class="default">$string</span><span class="keyword">) ) { ... } </span><span class="comment">//true if and only if the variable is set
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
The function tests to see if the variable has been set, regardless of its contents.
<br />

<br />
By the way, if anyone's curious, when you do make a checkbox without specifying the value attribute, the value sent from the form for that checkbox becomes 'on'.&nbsp; (That's for HTML in general, not PHP-specific).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27190""></a>
  <div class="note">
   <strong class="user">martellare at hotmail dot com</strong>
   <a href="#27190" class="date">26-Nov-2002 08:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A JavaScript Note: Using element indexes to reference form elements can cause problems when you want to add new elements to your form; it can shift the indexes of the elements that are already there.<br />
<br />
For example, You've got an array of checkboxes that exist at the beginning of a form:<br />
===================<br />
<br />
&lt;FORM&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;INPUT type="checkbox" name="fruits[]" value="apple"&gt;apple<br />
&nbsp;&nbsp;&nbsp; &lt;INPUT type="checkbox" name="fruits[]" value="orange"&gt;orange<br />
&nbsp;&nbsp;&nbsp; &lt;INPUT type="checkbox" name="fruits[]" value="banana"&gt;banana<br />
&lt;/FORM&gt;<br />
<br />
===================<br />
... These elements could be referenced in JavaScript like so:<br />
===================<br />
<br />
&lt;SCRIPT language="JavaScript" type="text/javascript"&gt;<br />
&lt;!--<br />
&nbsp;&nbsp;&nbsp; var index = 0; //could be 1 or 2 as well<br />
&nbsp;&nbsp;&nbsp; alert(document.forms[0].elements[index]);<br />
//--&gt;<br />
&lt;/SCRIPT&gt;<br />
<br />
===================<br />
However, if you added a new textbox before these elements, the checkboxes indexes become 1 - 3 instead of 0 - 2;&nbsp; That can mess up what ever code you create depending on those indexes.<br />
<br />
Instead, try referencing your html arrays in JavaScript this way.&nbsp; I know it works in Netscape 4 &amp; IE 6, I hope it to some extent is universal...<br />
===================<br />
<br />
&lt;SCRIPT language="JavaScript" type="text/javascript"&gt;<br />
&lt;!--<br />
&nbsp;&nbsp;&nbsp; var message = "";<br />
&nbsp;&nbsp;&nbsp; for (var i = 0; i &lt; document.forms[0].elements['fruits[]'].length; i++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; message += "events[" + i + "]: " + document.forms[0].elements['fruits[]'][i].value + "\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; alert(message);<br />
//--&gt;<br />
&lt;/SCRIPT&gt;<br />
<br />
===================</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26086""></a>
  <div class="note">
   <strong class="user">bas at cipherware dot nospam dot com</strong>
   <a href="#26086" class="date">17-Oct-2002 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ad 3. "How do I create arrays in a HTML &lt;form&gt;?":<br />
<br />
You may have problems to access form elements, which have [] in their name, from JavaScript. The following syntax works in IE and Mozilla (Netscape).<br />
<br />
index = 0;<br />
theForm = document.forms[0];<br />
theTextField = theForm['elementName[]'][index];</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
