<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>assertion が FALSE であるかどうかを調べる</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.assert-options.html">≪ assert_options</a></li>
      <li style="float: right;"><a href="function.cli-get-process-title.html">cli_get_process_title ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.info.html">PHP オプション/情報 関数</a></li>
    <li>assertion が FALSE であるかどうかを調べる</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.assert" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">assert</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">assert</span> &mdash; <span class="dc-title">assertion が <strong><code>FALSE</code></strong> であるかどうかを調べる</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.assert-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>assert</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$assertion</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$description</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>assert()</strong></span> は、指定した
   <code class="parameter">assertion</code> を調べて、結果が
   <strong><code>FALSE</code></strong> の場合に適切な動作をします。
  </p>
  <p class="para">
   <code class="parameter">assertion</code> が文字列として指定された場合、
   <span class="function"><strong>assert()</strong></span>によりPHPコードとして評価されます。
   文字列 <code class="parameter">assertion</code>が優れているところは、
   assertion のチェックがオフになった場合のオーバーヘッドがより少な
   いことであり、assertionが失敗した場合のメッセージを式
   <code class="parameter">assertion</code>に有しています。
   つまり、もし論理型の条件を <code class="parameter">assertion</code> 
   として渡した場合、この条件が <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span>
   関数で指定したハンドラ関数への引数とはならないということです。
   条件はハンドラ関数をコールする前に文字列に変換され、論理型の
   <strong><code>FALSE</code></strong> は空文字列に変換されます。
  </p>
  <p class="para">
   assertion は、デバッグ目的にのみ使用するべきです。
   assertion を常に<strong><code>TRUE</code></strong>となる条件を調べる不具合診断に使用し、<strong><code>TRUE</code></strong>
   でない場合に何らかのプログラミングエラーを示したり、extension
   関数または特定のシステム制限や機能といった、
   特定の機能の存在をチェックするために使用することが可能です。
  </p>
  <p class="para">
   assersion は、入力パラメータのチェックのような通常の実行動作に
   使用するべきではありません。一般的には、assertion のチェックを無効にしても
   そのコードが正常に動作しなければなりません。
  </p>
  <p class="para">
   <span class="function"><strong>assert()</strong></span> の動作は、
   <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> またはマニュアルの関数の部分
   に記述された .ini の設定により設定することが可能です。
  </p>
  <p class="para">
   関数 <span class="function"><a href="function.assert-options.html" class="function">assert_options()</a></span> や
   <strong><code>ASSERT_CALLBACK</code></strong> 設定ディレクティブにより失敗した assertion
   を処理するコールバック関数を設定することが可能です。
  </p>
  <p class="para">
   <span class="function"><strong>assert()</strong></span> のコールバックは、assertion
   が発生した場所に関する情報と共に assertion
   に渡されたコードを容易にキャプチャーできるため、
   特に自動テストセットを構築する際に便利です。
   この情報は他の手法でもキャプチャー可能ですが、assertion
   を使用することにより、より簡単かつ容易に行なうことが可能です!
  </p>
  <p class="para">
   コールバック関数は、3つの引数を受ける必要があります。最初の引数は、
   assertionが失敗したファイルが含まれます。2番目の引数には、
   assertionが失敗した行が含まれ、3番目の引数には失敗した式が含まれます
   (もしある場合のみ。1 または &quot;two&quot; のようなリテラルの値は、
   この引数に渡されません)。
   PHP 5.4.8 以降では、オプションの4番目の引数を指定できます。これを設定すると、
   <code class="parameter">description</code> を <span class="function"><strong>assert()</strong></span>
   に渡せるようになります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.assert-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">assertion</code></dt>

     <dd>

      <p class="para">
       アサーション。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">description</code></dt>

     <dd>

      <p class="para">
       オプションの説明で、
       <code class="parameter">assertion</code> が失敗したときのメッセージにこれを含めます。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.assert-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   アサーションが false となった場合に <strong><code>FALSE</code></strong>、それ以外の場合に <strong><code>TRUE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.assert-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.8</td>
       <td>
        <code class="parameter">description</code> パラメータが追加されました。
        <code class="parameter">description</code> はまた、
        <strong><code>ASSERT_CALLBACK</code></strong> モードのコールバック関数の4番目の引数にも指定できるようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.assert-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-496">
    <p><strong>例1 失敗した assertion をカスタムハンドラで処理する</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;assertを有効にし、出力を抑制する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_ACTIVE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_WARNING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_QUIET_EVAL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ハンドラ関数を作成する<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_assert_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;hr&gt;Assertion&nbsp;Failed:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;'</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Line&nbsp;'</span><span style="color: #0000BB">$line</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Code&nbsp;'</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;hr&nbsp;/&gt;"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;コールバックを設定する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_CALLBACK</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_assert_handler'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;失敗するassertionを作成<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql_query("")'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-497">
    <p><strong>例2 カスタムハンドラを使った説明の表示</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;assertを有効にし、出力を抑制する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_ACTIVE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_WARNING</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_QUIET_EVAL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;ハンドラ関数を作成する<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">my_assert_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$desc&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Assertion&nbsp;failed&nbsp;at&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">:</span><span style="color: #0000BB">$line</span><span style="color: #DD0000">:&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$desc</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">":&nbsp;</span><span style="color: #0000BB">$desc</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;コールバックを設定する<br /></span><span style="color: #0000BB">assert_options</span><span style="color: #007700">(</span><span style="color: #0000BB">ASSERT_CALLBACK</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'my_assert_handler'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;失敗するassertionを作成<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'2&nbsp;&lt;&nbsp;1'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">assert</span><span style="color: #007700">(</span><span style="color: #DD0000">'2&nbsp;&lt;&nbsp;1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Two&nbsp;is&nbsp;less&nbsp;than&nbsp;one'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Assertion failed at test.php:21: 2 &lt; 1
Assertion failed at test.php:22: 2 &lt; 1: Two is less than one
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.assert-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.assert-options.html" class="function" rel="rdfs-seeAlso">assert_options()</a> - 様々な assert フラグを設定/取得する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113432""></a>
  <div class="note">
   <strong class="user">fabiano dot fa04 at gmail dot com</strong>
   <a href="#113432" class="date">10-Oct-2013 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can also use a function instead a string description as the second parameter.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">assertIsFalse</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Hey, this assert is false and I'm a function."</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">"foo"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$bar </span><span class="keyword">= </span><span class="default">$foo</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">( </span><span class="default">$foo </span><span class="keyword">== </span><span class="default">$bar</span><span class="keyword">, </span><span class="default">assertIsFalse</span><span class="keyword">() );<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The result would be:<br />
<br />
Hey, this assert is false and I'm a function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113276""></a>
  <div class="note">
   <strong class="user">office dot stojmenovic at gmail dot com</strong>
   <a href="#113276" class="date">20-Sep-2013 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example from Ikac Framework how they use assert()<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Set Assertion Debug<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * This method will check the given assertion and take appropriate -<br />
&nbsp;&nbsp; &nbsp; * action if its result is FALSE. <br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * This file is part of Ikac Framework.<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @package Ikac Framework<br />
&nbsp;&nbsp; &nbsp; * @author Ivan Stojmenovic Ikac &lt;contact.@stojmenovic.info&gt;<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @param mixed $assertion&nbsp; The assertion.<br />
&nbsp;&nbsp; &nbsp; * @param mixed $callback Callback to call on failed assertions<br />
&nbsp;&nbsp; &nbsp; * @param array $options&nbsp; Set the various control options or just query their current settings. <br />
&nbsp;&nbsp; &nbsp; * @param string $description&nbsp; An optional description that will be included in the failure message if the assertion fails. <br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">setAssertionDebug</span><span class="keyword">(</span><span class="default">$assertion</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, array </span><span class="default">$options</span><span class="keyword">, </span><span class="default">$description </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$options</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$options </span><span class="keyword">AS </span><span class="default">$option </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">$option</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_CALLBACK</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">assert</span><span class="keyword">(</span><span class="default">$assertion</span><span class="keyword">, </span><span class="default">$description</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span><br />
How to use:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">use </span><span class="default">Ikac</span><span class="keyword">\</span><span class="default">Component</span><span class="keyword">\</span><span class="default">SystemBehaviour</span><span class="keyword">\</span><span class="default">OptionsInfo</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$system </span><span class="keyword">= new </span><span class="default">OptionsInfo</span><span class="keyword">();<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$option </span><span class="keyword">= array(</span><span class="default">ASSERT_ACTIVE </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,</span><span class="default">ASSERT_WARNING </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,</span><span class="default">ASSERT_QUIET_EVAL </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$system</span><span class="keyword">-&gt;</span><span class="default">setAssertionDebug</span><span class="keyword">(</span><span class="string">'2&lt;1'</span><span class="keyword">, function(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"Assertion failed"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }, </span><span class="default">$option</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112602""></a>
  <div class="note">
   <strong class="user">devoto13 at gmail dot com</strong>
   <a href="#112602" class="date">03-Jul-2013 07:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"If you would like to compare with === or !== you need to add '(string)' before string numbers. Or wrap them with quotes."<br />
<br />
Do not use this aproach, because it would not work, look at <a href="http://php.net/manual/en/function.var-export.php ." rel="nofollow" target="_blank">http://php.net/manual/en/function.var-export.php .</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98521""></a>
  <div class="note">
   <strong class="user">uramihsayibok, gmail, com</strong>
   <a href="#98521" class="date">20-Jun-2010 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There's a nice advantage to giving assert() some code to execute, as a string, rather than a simple true/false value: commenting.<br />
<br />
<span class="default">&lt;?php<br />
<br />
assert</span><span class="keyword">(</span><span class="string">'is_int($int) /* $int parameter must be an int, not just numeric */'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// and my personal favorite<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'false /* not yet implemented */'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The comment will show up in the output (or in your assertion handler) and doesn't require someone debugging to go through your code trying to figure out why the assertion happened. That's no excuse to not comment your code, of course.<br />
<br />
You need to use a block comment (/*...*/) because a line comment (//...) creates an "unexpected $end" parse error in the evaluated code. Bug? Could be.<br />
(You can get around it with "false // not yet implemented\n" but that screws up the message)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84760""></a>
  <div class="note">
   <strong class="user">hodgman at ali dot com dot au</strong>
   <a href="#84760" class="date">29-Jul-2008 06:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As noted on Wikipedia - "assertions are primarily a development tool, they are often disabled when a program is released to the public." and "Assertions should be used to document logically impossible situations and discover programming errors&mdash; if the 'impossible' occurs, then something fundamental is clearly wrong. This is distinct from error handling: most error conditions are possible, although some may be extremely unlikely to occur in practice. Using assertions as a general-purpose error handling mechanism is usually unwise: assertions do not allow for graceful recovery from errors, and an assertion failure will often halt the program's execution abruptly. Assertions also do not display a user-friendly error message."<br />
<br />
This means that the advice given by "gk at proliberty dot com" to force assertions to be enabled, even when they have been disabled manually, goes against best practices of only using them as a development tool.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78176""></a>
  <div class="note">
   <strong class="user">Krzysztof &amp;#39;ChanibaL&amp;#39; Bociurko</strong>
   <a href="#78176" class="date">02-Oct-2007 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that func_get_args() should be used carefully and never in a string! For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">asserted_normal</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">()));<br />
&nbsp;&nbsp;&nbsp; }<br />
function </span><span class="default">asserted_string</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(</span><span class="string">'var_dump(func_get_args())'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php asserted_normal</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">) </span><span class="default">?&gt;</span> prints<br />
array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(1)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(2)<br />
}<br />
<br />
but <span class="default">&lt;?php asserted_string</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">) </span><span class="default">?&gt;</span> prints<br />
array(1) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(25) "var_dump(func_get_args())"<br />
}<br />
<br />
This is because of that the string passed to assert() is being evaled inside assert, and not your function. Also, note that this works correctly, because of the eval scope:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">asserted_evaled_string</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">assert</span><span class="keyword">(eval(</span><span class="string">'var_dump(func_get_args())'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">asserted_evaled_string</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>array(2) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(5)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(6)<br />
}<br />
<br />
(oh, and for simplicity's sake the evaled code doesn't return true, so&nbsp; don't worry that it fails assertion...)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69647""></a>
  <div class="note">
   <strong class="user">mail&lt;at&gt;aaron-mueller.de</strong>
   <a href="#69647" class="date">13-Sep-2006 07:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a simple demonstration of Design By Contract with PHP<br />
<br />
<span class="default">&lt;?php<br />
<br />
assert_options</span><span class="keyword">(</span><span class="default">ASSERT_ACTIVE</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_WARNING</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_BAIL</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">assert_options</span><span class="keyword">(</span><span class="default">ASSERT_CALLBACK</span><span class="keyword">, </span><span class="string">'dcb_callback'</span><span class="keyword">);<br />
<br />
function </span><span class="default">dcb_callback</span><span class="keyword">(</span><span class="default">$script</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$message</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;h1&gt;Condition failed!&lt;/h1&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Script: &lt;strong&gt;</span><span class="default">$script</span><span class="string">&lt;/strong&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Line: &lt;strong&gt;</span><span class="default">$line</span><span class="string">&lt;/strong&gt;&lt;br /&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Condition: &lt;br /&gt;&lt;pre&gt;</span><span class="default">$message</span><span class="string">&lt;/pre&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Parameters<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="string">'Simple DCB with PHP'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Pre-Condition<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp;&nbsp; is_integer($a) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; ($a &gt; 0) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; ($a &lt; 20) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; is_string($b) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; (strlen($b) &gt; 5);<br />
'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Function<br />
</span><span class="keyword">function </span><span class="default">combine</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="string">"Kombined: " </span><span class="keyword">. </span><span class="default">$b </span><span class="keyword">. </span><span class="default">$a</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">combine</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Post-Condition<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="string">'<br />
&nbsp;&nbsp;&nbsp; is_string($result) &amp;&amp;<br />
&nbsp;&nbsp;&nbsp; (strlen($result) &gt; 0);<br />
'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// All right, the Function works fine<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56206""></a>
  <div class="note">
   <strong class="user">gk at proliberty dot com</strong>
   <a href="#56206" class="date">27-Aug-2005 04:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you expect your code to be able to work well with other code, then you should not make any assumptions about the current state of assert_options() flags, prior to calling assert(): other code may disable ASSERT_ACTIVE, without you knowing it - this would render assert() useless!
<br />

<br />
To avoid this, ALWAYS set assert_options() IMMEDIATELY before calling assert(), per the C++ paradigm for assertion usage:
<br />

<br />
In one C++ source file, you can define and undefine NDEBUG multiple times, each time followed by #include &lt;cassert&gt;, to enable or disable the assert macro multiple times in the same source file.
<br />

<br />
Here is how I workaround this issue in my PHP code: 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="comment">//////////////////////////////////////////////////////////////////////
<br />
/// phpxAssertHandler_f 
<br />
//////////////////////////////////////////////////////////////////////
<br />
/**
<br />
&nbsp;* @desc&nbsp; &nbsp;&nbsp; Handler which also sets up assert options if not being called as handler
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Always fatal when assertion fails
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Always make sure assertion is enabled
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Cannot depend on other code not using assert or using its own assert handler!
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; USAGE:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // customize error level of assertion (php assert_options() only allows E_WARNING or nothing at all):
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; phpxAssertHandler_f(E_USER_NOTICE); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // control assertion active state: not dependent on anything another piece of code might do with ASSERT_ACTIVE
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $GLOBALS['MY_ASSERT_ACTIVE']=false;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; phpxAssertHandler_f(E_USER_NOTICE,$GLOBALS['MY_ASSERT_ACTIVE']); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // use alternate assertion callback function:
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // NOTE: pass null as custom options parameter to use default options
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // NOTE: pass no values for assert options parameter array elements to use default options
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $GLOBALS['MY_ASSERT_ACTIVE']=false;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $GLOBALS['MY_ASSERT_CALLBACK']='myAssertCallback';
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; phpxAssertHandler_f(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; null,
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0=&gt;$GLOBALS['MY_ASSERT_ACTIVE'],
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 3=&gt;$GLOBALS['MY_ASSERT_CALLBACK'],
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;* @param&nbsp;&nbsp; mixed = file or options
<br />
&nbsp;* @param&nbsp;&nbsp; line
<br />
&nbsp;* @param&nbsp;&nbsp; code
<br />
&nbsp;* @return&nbsp;&nbsp; void
<br />
&nbsp;*/
<br />
</span><span class="keyword">function </span><span class="default">phpxAssertHandler_f</span><span class="keyword">(</span><span class="default">$file_or_custom_options</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$line_or_assert_options</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">){
<br />

<br />
&nbsp;&nbsp;&nbsp; static </span><span class="default">$custom_options</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$debug </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// set default assert_options
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assert_options</span><span class="keyword">[]=</span><span class="default">1</span><span class="keyword">;</span><span class="comment">//ASSERT_ACTIVE
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assert_options</span><span class="keyword">[]=</span><span class="default">0</span><span class="keyword">;</span><span class="comment">//ASSERT_WARNING - 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assert_options</span><span class="keyword">[]=</span><span class="default">0</span><span class="keyword">;</span><span class="comment">//ASSERT_QUIET_EVAL
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assert_options</span><span class="keyword">[]=</span><span class="default">__FUNCTION__</span><span class="keyword">;</span><span class="comment">//ASSERT_CALLBACK&nbsp; &nbsp; &nbsp; &nbsp; 
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // set default custom_options
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$custom_options</span><span class="keyword">[]=</span><span class="default">E_USER_ERROR</span><span class="keyword">;</span><span class="comment">// error level&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$line_or_assert_options</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// assert_options are passed in
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$line_or_assert_options</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line_or_assert_options</span><span class="keyword">=array(</span><span class="default">$line_or_assert_options</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$line_or_assert_options </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$assert_option</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$assert_option</span><span class="keyword">===</span><span class="default">true</span><span class="keyword">) </span><span class="default">$assert_option</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$assert_option</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) </span><span class="default">$assert_option</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$assert_options</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$assert_option</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$debug</span><span class="keyword">) echo (</span><span class="string">"assert_options[</span><span class="default">$i</span><span class="string">]=</span><span class="default">$assert_option</span><span class="string">\n"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$file_or_custom_options</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// custom_options are passed in
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$file_or_custom_options</span><span class="keyword">)){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$file_or_custom_options</span><span class="keyword">=array(</span><span class="default">$file_or_custom_options</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$file_or_custom_options </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$custom_option</span><span class="keyword">){
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$custom_option</span><span class="keyword">===</span><span class="default">true</span><span class="keyword">) </span><span class="default">$custom_option</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$custom_option</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) </span><span class="default">$custom_option</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$custom_options</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$custom_option</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$debug</span><span class="keyword">) echo (</span><span class="string">"custom_options[</span><span class="default">$i</span><span class="string">]=</span><span class="default">$custom_option</span><span class="string">\n"</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// set assert options
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">@</span><span class="default">assert_options </span><span class="keyword">(</span><span class="default">ASSERT_ACTIVE</span><span class="keyword">, </span><span class="default">$assert_options</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @</span><span class="default">assert_options </span><span class="keyword">(</span><span class="default">ASSERT_WARNING</span><span class="keyword">, </span><span class="default">$assert_options</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @</span><span class="default">assert_options </span><span class="keyword">(</span><span class="default">ASSERT_QUIET_EVAL</span><span class="keyword">, </span><span class="default">$assert_options</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]); 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @</span><span class="default">assert_options </span><span class="keyword">(</span><span class="default">ASSERT_CALLBACK</span><span class="keyword">, </span><span class="default">$assert_options</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />

<br />
&nbsp;&nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// we are acting as a callback function
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$file </span><span class="keyword">= </span><span class="default">$file_or_custom_options</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">$line_or_assert_options</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$msg</span><span class="keyword">=</span><span class="string">"ASSERTION FAILED: </span><span class="default">$code</span><span class="string">"</span><span class="keyword">; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">phpxErrorHandler_f </span><span class="keyword">(</span><span class="default">$custom_options</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$msg</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; }
<br />
}</span><span class="comment">//phpxAssertHandler_f()
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
