<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>現在のセッション名を取得または設定する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.session-module-name.html">≪ session_module_name</a></li>
      <li style="float: right;"><a href="function.session-regenerate-id.html">session_regenerate_id ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.session.html">セッション関数</a></li>
    <li>現在のセッション名を取得または設定する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.session-name" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_name</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">session_name</span> &mdash; <span class="dc-title">現在のセッション名を取得または設定する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.session-name-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>session_name</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>session_name()</strong></span> は、現在のセッション名を返します。
   <code class="parameter">name</code> を渡すと、
   <span class="function"><strong>session_name()</strong></span> はセッション名を上書きして元のセッション名を返します。
  </p>
  <p class="para">
   リクエストが開始された際にセッション名はリセットされ、
   <em>session.name</em>
   に保存されたデフォルト値に戻ります。
   よって、各リクエスト毎に(そして
   <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> または
   <span class="function"><a href="function.session-register.html" class="function">session_register()</a></span> をコールする前に)
   <span class="function"><strong>session_name()</strong></span> をコールする必要があります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.session-name-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">name</code></dt>

     <dd>

      <p class="para">
       セッションの名前を参照します。これは、クッキーや URL
       (例: <em>PHPSESSID</em>) で使われます。
       セッション名は英数字のみで構成されている必要があり、また、
       短く、その内容が分かるようなものである必要があります
       (これは、クッキー警告を有効にしているユーザー用です)。
      </p>
      <p class="para">
       <div class="warning"><strong class="warning">警告</strong>
        <p class="para">
         セッション名は数字だけで構成することはできません。
         少なくとも文字がひとつ以上現れる必要があります。そうでない場合、
         新規セッション ID が毎回生成されます。
        </p>
       </div>
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-name-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   現在のセッションの名前を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.session-name-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4878">
    <p><strong>例1 <span class="function"><strong>session_name()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">/*&nbsp;セッション名をWebsiteIDに設定する&nbsp;*/<br /><br /></span><span style="color: #0000BB">$previous_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">session_name</span><span style="color: #007700">(</span><span style="color: #DD0000">"WebsiteID"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"前回のセッション名は、</span><span style="color: #0000BB">$previous_name</span><span style="color: #DD0000">&nbsp;です。&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.session-name-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     設定ディレクティブ <a href="session.configuration.html#ini.session.name" class="link">session.name</a>
    </li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103472""></a>
  <div class="note">
   <strong class="user">Joseph Dalrymple</strong>
   <a href="#103472" class="date">15-Apr-2011 08:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those wondering, this function is expensive!<br />
<br />
On a script that was executing in a consistent 0.0025 seconds, just the use of session_name("foo") shot my execution time up to ~0.09s. By simply sacrificing session_name("foo"), I sped my script up by roughly 0.09 seconds.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89090""></a>
  <div class="note">
   <strong class="user">relsqui at chiliahedron dot com</strong>
   <a href="#89090" class="date">21-Feb-2009 08:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Remember, kids--you MUST use session_name() first if you want to use session_set_cookie_params() to, say, change the session timeout. Otherwise it won't work, won't give any error, and nothing in the documentation (that I've seen, anyway) will explain why.<br />
<br />
Thanks to brandan of bildungsroman.com who left a note under session_set_cookie_params() explaining this or I'd probably still be throwing my hands up about it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86000""></a>
  <div class="note">
   <strong class="user">php at wiz dot cx</strong>
   <a href="#86000" class="date">28-Sep-2008 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you try to name a php session "example.com" it gets converted to "example_com" and everything breaks.<br />
<br />
don't use a period in your session name.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48415""></a>
  <div class="note">
   <strong class="user">slave at codegrunt dot com</strong>
   <a href="#48415" class="date">22-Dec-2004 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One gotcha I have noticed with session_name is that it will trigger a WARNING level error if the cookie or GET/POST variable value has something other than alphanumeric characters in it.&nbsp; If your site displays warnings and uses PHP sessions this may be a way to enumerate at least some of your scripts:&nbsp; <br />
<br />
<a href="http://example.com/foo.php?session_name_here=(bad" rel="nofollow" target="_blank">http://example.com/foo.php?session_name_here=(bad</a>)<br />
<br />
Warning: session_start(): The session id contains invalid characters, valid characters are only a-z, A-Z and 0-9 in /some/path/foo.php on line 666<br />
<br />
I did not see anything in the docs suggesting that one had to sanitize the PHP session ID values before opening the session but that appears to be the case.<br />
<br />
Unfortunately session_name() always returns true so you have to actually get to the point of assigning variables values before you know whether you have been passed bad session data (as far as I can see).&nbsp; After the error has been generated in other words.<br />
<br />
Cheers</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42747""></a>
  <div class="note">
   <strong class="user">Hongliang Qiang</strong>
   <a href="#42747" class="date">27-May-2004 10:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This may sound no-brainer: the session_name() function will have no essential effect if you set session.auto_start to "true" in php.ini . And the obvious explanation is the session already started thus cannot be altered before the session_name() function--wherever it is in the script--is executed, same reason session_name needs to be called before session_start() as documented.<br />
<br />
I know it is really not a big deal. But I had a quite hard time before figuring this out, and hope it might be helpful to someone like me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
