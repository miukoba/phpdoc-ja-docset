<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>カラー画像のコントラストを強調する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="imagick.contrastimage.html">≪ Imagick::contrastImage</a></li>
      <li style="float: right;"><a href="imagick.convolveimage.html">Imagick::convolveImage ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.imagick.html">Imagick</a></li>
    <li>カラー画像のコントラストを強調する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="imagick.contraststretchimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::contrastStretchImage</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::contrastStretchImage</span> &mdash; <span class="dc-title">カラー画像のコントラストを強調する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.contraststretchimage-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>Imagick::contrastStretchImage</strong></span>
    ( <span class="methodparam"><span class="type">float</span> <code class="parameter">$black_point</code></span>
   , <span class="methodparam"><span class="type">float</span> <code class="parameter">$white_point</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$channel</code><span class="initializer"> = Imagick::CHANNEL_ALL</span></span>
  ] )</div>


  <p class="para rdfs-comment">
   とりうる色の範囲全体に色を調整することによって、
   カラー画像のコントラストを強調します。
   このメソッドは、ImageMagick バージョン 6.2.9 以降で Imagick をコンパイルした場合に使用可能です。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.contraststretchimage-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">black_point</code></dt>

     <dd>

      <p class="para">
      黒の点。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">white_point</code></dt>

     <dd>

      <p class="para">
      白の点。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">channel</code></dt>

     <dd>

      <p class="para">
       チャネルモードに対応したチャネル定数を指定します。
       複数のチャネルに適用するには、
       ビット演算子でチャネル型定数を組み合わせます。
       デフォルトは <strong><code>Imagick::CHANNEL_ALL</code></strong> です。
       <a href="imagick.constants.html#imagick.constants.channel" class="link">チャネル定数</a>
       の一覧を参照ください。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.contraststretchimage-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を返します。
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115191""></a>
  <div class="note">
   <strong class="user">SkepticaLee</strong>
   <a href="#115191" class="date">11-Jun-2014 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The black and white points refer to the absolute number of pixels. In the following example a coloured image is first desaturated (turned into a grey scale image) and then the darkest 90% of pixels are turned black, the brightest 5% are made white, and those between 90% and 95% are grey-scaled:<br />
<br />
<span class="default">&lt;?php<br />
$im </span><span class="keyword">= new </span><span class="default">Imagick </span><span class="keyword">(</span><span class="string">"some_image.jpg"</span><span class="keyword">);<br />
list (</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">) = </span><span class="default">array_values </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">getImageGeometry </span><span class="keyword">());<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">modulateImage </span><span class="keyword">(</span><span class="default">100</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">);<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">contrastStretchImage </span><span class="keyword">(</span><span class="default">$width </span><span class="keyword">* </span><span class="default">$height </span><span class="keyword">* </span><span class="default">0.90</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">* </span><span class="default">$height </span><span class="keyword">* </span><span class="default">0.95</span><span class="keyword">);<br />
</span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">writeImage </span><span class="keyword">(</span><span class="string">"temp.jpg"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;img src=\"temp.jpg\"&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114451""></a>
  <div class="note">
   <strong class="user">SkepticaLee</strong>
   <a href="#114451" class="date">22-Feb-2014 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Trying to figure out what values the black and white points can have and what their effects are nearly drove me around the bend. However, this works:<br />
<br />
<span class="default">&lt;?php<br />
$width </span><span class="keyword">= </span><span class="default">480</span><span class="keyword">;<br />
</span><span class="default">$height </span><span class="keyword">= </span><span class="default">360</span><span class="keyword">;<br />
</span><span class="default">$mask </span><span class="keyword">= new </span><span class="default">Imagick </span><span class="keyword">();<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">newImage </span><span class="keyword">(</span><span class="default">$width</span><span class="keyword">, </span><span class="default">$height</span><span class="keyword">, </span><span class="string">"black"</span><span class="keyword">);<br />
</span><span class="default">$draw </span><span class="keyword">= new </span><span class="default">ImagickDraw </span><span class="keyword">();<br />
</span><span class="default">$draw</span><span class="keyword">-&gt;</span><span class="default">setFillColor </span><span class="keyword">(</span><span class="string">"white"</span><span class="keyword">);<br />
</span><span class="default">$draw</span><span class="keyword">-&gt;</span><span class="default">ellipse </span><span class="keyword">(</span><span class="default">$width </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$height </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">* </span><span class="default">5 </span><span class="keyword">/ </span><span class="default">12</span><span class="keyword">, </span><span class="default">$height </span><span class="keyword">* </span><span class="default">5 </span><span class="keyword">/ </span><span class="default">12</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">360</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">drawImage </span><span class="keyword">(</span><span class="default">$draw</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">blurImage </span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">contrastStretchImage </span><span class="keyword">(</span><span class="default">10</span><span class="keyword">, </span><span class="default">125000</span><span class="keyword">);<br />
</span><span class="default">$mask</span><span class="keyword">-&gt;</span><span class="default">writeImage </span><span class="keyword">(</span><span class="string">"mask.png"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The result will be a vignette mask with the pixels in the corner being pure black, and the ones in the middle pure white (which is not the case if the line is commented out). Reducing the white value to, say, 100, turns most of the grey pixels white.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
