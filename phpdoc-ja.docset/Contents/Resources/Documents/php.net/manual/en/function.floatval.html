<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>変数の float 値を取得する</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.empty.html">≪ empty</a></li>
      <li style="float: right;"><a href="function.get-defined-vars.html">get_defined_vars ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.var.html">変数操作 関数</a></li>
    <li>変数の float 値を取得する</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.floatval" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">floatval</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5)</p><p class="refpurpose"><span class="refname">floatval</span> &mdash; <span class="dc-title">変数の float 値を取得する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.floatval-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">float</span> <span class="methodname"><strong>floatval</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$var</code></span>
   )</div>

  <p class="para rdfs-comment">
   <code class="parameter">var</code> の <span class="type"><a href="language.types.float.html" class="type float">float</a></span> 値を返します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.floatval-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">var</code></dt>

     <dd>

      <p class="para">
       あらゆるスカラ型を指定できます。オブジェクトに
       <span class="function"><strong>floatval()</strong></span> を使用することはできません。
       その場合は <strong><code>E_NOTICE</code></strong> レベルのエラーを発して 1 を返します。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.floatval-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   指定した変数の float 値を返します。
   空の配列の場合は 0、空でない配列の場合は 1 を返します。
  </p>
  <p class="para">
   文字列の場合、ほとんどは 0 を返しますが、先頭の文字が何であるかによってこれは変わります。
   <a href="language.types.float.html#language.types.float.casting" class="link">float 型へのキャスト</a>
   と同じルールに従います。
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.floatval-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5355">
    <p><strong>例1 <span class="function"><strong>floatval()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'122.34343The'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$float_value_of_var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">floatval</span><span style="color: #007700">(</span><span style="color: #0000BB">$var</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$float_value_of_var</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;122.34343<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5356">
    <p><strong>例2 <span class="function"><strong>floatval()</strong></span> で、先頭が非数値である場合の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The122.34343'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$float_value_of_var&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">floatval</span><span style="color: #007700">(</span><span style="color: #0000BB">$var</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$float_value_of_var</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;0<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.floatval-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.boolval.html" class="function" rel="rdfs-seeAlso">boolval()</a> - 変数の boolean としての値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.intval.html" class="function" rel="rdfs-seeAlso">intval()</a> - 変数の整数としての値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.strval.html" class="function" rel="rdfs-seeAlso">strval()</a> - 変数の文字列としての値を取得する</span></li>
    <li class="member"><span class="function"><a href="function.settype.html" class="function" rel="rdfs-seeAlso">settype()</a> - 変数の型をセットする</span></li>
    <li class="member"><a href="language.types.type-juggling.html" class="link">型の相互変換</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="114486""></a>
  <div class="note">
   <strong class="user">brewal dot renault at gmail dot com</strong>
   <a href="#114486" class="date">26-Feb-2014 06:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes the last comma or dot (if any) to make a clean float, ignoring thousand separator, currency or any other letter :<br />
<br />
function tofloat($num) {<br />
&nbsp;&nbsp;&nbsp; $dotPos = strrpos($num, '.');<br />
&nbsp;&nbsp;&nbsp; $commaPos = strrpos($num, ',');<br />
&nbsp;&nbsp;&nbsp; $sep = (($dotPos &gt; $commaPos) &amp;&amp; $dotPos) ? $dotPos : <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ((($commaPos &gt; $dotPos) &amp;&amp; $commaPos) ? $commaPos : false);<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (!$sep) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return floatval(preg_replace("/[^0-9]/", "", $num));<br />
&nbsp;&nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp;&nbsp; return floatval(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; preg_replace("/[^0-9]/", "", substr($num, 0, $sep)) . '.' .<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; preg_replace("/[^0-9]/", "", substr($num, $sep+1, strlen($num)))<br />
&nbsp;&nbsp;&nbsp; );<br />
}<br />
<br />
$num = '1.999,369?';<br />
var_dump(tofloat($num)); // float(1999.369)<br />
$otherNum = '126,564,789.33 m2';<br />
var_dump(tofloat($otherNum)); // float(126564789.33)<br />
<br />
Demo : <a href="http://codepad.org/NW4e9hQH" rel="nofollow" target="_blank">http://codepad.org/NW4e9hQH</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106367""></a>
  <div class="note">
   <strong class="user">PapaPinguoin</strong>
   <a href="#106367" class="date">31-Oct-2011 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To view the very large and very small numbers (eg from a database DECIMAL), without displaying scientific notation, or leading zeros.<br />
<br />
FR : Pour afficher les tres grand et tres petits nombres (ex. depuis une base de donnees DECIMAL), sans afficher la notation scientifique, ni les zeros non significatifs.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">floattostr</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">"#^([\+\-]|)([0-9]*)(\.([0-9]*?)|)(0*)$#"</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">), </span><span class="default">$o </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$o</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%d'</span><span class="keyword">,</span><span class="default">$o</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]).(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]!=</span><span class="string">'.'</span><span class="keyword">?</span><span class="default">$o</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]:</span><span class="string">''</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"0000000000000001"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"1.00000000000000"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"0.00000000001000"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"0000.00010000000"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"000000010000000000.00000000000010000000000"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"-0000000000000.1"</span><span class="keyword">);<br />
echo </span><span class="default">floattostr</span><span class="keyword">(</span><span class="string">"-00000001.100000"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// result<br />
// 1<br />
// 1<br />
// 0.00000000001<br />
// 0.0001<br />
// 10000000000.0000000000001<br />
// -0.1<br />
// -1.1<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101666""></a>
  <div class="note">
   <strong class="user">secretr at NOSPAM dot e107 dot org</strong>
   <a href="#101666" class="date">03-Jan-2011 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
setlocale() and floatval() duo could break your DB queries in a very simple way:<br />
<br />
<span class="default">&lt;?php<br />
setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'bg_BG'</span><span class="keyword">, </span><span class="string">'bgr_BGR'</span><span class="keyword">); <br />
echo </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">0.15</span><span class="keyword">); </span><span class="comment">// output 0,15<br />
</span><span class="default">?&gt;<br />
</span><br />
You would need simple workaround like:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">number2db</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$larr </span><span class="keyword">= </span><span class="default">localeconv</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'decimal_point'</span><span class="keyword">], <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'mon_decimal_point'</span><span class="keyword">], <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'thousands_sep'</span><span class="keyword">], <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'mon_thousands_sep'</span><span class="keyword">], <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'currency_symbol'</span><span class="keyword">], <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$larr</span><span class="keyword">[</span><span class="string">'int_curr_symbol'</span><span class="keyword">]<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">setlocale</span><span class="keyword">(</span><span class="default">LC_ALL</span><span class="keyword">, </span><span class="string">'bg_BG'</span><span class="keyword">, </span><span class="string">'bgr_BGR'</span><span class="keyword">); <br />
</span><span class="default">$testVal </span><span class="keyword">= </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">0.15</span><span class="keyword">); </span><span class="comment">// result 0,15<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$testVal</span><span class="keyword">, </span><span class="default">number2db</span><span class="keyword">(</span><span class="default">$testVal</span><span class="keyword">));<br />
<br />
</span><span class="comment">// Result:<br />
// float(0,15) <br />
// string(4) "0.15" <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100397""></a>
  <div class="note">
   <strong class="user">balai01 at yahoo dot com</strong>
   <a href="#100397" class="date">13-Oct-2010 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//changes comma to dot if any<br />
//removes any currency symbol and gets the floatVar<br />
<br />
$price_fl_point=(preg_replace("/,/",".",$price));<br />
$price_c=floatval(preg_replace("/^[^0-9\.]/","",$price_fl_point));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92563""></a>
  <div class="note">
   <strong class="user">chris at georgakopoulos dot com</strong>
   <a href="#92563" class="date">29-Jul-2009 05:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
locale aware floatval:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">ParseFloat</span><span class="keyword">(</span><span class="default">$floatString</span><span class="keyword">){
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$LocaleInfo </span><span class="keyword">= </span><span class="default">localeconv</span><span class="keyword">();
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$floatString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$LocaleInfo</span><span class="keyword">[</span><span class="string">"mon_thousands_sep"</span><span class="keyword">] , </span><span class="string">""</span><span class="keyword">, </span><span class="default">$floatString</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$floatString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$LocaleInfo</span><span class="keyword">[</span><span class="string">"mon_decimal_point"</span><span class="keyword">] , </span><span class="string">"."</span><span class="keyword">, </span><span class="default">$floatString</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$floatString</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89475""></a>
  <div class="note">
   <strong class="user">ted devito</strong>
   <a href="#89475" class="date">10-Mar-2009 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
i noticed all (well, unless i missed something) the functions working with decimals destroy trailing decimal places. this function restores them in case you want to be able to display a consistent precision for users. 
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">decimal</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$precision </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; if ((float) </span><span class="default">$val</span><span class="keyword">) :
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((float) </span><span class="default">$val</span><span class="keyword">, (int) </span><span class="default">$precision</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; list(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">) &lt; </span><span class="default">$precision</span><span class="keyword">) </span><span class="default">$b </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_RIGHT</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$precision </span><span class="keyword">? </span><span class="string">"</span><span class="default">$a</span><span class="string">.</span><span class="default">$b</span><span class="string">" </span><span class="keyword">: </span><span class="default">$a</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; else : </span><span class="comment">// do whatever you want with values that do not have a float
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$val</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; endif;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85346""></a>
  <div class="note">
   <strong class="user">info at marc-gutt dot de</strong>
   <a href="#85346" class="date">27-Aug-2008 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">floatvalue</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#^([-]*[0-9\.,\' ]+?)((\.|,){1}([0-9-]{1,2}))*$#e'</span><span class="keyword">, </span><span class="string">"str_replace(array('.', ',', \"'\", ' '), '', '\\1') . '.\\4'"</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
It is much shorter and able to handle those one, too:
<br />
xx,-
<br />
xx,--
<br />
xx'xxx,xx
<br />

<br />
After using floatvalue() you can go forward with number_format() as usual.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84793""></a>
  <div class="note">
   <strong class="user">Michiel</strong>
   <a href="#84793" class="date">30-Jul-2008 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The last getFloat() function is not completely correct.
<br />

<br />
1.000.000 and 1,000,000 and its negative variants are not correctly parsed. For the sake of comparing and to make myself clear I use the name parseFloat in stead of getFloat for the new function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">parseFloat</span><span class="keyword">(</span><span class="default">$ptString</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$ptString</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$ptString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pregResult </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$commaset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">,</span><span class="string">','</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$commaset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {</span><span class="default">$commaset </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pointset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pointset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {</span><span class="default">$pointset </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;}
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pregResultA </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pregResultB </span><span class="keyword">= array();
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pointset </span><span class="keyword">&lt; </span><span class="default">$commaset</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#(([-]?[0-9]+(\.[0-9])?)+(,[0-9]+)?)#'</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">, </span><span class="default">$pregResultA</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#(([-]?[0-9]+(,[0-9])?)+(\.[0-9]+)?)#'</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">, </span><span class="default">$pregResultB</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ((isset(</span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; (!isset(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$preResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) == </span><span class="default">0
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">|| !</span><span class="default">$pointset</span><span class="keyword">))) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (isset(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; (!isset(</span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$preResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) == </span><span class="default">0
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">|| !</span><span class="default">$commaset</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= (float)</span><span class="default">$numberString</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Comparing of float parsing functions with the following function:
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">testFloatParsing</span><span class="keyword">() {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$floatvals </span><span class="keyword">= array(
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22 000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22.000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22,000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22 000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22,000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22.000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"22000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1.022.000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1,022,000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1,000,000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1.000.000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1022000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1022000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1022000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"0.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"0,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"0.00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"0,00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1.00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"1,00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22 000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22.000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22,000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22 000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22,000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22.000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-22000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1.022.000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1,022,000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1,000,000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1.000.000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1022000.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1022000,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1022000"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-0.76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-0,76"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-0.00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-0,00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1.00"</span><span class="keyword">,
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"-1,00"
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;table&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;tr&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;th&gt;String&lt;/th&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;th&gt;floatval()&lt;/th&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;th&gt;getFloat()&lt;/th&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;th&gt;parseFloat()&lt;/th&gt;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/tr&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$floatvals </span><span class="keyword">as </span><span class="default">$fval</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;tr&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;" </span><span class="keyword">. (string) </span><span class="default">$fval </span><span class="keyword">. </span><span class="string">"&lt;/td&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;" </span><span class="keyword">. (float) </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$fval</span><span class="keyword">) . </span><span class="string">"&lt;/td&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;" </span><span class="keyword">. (float) </span><span class="default">getFloat</span><span class="keyword">(</span><span class="default">$fval</span><span class="keyword">) . </span><span class="string">"&lt;/td&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;td&gt;" </span><span class="keyword">. (float) </span><span class="default">parseFloat</span><span class="keyword">(</span><span class="default">$fval</span><span class="keyword">) . </span><span class="string">"&lt;/td&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;/tr&gt;"</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"&lt;/table&gt;"</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84590""></a>
  <div class="note">
   <strong class="user">steve at opilo dot net</strong>
   <a href="#84590" class="date">21-Jul-2008 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most of the functions listed here that deal with $ and , are unnecessarily complicated. You can use ereg_replace() to strip out ALL of the characters that will cause floatval to fail in one simple line of code:
<br />

<br />
<span class="default">&lt;?php $output </span><span class="keyword">= </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"[^-0-9\.]"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$input</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76537""></a>
  <div class="note">
   <strong class="user">leprau at leprau dot de</strong>
   <a href="#76537" class="date">19-Jul-2007 06:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you, who are looking for a function that rips the first,<br />
but longest possible float (or at least integer) from a string,<br />
like 123.45 from the string "Price: 123,45$"<br />
<br />
If no useable value is found, the function returns false.<br />
<br />
Checks for both comma and dot as decimal-separator,<br />
but does not check for 3 digits between thousands,<br />
so 1,234.5 is as valid as 1,23,4.5 (both will return 1234.5)<br />
<br />
12,.3 will return 12<br />
1,000,000 will return 1000.0 !<br />
<br />
(if thousands separator is defined,<br />
decimals should be defined too ... <br />
in fact I was too lazy to check for that too)<br />
<br />
Here you go, and feel free to optimize the function ;)<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getFloat</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pregResult </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$commaset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">,</span><span class="string">','</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$commaset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {</span><span class="default">$commaset </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pointset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pString</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pointset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {</span><span class="default">$pointset </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pregResultA </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pregResultB </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pointset </span><span class="keyword">&lt; </span><span class="default">$commaset</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#(([-]?[0-9]+(\.[0-9])?)+(,[0-9]+)?)#'</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">, </span><span class="default">$pregResultA</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#(([-]?[0-9]+(,[0-9])?)+(\.[0-9]+)?)#'</span><span class="keyword">, </span><span class="default">$pString</span><span class="keyword">, </span><span class="default">$pregResultB</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ((isset(</span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; (!isset(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$preResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) == </span><span class="default">0 <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">|| !</span><span class="default">$pointset</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">,</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (isset(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; (!isset(</span><span class="default">$pregResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; || </span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">],</span><span class="default">$preResultA</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) == </span><span class="default">0 <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">|| !</span><span class="default">$commaset</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">$pregResultB</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$numberString </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$numberString</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= (float)</span><span class="default">$numberString</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69391""></a>
  <div class="note">
   <strong class="user">aa at geb-team dot de</strong>
   <a href="#69391" class="date">04-Sep-2006 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@pillepop2003 at yahoo dot de<br />
<br />
<span class="default">&lt;?php<br />
float</span><span class="keyword">(</span><span class="string">'-100.00'</span><span class="keyword">, array(</span><span class="string">'single_dot_as_decimal' </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">)); </span><span class="comment">// whoops, returns -10000<br />
</span><span class="default">?&gt;<br />
</span><br />
use: "/^[0-9-]*[\.]{1}[0-9-]+$/"<br />
instead of: "/^[0-9]*[\.]{1}[0-9-]+$/"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52028""></a>
  <div class="note">
   
   <a href="#52028" class="date">19-Apr-2005 02:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
you can also use typecasting instead of functions:<br />
<br />
(float) $value;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48163""></a>
  <div class="note">
   <strong class="user">pillepop2003 at yahoo dot de</strong>
   <a href="#48163" class="date">14-Dec-2004 11:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use this snippet to extract any float out of a string. You can choose how a single dot is treated with the (bool) 'single_dot_as_decimal' directive.<br />
This function should be able to cover almost all floats that appear in an european environment.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">float</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$set</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/([0-9\.,-]+)/"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Found number in $str, so set $str that number<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">','</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// A comma exists, that makes it easy, cos we assume it separates the decimal part.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Erase thousand seps<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Convert , to . for floatval command<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// No comma exists, so we have to decide, how a single dot shall be treated<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^[0-9]*[\.]{1}[0-9-]+$/"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">) == </span><span class="default">TRUE </span><span class="keyword">&amp;&amp; </span><span class="default">$set</span><span class="keyword">[</span><span class="string">'single_dot_as_decimal'</span><span class="keyword">] == </span><span class="default">TRUE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Treat single dot as decimal separator<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Else, treat all dots as thousand seps<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Erase thousand seps<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// No number found, return zero<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">// Examples<br />
<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 123,00 bar'</span><span class="keyword">); </span><span class="comment">// returns 123.00<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 123.00 bar' </span><span class="keyword">array(</span><span class="string">'single_dot_as_decimal'</span><span class="keyword">=&gt; </span><span class="default">TRUE</span><span class="keyword">)); </span><span class="comment">//returns 123.000<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 123.00 bar' </span><span class="keyword">array(</span><span class="string">'single_dot_as_decimal'</span><span class="keyword">=&gt; </span><span class="default">FALSE</span><span class="keyword">)); </span><span class="comment">//returns 123000<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 222.123.00 bar' </span><span class="keyword">array(</span><span class="string">'single_dot_as_decimal'</span><span class="keyword">=&gt; </span><span class="default">TRUE</span><span class="keyword">)); </span><span class="comment">//returns 222123000<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 222.123.00 bar' </span><span class="keyword">array(</span><span class="string">'single_dot_as_decimal'</span><span class="keyword">=&gt; </span><span class="default">FALSE</span><span class="keyword">)); </span><span class="comment">//returns 222123000<br />
<br />
// The decimal part can also consist of '-'<br />
</span><span class="keyword">echo </span><span class="default">float</span><span class="keyword">(</span><span class="string">'foo 123,-- bar'</span><span class="keyword">); </span><span class="comment">// returns 123.00<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Big Up.<br />
Philipp</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43262""></a>
  <div class="note">
   <strong class="user">anonymous at start dot be</strong>
   <a href="#43262" class="date">16-Jun-2004 04:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Easier-to-grasp-function for the ',' problem.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">Getfloat</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {
<br />
&nbsp; if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">)) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// replace dots (thousand seps) with blancs
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// replace ',' with '.'
<br />
&nbsp; </span><span class="keyword">}
<br />
&nbsp; 
<br />
&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#([0-9\.]+)#"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)) { </span><span class="comment">// search for number that may contain '.'
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br />
&nbsp; } else {
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// take some last chances with floatval
<br />
&nbsp; </span><span class="keyword">}
<br />
}
<br />

<br />
echo </span><span class="default">Getfloat</span><span class="keyword">(</span><span class="string">"$ 19.332,35-"</span><span class="keyword">); </span><span class="comment">// will print: 19332.35
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39379""></a>
  <div class="note">
   <strong class="user">vickers at hotpop dot com</strong>
   <a href="#39379" class="date">27-Jan-2004 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
floatval() does not work with "$35,234.43", as it could not handle the '$' and the ','.&nbsp; The following takes care of all values, such that only numeric and the decimal sign are input into floatval().&nbsp; (It probably shows I'm an old 'c' guy)...this function only lightly tested.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">strtflt</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$il </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flt </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$cstr </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; 
<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$il</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cstr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$cstr</span><span class="keyword">) || </span><span class="default">$cstr </span><span class="keyword">== </span><span class="string">"."</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flt </span><span class="keyword">= </span><span class="default">$flt</span><span class="keyword">.</span><span class="default">$cstr</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$flt</span><span class="keyword">);
<br />
}
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
Richard Vickers
<br />
vickers@hotpop.com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31533""></a>
  <div class="note">
   <strong class="user">Zipi</strong>
   <a href="#31533" class="date">25-Apr-2003 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function converts a string to a float no matter is the decimal separator dot (.) or comma (,). It also converts integers correctly. It takes the digits from the beginning of the string and ignores all other characters.
<br />

<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$strValue</span><span class="keyword">) {
<br />
&nbsp;&nbsp; </span><span class="default">$floatValue </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"(^[0-9]*)(\\.|,)([0-9]*)(.*)"</span><span class="keyword">, </span><span class="string">"\\1.\\3"</span><span class="keyword">, </span><span class="default">$strValue</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$floatValue</span><span class="keyword">)) </span><span class="default">$floatValue </span><span class="keyword">= </span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"(^[0-9]*)(.*)"</span><span class="keyword">, </span><span class="string">"\\1"</span><span class="keyword">, </span><span class="default">$strValue</span><span class="keyword">);
<br />
&nbsp;&nbsp; if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$floatValue</span><span class="keyword">)) </span><span class="default">$floatValue </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; return </span><span class="default">$floatValue</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;
<br />
</span>
<br />
-Zipi (Finland)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30146""></a>
  <div class="note">
   <strong class="user">jason at shadonet dot com</strong>
   <a href="#30146" class="date">08-Mar-2003 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Instead of using floatval which only appeared in PHP 4.2 you could juse use $variable = (float)$variable<br />
<br />
This function doesn't seem to add any functionality that wasn't already there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
