<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>ソケットのエラーまたは直近のエラーコードをクリアする</title>

  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs" class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.socket-bind.html">≪ socket_bind</a></li>
      <li style="float: right;"><a href="function.socket-close.html">socket_close ≫</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.sockets.html">ソケット 関数</a></li>
    <li>ソケットのエラーまたは直近のエラーコードをクリアする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.socket-clear-error" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">socket_clear_error</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5)</p><p class="refpurpose"><span class="refname">socket_clear_error</span> &mdash; <span class="dc-title">ソケットのエラーまたは直近のエラーコードをクリアする</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.socket-clear-error-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>socket_clear_error</strong></span>
    ([ <span class="methodparam"><span class="type">resource</span> <code class="parameter">$socket</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   この関数は、指定したソケットまたは直近のグローバルなソケットエラー
   のエラーコードをクリアします。
  </p>
  <p class="para">
   この関数により、
   ソケットまたは直近のグローバルな拡張エラーコードとなる
   エラーコードの値を明示的にリセットすることが可能になります。
   これは、エラーが発生したかどうかをアプリケーション内で検出する際に有用です。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.socket-clear-error-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">socket</code></dt>

     <dd>

      <p class="para">
       <span class="function"><a href="function.socket-create.html" class="function">socket_create()</a></span> で作成したソケットリソース。
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.socket-clear-error-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   値を返しません。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.socket-clear-error-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.socket-last-error.html" class="function" rel="rdfs-seeAlso">socket_last_error()</a> - ソケットの直近のエラーを返す</span></li>
    <li class="member"><span class="function"><a href="function.socket-strerror.html" class="function" rel="rdfs-seeAlso">socket_strerror()</a> - ソケットエラーの内容を文字列として返す</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105105""></a>
  <div class="note">
   <strong class="user">raphael at engenhosweb dot com dot br</strong>
   <a href="#105105" class="date">27-Jul-2011 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can do this too, with anonymous function:<br />
<span class="default">&lt;?php<br />
$socket </span><span class="keyword">= @</span><span class="default">socket_create</span><span class="keyword">(</span><span class="default">AF_INET</span><span class="keyword">, </span><span class="default">SOCK_STREAM</span><span class="keyword">, </span><span class="default">SOL_TCP</span><span class="keyword">) or function() {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$errstr </span><span class="keyword">= </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (</span><span class="string">"Failed to create socket: " </span><span class="keyword">. </span><span class="default">$errstr</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">socket_clear_error</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66481""></a>
  <div class="note">
   <strong class="user">ludvig dot ericson at gmail dot com</strong>
   <a href="#66481" class="date">24-May-2006 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to clear your error in a small amount of code, do a similar hack as to what most people do in SQL query checking,<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">) or die(</span><span class="comment">/* Whatever code */</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
It could look like this:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!(</span><span class="default">$socket </span><span class="keyword">= </span><span class="default">socket_create</span><span class="keyword">(</span><span class="comment">/* Whatever code */</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo (</span><span class="string">"Failed to create socket: " </span><span class="keyword">. </span><span class="default">socket_strerror</span><span class="keyword">(</span><span class="default">socket_last_error</span><span class="keyword">()) and </span><span class="default">socket_clear_error</span><span class="keyword">());<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
As you can see, I use "and" here instead of "or" since the first part will always return true, thus if you use or PHP's lazy boolean checking will not execute the last part, which it will with an and if the first part is true.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
</div></div></body></html>
