<html><!-- Mirrored from php.net/manual/en/function.array-rand.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:55 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>array_rand</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.array-rand.html">
 <link rel="shorturl" href="http://php.net/array-rand">
 <link rel="alternate" href="http://php.net/array-rand" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.array.html">
 <link rel="prev" href="function.array-push.html">
 <link rel="next" href="function.array-reduce.html">

 <link rel="alternate" href="function.array-rand.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.array-rand.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.array-rand.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.array-rand.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.array-rand.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.array-rand.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.array-rand.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.array-rand.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.array-rand.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.array-rand.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.array-rand.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.array.html">Arrays</a></li>      <li><a href="ref.array.html">Array Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.array-rand" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_rand</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">array_rand</span> â€” <span class="dc-title">Pick one or more random entries out of an array</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-rand-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>array_rand</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$num</code><span class="initializer"> = 1</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Picks one or more random entries out of an array, and returns the
   key (or keys) of the random entries.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-rand-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       The input array.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">num</code></dt>

     <dd>

      <p class="para">
       Specifies how many entries should be picked.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-rand-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   When picking only one entry, <span class="function"><strong>array_rand()</strong></span> returns
   the key for a random entry. Otherwise, an array of keys for the random
   entries is returned. This is done so that random keys can be picked
   from the array as well as random values. Trying to pick more elements
   than there are in the array will result in an
   <strong><code>E_WARNING</code></strong> level error, and NULL will be returned.
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-rand-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.10</td>
       <td>
        The resulting array of keys is no longer shuffled.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-rand-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5092">
    <p><strong>Example #1 <span class="function"><strong>array_rand()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$input&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"Neo"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Morpheus"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Trinity"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Cypher"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Tank"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$rand_keys&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_rand</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">[</span><span style="color: #0000BB">$rand_keys</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #007700">[</span><span style="color: #0000BB">$rand_keys</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-rand-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.shuffle.html" class="function" rel="rdfs-seeAlso">shuffle()</a> - Shuffle an array</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="105265">  
  <a class="name">
  <strong class="user"><em>Sebmil</em></strong></a><div class="date" title="2011-08-05 12:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105265">
<div class="phpcode"><code><span class="html">
Looks like this function has a strange randomness.<br><br>If you take any number of elements in an array which has 40..100 elements, the 31st one is always by far the less occuring (by about 10% less than others).<br><br>I tried this piece of code at home (PHP Version 5.3.2-1ubuntu4.9) and on my server (PHP Version 5.2.17), unfortunately i haven't any server with the last version here :<br><br><span class="default">&lt;?php<br>$valeurs </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">);<br></span><span class="default">$proba </span><span class="keyword">= </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10000</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$tirage_tab </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$valeurs</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; foreach(</span><span class="default">$tirage_tab </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$proba</span><span class="keyword">[</span><span class="default">$valeurs</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">]]++;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">asort</span><span class="keyword">(</span><span class="default">$proba</span><span class="keyword">);<br>echo </span><span class="string">"Proba : &lt;br/&gt;\n"</span><span class="keyword">;<br>foreach(</span><span class="default">$proba </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> : </span><span class="default">$value</span><span class="string">&lt;br/&gt;\n"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>In every try, the number of occurrences change a bit but the 31 is always far less (around 2200) than the others (2400-2600). I tried with 50 and 100 elements, no change. I tried with more or less elements to pick (second parameter to array_rand), same result. If you pick only one element it's even worse : 31 has half the result of the others.<br><br>For this particular case, i recommend shuffling the array and taking the nth first elements, in this test it's 60% faster and the statistics are ok.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107813">  
  <a class="name">
  <strong class="user"><em>qeremy</em></strong></a><div class="date" title="2012-03-07 01:18"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107813">
<div class="phpcode"><code><span class="html">
An example for getting random value from arrays;<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$num </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">? </span><span class="default">$r</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] : </span><span class="default">$r</span><span class="keyword">;<br>}<br><br></span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"cherry"</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>cherry<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; banana<br>&nbsp; &nbsp; [1] =&gt; apple<br>)<br><br>And example for getting random value from assoc arrays;<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$num</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;<br>}<br><br></span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"banana"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"cherry"</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_random_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Array<br>(<br>&nbsp; &nbsp; [c] =&gt; cherry<br>)<br>Array<br>(<br>&nbsp; &nbsp; [a] =&gt; apple<br>&nbsp; &nbsp; [b] =&gt; banana<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112227">  
  <a class="name">
  <strong class="user"><em>Jordan Doyle</em></strong></a><div class="date" title="2013-05-19 09:49"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112227">
<div class="phpcode"><code><span class="html">
Note: array_rand uses the libc generator, which is slower and less-random than Mersenne Twister.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $a </span><span class="keyword">= [</span><span class="string">'<a rel="nofollow" target="_blank">http://php.net/</a>'</span><span class="keyword">, </span><span class="string">'<a rel="nofollow" target="_blank">http://google.com/</a>'</span><span class="keyword">, </span><span class="string">'<a rel="nofollow" target="_blank">http://bbc.co.uk/</a>'</span><span class="keyword">];<br><br>&nbsp; &nbsp; </span><span class="default">$website </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">[</span><span class="default">mt_rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">)];<br></span><span class="default">?&gt;<br></span><br>This is a better alternative.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60281">  
  <a class="name">
  <strong class="user"><em>Will-ster</em></strong></a><div class="date" title="2006-01-01 04:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60281">
<div class="phpcode"><code><span class="html">
This is something I have been playing with for quite awhile. I'm very new to php, but i finally got it to work. it's a function that will take and array[$arrquo] and find a particular keyword[$find] in the different elements of the array then take those elements that posess that keyword and display them at random <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">popbyword</span><span class="keyword">(</span><span class="default">$arrquo</span><span class="keyword">,</span><span class="default">$find</span><span class="keyword">)<br>{<br></span><span class="default">$newarr </span><span class="keyword">= array(</span><span class="string">''</span><span class="keyword">);<br> foreach(</span><span class="default">$arrquo </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">)<br> {<br>&nbsp; if( </span><span class="default">strstr</span><span class="keyword">( </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$find </span><span class="keyword">) )<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$newarr</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">);<br> <br>&nbsp; }<br> }&nbsp; &nbsp; <br></span><span class="default">srand</span><span class="keyword">((double)</span><span class="default">microtime</span><span class="keyword">()*</span><span class="default">1000000</span><span class="keyword">);<br></span><span class="default">$rquote </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$newarr</span><span class="keyword">);<br>echo </span><span class="default">$newarr</span><span class="keyword">[</span><span class="default">$rquote</span><span class="keyword">];<br>}<br><br></span><span class="default">popbyword</span><span class="keyword">(</span><span class="default">$images</span><span class="keyword">, </span><span class="string">'Albert'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>In my case I had this huge array of quotes with 90 some elements. I was able to find certain keywords in those elements then ONLY display the elements that had those keywords. NEAT! Maybe only because I'm new.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77594">  
  <a class="name">
  <strong class="user"><em>herodesh [-at_] gmail [-dot-] com</em></strong></a><div class="date" title="2007-09-05 03:36"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77594">
<div class="phpcode"><code><span class="html">
this is to generate a random selection from an array with array_rand preety nice, can be used to generate random passwords or anything:<br><br>$my_array = array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "0", "1", "2", "3", "4", "5");<br>&nbsp; &nbsp; &nbsp; &nbsp; for ($i=0; $i&lt;=10; $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $random = array_rand($my_array);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //this generates the random number from the array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $parola .= $my_array[$random];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //here we will display the exact charachter from the array<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; echo $parola; // printing result</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33363">  
  <a class="name">
  <strong class="user"><em>asarnoNOSPAM@interbaun DOT com</em></strong></a><div class="date" title="2003-06-23 11:06"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33363">
<div class="phpcode"><code><span class="html">
It is correct that using array_rand() with num_req=1 will return an integer and not an array, but why get so complicated with getting just the one value.&nbsp; The K.I.S.S. method would suggest to do it this way:<br><br>&lt;?<br>srand((double)microtime() * 10000000);<br>$originalArray = array("red", "blue", "green", "brown", <br>"cyan", "magenta", "purle", "cheezy");<br>$pickOne = array_rand($originalArray, 1);<br>$aRandomSelection = $originalArray[$pickOne ];<br>echo "$aRandomSelection was the random selection made";<br>?&gt;<br><br>You only need to use the foreach if the num_req &gt;=2. In those cases the array_rand() function will return an array of random elements which are a subset of the original array.&nbsp; When num_req = 1, the array_rand() function returns an integer that signifies a randomly picked key of the original array.&nbsp; Hope this clarifies things ... it works for me.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93834">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-10-02 01:04"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93834">
<div class="phpcode"><code><span class="html">
If the array elements are unique, and are all integers or strings, here is a simple way to pick $n random *values* (not keys) from an array $array:
<br>
<br><span class="default">&lt;?php array_rand</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$n</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112969">  
  <a class="name">
  <strong class="user"><em>nospamplease at mail dot com</em></strong></a><div class="date" title="2013-08-13 02:18"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112969">
<div class="phpcode"><code><span class="html">
Random choice with a closure.<br><br>$randomChoice&nbsp; = function($array) {return $array[array_rand($array)];};<br><br>$names = ['Dexter', 'Esther', 'David', 'Richard', 'Rachel', 'Belinda'];<br><br>echo $randomChoice($names);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="13909">  
  <a class="name">
  <strong class="user"><em>uvm at sun dot he dot net</em></strong></a><div class="date" title="2001-07-09 06:09"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13909">
<div class="phpcode"><code><span class="html">
If you're just trying to draw a random subset of n elements from an array, it seems more effecient to do something like this:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">draw_rand_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$draws</span><span class="keyword">)
<br>{ 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastIndex </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnArr </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$draws </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rndIndex </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$lastIndex</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$returnArr</span><span class="keyword">,</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$rndIndex</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$draws</span><span class="keyword">--;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastIndex</span><span class="keyword">--;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$returnArr</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>No messing with indexes when you're done... you just have an array with the elements you're looking for in it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="27317">  
  <a class="name">
  <strong class="user"><em>mickoz[at]parodius[dot]com</em></strong></a><div class="date" title="2002-12-01 08:28"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom27317">
<div class="phpcode"><code><span class="html">
For those of you thinking that it does not work for num_req = 1, it is because it return a variable and not an array.&nbsp; This mainly cause some problem with people using foreach.
<br>
<br>The correct way to handle this is explained by that example:
<br>
<br><span class="default">&lt;?php
<br>$some_array </span><span class="keyword">= array(</span><span class="string">"blah"</span><span class="keyword">,</span><span class="string">"bleh"</span><span class="keyword">,</span><span class="string">"foo"</span><span class="keyword">,</span><span class="string">"lele"</span><span class="keyword">);
<br>
<br></span><span class="default">$nb_value </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>
<br></span><span class="default">srand </span><span class="keyword">((float) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">);
<br></span><span class="default">$rand_keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$some_array</span><span class="keyword">, </span><span class="default">$nb_value</span><span class="keyword">);
<br>
<br>if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$rand_keys</span><span class="keyword">))
<br>{
<br>&nbsp; </span><span class="default">$rand_keys </span><span class="keyword">= array(</span><span class="default">$rand_keys</span><span class="keyword">);
<br>}
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rand_keys</span><span class="keyword">); </span><span class="comment">// verify here the array of keys
<br></span><span class="keyword">echo </span><span class="string">"\n&lt;BR&gt;"</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>// You can then correctly use the foreach, as it require an array to work
<br>// If you use foreach with one element, it won't work.
<br>
<br><span class="default">&lt;?php
<br>$random_array </span><span class="keyword">= array();
<br>
<br>foreach(</span><span class="default">$rand_keys </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$random_array</span><span class="keyword">, </span><span class="default">$some_array</span><span class="keyword">[</span><span class="default">$value</span><span class="keyword">]);
<br>}
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$random_array</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22360">  
  <a class="name">
  <strong class="user"><em>josh at 3io dot com</em></strong></a><div class="date" title="2002-06-14 03:20"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22360">
<div class="phpcode"><code><span class="html">
I modified fake_array_rand to always only return 1 element, and did some benchmarks against calling array_rand with the second parameter as 1.&nbsp; I ran 100 samples for each function for each number of elements and took the average result.&nbsp; While the internal array_rand is faster for a small number of elements, it scales very poorly.
<br>
<br>1 elements: 2.0619630813599E-05 sec. for array_rand,8.4352493286133E-05 sec. for fake_array_rand
<br>10 elements: 2.1675825119019E-05 sec. for array_rand,8.427619934082E-05 sec. for fake_array_rand
<br>100 elements: 2.9319524765015E-05 sec. for array_rand,8.4599256515503E-05 sec. for fake_array_rand
<br>1000 elements: 0.0001157283782959 sec. for array_rand,8.5572004318237E-05 sec. for fake_array_rand
<br>10000 elements: 0.0016669762134552 sec. for array_rand,8.5201263427734E-05 sec. for fake_array_rand
<br>100000 elements: 0.015599734783173 sec. for array_rand,8.5580348968506E-05 sec. for fake_array_rand
<br>1000000 elements: 0.18011983394623 sec. for array_rand,8.6690187454224E-05 sec. for fake_array_rand
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">fake_array_rand </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) 
<br>{ 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Help keep the number generator random :) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$randval </span><span class="keyword">and </span><span class="default">usleep </span><span class="keyword">(</span><span class="string">"0.</span><span class="default">$randval</span><span class="string">"</span><span class="keyword">); 
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Seed the random number generator 
<br>&nbsp; &nbsp; &nbsp; &nbsp; # Generate a random number 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">srand </span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">); 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$randval </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(); 
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># Use the random value to 'pick' an entry from the array 
<br>&nbsp; &nbsp; &nbsp; &nbsp; # Count the number of times that the entry is picked
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">++</span><span class="default">$index</span><span class="keyword">[</span><span class="default">$randval </span><span class="keyword">% </span><span class="default">$count</span><span class="keyword">];
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$randval </span><span class="keyword">% </span><span class="default">$count</span><span class="keyword">];
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="67951">  
  <a class="name">
  <strong class="user"><em>dragonfly at dragonflyeye dot net</em></strong></a><div class="date" title="2006-07-07 07:57"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom67951">
<div class="phpcode"><code><span class="html">
Well, this is interesting.&nbsp;&nbsp; I don't see anyone else commenting on this, so just in case you were planning to use this function like I was, be prepared: array_rand does not handle multidimensional arrays.&nbsp; It just ends up returning a list of the X-axis values without the Y-axis arrays.&nbsp; Bummer.&nbsp; I'm going to have to find another way to do what I wanted.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37078">  
  <a class="name">
  <strong class="user"><em>jpinedo</em></strong></a><div class="date" title="2003-11-02 01:15"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37078">
<div class="phpcode"><code><span class="html">
An array of arrays example:
<br>
<br><span class="default">&lt;?php
<br>$banners</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen0.gif"</span><span class="keyword">;
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"www.nosenada.tal"</span><span class="keyword">;
<br>
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen1.gif"</span><span class="keyword">;
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"www.nose.tal"</span><span class="keyword">;
<br>
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen2.gif"</span><span class="keyword">;
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"pagina.html"</span><span class="keyword">;
<br>
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]=</span><span class="string">"imagen3.jpg"</span><span class="keyword">;
<br></span><span class="default">$banners</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]=</span><span class="string">"../pagina.php"</span><span class="keyword">;
<br>
<br></span><span class="default">$id_banner </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$banners</span><span class="keyword">);
<br>
<br>echo&nbsp; </span><span class="string">"Archivo:--"</span><span class="keyword">.</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">$id_banner</span><span class="keyword">][</span><span class="string">'imagen'</span><span class="keyword">]. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;
<br>echo&nbsp; </span><span class="string">"URL:-----"</span><span class="keyword">.</span><span class="default">$banners</span><span class="keyword">[</span><span class="default">$id_banner</span><span class="keyword">][</span><span class="string">'url'</span><span class="keyword">]. </span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87657">  
  <a class="name">
  <strong class="user"><em>admin at jeremyzaretski dot com</em></strong></a><div class="date" title="2008-12-15 08:11"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87657">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="comment">// a foreach friendly version of array_rand
<br></span><span class="keyword">function </span><span class="default">Select_Random_Indices</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if(</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$count </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array(</span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">// using the above function to pick random values instead of entries
<br></span><span class="keyword">function </span><span class="default">Select_Random_Entries</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br>&nbsp; &nbsp; </span><span class="default">$index_array </span><span class="keyword">= </span><span class="default">Select_Random_Indices</span><span class="keyword">(</span><span class="default">$source_array</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; foreach(</span><span class="default">$index_array </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = </span><span class="default">$source_array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50891">  
  <a class="name">
  <strong class="user"><em>maxnamara at yahoo dot com</em></strong></a><div class="date" title="2005-03-13 03:22"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50891">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php <br>$input </span><span class="keyword">= array(</span><span class="string">"Neo"</span><span class="keyword">, </span><span class="string">"Morpheus"</span><span class="keyword">, </span><span class="string">"Trinity"</span><span class="keyword">, </span><span class="string">"Cypher"</span><span class="keyword">, </span><span class="string">"Tank"</span><span class="keyword">); <br><br>function </span><span class="default">my_array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">){<br></span><span class="default">srand</span><span class="keyword">((float) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">10000000</span><span class="keyword">); <br><br></span><span class="default">$rand_keys </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">); <br><br></span><span class="comment">/*<br>print $input[$rand_keys[0]] . "\n"; <br>print $input[$rand_keys[1]] . "\n"; <br>*/<br><br></span><span class="default">$res </span><span class="keyword">= array();<br><br>if(</span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">){<br><br>for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">&lt;</span><span class="default">$i</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">++){<br><br>&nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$rand_keys</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">]];<br>&nbsp; &nbsp; <br>}<br><br>}<br>else{<br><br>&nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="default">$input</span><span class="keyword">[</span><span class="default">$rand_keys</span><span class="keyword">];&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>}<br><br>return </span><span class="default">$res</span><span class="keyword">;<br>}<br><br></span><span class="default">$a </span><span class="keyword">= </span><span class="default">my_array_rand</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br>echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31335">  
  <a class="name">
  <strong class="user"><em>Paul Hodel (paul at ue dot com dot br)</em></strong></a><div class="date" title="2003-04-17 01:40"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31335">
<div class="phpcode"><code><span class="html">
If you trying to get a randon array just use that... it's easier! And you have no repeats...<br><br>&lt;?<br><br>srand ((float) microtime() * 10000000);<br><br>$input = array ("Neo", "Morpheus", "Trinity", "Cypher", "Tank");<br><br>$keys = array_rand ($input, sizeof($input));<br><br>while (list($k, $v) = each($keys))<br>{<br>&nbsp; &nbsp; echo $new_input = $input[$v];<br>}<br><br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87882">  
  <a class="name">
  <strong class="user"><em>info at pavliga dot com</em></strong></a><div class="date" title="2008-12-28 01:52"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87882">
<div class="phpcode"><code><span class="html">
If you want get unique range:<br><br><span class="default">&lt;?php<br>$n </span><span class="keyword">= </span><span class="default">15</span><span class="keyword">;<br><br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">);<br></span><span class="default">$rand </span><span class="keyword">= </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">,</span><span class="default">$n</span><span class="keyword">);<br><br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>echo </span><span class="default">$rand</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71519">  
  <a class="name">
  <strong class="user"><em>Frederick Lemasson aka djassper at gmail</em></strong></a><div class="date" title="2006-12-04 12:57"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71519">
<div class="phpcode"><code><span class="html">
To select a random Value (not a Key) from a Multi-Dimentionnal array I made a recursive function : array_multi_rand()<br><br>the following exemple randomly selects an url from a multidimentionnal array :<br><br>&lt;?<br><br>$Expos['Google']['Science']='news.google.fr/news?topic=t';<br>$Expos['Google']['Economie']='news.google.fr/news?topic=b';<br>$Expos['Google']['Sante']='news.google.fr/news?topic=m';<br>$Expos['Yahoo']='fr.news.yahoo.com';<br>$Expos['Events']['LogicielLibre']='agendadulibre.org';<br>$Expos['MyBlog']='www.kik-it.com';<br><br>function array_multi_rand($Zoo){<br>&nbsp; &nbsp; $Boo=array_rand($Zoo);<br>&nbsp; &nbsp; if(is_array($Zoo[$Boo])){<br>&nbsp; &nbsp; &nbsp; &nbsp; return array_multi_rand($Zoo[$Boo]);<br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; return $Zoo[$Boo];<br>&nbsp; &nbsp; }<br>}<br><br>echo(array_multi_rand($Expos));<br><br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53901">  
  <a class="name">
  <strong class="user"><em>alexkropivko at(dog) yandex dot ru</em></strong></a><div class="date" title="2005-06-16 06:21"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53901">
<div class="phpcode"><code><span class="html">
There was a mistake at "Paul Hodel (paul at ue dot com dot br) 17-Apr-2003 04:40":<br>String <br>echo $new_input = $input[$v];<br><br>have to be:<br>echo $new_input[] = $input[$v];</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31203">  
  <a class="name">
  <strong class="user"><em>scandar at home dot se</em></strong></a><div class="date" title="2003-04-13 09:58"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31203">
<div class="phpcode"><code><span class="html">
Note that the int num_req parameter is the required number of element to randomly select. So if your array has 3 element and num_req=4 then array_rand() will not return anything since it is impossible to select 4 random elements out of an array that only contains 3 elements. Many people think that they will get 3 elements returned but that is of course not the case.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114972">  
  <a class="name">
  <strong class="user"><em>john at brahy dot com</em></strong></a><div class="date" title="2014-05-07 11:00"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114972">
<div class="phpcode"><code><span class="html">
if you want random elements from an array, this worked pretty well for me.<br><br><span class="default">&lt;?php<br></span><span class="comment">//using shuffle randomizes the order of elements<br><br></span><span class="keyword">function </span><span class="default">get_random_elements</span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">,</span><span class="default">$limit </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">shuffle</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br>&nbsp; &nbsp; if ( </span><span class="default">$limit </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69382">  
  <a class="name">
  <strong class="user"><em>JS</em></strong></a><div class="date" title="2006-09-04 03:07"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69382">
<div class="phpcode"><code><span class="html">
I wanted to write something that picks a random entry from a 1column-MySQL database - simply Post Of The Moment (potm). I know there surly are many better ways to do it, but I`m rather new to PHP :)&nbsp; Anyway, it`s simple and no-problem working code. <br>Of course I assume your DB exists and you always have something in it.<br><br>@$link = MySQL_Connect("localhost", "username", "password"); //connect to mysql<br>mySQL_Select_DB("database"); //..to DB<br>@$potms = MySQL_Query("SELECT * FROM potm"); //now we get all from our table and store it<br>MySQL_Close($link); //there`s no need for connection, so we should close it<br><br>$potm_array = ''; //sets variables to "zero" values<br>$i = 0;<br>while ($entry = MySQL_Fetch_Array($potms)) //now we go through our DB<br>&nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $potm_array[$i] = $entry; //our temporary array from which we will random pick a field key<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $i++; //now we increment our field key<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br><br>$potm_id = array_rand($potw_array); //picks a random key from array<br>$potm = $potm_array[$potm_id]['name_of_the_field']; //now we have stored our Post Of The Moment in $potm<br><br>..hope this helps</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63238">  
  <a class="name">
  <strong class="user"><em>trukin at gmail dot com</em></strong></a><div class="date" title="2006-03-16 01:23"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63238">
<div class="phpcode"><code><span class="html">
Modify of last note:<br><span class="default">&lt;?php<br></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_rand'</span><span class="keyword">)) {<br>&nbsp; &nbsp; function </span><span class="default">array_rand</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$lim</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mt_srand</span><span class="keyword">((double) </span><span class="default">microtime</span><span class="keyword">() * </span><span class="default">1000000</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">&lt;=</span><span class="default">$lim</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$num</span><span class="keyword">[] = </span><span class="default">mt_srand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return @</span><span class="default">$num</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>mt_rand generates a better random number, and with the limit.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56291">  
  <a class="name">
  <strong class="user"><em>bjcffnet at gmail dot com</em></strong></a><div class="date" title="2005-08-29 04:29"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56291">
<div class="phpcode"><code><span class="html">
As wazaawazaa600 at msn dot com pointed out, a multi-dimensional array doesn't work with this function. So, I hope I can help someone with this :)<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Returns a number of random elements from an array.<br> *<br> * It returns the number (specified in $limit) of elements from<br> * $array. The elements are returned in a random order, exactly<br> * as it was passed to the function. (So, it's safe for multi-<br> * dimensional arrays, aswell as array's where you need to keep<br> * the keys)<br> *<br> * @author Brendan Caffrey&nbsp; &lt;bjcffnet at gmail dot com&gt;<br> * @param&nbsp; array&nbsp; $array&nbsp; The array to return the elements from<br> * @param&nbsp; int&nbsp; &nbsp; $limit&nbsp; The number of elements to return from<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the array<br> * @return array&nbsp; The randomized array<br> */<br></span><span class="keyword">function </span><span class="default">array_rand_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= @</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// Sanity checks<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$limit </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">|| !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || </span><span class="default">$limit </span><span class="keyword">&gt; </span><span class="default">$count</span><span class="keyword">) return array();<br>&nbsp; &nbsp; if (</span><span class="default">$count </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) return </span><span class="default">$array</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// Loop through and get the random numbers<br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$limit</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Can't have double randoms, right?<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while (isset(</span><span class="default">$rands</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">])) </span><span class="default">$rand </span><span class="keyword">= </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rands</span><span class="keyword">[</span><span class="default">$rand</span><span class="keyword">] = </span><span class="default">$rand</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$curr </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$rands</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// I think it's better to return the elements in a random<br>&nbsp; &nbsp; // order, which is why I'm not just using a foreach loop to<br>&nbsp; &nbsp; // loop through the random numbers<br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">) != </span><span class="default">$limit</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cur </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$cur </span><span class="keyword">== </span><span class="default">$curr</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Next...<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$curr </span><span class="keyword">= </span><span class="default">next</span><span class="keyword">(</span><span class="default">$rands</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cur</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45176">  
  <a class="name">
  <strong class="user"><em>yhoko at yhoko dot com</em></strong></a><div class="date" title="2004-08-27 06:16"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom45176">
<div class="phpcode"><code><span class="html">
According to office at at universalmetropolis dot com I have to say that the example is wrong.<br><br><span class="default">&lt;?php <br></span><span class="comment">// retrieve one of the options at random from the array <br></span><span class="default">$teamcolours </span><span class="keyword">= </span><span class="default">$teamcolours</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$teamcolours</span><span class="keyword">))]; <br></span><span class="default">?&gt;</span> <br><br>The count() function will return the number of items in the array, that's the last index + 1. So if there's 2 items in the array, count() will return 2 but the indices are 0 and 1. Now since rand(x,y) randomizes between x and y inclusively the index from the above example may be out of bounds. Thus you have to subtract 1 from the count:<br><br><span class="default">&lt;?php <br>&nbsp; &nbsp; </span><span class="comment">// Get random item<br>&nbsp; &nbsp; </span><span class="default">$teamcolours </span><span class="keyword">= </span><span class="default">$teamcolours</span><span class="keyword">[</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">count</span><span class="keyword">(</span><span class="default">$teamcolours</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">)]; <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109393">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-07-13 02:42"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109393">
<div class="phpcode"><code><span class="html">
It doesn't explicitly say it in the documentation, but PHP won't pick the same key twice in one call.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.array-rand.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:56 GMT -->


</body></html>