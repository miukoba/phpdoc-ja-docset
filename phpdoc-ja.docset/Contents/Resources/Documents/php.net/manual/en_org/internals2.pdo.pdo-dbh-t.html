<html><!-- Mirrored from php.net/manual/en/internals2.pdo.pdo-dbh-t.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:30 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>pdo_dbh_t definition</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="internals2.pdo.pdo-dbh-t.html">
 <link rel="shorturl" href="internals2.pdo.pdo-dbh-t.html">
 <link rel="alternate" href="internals2.pdo.pdo-dbh-t.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="internals2.pdo.html">
 <link rel="prev" href="internals2.pdo.packaging.html">
 <link rel="next" href="internals2.pdo.pdo-stmt-t.html">

 <link rel="alternate" href="internals2.pdo.pdo-dbh-t.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/internals2.pdo.pdo-dbh-t.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/internals2.pdo.pdo-dbh-t.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/internals2.pdo.pdo-dbh-t.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/internals2.pdo.pdo-dbh-t.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/internals2.pdo.pdo-dbh-t.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/internals2.pdo.pdo-dbh-t.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/internals2.pdo.pdo-dbh-t.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/internals2.pdo.pdo-dbh-t.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/internals2.pdo.pdo-dbh-t.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/internals2.pdo.pdo-dbh-t.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="internals2.html">PHP at the Core: A Hacker's Guide</a></li>      <li><a href="internals2.pdo.html">PDO Driver How-To</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="internals2.pdo.pdo-dbh-t" class="sect1">
 <h2 class="title">pdo_dbh_t definition</h2>
 <p class="para">
  All fields should be treated as read-only by the driver, unless explicitly
  stated otherwise.
 </p>
 <div class="figure">
  <h1 class="title">pdo_dbh_t</h1>
  <div class="example-contents"><div class="ccode"><pre class="ccode">/* represents a connection to a database */
struct _pdo_dbh_t {
    /* driver specific methods */
    struct pdo_dbh_methods *methods;</pre>
</div><a name="internals2.pdo.dbh.co.methods" id="internals2.pdo.dbh.co.methods">*</a><div class="ccode"><pre class="ccode">/* driver specific data */
    void *driver_data;</pre>
</div><a name="internals2.pdo.dbh.co.driver-data" id="internals2.pdo.dbh.co.driver-data">**</a><div class="ccode"><pre class="ccode">/* credentials */
    char *username, *password;</pre>
</div><a name="internals2.pdo.dbh.co.credentials" id="internals2.pdo.dbh.co.credentials">***</a><div class="ccode"><pre class="ccode">/* if true, then data stored and pointed at by this handle must all be
     * persistently allocated */
    unsigned is_persistent:1;</pre>
</div><a name="internals2.pdo.dbh.co.is-persist" id="internals2.pdo.dbh.co.is-persist">****</a><div class="ccode"><pre class="ccode">/* if true, driver should act as though a COMMIT were executed between
     * each executed statement; otherwise, COMMIT must be carried out manually
     * */
    unsigned auto_commit:1;</pre>
</div><a name="internals2.pdo.dbh.co.auto-commit" id="internals2.pdo.dbh.co.auto-commit">*****</a><div class="ccode"><pre class="ccode">/* if true, the driver requires that memory be allocated explicitly for
     * the columns that are returned */
    unsigned alloc_own_columns:1;</pre>
</div><a name="internals2.pdo.dbh.co.alloc-own" id="internals2.pdo.dbh.co.alloc-own">******</a><div class="ccode"><pre class="ccode">/* if true, commit or rollBack is allowed to be called */
    unsigned in_txn:1;                  

    /* max length a single character can become after correct quoting */
    unsigned max_escaped_char_length:3;</pre>
</div><a name="internals2.pdo.dbh.co.max-esc" id="internals2.pdo.dbh.co.max-esc">*******</a><div class="ccode"><pre class="ccode">/* data source string used to open this handle */
    const char *data_source;</pre>
</div><a name="internals2.pdo.dbh.co.dsn" id="internals2.pdo.dbh.co.dsn">********</a><div class="ccode"><pre class="ccode">unsigned long data_source_len;

    /* the global error code. */
    pdo_error_type error_code;</pre>
</div><a name="internals2.pdo.dbh.co.error-code" id="internals2.pdo.dbh.co.error-code">*********</a><div class="ccode"><pre class="ccode">enum pdo_case_conversion native_case</pre>
</div><a name="internals2.pdo.dbh.co-ncase" id="internals2.pdo.dbh.co-ncase">**********</a><div class="ccode"><pre class="ccode">, desired_case;
};</pre>
</div></div>

 </div>
 <table>
  <tbody><tr><td><a href="#internals2.pdo.dbh.co.methods">*</a></td><td>
   <p class="para">
    The driver <em class="emphasis">must</em> set this during
    <span class="function"><strong>SKEL_handle_factory()</strong></span>.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.driver-data">**</a></td><td>
   <p class="para">
    This item is for use by the driver; the intended usage is to store a
    pointer (during <span class="function"><strong>SKEL_handle_factory()</strong></span>) 
    to whatever instance data is required to maintain a connection to
    the database.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.credentials">***</a></td><td>
   <p class="para">
    The username and password that were passed into the PDO constructor.
    The driver should use these values when it initiates a connection to the
    database.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.is-persist">****</a></td><td>
   <p class="para">
    If this is set to 1, then any data that is referenced by the
    dbh, including whatever structure your driver allocates,
    <em class="emphasis">MUST</em> be allocated persistently.  This is easy to
    achieve; rather than using the usual <span class="function"><strong>emalloc()</strong></span> simply
    use <span class="function"><strong>pemalloc()</strong></span> and pass the value of this flag as the
    last parameter.  Failure to use the appropriate kind of memory can lead
    to serious memory faults, resulting (in the best case) a hard crash, and
    in the worst case, an exploitable memory problem.
   </p>
   <p class="para">
    If, for whatever reason, your driver is not suitable to run persistently,
    you <em class="emphasis">MUST</em> check this flag in your
    <span class="function"><strong>SKEL_handle_factory()</strong></span> and raise an appropriate error.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.auto-commit">*****</a></td><td>
   <p class="para">
    You should check this value in your <span class="function"><strong>SKEL_handle_doer()</strong></span>
    and <span class="function"><strong>SKEL_stmt_execute()</strong></span> functions; if it evaluates to
    true, you must attempt to commit the query now.  Most database
    implementations offer an auto-commit mode that handles this automatically.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.alloc-own">******</a></td><td>
   <p class="para">
    If your database client library API operates by fetching data into a
    caller-supplied buffer, you should set this flag to 1 during your
    <span class="function"><strong>SKEL_handle_factory()</strong></span>.  When set, PDO will call your
    <span class="function"><strong>SKEL_stmt_describer()</strong></span> earlier than it would
    otherwise.  This early call allows you to determine those buffer sizes
    and issue appropriate calls to the database client library.
   </p>
   <p class="para">
    If your database client library API simply returns pointers to its own
    internal buffers for you to copy after each fetch call, you should leave
    this value set to 0.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.max-esc">*******</a></td><td>
   <p class="para">
    If your driver doesn't support native prepared statements
    (<code class="parameter">supports_placeholders</code> is set to
    <strong><code>PDO_PLACEHOLDER_NONE</code></strong>), you must set
    this value to the maximum length that can be taken up by a single
    character when it is quoted by your
    <span class="function"><strong>SKEL_handle_quoter()</strong></span> function.  This value is used to
    calculate the amount of buffer space required when PDO executes the
    statement.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.dsn">********</a></td><td>
   <p class="para">
    This holds the value of the DSN that was passed into the PDO
    constructor.  If your driver implementation needed to modify the DSN for
    whatever reason, it should update this member during
    <span class="function"><strong>SKEL_handle_factory()</strong></span>.  Modifying this member should
    be avoided.  If you do change it, you must ensure that
    <code class="parameter">data_source_len</code> is also correct.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co.error-code">*********</a></td><td>
   <p class="para">
    Whenever an error occurs during a call to one of your driver methods,
    you should set this member to the SQLSTATE code that best describes the
    error and return an error.  In this HOW-TO, the suggested practice is to
    call <span class="function"><strong>SKEL_handle_error()</strong></span> when an error is detected,
    and have it set the error code.
   </p>
  </td></tr>

  <tr><td><a href="#internals2.pdo.dbh.co-ncase">**********</a></td><td>
   <p class="para">
    Your driver should set this during
    <span class="function"><strong>SKEL_handle_factory()</strong></span>; the value should reflect how
    the database returns the names of the columns in result sets.  If the
    name matches the case that was used in the query, set it to
    <strong><code>PDO_CASE_NATURAL</code></strong> (this is actually the default).
    If the column names are always returned in upper case, set it to
    <strong><code>PDO_CASE_UPPER</code></strong>.  If the column names are always
    returned in lower case, set it to <strong><code>PDO_CASE_LOWER</code></strong>.
    The value you set is used to determine if PDO should perform case
    folding when the user sets the <strong><code>PDO_ATTR_CASE</code></strong>
    attribute.
   </p>
  </td></tr>

 </tbody></table>
</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div>
 <div class="note">There are no user contributed notes for this page.</div></section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/internals2.pdo.pdo-dbh-t.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:30 GMT -->


</body></html>