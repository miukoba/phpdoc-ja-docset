<html><!-- Mirrored from php.net/manual/en/function.imap-getmailboxes.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:01:34 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>imap_getmailboxes</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.imap-getmailboxes.html">
 <link rel="shorturl" href="http://php.net/imap-getmailboxes">
 <link rel="alternate" href="http://php.net/imap-getmailboxes" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.imap.html">
 <link rel="prev" href="function.imap-getacl.html">
 <link rel="next" href="function.imap-getsubscribed.html">

 <link rel="alternate" href="function.imap-getmailboxes.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.imap-getmailboxes.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.imap-getmailboxes.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.imap-getmailboxes.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.imap-getmailboxes.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.imap-getmailboxes.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.imap-getmailboxes.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.imap-getmailboxes.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.imap-getmailboxes.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.imap-getmailboxes.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.imap-getmailboxes.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.mail.html">Mail Related Extensions</a></li>      <li><a href="book.imap.html">IMAP</a></li>      <li><a href="ref.imap.html">IMAP Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.imap-getmailboxes" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imap_getmailboxes</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imap_getmailboxes</span> â€” <span class="dc-title">Read the list of mailboxes, returning detailed information on each one</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imap-getmailboxes-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>imap_getmailboxes</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$imap_stream</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$ref</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   )</div>

  <p class="para rdfs-comment">
   Gets information on the mailboxes.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imap-getmailboxes-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt>
<code class="parameter">
imap_stream</code></dt>
<dd>
<p class="para">An IMAP stream returned by
<span class="function"><a href="function.imap-open.html" class="function">imap_open()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">ref</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">ref</code> should normally be just the server
       specification as described in <span class="function"><a href="function.imap-open.html" class="function">imap_open()</a></span>
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">Specifies where in the mailbox hierarchy
to start searching.</p><p class="para">There are two special characters you can
pass as part of the <code class="parameter">pattern</code>:
'<em>*</em>' and '<em>%</em>'.
'<em>*</em>' means to return all mailboxes. If you pass
<code class="parameter">pattern</code> as '<em>*</em>', you will
get a list of the entire mailbox hierarchy.
'<em>%</em>'
means to return the current level only.
'<em>%</em>' as the <code class="parameter">pattern</code>
parameter will return only the top level
mailboxes; '<em>~/mail/%</em>' on <em>UW_IMAPD</em> will return every mailbox in the <var class="filename">~/mail</var> directory, but none in subfolders of that directory.</p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imap-getmailboxes-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array of objects containing mailbox information. Each
   object has the attributes <code class="parameter">name</code>, specifying
   the full name of the mailbox; <code class="parameter">delimiter</code>,
   which is the hierarchy delimiter for the part of the hierarchy
   this mailbox is in; and
   <code class="parameter">attributes</code>. <code class="parameter">Attributes</code>
   is a bitmask that can be tested against:
   </p><ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      <strong><code>LATT_NOINFERIORS</code></strong> - This mailbox contains, and may not contain any
      "children" (there are no mailboxes below this one). Calling 
      <span class="function"><a href="function.imap-createmailbox.html" class="function">imap_createmailbox()</a></span> will not work on this mailbox.
     </p>
    </li>
   <li class="listitem">
     <p class="para">
      <strong><code>LATT_NOSELECT</code></strong> - This is only a container,
      not a mailbox - you cannot open it.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <strong><code>LATT_MARKED</code></strong> - This mailbox is marked. This means that it may 
      contain new messages since the last time it was checked. Not provided by all IMAP
      servers.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      <strong><code>LATT_UNMARKED</code></strong> - This mailbox is not marked, does not contain new
      messages.  If either <strong><code>MARKED</code></strong> or <strong><code>UNMARKED</code></strong> is
      provided, you can assume the IMAP server  supports this feature for this mailbox.
     </p>
    </li>
   </ul>
  <p></p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imap-getmailboxes-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-3460">
    <p><strong>Example #1 <span class="function"><strong>imap_getmailboxes()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$mbox&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imap_open</span><span style="color: #007700">(</span><span style="color: #DD0000">"{imap.example.org}"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"username"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OP_HALFOPEN</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;die(</span><span style="color: #DD0000">"can't&nbsp;connect:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">imap_last_error</span><span style="color: #007700">());<br><br></span><span style="color: #0000BB">$list&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">imap_getmailboxes</span><span style="color: #007700">(</span><span style="color: #0000BB">$mbox</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"{imap.example.org}"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"*"</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$list</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$list&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"(</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">)&nbsp;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">imap_utf7_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">","</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"'"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">delimiter&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"',"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">attributes&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"imap_getmailboxes&nbsp;failed:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">imap_last_error</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">imap_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$mbox</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imap-getmailboxes-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imap-getsubscribed.html" class="function" rel="rdfs-seeAlso">imap_getsubscribed()</a> - List all the subscribed mailboxes</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="15088">  
  <a class="name">
  <strong class="user"><em>foom at fuhm dot NO_supercalifragilisticexpialidocious_SPAM dot net</em></strong></a><div class="date" title="2001-08-27 05:42"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom15088">
<div class="phpcode"><code><span class="html">
The list of mailbox attributes in this document is very misleading. In particular the explanation of noinferiors is just wrong. It does not mean that the mailbox currently has no children, it means that it *cannot* have children ever. Also, it is untrue that marked and unmarked are only used by UW-IMAP. They are in the official IMAP specification and are used by at least Courier-imap as well.
<br>
<br>One thing to watch out for, however, is broken IMAP servers which do send \Noinferiors when they mean that there are currently no children.
<br>
<br>From the IMAP4rev1 specs (RFC 2060):
<br>&nbsp; &nbsp; &nbsp; \Noinferiors
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; It is not possible for any child levels of hierarchy to exist
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; under this name; no child levels exist now and none can be
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; created in the future.
<br>
<br>&nbsp; &nbsp; &nbsp; \Noselect
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; It is not possible to use this name as a selectable mailbox.
<br>
<br>&nbsp; &nbsp; &nbsp; \Marked
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The mailbox has been marked "interesting" by the server; the
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; mailbox probably contains messages that have been added since
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the last time the mailbox was selected.
<br>
<br>&nbsp; &nbsp; &nbsp; \Unmarked
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The mailbox does not contain any additional messages since the
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; last time the mailbox was selected.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71243">  
  <a class="name">
  <strong class="user"><em>Mohamed Abbas mabbas_xyz at yahoo dot com</em></strong></a><div class="date" title="2006-11-18 08:51"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71243">
<div class="phpcode"><code><span class="html">
i am currently develop a simple IMAP client, when i call imap_getmailboxes() i receive a different values in attributes property of the mailbox object the problem is how can i manipulate these attributes to get a meaningful value,<br>if you make a hard search to find a solution for this, you will<br>not find any useful documents for this problem, let us take a closer look for this problem.<br><br>when i call imap_getmailboxes() against different IMAP servers i got these attribute values<br><br>[attributes] =&gt; 9<br>[attributes] =&gt; 1<br>[attributes] =&gt; 64<br>[attributes] =&gt; 32<br>[attributes] =&gt; 40 <br><br>the documentation tell us that we check this attributes against four constants, these contents are<br><br>LATT_NOINFERIORS <br>LATT_NOSELECT <br>LATT_MARKED<br>LATT_UNMARKED<br><br>the value of these constants are <br><br>LATT_NOINFERIORS = 1<br>LATT_NOSELECT = 2<br>LATT_MARKED = 4<br>LATT_UNMARKED = 8<br><br>you can got this result by echo each constant, unfortunately the documentation not explain how we can check the attributes against the constants, after a long time of searching i find the answer in source code of c-client <br>(you can get the source from <a rel="nofollow" target="_blank">ftp://ftp.cac.washington.edu/imap/</a>)<br>under \src\c-client you will find mail.h open it and you will find this<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /* terminal node in hierarchy */<br>#define LATT_NOINFERIORS (long) 0x1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* name can not be selected */<br>#define LATT_NOSELECT (long) 0x2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* changed since last accessed */<br>#define LATT_MARKED (long) 0x4<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* accessed since last changed */<br>#define LATT_UNMARKED (long) 0x8<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* name has referral to remote mailbox */<br>#define LATT_REFERRAL (long) 0x10<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* has selectable inferiors */<br>#define LATT_HASCHILDREN (long) 0x20<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* has no selectable inferiors */<br>#define LATT_HASNOCHILDREN (long) 0x40<br><br>as you notice here these are our four constants and three additional constants <br><br>LATT_REFERRAL<br>LATT_HASCHILDREN<br>LATT_HASNOCHILDREN<br><br>then what is the value of these 3 attributes <br>LATT_REFERRAL 0x10 = 00010000 in binary, the bitmask value is 2^4 = 16 and so on, or simply echo this constant to get the value, then<br><br>LATT_REFERRAL = 16<br>LATT_HASCHILDREN = 32<br>LATT_HASNOCHILDREN = 64<br><br>finally the full list of constants will be<br>LATT_NOINFERIORS = 1<br>LATT_NOSELECT = 2<br>LATT_MARKED = 4<br>LATT_UNMARKED = 8<br>LATT_REFERRAL = 16<br>LATT_HASCHILDREN = 32<br>LATT_HASNOCHILDREN = 64<br><br>ok let's back to our attributes <br>[attributes] =&gt; 9<br>[attributes] =&gt; 1<br>[attributes] =&gt; 64<br>[attributes] =&gt; 32<br>[attributes] =&gt; 40 <br><br>[attributes] =&gt; 9 this mean it's LATT_UNMARKED and LATT_NOINFERIORS 1+8 =9<br><br>[attributes] =&gt; 1 this mean LATT_NOINFERIORS<br><br>[attributes] =&gt; 64 this mean LATT_HASNOCHILDREN<br><br>[attributes] =&gt; 32 this mean LATT_HASCHILDREN <br><br>[attributes] =&gt; 40 this mean LATT_HASCHILDREN and LATT_UNMARKED 32+8=40<br><br>this just like linux file permission 7 mean read, write, and execute 4+2+1 read=4 write=2 execute=1<br><br>that is what i found, i hope this can help <br><br>Mohamed Abbas<br>Nileweb Egypt</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42135">  
  <a class="name">
  <strong class="user"><em>ad-rotator.com</em></strong></a><div class="date" title="2004-05-04 01:17"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42135">
<div class="phpcode"><code><span class="html">
In case you print_r() or var_dump() the object and see an int for attribute, these are the constant integers for the bitmask.<br><br>1 LATT_NOINFERIORS<br>2 LATT_NOSELECT<br>4 LATT_MARKED<br>8 LATT_UNMARKED</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61471">  
  <a class="name">
  <strong class="user"><em>emielbom at hotmail dot com</em></strong></a><div class="date" title="2006-02-04 07:09"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61471">
<div class="phpcode"><code><span class="html">
i was looking for a function to test the attributes.
<br>and it was hard to find an answer or code.
<br>
<br>Maybe there is a function availeble, but i couldn't find it.
<br>
<br>the first function: returns all mailboxes in on the server
<br>
<br>The second function: returns a bitstring from the attr_number returned by getmailboxes()
<br>
<br>The tirth function: returns an array with the active attributes on the specific mailbox
<br>
<br>Last Line: is a combination of the functions: the output is, any map witch can hold no mail but only sub boxes...
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">getFolders</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">, </span><span class="default">$serverString</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; </span><span class="default">$list </span><span class="keyword">= </span><span class="default">imap_getmailboxes</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">, </span><span class="default">$serverString</span><span class="keyword">, </span><span class="string">"*"</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mapname </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$serverString</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">imap_utf7_decode</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$mapname</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] != </span><span class="string">"."</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$list_folders</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$mapname</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$list_folders</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'delimiter'</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">delimiter</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$list_folders</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="string">'attributes'</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"imap_getmailboxes failed: " </span><span class="keyword">. </span><span class="default">imap_last_error</span><span class="keyword">() . </span><span class="string">"\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$list_folders</span><span class="keyword">;
<br>}
<br>
<br>function </span><span class="default">IntToBin</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$BitWaarde </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$IntNum </span><span class="keyword">= </span><span class="default">$number</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$BinString </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">$IntNum </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// bepaal de max bitwaarde aan de hand van $IntNum
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$IntNum </span><span class="keyword">&gt; </span><span class="default">$BitWaarde</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BitWaarde </span><span class="keyword">= </span><span class="default">$BitWaarde </span><span class="keyword">* </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// maken van een binaire string.
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$BitWaarde </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$IntNum </span><span class="keyword">&lt; </span><span class="default">$BitWaarde</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$BinString </span><span class="keyword">!= </span><span class="string">""</span><span class="keyword">) </span><span class="default">$BinString </span><span class="keyword">.= </span><span class="string">"0"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BinString </span><span class="keyword">.= </span><span class="string">"1"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$IntNum </span><span class="keyword">= </span><span class="default">$IntNum</span><span class="keyword">-</span><span class="default">$BitWaarde</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BitWaarde </span><span class="keyword">= </span><span class="default">$BitWaarde </span><span class="keyword">/ </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">$BinString</span><span class="keyword">;
<br>}
<br>
<br>function </span><span class="default">Attributes</span><span class="keyword">(</span><span class="default">$BinString</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; </span><span class="default">$BinInt </span><span class="keyword">= (int)</span><span class="default">$BinString</span><span class="keyword">;
<br>&nbsp; &nbsp; if (</span><span class="default">$BinInt </span><span class="keyword">&gt;=</span><span class="default">1000</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_UNMARKED'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BinInt </span><span class="keyword">= </span><span class="default">$BinInt</span><span class="keyword">-</span><span class="default">1000</span><span class="keyword">;
<br>&nbsp; &nbsp; } else </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_UNMARKED'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">$BinInt </span><span class="keyword">&gt;=</span><span class="default">100</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_MARKED'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BinInt </span><span class="keyword">= </span><span class="default">$BinInt</span><span class="keyword">-</span><span class="default">100</span><span class="keyword">;
<br>&nbsp; &nbsp; } else </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_MARKED'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if (</span><span class="default">$BinInt </span><span class="keyword">&gt;=</span><span class="default">10</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_NOSELECT'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BinInt </span><span class="keyword">= </span><span class="default">$BinInt</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">;
<br>&nbsp; &nbsp; } else </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_NOSELECT'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if (</span><span class="default">$BinInt </span><span class="keyword">&gt;=</span><span class="default">1</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_NOINFERIORS'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$BinInt </span><span class="keyword">= </span><span class="default">$BinInt</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; } else </span><span class="default">$setAttribute</span><span class="keyword">[</span><span class="string">'LATT_NOINFERIORS'</span><span class="keyword">] = </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$setAttribute</span><span class="keyword">;
<br>}
<br>
<br>foreach (</span><span class="default">getFolders</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">, </span><span class="default">$config</span><span class="keyword">[</span><span class="string">'Server_string'</span><span class="keyword">]) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Attr </span><span class="keyword">= </span><span class="default">Attributes</span><span class="keyword">(</span><span class="default">IntToBin</span><span class="keyword">((int)</span><span class="default">$val</span><span class="keyword">[</span><span class="string">'attributes'</span><span class="keyword">]));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$Attr</span><span class="keyword">[</span><span class="string">'LATT_NOINFERIORS'</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;option value='"</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">].</span><span class="string">"'&gt;"</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">].</span><span class="string">"&lt;/option&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104946">  
  <a class="name">
  <strong class="user"><em>james dot mattingly at gmail dot com</em></strong></a><div class="date" title="2011-07-18 12:19"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104946">
<div class="phpcode"><code><span class="html">
For the purposes of passing along the attributes as a json array, I wanted to pass the attributes as an indexed array to save on bandwidth and session storage.&nbsp; The human readable translation is then performed in javascript by relating each key to the proper attribute label.&nbsp; I also wanted a cleaner way of converting the attributes without calling another function or using a complex iteration. This puts each binary attribute into it's own array element for easy testing. <br><br><span class="default">&lt;?php<br>$mailboxes </span><span class="keyword">= </span><span class="default">imap_getmailboxes</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">, </span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">);<br><br>foreach(</span><span class="default">$mailboxes </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$mailbox</span><span class="keyword">){<br>&nbsp;&nbsp; ...<br>&nbsp;&nbsp; </span><span class="default">$attrs </span><span class="keyword">=&nbsp; </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">),</span><span class="default">7</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">STR_PAD_LEFT</span><span class="keyword">),</span><span class="default">8</span><span class="keyword">);&nbsp; </span><span class="comment">// convert decimal to an array of attributes<br>&nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$attrs</span><span class="keyword">); </span><span class="comment">// Remove the extra element at the front of the array in position 0<br>&nbsp;&nbsp; </span><span class="keyword">...<br>}<br></span><span class="default">?&gt;<br></span><br>With temporary variables, the conversion would look like this.<br><br><span class="default">&lt;?php<br>$attr_binary </span><span class="keyword">= </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$mailbox</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">);&nbsp; </span><span class="comment">// convert decimal to binary<br></span><span class="default">$attr_binary </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$attr_binary</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">STR_PAD_LEFT</span><span class="keyword">);&nbsp; </span><span class="comment">// pad with 0's on the left<br></span><span class="default">$attrs </span><span class="keyword">= </span><span class="default">$preg_split</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="default">$attr_binary</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">);&nbsp; </span><span class="comment">// split into an array after each character<br></span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$attrs</span><span class="keyword">);&nbsp; </span><span class="comment">// Remove the extra element at the front of the array in position 0<br></span><span class="default">?&gt;<br></span><br>By defining the attributes as a map to the array index, you can test as follows.<br><br><span class="default">&lt;?php<br>define</span><span class="keyword">(</span><span class="string">"ATTR_NOINFERIORS"</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_NOSELECT "</span><span class="default">5</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_MARKED "</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_UNMARKED "</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_REFERRAL "</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_HASCHILDREN "</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">"ATTR_HASNOCHILDREN "</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br><br>if (</span><span class="default">$attrs</span><span class="keyword">[</span><span class="default">ATTR_HASCHILDREN</span><span class="keyword">]){<br> </span><span class="comment">// do something<br></span><span class="keyword">}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.imap-getmailboxes.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:01:34 GMT -->


</body></html>