<html><!-- Mirrored from php.net/manual/en/function.end.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:50 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>end</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.end.html">
 <link rel="shorturl" href="http://php.net/end">
 <link rel="alternate" href="http://php.net/end" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.array.html">
 <link rel="prev" href="function.each.html">
 <link rel="next" href="function.extract.html">

 <link rel="alternate" href="function.end.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.end.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.end.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.end.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.end.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.end.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.end.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.end.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.end.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.end.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.end.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.array.html">Arrays</a></li>      <li><a href="ref.array.html">Array Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.end" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">end</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">end</span> â€” <span class="dc-title">Set the internal pointer of an array to its last element</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.end-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>end</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&amp;$array</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>end()</strong></span> advances <code class="parameter">array</code>'s
   internal pointer to the last element, and returns its value.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.end-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       The array.  This array is passed by reference because it is modified by
       the function.  This means you must pass it a real variable and not
       a function returning an array because only actual variables may be
       passed by reference.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.end-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the value of the last element or <strong><code>FALSE</code></strong> for empty array.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.end-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5129">
    <p><strong>Example #1 <span class="function"><strong>end()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'banana'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'cranberry'</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">end</span><span style="color: #007700">(</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;cranberry<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.end-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.current.html" class="function" rel="rdfs-seeAlso">current()</a> - Return the current element in an array</span></li>
    <li class="member"><span class="function"><a href="function.each.html" class="function" rel="rdfs-seeAlso">each()</a> - Return the current key and value pair from an array and advance the array cursor</span></li>
    <li class="member"><span class="function"><a href="function.prev.html" class="function" rel="rdfs-seeAlso">prev()</a> - Rewind the internal array pointer</span></li>
    <li class="member"><span class="function"><a href="function.reset.html" class="function" rel="rdfs-seeAlso">reset()</a> - Set the internal pointer of an array to its first element</span></li>
    <li class="member"><span class="function"><a href="function.next.html" class="function" rel="rdfs-seeAlso">next()</a> - Advance the internal array pointer of an array</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="24804">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-08-28 06:34"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom24804">
<div class="phpcode"><code><span class="html">
If you need to get a reference on the first or last element of an array, use these functions because reset() and end() only return you a copy that you cannot dereference directly:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">first</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br>if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return &amp;</span><span class="default">$array</span><span class="keyword">;
<br>if (!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;
<br></span><span class="default">reset</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br>return &amp;</span><span class="default">$array</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)];
<br>}
<br>
<br>function </span><span class="default">last</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">) {
<br>if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return &amp;</span><span class="default">$array</span><span class="keyword">;
<br>if (!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;
<br></span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br>return &amp;</span><span class="default">$array</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)];
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107733">  
  <a class="name">
  <strong class="user"><em>jorge at REMOVETHIS-2upmedia dot com</em></strong></a><div class="date" title="2012-03-01 01:20"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107733">
<div class="phpcode"><code><span class="html">
If all you want is the last item of the array without affecting the internal array pointer just do the following:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">endc</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) { return </span><span class="default">end</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">); }<br><br></span><span class="default">$items </span><span class="keyword">= array( </span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">);<br></span><span class="default">$lastItem </span><span class="keyword">= </span><span class="default">endc</span><span class="keyword">( </span><span class="default">$items </span><span class="keyword">); </span><span class="comment">// three<br></span><span class="default">$current </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">( </span><span class="default">$items </span><span class="keyword">); </span><span class="comment">// one<br></span><span class="default">?&gt;<br></span><br>This works because the parameter to the function is being sent as a copy, not as a reference to the original variable.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101193">  
  <a class="name">
  <strong class="user"><em>franz at develophp dot org</em></strong></a><div class="date" title="2010-12-01 03:06"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101193">
<div class="phpcode"><code><span class="html">
It's interesting to note that when creating an array with numeric keys in no particular order, end() will still only return the value that was the last one to be created. So, if you have something like this:
<br>
<br>&nbsp; &nbsp; <span class="default">&lt;?php
<br>&nbsp; &nbsp; $a </span><span class="keyword">= array();
<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; echo </span><span class="default">end</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">?&gt;
<br></span>
<br>This will print "0".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68052">  
  <a class="name">
  <strong class="user"><em>jasper at jtey dot com</em></strong></a><div class="date" title="2006-07-11 12:48"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68052">
<div class="phpcode"><code><span class="html">
This function returns the value at the end of the array, but you may sometimes be interested in the key at the end of the array, particularly when working with non integer indexed arrays:<br><br><span class="default">&lt;?php<br></span><span class="comment">// Returns the key at the end of the array<br></span><span class="keyword">function </span><span class="default">endKey</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br> </span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br> return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Usage example:<br><span class="default">&lt;?php<br>$a </span><span class="keyword">= array(</span><span class="string">"one" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"two" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">, </span><span class="string">"three" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">);<br>echo </span><span class="default">endKey</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// will output "three"<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58209">  
  <a class="name">
  <strong class="user"><em>ken at expitrans dot com</em></strong></a><div class="date" title="2005-10-27 09:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58209">
<div class="phpcode"><code><span class="html">
Please note that from version 5.0.4 ==&gt; 5.0.5 that this function now takes an array. This will possibly break some code for instance:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">echo </span><span class="string">"&gt;&gt; "</span><span class="keyword">.</span><span class="default">end</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">))).</span><span class="string">"\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>which will return "Fatal error: Only variables can be passed by reference" in version &lt;= 5.0.4 but not in 5.0.5.<br><br>If you run into this problem with nested function calls, then an easy workaround is to assign the result from array_keys (or whatever function) to an intermediary variable:<br><br><span class="default">&lt;?php<br><br>$x </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(array(</span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">));<br>echo </span><span class="string">"&gt;&gt; "</span><span class="keyword">.</span><span class="default">end</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114978">  
  <a class="name">
  <strong class="user"><em>ivijan dot stefan at gmail dot com</em></strong></a><div class="date" title="2014-05-08 04:47"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114978">
<div class="phpcode"><code><span class="html">
I found that the function end() is the best for finding extensions&nbsp; on file name. This function cleans backslashes and takes the extension of a file.<br><br><span class="default">&lt;?php<br></span><span class="keyword">private function </span><span class="default">extension</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\\"</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">end</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br>&nbsp; &nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br><br></span><span class="comment">// EXAMPLE:<br></span><span class="default">$file</span><span class="keyword">=</span><span class="string">'name-Of_soMe.File.txt'</span><span class="keyword">;<br>echo </span><span class="default">extension</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">); </span><span class="comment">// txt<br></span><span class="default">?&gt;<br></span><br>Very simple.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93105">  
  <a class="name">
  <strong class="user"><em>Sam Yong - hellclanner at live dot com</em></strong></a><div class="date" title="2009-08-23 05:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93105">
<div class="phpcode"><code><span class="html">
Take note that end() does not recursively set your multiple dimension arrays' pointer to the end.<br><br>Take a look at the following:<br><span class="default">&lt;?php<br><br></span><span class="comment">// create the array for testing<br></span><span class="default">$a </span><span class="keyword">= array();<br></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>while(</span><span class="default">$i</span><span class="keyword">++ &lt; </span><span class="default">3</span><span class="keyword">){<br></span><span class="default">$a</span><span class="keyword">[] = array(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">mt_rand</span><span class="keyword">())),</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="string">'lol'</span><span class="keyword">.</span><span class="default">mt_rand</span><span class="keyword">())));<br>}<br><br></span><span class="comment">// show the array tree<br></span><span class="keyword">echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="comment">// set the pointer of $a to the end<br></span><span class="default">end</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br><br></span><span class="comment">// get the current element of $a<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br></span><span class="comment">// get the current element of the current element of $a<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)));<br><br></span><span class="default">?&gt;<br></span><br>You will notice that you probably get something like this:<br><br>array(3) {<br>&nbsp; [0]=&gt;<br>&nbsp; array(2) {<br>&nbsp; &nbsp; [0]=&gt;<br>&nbsp; &nbsp; string(8) "764d8d20"<br>&nbsp; &nbsp; [1]=&gt;<br>&nbsp; &nbsp; string(8) "85ee186d"<br>&nbsp; }<br>&nbsp; [1]=&gt;<br>&nbsp; array(2) {<br>&nbsp; &nbsp; [0]=&gt;<br>&nbsp; &nbsp; string(8) "c8c72466"<br>&nbsp; &nbsp; [1]=&gt;<br>&nbsp; &nbsp; string(8) "a0fdccb2"<br>&nbsp; }<br>&nbsp; [2]=&gt;<br>&nbsp; array(2) {<br>&nbsp; &nbsp; [0]=&gt;<br>&nbsp; &nbsp; string(8) "3463a31b"<br>&nbsp; &nbsp; [1]=&gt;<br>&nbsp; &nbsp; string(8) "589f6b63"<br>&nbsp; }<br>}<br><br>array(2) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(8) "3463a31b"<br>&nbsp; [1]=&gt;<br>&nbsp; string(8) "589f6b63"<br>}<br><br>string(8) "3463a31b"<br><br>The array elements' pointer are still at the first one as current. So do take note.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24803">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-08-28 06:17"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom24803">
<div class="phpcode"><code><span class="html">
When adding an element to an array, it may be interesting to know with which key it was added. Just adding an element does not change the current position in the array, so calling key() won't return the correct key value; you must first position at end() of the array:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">array_add</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) {
<br></span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">; </span><span class="comment">// add an element
<br></span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// important!
<br></span><span class="keyword">return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98286">  
  <a class="name">
  <strong class="user"><em>laurence at crazypillstudios dot com</em></strong></a><div class="date" title="2010-06-07 02:12"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98286">
<div class="phpcode"><code><span class="html">
this is a function to move items in an array up or down in the array. it is done by breaking the array into two separate arrays and then have a loop creates the final array adding the item we want to move when the counter is equal to the new position we established the array key, position and direction were passed via a query string
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//parameters
<br>//$array- the array you are modifying
<br>//$keytomove - the key of the item you wish to move
<br>//$pos - the current position of the item: used a count($array) function 
<br>//and then loop with incrementing integer to add the position to the up //or down button
<br>//$dir - the direction you want to move it - "up"/"dn"
<br>
<br></span><span class="keyword">function </span><span class="default">change_pos</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$keytomove</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="comment">//count the original number of rows
<br>&nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">//set the integer we will use to place the moved item
<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$dir</span><span class="keyword">==</span><span class="string">"up"</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//if the item is already first and we try moving it up
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //we send it to the end of the array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$count</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//anywhere else it just moves back one closer to the start of the array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="comment">//do the same for the down button
<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$dir</span><span class="keyword">==</span><span class="string">"dn"</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">$count</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$change </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//copy the element that you wish to move
<br>&nbsp; &nbsp; </span><span class="default">$move </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keytomove</span><span class="keyword">];&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//delete the original from the main array
<br>&nbsp; &nbsp; </span><span class="keyword">unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keytomove</span><span class="keyword">]);&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//create an array of the names of the values we
<br>&nbsp; &nbsp; //are not moving
<br>&nbsp; &nbsp; </span><span class="default">$preint </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$c</span><span class="keyword">){&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$notmoved</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$preint</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$c</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$preint</span><span class="keyword">++;
<br>&nbsp; &nbsp; }&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//loop through all the elements
<br>&nbsp; &nbsp; </span><span class="default">$int </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; while(</span><span class="default">$int</span><span class="keyword">&lt;=</span><span class="default">$count</span><span class="keyword">){&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//dynamically change the key of the unmoved item as we increment the counter
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$notmovedkey </span><span class="keyword">= </span><span class="default">$notmoved</span><span class="keyword">[</span><span class="string">"</span><span class="default">$int</span><span class="string">"</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//when the counter is equal to the position we want
<br>&nbsp; &nbsp; &nbsp; &nbsp; //to place the moved entry we pump it into a new array
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$int</span><span class="keyword">==</span><span class="default">$change</span><span class="keyword">){ 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$neworder</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$keytomove</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$move</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//add all the other array items if the position number is not met and 
<br>&nbsp; &nbsp; &nbsp; &nbsp; //resume adding them once the moved item is written
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$contkey</span><span class="keyword">!=</span><span class="string">""</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$neworder</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$notmovedkey</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">] = </span><span class="default">$array</span><span class="keyword">[</span><span class="string">"</span><span class="keyword">{</span><span class="default">$notmovedkey</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="default">$int</span><span class="keyword">++;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return(</span><span class="default">$neworder</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This is not too elegant but it works.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111697">  
  <a class="name">
  <strong class="user"><em>Jason</em></strong></a><div class="date" title="2013-03-18 10:37"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111697">
<div class="phpcode"><code><span class="html">
$filename = 'somefile.jpg';<br><br>php v5.4 does not support the following statement.<br>echo end(explode(".", $filename)); // return jpg string<br><br>instead you have to split into 2 statements<br>$file = explode(".", $filename);<br>echo end ($file);</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.end.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:50 GMT -->


</body></html>