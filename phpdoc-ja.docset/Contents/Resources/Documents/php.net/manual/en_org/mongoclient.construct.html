<html><!-- Mirrored from php.net/manual/en/mongoclient.construct.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:03:42 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>MongoClient::__construct</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="mongoclient.construct.html">
 <link rel="shorturl" href="mongoclient.construct.html">
 <link rel="alternate" href="mongoclient.construct.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.mongoclient.html">
 <link rel="prev" href="mongoclient.connect.html">
 <link rel="next" href="mongoclient.dropdb.html">

 <link rel="alternate" href="mongoclient.construct.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/mongoclient.construct.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/mongoclient.construct.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/mongoclient.construct.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/mongoclient.construct.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/mongoclient.construct.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/mongoclient.construct.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/mongoclient.construct.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/mongoclient.construct.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/mongoclient.construct.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/mongoclient.construct.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="book.mongo.html">Mongo</a></li>      <li><a href="mongo.core.html">Core Classes</a></li>      <li><a href="class.mongoclient.html">MongoClient</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="mongoclient.construct" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoClient::__construct</h1>
  <p class="verinfo">(PECL mongo &gt;=1.3.0)</p><p class="refpurpose"><span class="refname">MongoClient::__construct</span> â€” <span class="dc-title">Creates a new database connection object</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongoclient.construct-description">
  <h3 class="title">Description</h3>
  <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>MongoClient::__construct</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$server</code><span class="initializer"> = "mongodb://localhost:27017"</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array("connect" =&gt; <strong><code>TRUE</code></strong>)</span></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$driver_options</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   If no parameters are passed, this connects to "localhost:27017" (or whatever
   was specified in php.ini for
   <a href="mongo.configuration.html#ini.mongo.default-host" class="link">mongo.default_host</a> and
   <a href="mongo.configuration.html#ini.mongo.default-port" class="link">mongo.default_port</a>).
  </p>
  <p class="para">
   <code class="parameter">server</code> should have the form:
   </p><div class="example-contents">
<div class="cdata"><pre>mongodb://[username:password@]host1[:port1][,host2[:port2:],...]/db
</pre></div>
   </div>

  <p></p>
  <p class="para">
   The connection string always starts with <em>mongodb://</em>, to
   indicate it is a connection string in this form.
  </p>
  <p class="para">If <em>username</em> and <em>password</em>
   are specified, the constructor will attempt to authenticate the connection
   with the database before returning.  Username and password are optional
   and must be followed by an <em>@</em>, if specified.
  </p>
  <p class="para">
   At least one host must be given (port optional, always defaulting to 27017)
   and as many hosts as desired may be connected to. Host names are
   comma-separated and the constructor will return successfully if it connected
   to at least one host. If it could not connect to any of the hosts, it will
   throw a <a href="class.mongoconnectionexception.html" class="classname">MongoConnectionException</a>. Please see the
   <a href="mongo.connecting.rs.html" class="link">Replica Sets</a> section for
   information on how to connect to Replica Sets.
  </p>
  <p class="para">
   If you specified a username and password, you may specify a database to
   authenticate with.  If <em>db</em> is not specified, "admin" will
   be used.
  </p>
  <p class="para">
   An optional query string may be used to specify extra options. The same
   options are supported through the <code class="parameter">options</code> array as
   well, and are therefore redescribed there. See the <a href="#" class="link">examples below</a> on
   how to set those options.
  </p>
  <p class="para">
   One part of the options governs how the driver reads from secondary nodes
   in a replica set environment. Extra information on how these read
   preferences work is available as well through the <a href="mongo.readpreferences.html" class="link">read preferences</a> documentation page.
  </p>
 </div>


 <div class="refsect1 parameters" id="mongo.mongoclient.construct.parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>

      <code class="parameter">server</code>
     </dt>

     <dd>

      <p class="para">
       The server name.
      </p>
     </dd>

    
    
     <dt>

      <code class="parameter">options</code>
     </dt>

     <dd>

      <p class="para">
       An array of options for the connection. Currently available options
       include:
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <em>"authMechanism"</em>
         </p>
         <p class="para">
          Available mechanisms are:
          </p><table class="doctable informaltable">
           
            <thead>
             <tr>
              <th>authMechanism</th>
              <th>Description</th>
              <th>Availability</th>
             </tr>

            </thead>

            <tbody class="tbody">
             <tr>
              <td>MONGODB-CR</td>
              <td>Authenticate using Challenge Response mechanism. This is the default value.</td>
              <td>All MongoDB versions</td>
             </tr>

             <tr>
              <td>X509</td>
              <td>Authenticates using X509 certificates</td>
              <td>MongoDB 2.6. Only available when <a href="book.openssl.html" class="xref">OpenSSL</a> is enabled</td>
             </tr>

             <tr>
              <td>PLAIN</td>
              <td>Authenticates using unencrypted plain username+password. Must be used over SSL connections. Generally used by MongoDB to login via 3rd party LDAP server</td>
              <td>MongoDB Enterprise 2.4. The Driver must be compiled against CyrusSASL2</td>
             </tr>

             <tr>
              <td>GSSAPI</td>
              <td>Authenticates via kerberos systems</td>
              <td>MongoDB Enterprise 2.4. The Driver must be compiled against CyrusSASL2</td>
             </tr>

            </tbody>
           
          </table>

         <p></p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"authSource"</em>
         </p>
         <p class="para">
          Should be set to the database name where the user is defined it.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"connect"</em>
         </p>
         <p class="para">
          If the constructor should connect before returning.  Default is
          <strong><code>TRUE</code></strong>. When set to <strong><code>FALSE</code></strong> the driver will
          <em class="emphasis">automatically</em> connect to the server whenever
          it is necessary to do a query. Alternatively, you can run
          <span class="function"><a href="mongoclient.connect.html" class="function">MongoClient::connect()</a></span> manually.
         </p>
         <div class="warning"><strong class="warning">Warning</strong>
          <p class="para">
           This option is not supported through the connection string.
          </p>
         </div>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"connectTimeoutMS"</em>
         </p>
         <p class="para">
          How long a connection can take to be opened before timing out in
          milliseconds. Defaults to <em>60000</em> (60 seconds).
         </p>
         <p class="para">
          If <em>-1</em> is specified, no connection timeout will be
          applied and PHP will use
          <a href="filesystem.configuration.html#ini.default-socket-timeout" class="link">default_socket_timeout</a>.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"db"</em>
         </p>
         <p class="para">
          The database to authenticate against can be specified here, instead of
          including it in the host list.  This overrides a database given in the
          host list.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"fsync"</em>
         </p>
         <p class="para">
          When <em>"fsync"</em> is set, all write operations will
          block until the database has flushed the changes to disk. This makes
          the write operations slower, but it guarantees that writes have
          succeeded and that the operations can be recovered in case of total
          system failure.
         </p>
         <p class="para">
          If the MongoDB server has journaling enabled, this option is identical
          to <em class="emphasis">"journal"</em>. If journaling is not enabled, this
          option ensures that write operations will be synced to database files
          on disk.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <span class="simpara">
           If journaling is enabled, users are strongly encouraged to use the
           <em>"journal"</em> option instead of
           <em>"fsync"</em>. Do not use <em>"fsync"</em> and
           <em>"journal"</em> simultaneously, as that will result in
           an error.
          </span>
         </p></blockquote>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"journal"</em>
         </p>
         <p class="para">
          When <em>"journal"</em> is set, all write operations will
          block until the database has flushed the changes to the journal on
          disk. This makes the write operations slower, but it guarantees that
          writes have succeeded and that the operations can be recovered in case
          of total system failure.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <span class="simpara">
           If this option is used and journaling is disabled, MongoDB 2.6+ will
           raise an error and the write will fail; older server versions will
           simply ignore the option.
          </span>
         </p></blockquote>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"gssapiServiceName"</em>
         </p>
         <p class="para">
          Sets the <a href="http://docs.mongodb.org/manual/core/kerberos/#kerberos-service-principal" class="link external">Â»&nbsp;Kerberos service principal</a>. Only applicable when authMechanism=GSSAPI. Defaults to "mongodb".
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"password"</em>
         </p>
         <p class="para">
          The password can be specified here, instead of including it in the
          host list.  This is especially useful if a password has a "@" in it.
          This overrides a password set in the host list.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"readPreference"</em>
         </p>
         <p class="para">
          Specifies the read preference type. Read preferences provide you
          with control from which secondaries data can be read from.
         </p>
         <p class="para">
          Allowed values are: <strong><code>MongoClient::RP_PRIMARY</code></strong>,
          <strong><code>MongoClient::RP_PRIMARY_PREFERRED</code></strong>,
          <strong><code>MongoClient::RP_SECONDARY</code></strong>,
          <strong><code>MongoClient::RP_SECONDARY_PREFERRED</code></strong> and
          <strong><code>MongoClient::RP_NEAREST</code></strong>.
         </p>
         <p class="para">
          See the documentation on <a href="mongo.readpreferences.html" class="link">read
          preferences</a> for more information.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"readPreferenceTags"</em>
         </p>
         <p class="para">
          Specifies the read preference tags as an array of strings. Tags can be
          used in combination with the <em>readPreference</em> option
          to further control which secondaries data might be read from.
         </p>
         <p class="para">
          See the documentation on <a href="mongo.readpreferences.html" class="link">read
          preferences</a> for more information.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"replicaSet"</em>
         </p>
         <p class="para">
          The name of the replica set to connect to.  If this is given, the
          primary will be automatically be determined. This means that the
          driver may end up connecting to a server that was not even listed.
          See the replica set example below for details.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"secondaryAcceptableLatencyMS"</em>
         </p>
         <p class="para">
          When reading from a secondary (using ReadPreferences), do not read from secondaries known to be more then
          <em>secondaryAcceptableLatencyMS</em> away from us. Defaults to <em>15</em>
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"socketTimeoutMS"</em>
         </p>
         <p class="para">
          How long a socket operation (read or write) can take before timing out
          in milliseconds. Defaults to <em>30000</em> (30 seconds).
         </p>
         <p class="para">
          If <em>-1</em> is specified, socket operations may block
          indefinitely. This option may also be set on a per-operation basis
          using <span class="methodname"><a href="mongocursor.timeout.html" class="methodname">MongoCursor::timeout()</a></span> for queries or the
          <em>"socketTimeoutMS"</em> option for write methods.
         </p>
         <blockquote class="note"><p><strong class="note">Note</strong>: 
          <span class="simpara">
           This is a client-side timeout. If a write operation times out, there
           is no way to know if the server actually handled the write or not, as
           a <a href="class.mongocursortimeoutexception.html" class="classname">MongoCursorTimeoutException</a> will be thrown
           in lieu of returning a write result.
          </span>
         </p></blockquote>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"ssl"</em>
         </p>
         <p class="para">
          A boolean to specify whether you want to enable SSL for the
          connections to MongoDB. Extra options such as certificates
          can be set with <a href="context.ssl.html" class="xref">SSL context options</a>.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"username"</em>
         </p>
         <p class="para">
          The username can be specified here, instead of including it in the
          host list.  This is especially useful if a username has a ":" in it.
          This overrides a username set in the host list.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"w"</em>
         </p>
         <p class="para">
          The <em>w</em> option specifies the
          <a href="mongo.writeconcerns.html" class="link">Write Concern</a> for the driver,
          which determines how long the driver blocks when writing. The
          default value is <em>1</em>.
         </p>
         <p class="para">
          This option is applicable when connecting to both single servers and
          replica sets. A positive value controls how <em class="emphasis">many</em>
          nodes must acknowledge the write instruction before the driver
          continues. A value of <em>1</em> would require the single
          server or primary (in a replica set) to acknowledge the write
          operation. A value of <em>3</em> would cause the driver to
          block until the write has been applied to the primary as well as two
          secondary servers (in a replica set).
         </p>
         <p class="para">
          A string value is used to control which tag sets are taken into
          account for write concerns. <em>"majority"</em> is special
          and ensures that the write operation has been applied to the majority
          (more than 50%) of the participating nodes.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"wTimeoutMS"</em>
         </p>
         <p class="para">
          This option specifies the time limit, in milliseconds, for
          <a href="mongo.writeconcerns.html" class="link">write concern</a>
          acknowledgement. It is only applicable for write operations where
          <em>"w"</em> is greater than <em>1</em>, as the
          timeout pertains to replication. If the write concern is not satisfied
          within the time limit, a <a href="class.mongocursorexception.html" class="classname">MongoCursorException</a>
          will be thrown. A value of <em>0</em> may be specified to
          block indefinitely. The default value is <em>10000</em>
          (ten seconds).
         </p>
        </li>
       </ul>
      <p></p>
      <p class="para">
       The following options are deprecated and should no longer be used:
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <em>"slaveOkay"</em>
         </p>
         <p class="para">
          Deprecated. Please use the <a href="mongo.readpreferences.html" class="link">read
          preference</a> options.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"timeout"</em>
         </p>
         <p class="para">
          Deprecated alias for <em>"connectTimeoutMS"</em>.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <em>"wTimeout"</em>
         </p>
         <p class="para">
          Deprecated alias for <em>"wTimeoutMS"</em>.
         </p>
        </li>
       </ul>
      <p></p>
     </dd>

    

    
     <dt>

      <code class="parameter">driver_options</code>
     </dt>

     <dd>

      <p class="para">
       An array of options for the MongoDB driver. Options include setting
       connection <a href="mongo.connecting.ssl.html#mongo.connecting.context.ssl" class="link">context options for SSL</a>
       or <a href="context.mongodb.html" class="link">logging callbacks</a>.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <em>"context"</em>
         </p>
         <p class="para">
          The Stream Context to attach to all new connections. This allows you 
          for example to configure SSL certificates and are described at
          <a href="context.ssl.html" class="link">SSL context options</a>. See the 
          <a href="mongo.connecting.ssl.html#mongo.connecting.context.ssl" class="link">Connecting over SSL</a> tutorial.
         </p>
        </li>
       </ul>
      <p></p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mongoclient.construct-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a new database connection object.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-mongoclient.construct-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   Throws <a href="class.mongoconnectionexception.html" class="classname">MongoConnectionException</a> if it tries and fails
   to connect to the database for all hostnames given.  It will also throw a
   <strong class="classname">MongoConnnectionException</strong> if an invalid username or
   password is given.  See <a href="class.mongoconnectionexception.html" class="classname">MongoConnectionException</a>
   documentation for common exceptions and their causes.
  </p>
 </div>


 <div class="refsect1 examples" id="mongo.mongoclient.construct.examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-1449">
   <p><strong>Example #1 <span class="function"><strong>MongoClient::__construct()</strong></span> replica set example</strong></p>
   <div class="example-contents"><p>
    This example shows how to connect the driver to a replica set. It assumes
    that there is a set of three servers: sf1.example.com, sf2.example.com, and
    ny1.example.com. The primary could be any one of these servers.
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;pass&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;server&nbsp;names&nbsp;to&nbsp;the&nbsp;constructor<br>//&nbsp;Note&nbsp;that&nbsp;we&nbsp;don't&nbsp;need&nbsp;to&nbsp;pass&nbsp;in&nbsp;all&nbsp;the&nbsp;members&nbsp;of&nbsp;the&nbsp;replicaset,&nbsp;the&nbsp;driver&nbsp;<br>//&nbsp;will&nbsp;derive&nbsp;the&nbsp;full&nbsp;list.<br></span><span style="color: #0000BB">$m1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://sf2.example.com,ny1.example.com"</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"replicaSet"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"myReplSet"</span><span style="color: #007700">));<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    If the current primary fails, the driver will figure out which secondary
    server became the new primary and automatically start using that connection.
    Automatic failover will not work correctly if <em>replicaSet</em>
    is not specified.
   </p></div>
   <div class="example-contents"><p>
    At least one seed in the seed list must be up for the driver to connect to
    the replica set.
   </p></div>
   <div class="example-contents"><p>
    If you include seeds from two separate replica sets, behavior is undefined.
   </p></div>
   <div class="example-contents"><p>See the
    <a href="http://docs.mongodb.org/manual/replication/" class="link external">Â»&nbsp;core documentation</a> on
    replica sets for more information.
   </p></div>
  </div>
  <div class="example" id="example-1450">
   <p><strong>Example #2 Connecting to a domain socket</strong></p>
   <div class="example-contents"><p>
    In version 1.0.9+, you can use a UNIX domain socket to connect to an
    instance of MongoDB running locally.  This should be slightly faster than
    using a network connection.
   </p></div>
   <div class="example-contents"><p>
    In version 1.5.0, the MongoDB server automatically opens a socket at
    /tmp/mongodb-&lt;port&gt;.sock.  You can connect to this by specifying the
    path in your connection string:
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;MongoDB&nbsp;server&nbsp;running&nbsp;locally&nbsp;on&nbsp;port&nbsp;20000<br></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb:///tmp/mongodb-20000.sock"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    You can combine this with any other connections you'd like:
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;try&nbsp;to&nbsp;connect&nbsp;to&nbsp;the&nbsp;domain&nbsp;socket,&nbsp;fall&nbsp;back&nbsp;to&nbsp;localhost&nbsp;connection<br></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb:///tmp/mongodb-27017.sock,localhost:27017"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-1451">
   <p><strong>Example #3 <span class="function"><strong>MongoClient::__construct()</strong></span> authentication example</strong></p>
   <div class="example-contents"><p>
    A user must exist in the admin database before attempting to use
    authentication.  You can create one with the Mongo shell by running:
   </p></div>
   <div class="example-contents">
<div class="shellcode"><pre class="shellcode">&gt; use admin
switched to db admin
&gt; db.addUser("testUser", "testPass");
{
        "_id" : ObjectId("4b21272fd9ab21611d19095c"),
        "user" : "testUser",
        "pwd" : "03b9b27e0abf1865e2f6fcbd9845dd59"
}
&gt;</pre>
</div>
   </div>

   <div class="example-contents"><p>
    After creating a user with, in this case, username "testUser" and password
    "testPass", you can create an authenticated connection:
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://testUser:testPass@localhost"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <div class="example" id="example-1452">
   <p><strong>Example #4 <span class="function"><strong>MongoClient::__construct()</strong></span> read preference example</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center<br></span><span style="color: #0000BB">$uri&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'?readPreference=nearest'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&amp;readPreferenceTags=dc:east'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'rs'</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    See the <a href="mongo.readpreferences.html" class="link">read preferences</a>
    section of this manual for further information.
   </p></div>
  </div>

  <div class="example" id="example-1453">
   <p><strong>Example #5 <span class="function"><strong>MongoClient::__construct()</strong></span> options example</strong></p>
   <div class="example-contents"><p>
    Options can be passed both through the query string in the connection
    string, or as an array passed as second argument to the constructor.
   </p></div>
   <div class="example-contents"><p>
    Here we set the journal option to true and readPreference to secondary
    preferred as default for all write operations:
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost/?journal=true&amp;readPreference=secondary"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    And now we do the same, but as an options array:
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$options&nbsp;</span><span style="color: #007700">=&nbsp;array(<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'journal'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'readPreference'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'secondary'</span><span style="color: #007700">,<br>);<br></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #DD0000">"mongodb://localhost/"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <div class="example" id="example-1454">
   <p><strong>Example #6 <span class="function"><strong>MongoClient::__construct()</strong></span> read preference example</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Prefer&nbsp;the&nbsp;nearest&nbsp;server&nbsp;in&nbsp;the&nbsp;"east"&nbsp;data&nbsp;center<br></span><span style="color: #0000BB">$uri&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mongodb://rs1.example.com,rs2.example.com/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'?readPreference=nearest'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$uri&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">'&amp;readPreferenceTags=dc:east'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">(</span><span style="color: #0000BB">$uri</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'replicaSet'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'rs'</span><span style="color: #007700">));<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>
    See the <a href="mongo.readpreferences.html" class="link">read preferences</a>
    section of this manual for further information.
   </p></div>
  </div>
 </div>


 <div class="refsect1 changelog" id="refsect1-mongoclient.construct-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>1.5.0</td>
       <td>
        <p class="para">
         Added <em>"authMechanism"</em>, <em>"gssapiServiceName"</em>, and <em>"secondaryAcceptableLatencyMS"</em>.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.4.0</td>
       <td>
        <p class="para">
         Added <em>"ssl"</em> option and support for
         <a href="mongo.connecting.ssl.html" class="link">connecting over SSL</a>.
        </p>
        <p class="para">
         Added <em>"wTimeoutMS"</em> option, which replaces
         <em>"wTimeout"</em>.
        </p>
        <p class="para">
         Emits <strong><code>E_DEPRECATED</code></strong> when
         <em>"slaveOkay"</em> or <em>"timeout"</em> is used.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.5.0</td>
       <td>
        <p class="para">
         Added <em>"authSource"</em>.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.3.4</td>
       <td>
        <p class="para">
         Added <em>"connectTimeoutMS"</em> and
         <em>"socketTimeoutMS"</em> options.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.3.0</td>
       <td>
        <p class="para">
         Added <em>"readPreference"</em>,
         <em>"readPreferenceTags"</em>, <em>"w"</em>, and
         <em>"wTimeout"</em> options.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.2.0</td>
       <td>
        <p class="para">
         Added <em>"username"</em> and <em>"password"</em>
         options.
        </p>
        <p class="para">
         Removed <em>"persist"</em> option, as all connections are
         now persistent. It can still be used, but it doesn't affect anything.
        </p>
        <dl>

         
          <dt>

           <code class="parameter">"persist"</code>
          </dt>

          <dd>

           <p class="para">
            If the connection should be persistent. If set, the connection will
            be persistent. The string representation of the value is used as an
            ID for the connection, so two instances of
            <a href="class.mongoclient.html" class="classname">MongoClient</a> that are initialized with
            <em>array("persist" =&gt; "foobar")</em> will share the same
            database connection, whereas an instance initialized with
            <em>array("persist" =&gt; "barbaz")</em> will use a different
            database connection.
           </p>
          </dd>

         
        </dl>

        <p class="para">
         The <em>"replicaSet"</em> option now takes a string, not a
         boolean.
        </p>
       </td>
      </tr>

      <tr>
       <td>1.0.9</td>
       <td>Added <em>"replicaSet"</em> option.</td>
      </tr>

      <tr>
       <td>1.0.2</td>
       <td>
        <p class="para">
         Changed constructor to take an array of options. Pre-1.0.2, the
         constructor took the following parameters:
        </p>
        <dl>

         
          <dt>

           <code class="parameter">server</code>
          </dt>

          <dd>

           <p class="para">
            The server name.
           </p>
          </dd>

         
         
          <dt>

           <code class="parameter">connect</code>
          </dt>

          <dd>

           <p class="para">
            Optional boolean parameter specifying if the constructor should
            connect to the database before returning.  Defaults to <strong><code>TRUE</code></strong>.
           </p>
          </dd>

         
         
          <dt>

           <code class="parameter">persistent</code>
          </dt>

          <dd>

           <p class="para">
            If the connection should be persistent.
           </p>
          </dd>

         
         
          <dt>

           <code class="parameter">paired</code>
          </dt>

          <dd>

           <p class="para">
            If the connection should be paired.
           </p>
          </dd>

         
        </dl>

       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="113430">  
  <a class="name">
  <strong class="user"><em>mike at eastghost dot com</em></strong></a><div class="date" title="2013-10-09 04:56"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113430">
<div class="phpcode"><code><span class="html">
HOLY MOLY, 100 to 200 times instant speed boost in one small change.<br><br>"In version 1.0.9+, you can use a UNIX domain socket to connect to an instance of MongoDB running locally. This should be slightly faster than using a network connection."<br><br>is an EXTREME understatement.&nbsp; Just trying out stuff, playing around, etc., we changed from<br><br>MongoClient( 'mongodb://pri.eastghost.com:27017' etc)<br><br>to<br><br>MongoClient ( 'mongodb:///tmp/mongodb-27017.sock' etc)<br><br>and saw instant 100x-200x speed boost, all else untouched.<br>page times went from 700 - 1400 (as in 1.4 seconds)<br>to 7 as in milliseconds.<br><br>mongo driver 1.4.1<br>(for apache 2.6)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111580">  
  <a class="name">
  <strong class="user"><em>mike at eastghost dot com</em></strong></a><div class="date" title="2013-03-06 04:44"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111580">
<div class="phpcode"><code><span class="html">
read somewhere that
<br>
<br>$uri&nbsp; = 'mongodb://rs1.example.com/?w=0';
<br>
<br>(the w=0 parm) makes the MongoDB driver accept 'blind writes' without waiting for any confirmation of write success from server.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/mongoclient.construct.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:03:42 GMT -->


</body></html>