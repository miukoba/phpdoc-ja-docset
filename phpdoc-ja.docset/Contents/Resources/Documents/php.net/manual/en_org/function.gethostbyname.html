<html><!-- Mirrored from php.net/manual/en/function.gethostbyname.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>gethostbyname</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.gethostbyname.html">
 <link rel="shorturl" href="http://php.net/gethostbyname">
 <link rel="alternate" href="http://php.net/gethostbyname" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.network.html">
 <link rel="prev" href="function.gethostbyaddr.html">
 <link rel="next" href="function.gethostbynamel.html">

 <link rel="alternate" href="function.gethostbyname.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.gethostbyname.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.gethostbyname.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.gethostbyname.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.gethostbyname.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.gethostbyname.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.gethostbyname.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.gethostbyname.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.gethostbyname.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.gethostbyname.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.gethostbyname.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.network.html">Network</a></li>      <li><a href="ref.network.html">Network Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.gethostbyname" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gethostbyname</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">gethostbyname</span> â€” <span class="dc-title">
   Get the IPv4 address corresponding to a given Internet host name
  </span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.gethostbyname-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>gethostbyname</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$hostname</code></span>
   )</div>

  <p class="para rdfs-comment">
   Returns the IPv4 address of the Internet host specified by
   <code class="parameter">hostname</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gethostbyname-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">hostname</code></dt>

     <dd>

      <p class="para">
       The host name.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gethostbyname-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the IPv4 address or a string containing the unmodified
   <code class="parameter">hostname</code> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gethostbyname-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4589">
    <p><strong>Example #1 A simple <span class="function"><strong>gethostbyname()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$ip&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gethostbyname</span><span style="color: #007700">(</span><span style="color: #DD0000">'www.example.com'</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #0000BB">$ip</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.gethostbyname-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.gethostbyaddr.html" class="function" rel="rdfs-seeAlso">gethostbyaddr()</a> - Get the Internet host name corresponding to a given IP address</span></li>
    <li class="member"><span class="function"><a href="function.gethostbynamel.html" class="function" rel="rdfs-seeAlso">gethostbynamel()</a> - Get a list of IPv4 addresses corresponding to a given Internet host
   name</span></li>
    <li class="member"><span class="function"><a href="function.inet-pton.html" class="function" rel="rdfs-seeAlso">inet_pton()</a> - Converts a human readable IP address to its packed in_addr representation</span></li>
    <li class="member"><span class="function"><a href="function.inet-ntop.html" class="function" rel="rdfs-seeAlso">inet_ntop()</a> - Converts a packed internet address to a human readable representation</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="111684">  
  <a class="name">
  <strong class="user"><em>Ome Ko</em></strong></a><div class="date" title="2013-03-16 08:34"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111684">
<div class="phpcode"><code><span class="html">
If you do a gethostbyname() and there is no trailing dot after a domainname that does not resolve, this domainname will ultimately be appended to the server-FQDN by nslookup.<br><br>So if you do a lookup for nonexistentdomainname.be your server may return the ip for nonexistentdomainname.be.yourhostname.com, which is the server-ip.<br><br>To avoid this behaviour, just add a trailing dot to the domainname; i.e. gethostbyname('nonexistentdomainname.be.')</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104944">  
  <a class="name">
  <strong class="user"><em>Alexandre (d)</em></strong></a><div class="date" title="2011-07-17 09:28"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104944">
<div class="phpcode"><code><span class="html">
Important note: You should avoid its use in production.<br><br>DNS Resolution may take from 0.5 to 4 seconds, and during this time your script is NOT being executed.<br><br>Your customers may think that the server is slow, but actually it is just waiting for the DNS resolution response.<br><br>You can use it, but if you want performance, you should avoid it, or schedule it to some CRON script...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70408">  
  <a class="name">
  <strong class="user"><em>chris at chollis dot net</em></strong></a><div class="date" title="2006-10-15 10:57"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70408">
<div class="phpcode"><code><span class="html">
mmucklo raises a valid point, however the function to use would be getmxrr() in the simplest case, or alternatively checkdnsrr() if you so wish; getdnsrr() does not exist.<br><br>On another note, it can be a pain (when iterating with while loops for example) that on failure gethostbyname() returns the hostname, rather than FALSE. You could wrap it in a simple user function, to "correct" this:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">fixed_gethostbyname </span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// Try the lookup as normal...<br>&nbsp; &nbsp; </span><span class="default">$ip </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// ...but if it fails, FALSE is returned instead of the unresolved host<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$ip </span><span class="keyword">!= </span><span class="default">$host</span><span class="keyword">) { return </span><span class="default">$ip</span><span class="keyword">; } else return </span><span class="default">false</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70936">  
  <a class="name">
  <strong class="user"><em>Josh Finlay josh at glamourcastle dot com</em></strong></a><div class="date" title="2006-11-04 06:55"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70936">
<div class="phpcode"><code><span class="html">
gethostbyname and gethostbynamel does not ask for AAAA records. I have written two functions to implement this. gethostbyname6 and gethostbynamel6. I don't believe this issue has been addressed yet.<br><br>They are made to replace gethostbyname[l], in a way that if $try_a is true, if it fails to get AAAA records it will fall back on trying to get A records.<br><br>Feel free to correct any errors, I realise that it is asking for *both* A and AAAA records, so this means two DNS calls.. probably would be more efficient if it checked $try_a before making the query, but this works for me so I'll leave that up to someone else to implement in their own work.. the tip is out there now anyway..<br><br>Here is the code:<br><br>&nbsp; &nbsp; function gethostbyname6($host, $try_a = false) {<br>&nbsp; &nbsp; &nbsp; &nbsp; // get AAAA record for $host<br>&nbsp; &nbsp; &nbsp; &nbsp; // if $try_a is true, if AAAA fails, it tries for A<br>&nbsp; &nbsp; &nbsp; &nbsp; // the first match found is returned<br>&nbsp; &nbsp; &nbsp; &nbsp; // otherwise returns false<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $dns = gethostbynamel6($host, $try_a);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($dns == false) { return false; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else { return $dns[0]; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function gethostbynamel6($host, $try_a = false) {<br>&nbsp; &nbsp; &nbsp; &nbsp; // get AAAA records for $host,<br>&nbsp; &nbsp; &nbsp; &nbsp; // if $try_a is true, if AAAA fails, it tries for A<br>&nbsp; &nbsp; &nbsp; &nbsp; // results are returned in an array of ips found matching type<br>&nbsp; &nbsp; &nbsp; &nbsp; // otherwise returns false<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $dns6 = dns_get_record($host, DNS_AAAA);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($try_a == true) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dns4 = dns_get_record($host, DNS_A);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dns = array_merge($dns4, $dns6);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else { $dns = $dns6; }<br>&nbsp; &nbsp; &nbsp; &nbsp; $ip6 = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; $ip4 = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach ($dns as $record) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($record["type"] == "A") {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ip4[] = $record["ip"];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($record["type"] == "AAAA") {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ip6[] = $record["ipv6"];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (count($ip6) &lt; 1) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($try_a == true) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (count($ip4) &lt; 1) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $ip4;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return false;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $ip6;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48493">  
  <a class="name">
  <strong class="user"><em>cox at idecnet dot com</em></strong></a><div class="date" title="2004-12-26 12:15"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48493">
<div class="phpcode"><code><span class="html">
For doing basic RBL (Real Time Blacklist) lookups with this function do:<br><br><span class="default">&lt;?php<br>$host </span><span class="keyword">= </span><span class="string">'64.53.200.156'</span><span class="keyword">;<br></span><span class="default">$rbl&nbsp; </span><span class="keyword">= </span><span class="string">'sbl-xbl.spamhaus.org'</span><span class="keyword">;<br></span><span class="comment">// valid query format is: 156.200.53.64.sbl-xbl.spamhaus.org<br></span><span class="default">$rev </span><span class="keyword">= </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$host</span><span class="keyword">));<br></span><span class="default">$lookup </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$rev</span><span class="keyword">) . </span><span class="string">'.' </span><span class="keyword">. </span><span class="default">$rbl</span><span class="keyword">;<br>if (</span><span class="default">$lookup </span><span class="keyword">!= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$lookup</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"ip: </span><span class="default">$host</span><span class="string"> is listed in </span><span class="default">$rbl</span><span class="string">\n"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"ip: </span><span class="default">$host</span><span class="string"> NOT listed in </span><span class="default">$rbl</span><span class="string">\n"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Tomas V.V.Cox</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22927">  
  <a class="name">
  <strong class="user"><em>tonyhana at sixzeros dot com</em></strong></a><div class="date" title="2002-07-04 07:43"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22927">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="comment">//script to time DNS propagation<br>//(Above script modified slightly to show micro time)<br>//seems pretty damn quick to me.. I'm getting .0055 sec worstcase badhost times.<br><br>//A known good dns name (my own)<br>&nbsp; &nbsp; </span><span class="default">$nametotest </span><span class="keyword">= </span><span class="string">"fuzzygroup.com"</span><span class="keyword">;<br>&nbsp; &nbsp; <br></span><span class="comment">//Call address test function <br>&nbsp; &nbsp; </span><span class="default">$time_start </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">testipaddress</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$time_end </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">$time_end </span><span class="keyword">- </span><span class="default">$time_start</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">"Good Host Search took </span><span class="default">$time</span><span class="string"> seconds&lt;br&gt;&lt;br&gt;"</span><span class="keyword">;<br><br></span><span class="comment">//A known bad name (trust me)<br>&nbsp; &nbsp; </span><span class="default">$nametotest </span><span class="keyword">= </span><span class="string">"providence.mascot.com"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$time_start </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">testipaddress</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$time_end </span><span class="keyword">= </span><span class="default">getmicrotime</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$time </span><span class="keyword">= </span><span class="default">$time_end </span><span class="keyword">- </span><span class="default">$time_start</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">"Bad Host Search took </span><span class="default">$time</span><span class="string"> seconds&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>function </span><span class="default">getmicrotime</span><span class="keyword">(){ <br>&nbsp; &nbsp; list(</span><span class="default">$usec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">microtime</span><span class="keyword">()); <br>&nbsp; &nbsp; return ((float)</span><span class="default">$usec </span><span class="keyword">+ (float)</span><span class="default">$sec</span><span class="keyword">); <br>&nbsp; &nbsp; } <br><br></span><span class="comment">//ip address checking function<br>//for real use should have a return value but example code<br></span><span class="keyword">function </span><span class="default">testipaddress </span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$ipaddress </span><span class="keyword">= </span><span class="default">$nametotest</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$ipaddress </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$ipaddress </span><span class="keyword">== </span><span class="default">$nametotest</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"No ip address for host&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"good hostname, </span><span class="default">$nametotest</span><span class="string"> ipaddress = </span><span class="default">$ipaddress</span><span class="string">&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">//Recommended fix for sql applications: <br>// store url to temporary table <br>// run second process periodically to <br>// check urls and update main table<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107346">  
  <a class="name">
  <strong class="user"><em>Emmett Brosnan</em></strong></a><div class="date" title="2012-02-01 11:09"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107346">
<div class="phpcode"><code><span class="html">
Grabbing IPs for multiple hosts:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getAddrByHost</span><span class="keyword">(</span><span class="default">$hosts</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$returnString </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; foreach (</span><span class="default">$hosts </span><span class="keyword">as </span><span class="default">$host</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$query </span><span class="keyword">= `</span><span class="string">nslookup -timeout=</span><span class="default">$timeout</span><span class="string"> -retry=1 </span><span class="default">$host</span><span class="keyword">`;<br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\nAddress: (.*)\n/'</span><span class="keyword">, </span><span class="default">$query</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$returnString </span><span class="keyword">.= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$returnString </span><span class="keyword">.= </span><span class="default">$host </span><span class="keyword">. </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; return </span><span class="default">$returnString</span><span class="keyword">;<br><br>}<br><br></span><span class="default">$hostArray</span><span class="keyword">[] = </span><span class="string">'www.domain1.com'</span><span class="keyword">;<br></span><span class="default">$hostArray</span><span class="keyword">[] = </span><span class="string">'www.domain2.com'</span><span class="keyword">;<br></span><span class="comment">//$hostArray[] = 'www.domain3.com';<br>//$hostArray[] = 'www.domain4.com';<br><br></span><span class="default">$returnString </span><span class="keyword">= </span><span class="default">getAddrByHost</span><span class="keyword">(</span><span class="default">$hostArray</span><span class="keyword">);<br>echo </span><span class="default">$returnString</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83417">  
  <a class="name">
  <strong class="user"><em>manalejandro at gmail dot com</em></strong></a><div class="date" title="2008-05-24 08:59"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83417">
<div class="phpcode"><code><span class="html">
This logic solution to problem checking dns reverse name resolution:<br><br><span class="default">&lt;?php<br>$ip </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">);<br>if(</span><span class="default">ip2long</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) == -</span><span class="default">1 </span><span class="keyword">|| (</span><span class="default">$ip </span><span class="keyword">== </span><span class="default">gethostbyaddr</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) &amp;&amp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/.*\.[a-zA-Z]{2,3}$/"</span><span class="keyword">,</span><span class="default">$host</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) ) {<br>&nbsp; &nbsp; echo </span><span class="string">'Error, incorrect host or ip'</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>else {<br>&nbsp; &nbsp; echo </span><span class="string">'Ok'</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68941">  
  <a class="name">
  <strong class="user"><em>mmucklo at yahoo dot com</em></strong></a><div class="date" title="2006-08-16 11:05"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68941">
<div class="phpcode"><code><span class="html">
One note about using gethostbyname() for checking email address domains:<br><br>If the name doesn't resolve, follow up with getdnsrr() and make sure they don't have an MX entry before returning an error.<br><br>It is possible for a domain name not to have an A record, but still have an MX entry.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68744">  
  <a class="name">
  <strong class="user"><em>Marc M</em></strong></a><div class="date" title="2006-08-08 08:33"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68744">
<div class="phpcode"><code><span class="html">
Just a heads up. I was using this function on my site to verify email host addresses. I thought all was good, until a potential client contacted me and said they couldn't sign up correctly. They have a valid email address and domain, but this function failed. <br><br>Good luck.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64070">  
  <a class="name">
  <strong class="user"><em>ralphbolton at mail2sexy dot com</em></strong></a><div class="date" title="2006-04-06 01:10"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64070">
<div class="phpcode"><code><span class="html">
On a side-note, PHP (5.0.4, but probably other versions too) can cache gethostbyname information.<br><br>In short, once PHP looks up an address, it may not actually perform another lookup as you may expect. In my particular case (I think) the problem was a change to resolv.conf didn't take effect inside PHP (although nslookup/ping etc worked fine). Stop/Starting Apache fixed it (although a simple 'restart' (kill -HUP) didn't).<br><br>In short, if you change resolv.conf, stop and restart Apache.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63141">  
  <a class="name">
  <strong class="user"><em>ivan[DOT]pirog[AT]gmail[DOT]com</em></strong></a><div class="date" title="2006-03-14 06:57"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63141">
<div class="phpcode"><code><span class="html">
Function returns boolean:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">isDomainResolves</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">)<br>{<br>&nbsp; &nbsp;&nbsp; return </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">) != </span><span class="default">$domain</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58017">  
  <a class="name">
  <strong class="user"><em>mcgrof at gmail dot com</em></strong></a><div class="date" title="2005-10-21 09:10"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58017">
<div class="phpcode"><code><span class="html">
Better yet:<br><span class="default">&lt;?php<br>$ip </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(`</span><span class="string">/usr/bin/dig </span><span class="default">$host</span><span class="string"> A +short</span><span class="keyword">`);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55932">  
  <a class="name">
  <strong class="user"><em>tabascopete78 at yahoo dot com</em></strong></a><div class="date" title="2005-08-18 12:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55932">
<div class="phpcode"><code><span class="html">
I was using file_get_contents on a set of URLs. Some of them URLs were invalid (the structure of it was ok but the DNS hosts couldn't resolve them) and I kept getting an annoying warning. I wanted to check the DNS somehow but existing check dns function in php doesn't have one for windows and the one a person supplied there does not work 100% of the time.<br><br>Instead use this function to try to resolve a host. This won't throw any warnings, you just need to check the output. You'll get the same warnings with fopen and fsockopen.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44092">  
  <a class="name">
  <strong class="user"><em>Vincent</em></strong></a><div class="date" title="2004-07-14 09:14"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44092">
<div class="phpcode"><code><span class="html">
Note that if you pass an IP address to gethostbyname() it will return that IP address.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41099">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2004-03-30 02:49"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41099">
<div class="phpcode"><code><span class="html">
The dns entries get cached, whether they exist or not.&nbsp; Expect really good response times after the first one.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30852">  
  <a class="name">
  <strong class="user"><em>christian at SPAM at IS at DEAD at MEAT at karg dot org</em></strong></a><div class="date" title="2003-04-01 04:12"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30852">
<div class="phpcode"><code><span class="html">
I had difficulty getting gethostbyname to work under OpenBSD 3.2 and Apache, until I discovered that the default Apache chroot caused the problem.<br><br>To get PHP's gethostbyname to work, you need resolv.conf (and possibly hosts) in /var/www/etc (assuming default install dirs).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79629">  
  <a class="name">
  <strong class="user"><em>geoff at spacevs dot com</em></strong></a><div class="date" title="2007-12-05 07:37"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79629">
<div class="phpcode"><code><span class="html">
I put this in a prepend script for all my websites to cut down the amount of abuse by automated scripts.<br><span class="default">&lt;?PHP<br>&nbsp; &nbsp; &nbsp; &nbsp; $blacklists </span><span class="keyword">= array(</span><span class="string">'web.sorbs.net'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parts&nbsp; </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ip&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">)) . </span><span class="string">'.'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$blacklists </span><span class="keyword">as </span><span class="default">$bl</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$check </span><span class="keyword">= </span><span class="default">$ip </span><span class="keyword">. </span><span class="default">$bl</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$check </span><span class="keyword">!= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$check</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">error_log</span><span class="keyword">(</span><span class="string">'PHP Security: [DNSBL] - ' </span><span class="keyword">. </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">] . </span><span class="string">' - ' </span><span class="keyword">. </span><span class="default">$bl</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">'Put a detailed error here so the client knows why they have been blocked'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77766">  
  <a class="name">
  <strong class="user"><em>Florian Holzhauer</em></strong></a><div class="date" title="2007-09-12 03:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77766">
<div class="phpcode"><code><span class="html">
If name resolution fails with apache2, mod_chroot and php5, add<br>LoadFile /lib/libnss_dns.so.2<br>to the mod_chroot config.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77668">  
  <a class="name">
  <strong class="user"><em>guwapo at thedoghouse dot bz</em></strong></a><div class="date" title="2007-09-07 08:25"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77668">
<div class="phpcode"><code><span class="html">
referring to ralphbolton at mail2sexy dot com comment:<br><br>(at least in 5.2.0 + djbdns-dnscache) gethostbyname does not really seem to cache entries. If somebody notices a speed-up after the second lookup of the same domain - that's most likely your dns-cache itself, not some php-internal dns-cache.<br><br>It does cache the entries in your /etc/resolv.conf (e.g. what dns to use) so I agree with him, that stopping and starting apache, will reload the resolv.conf.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76554">  
  <a class="name">
  <strong class="user"><em>von at student dot chalmers dot se</em></strong></a><div class="date" title="2007-07-20 03:50"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76554">
<div class="phpcode"><code><span class="html">
When using PHP and Apache in a chroot environment on RedHat Linux, I have found that I need to bind-mount /var/run/nscd to get this to work. Apparently, the socket in that directory is needed for all the DNS things.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69430">  
  <a class="name">
  <strong class="user"><em>Peter &lt;toomuchphp-phpman at yahoo dot com&gt;</em></strong></a><div class="date" title="2006-09-05 06:33"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69430">
<div class="phpcode"><code><span class="html">
One way to discover your IP address automatically:<br><br><span class="default">&lt;?php<br><br></span><span class="comment">// need to trim() because whitespace will confuse the name lookup<br></span><span class="default">$myIP </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">(`</span><span class="string">hostname</span><span class="keyword">`));<br>echo </span><span class="default">$myIP</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58015">  
  <a class="name">
  <strong class="user"><em>mcgrof at gmail dot com</em></strong></a><div class="date" title="2005-10-21 09:05"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58015">
<div class="phpcode"><code><span class="html">
In PHP4 you can use gethostbyname() but I have found this unreliable when doing lookups on entries that return A records on the private network. PHP5 has a much better routine -- dns_get_record(). If you are stuck with PHP4 or don't want to upgrade you can use dig:<br><br><span class="default">&lt;?php<br>$ip </span><span class="keyword">= `</span><span class="string">/usr/bin/dig </span><span class="default">$host</span><span class="string"> A +short</span><span class="keyword">`;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114249">  
  <a class="name">
  <strong class="user"><em>filippusnafuka at gmail dot com</em></strong></a><div class="date" title="2014-01-29 01:34"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom114249">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br>$mysql_hostname </span><span class="keyword">= </span><span class="string">"localhost"</span><span class="keyword">;<br></span><span class="default">$mysql_username</span><span class="keyword">=</span><span class="string">"root"</span><span class="keyword">;<br></span><span class="default">$mysql_password</span><span class="keyword">=</span><span class="string">"emma"</span><span class="keyword">; </span><span class="comment">// if it is exist in your database other wise it will be null($password="")<br></span><span class="default">$mysql_database</span><span class="keyword">=</span><span class="string">"try"</span><span class="keyword">;<br><br></span><span class="comment">//connects to database<br></span><span class="default">$db </span><span class="keyword">= </span><span class="default">mysql_connect</span><span class="keyword">(</span><span class="default">$mysql_hostname</span><span class="keyword">, </span><span class="default">$mysql_username</span><span class="keyword">, </span><span class="default">$mysql_password</span><span class="keyword">)<br>&nbsp; &nbsp;&nbsp; or die(</span><span class="string">"ther is an error in connecting with the database"</span><span class="keyword">);<br><br></span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="string">'try'</span><span class="keyword">) or die(</span><span class="string">"couldn't find database"</span><span class="keyword">);<br><br></span><span class="default">$username </span><span class="keyword">= @</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'username'</span><span class="keyword">];<br></span><span class="default">$password </span><span class="keyword">= @</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'password'</span><span class="keyword">];<br></span><span class="default">$submit&nbsp; &nbsp; &nbsp; </span><span class="keyword">= @</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'submit'</span><span class="keyword">];<br></span><span class="default">$encpassword </span><span class="keyword">= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$password</span><span class="keyword">);<br><br>if(</span><span class="default">$submit</span><span class="keyword">){<br>&nbsp; &nbsp; if(</span><span class="default">$username</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$password</span><span class="keyword">==</span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mysql_select_db</span><span class="keyword">(</span><span class="string">'try'</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$db </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="default">$mysql_hostname</span><span class="keyword">,</span><span class="default">$mysql_username</span><span class="keyword">,</span><span class="default">$mysql_password</span><span class="keyword">,</span><span class="default">$mysql_database</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//to show encrypted pass use encpassword<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"INSERT INTO table1 (id, username, password) values ('</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">username</span><span class="keyword">]</span><span class="string">','</span><span class="default">$_POST</span><span class="keyword">[</span><span class="default">password</span><span class="keyword">]</span><span class="string">')"</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">//&nbsp; &nbsp; &nbsp; &nbsp; echo ("Last inserted record has id %d\n", mysql_insert_id());<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: localhost\new.php"</span><span class="keyword">); </span><span class="comment">/* Redirect browser */<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /* Make sure that code below does not get executed when we redirect. */<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">exit;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br></span><span class="comment">//38<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}else{<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"Please enter password: "</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; }<br><br>&nbsp;&nbsp; }</span><span class="comment">//end of iF submit<br><br></span><span class="default">?&gt;<br></span>What is wrong with this code? .it does not want to post to the database</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19953">  
  <a class="name">
  <strong class="user"><em>sjohnson at fuzzygroup dot com</em></strong></a><div class="date" title="2002-03-16 10:27"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19953">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">//script to see if host exists on Internet<br><br>//following up on the above point about host name <br>//checking and SQL timeouts, run this test script<br>//and see how long it takes for 2nd call to <br>//hostname check to fail<br>//NOTE -- not PHP's fault -- nature of DNS <br><br>//A known good dns name (my own)<br>&nbsp; &nbsp; </span><span class="default">$nametotest </span><span class="keyword">= </span><span class="string">"fuzzygroup.com"</span><span class="keyword">;<br>&nbsp; &nbsp; <br></span><span class="comment">//Call address test function <br>&nbsp; &nbsp; </span><span class="default">testipaddress</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br><br></span><span class="comment">//A known bad name (trust me)<br>&nbsp; &nbsp; </span><span class="default">$nametotest </span><span class="keyword">= </span><span class="string">"providence.mascot.com"</span><span class="keyword">;<br></span><span class="comment">//Call address test function<br>&nbsp; &nbsp; </span><span class="default">testipaddress</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br>&nbsp; &nbsp; <br></span><span class="comment">//ip address checking function<br>//for real use should have a return value but example code<br></span><span class="keyword">function </span><span class="default">testipaddress </span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$ipaddress </span><span class="keyword">= </span><span class="default">$nametotest</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$ipaddress </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$nametotest</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$ipaddress </span><span class="keyword">== </span><span class="default">$nametotest</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"No ip address for host, so host "<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"not currently available in DNS and "<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"probably offline for some time&lt;BR&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"good hostname, ipaddress = </span><span class="default">$ipaddress</span><span class="string">&lt;BR&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">//Recommended fix for sql applications: <br>// store url to temporary table <br>// run second process periodically to <br>// check urls and update main table<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92870">  
  <a class="name">
  <strong class="user"><em>nirazuelos at gmail dot com</em></strong></a><div class="date" title="2009-08-12 08:52"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92870">
<div class="phpcode"><code><span class="html">
This is the best method I've come up with to resolve any host-name to ip-address, it's quick and reliable and has support for timeout! An invalid address, a unicode string for exmaple, returns after 4~ seconds, instead of 8~ with gethostbyname! It works only with unix though.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getAddrByHost</span><span class="keyword">(</span><span class="default">$host</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= `</span><span class="string">nslookup -timeout=</span><span class="default">$timeout</span><span class="string"> -retry=1 </span><span class="default">$host</span><span class="keyword">`;<br>&nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\nAddress: (.*)\n/'</span><span class="keyword">, </span><span class="default">$query</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br>&nbsp;&nbsp; return </span><span class="default">$host</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.gethostbyname.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:29 GMT -->


</body></html>