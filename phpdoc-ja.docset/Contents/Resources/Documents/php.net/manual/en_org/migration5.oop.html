<html><!-- Mirrored from php.net/manual/en/migration5.oop.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:54:58 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>New Object Model</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="migration5.oop.html">
 <link rel="shorturl" href="migration5.oop.html">
 <link rel="alternate" href="migration5.oop.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="migration5.html">
 <link rel="prev" href="migration5.databases.html">
 <link rel="next" href="migrating5.errorrep.html">

 <link rel="alternate" href="migration5.oop.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/migration5.oop.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/migration5.oop.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/migration5.oop.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/migration5.oop.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/migration5.oop.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/migration5.oop.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/migration5.oop.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/migration5.oop.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/migration5.oop.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/migration5.oop.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="appendices.html">Appendices</a></li>      <li><a href="migration5.html">Migrating from PHP 4 to PHP 5.0.x</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="migration5.oop" class="section">
   <h2 class="title">New Object Model</h2>
   <p class="para">
    In PHP 5 there is a new Object Model. PHP's handling of objects has been
    completely rewritten, allowing for better performance and more features.
    In previous versions of PHP, objects were handled like primitive types
    (for instance integers and strings). The drawback of this method was that
    semantically the whole object was copied when a variable was assigned, or
    passed as a parameter to a method. In the new approach, objects are
    referenced by handle, and not by value (one can think of a handle as an
    object's identifier).
   </p>
   <p class="para">
    Many PHP programmers aren't even aware of the copying quirks of the old
    object model and, therefore, the majority of PHP applications will work
    out of the box, or with very few modifications.
   </p>
   <p class="para">
    The new Object Model is documented at the <a href="language.oop5.html" class="link">Language Reference</a>.
   </p>
   <p class="para">
    In PHP 5, function with the name of a class is called as a constructor
    only if defined in the same class. In PHP 4, it is called also if defined
    in the parent class.
   </p>
   <p class="para">
    See also the <a href="ini.core.html#ini.zend.ze1-compatibility-mode" class="link">
    zend.ze1_compatibility_mode</a> directive for compatability with 
    PHP 4. 
   </p>
  </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="78336">  
  <a class="name">
  <strong class="user"><em>zzo38</em></strong></a><div class="date" title="2007-10-07 08:06"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78336">
<div class="phpcode"><code><span class="html">
You should be able to clone a object in compatibility of PHP4,PHP5 with:<br><span class="default">&lt;?php<br> $x</span><span class="keyword">=</span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75366">  
  <a class="name">
  <strong class="user"><em>bdas at premiergroup dot uk dot com</em></strong></a><div class="date" title="2007-05-25 07:49"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75366">
<div class="phpcode"><code><span class="html">
Since PHP5 upgraded PHP to an OOP language, they CHANGED the metaphor so that when you copy an object, you just get a pointer to it (as in C# and Java) and so therefore they needed to make a way to CLONE objects as well in case you need a REAL copy of the object.<br><br>Most cases, clone is not needed, simply because a real copy of an object is usually not mandatory.&nbsp; In special cases, object cloning can be used to save time in porting.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="66348">  
  <a class="name">
  <strong class="user"><em>quinn at strangecode dot com</em></strong></a><div class="date" title="2006-05-19 08:53"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom66348">
<div class="phpcode"><code><span class="html">
Here is another possible solution for migrating code to php 5 when using $this = 'something' reassignments. In my case, I had several classes&nbsp; with methods that were self-instantiating with static calls. I was able to simply use a different variable: I changed $this to $_this and it worked the same because I copied an instance of the original object by reference using an instantiation factory method:<br><br>class DB {<br>&nbsp; &nbsp; function &amp;getInstance()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; static $instance = null;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if ($instance === null) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instance = new DB();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $instance;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; ...<br><br>In every method needing access to this object I assigned it to a temporary variable by reference:<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function doSomething ()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $_this =&amp; DB::getInstance();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $_this-&gt;doSomethingElse();<br>&nbsp; &nbsp; &nbsp; &nbsp; $_this-&gt;param['id'] = 123;<br>&nbsp; &nbsp; }<br><br>Which allows method calls or saving data back to the original object.<br><br>I originally created classes like this so I didn't need to keep track of instantiations or global objects. I could just call DB::doSomething() and the object is created dynamically or referenced from an already existing object.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/migration5.oop.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:54:58 GMT -->


</body></html>