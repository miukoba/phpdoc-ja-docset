<html><!-- Mirrored from php.net/manual/en/function.gzencode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:19 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>gzencode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.gzencode.html">
 <link rel="shorturl" href="http://php.net/gzencode">
 <link rel="alternate" href="http://php.net/gzencode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.zlib.html">
 <link rel="prev" href="function.gzdeflate.html">
 <link rel="next" href="function.gzeof.html">

 <link rel="alternate" href="function.gzencode.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.gzencode.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.gzencode.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.gzencode.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.gzencode.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.gzencode.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.gzencode.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.gzencode.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.gzencode.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.gzencode.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.gzencode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.compression.html">Compression and Archive Extensions</a></li>      <li><a href="book.zlib.html">Zlib</a></li>      <li><a href="ref.zlib.html">Zlib Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.gzencode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">gzencode</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.4, PHP 5)</p><p class="refpurpose"><span class="refname">gzencode</span> — <span class="dc-title">Create a gzip compressed string</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.gzencode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>gzencode</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$level</code><span class="initializer"> = -1</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$encoding_mode</code><span class="initializer"> = FORCE_GZIP</span></span>
  ]] )</div>

  <p class="para rdfs-comment">   
   This function returns a compressed version of the input
   <code class="parameter">data</code> compatible with the output of the
   <strong class="command">gzip</strong> program.
  </p>
  <p class="para">
   For more information on the GZIP file format, see the document:
   <a href="http://www.faqs.org/rfcs/rfc1952" class="link external">»&nbsp;GZIP file format specification
   version 4.3</a> (RFC 1952).
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.gzencode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">data</code></dt>

     <dd>

      <p class="para">
       The data to encode.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">level</code></dt>

     <dd>

      <p class="para">
       The level of compression. Can be given as 0 for no compression up to 9
       for maximum compression. If not given, the default compression level will
       be the default compression level of the zlib library.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">encoding_mode</code></dt>

     <dd>

      <p class="para">
       The encoding mode. Can be <strong><code>FORCE_GZIP</code></strong> (the default)
       or <strong><code>FORCE_DEFLATE</code></strong>. 
      </p>
      <p class="para">
       Prior to PHP 5.4.0, using <strong><code>FORCE_DEFLATE</code></strong> results in
       a standard zlib deflated string (inclusive zlib headers) after a gzip
       file header but without the trailing crc32 checksum.
      </p>
      <p class="para">
       In PHP 5.4.0 and later, <strong><code>FORCE_DEFLATE</code></strong> generates
       RFC 1950 compliant output, consisting of a zlib header, the deflated
       data, and an Adler checksum.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.gzencode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The encoded string, or <strong><code>FALSE</code></strong> if an error occurred.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.gzencode-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.0</td>
       <td>
        <strong><code>FORCE_DEFLATE</code></strong> now generates RFC 1950 compliant
        output.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.gzencode-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   The resulting data contains the appropriate headers and data
   structure to make a standard .gz file, e.g.:
   </p><div class="example" id="example-851">
    <p><strong>Example #1 Creating a gzip file</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">implode</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">file</span><span style="color: #007700">(</span><span style="color: #DD0000">"bigfile.txt"</span><span style="color: #007700">));<br></span><span style="color: #0000BB">$gzdata&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">gzencode</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">9</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"bigfile.txt.gz"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"w"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fwrite</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gzdata</span><span style="color: #007700">);<br></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$fp</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.gzencode-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.gzdecode.html" class="function" rel="rdfs-seeAlso">gzdecode()</a> - Decodes a gzip compressed string</span></li>
    <li class="member"><span class="function"><a href="function.gzdeflate.html" class="function" rel="rdfs-seeAlso">gzdeflate()</a> - Deflate a string</span></li>
    <li class="member"><span class="function"><a href="function.gzinflate.html" class="function" rel="rdfs-seeAlso">gzinflate()</a> - Inflate a deflated string</span></li>
    <li class="member"><span class="function"><a href="function.gzuncompress.html" class="function" rel="rdfs-seeAlso">gzuncompress()</a> - Uncompress a compressed string</span></li>
    <li class="member"><span class="function"><a href="function.gzcompress.html" class="function" rel="rdfs-seeAlso">gzcompress()</a> - Compress a string</span></li>
    <li class="member">
     <a href="http://www.faqs.org/rfcs/rfc1950" class="link external">»&nbsp;
      ZLIB Compressed Data Format Specification (RFC 1950)
     </a>
    </li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="88435">  
  <a class="name">
  <strong class="user"><em>getmequick at dot com</em></strong></a><div class="date" title="2009-01-23 12:29"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88435">
<div class="phpcode"><code><span class="html">
NOTE:<br><br>doing like this and so on<br><br><span class="default">&lt;?php<br>&nbsp; file_put_contents</span><span class="keyword">(</span><span class="string">'output.gz'</span><span class="keyword">, </span><span class="default">gzencode</span><span class="keyword">( </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'input.file'</span><span class="keyword">),</span><span class="default">9</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>(complete file reading)<br><br>may cause memory overflow (Fatal error: Allowed memory size of ..), so it's better to read by parts/bytes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105498">  
  <a class="name">
  <strong class="user"><em>geompse at gmail dot com</em></strong></a><div class="date" title="2011-08-22 03:24"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105498">
<div class="phpcode"><code><span class="html">
Had some trouble finding the correct way to send a Content-Length header with HTTP compression.<br>The pitch is to use gzencode (not gzdeflaten not gzcompress).<br><br><span class="default">&lt;?php<br><br></span><span class="comment">// disable ZLIB ouput compression<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'zlib.output_compression'</span><span class="keyword">,</span><span class="string">'Off'</span><span class="keyword">);<br><br></span><span class="comment">// compress data<br></span><span class="default">$gzipoutput </span><span class="keyword">= </span><span class="default">gzencode</span><span class="keyword">(</span><span class="default">$output</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">);<br><br></span><span class="comment">// various headers, those with # are mandatory<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: application/x-download'</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Encoding: gzip'</span><span class="keyword">); </span><span class="comment">#<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Length: '</span><span class="keyword">.</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$gzipoutput</span><span class="keyword">)); </span><span class="comment">#<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Disposition: attachment; filename="myfile.name"'</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Cache-Control: no-cache, no-store, max-age=0, must-revalidate'</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">'Pragma: no-cache'</span><span class="keyword">);<br><br></span><span class="comment">// output data<br></span><span class="keyword">echo </span><span class="default">$gzipoutput</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104772">  
  <a class="name">
  <strong class="user"><em>Sam Dowling</em></strong></a><div class="date" title="2011-07-06 07:30"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104772">
<div class="phpcode"><code><span class="html">
this is a benchmark test of gzencode (.txt file)<br>----------------------------------------------<br>original file size = 3.29 MB (3,459,978 bytes)<br>compress lvl 1 = 1.09 MB (1,144,006 bytes)<br>compress lvl 2 = 1.06 MB (1,119,518 bytes)<br>compress lvl 3 = 1.03 MB (1,085,567 bytes)<br>compress lvl 4 = 953 KB (976,538 bytes)<br>compress lvl 5 = 909 KB (931,486 bytes)<br>compress lvl 6 = 910 KB (932,516 bytes)<br>compress lvl 7 = 910 KB (932,608 bytes)<br>compress lvl 8 = 910 KB (932,646 bytes)<br>compress lvl 9 = 910 KB (932,652 bytes)<br>----------------------------------------------</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82520">  
  <a class="name">
  <strong class="user"><em>gazj at nukemodified dot com</em></strong></a><div class="date" title="2008-04-14 05:47"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82520">
<div class="phpcode"><code><span class="html">
here is my clean up of supaplex %at% pcbkits %d0t% c0m<br>submission above.<br><br>function alt_gzdecode($gzdatadecode) {<br>&nbsp; // seed with microseconds since last "whole" second.<br>&nbsp; mt_srand((float)microtime()*1000000);<br>&nbsp; $eh="/tmp/php-" . md5(mt_rand(0,mt_getrandmax())) . ".gz";<br>&nbsp; if(file_exists($eh)){<br><br>&nbsp; $gzf=fopen($eh,"w");<br>&nbsp; fwrite($gzf,$gzdatadecode);<br>&nbsp; fclose($gzf);<br><br>&nbsp; $gzf = gzopen ($eh, "r");<br>&nbsp; $gzdatadecode=gzpassthru($gzf);<br>&nbsp; unlink($eh);<br><br>&nbsp; return $gzdatadecode;<br>&nbsp; }else{<br>&nbsp; return 'File '.$eh.' was not found.';<br>&nbsp; }<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19074">  
  <a class="name">
  <strong class="user"><em>henryk at ploetzli dot ch</em></strong></a><div class="date" title="2002-02-14 06:28"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19074">
<div class="phpcode"><code><span class="html">
Well, I was looking for a gzdecode too and didn't consider the temporary file example above to be very elegant. <br>However, as is noted in the very first comment: gzencode() only adds a&nbsp; 10 byte header. <br><br>I don't quite know what this header is supposed to be used for, but gzinflate() certainly doesn't like it, so I stripped it off:<br><br>function my_gzdecode($string) {<br>&nbsp; $string = substr($string, 10);<br>&nbsp; return gzinflate($string);<br> }<br><br>That's useful to read HTTP-Connections that were compressed by mod_gzip.<br>-- <br>Henryk Pl�tz<br>Gr��e aus Berlin</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20411">  
  <a class="name">
  <strong class="user"><em>tychay at alumni dot caltech dot edu</em></strong></a><div class="date" title="2002-04-03 02:53"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20411">
<div class="phpcode"><code><span class="html">
The 10 byte string in gzencode is the standard gzip header. The first two bytes (1f 8b) define the return as a gzip file, the third byte (08) means that the body is compressed using the "deflate" algorithm. The rest is padding (00)'s.<br><br>Technically, I believe one should check if the third byte is hex 08 and if so strip off the first ten bytes and last four bytes and run inflate on it. The last four bytes are file size and checksum bits.<br><br>In practice, you can get away with just stripping the first 10 bytes and running inflate on it.<br><br>Hope this helps,<br><br>terry</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15410">  
  <a class="name">
  <strong class="user"><em>&lt; supaplex %at% pcbkits %d0t% c0m &gt;</em></strong></a><div class="date" title="2001-09-08 11:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15410">
<div class="phpcode"><code><span class="html">
I was almost discouraged when I didn't find a gzdecode() function!&nbsp; However, fear not, for I'll contribute my work... :)
<br>function alt_gzdecode($str) {
<br>&nbsp; // seed with microseconds since last "whole" second.
<br>&nbsp; mt_srand((float)microtime()*1000000);
<br>&nbsp; $eh="/tmp/php-" . md5(mt_rand(0,mt_getrandmax())) . ".gz";
<br>
<br>
<br>&nbsp; $fd=fopen($eh,"w");
<br>&nbsp; fwrite($fd,$str);
<br>&nbsp; fclose($fd);
<br>
<br>&nbsp; $fd = gzopen ($eh, "r");
<br>&nbsp; $str=gzpassthru($fd);
<br>&nbsp; unlink($eh);
<br>
<br>&nbsp; return $str;
<br>}
<br>
<br>It's only ugly point is that it does not check to see if the file already exists.&nbsp; You may also have to adjust reference names like $str and $fd if they stomp on your code. (Sorry, but this is all you get atm! ;} )&nbsp; If your conserned about a race condition, cry for a internal gzdecode() function that actualy functions...
<br>I spent about 3 hours straight debugging this problem.&nbsp; I know the input data was valid, becuase I validated it with MD5() to compare to the md5's I had made of the input data before hand.&nbsp; I'm not sure whats up with gzuncompress or gzinflate, but this works in its place . . .
<br>
<br>Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68632">  
  <a class="name">
  <strong class="user"><em>cbrunon at free dot fr</em></strong></a><div class="date" title="2006-08-03 06:52"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68632">
<div class="phpcode"><code><span class="html">
Correct is:<br><span class="default">&lt;?php<br>&nbsp; file_put_contents</span><span class="keyword">(</span><span class="string">'output.gz'</span><span class="keyword">, </span><span class="default">gzencode</span><span class="keyword">( </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'input.file'</span><span class="keyword">),</span><span class="default">9</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82880">  
  <a class="name">
  <strong class="user"><em>katzlbtjunk at hotmail dot com</em></strong></a><div class="date" title="2008-04-30 01:58"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82880">
<div class="phpcode"><code><span class="html">
Aaron G. 07-Aug-2004 03:29 posted the excellent function gzdecode() (SEE BELOW)<br>BUGFIX: Change: if($flags &amp; 1) to ... if($flags &amp; 2)<br><br>Unfortunately the function gzencode() does NOT append a CRC! So the previous version worked with output of gzencode but not with output of the gzip program itself.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15411">  
  <a class="name">
  <strong class="user"><em>mm.. oops? - amendum (yes, tested hehe.)</em></strong></a><div class="date" title="2001-09-09 12:14"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15411">
<div class="phpcode"><code><span class="html">
function alt_gzdecode($str) {
<br>&nbsp; // seed with microseconds since last "whole" second
<br>&nbsp; mt_srand((float)microtime()*1000000);
<br>&nbsp; $eh="/tmp/php-" . md5(mt_rand(0,mt_getrandmax())) . ".gz";
<br>
<br>&nbsp; $fd=fopen($eh,"w");
<br>&nbsp; fwrite($fd,$str);
<br>&nbsp; fclose($fd);
<br>
<br>&nbsp; unset($str);
<br>
<br>&nbsp; $fd = gzopen ($eh, "r");
<br>&nbsp; while (1==1) {
<br>&nbsp; &nbsp; $s=gzread($fd,10240);
<br>&nbsp; &nbsp; if ("$s" == "") {
<br>&nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; $str=$str . $s;
<br>&nbsp; }
<br>&nbsp; unlink($eh);
<br>
<br>&nbsp; return $str;
<br>}</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.gzencode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:20 GMT -->


</body></html>