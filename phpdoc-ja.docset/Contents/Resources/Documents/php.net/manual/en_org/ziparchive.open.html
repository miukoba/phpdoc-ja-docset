<html><!-- Mirrored from php.net/manual/en/ziparchive.open.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:15:56 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>ZipArchive::open</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ziparchive.open.html">
 <link rel="shorturl" href="ziparchive.open.html">
 <link rel="alternate" href="ziparchive.open.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.ziparchive.html">
 <link rel="prev" href="ziparchive.locatename.html">
 <link rel="next" href="ziparchive.renameindex.html">

 <link rel="alternate" href="ziparchive.open.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/ziparchive.open.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/ziparchive.open.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/ziparchive.open.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/ziparchive.open.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/ziparchive.open.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/ziparchive.open.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/ziparchive.open.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/ziparchive.open.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/ziparchive.open.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/ziparchive.open.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.compression.html">Compression and Archive Extensions</a></li>      <li><a href="book.zip.html">Zip</a></li>      <li><a href="class.ziparchive.html">ZipArchive</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="ziparchive.open" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ZipArchive::open</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PECL zip &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">ZipArchive::open</span> â€” <span class="dc-title">Open a ZIP file archive</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-ziparchive.open-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>ZipArchive::open</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   Opens a new zip archive for reading, writing or modifying.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-ziparchive.open-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       The file name of the ZIP archive to open.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       The mode to use to open the archive.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::OVERWRITE</code></strong>
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::CREATE</code></strong>
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::EXCL</code></strong>
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::CHECKCONS</code></strong>
         </p>
        </li>
       </ul>
      <p></p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-ziparchive.open-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">Error codes</code></dt>

      <dd>

      <p class="para">
       Returns <strong><code>TRUE</code></strong> on success or the error code.
       </p><ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_EXISTS</code></strong>
         </p>
         <p class="para">
          File already exists.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_INCONS</code></strong>
         </p>
         <p class="para">
          Zip archive inconsistent.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_INVAL</code></strong>
         </p>
         <p class="para">
          Invalid argument.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_MEMORY</code></strong>
         </p>
         <p class="para">
          Malloc failure.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_NOENT</code></strong>
         </p>
         <p class="para">
          No such file.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_NOZIP</code></strong>
         </p>
         <p class="para">
          Not a zip archive.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_OPEN</code></strong>
         </p>
         <p class="para">
          Can't open file.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_READ</code></strong>
         </p>
         <p class="para">
          Read error.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code>ZipArchive::ER_SEEK</code></strong>
         </p>
         <p class="para">
          Seek error.
         </p>
        </li>
       </ul>
      <p></p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 examples" id="refsect1-ziparchive.open-examples">
  <h3 class="title">Examples</h3>
    <div class="example" id="example-837">
     <p><strong>Example #1 Open and extract</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$zip&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.zip'</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'ok'</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">extractTo</span><span style="color: #007700">(</span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'failed,&nbsp;code:'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$res</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    <div class="example" id="example-838">
     <p><strong>Example #2 Create an archive</strong></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$zip&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.zip'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">::</span><span style="color: #0000BB">CREATE</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFromString</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'file&nbsp;content&nbsp;goes&nbsp;here'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'data.txt'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'entryname.txt'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'ok'</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'failed'</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="87423">  
  <a class="name">
  <strong class="user"><em>jj at icglink dot com</em></strong></a><div class="date" title="2008-12-04 11:09"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87423">
<div class="phpcode"><code><span class="html">
if you are echoing out the output and confused about the number...maybe this will help.&nbsp; i'm not totally sure it is accurate though.<br><br>ZIPARCHIVE::ER_EXISTS - 10<br>ZIPARCHIVE::ER_INCONS - 21<br>ZIPARCHIVE::ER_INVAL - 18<br>ZIPARCHIVE::ER_MEMORY - 14<br>ZIPARCHIVE::ER_NOENT - 9<br>ZIPARCHIVE::ER_NOZIP - 19<br>ZIPARCHIVE::ER_OPEN - 11<br>ZIPARCHIVE::ER_READ - 5<br>ZIPARCHIVE::ER_SEEK - 4</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110651">  
  <a class="name">
  <strong class="user"><em>walter at clevertechie dot com</em></strong></a><div class="date" title="2012-11-17 08:53"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110651">
<div class="phpcode"><code><span class="html">
If you have archives that you want to overwrite just use:<br><br>ZIPARCHIVE::CREATE<br><br>It will overwrite existing archives and at the same time create new ones if they don't already exist.<br><br>ZIPARCHIVE::OVERWRITE won't work for both of these scenarios.<br><br>(PHP version 5.4.4)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88765">  
  <a class="name">
  <strong class="user"><em>eric at webdeveric dot com</em></strong></a><div class="date" title="2009-02-06 07:06"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88765">
<div class="phpcode"><code><span class="html">
With php 5.2.6, the following code created a new zip or replaced a existing zip.<br>Note that I am only using the ZIPARCHIVE::OVERWRITE flag.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$opened </span><span class="keyword">= </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">( </span><span class="default">$zipFileName</span><span class="keyword">, </span><span class="default">ZIPARCHIVE</span><span class="keyword">::</span><span class="default">OVERWRITE </span><span class="keyword">);<br>&nbsp; &nbsp; if( </span><span class="default">$opened </span><span class="keyword">!== </span><span class="default">true </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">"cannot open </span><span class="keyword">{</span><span class="default">$zipFileName</span><span class="keyword">}</span><span class="string"> for writing."</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">addFromString</span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$contents </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>Now, with php 5.2.8, it does not work and gives this warning:<br><br>Warning: ZipArchive::addFromString() [ziparchive.addfromstring]: Invalid or unitialized Zip object in [myfile] on line [myline]<br><br>To fix this, you must specify the flags as create or overwrite.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$opened </span><span class="keyword">= </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">( </span><span class="default">$zipFileName</span><span class="keyword">, </span><span class="default">ZIPARCHIVE</span><span class="keyword">::</span><span class="default">CREATE </span><span class="keyword">| </span><span class="default">ZIPARCHIVE</span><span class="keyword">::</span><span class="default">OVERWRITE </span><span class="keyword">);<br>&nbsp; &nbsp; if( </span><span class="default">$opened </span><span class="keyword">!== </span><span class="default">true </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">"cannot open </span><span class="keyword">{</span><span class="default">$zipFileName</span><span class="keyword">}</span><span class="string"> for writing."</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">addFromString</span><span class="keyword">( </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$contents </span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>When googling for the error message I found a lot of people that had it but couldn't figure out why they were getting it.<br>I hope this helps someone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76136">  
  <a class="name">
  <strong class="user"><em>rickky at gmail dot com</em></strong></a><div class="date" title="2007-07-02 05:07"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76136">
<div class="phpcode"><code><span class="html">
If the directory you are writing or saving into does not have the correct permissions set, you won't get any error messages and it will look like everything worked fine... except it won't have changed!<br><br>Instead make sure you collect the return value of ZipArchive::close(). If it is false... it didn't work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84646">  
  <a class="name">
  <strong class="user"><em>Jonathan Baltazar</em></strong></a><div class="date" title="2008-07-23 07:14"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84646">
<div class="phpcode"><code><span class="html">
The file name does not need to end in '.zip' if it is created using tempnam().&nbsp; You just need to overwrite the file instead of trying to read it:
<br>
<br><span class="default">&lt;?php
<br>$file </span><span class="keyword">= </span><span class="default">tempnam</span><span class="keyword">(</span><span class="string">"tmp"</span><span class="keyword">, </span><span class="string">"zip"</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br></span><span class="default">$zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">();
<br>
<br></span><span class="comment">// Zip will open and overwrite the file, rather than try to read it.
<br></span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">OVERWRITE</span><span class="keyword">);
<br>
<br></span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();
<br>
<br></span><span class="comment">// Stream the file to the client
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: application/zip"</span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">));
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: attachment; filename=\"a_zip_file.zip\""</span><span class="keyword">);
<br></span><span class="default">readfile</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br>
<br></span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114257">  
  <a class="name">
  <strong class="user"><em>Eric Langlois</em></strong></a><div class="date" title="2014-01-29 09:53"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom114257">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?PHP<br>&nbsp; &nbsp; &nbsp; &nbsp; $zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="string">'test.zip'</span><span class="keyword">, </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">CREATE</span><span class="keyword">);<br><br>&nbsp; &nbsp; if ( </span><span class="default">$res </span><span class="keyword">=== </span><span class="default">TRUE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//CODE GOES HERE<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; switch(</span><span class="default">$res</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_EXISTS</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"File already exists."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_INCONS</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Zip archive inconsistent."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_MEMORY</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Malloc failure."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_NOENT</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"No such file."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_NOZIP</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Not a zip archive."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_OPEN</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Can't open file."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_READ</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Read error."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">ZipArchive</span><span class="keyword">::</span><span class="default">ER_SEEK</span><span class="keyword">: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Seek error."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default: <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ErrMsg </span><span class="keyword">= </span><span class="string">"Unknow (Code </span><span class="default">$rOpen</span><span class="string">)"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; die( </span><span class="string">'ZipArchive Error: ' </span><span class="keyword">. </span><span class="default">$ErrMsg</span><span class="keyword">);<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94226">  
  <a class="name">
  <strong class="user"><em>sebwoolford at gmail dot com</em></strong></a><div class="date" title="2009-10-23 03:29"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94226">
<div class="phpcode"><code><span class="html">
Further to what rickky at gmail dot com was saying, I've had that problem while trying to cache zip files and found that I had to set the permissions of the containing folder to 777 to get it to work.<br><br>Because this is a potential security weakness if on a public viewable folder, I'd recommend moving the folder so that it is no longer within public_html. You can then use readfile() to output the archive to the browser, with some HTTP headers to tell the browser it is a zip file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92559">  
  <a class="name">
  <strong class="user"><em>michael202 at gmx dot de</em></strong></a><div class="date" title="2009-07-29 06:33"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92559">
<div class="phpcode"><code><span class="html">
to anyone getting an error ZIPARCHIVE::ER_READ = 5, when<br>doing $zip-&gt;open($zipfile) with a ZIP file containing a total of more then (around) 800 files (even when they are in sub-directories).<br><br>possibly related bugs 40873, 8714:<br><br>1. it was not an OS limit, because it worked when called from windows via samba on the same file at the same place<br><br>2. it wasn't working under 32bit linux<br><br>with php 5.3.0 the issue seems to be resolved.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84848">  
  <a class="name">
  <strong class="user"><em>azsymvelik at gmail dot com</em></strong></a><div class="date" title="2008-08-01 01:25"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84848">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br>
<br></span><span class="comment">/*
<br>Hi!
<br>
<br>I made a little script about checking content and "secure repacking"
<br>*/
<br>
<br></span><span class="default">$somefile </span><span class="keyword">= </span><span class="string">"zip.zip"</span><span class="keyword">;
<br></span><span class="default">$someurl </span><span class="keyword">= </span><span class="string">"/some/url"
<br></span><span class="default">$zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">;
<br></span><span class="default">$open </span><span class="keyword">= </span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$somefile</span><span class="keyword">, </span><span class="default">ZIPARCHIVE</span><span class="keyword">::</span><span class="default">CHECKCONS</span><span class="keyword">);
<br></span><span class="comment">// If the archive is broken(or just another file renamed to *.zip) the function will return error on httpd under windows, so it's good to check if the archive is ok with ZIPARCHIVE::CHECKCONS
<br></span><span class="keyword">if (</span><span class="default">$open </span><span class="keyword">=== </span><span class="default">TRUE</span><span class="keyword">) {
<br>if(!</span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">extractTo</span><span class="keyword">(</span><span class="default">$someurl</span><span class="keyword">)) {
<br>die (</span><span class="string">"Error during extracting"</span><span class="keyword">);
<br>}
<br></span><span class="default">$zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();
<br>}
<br></span><span class="default">$new_archive_name </span><span class="keyword">= </span><span class="string">"new.zip"</span><span class="keyword">;
<br></span><span class="default">$new_zip </span><span class="keyword">= new </span><span class="default">ZipArchive</span><span class="keyword">;
<br></span><span class="default">$new_open </span><span class="keyword">= </span><span class="default">$new_zip</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$new_archive_name</span><span class="keyword">, </span><span class="default">ZIPARCHIVE</span><span class="keyword">::</span><span class="default">CREATE</span><span class="keyword">);
<br>if (</span><span class="default">$new_open </span><span class="keyword">=== </span><span class="default">TRUE</span><span class="keyword">) {
<br></span><span class="default">$dir </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$someurl</span><span class="keyword">);
<br>while (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {
<br> if (</span><span class="default">$file </span><span class="keyword">== </span><span class="string">"." </span><span class="keyword">|| </span><span class="default">$file </span><span class="keyword">== </span><span class="string">".."</span><span class="keyword">) { } else {
<br> </span><span class="comment">//We do not wanna this files in the new zip archive
<br>&nbsp; </span><span class="keyword">if (!</span><span class="default">$new_zip</span><span class="keyword">-&gt;</span><span class="default">addFile</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) {
<br>&nbsp; &nbsp;&nbsp; print </span><span class="default">$file</span><span class="keyword">.</span><span class="string">"was not added!&lt;br /&gt;"</span><span class="keyword">;
<br>&nbsp;&nbsp; }
<br>&nbsp; }
<br> }
<br>}
<br></span><span class="default">$new_zip</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102965">  
  <a class="name">
  <strong class="user"><em>sunil dt bhave at gmail dt com</em></strong></a><div class="date" title="2011-03-16 10:44"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102965">
<div class="phpcode"><code><span class="html">
Even though the api specifies that the flags are optional I found that I had to specify the flag ZIPARCHIVE::CREATE for an archive to be opened. <br>This is on a Windows 7 system with PHP 5.3.0</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102849">  
  <a class="name">
  <strong class="user"><em>Jan Vavra</em></strong></a><div class="date" title="2011-03-10 12:04"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102849">
<div class="phpcode"><code><span class="html">
As discussed in <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=54128</a> on Windows Server systems (2003, 2008) and IIS there is a problem when you want to unzip file stored in C:\Windows\Temp folder.<br>User of worker process IUSR_XXX has no directory listing right for C:\Windows\Temp and this is a reason why ZipArchive::open() fails with error 11 (error open). So it is not a good idea to store file for unzipping in folder defined by sys_get_temp_dir().</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105590">  
  <a class="name">
  <strong class="user"><em>YiiWanAB at hotmail dot com</em></strong></a><div class="date" title="2011-08-30 10:06"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105590">
<div class="phpcode"><code><span class="html">
Most of the time people iterate over a directory with 'opendir' or 'readdir' to add files to a zip. Like...<br><br>while ($file = readdir($dir)) { ... $zip-&gt;addFile($file) }<br><br>Note that $zip-&gt;addFile($file) will only work in the current directory if your at the root. You will need to add the correct path to that $file string variable to have the full file name like ...<br><br>$zip-&gt;addFile($dir . DIRECTORY_SEPARATOR . $file); will work.<br><br>This may identify why you may get a read error when closing the file. <br><br>Enjoy.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83235">  
  <a class="name">
  <strong class="user"><em>olivier pons</em></strong></a><div class="date" title="2008-05-16 12:26"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83235">
<div class="phpcode"><code><span class="html">
If you try this to open a file with creation in mind (= empty zip to fill with other files), this may not work :<br><br>$res = $zip-&gt;open($zip_file, ZipArchive::CREATE);<br><br>// you may get false<br><br>Try this instead, it should work :<br><br>$res = $zip-&gt;open($zip_file, ZIPARCHIVE::OVERWRITE);</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/ziparchive.open.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:15:57 GMT -->


</body></html>