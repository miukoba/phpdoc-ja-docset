<html><!-- Mirrored from php.net/manual/en/function.base64-decode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:05 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>base64_decode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.base64-decode.html">
 <link rel="shorturl" href="http://php.net/base64-decode">
 <link rel="alternate" href="http://php.net/base64-decode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.url.html">
 <link rel="prev" href="ref.url.html">
 <link rel="next" href="function.base64-encode.html">

 <link rel="alternate" href="function.base64-decode.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.base64-decode.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.base64-decode.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.base64-decode.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.base64-decode.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.base64-decode.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.base64-decode.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.base64-decode.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.base64-decode.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.base64-decode.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.base64-decode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.other.html">Other Basic Extensions</a></li>      <li><a href="book.url.html">URLs</a></li>      <li><a href="ref.url.html">URL Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.base64-decode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">base64_decode</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">base64_decode</span> â€” <span class="dc-title">Decodes data encoded with MIME base64</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.base64-decode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>base64_decode</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$data</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$strict</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Decodes a base64 encoded <code class="parameter">data</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.base64-decode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">data</code></dt>

     <dd>

      <p class="para">
       The encoded data.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">strict</code></dt>

     <dd>

      <p class="para">
       Returns <strong><code>FALSE</code></strong> if input contains character from outside the base64
       alphabet.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.base64-decode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the original data or <strong><code>FALSE</code></strong> on failure. The returned data may be
   binary.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.base64-decode-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.2.0</td>
       <td><code class="parameter">strict</code> added</td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.base64-decode-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4204">
    <p><strong>Example #1 <span class="function"><strong>base64_decode()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'VGhpcyBpcyBhbiBlbmNvZGVkIHN0cmluZw=='</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">base64_decode</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>This is an encoded string
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.base64-decode-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.base64-encode.html" class="function" rel="rdfs-seeAlso">base64_encode()</a> - Encodes data with MIME base64</span></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc2045" class="link external">Â»&nbsp;RFC 2045</a> section 6.8</li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="69747">  
  <a class="name">
  <strong class="user"><em>Starson</em></strong></a><div class="date" title="2006-09-19 06:23"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69747">
<div class="phpcode"><code><span class="html">
To expand on Jes' post:<br><br>The change took place between 5.0.5 and 5.1.0.&nbsp; Exactly where I don't know or care.<br><br>In short php &lt;= 5.0.5's base64_decode( $string ) will assume that a space is meant to be a + sign where php &gt;= 5.1.0's base64_decode( $string ) will no longer make that assumption.&nbsp; I did not see this noted in the change log.<br><br>Please note that, as of this writing, mb_convert_encoding( $string, "UTF-8", "BASE64" ) still behaves as base64_decode( $string ) did in php &lt;= 5.0.5 regardless of the version of php you are running.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104193">  
  <a class="name">
  <strong class="user"><em>mekal</em></strong></a><div class="date" title="2011-05-31 05:57"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104193">
<div class="phpcode"><code><span class="html">
If you want to save data that is derived from a Javascript canvas.toDataURL() function, you have to convert blanks into plusses. If you do not do that, the decoded data is corrupted:<br><br><span class="default">&lt;?php<br>&nbsp; $encodedData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="string">'+'</span><span class="keyword">,</span><span class="default">$encodedData</span><span class="keyword">);<br>&nbsp; </span><span class="default">$decocedData </span><span class="keyword">= </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$encodedData</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>merci..........</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90199">  
  <a class="name">
  <strong class="user"><em>mcalwell</em></strong></a><div class="date" title="2009-04-09 09:20"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90199">
<div class="phpcode"><code><span class="html">
I had a problem testing whether an imap message body was base64 encoded on a pre 5.2.* server.&nbsp; I had been using this function on a post 5.2 server.<br><br>I found that the function imap_base64() returns FALSE on failing to decode a string, and that I could use that to check instead.<br><br><span class="default">&lt;?php<br></span><span class="keyword">if(</span><span class="default">imap_base64</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">)) </span><span class="default">$body </span><span class="keyword">= </span><span class="default">imap_base64</span><span class="keyword">(</span><span class="default">$body</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31316">  
  <a class="name">
  <strong class="user"><em>Klaus Fehrenbacher</em></strong></a><div class="date" title="2003-04-17 04:05"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31316">
<div class="phpcode"><code><span class="html">
this script can correct the bug
<br>
<br><span class="default">&lt;?php
<br>$enc </span><span class="keyword">= </span><span class="default">chunk_split</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'!\015\012|\015|\012!'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$enc</span><span class="keyword">));
<br></span><span class="default">$enc </span><span class="keyword">= </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$enc</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102113">  
  <a class="name">
  <strong class="user"><em>winkelnkemper at googlemail dot com</em></strong></a><div class="date" title="2011-01-27 04:25"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102113">
<div class="phpcode"><code><span class="html">
If you want to save data that is derived from a Javascript canvas.toDataURL() function, you have to convert blanks into plusses. If you do not do that, the decoded data is corrupted:<br><br><span class="default">&lt;?php<br>&nbsp; $encodedData </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="string">'+'</span><span class="keyword">,</span><span class="default">$encodedData</span><span class="keyword">);<br>&nbsp; </span><span class="default">$decocedData </span><span class="keyword">= </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$encodedData</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69298">  
  <a class="name">
  <strong class="user"><em>Jes</em></strong></a><div class="date" title="2006-08-30 08:31"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69298">
<div class="phpcode"><code><span class="html">
I've come across an interesting issue with an external program that submits a gzcompressed base64_encoded string to PHP via POST. The external program encodes the string using the occasional " " (space) character, however if I encode the same original string within PHP (using base64_encode), it uses a "+" (plus) character wherever the external program would use a space. On my deployed machine, running PHP 4.3.9, base64_decode is fine with the " " (space) characters, but my test server running 5.1.4 is not. It took me a while to figure out that was the issue, but I ended up fixing it with a simple:<br><br><span class="default">&lt;?php<br><br>$post_data </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="string">"+"</span><span class="keyword">,</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'string'</span><span class="keyword">])<br><br></span><span class="default">?&gt;<br></span><br>This fix works on both the 4.3.9 and 5.1.4 machines. I am sure that the external program is probably not conforming to the standard, and it isn't a PHP problem per-se; but incase anybody else ever runs into that.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87442">  
  <a class="name">
  <strong class="user"><em>alvaro at demogracia dot com</em></strong></a><div class="date" title="2008-12-05 01:11"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87442">
<div class="phpcode"><code><span class="html">
You can do partial decoding (e.g. from buffered input streams) if you choose a chunk length that is multiple of 4:<br><br><span class="default">&lt;?php<br><br>$encoded </span><span class="keyword">= </span><span class="default">base64_encode</span><span class="keyword">(</span><span class="string">'The quick brown fox jumps over the lazy dog'</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">4</span><span class="keyword">){<br>&nbsp; &nbsp; echo </span><span class="default">base64_decode</span><span class="keyword">( </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">) );<br>}<br><br></span><span class="default">?&gt;<br></span><br>4 encoded chars represent 3 original chars. The "=" character is used as padding.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81425">  
  <a class="name">
  <strong class="user"><em>debug</em></strong></a><div class="date" title="2008-02-27 12:39"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81425">
<div class="phpcode"><code><span class="html">
@morgangalpin att gmail dotty com<br><br>A better implementation would be the following regular expression:<br><br>^[a-zA-Z0-9/+]*={0,2}$<br><br>Which will also detect the usage of = or == at the end of the string (and only end).<br><br>If this regex isn't following proper RFC guidelines, please comment on it.<br><br>A function geared specifically toward this:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">is_base64_encoded</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[a-zA-Z0-9/+]*={0,2}$%'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; };<br><br></span><span class="default">is_base64_encoded</span><span class="keyword">(</span><span class="string">"iash21iawhdj98UH3"</span><span class="keyword">); </span><span class="comment">// true<br></span><span class="default">is_base64_encoded</span><span class="keyword">(</span><span class="string">"#iu3498r"</span><span class="keyword">); </span><span class="comment">// false<br></span><span class="default">is_base64_encoded</span><span class="keyword">(</span><span class="string">"asiudfh9w=8uihf"</span><span class="keyword">); </span><span class="comment">// false<br></span><span class="default">is_base64_encoded</span><span class="keyword">(</span><span class="string">"a398UIhnj43f/1!+sadfh3w84hduihhjw=="</span><span class="keyword">); </span><span class="comment">// true<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71583">  
  <a class="name">
  <strong class="user"><em>Tom</em></strong></a><div class="date" title="2006-12-06 10:23"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71583">
<div class="phpcode"><code><span class="html">
This function supports "base64url" as described in Section 5 of RFC 4648, "Base 64 Encoding with URL and Filename Safe Alphabet"<br><br>&nbsp; &nbsp; <span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">base64url_decode</span><span class="keyword">(</span><span class="default">$base64url</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$base64 </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$base64url</span><span class="keyword">, </span><span class="string">'-_'</span><span class="keyword">, </span><span class="string">'+/'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$plainText </span><span class="keyword">= </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$base64</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$plainText</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105512">  
  <a class="name">
  <strong class="user"><em>nicolem2005 at gmail dot com</em></strong></a><div class="date" title="2011-08-23 05:17"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105512">
<div class="phpcode"><code><span class="html">
base64_decode seems to fail when decoding big files/strings. I had an issue decoding a 7MB image file. Here is a solution that worked for me:<br><br>$decodedstring=base64_decode(chunk_split($encodedstring));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92980">  
  <a class="name">
  <strong class="user"><em>martinstaemmler at gmx dot net</em></strong></a><div class="date" title="2009-08-17 09:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92980">
<div class="phpcode"><code><span class="html">
I had some trouble trying to let base64_decode decode base64-strings longer than ~5k chars.
<br>
<br>The base64-decoding function is a homomorphism between modulo 4 and modulo 3-length segmented strings. That motivates a divide and conquer approach: Split the encoded string into substrings counting modulo 4 chars, then decode each substring and concatenate all of them.
<br>
<br>Then instead of 
<br>
<br><span class="default">&lt;?php $decoded </span><span class="keyword">= </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>for big $encoded strings, it's saver to use
<br>
<br><span class="default">&lt;?php
<br>$decoded </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">)/</span><span class="default">256</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)
<br>&nbsp;&nbsp; </span><span class="default">$decoded </span><span class="keyword">= </span><span class="default">$decoded </span><span class="keyword">. </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$encoded</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">*</span><span class="default">256</span><span class="keyword">,</span><span class="default">256</span><span class="keyword">));
<br></span><span class="default">?&gt;
<br></span>
<br>where 256 can be replaced by a sufficiently small modulo 4 natural.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84349">  
  <a class="name">
  <strong class="user"><em>twm at twmacinta dot com</em></strong></a><div class="date" title="2008-07-09 08:38"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84349">
<div class="phpcode"><code><span class="html">
To follow up on Starson's post, PHP was changed to no longer treat a space as if it were a plus sign in CVS revision 1.43.2.1, which corresponds to PHP 5.1.0.&nbsp; You can see what happened with a diff to branch point 1.43 at:<br><br><a rel="nofollow" target="_blank">http://cvs.php.net/viewvc.cgi/php-src/ext/standard/base64.c</a><br><br>The CVS log indicates that this change was made to fix bug #34214 (base64_decode() does not properly ignore whitespace).<br><br>It would seem from the comment preceding the code which was removed that the treatment of the space as if it were the plus sign was actually intentional at one time:<br><br>&nbsp; &nbsp; When Base64 gets POSTed, all pluses are interpreted as spaces.<br>&nbsp; &nbsp; This line changes them back.&nbsp; It's not exactly the Base64 spec,<br>&nbsp; &nbsp; but it is completely compatible with it (the spec says that spaces<br>&nbsp; &nbsp; are invalid).&nbsp; This will also save many people considerable<br>&nbsp; &nbsp; headache.<br><br>&nbsp; &nbsp; if (ch == ' ') ch = '+';<br><br>However, RFC 3548 states that characters not in the Base64 alphabet should either be ignored or cause the implementation to reject the encoding and RFC 2045 says they should be ignored.&nbsp; So the original code was unfortunately not fully compatible with the spec or other implementations.&nbsp; It may have also masked problems with code not properly escaping POST variables.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79098">  
  <a class="name">
  <strong class="user"><em>zmorris at zsculpt dot com</em></strong></a><div class="date" title="2007-11-10 02:22"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79098">
<div class="phpcode"><code><span class="html">
Here is a drop-in replacement for base64_decode(), based on a faster version of morgangalpin's code:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// workaround for bug in php 4.3.11 through 4.4.7, 5.1.2 through 5.2.4 and perhaps others (<a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=37244</a>)
<br></span><span class="keyword">function&nbsp; &nbsp; </span><span class="default">base64_decode_fix</span><span class="keyword">( </span><span class="default">$data</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false </span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if( </span><span class="default">$strict </span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'![^a-zA-Z0-9/+=]!'</span><span class="keyword">, </span><span class="default">$data </span><span class="keyword">) )
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return( </span><span class="default">false </span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return( </span><span class="default">base64_decode</span><span class="keyword">( </span><span class="default">$data </span><span class="keyword">) );
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43131">  
  <a class="name">
  <strong class="user"><em>paul at ijsfontein dot nl</em></strong></a><div class="date" title="2004-06-10 06:04"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43131">
<div class="phpcode"><code><span class="html">
The user notes posted here helped me a lot in writing the PHP code to upload uuencoded files to a server using $_POST. Hardest thing to figure out was why the files came out scrambled and corrupted. After comparing the original file with the file reconstructed by the uudecode script, I found out that a simple "stripcslashes" on the posted data will do the trick.<br><br>So, to upload any kind of uuencoded file using a POST:<br>1. send the raw file data to the PHP script<br>2. $uuencoded_data = stripcslashes($_POST['filedata']);<br>3. strip the marker lines from $uuencoded_data (first line, last line and second last line of the data. Each line is seperated by a LF (chr(10)) character.)<br>4. $decoded_data = uudecode($stripped_uuencoded_data); (this function can be found in the user notes here).<br>5. Use the script provided in one of the user notes on this page to write the decoded data to a binary file.<br><br>That should do the trick!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="38479">  
  <a class="name">
  <strong class="user"><em>tobias at silverxnet dot de</em></strong></a><div class="date" title="2003-12-23 12:16"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom38479">
<div class="phpcode"><code><span class="html">
I was wondering how to decode attached images within mails. Basically they are mostly JPEG files, so it was obviously to write a function that decodes JPEG images.
<br>I guess the plainest way to do so was the following:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">base64_to_jpeg</span><span class="keyword">( </span><span class="default">$inputfile</span><span class="keyword">, </span><span class="default">$outputfile </span><span class="keyword">) {
<br>&nbsp; </span><span class="comment">/* read data (binary) */
<br>&nbsp; </span><span class="default">$ifp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">( </span><span class="default">$inputfile</span><span class="keyword">, </span><span class="string">"rb" </span><span class="keyword">);
<br>&nbsp; </span><span class="default">$imageData </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">( </span><span class="default">$ifp</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">( </span><span class="default">$inputfile </span><span class="keyword">) );
<br>&nbsp; </span><span class="default">fclose</span><span class="keyword">( </span><span class="default">$ifp </span><span class="keyword">);
<br>&nbsp; </span><span class="comment">/* encode &amp; write data (binary) */
<br>&nbsp; </span><span class="default">$ifp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">( </span><span class="default">$outputfile</span><span class="keyword">, </span><span class="string">"wb" </span><span class="keyword">);
<br>&nbsp; </span><span class="default">fwrite</span><span class="keyword">( </span><span class="default">$ifp</span><span class="keyword">, </span><span class="default">base64_decode</span><span class="keyword">( </span><span class="default">$imageData </span><span class="keyword">) );
<br>&nbsp; </span><span class="default">fclose</span><span class="keyword">( </span><span class="default">$ifp </span><span class="keyword">);
<br>&nbsp; </span><span class="comment">/* return output filename */
<br>&nbsp; </span><span class="keyword">return( </span><span class="default">$outputfile </span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This function decodes the given inputfile (a filename!) and saves it to the given outputfile (a filename as well) and then returns the output filename for further usage (e.g. redirect, imagejpeg() and so on).
<br>I thought that might be helpful.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20080">  
  <a class="name">
  <strong class="user"><em>nsayer at kfu dot com</em></strong></a><div class="date" title="2002-03-21 01:15"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20080">
<div class="phpcode"><code><span class="html">
I used to do uudecode as a C module, but I've discovered a really fast way to do it in PHP. Here it is:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">uudecode</span><span class="keyword">(</span><span class="default">$encode</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$b64chars</span><span class="keyword">=</span><span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZ\
<br>abcdefghijklmnopqrstuvwxyz0123456789+/"</span><span class="keyword">;
<br>
<br>&nbsp; </span><span class="default">$encode </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/^./m"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$encode</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$encode </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\n/m"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$encode</span><span class="keyword">);
<br>&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$encode</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp; if (</span><span class="default">$encode</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="string">'`'</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$encode</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">' '</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$encode</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$b64chars</span><span class="keyword">[</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$encode</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])-</span><span class="default">32</span><span class="keyword">];
<br>&nbsp; }
<br>
<br>&nbsp; while(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$encode</span><span class="keyword">) % </span><span class="default">4</span><span class="keyword">)
<br>&nbsp; &nbsp; </span><span class="default">$encode </span><span class="keyword">.= </span><span class="string">"="</span><span class="keyword">;
<br>
<br>&nbsp; return </span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">$encode</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This is the PHP equivalent to perl's unpack("u",___). That is, you need to strip the 'begin' and 'end' lines from the typical uuencoded file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92147">  
  <a class="name">
  <strong class="user"><em>dimagolov at yahoo dot com</em></strong></a><div class="date" title="2009-07-10 11:44"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92147">
<div class="phpcode"><code><span class="html">
Here is function to decode Base 62 (see <a rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Base_62</a>) string to number. It is used by MTA in message id, e.g. by Exim<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">base62_decode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">ctype_digit</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">-= </span><span class="default">ord</span><span class="keyword">(</span><span class="string">'0'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">ctype_upper</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">-= </span><span class="default">ord</span><span class="keyword">(</span><span class="string">'A'</span><span class="keyword">) - </span><span class="default">10</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">ctype_lower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">-= </span><span class="default">ord</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">) - </span><span class="default">36</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">= </span><span class="default">$ret </span><span class="keyword">* </span><span class="default">62 </span><span class="keyword">+ </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77073">  
  <a class="name">
  <strong class="user"><em>morgangalpin att gmail dotty com</em></strong></a><div class="date" title="2007-08-13 05:25"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77073">
<div class="phpcode"><code><span class="html">
I was having trouble with base64_decode returning false if the data to be decoded wasn't actually encoded. It turns out that it is a bug that exists in PHP version 5.1.2, which I'm using, but it has been fixed in CVS. The relevant bug is: <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=37244</a> "base64_decode violates RFC 3548". The fix may become available in 5.2.4 or 6 or whatever is coming next.<br><br>Since I'm not able to upgrade PHP to the latest version, I needed a way to check if some data had actually been encoded before trying to decode it. Here is the function I've used; I hope it helps someone.<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="comment">/**<br>&nbsp;&nbsp; * Check a string of base64 encoded data to make sure it has actually<br>&nbsp;&nbsp; * been encoded.<br>&nbsp;&nbsp; *<br>&nbsp;&nbsp; * @param $encodedString string Base64 encoded string to validate.<br>&nbsp;&nbsp; * @return Boolean Returns true when the given string only contains <br>&nbsp;&nbsp; * base64 characters; returns false if there is even one non-base64 character.<br>&nbsp;&nbsp; */<br>&nbsp; </span><span class="keyword">function </span><span class="default">checkBase64Encoded</span><span class="keyword">(</span><span class="default">$encodedString</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$encodedString</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// Check every character.<br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">$encodedString</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; if (<br>&nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="default">$c </span><span class="keyword">&lt; </span><span class="string">'0' </span><span class="keyword">|| </span><span class="default">$c </span><span class="keyword">&gt; </span><span class="string">'9'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt; </span><span class="string">'a' </span><span class="keyword">|| </span><span class="default">$c </span><span class="keyword">&gt; </span><span class="string">'z'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (</span><span class="default">$c </span><span class="keyword">&lt; </span><span class="string">'A' </span><span class="keyword">|| </span><span class="default">$c </span><span class="keyword">&gt; </span><span class="string">'Z'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (</span><span class="default">$c </span><span class="keyword">!= </span><span class="string">'+'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (</span><span class="default">$c </span><span class="keyword">!= </span><span class="string">'/'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (</span><span class="default">$c </span><span class="keyword">!= </span><span class="string">'='</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Bad character found.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">// Only good characters found.<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.base64-decode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:06 GMT -->


</body></html>