<html><!-- Mirrored from php.net/manual/en/function.mkdir.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>mkdir</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mkdir.html">
 <link rel="shorturl" href="http://php.net/mkdir">
 <link rel="alternate" href="http://php.net/mkdir" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.filesystem.html">
 <link rel="prev" href="function.lstat.html">
 <link rel="next" href="function.move-uploaded-file.html">

 <link rel="alternate" href="function.mkdir.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.mkdir.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.mkdir.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.mkdir.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.mkdir.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.mkdir.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.mkdir.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.mkdir.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.mkdir.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.mkdir.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.mkdir.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.file.html">File System Related Extensions</a></li>      <li><a href="book.filesystem.html">Filesystem</a></li>      <li><a href="ref.filesystem.html">Filesystem Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.mkdir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mkdir</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mkdir</span> â€” <span class="dc-title">Makes directory</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.mkdir-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>mkdir</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pathname</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = 0777</span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$recursive</code><span class="initializer"> = false</span></span>
   [, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$context</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   Attempts to create the directory specified by pathname. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mkdir-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">pathname</code></dt>

     <dd>

      <p class="para">
       The directory path.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       The mode is 0777 by default, which means the widest possible
       access. For more information on modes, read the details
       on the <span class="function"><a href="function.chmod.html" class="function">chmod()</a></span> page.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        <code class="parameter">mode</code> is ignored on Windows.
       </p>
      <p></p></blockquote>
      <p class="para">
       Note that you probably want to specify the mode as an octal number,
       which means it should have a leading zero. The mode is also modified
       by the current umask, which you can change using
       <span class="function"><a href="function.umask.html" class="function">umask()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">recursive</code></dt>

     <dd>

      <p class="para">
       Allows the creation of nested directories specified in the 
       <code class="parameter">pathname</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">context</code></dt>

     <dd>

      <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">Context support was added
with PHP 5.0.0. For a description of <em>contexts</em>, refer to
<a href="book.stream.html" class="xref">Streams</a>.</span></p></blockquote>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mkdir-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mkdir-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2505">
    <p><strong>Example #1 <span class="function"><strong>mkdir()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>mkdir</span><span style="color: #007700">(</span><span style="color: #DD0000">"/path/to/my/dir"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0700</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-2506">
    <p><strong>Example #2 <span class="function"><strong>mkdir()</strong></span> using the <code class="parameter">recursive</code> parameter</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Desired&nbsp;folder&nbsp;structure<br></span><span style="color: #0000BB">$structure&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'./depth1/depth2/depth3/'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;To&nbsp;create&nbsp;the&nbsp;nested&nbsp;structure,&nbsp;the&nbsp;$recursive&nbsp;parameter&nbsp;<br>//&nbsp;to&nbsp;mkdir()&nbsp;must&nbsp;be&nbsp;specified.<br><br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #0000BB">$structure</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0777</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'Failed&nbsp;to&nbsp;create&nbsp;folders...'</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&nbsp;...<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.mkdir-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   Emits an <strong><code>E_WARNING</code></strong> level error if the directory
   already exists.
  </p>
  <p class="para">
   Emits an <strong><code>E_WARNING</code></strong> level error if the relevant
   permissions prevent creating the directory.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mkdir-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">When <a href="features.safe-mode.html" class="link">safe mode</a> is enabled, PHP checks whether
the directory in which the script is operating has the same UID (owner) as the
script that is being executed.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mkdir-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-dir.html" class="function" rel="rdfs-seeAlso">is_dir()</a> - Tells whether the filename is a directory</span></li>    
    <li class="member"><span class="function"><a href="function.rmdir.html" class="function" rel="rdfs-seeAlso">rmdir()</a> - Removes directory</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="96990">  
  <a class="name">
  <strong class="user"><em>jack dot sleight at gmail dot com</em></strong></a><div class="date" title="2010-03-26 03:26"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96990">
<div class="phpcode"><code><span class="html">
When using the recursive parameter bear in mind that if you're using chmod() after mkdir() to set the mode without it being modified by the value of uchar() you need to call chmod() on all created directories. ie:<br><br><span class="default">&lt;?php<br>mkdir</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br></span><span class="default">?&gt;</span> <br><br>May result in "/test1/test2" having a mode of 0777 but "/test1" still having a mode of 0755 from the mkdir() call. You'd need to do:<br><br><span class="default">&lt;?php<br>mkdir</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br></span><span class="default">chmod</span><span class="keyword">(</span><span class="string">'/test1/test2'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64136">  
  <a class="name">
  <strong class="user"><em>jamespilcher1hotmail</em></strong></a><div class="date" title="2006-04-08 05:53"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64136">
<div class="phpcode"><code><span class="html">
one small gotcha:<br><br>mkdir(""), mkdir(false), and mkdir(null) give a "file exists" error. this is also true of a directory name consisting of any string that only contains space characters.<br><br>(this was on php 5.1.2 on Windows 2000)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99810">  
  <a class="name">
  <strong class="user"><em>satis at clankiller dot com</em></strong></a><div class="date" title="2010-09-08 06:05"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99810">
<div class="phpcode"><code><span class="html">
Please note that in a shared environment I failed to take into account an existing umask when I did a mkdir(dirname, 0755).&nbsp; This ended up creating the directory (function returned true), but I didn't have rights to do anything inside the folder, nor could I even view that it existed via ftp.<br><br>However, file_exists(dirname) returned true.&nbsp; Eventually I figured out what happened and was able to rmdir(dirname), then created the directory correctly.<br><br>So, when writing scripts you expect to be portable, either use umask to set your umask accordingly, or do a straight mkdir(dirname) followed by chmod(dirname, 0755) (or whatever it is you're looking for).&nbsp; If you make the same mistake I did, you should be able to rmdir() or chmod() the folder so it's accessible.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="1207">  
  <a class="name">
  <strong class="user"><em>aulbach at unter dot franken dot de</em></strong></a><div class="date" title="1999-07-22 02:37"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom1207">
<div class="phpcode"><code><span class="html">
This is an annotation from Stig Bakken:
<br>
<br>The mode on your directory is affected by your current umask.&nbsp; It will end
<br>up having (&lt;mkdir-mode&gt; and (not &lt;umask&gt;)).&nbsp; If you want to create one
<br>that is publicly readable, do something like this:
<br>
<br><span class="default">&lt;?php
<br>$oldumask </span><span class="keyword">= </span><span class="default">umask</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);
<br></span><span class="default">mkdir</span><span class="keyword">(</span><span class="string">'mydir'</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">); </span><span class="comment">// or even 01777 so you get the sticky bit set
<br></span><span class="default">umask</span><span class="keyword">(</span><span class="default">$oldumask</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95891">  
  <a class="name">
  <strong class="user"><em>michael at neo dot co dot il</em></strong></a><div class="date" title="2010-01-27 07:39"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95891">
<div class="phpcode"><code><span class="html">
sometimes the directory created with another mode than specified ( 0755 instead 0777&nbsp; etc).
<br>to solve that use :
<br>
<br><span class="default">&lt;?php
<br>$old </span><span class="keyword">= </span><span class="default">umask</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);
<br></span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">);
<br></span><span class="default">umask</span><span class="keyword">(</span><span class="default">$old</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77383">  
  <a class="name">
  <strong class="user"><em>Michal Nazarewicz, mina86 at mina86 dot com</em></strong></a><div class="date" title="2007-08-27 07:34"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77383">
<div class="phpcode"><code><span class="html">
On the other hand, splitting path on something else then a DIRECTORY_SEPARATOR may give unexpected results when someone accualy wants a file name with backslash in it! Moreover, neither Alan's nor pluto's code check for errors or return any value. Also, I don't like the isset($folder[$i]) technique -- there is a count() function you know.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">recursive_mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">0777</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$dirs</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="string">'.'</span><span class="keyword">;<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">.= </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="default">$dirs</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; !</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>It will only fail if someone specifies a mode which does not allow owner to create new entries in directory.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104752">  
  <a class="name">
  <strong class="user"><em>pz</em></strong></a><div class="date" title="2011-07-05 09:41"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104752">
<div class="phpcode"><code><span class="html">
mkdir works with stream wrappers, so it's ok to write mkdir('<a rel="nofollow" target="_blank">ftp://user:pass@server/mydir</a>');<br><br>which really made my day</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84458">  
  <a class="name">
  <strong class="user"><em>php at mike2k dot com</em></strong></a><div class="date" title="2008-07-15 01:32"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84458">
<div class="phpcode"><code><span class="html">
It should be noted that all of the recursive mkdir functions coded below are no longer required - as of 5.0.0 it says the "recursive" flag is available. I just tested it, it properly works (and I would assume it works for streams and Windows as well, if not, then it would be a bug)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83265">  
  <a class="name">
  <strong class="user"><em>GelaMu at GMail dot com</em></strong></a><div class="date" title="2008-05-17 05:19"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83265">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Makes directory and returns BOOL(TRUE) if exists OR made.<br> *<br> * @param&nbsp; $path Path name<br> * @return bool<br> */<br></span><span class="keyword">function </span><span class="default">rmkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">0755</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">"/\\\\/"</span><span class="keyword">, </span><span class="string">"/\/{2,}/"</span><span class="keyword">), </span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">), </span><span class="string">"/"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$e </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">));<br>&nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"/"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$e</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$cp </span><span class="keyword">= </span><span class="default">$e</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$cp</span><span class="keyword">) &amp;&amp; !@</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$cp</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cp </span><span class="keyword">.= </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$e</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return @</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$mode</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104301">  
  <a class="name">
  <strong class="user"><em>toppi at kacke dot de</em></strong></a><div class="date" title="2011-06-07 08:36"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104301">
<div class="phpcode"><code><span class="html">
If you have problems with the SAFE MODE Restriction in effect i.e. if you try to create and access to subdirectorys recursive you can use ftp-lib like this.<br><br><span class="default">&lt;?php<br><br>DEFINE </span><span class="keyword">(</span><span class="string">'FTP_USER'</span><span class="keyword">,</span><span class="string">'yourUser'</span><span class="keyword">); <br></span><span class="default">DEFINE </span><span class="keyword">(</span><span class="string">'FTP_PASS'</span><span class="keyword">,</span><span class="string">'yourPassword'</span><span class="keyword">);<br><br></span><span class="comment">/**<br> * Returns the created directory or false.<br> *<br> * @param Directory to create (String)<br> * @return Created directory or false;<br> */<br><br></span><span class="keyword">function </span><span class="default">mkDirFix </span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$conn_id </span><span class="keyword">= @</span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="string">"localhost"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$conn_id</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (@</span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">FTP_USER</span><span class="keyword">, </span><span class="default">FTP_PASS</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$path </span><span class="keyword">as </span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$dir</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$currPath</span><span class="keyword">.=</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!@</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">,</span><span class="default">$currPath</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!@</span><span class="default">ftp_mkdir</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">,</span><span class="default">$currPath</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">ftp_chmod</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">,</span><span class="default">$currPath</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">); <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$currPath</span><span class="keyword">;<br>&nbsp; &nbsp; <br>}<br></span><span class="default">?&gt;<br></span><br>Maybe it helps.<br>Toppi</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89390">  
  <a class="name">
  <strong class="user"><em>vlad at todosv dot com</em></strong></a><div class="date" title="2009-03-05 08:59"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89390">
<div class="phpcode"><code><span class="html">
Note that you should NOT enter the $mode value with "" or '' sorrounding it.<br><br>So, this should be valid:<br><span class="default">&lt;?php mkdir</span><span class="keyword">(</span><span class="string">"dir1/dir2"</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="default">?&gt;<br></span><br>But this is not:<br><span class="default">&lt;?php mkdir</span><span class="keyword">(</span><span class="string">"dir1/dir2"</span><span class="keyword">,</span><span class="string">"0777"</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="default">?&gt;<br></span><br>Nor this:<br><span class="default">&lt;?php mkdir</span><span class="keyword">(</span><span class="string">"dir1/dir2"</span><span class="keyword">,</span><span class="string">'0777'</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71880">  
  <a class="name">
  <strong class="user"><em>fantasysportswire at yahoo dot com</em></strong></a><div class="date" title="2006-12-20 06:07"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71880">
<div class="phpcode"><code><span class="html">
One small correction on a note from Frank in June 2006 on recursive directories under Windows.<br><br>First - this should be in the documentation as its the only function that I know of that php does not fix the slashes automatically.<br><br>Franks note stated:<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $mypath</span><span class="keyword">=</span><span class="string">"testdir\subdir\test"</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$mypath</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This doesn't work in windows:<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $mypath</span><span class="keyword">=</span><span class="string">"testdir/subdir/test"</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$mypath</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">?&gt;</span> <br><br>----<br><br>This will work a bit better :)<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $mypath</span><span class="keyword">=</span><span class="string">"testdir\\subdir\\test"</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$mypath</span><span class="keyword">,</span><span class="default">0777</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92678">  
  <a class="name">
  <strong class="user"><em>ethaizone at hotmail dot com</em></strong></a><div class="date" title="2009-08-03 01:10"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92678">
<div class="phpcode"><code><span class="html">
When I created folder on windows with mkdir, I found some problem from folder nam so I write this function.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">filename_safe</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$except </span><span class="keyword">= array(</span><span class="string">'\\'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="string">':'</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">, </span><span class="string">'?'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="string">'|'</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$except</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>It can use with another functions about file system as file_put_contents to clean up file name.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53075">  
  <a class="name">
  <strong class="user"><em>roth at egotec dot com</em></strong></a><div class="date" title="2005-05-22 11:43"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53075">
<div class="phpcode"><code><span class="html">
The 'mkdir' function doesn't function correctly on Windows when the path<br>contains forward slashes. The part of the path with the forward slashes<br>doesn't get created.<br><br>mkdir('c:/a/b/c/d', 0775, true);<br><br>You get the error message:<br>Warning: mkdir() [function.mkdir]: No such file or directory<br><br>Please use backslashes under Windows or use the constant DIRECTORY_SEPARATOR.<br><br>mkdir('c:\a\b\c\d', 0775, true);<br>mkdir('c:'.DIRECTORY_SEPARATOR.'a'.<br>DIRECTORY_SEPARATOR.'b'.<br>DIRECTORY_SEPARATOR.'c'.<br>DIRECTORY_SEPARATOR.'d', 0775, true);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50568">  
  <a class="name">
  <strong class="user"><em>Protik Mukherjee</em></strong></a><div class="date" title="2005-03-03 09:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50568">
<div class="phpcode"><code><span class="html">
mkdir, file rw, permission related notes for Fedora 3////<br>If you are using Fedora 3 and are facing permission problems, better check if SElinux is enabled on ur system. It add an additional layer of security and as a result PHP cant write to the folder eventhough it has 777 permissions. It took me almost a week to deal with this!<br><br>If you are not sure google for SElinux or 'disabling SELinux' and it may be the cure! Best of luck!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115151">  
  <a class="name">
  <strong class="user"><em>haclong</em></strong></a><div class="date" title="2014-06-04 01:18"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115151">
<div class="phpcode"><code><span class="html">
If you are using the SPL FileInfo object and then try to create the path with mkdir, don't forget that mkdir expects a string as the first argument and NOT an object...<br><br>I have forgotten that very important rules and get only a permission deny to mkdir to create new directories but in fact, the issue was the fact that i wasn't passing a string to mkdir<br><br>$my_file = new SplFileInfo('path/to/file.txt') ;<br><br>// get path from file<br>$parent = $my_file-&gt;getPathInfo() ;<br><br>// check if path is directory or not<br>if($parent-&gt;isDir())<br>{<br>// create / open file.txt file<br>} else {<br>// if path/to does not exists, create the directory recursively<br>mkdir($parent, 0755, true) ; // THIS WON'T WORK because $parent is a SplFileInfo object.<br><br>// instead, get the path as a string <br>$path = $parent-&gt;getPathname() ;<br>mkdir($path, 0755, true) ; // THIS WILL WORK<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114960">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2014-05-06 12:36"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114960">
<div class="phpcode"><code><span class="html">
Don't forget to use the recursive option on Windows if creating a folder below a folder that already exists. Otherwise you may get a very confusing error message, "Warning: mkdir(): No such file or directory in d:\path\to\file" where you think the folder should exist but you forgot to create the parent(s).<br><br>For example, if d:\path exists but there is nothing in it:<br><br><span class="default">&lt;?php<br>$path </span><span class="keyword">= </span><span class="string">'d:\path\to\my\file'</span><span class="keyword">;<br></span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103772">  
  <a class="name">
  <strong class="user"><em>[Rakesh Verma] rakeshnsony at gmail dot com</em></strong></a><div class="date" title="2011-05-02 11:02"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103772">
<div class="phpcode"><code><span class="html">
if you are unable to create recursive folder(s) using 0755 mode in your php script.<br><br>Then try it by changing your current user to apache and test it again. <br><br>Hopefully you will get positive results</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102823">  
  <a class="name">
  <strong class="user"><em>julius - grantzau - c-o-m</em></strong></a><div class="date" title="2011-03-08 08:10"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102823">
<div class="phpcode"><code><span class="html">
Remember to use clearstatcache()<br><br>... when working with filesystem functions.<br><br>Otherwise, as an example, you can get an error creating a folder (using mkdir) just after deleting it (using rmdir).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101213">  
  <a class="name">
  <strong class="user"><em>Benjamin Rack</em></strong></a><div class="date" title="2010-12-02 04:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101213">
<div class="phpcode"><code><span class="html">
It should be mentioned that - at least on Windows - when using UNC paths with mkdir the 2nd parameter $mode should not be specified. Otherwise mkdir fails to create the directory on the given UNC path.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73760">  
  <a class="name">
  <strong class="user"><em>sean at pedlr dot com</em></strong></a><div class="date" title="2007-03-08 08:58"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73760">
<div class="phpcode"><code><span class="html">
It should be noted that although the documentation says that&nbsp; the default permissions for mkdir are 0777, this is not always the case.<br><br>I'm running LAMP and without explicitly setting the permissions, the directories created had permissions of 0755.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68207">  
  <a class="name">
  <strong class="user"><em>kungla at gmail dot com</em></strong></a><div class="date" title="2006-07-18 05:41"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68207">
<div class="phpcode"><code><span class="html">
Somehow the recursive version of mkdir didn't work for me on Mac and the workaraounds listed below alsow didn't work for me, so heres my solution:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">mkdir_r</span><span class="keyword">(</span><span class="default">$dirName</span><span class="keyword">, </span><span class="default">$rights</span><span class="keyword">=</span><span class="default">0777</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$dirName</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$dir</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$dirs </span><span class="keyword">as </span><span class="default">$part</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir</span><span class="keyword">.=</span><span class="default">$part</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) &amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$rights</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Tested and works ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58393">  
  <a class="name">
  <strong class="user"><em>Kevin Cook</em></strong></a><div class="date" title="2005-11-02 09:14"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58393">
<div class="phpcode"><code><span class="html">
I could not get the sticky bit set properly using the octal mode: 2775 (rwxrwsr-x)<br><br>$foo='my_directory';<br><br>$old_umask = umask(0);<br>mkdir($foo,2775);<br>umask($old_umask);<br><br>using the above lines renders a directory with permissions:<br><br>d-wx-wSrwt&nbsp; 2 www www 4096 Nov&nbsp; 2 11:43 my_directory<br><br>Not exactly what I was looking for.<br><br>This gets closer to the mark:<br><br>$foo='my_directory';<br><br>$old_umask = umask(0);<br>mkdir($foo,0777); // the default chmod<br>umask($old_umask);<br><br>drwxrwsrwx&nbsp; 2 www www 4096 Nov&nbsp; 2 11:46 my_directory</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87696">  
  <a class="name">
  <strong class="user"><em>t-k-r at o2 dot pl</em></strong></a><div class="date" title="2008-12-17 01:42"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87696">
<div class="phpcode"><code><span class="html">
Very simple script, may be useful to someone.<br>Creating a directory structure liki this:<br><br>0 ------ 0<br>1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1<br>2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2 -------- 0<br>3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1<br>4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 2<br>5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3<br>6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br>7<br>[....]<br>e<br>f<br><br>Used by my as structure to store uploaded files:<br>someone upload file -&gt; its name + microtime is md5 -&gt; first 3 letters of md5 string are first 3 subfolders in this folder structure, and at least file is stroed with md5 name.<br>Naturally SQL- or other type - Database is needed to store infos about files position in this structure.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">for (</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">;</span><span class="default">$a</span><span class="keyword">++) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="default">0755</span><span class="keyword">);<br><br>&nbsp; &nbsp; for (</span><span class="default">$b</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$b</span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">;</span><span class="default">$b</span><span class="keyword">++) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">),</span><span class="default">0755</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$c</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="default">15</span><span class="keyword">;</span><span class="default">$c</span><span class="keyword">++) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">),</span><span class="default">0755</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; }<br><br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85821">  
  <a class="name">
  <strong class="user"><em>hinom - iMasters</em></strong></a><div class="date" title="2008-09-18 10:56"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85821">
<div class="phpcode"><code><span class="html">
mkdir simple test with "exception handler"<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">handleError</span><span class="keyword">() {<br>&nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'MY ERROR'</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">/** usage sample<br>&nbsp; &nbsp; &nbsp; &nbsp; @handleError();<br>&nbsp; &nbsp; &nbsp; &nbsp; echo $php_errormsg;<br>&nbsp; &nbsp; */<br></span><span class="keyword">}<br><br></span><span class="comment">// detect slash/backslash nomenclature dirname<br></span><span class="default">$path </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">( </span><span class="default">__FILE__ </span><span class="keyword">);<br></span><span class="default">$slash </span><span class="keyword">= </span><span class="string">'/'</span><span class="keyword">; </span><span class="default">strpos</span><span class="keyword">( </span><span class="default">$path</span><span class="keyword">, </span><span class="default">$slash </span><span class="keyword">) ? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$slash </span><span class="keyword">= </span><span class="string">'\\'</span><span class="keyword">;<br></span><span class="default">define</span><span class="keyword">( </span><span class="string">'BASE_DIR'</span><span class="keyword">, </span><span class="default">$path </span><span class="keyword">. </span><span class="default">$slash </span><span class="keyword">);<br><br></span><span class="default">$folder&nbsp; </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// folder name<br></span><span class="default">$dirPath </span><span class="keyword">= </span><span class="default">BASE_DIR </span><span class="keyword">. </span><span class="default">$folder</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// folder path<br><br>// print results<br></span><span class="keyword">echo </span><span class="default">$slash</span><span class="keyword">;<br>echo </span><span class="string">'&lt;hr&gt;'</span><span class="keyword">;<br><br></span><span class="default">$rs </span><span class="keyword">= @</span><span class="default">mkdir</span><span class="keyword">( </span><span class="default">$dirPath</span><span class="keyword">, </span><span class="string">'0777' </span><span class="keyword">);<br>@</span><span class="default">handleError</span><span class="keyword">();<br>if( </span><span class="default">$rs </span><span class="keyword">)<br>{<br><br>&nbsp; &nbsp; </span><span class="comment">// print success information<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">'was done!'</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">'&lt;br&gt;folder: &lt;a href="' </span><span class="keyword">. </span><span class="default">$folder </span><span class="keyword">. </span><span class="string">'"&gt;' </span><span class="keyword">. </span><span class="default">$folder </span><span class="keyword">. </span><span class="string">'&lt;/a&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">'&lt;br&gt;dirPath: ' </span><span class="keyword">. </span><span class="default">$dirPath</span><span class="keyword">;<br><br>}else{<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// print error information<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">'an error was occurred. Attempting create folder'</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">'&lt;br&gt;dirPath: ' </span><span class="keyword">. </span><span class="default">$dirPath</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">'&lt;br&gt;php_errormsg: ' </span><span class="keyword">. </span><span class="default">$php_errormsg</span><span class="keyword">;<br><br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80553">  
  <a class="name">
  <strong class="user"><em>david dot NOSPAM at ajnewmedia dot NOSPAM dot co dot uk</em></strong></a><div class="date" title="2008-01-21 09:04"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80553">
<div class="phpcode"><code><span class="html">
p-garcia : since PHP 5, setting the recursive flag (which currently has no notes in the manual entry) will allow you to create nested directories in the same way as Windows / Linux mkdir -p, so long as the webserver has permissions to write in the root directory of the path specified<br>eg:<br><br><span class="default">&lt;?php<br>&nbsp; mkdir </span><span class="keyword">(</span><span class="string">"./newdir1/newdir2/newdir3/"</span><span class="keyword">, </span><span class="default">0755</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br>&nbsp; </span><span class="comment">// Returns TRUE if you have permission to write to the current directory <br>&nbsp; //&nbsp;&nbsp; and creates nested directories with permissionsrwxr-xr-x<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60861">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-01-18 09:48"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60861">
<div class="phpcode"><code><span class="html">
function mkdirs($dir, $mode = 0777, $recursive = true) {<br>&nbsp; if( is_null($dir) || $dir === "" ){<br>&nbsp; &nbsp; return FALSE;<br>&nbsp; }<br>&nbsp; if( is_dir($dir) || $dir === "/" ){<br>&nbsp; &nbsp; return TRUE;<br>&nbsp; }<br>&nbsp; if( mkdirs(dirname($dir), $mode, $recursive) ){<br>&nbsp; &nbsp; return mkdir($dir, $mode);<br>&nbsp; }<br>&nbsp; return FALSE;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52355">  
  <a class="name">
  <strong class="user"><em>webmaster2007 at home dot nl</em></strong></a><div class="date" title="2005-04-28 08:27"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52355">
<div class="phpcode"><code><span class="html">
Maybe you can use this:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">open_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$newdir</span><span class="keyword">){&nbsp; &nbsp; </span><span class="comment">//The function that will copy the files<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) &amp;&amp; </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$open_dir</span><span class="keyword">=</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$open_dir</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">) &amp;&amp; </span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">) != </span><span class="string">"dir"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">) == </span><span class="string">"dir"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">open_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">copy</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$newdir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">open_dir</span><span class="keyword">(</span><span class="string">"Your source map"</span><span class="keyword">, </span><span class="string">"Your destination map"</span><span class="keyword">); </span><span class="comment">//Here you can fill in your source en destination map<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104153">  
  <a class="name">
  <strong class="user"><em>nickcarenza at gmail dot com</em></strong></a><div class="date" title="2011-05-26 01:41"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104153">
<div class="phpcode"><code><span class="html">
If you are having trouble with the pathname, use:<br><br>echo dirname( __FILE__ );<br><br>That will show you the pathname of the current script and you will be able to use that to see where you have to start your pathname.<br><br>I tried forever to do mkdir('dirname') and was getting permission denied. I can see now its because it was trying to create that folder up at home when i wanted it down in public_html.<br><br>I hope this saves someone some time.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89069">  
  <a class="name">
  <strong class="user"><em>d dot kok at kadova dot nl</em></strong></a><div class="date" title="2009-02-20 12:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89069">
<div class="phpcode"><code><span class="html">
Please note that when specifying the recursive option the function returns false anyway if the directory already exists. <br><br>For some reason however I expected it to behave like `mkdir -p` on the command line which succeeds if the directory already exists.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81119">  
  <a class="name">
  <strong class="user"><em>code at ashleyhunt dot co dot uk</em></strong></a><div class="date" title="2008-02-14 11:15"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81119">
<div class="phpcode"><code><span class="html">
Here's a script to create a recursive directory path on NAS or another server using Common Internet File System (CIFS)<br><br>e.g. you already have a directory on a server<br>\\server/share/dir1/dir2<br><br>you want to create some more directories<br>\\server/share/dir1/dir2/dir3/dir4<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">remote_mkpath</span><span class="keyword">(</span><span class="default">$server</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">)&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(\/){2,}|(\\\){1,}/'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">$path</span><span class="keyword">); </span><span class="comment">//only forward-slash<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirs </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="string">"\\\\" </span><span class="keyword">. </span><span class="default">$server </span><span class="keyword">. </span><span class="string">"/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$dirs </span><span class="keyword">AS </span><span class="default">$element</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">.= </span><span class="default">$element </span><span class="keyword">. </span><span class="string">"/"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) &amp;&amp; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) { <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)){ <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"something was wrong at : " </span><span class="keyword">. </span><span class="default">$path</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$path</span><span class="keyword">;<br>}<br><br></span><span class="comment">// example usage<br></span><span class="default">remote_mkpath</span><span class="keyword">(</span><span class="string">"SERVER"</span><span class="keyword">, </span><span class="string">"share/dir1/dir2/dir3/dir4"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Good luck!<br><br>Ashley</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105227">  
  <a class="name">
  <strong class="user"><em>matt at imaketheweb dot com</em></strong></a><div class="date" title="2011-08-03 06:26"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105227">
<div class="phpcode"><code><span class="html">
If you're getting a Permission Denied error, but are certain the permissions and ownership where you are trying to create the directory are correct, check again:<br><br>The location where you are trying to create the directory in must have the Execute permission for the owner trying to create it, regardless of if the folder is Readable, or Writable.<br><br>This may be obvious to some, but was not to me at first. Hopefully this will save you the trouble I went through.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62852">  
  <a class="name">
  <strong class="user"><em>Ali Baba</em></strong></a><div class="date" title="2006-03-10 01:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62852">
<div class="phpcode"><code><span class="html">
Greg, your code does not work for me; maybe it has a bug or we have configuration changes. Anyway, this one works to create recursively the directory DIRECTORY. <br><br>&lt;?<br>define ("DIRECTORY", "/tmp/mydir/mysubdir");<br><br>do {<br>&nbsp; &nbsp; $dir = DIRECTORY;<br>&nbsp; &nbsp; while (!is_dir($dir)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $basedir = dirname($dir);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($basedir == '/' || is_dir($basedir))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mkdir($dir,0777);<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dir=$basedir;<br>&nbsp;&nbsp; }<br>} while ($dir != DIRECTORY);<br><br>?&gt;</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.mkdir.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:14 GMT -->


</body></html>