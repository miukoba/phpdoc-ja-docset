<html><!-- Mirrored from php.net/manual/en/function.extract.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:50 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>extract</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.extract.html">
 <link rel="shorturl" href="http://php.net/extract">
 <link rel="alternate" href="http://php.net/extract" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.array.html">
 <link rel="prev" href="function.end.html">
 <link rel="next" href="function.in-array.html">

 <link rel="alternate" href="function.extract.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.extract.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.extract.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.extract.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.extract.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.extract.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.extract.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.extract.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.extract.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.extract.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.extract.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.array.html">Arrays</a></li>      <li><a href="ref.array.html">Array Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.extract" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">extract</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">extract</span> â€” <span class="dc-title">Import variables into the current symbol table from an array</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.extract-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>extract</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&amp;$array</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = EXTR_OVERWRITE</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Import variables from an array into the current symbol table.
  </p>
  <p class="para">
   Checks each key to see whether it has a valid variable name. 
   It also checks for collisions with existing variables in
   the symbol table.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.extract-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">array</code></dt>

     <dd>

      <p class="para">
       An associative array. This function treats keys as variable names and
       values as variable values.  For each key/value pair it will create a
       variable in the current symbol table, subject to
       <code class="parameter">flags</code> and <code class="parameter">prefix</code> parameters.
      </p>
      <p class="para">
       You must use an associative array; a numerically indexed array
       will not produce results unless you use <strong><code>EXTR_PREFIX_ALL</code></strong> or
       <strong><code>EXTR_PREFIX_INVALID</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       The way invalid/numeric keys and collisions are treated is determined
       by the extraction <code class="parameter">flags</code>. It can be one of the
       following values:
       </p><dl>

        
         <dt>
<strong><code>EXTR_OVERWRITE</code></strong></dt>

         <dd>

          <span class="simpara">
           If there is a collision, overwrite the existing variable.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_SKIP</code></strong></dt>

         <dd>

          <span class="simpara">
           If there is a collision, don't overwrite the existing
           variable.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_SAME</code></strong></dt>

         <dd>

          <span class="simpara">If there is a collision, prefix the variable name with
          <code class="parameter">prefix</code>.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_ALL</code></strong></dt>

         <dd>

          <span class="simpara">
           Prefix all variable names with
           <code class="parameter">prefix</code>.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_INVALID</code></strong></dt>

         <dd>

          <span class="simpara">
           Only prefix invalid/numeric variable names with
           <code class="parameter">prefix</code>.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_IF_EXISTS</code></strong></dt>

         <dd>

          <span class="simpara">
           Only overwrite the variable if it already exists in the
           current symbol table, otherwise do nothing.  This is useful
           for defining a list of valid variables and then extracting
           only those variables you have defined out of
           <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>, for example.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_PREFIX_IF_EXISTS</code></strong></dt>

         <dd>

          <span class="simpara">
           Only create prefixed variable names if the non-prefixed version
           of the same variable exists in the current symbol table.
          </span>
         </dd>

        
        
         <dt>
<strong><code>EXTR_REFS</code></strong></dt>

         <dd>

          <span class="simpara">
           Extracts variables as references. This effectively means that the
           values of the imported variables are still referencing the values of
           the <code class="parameter">array</code> parameter. You can use this flag
           on its own or combine it with any other flag by OR'ing the
           <code class="parameter">flags</code>.
          </span>
         </dd>

        
       </dl>

      <p></p>
      <p class="para">
       If <code class="parameter">flags</code> is not specified, it is
       assumed to be <strong><code>EXTR_OVERWRITE</code></strong>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">prefix</code></dt>

     <dd>

      <p class="para">
       Note that <code class="parameter">prefix</code> is only required if
       <code class="parameter">flags</code> is <strong><code>EXTR_PREFIX_SAME</code></strong>,
       <strong><code>EXTR_PREFIX_ALL</code></strong>, <strong><code>EXTR_PREFIX_INVALID</code></strong>
       or <strong><code>EXTR_PREFIX_IF_EXISTS</code></strong>. If
       the prefixed result is not a valid variable name, it is not
       imported into the symbol table. Prefixes are automatically separated from
       the array key by an underscore character.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.extract-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the number of variables successfully imported into the symbol
   table.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.extract-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5130">
    <p><strong>Example #1 <span class="function"><strong>extract()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     A possible use for <span class="function"><strong>extract()</strong></span> is to import into the
     symbol table variables contained in an associative array returned by
     <span class="function"><a href="function.wddx-deserialize.html" class="function">wddx_deserialize()</a></span>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*&nbsp;Suppose&nbsp;that&nbsp;$var_array&nbsp;is&nbsp;an&nbsp;array&nbsp;returned&nbsp;from<br>&nbsp;&nbsp;&nbsp;wddx_deserialize&nbsp;*/<br><br></span><span style="color: #0000BB">$size&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"large"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$var_array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"size"&nbsp;&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"medium"</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"shape"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"sphere"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$var_array</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">EXTR_PREFIX_SAME</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"wddx"</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$color</span><span style="color: #DD0000">,&nbsp;</span><span style="color: #0000BB">$size</span><span style="color: #DD0000">,&nbsp;</span><span style="color: #0000BB">$shape</span><span style="color: #DD0000">,&nbsp;</span><span style="color: #0000BB">$wddx_size</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>blue, large, sphere, medium
</pre></div>
    </div>
    <div class="example-contents"><p>
     The <var class="varname"><var class="varname">$size</var></var> wasn't overwritten because we specified
     <strong><code>EXTR_PREFIX_SAME</code></strong>, which resulted in
     <var class="varname"><var class="varname">$wddx_size</var></var> being created.  If <strong><code>EXTR_SKIP</code></strong> was
     specified, then <var class="varname"><var class="varname">$wddx_size</var></var> wouldn't even have been created.
     <strong><code>EXTR_OVERWRITE</code></strong> would have caused <var class="varname"><var class="varname">$size</var></var> to have
     value "medium", and <strong><code>EXTR_PREFIX_ALL</code></strong> would result in new variables
     being named <var class="varname"><var class="varname">$wddx_color</var></var>,
     <var class="varname"><var class="varname">$wddx_size</var></var>, and
     <var class="varname"><var class="varname">$wddx_shape</var></var>.
    </p></div>
   </div>
  <p></p>
 </div>

 <div class="refsect1 notes" id="refsect1-function.extract-notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    Do not use <span class="function"><strong>extract()</strong></span> on untrusted data, like
    user input
    (i.e. <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var>, <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES</a></var></var>, etc.).
    If you do, for example if you want to run old code that relies
    on <a href="security.globals.html" class="link">register_globals</a>
    temporarily, make sure you use one of the non-overwriting
    <code class="parameter">flags</code> values such as
    <strong><code>EXTR_SKIP</code></strong> and be aware that you should extract
    in the same order that's defined in
    <a href="ini.core.html#ini.variables-order" class="link">variables_order</a> within the
    <a href="ini.html" class="link"><var class="filename">php.ini</var></a>.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    If you
    have <a href="security.globals.html" class="link">register_globals</a>
    turned on and you use <span class="function"><strong>extract()</strong></span>
    on <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES</a></var></var> and
    specify <strong><code>EXTR_SKIP</code></strong>, you may be surprised at
    the results.
   </p>
   <div class="warning"><strong class="warning">Warning</strong>
    <p class="para">
     This is not recommended practice and is only documented here for
     completeness. The use
     of <a href="security.globals.html" class="link">register_globals</a> is
     deprecated and calling <span class="function"><strong>extract()</strong></span> on untrusted
     data such as <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES</a></var></var> is, as noted above, a
     potential security risk. If you encounter this issue, it means
     that you are using at least two poor coding practices.
    </p>
   </div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">/*&nbsp;Suppose&nbsp;that&nbsp;$testfile&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;a&nbsp;file&nbsp;upload&nbsp;input<br>&nbsp;&nbsp;&nbsp;and&nbsp;that&nbsp;register_globals&nbsp;is&nbsp;turned&nbsp;on.&nbsp;*/<br><br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$testfile</span><span style="color: #007700">);<br></span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">EXTR_SKIP</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$testfile</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$testfile</span><span style="color: #007700">[</span><span style="color: #DD0000">'tmp_name'</span><span style="color: #007700">]);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <span class="simpara">
    You might expect to see something like the following:
   </span>
   <div class="example-contents screen">
<div class="cdata"><pre>string(14) "/tmp/phpgCCPX8"
array(5) {
  ["name"]=&gt;
  string(10) "somefile.txt"
  ["type"]=&gt;
  string(24) "application/octet-stream"
  ["tmp_name"]=&gt;
  string(14) "/tmp/phpgCCPX8"
  ["error"]=&gt;
  int(0)
  ["size"]=&gt;
  int(4208)
}
string(14) "/tmp/phpgCCPX8"
</pre></div>
   </div>
   <span class="simpara">
    However, you would instead see something like this:
   </span>
   <div class="example-contents screen">
<div class="cdata"><pre>string(14) "/tmp/phpgCCPX8"
string(14) "/tmp/phpgCCPX8"
string(1) "/"
</pre></div>
   </div>
   <p class="para">
    This is due to the fact that
    since <a href="security.globals.html" class="link">register_globals</a> is
    turned on, <var class="varname"><var class="varname">$testfile</var></var> already exists in the
    global scope when <span class="function"><strong>extract()</strong></span> is called. And
    since <strong><code>EXTR_SKIP</code></strong> is
    specified, <var class="varname"><var class="varname">$testfile</var></var> is not overwritten with
    the contents of the <strong><code>$_FILES</code></strong> array
    so <var class="varname"><var class="varname">$testfile</var></var> remains a string.
    Because <a href="language.types.string.html#language.types.string.substr" class="link">strings may
    be accessed using array syntax</a> and the non-numeric string
    <em>tmp_name</em> is interpreted
    as <em>0</em>, PHP
    sees <var class="varname"><var class="varname">$testfile['tmp_name']</var></var>
    as <var class="varname"><var class="varname">$testfile[0]</var></var>.
   </p>
  <p></p></blockquote>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.extract-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.compact.html" class="function" rel="rdfs-seeAlso">compact()</a> - Create array containing variables and their values</span></li>
    <li class="member"><span class="function"><a href="function.list.html" class="function" rel="rdfs-seeAlso">list()</a> - Assign variables as if they were an array</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="114096">  
  <a class="name">
  <strong class="user"><em>CertaiN</em></strong></a><div class="date" title="2014-01-10 04:38"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114096">
<div class="phpcode"><code><span class="html">
[New Version]<br><br>Example Usage:<br><span class="default">&lt;?php<br>$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; '</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">'&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; '</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">][</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br><br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; '</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">][</span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br><br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">'&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; '</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">][</span><span class="string">'invalid_structure'</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'C'</span><span class="keyword">][</span><span class="string">"Invalid UTF-8 sequence: \xe3\xe3\xe3"</span><span class="keyword">] = </span><span class="string">'INVALID'</span><span class="keyword">;<br><br></span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'unneeded_item'</span><span class="keyword">] = </span><span class="string">'UNNEEDED'</span><span class="keyword">;<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">filter_struct_utf8</span><span class="keyword">(</span><span class="default">INPUT_GET</span><span class="keyword">, array(<br>&nbsp; &nbsp; </span><span class="string">'A' </span><span class="keyword">=&gt; array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">,<br>&nbsp; &nbsp; ),<br>&nbsp; &nbsp; </span><span class="string">'B' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'C' </span><span class="keyword">=&gt; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY </span><span class="keyword">| </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">,<br>)));<br></span><span class="default">?&gt;<br></span><br>Example Result:<br>array(3) {<br>&nbsp; ["A"]=&gt;<br>&nbsp; array(4) {<br>&nbsp; &nbsp; ["a"]=&gt;<br>&nbsp; &nbsp; string(36) "&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; "<br>&nbsp; &nbsp; ["b"]=&gt;<br>&nbsp; &nbsp; string(30) "CORRECT(including some spaces)"<br>&nbsp; &nbsp; ["c"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; &nbsp; ["d"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; }<br>&nbsp; ["B"]=&gt;<br>&nbsp; array(3) {<br>&nbsp; &nbsp; ["a"]=&gt;<br>&nbsp; &nbsp; string(36) "&nbsp; CORRECT(including some spaces)&nbsp; &nbsp; "<br>&nbsp; &nbsp; ["b"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; &nbsp; ["c"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; }<br>&nbsp; ["C"]=&gt;<br>&nbsp; array(3) {<br>&nbsp; &nbsp; ["a"]=&gt;<br>&nbsp; &nbsp; string(30) "CORRECT(including some spaces)"<br>&nbsp; &nbsp; ["b"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; &nbsp; ["c"]=&gt;<br>&nbsp; &nbsp; string(0) ""<br>&nbsp; }<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74649">  
  <a class="name">
  <strong class="user"><em>Dan O'Donnell</em></strong></a><div class="date" title="2007-04-21 12:25"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74649">
<div class="phpcode"><code><span class="html">
Following up on ktwombley at gmail dot com's post:<br><br>Presumably one easy way of dealing with this security issue is to use the EXTR_IF_EXISTS flag and make sure <br><br>a) your define acceptable input variables beforehand (i.e. as empty variables)<br>b) Sanitise any user input to avoid unacceptable variable content. <br><br>If you do these two things, then I'm not sure I see the difference between extract($_REQUEST,EXTR_IF_EXISTS); and assigning each of the variables by hand.<br><br>I'm not talking here about the idea of storing the variables in a database, just the immediately necessary steps to allow you to use extract on REQUEST arrays with relative safety.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112068">  
  <a class="name">
  <strong class="user"><em>dotslash.lu at gmail.com</em></strong></a><div class="date" title="2013-04-29 12:55"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112068">
<div class="phpcode"><code><span class="html">
You can't extract a numeric indexed array(e.g. non-assoc array).<br><span class="default">&lt;?php<br>$a </span><span class="keyword">= array(<br>&nbsp; </span><span class="default">1</span><span class="keyword">,<br>&nbsp; </span><span class="default">2<br></span><span class="keyword">);<br></span><span class="default">extract</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(${</span><span class="default">1</span><span class="keyword">});<br></span><span class="default">?&gt;<br></span><br>result:<br>PHP Notice:&nbsp; Undefined variable: 1 in /Users/Lutashi/t.php on line 7<br><br>Notice: Undefined variable: 1 in /Users/Lutashi/t.php on line 7<br>NULL</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114095">  
  <a class="name">
  <strong class="user"><em>CertaiN</em></strong></a><div class="date" title="2014-01-10 04:37"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114095">
<div class="phpcode"><code><span class="html">
[New Version]<br>This function is very useful for filtering complicated array structure.<br>Also, Some integer bitmasks and invalid UTF-8 sequence detection are available.<br><br>Code:<br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * @param&nbsp; integer $type&nbsp; &nbsp; Constant like INPUT_XXX.<br> * @param&nbsp; array&nbsp;&nbsp; $default Default structure of the specified super global var.<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Following bitmasks are available:<br> *&nbsp; + FILTER_STRUCT_FORCE_ARRAY - Force 1 dimensional array.<br> *&nbsp; + FILTER_STRUCT_TRIM&nbsp; &nbsp; &nbsp; &nbsp; - Trim by ASCII control chars.<br> *&nbsp; + FILTER_STRUCT_FULL_TRIM&nbsp;&nbsp; - Trim by ASCII control chars,<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; full-width and no-break space.<br> * @return array&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; The value of the filtered super global var.<br> */<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_FORCE_ARRAY'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_TRIM'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'FILTER_STRUCT_FULL_TRIM'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br>function </span><span class="default">filter_struct_utf8</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">, array </span><span class="default">$default</span><span class="keyword">) {<br>&nbsp; &nbsp; static </span><span class="default">$func </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br>&nbsp; &nbsp; static </span><span class="default">$trim </span><span class="keyword">= </span><span class="string">"[\\x0-\x20\x7f]"</span><span class="keyword">;<br>&nbsp; &nbsp; static </span><span class="default">$ftrim </span><span class="keyword">= </span><span class="string">"[\\x0-\x20\x7f\xc2\xa0\xe3\x80\x80]"</span><span class="keyword">;<br>&nbsp; &nbsp; static </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; if (!</span><span class="default">$recursive </span><span class="keyword">= </span><span class="default">$recursive_static</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$types </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INPUT_GET </span><span class="keyword">=&gt; </span><span class="default">$_GET</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INPUT_POST </span><span class="keyword">=&gt; </span><span class="default">$_POST</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INPUT_COOKIE </span><span class="keyword">=&gt; </span><span class="default">$_COOKIE</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INPUT_REQUEST </span><span class="keyword">=&gt; </span><span class="default">$_REQUEST</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$types</span><span class="keyword">[(int)</span><span class="default">$type</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">'unknown super global var type'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$types</span><span class="keyword">[(int)</span><span class="default">$type</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">$type</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach (</span><span class="default">$default </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$is_int </span><span class="keyword">= </span><span class="default">is_int</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!(</span><span class="default">$value </span><span class="keyword">| (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY </span><span class="keyword">|<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">FILTER_STRUCT_FULL_TRIM </span><span class="keyword">| <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">FILTER_STRUCT_TRIM<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">'unknown bitmask'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_FORCE_ARRAY</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ((array)</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'//u'</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">&amp;= </span><span class="default">FILTER_STRUCT_FULL_TRIM </span><span class="keyword">| </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">+= array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">? </span><span class="default">$value </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$tmp</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$isset </span><span class="keyword">= isset(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (!</span><span class="default">$isset </span><span class="keyword">|| </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">$is_int </span><span class="keyword">&amp;&amp; </span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_FULL_TRIM</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\A</span><span class="keyword">{</span><span class="default">$ftrim</span><span class="keyword">}</span><span class="string">++|</span><span class="keyword">{</span><span class="default">$ftrim</span><span class="keyword">}</span><span class="string">++\z/u"</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">$is_int </span><span class="keyword">&amp;&amp; </span><span class="default">$value </span><span class="keyword">&amp; </span><span class="default">FILTER_STRUCT_TRIM</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/\A</span><span class="keyword">{</span><span class="default">$trim</span><span class="keyword">}</span><span class="string">++|</span><span class="keyword">{</span><span class="default">$trim</span><span class="keyword">}</span><span class="string">++\z/u"</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'//u'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] === </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$is_int </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (!</span><span class="default">$recursive</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$recursive_static </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106374">  
  <a class="name">
  <strong class="user"><em>Robc</em></strong></a><div class="date" title="2011-11-01 06:30"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106374">
<div class="phpcode"><code><span class="html">
When extracting from a row after a database query using for example:<br><br>$row = mysql_fetch_array($result, MYSQL_ASSOC)<br>extract($row);<br><br>I find that the resultant variables may not match the variable type in the database.&nbsp; In particular I have found integers in the database may gettype() to string on the extracted variable.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50549">  
  <a class="name">
  <strong class="user"><em>Michael Newton</em></strong></a><div class="date" title="2005-03-02 05:23"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50549">
<div class="phpcode"><code><span class="html">
They say "If the result is not a valid variable name, it is not imported into the symbol table."<br><br>What they should say is that if _any_ of the results have invalid names, _none_ of the variables get extracted.<br><br>Under 4.3.10 on Windows 2000, I was pulling some mySQL records, but needed to convert two fields into IP addresses:<br>&lt;?<br>extract(mysql_fetch_assoc(mysql_query('SELECT * FROM foo')));<br>extract(mysql_fetch_assoc(mysql_query('SELECT INET_NTOA(bar) AS bar, INET_NTOA(baz) FROM foo')));<br>?&gt;<br><br>I had forgotten the second AS modifier in the SQL query.&nbsp; Because it couldn't extract a variable called INET_NTOA(baz) into the symbol table, it didn't do either of them.<br><br>(BTW I don't normally stack functions up like that!&nbsp; Just to make a short example!)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53378">  
  <a class="name">
  <strong class="user"><em>anon at anon dot org</em></strong></a><div class="date" title="2005-05-30 12:02"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53378">
<div class="phpcode"><code><span class="html">
A warning about extract() and null values.<br><br>This might be an actual Zend2 Engine bug, but it's bad programming practice, so I'm sharing it here instead.<br><br>I often work in envrionments where E_STRICT (which would prevent errors like this) isn't on, and I don't have access to change it. I also use a very simple template class that in a nutshell works like this:<br><br>$t = new Template('somefile.php');<br>$t-&gt;title = $title;<br>$t-&gt;body = $body;<br>$t-&gt;display();<br><br>display() more or less looks like this:<br><br>function display(){<br>&nbsp; &nbsp; extract(get_object_vars($this),EXTR_REFS);<br>&nbsp; &nbsp; ob_start(); include $this-&gt;templateFileName;<br>&nbsp; &nbsp; return ob_get_clean();<br>}<br><br>If any of the assigned values are null (let's say that in this case $title wasn't initialized above) it causes the engine to do all sorts of incredibly whacky stuff like certifiably lose track of variables in an incredibly inconsistent way. I traced the problem down to the fact that it's using the EXTR_REFS flag. I assume that in PHP's internal variable storage or reference counting mechanism, that trying to extract null references makes it lose track or count of something or rather.<br><br>In a nutshell, if you start getting wierd behavior when using extract() make sure that the array or object you are trying to get variables out of doesn't contain null keys or values!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69323">  
  <a class="name">
  <strong class="user"><em>ktwombley at gmail dot com</em></strong></a><div class="date" title="2006-08-31 10:05"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69323">
<div class="phpcode"><code><span class="html">
It's really easy to open gaping security holes using extract() on $_REQUEST, $_GET, etc. You have to be really sure of what you're doing, and use the proper flags on extract() to avoid clobbering important variables.<br><br>For instance, the submission by kake26 at gmail dot com will not only perfectly emulate register globals (that's bad), but it'll store it in a database and recall the same variables every time the script runs (essentially allowing an attacker to attack your script every time it runs via one attack). Oops!<br><br>To fix it, you'd have to get creative with flags. Maybe you could use EXTR_PREFIX_ALL instead of EXTR_OVERWRITE, for example. Of course, you should also sanitize the form elements to ensure there's no php code in them, and also to make sure any very important variables aren't in the form data. (like the classic $is_admin = true attack)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59152">  
  <a class="name">
  <strong class="user"><em>Csaba at alum dot mit dot edu</em></strong></a><div class="date" title="2005-11-27 11:41"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59152">
<div class="phpcode"><code><span class="html">
Sometimes you may want to extract only a named subset of the key/value pairs in an array.&nbsp; This keeps things more orderly and could prevent an unrelated variable from getting clobbered from an errant key.&nbsp; For example,<br><br>$things = 'unsaid';<br>$REQUEST = array(He=&gt;This, said=&gt;1, my=&gt;is, info=&gt;2, had=&gt;a,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; very=&gt;3, important=&gt;test, things=&gt;4);<br>$aVarToExtract = array(my, important, info);<br>extract (array_intersect_key ($REQUEST, array_flip($aVarToExtract)));<br><br>will extract<br>$my = 'is';<br>$important = 'test';<br>$info = 2;<br><br>but will leave certain<br>$things = 'unsaid'<br><br>Csaba Gabor from Vienna<br>NB.&nbsp; Of course the composite request coming in from a web page is in $_REQUEST.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81859">  
  <a class="name">
  <strong class="user"><em>benjaminATwebbutvecklarnaDOTse</em></strong></a><div class="date" title="2008-03-16 06:19"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81859">
<div class="phpcode"><code><span class="html">
Re: anon at anon dot org, about extract() and null values<br><br>Personally I've found use extracting multiple resultsets from db where the latter would overwrite the previous when a variable is not null ( and optionally if its not &gt;0 )<br><br>It would be useful if $extract_type was extended on top of these two:<br><br>EXTR_OVERWRITE<br>EXTR_SKIP<br><br>with something like this:<br><br>EXTR_OVERWRITE_NULL <br> - If there is a collision, overwrite the existing variable if it is null <br><br>EXTR_OVERWRITE_0<br> - Same thing but == 0 or null<br><br>EXTR_SKIP_NULL<br> - If there is a collision, skip the new variable if the existing is not null<br><br>EXTR_SKIP_0<br> - Same thing but == 0 or null<br><br>Those ought to cover a few good cases that aren't covered now.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112165">  
  <a class="name">
  <strong class="user"><em>FredLawl</em></strong></a><div class="date" title="2013-05-13 02:56"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112165">
<div class="phpcode"><code><span class="html">
It is possible to use this as a way to create public attributes for a class.<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Foo </span><span class="keyword">{<br><br>&nbsp; public function </span><span class="default">__construct </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">EXTR_REFS</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">= $</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Do: $this-&gt;key = $key; if $key is not a string.<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br><br>&nbsp; }<br><br>}<br><br></span><span class="default">$array </span><span class="keyword">= array(<br>&nbsp; &nbsp; </span><span class="string">'valueOne'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Test Value 1'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'valueTwo'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Test Value 2'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'valueThree'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Test Value 3'<br></span><span class="keyword">);<br><br></span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br><br></span><span class="comment">// Works<br></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">valueOne</span><span class="keyword">; </span><span class="comment">// Test Value 1<br></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">valueTwo</span><span class="keyword">; </span><span class="comment">// Test Value 2<br><br>// Does not work!<br></span><span class="keyword">echo </span><span class="default">$foo</span><span class="keyword">::</span><span class="default">$valueOne</span><span class="keyword">; </span><span class="comment">// Fatal error:&nbsp; Access to undeclared static property: Test::$valueOne<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96370">  
  <a class="name">
  <strong class="user"><em>auto493097 at hushmail dot com</em></strong></a><div class="date" title="2010-02-23 10:07"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96370">
<div class="phpcode"><code><span class="html">
I use XDebug with NetbeansIDE to for analyzing and developing PHP Code. When debugging an extract statement no new variables appeared in the variable's list. Although all variables created by extract could be examined by explicit watch items and single variables appeared as soon as an PHP script makes use of them I am not sure weather it is a wrong configuration, a feature or a bug in XDebug.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81805">  
  <a class="name">
  <strong class="user"><em>Hayley Watson</em></strong></a><div class="date" title="2008-03-13 03:18"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81805">
<div class="phpcode"><code><span class="html">
Dan O'Donnell's suggestion needs a third requirement to work as described:<br><br>c) No other variables are defined - especially variables that contain potentially sensitive information.<br><br>Without that condition the difference between extract() and assigning variables by hand (and the resulting security implications) should be obvious.<br><br>The only valid security step there is (b) - but you should be doing that anyway.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73852">  
  <a class="name">
  <strong class="user"><em>Dutchdavey</em></strong></a><div class="date" title="2007-03-13 12:26"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73852">
<div class="phpcode"><code><span class="html">
I would draw your attention to the user note at the very end of this page regarding PREFIXES. The user points out that php adds a '_' to your prefixes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63234">  
  <a class="name">
  <strong class="user"><em>nicolas zeh</em></strong></a><div class="date" title="2006-03-16 09:24"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63234">
<div class="phpcode"><code><span class="html">
This function provides exactly the same functionality as extract except that a parameter was added defining the extract target.<br>This function can be used if your PHP installation does not support the required Flags or more important if you would like to extract arrays to another destination as to $GLOBALS, i.e. other arrays or objects.<br>The only difference to extract is that extract_to moves the array pointer of $arr to the end as $arr is passed by reference to support the EXTR_REFS flag.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_ALL'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_ALL'</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_INVALID'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_INVALID'</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br>&nbsp; &nbsp; if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_IF_EXISTS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_IF_EXISTS'</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br>&nbsp; &nbsp; if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_IF_EXISTS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_PREFIX_IF_EXISTS'</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);<br>&nbsp; &nbsp; if( !</span><span class="default">defined</span><span class="keyword">(</span><span class="string">'EXTR_REFS'</span><span class="keyword">) ) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'EXTR_REFS'</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function </span><span class="default">extract_to</span><span class="keyword">( &amp;</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$to</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">=</span><span class="default">EXTR_OVERWRITE</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">=</span><span class="default">false </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">) ) return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): First argument should be an array"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$to </span><span class="keyword">) ) </span><span class="default">$t</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else if( </span><span class="default">is_object</span><span class="keyword">( </span><span class="default">$to </span><span class="keyword">) ) </span><span class="default">$t</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): Second argument should be an array or object"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_INVALID </span><span class="keyword">|| </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_IF_EXISTS </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$prefix</span><span class="keyword">===</span><span class="default">false </span><span class="keyword">) return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"extract_to(): Prefix expected to be specified"</span><span class="keyword">, </span><span class="default">E_USER_WARNING </span><span class="keyword">); <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$prefix </span><span class="keyword">.= </span><span class="string">'_'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$isset </span><span class="keyword">= </span><span class="default">$t</span><span class="keyword">==</span><span class="default">1 </span><span class="keyword">? isset( </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] ) : isset( </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$key </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_SKIP </span><span class="keyword">&amp;&amp; </span><span class="default">$isset </span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_IF_EXISTS </span><span class="keyword">&amp;&amp; !</span><span class="default">$isset </span><span class="keyword">) )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if( ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">&amp;&amp; </span><span class="default">$isset </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; || ( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_INVALID </span><span class="keyword">&amp;&amp; !</span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$key </span><span class="keyword">) ) )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if( </span><span class="default">$type</span><span class="keyword">==</span><span class="default">EXTR_PREFIX_IF_EXISTS </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$isset </span><span class="keyword">) </span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else continue;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( !</span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$nkey </span><span class="keyword">) ) continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$t</span><span class="keyword">==</span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$type </span><span class="keyword">&amp; </span><span class="default">EXTR_REFS </span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$nkey </span><span class="keyword">= &amp;</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$to</span><span class="keyword">-&gt;</span><span class="default">$nkey </span><span class="keyword">= </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$type </span><span class="keyword">&amp; </span><span class="default">EXTR_REFS </span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">] = &amp;</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$to</span><span class="keyword">[</span><span class="default">$nkey</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$i</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// e.g.:<br>&nbsp; &nbsp; </span><span class="default">extract_to</span><span class="keyword">( </span><span class="default">$myarray</span><span class="keyword">, </span><span class="default">$myobject</span><span class="keyword">, </span><span class="default">EXTR_IF_EXISTS </span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62727">  
  <a class="name">
  <strong class="user"><em>owk dot ch199_ph at gadz dot org</em></strong></a><div class="date" title="2006-03-08 04:21"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62727">
<div class="phpcode"><code><span class="html">
And if you want with PHP 5 an easy way to extract $V by reference, try this :<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$V </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $</span><span class="default">$k </span><span class="keyword">=&amp; </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span>It can be used to create special kind of "free args" functions that let you choose when you call them the way you send variables, and which ones. They are moreover very fast to call thanks to references :<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">free_args </span><span class="keyword">(&amp;</span><span class="default">$V</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$V </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $</span><span class="default">$k </span><span class="keyword">=&amp; </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; unset (</span><span class="default">$k</span><span class="keyword">);&nbsp; unset (</span><span class="default">$v</span><span class="keyword">);&nbsp; unset (</span><span class="default">$V</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// be careful that if you need to extract $k, $v or $V variables you should find other names for them in the lines above (ie. $__k, $__v and $__V)<br>&nbsp; &nbsp; </span><span class="keyword">}<br><br>&nbsp; &nbsp; </span><span class="default">$huge_text </span><span class="keyword">= </span><span class="string">'...'</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$a </span><span class="keyword">= array (</span><span class="string">'arg1' </span><span class="keyword">=&gt; </span><span class="string">'val1'</span><span class="keyword">, </span><span class="string">'arg2' </span><span class="keyword">=&gt; &amp;</span><span class="default">$huge_text</span><span class="keyword">); </span><span class="comment">// in this call, only $arg2 will be a true reference in the function<br>&nbsp; &nbsp; </span><span class="default">free_args </span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>Be warned that you can't write : "<span class="default">&lt;?php free_args </span><span class="keyword">(array (</span><span class="string">'arg1' </span><span class="keyword">=&gt; </span><span class="string">'val1'</span><span class="keyword">)); </span><span class="default">?&gt;</span>" because the array can't be referenced by the function, as it's not yet created when the function starts.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60946">  
  <a class="name">
  <strong class="user"><em>moslehi&lt;atsign&gt;gmail&lt;d0t&gt;c0m</em></strong></a><div class="date" title="2006-01-20 01:32"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60946">
<div class="phpcode"><code><span class="html">
Experimentally I found that calling extract() also shows the number of keys if the key is set and is not numeric ! Maybe there was a better definition than mine&nbsp; . Please have a look to this scripts :<br><br><span class="default">&lt;?PHP <br>$var</span><span class="keyword">[</span><span class="string">"i"</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br></span><span class="default">$var</span><span class="keyword">[</span><span class="string">"j"</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br></span><span class="default">$var</span><span class="keyword">[</span><span class="string">"k"</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br>echo </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">); </span><span class="comment">// returns 3<br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?PHP <br>$var2</span><span class="keyword">[</span><span class="string">"i"</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br></span><span class="default">$var2</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"b"</span><span class="keyword">;<br></span><span class="default">$var2</span><span class="keyword">[] = </span><span class="default">1</span><span class="keyword">;<br>echo </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$var2</span><span class="keyword">); </span><span class="comment">// returns 1<br></span><span class="default">?&gt;<br></span><br>(Arash Moslehi)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50955">  
  <a class="name">
  <strong class="user"><em>pg dot perfection at gmail dot com</em></strong></a><div class="date" title="2005-03-14 02:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50955">
<div class="phpcode"><code><span class="html">
Here is a little example of how an extraction method should look like when it needs to work recursive (work on nested_arrays too)...<br><br>Note that this is only an example, it can be done more easily, and more advanced too.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * A nested version of the extract () function.<br> *<br> * @param&nbsp; &nbsp; array&nbsp; &nbsp; $array&nbsp; &nbsp; &nbsp; &nbsp; The array which to extract the variables from<br> * @param&nbsp; &nbsp; int&nbsp; &nbsp; &nbsp; &nbsp; $type&nbsp; &nbsp; &nbsp; &nbsp; The type to use to overwrite (follows the same as extract () on PHP 5.0.3<br> * @param&nbsp; &nbsp; string&nbsp; &nbsp; $prefix&nbsp; &nbsp; &nbsp; &nbsp; The prefix to be used for a variable when necessary<br> */<br></span><span class="keyword">function </span><span class="default">extract_nested </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$type </span><span class="keyword">= </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">, </span><span class="default">$prefix </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; Is the array really an array?<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): First argument should be an array'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; If the prefix is set, check if the prefix matches an acceptable regex pattern <br>&nbsp; &nbsp;&nbsp; * (the one used for variables)<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">if (!empty (</span><span class="default">$prefix</span><span class="keyword">) &amp;&amp; !</span><span class="default">preg_match </span><span class="keyword">(</span><span class="string">'#^[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*$#'</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): Third argument should start with a letter or an underscore'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Check if a prefix is necessary. If so and it is empty return an error.<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">if ((</span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_SAME </span><span class="keyword">|| </span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_ALL </span><span class="keyword">|| </span><span class="default">$type </span><span class="keyword">== </span><span class="default">EXTR_PREFIX_IF_EXISTS</span><span class="keyword">) &amp;&amp; empty (</span><span class="default">$prefix</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">trigger_error </span><span class="keyword">(</span><span class="string">'extract_nested (): Prefix expected to be specified'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Make sure the prefix is oke<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="default">$prefix </span><span class="keyword">= </span><span class="default">$prefix </span><span class="keyword">. </span><span class="string">'_'</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; Loop thru the array<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *&nbsp; If the key isn't an array extract it as we need to do<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$type</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_SKIP</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] : </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_PREFIX_SAME</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_PREFIX_ALL</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_PREFIX_INVALID</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">preg_match </span><span class="keyword">(</span><span class="string">'#^[a-zA-Z_\x7f-\xff]$#'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_IF_EXISTS</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_PREFIX_IF_EXISTS</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$prefix </span><span class="keyword">. </span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">EXTR_REFS</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] =&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *&nbsp; The key is an array... use the function on that index<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">extract_nested </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50215">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-02-21 07:31"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50215">
<div class="phpcode"><code><span class="html">
To make this perfectly clear (hopefully), an underscore is always added when the string is prefixed.<br>extract(array("color" =&gt; "blue"),EXTR_PREFIX_ALL,'');// note: prefix is empty<br>is the same as<br>$color='_blue';</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47481">  
  <a class="name">
  <strong class="user"><em>Aaron Stone</em></strong></a><div class="date" title="2004-11-17 10:44"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom47481">
<div class="phpcode"><code><span class="html">
If you are working porting an older application, and taking the advice above, extracting only _SERVER, _SESSING, _COOKIE, _POST, _GET, you have forgotten to extract _FILES. Putting _FILES last and using EXTR_SKIP doesn't work because the name of the file upload box is already set as a variable containing only the temporary name of the uploaded file from one of the earlier extracts (I haven't tested to see which one specifically, however). A workaround is to put _FILES last and use EXTR_OVERWRITE. This allows extract to replace that temp-name-only variable with the full array of file upload information.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46221">  
  <a class="name">
  <strong class="user"><em>Adam Monsen &lt;adamm at wazamatta dot com&gt;</em></strong></a><div class="date" title="2004-10-02 05:03"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46221">
<div class="phpcode"><code><span class="html">
As shown in the example, if your 'prefix' is used, a single underscore is added to the name of the extracted variable. Meaning, a prefix of 'p' becomes a prefix of 'p_', so 'blarg' prefixed would be 'p_blarg'.<br><br>If you're not sure what variables you've created through extraction, you can call get_defined_vars() to see all defined variables in the current scope.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93113">  
  <a class="name">
  <strong class="user"><em>danbettles at yahoo dot co dot uk</em></strong></a><div class="date" title="2009-08-24 04:04"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93113">
<div class="phpcode"><code><span class="html">
When using EXTR_PREFIX_ALL - and probably all the other EXTR_PREFIX_* constants - and a numerically-indexed array, extract() will add an underscore ("_") between the prefix and the index.<br><br><span class="default">&lt;?php<br><br>extract</span><span class="keyword">(array(</span><span class="string">'foo'</span><span class="keyword">, </span><span class="string">'bar'</span><span class="keyword">), </span><span class="default">EXTR_PREFIX_ALL</span><span class="keyword">, </span><span class="string">'var'</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_defined_vars</span><span class="keyword">());&nbsp; </span><span class="comment">// Reveals $var_0 = 'foo' and $var_1 = 'bar'<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81862">  
  <a class="name">
  <strong class="user"><em>benjaminATwebbutvecklarnaDOTse</em></strong></a><div class="date" title="2008-03-16 07:15"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81862">
<div class="phpcode"><code><span class="html">
In the meantime, I'm using this:<br><br>// extract alternative<br># extracts variables where new value is above the threshold or if old value is on or below the threshold (or var is not defined)<br># an associative array is obviously the sane thing to pass<br>#<br># I am absolutely certain someone will find obvious problems or errors with this <br># I haven't even tried to compare other values than 0 so if you need to do that and surely finds obvious flaws, <br># please mail me, I'd really like to know. <br># benjaminATwebbutvecklarnaDOTse<br><br>// usage example:<br># thrextract(mysql_fetch_assoc(mysql_query("SELECT preset_this,preset_that FROM site_preset WHERE ID = $site_id")));<br># thrextract(mysql_fetch_assoc(mysql_query("SELECT preset_this,preset_that FROM category_preset WHERE ID = $category_id"))); <br><br>function thrextract($arr,$thr = 0){<br>&nbsp; &nbsp; foreach($arr as $key =&gt; $var){<br>&nbsp; &nbsp; &nbsp; &nbsp; global $$key;<br>&nbsp; &nbsp; &nbsp; &nbsp; if($var &gt; $thr or $$key &lt;= $thr) $$key = $var;<br>&nbsp; &nbsp; }<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98446">  
  <a class="name">
  <strong class="user"><em>Rodrigo</em></strong></a><div class="date" title="2010-06-15 09:41"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98446">
<div class="phpcode"><code><span class="html">
Here's a way to use extract in $_FILES arrays without using register_gloabals on.<br><br>I started to use extract a few weeks ago, and my codes hasn't been so clean since then. The use of the arrays $_POST and $_GET is ok, but one missed doublequote causes a lot of trouble. <br><br>Besides I teach PHP in a school, and this function has made my examples easier.<br><br><span class="default">&lt;?php<br></span><span class="keyword">if(isset(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"file"</span><span class="keyword">])){<br>&nbsp; &nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">extract</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="default">$name</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="default">$tmp_name</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="default">$size</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "<a rel="nofollow" target="_blank">http://www.w3.org/TR/html4/loose.dtd</a>"&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;title&gt;Documento sin t&amp;iacute;tulo&lt;/title&gt;<br>&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>&lt;form action="" method="post" enctype="multipart/form-data" name="form1"&gt;<br>&nbsp; &lt;p&gt;<br>&nbsp; &nbsp; &lt;input type="file" name="file"&gt;<br>&lt;/p&gt;<br>&nbsp; &lt;p&gt;<br>&nbsp; &nbsp; &lt;input type="submit" name="Submit" value="Enviar"&gt;<br>&lt;/p&gt;<br>&lt;/form&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br><br>Hope this can help anyone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52436">  
  <a class="name">
  <strong class="user"><em>kake26 at gmail dot com</em></strong></a><div class="date" title="2005-04-30 08:59"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52436">
<div class="phpcode"><code><span class="html">
The following is a neat use for extract to store and manipulate large amounts of form data from. I basically loop through the $_POST and implode it seperating the key and value pairs by a space. Then store it in a db, the reversing function basically explodes the string to a array. Then converts the indexed array to a associative array then uses extract to seal the deal and make it easily available within a program. My main reason for sharing these are the fact I make some big web applications that store allot of forum data in a DB and these functions make it very easy to quickly and easily store and recall the data. I've contributed it because I spent many hours creating this code and recall going "I wish someone had previously submitted it to the page notes". Would have saved me allot of time and agony and I'm sure I'm not the only person that could really benefit from it, so I decided to share.<br><br><span class="default">&lt;?php<br>$stack </span><span class="keyword">= array();<br>foreach (</span><span class="default">$_POST </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br></span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br>}<br></span><span class="comment">// store it<br></span><span class="default">$block </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$stack</span><span class="keyword">); </span><span class="comment">// yeilds a space delimited string<br>// insert query to store string in DB here, like the one below<br></span><span class="default">$query </span><span class="keyword">= </span><span class="string">"INSERT INTO `sometable` VALUES('"</span><span class="keyword">.</span><span class="default">$seluser</span><span class="keyword">.</span><span class="string">"','"</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$block</span><span class="keyword">).</span><span class="string">"');"</span><span class="keyword">;<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) or die(</span><span class="string">"Query failed for block insert: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">());<br></span><span class="comment">// note $seluser in my case is a user ID associated with that block<br>// in one of my web apps<br></span><span class="default">?&gt;<br></span><br>The nice thing is with the above we can quickly create a string of key and value pairs from the data the script got. Without really caring what their names are. You know how if register globals are on you say $someformvar rather than $_POST["someformvar"]; , basically the code below reads this previous created block returns it to that state. Sort of like presistant register globals.<br><br><span class="default">&lt;?php<br></span><span class="comment">// insert query to grab the previously stored string here<br></span><span class="default">$query </span><span class="keyword">= </span><span class="string">"SELECT * FROM `sometable` WHERE `blockid` = '"</span><span class="keyword">.</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$bid</span><span class="keyword">).</span><span class="string">"';"</span><span class="keyword">;<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">) or die(</span><span class="string">"Query failed read: " </span><span class="keyword">. </span><span class="default">mysql_error</span><span class="keyword">());<br></span><span class="default">$sql </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">MYSQL_ASSOC</span><span class="keyword">);<br></span><span class="default">$array </span><span class="keyword">= </span><span class="default">eplode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$sql</span><span class="keyword">[</span><span class="string">"data"</span><span class="keyword">]); <br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">) { <br></span><span class="default">$myassoc</span><span class="keyword">[</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">])?</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]:</span><span class="default">NULL</span><span class="keyword">; <br>}<br></span><span class="default">extract</span><span class="keyword">(</span><span class="default">$myassoc</span><span class="keyword">, </span><span class="default">EXTR_OVERWRITE</span><span class="keyword">);<br></span><span class="comment">// now you're key and value pairs from $_POST have been restored<br>// instead of $_POST<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.extract.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:50 GMT -->


</body></html>