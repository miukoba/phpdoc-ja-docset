<html><!-- Mirrored from php.net/manual/en/function.strpos.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:35 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>strpos</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.strpos.html">
 <link rel="shorturl" href="http://php.net/strpos">
 <link rel="alternate" href="http://php.net/strpos" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.strpbrk.html">
 <link rel="next" href="function.strrchr.html">

 <link rel="alternate" href="function.strpos.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.strpos.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.strpos.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.strpos.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.strpos.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.strpos.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.strpos.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.strpos.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.strpos.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.strpos.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.strpos.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.strpos" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strpos</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strpos</span> â€” <span class="dc-title">Find the position of the first occurrence of a substring in a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strpos-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>strpos</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$haystack</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code><span class="initializer"> = 0</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Find the numeric position of the first occurrence of
   <code class="parameter">needle</code> in the <code class="parameter">haystack</code> string.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strpos-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">haystack</code></dt>

     <dd>

      <p class="para">
       The string to search in.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">needle</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">needle</code> is not a string, it is converted
       to an integer and applied as the ordinal value of a character.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       If specified, search will start this number of characters counted from
       the beginning of the string. Unlike <span class="function"><a href="function.strrpos.html" class="function">strrpos()</a></span> and
       <span class="function"><a href="function.strripos.html" class="function">strripos()</a></span>, the offset cannot be negative.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strpos-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the position of where the needle exists relative to the beginning of
   the <code class="parameter">haystack</code> string (independent of offset).
   Also note that string positions start at 0, and not 1.
  </p>
  <p class="para">
   Returns <strong><code>FALSE</code></strong> if the needle was not found.
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This function may
return Boolean <strong><code>FALSE</code></strong>, but may also return a non-Boolean value which
evaluates to <strong><code>FALSE</code></strong>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strpos-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5013">
    <p><strong>Example #1 Using <em>===</em></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Note&nbsp;our&nbsp;use&nbsp;of&nbsp;===.&nbsp;&nbsp;Simply&nbsp;==&nbsp;would&nbsp;not&nbsp;work&nbsp;as&nbsp;expected<br>//&nbsp;because&nbsp;the&nbsp;position&nbsp;of&nbsp;'a'&nbsp;was&nbsp;the&nbsp;0th&nbsp;(first)&nbsp;character.<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;exists&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-5014">
    <p><strong>Example #2 Using !==</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;The&nbsp;!==&nbsp;operator&nbsp;can&nbsp;also&nbsp;be&nbsp;used.&nbsp;&nbsp;Using&nbsp;!=&nbsp;would&nbsp;not&nbsp;work&nbsp;as&nbsp;expected<br>//&nbsp;because&nbsp;the&nbsp;position&nbsp;of&nbsp;'a'&nbsp;is&nbsp;0.&nbsp;The&nbsp;statement&nbsp;(0&nbsp;!=&nbsp;false)&nbsp;evaluates&nbsp;<br>//&nbsp;to&nbsp;false.<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;exists&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;string&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;was&nbsp;not&nbsp;found&nbsp;in&nbsp;the&nbsp;string&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-5015">
    <p><strong>Example #3 Using an offset</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;We&nbsp;can&nbsp;search&nbsp;for&nbsp;the&nbsp;character,&nbsp;ignoring&nbsp;anything&nbsp;before&nbsp;the&nbsp;offset<br></span><span style="color: #0000BB">$newstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdef&nbsp;abcdef'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$newstring</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$pos&nbsp;=&nbsp;7,&nbsp;not&nbsp;0<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strpos-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This function is
binary-safe.</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strpos-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.stripos.html" class="function" rel="rdfs-seeAlso">stripos()</a> - Find the position of the first occurrence of a case-insensitive substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.strrpos.html" class="function" rel="rdfs-seeAlso">strrpos()</a> - Find the position of the last occurrence of a substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.strripos.html" class="function" rel="rdfs-seeAlso">strripos()</a> - Find the position of the last occurrence of a case-insensitive substring in a string</span></li>
    <li class="member"><span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - Find the first occurrence of a string</span></li>
    <li class="member"><span class="function"><a href="function.strpbrk.html" class="function" rel="rdfs-seeAlso">strpbrk()</a> - Search a string for any of a set of characters</span></li>
    <li class="member"><span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - Return part of a string</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - Perform a regular expression match</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="80363">  
  <a class="name">
  <strong class="user"><em>Suggested re-write for pink WARNING box</em></strong></a><div class="date" title="2008-01-11 03:45"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80363">
<div class="phpcode"><code><span class="html">
WARNING<br><br>As strpos may return either FALSE (substring absent) or 0 (substring at start of string), strict versus loose equivalency operators must be used very carefully.<br><br>To know that a substring is absent, you must use:&nbsp; <br><br>=== FALSE<br><br>To know that a substring is present (in any position including 0), you can use either of:<br><br>!== FALSE&nbsp; (recommended)<br> &gt; -1&nbsp; (note: or greater than any negative number)<br><br>To know that a substring is at the start of the string, you must use:&nbsp; <br><br>=== 0<br><br>To know that a substring is in any position other than the start, you can use any of: <br><br> &gt; 0&nbsp; (recommended)<br>!= 0&nbsp; (note: but not !== 0 which also equates to FALSE)<br>!= FALSE&nbsp; (disrecommended as highly confusing)<br><br>Also note that you cannot compare a value of "" to the returned value of strpos. With a loose equivalence operator (== or !=) it will return results which don't distinguish between the substring's presence versus position. With a strict equivalence operator (=== or !==) it will always return false.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111422">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-02-18 09:55"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111422">
<div class="phpcode"><code><span class="html">
The most straightforward way to prevent this function from returning 0 is:<br><br>&nbsp; strpos('x'.$haystack, $needle, 1)<br><br>The 'x' is simply a garbage character which is only there to move everything 1 position.<br>The number 1 is there to make sure that this 'x' is ignored in the search.<br>This way, if $haystack starts with $needle, then the function returns 1 (rather than 0).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89788">  
  <a class="name">
  <strong class="user"><em>teddanzig at yahoo dot com</em></strong></a><div class="date" title="2009-03-23 09:48"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89788">
<div class="phpcode"><code><span class="html">
routine to return -1 if there is no match for strpos
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//instr function to mimic vb instr fucntion
<br></span><span class="keyword">function </span><span class="default">InStr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$pos</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94469">  
  <a class="name">
  <strong class="user"><em>Achintya</em></strong></a><div class="date" title="2009-11-06 02:03"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94469">
<div class="phpcode"><code><span class="html">
A function I made to find the first occurrence of a particular needle not enclosed in quotes(single or double). Works for simple nesting (no backslashed nesting allowed).
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">strposq</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$charlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$flag1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$flag2 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"'"</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$flag1 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'"'</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$flag2 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$charlen</span><span class="keyword">) == </span><span class="default">$needle </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$i</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>}
<br>
<br>echo </span><span class="default">strposq</span><span class="keyword">(</span><span class="string">"he'llo'character;\"'som\"e;crap"</span><span class="keyword">, </span><span class="string">";"</span><span class="keyword">); </span><span class="comment">//16
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102773">  
  <a class="name">
  <strong class="user"><em>akarmenia at gmail dot com</em></strong></a><div class="date" title="2011-03-05 04:44"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102773">
<div class="phpcode"><code><span class="html">
My version of strpos with needles as an array. Also allows for a string, or an array inside an array.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">) {<br>&nbsp; &nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$str</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">// Test<br></span><span class="keyword">echo </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="string">'This is a test'</span><span class="keyword">, array(</span><span class="string">'test'</span><span class="keyword">, </span><span class="string">'drive'</span><span class="keyword">)); </span><span class="comment">// Output is 10<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93816">  
  <a class="name">
  <strong class="user"><em>digitalpbk [at] gmail.com</em></strong></a><div class="date" title="2009-09-30 08:37"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93816">
<div class="phpcode"><code><span class="html">
This function raises a warning if the offset is not between 0 and the length of string:
<br>
<br>Warning: strpos(): Offset not contained in string in %s on line %d</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107678">  
  <a class="name">
  <strong class="user"><em>martijn at martijnfrazer dot nl</em></strong></a><div class="date" title="2012-02-25 03:58"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107678">
<div class="phpcode"><code><span class="html">
This is a function I wrote to find all occurrences of a string, using strpos recursively.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$results </span><span class="keyword">= array()) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br>&nbsp; &nbsp; if(</span><span class="default">$offset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$results</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">), </span><span class="default">$results</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>This is how you use it:<br><br><span class="default">&lt;?php<br>$string </span><span class="keyword">= </span><span class="string">'This is some string'</span><span class="keyword">;<br></span><span class="default">$search </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br></span><span class="default">$found </span><span class="keyword">= </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br><br>if(</span><span class="default">$found</span><span class="keyword">) {<br>&nbsp; &nbsp; foreach(</span><span class="default">$found </span><span class="keyword">as </span><span class="default">$pos</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'Found "'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" in string "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'" at position &lt;b&gt;'</span><span class="keyword">.</span><span class="default">$pos</span><span class="keyword">.</span><span class="string">'&lt;/b&gt;&lt;br /&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; }&nbsp; &nbsp; <br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" not found in "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70394">  
  <a class="name">
  <strong class="user"><em>spinicrus at gmail dot com</em></strong></a><div class="date" title="2006-10-14 10:58"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70394">
<div class="phpcode"><code><span class="html">
if you want to get the position of a substring relative to a substring of your string, BUT in REVERSE way:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">strpos_reverse_way</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charToFind</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">//<br>&nbsp; &nbsp; </span><span class="default">$relativePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$relativePos</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//<br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$searchChar </span><span class="keyword">!= </span><span class="default">$charToFind</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newPos </span><span class="keyword">= </span><span class="default">$searchPos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$newPos</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$charToFind</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$newPos</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">//<br>&nbsp; &nbsp; </span><span class="keyword">if (!empty(</span><span class="default">$searchChar</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$searchPos</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">//<br></span><span class="keyword">}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58688">  
  <a class="name">
  <strong class="user"><em>dale at ucsc dot edu</em></strong></a><div class="date" title="2005-11-11 02:28"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58688">
<div class="phpcode"><code><span class="html">
if you want need a fast function to find the first occurrence of any ch element of an needle array this function might be of use: <br><span class="default">&lt;?php<br>$eurl </span><span class="keyword">= </span><span class="default">strpos_needle_array</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, array(</span><span class="string">'"'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'\''</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">), </span><span class="default">$surl</span><span class="keyword">);<br><br>function </span><span class="default">strpos_needle_array</span><span class="keyword">(&amp; </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$needle_ary</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){&nbsp; &nbsp; <br>&nbsp; &nbsp; for(</span><span class="default">$ch_pos</span><span class="keyword">=</span><span class="default">$offset</span><span class="keyword">;</span><span class="default">$ch_pos</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);</span><span class="default">$ch_pos</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$needle_ary</span><span class="keyword">[</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$ch_pos</span><span class="keyword">]])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ch_pos</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82229">  
  <a class="name">
  <strong class="user"><em>ilaymyhat-rem0ve at yahoo dot com</em></strong></a><div class="date" title="2008-04-01 04:17"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82229">
<div class="phpcode"><code><span class="html">
This might be useful.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">String</span><span class="keyword">{
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//Look for a $needle in $haystack in any position
<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">contains</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//intuitive implementation .. if not found returns -1.
<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">strpos</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">FALSE </span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>}</span><span class="comment">//String
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45088">  
  <a class="name">
  <strong class="user"><em>philip</em></strong></a><div class="date" title="2004-08-25 03:52"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom45088">
<div class="phpcode"><code><span class="html">
Many people look for in_string which does not exist in PHP, so, here's the most efficient form of in_string() (that works in both PHP 4/5) that I can think of:
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">in_string</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$insensitive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; &nbsp; if (</span><span class="default">$insensitive</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108426">  
  <a class="name">
  <strong class="user"><em>mtroy dot student at gmail dot com</em></strong></a><div class="date" title="2012-04-25 04:46"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108426">
<div class="phpcode"><code><span class="html">
when you want to know how much of substring occurrences, you'll use "substr_count".<br>But, retrieve their positions, will be harder.<br>So, you can do it by starting with the last occurrence :<br><br>function strpos_r($haystack, $needle)<br>{<br>&nbsp; &nbsp; if(strlen($needle) &gt; strlen($haystack))<br>&nbsp; &nbsp; &nbsp; &nbsp; trigger_error(sprintf("%s: length of argument 2 must be &lt;= argument 1", __FUNCTION__), E_USER_WARNING);<br><br>&nbsp; &nbsp; $seeks = array();<br>&nbsp; &nbsp; while($seek = strrpos($haystack, $needle))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; array_push($seeks, $seek);<br>&nbsp; &nbsp; &nbsp; &nbsp; $haystack = substr($haystack, 0, $seek);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return $seeks;<br>}<br><br>it will return an array of all occurrences a the substring in the string<br><br>Example : <br><br>$test = "this is a test for testing a test function... blah blah";<br>var_dump(strpos_r($test, "test"));<br><br>// output <br><br>array(3) {<br>&nbsp; [0]=&gt;<br>&nbsp; int(29)<br>&nbsp; [1]=&gt;<br>&nbsp; int(19)<br>&nbsp; [2]=&gt;<br>&nbsp; int(10)<br>}<br><br>Paul-antoine<br>MalÃ©zieux.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87061">  
  <a class="name">
  <strong class="user"><em>Tim</em></strong></a><div class="date" title="2008-11-17 05:52"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87061">
<div class="phpcode"><code><span class="html">
If you would like to find all occurences of a needle inside a haystack you could use this function strposall($haystack,$needle);. It will return an array with all the strpos's.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * strposall
<br> * 
<br> * Find all occurrences of a needle in a haystack
<br> *
<br> * @param string $haystack
<br> * @param string $needle
<br> * @return array or false
<br> */
<br></span><span class="keyword">function </span><span class="default">strposall</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">){
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$s</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; while (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)){
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)) { 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aStrPos</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">); 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if (isset(</span><span class="default">$aStrPos</span><span class="keyword">)) { 
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$aStrPos</span><span class="keyword">; 
<br>&nbsp; &nbsp; } 
<br>&nbsp; &nbsp; else { 
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">; 
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49739">  
  <a class="name">
  <strong class="user"><em>arias at elleondeoro dot com</em></strong></a><div class="date" title="2005-02-07 06:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49739">
<div class="phpcode"><code><span class="html">
If you want to get all positions in an array, you can use this function. If the optional parameter count is especified, the function will put there the number of matches.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {
<br>&nbsp; if (</span><span class="default">$offset </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"strallpos(): Offset not contained in string."</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$match </span><span class="keyword">= array();
<br>&nbsp; for (</span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; ((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">); </span><span class="default">$count</span><span class="keyword">++) {
<br>&nbsp; &nbsp; </span><span class="default">$match</span><span class="keyword">[] = </span><span class="default">$pos</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$aguja</span><span class="keyword">);
<br>&nbsp; }
<br>&nbsp; return </span><span class="default">$match</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96926">  
  <a class="name">
  <strong class="user"><em>olmstead31 at yahoo dot com</em></strong></a><div class="date" title="2010-03-23 07:48"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96926">
<div class="phpcode"><code><span class="html">
I found that whatever I was using as a test with strpos it came out false exept if $pos was == 1<br><br>I figured it gives me a numeric value if found else it is null or false<br>here is what i did to make my code work:<br><br><span class="default">&lt;?php<br></span><span class="comment">//EXAMPLE 1:<br></span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',64,68,70,'</span><span class="keyword">;<br></span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br></span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 0<br></span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br> </span><span class="comment">//code here<br></span><span class="keyword">}else{<br>&nbsp; </span><span class="comment">//else code here<br></span><span class="keyword">}<br><br></span><span class="comment">//EXAMPLE 2:<br></span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,64,'</span><span class="keyword">;<br></span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br></span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 6<br></span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br> </span><span class="comment">//code here<br></span><span class="keyword">}else{<br>&nbsp; </span><span class="comment">//else code here<br></span><span class="keyword">}<br><br></span><span class="comment">//EXAMPLE 3:<br></span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,'</span><span class="keyword">;<br></span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br></span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to NULL or FALSE<br></span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br> </span><span class="comment">//code here<br></span><span class="keyword">}else{<br>&nbsp; </span><span class="comment">//else code here<br></span><span class="keyword">}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93887">  
  <a class="name">
  <strong class="user"><em>yasindagli at gmail dot com</em></strong></a><div class="date" title="2009-10-05 09:05"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93887">
<div class="phpcode"><code><span class="html">
This function finds postion of nth occurence of a letter starting from offset.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">nth_position</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$letter</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$str_arr </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$letter_size </span><span class="keyword">= </span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)));<br>&nbsp; &nbsp; if( !isset(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; } else if(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">] &lt; </span><span class="default">$n</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist ' </span><span class="keyword">. </span><span class="default">$n </span><span class="keyword">.</span><span class="string">' times in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$str_arr</span><span class="keyword">) - </span><span class="default">$offset</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$str_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$letter</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br>}<br><br>echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">//7<br></span><span class="keyword">echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="comment">//6<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92849">  
  <a class="name">
  <strong class="user"><em>ah dot d at hotmail dot com</em></strong></a><div class="date" title="2009-08-11 01:29"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92849">
<div class="phpcode"><code><span class="html">
A strpos modification to return an array of all the positions of a needle in the haystack 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();
<br>&nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">=&nbsp; </span><span class="default">$pos</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$offset </span><span class="keyword">&gt;= </span><span class="default">$i</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>example:-
<br>
<br><span class="default">&lt;?php
<br>$haystack </span><span class="keyword">= </span><span class="string">"ASD is trying to get out of the ASDs cube but the other ASDs told him that his behavior will destroy the ASDs world"</span><span class="keyword">;
<br>
<br></span><span class="default">$needle </span><span class="keyword">= </span><span class="string">"ASD"</span><span class="keyword">;
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">));
<br>
<br></span><span class="comment">//getting all the positions starting from a specified position
<br>
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">34</span><span class="keyword">));
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75146">  
  <a class="name">
  <strong class="user"><em>user at nomail dot com</em></strong></a><div class="date" title="2007-05-15 02:21"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75146">
<div class="phpcode"><code><span class="html">
This is a bit more useful when scanning a large string for all occurances between 'tags'.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getStrsBetween</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">/*====================================================================<br>&nbsp; &nbsp; Function to scan a string for items encapsulated within a pair of tags<br><br>&nbsp; &nbsp; getStrsBetween(string, tag1, &lt;tag2&gt;, &lt;offset&gt;<br><br>&nbsp; &nbsp; If no second tag is specified, then match between identical tags<br><br>&nbsp; &nbsp; Returns an array indexed with the encapsulated text, which is in turn<br>&nbsp; &nbsp; a sub-array, containing the position of each item.<br><br>&nbsp; &nbsp; Notes:<br>&nbsp; &nbsp; strpos($needle,$haystack,$offset)<br>&nbsp; &nbsp; substr($string,$start,$length)<br><br>&nbsp; &nbsp; ====================================================================*/<br><br>&nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">$s2 </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">) { </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$s1</span><span class="keyword">; }<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$L1 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$L2 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">);<br><br>&nbsp; &nbsp; if( </span><span class="default">$L1</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">|| </span><span class="default">$L2</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; do {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos1 </span><span class="keyword">+= </span><span class="default">$L1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key_len </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this_key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">,</span><span class="default">$key_len</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( !</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$this_key</span><span class="keyword">,</span><span class="default">$result</span><span class="keyword">) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">][] = </span><span class="default">$pos1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">$L2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } while(</span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">);<br><br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87868">  
  <a class="name">
  <strong class="user"><em>jburns131 at jbwebware dot com</em></strong></a><div class="date" title="2008-12-27 04:48"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87868">
<div class="phpcode"><code><span class="html">
The Situation:<br><br>I wanted to return TRUE if strpos returned position 0, and only position 0, without the added overhead of preg_match.<br><br>The Solution:<br><br>As PHP treats 0 (zero) as NULL, and strpos returns the int 0 (but not NULL), I used type casting and the "===" comparison operator (as it compares types) to resolve my issue.<br><br><span class="default">&lt;?php<br><br>$hayStack </span><span class="keyword">= </span><span class="string">"dbHost"</span><span class="keyword">;<br></span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br></span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br><br>if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Returns:<br>db is in position zero<br><br><span class="default">&lt;?php<br><br>$hayStack </span><span class="keyword">= </span><span class="string">"another_db_host"</span><span class="keyword">;<br></span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br></span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br><br>if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>This returns:<br>db is in NOT position zero</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106407">  
  <a class="name">
  <strong class="user"><em>gjh42 - simonokewode at hotmail dot com</em></strong></a><div class="date" title="2011-11-07 07:59"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106407">
<div class="phpcode"><code><span class="html">
A pair of functions to replace every nth occurrence of a string with another string, starting at any position in the haystack. The first works on a string and the second works on a single-level array of strings, treating it as a single string for replacement purposes (any needles split over two array elements are ignored).<br><br>Can be used for formatting dynamically-generated HTML output without touching the original generator: e.g. add a newLine class tag to every third item in a floated list, starting with the fourth item.<br> <br><span class="default">&lt;?php<br></span><span class="comment">/* String Replace at Intervals&nbsp;&nbsp; by Glenn Herbert (gjh42)&nbsp; &nbsp; 2010-12-17<br> */<br> <br>//(basic locator by someone else - name unknown)<br>//strnposr() - Find the position of nth needle in haystack.<br></span><span class="keyword">function </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$occurrence</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; return (</span><span class="default">$occurrence</span><span class="keyword">&lt;</span><span class="default">2</span><span class="keyword">)?</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">):</span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$occurrence</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br>}<br><br></span><span class="comment">//gjh42<br>//replace every nth occurrence of $needle with $repl, starting from any position<br></span><span class="keyword">function </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; if (</span><span class="default">$pos </span><span class="keyword">&gt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) or </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) &lt; </span><span class="default">$first</span><span class="keyword">) return </span><span class="default">$haystack</span><span class="keyword">;<br>&nbsp; </span><span class="default">$firstpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br>&nbsp; </span><span class="default">$nl </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; </span><span class="default">$qty </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$firstpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)/</span><span class="default">$interval</span><span class="keyword">);<br>&nbsp; do { </span><span class="comment">//in reverse order<br>&nbsp; &nbsp; </span><span class="default">$nextpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$qty </span><span class="keyword">* </span><span class="default">$interval</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$firstpos</span><span class="keyword">); <br>&nbsp; &nbsp; </span><span class="default">$qty</span><span class="keyword">--;<br>&nbsp; &nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$nextpos</span><span class="keyword">, </span><span class="default">$nl</span><span class="keyword">);<br>&nbsp; } while (</span><span class="default">$nextpos </span><span class="keyword">&gt; </span><span class="default">$firstpos</span><span class="keyword">);<br>&nbsp; return </span><span class="default">$haystack</span><span class="keyword">;<br>}<br>&nbsp; </span><span class="comment">//$needle = string to find<br>&nbsp; //$repl = string to replace needle<br>&nbsp; //$haystack = string to do replacing in<br>&nbsp; //$interval = number of needles in loop<br>&nbsp; //$first=1 = first occurrence of needle to replace (defaults to first) <br>&nbsp; //$pos=0 = position in haystack string to start from (defaults to first) <br> <br>//replace every nth occurrence of $needle with $repl, starting from any position, in a single-level array<br></span><span class="keyword">function </span><span class="default">arr_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$glue</span><span class="keyword">=</span><span class="string">'|+|'</span><span class="keyword">) {<br>&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) return </span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br>&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br>&nbsp; </span><span class="default">$tarr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br>&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$tarr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; }<br>&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>If $arr is not an array, or a multilevel array, it is returned unchanged.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41762">  
  <a class="name">
  <strong class="user"><em>bishop</em></strong></a><div class="date" title="2004-04-21 03:38"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41762">
<div class="phpcode"><code><span class="html">
Code like this:<br><span class="default">&lt;?php<br></span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"found it"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>gets repetitive, is not very self-explanatory, and most people handle it incorrectly anyway. Make your life easier:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$ignoreCase </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">$ignoreCase</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; &nbsp; return (</span><span class="default">$needlePos </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">? </span><span class="default">false </span><span class="keyword">: (</span><span class="default">$needlePos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>Then, you may do:<br><span class="default">&lt;?php<br></span><span class="comment">// simplest use<br></span><span class="keyword">if (</span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"Found it"</span><span class="keyword">;<br>}<br><br></span><span class="comment">// when you need the position, as well whether it's present<br></span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">);<br>if (</span><span class="default">$needlePos</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br>}<br><br></span><span class="comment">// you may also ignore case<br></span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'IS'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>if (</span><span class="default">$needlePos</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115284">  
  <a class="name">
  <strong class="user"><em>ohcc at 163 dot com</em></strong></a><div class="date" title="2014-06-27 10:52"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115284">
<div class="phpcode"><code><span class="html">
Be careful when the $haystack or $needle parameter is an integer.<br>If you are not sure of its type, you should&nbsp; convert it into a string.<br><span class="default">&lt;?php<br>&nbsp; &nbsp; var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">12345</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));</span><span class="comment">//false<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'12345'</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">));</span><span class="comment">//0<br>&nbsp; &nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">12345</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">)));</span><span class="comment">//0<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">strpos</span><span class="keyword">((string)</span><span class="default">$a</span><span class="keyword">,(string)</span><span class="default">$b</span><span class="keyword">));</span><span class="comment">//0&nbsp; &nbsp; <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115177">  
  <a class="name">
  <strong class="user"><em>andrew dot macrobert+php at gmail dot com</em></strong></a><div class="date" title="2014-06-09 08:30"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115177">
<div class="phpcode"><code><span class="html">
This function finds ALL occurrences of a substring, returning an array of indexes referring to the start of each occurrence. Overlapping subtrings are not included.<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strpos_all</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$instances </span><span class="keyword">= array();<br><br>&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; while((</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$instances</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; }<br><br>&nbsp; return </span><span class="default">$instances</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115404">  
  <a class="name">
  <strong class="user"><em>Andres</em></strong></a><div class="date" title="2014-07-18 08:30"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom115404">
<div class="phpcode"><code><span class="html">
strpos: Want to find lines in text file, NOT beginning with a comment (// for example)?<br>That way it Works:<br>$komm=strpos($var,'//');<br>if($komm === FALSE || $komm == TRUE){}<br><br>Generally, it is a nonsense. Why 'strpos' cant ALWAYS output an integer?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115135">  
  <a class="name">
  <strong class="user"><em>mail at nikha dot org</em></strong></a><div class="date" title="2014-06-02 09:20"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115135">
<div class="phpcode"><code><span class="html">
What the manual says about "if $needle is not a string" is confusing.<br><br>in fact, strpos() compares strings, and nothing else. <br><br>Example:<br>$haystack = "123456789";<br><br>$needle = 2;<br>strpos($haystack, $needle) returns boolean false<br>$needle = "2";<br>strpos($haystack, $needle) returns 1;<br><br>My real life problem were timestamps. I had a list of timestamps like this: "!&lt;timestamp0&gt;!&lt;timestamp1&gt;!&lt;timestamp2&gt;..." Then I tried to find out, wheter an actualy by "mktime()" generated timestamp is found in this list or not. But strpos() returned always boolean 0, because mktime() results are integers.<br><br>It worked only like this: <br>strpos($timestamp_list, strval($mktime_result))<br> <br>may be helpfull for others...<br>Niklaus</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114716">  
  <a class="name">
  <strong class="user"><em>binodluitel at hotmail dot com</em></strong></a><div class="date" title="2014-03-27 04:26"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114716">
<div class="phpcode"><code><span class="html">
This function will return 0 if the string that you are searching matches i.e. needle matches the haystack<br><br>{code}<br>echo strpos('bla', 'bla');<br>{code}<br><br>Output: 0</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114687">  
  <a class="name">
  <strong class="user"><em>m at binh dot vn</em></strong></a><div class="date" title="2014-03-22 09:04"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114687">
<div class="phpcode"><code><span class="html">
Using strpos can be tricky sometimes. To reuse it for one search you can use this form:<br><br><span class="default">&lt;?php<br>$found </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>For example:<br><br><span class="default">&lt;?php<br>$url </span><span class="keyword">= </span><span class="string">"<a rel="nofollow" target="_blank">http://www.binh.vn</a>"</span><span class="keyword">;<br></span><span class="default">$found </span><span class="keyword">= (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="string">'http'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br>if (</span><span class="default">$found</span><span class="keyword">) echo </span><span class="string">"Found http"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Clearly we see that the position will be 0 but the $found will be true and so we can use more than one time of if ($found) which is much easier.<br><br>To further reuse it we could make a very short function:<br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">found</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br>&nbsp; return (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Wonder why php didn't have such function for easier use?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113929">  
  <a class="name">
  <strong class="user"><em>harshitpatelrock25 at gmail dot com</em></strong></a><div class="date" title="2013-12-18 10:29"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom113929">
<div class="phpcode"><code><span class="html">
TO find the position specific word in a para:-<br><br><span class="default">&lt;?php<br>&nbsp; $String </span><span class="keyword">= </span><span class="string">'This is the php language And is Used to develop web programs'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$find </span><span class="keyword">= </span><span class="string">'1232'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$find_leg </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">);<br>&nbsp; </span><span class="default">$start_pos </span><span class="keyword">= </span><span class="default">00</span><span class="keyword">;<br>&nbsp; <br>&nbsp; while(</span><span class="default">$string_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">,</span><span class="default">$find</span><span class="keyword">,</span><span class="default">$start_pos</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;strong&gt; \" </span><span class="default">$find</span><span class="string"> \" &lt;/strong&gt; was found on position : </span><span class="default">$string_pos</span><span class="string"> &lt;br&gt;" </span><span class="keyword">;<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$start_pos </span><span class="keyword">= </span><span class="default">$string_pos </span><span class="keyword">+ </span><span class="default">$find_leg</span><span class="keyword">;<br>&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113911">  
  <a class="name">
  <strong class="user"><em>Lurvik</em></strong></a><div class="date" title="2013-12-16 07:02"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom113911">
<div class="phpcode"><code><span class="html">
Don't know if already posted this, but if I did this is an improvement.<br><br>This function will check if a string contains&nbsp; a needle. It _will_ work with arrays and multidimensional arrays (I've tried with a &gt; 16 dimensional array and had no problem).<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//If needles is an array<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//go trough all the elements<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$needle</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//if the needle is also an array (ie needles is a multidimensional array)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//call this function again<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Will break out of loop and function.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//when the needle is NOT an array:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Check if haystack contains the needle, will ignore case and check for whole words only<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\b</span><span class="default">$needle</span><span class="string">\b/i"</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) !== </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">//if $needles is not an array...<br>&nbsp; &nbsp; </span><span class="keyword">else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/\b</span><span class="default">$needles</span><span class="string">\b/i"</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">) !== </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113900">  
  <a class="name">
  <strong class="user"><em>kiipa at live dot com</em></strong></a><div class="date" title="2013-12-15 02:22"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom113900">
<div class="phpcode"><code><span class="html">
So I needed a function to check if a string contains a string. But that also works with arrays. And multidimensional arrays.<br><br>Well commented, because I'm sharing the source I use this in.<br><br><span class="default">&lt;?php<br></span><span class="keyword">private static </span><span class="default">$found</span><span class="keyword">;<br></span><span class="comment">//Sees if a string contains another string, WORKS WITH 2D ARRAYS! Returns true or false.<br></span><span class="keyword">public static function </span><span class="default">strcont</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//If needles is an array<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//go trough all the elements<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$needle</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//if the needle is also an array (ie needles is a multidimensional array)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//call this function again<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">static::</span><span class="default">strcont</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//when the needle is NOT an array:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Set the bool to true (DO NOT CHANGE TO return true). IT WILL NOT WORK!<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">static::</span><span class="default">$found </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Because we only set the bool if we found something we'll check if the bool is set.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(isset(static::</span><span class="default">$found</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Then return true.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">//If the needles is not an array (this function can be used as strpos...)<br>&nbsp; &nbsp; </span><span class="keyword">else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">falsE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}&nbsp; &nbsp; <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107240">  
  <a class="name">
  <strong class="user"><em>rjeggens at ijskoud dot org</em></strong></a><div class="date" title="2012-01-24 07:38"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107240">
<div class="phpcode"><code><span class="html">
I lost an hour before I noticed that strpos only returns FALSE as a boolean, never TRUE.. This means that<br><br>strpos() !== false <br><br>is a different beast then:<br><br>strpos() === true<br><br>since the latter will never be true. After I found out, The warning in the documentation made a lot more sense.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105984">  
  <a class="name">
  <strong class="user"><em>jim at terrys dot net</em></strong></a><div class="date" title="2011-09-29 11:53"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105984">
<div class="phpcode"><code><span class="html">
strpos that accepts an array for $needle
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// strpos that takes an array of values to match against a string
<br>// note the stupid argument order (to match strpos)
<br></span><span class="keyword">function </span><span class="default">strpos_arr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {
<br>&nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) </span><span class="default">$needle </span><span class="keyword">= array(</span><span class="default">$needle</span><span class="keyword">);
<br>&nbsp; &nbsp; foreach(</span><span class="default">$needle </span><span class="keyword">as </span><span class="default">$what</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$what</span><span class="keyword">))!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$pos</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99440">  
  <a class="name">
  <strong class="user"><em>gambajaja at yahoo dot com</em></strong></a><div class="date" title="2010-08-17 03:25"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99440">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>$my_array </span><span class="keyword">= array (</span><span class="string">'100,101'</span><span class="keyword">, </span><span class="string">'200,201'</span><span class="keyword">, </span><span class="string">'300,301'</span><span class="keyword">);<br></span><span class="default">$check_me_in </span><span class="keyword">= array (</span><span class="string">'100'</span><span class="keyword">,</span><span class="string">'200'</span><span class="keyword">,</span><span class="string">'300'</span><span class="keyword">,</span><span class="string">'400'</span><span class="keyword">);<br>foreach (</span><span class="default">$check_me_in </span><span class="keyword">as </span><span class="default">$value_cmi</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">; </span><span class="comment">#asume that $check_me_in isn't in $my_array<br>&nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$my_array </span><span class="keyword">as </span><span class="default">$value_my</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value_my</span><span class="keyword">, </span><span class="default">$value_cmi</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">TRUE</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value_my2</span><span class="keyword">=</span><span class="default">$value_my</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$is_in</span><span class="keyword">) echo </span><span class="string">"ID </span><span class="default">$value_cmi</span><span class="string"> in \$check_me_in I found in value '</span><span class="default">$value_my2</span><span class="string">' \n"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>The above example will output<br>ID 100 in $check_me_in I found in value '100,101' <br>ID 200 in $check_me_in I found in value '200,201' <br>ID 300 in $check_me_in I found in value '300,301'</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99332">  
  <a class="name">
  <strong class="user"><em>usulaco at gmail dot com</em></strong></a><div class="date" title="2010-08-11 05:04"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99332">
<div class="phpcode"><code><span class="html">
Parse strings between two others in to array.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">g</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">){
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/' </span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">) . </span><span class="string">'(.*?)'</span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">).</span><span class="string">'/i'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= array();
<br>
<br>&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'::'</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]]))
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]][] = </span><span class="default">$type</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp;&nbsp; }
<br>&nbsp; return </span><span class="default">$out</span><span class="keyword">;
<br>}
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">g</span><span class="keyword">(</span><span class="string">'Sample text, [/text to extract/] Rest of sample text [/WEB::<a rel="nofollow" target="_blank">http://google.com/]</a> bla bla bla. '</span><span class="keyword">,</span><span class="string">'[/'</span><span class="keyword">,</span><span class="string">'/]'</span><span class="keyword">));
<br></span><span class="default">?&gt;
<br></span>
<br>results:
<br>Array
<br>(
<br>&nbsp; &nbsp; [0] =&gt; text to extract
<br>&nbsp; &nbsp; [WEB] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; <a rel="nofollow" target="_blank">http://google.com</a>
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>)
<br>
<br>Can be helpfull to custom parsing :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85835">  
  <a class="name">
  <strong class="user"><em>mickRacky</em></strong></a><div class="date" title="2008-09-19 11:17"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85835">
<div class="phpcode"><code><span class="html">
here's a php implementation of stdc++ string class find_first_of using strpos.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needlesAsString</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needlesAsString</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; for(</span><span class="default">$ii</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$ii</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">;</span><span class="default">$ii</span><span class="keyword">++){
<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needlesAsString</span><span class="keyword">[</span><span class="default">$ii</span><span class="keyword">], </span><span class="default">$offset</span><span class="keyword">);
<br>&nbsp; &nbsp; if( </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE&nbsp; </span><span class="keyword">&amp;&amp; </span><span class="default">$result </span><span class="keyword">&lt; </span><span class="default">$index</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;
<br>&nbsp; }
<br>&nbsp; return ( </span><span class="default">$index </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)? </span><span class="default">FALSE</span><span class="keyword">: </span><span class="default">$index</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Example:
<br><span class="default">&lt;?php
<br>$test</span><span class="keyword">=</span><span class="string">"Ralph: One of these days, Alice!!"</span><span class="keyword">;
<br></span><span class="default">$look_for</span><span class="keyword">=</span><span class="string">":!,"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// punctuation marks
<br>
<br></span><span class="default">$ss </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>while( </span><span class="default">$answer</span><span class="keyword">=</span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">,</span><span class="default">$look_for</span><span class="keyword">,</span><span class="default">$ss</span><span class="keyword">) ) {
<br>&nbsp; echo </span><span class="default">$answer </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$ss </span><span class="keyword">= </span><span class="default">$answer</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;
<br> }
<br></span><span class="default">?&gt;
<br></span>
<br>This prints out:
<br>5
<br>24
<br>31
<br>32</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83914">  
  <a class="name">
  <strong class="user"><em>paul at thiswayupdesign dot co dot uk</em></strong></a><div class="date" title="2008-06-18 03:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83914">
<div class="phpcode"><code><span class="html">
I wasn't aware of the !== operator, only the === for false. I was using this code on strpos:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">while( ! (</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; </span><span class="comment">// ...
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>This gave a false if the string was found at position 0, which is weird. 
<br>
<br>However using
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">while((</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; </span><span class="comment">// ...
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>Gives no such error and seems to work correctly</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74286">  
  <a class="name">
  <strong class="user"><em>gal_chen123 at hotmail dot co dot il</em></strong></a><div class="date" title="2007-04-03 09:57"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74286">
<div class="phpcode"><code><span class="html">
this function returns the text between 2 strings:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">get_between </span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$mid_url </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$pos_s </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$pos_e </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">);
<br>&nbsp; &nbsp; for ( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$pos_s</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) ; ( ( </span><span class="default">$i </span><span class="keyword">&lt; (</span><span class="default">$pos_e</span><span class="keyword">)) &amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) ) ; </span><span class="default">$i</span><span class="keyword">++ ) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mid_url </span><span class="keyword">.= </span><span class="default">$text</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$mid_url</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>if $s1 or $s2 are not found, $mid_url will be empty
<br>to add an offset, simply compare $pos_s to the offset, and only let it continue if the offset is smaller then $pos_s.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95875">  
  <a class="name">
  <strong class="user"><em>daevid at daevid dot com</em></strong></a><div class="date" title="2010-01-26 02:46"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95875">
<div class="phpcode"><code><span class="html">
Dan Brown and I had a discussion on the PHP list about the speed difference between the popular three string searching techniques. He wrote a simple timing test, and I adapted it further. The end result is that all three are very close and not even noticeable for sets &lt; 1M. Although, technically strpos() is about twice as fast (as the docs allude to above). Here it is for your own amusement and testing purposes.<br><br><span class="default">&lt;?php<br></span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ )<br>&nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">[] =<br></span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%04d-%02d-%02d'</span><span class="keyword">,</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0000</span><span class="keyword">,</span><span class="default">9999</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">));<br></span><span class="comment">#print_r($o);<br></span><span class="keyword">echo </span><span class="string">"array of "</span><span class="keyword">.</span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="comment">###################################################################<br></span><span class="default">$now </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0]{4,}\-/U'</span><span class="keyword">,</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br>}<br></span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'preg_match'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$now</span><span class="keyword">);<br></span><span class="comment">###################################################################<br></span><span class="default">$later </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">) == </span><span class="string">"0000"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>}<br></span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'substr'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$later</span><span class="keyword">);<br></span><span class="comment">###################################################################<br></span><span class="default">$after </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'0000'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>}<br></span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'strpos'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$after</span><span class="keyword">);<br></span><span class="comment">###################################################################<br></span><span class="default">asort</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>array of 10,000<br>Array<br>(<br>&nbsp; &nbsp; [strpos] =&gt; 0.00766682624817<br>&nbsp; &nbsp; [substr] =&gt; 0.0116670131683<br>&nbsp; &nbsp; [preg_match] =&gt; 0.0124950408936<br>)<br><br>array of 100,000<br>Array<br>(<br>&nbsp; &nbsp; [strpos] =&gt; 0.0817799568176<br>&nbsp; &nbsp; [substr] =&gt; 0.120522975922<br>&nbsp; &nbsp; [preg_match] =&gt; 0.125612974167<br>)<br><br>array of 1,000,000<br>Array<br>(<br>&nbsp; &nbsp; [strpos] =&gt; 0.805890083313<br>&nbsp; &nbsp; [substr] =&gt; 1.19799995422<br>&nbsp; &nbsp; [preg_match] =&gt; 1.25615906715<br>)<br><br>I ran out of memory with more than 1M array elements.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99476">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2010-08-19 02:50"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99476">
<div class="phpcode"><code><span class="html">
Beware the mindless "if needle is not string":
<br>
<br># php -r 'var_dump(strpos("X1234567",5));'
<br>bool(false)
<br># php -r 'var_dump(strpos("X1234567","5"));'
<br>int(5)</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.strpos.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:35 GMT -->


</body></html>