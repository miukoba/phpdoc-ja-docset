<html><!-- Mirrored from php.net/manual/en/function.mb-convert-encoding.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:57:21 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>mb_convert_encoding</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.mb-convert-encoding.html">
 <link rel="shorturl" href="http://php.net/mb-convert-encoding">
 <link rel="alternate" href="http://php.net/mb-convert-encoding" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.mbstring.html">
 <link rel="prev" href="function.mb-convert-case.html">
 <link rel="next" href="function.mb-convert-kana.html">

 <link rel="alternate" href="function.mb-convert-encoding.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.mb-convert-encoding.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.mb-convert-encoding.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.mb-convert-encoding.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.mb-convert-encoding.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.mb-convert-encoding.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.mb-convert-encoding.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.mb-convert-encoding.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.mb-convert-encoding.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.mb-convert-encoding.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.mb-convert-encoding.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.international.html">Human Language and Character Encoding Support</a></li>      <li><a href="book.mbstring.html">Multibyte String</a></li>      <li><a href="ref.mbstring.html">Multibyte String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.mb-convert-encoding" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mb_convert_encoding</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5)</p><p class="refpurpose"><span class="refname">mb_convert_encoding</span> — <span class="dc-title">Convert character encoding</span></p>

 </div>
   
 <div class="refsect1 description" id="refsect1-function.mb-convert-encoding-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>mb_convert_encoding</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$to_encoding</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$from_encoding</code><span class="initializer"> = mb_internal_encoding()</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Converts the character encoding of <span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">str</code>
   to <code class="parameter">to_encoding</code>
   from optionally <code class="parameter">from_encoding</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mb-convert-encoding-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       The <span class="type"><a href="language.types.string.html" class="type string">string</a></span> being encoded.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">to_encoding</code></dt>

     <dd>

      <p class="para">
       The type of encoding that <code class="parameter">str</code> is being converted to.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">from_encoding</code></dt>

     <dd>

      <p class="para">
       Is specified by character code names before conversion. It is either
       an <span class="type"><a href="language.types.array.html" class="type array">array</a></span>, or a comma separated enumerated list.
       If <code class="parameter">from_encoding</code> is not specified, the internal 
       encoding will be used.
       
      </p>
      <p class="para">
      See <a href="mbstring.supported-encodings.html" class="link">supported
      encodings</a>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.mb-convert-encoding-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The encoded <span class="type"><a href="language.types.string.html" class="type string">string</a></span>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mb-convert-encoding-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2795">
    <p><strong>Example #1 <span class="function"><strong>mb_convert_encoding()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&nbsp;Convert&nbsp;internal&nbsp;character&nbsp;encoding&nbsp;to&nbsp;SJIS&nbsp;*/<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"SJIS"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&nbsp;Convert&nbsp;EUC-JP&nbsp;to&nbsp;UTF-7&nbsp;*/<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UTF-7"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"EUC-JP"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&nbsp;Auto&nbsp;detect&nbsp;encoding&nbsp;from&nbsp;JIS,&nbsp;eucjp-win,&nbsp;sjis-win,&nbsp;then&nbsp;convert&nbsp;str&nbsp;to&nbsp;UCS-2LE&nbsp;*/<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"UCS-2LE"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JIS,&nbsp;eucjp-win,&nbsp;sjis-win"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&nbsp;"auto"&nbsp;is&nbsp;expanded&nbsp;to&nbsp;"ASCII,JIS,UTF-8,EUC-JP,SJIS"&nbsp;*/<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"EUC-JP"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"auto"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

  
 <div class="refsect1 seealso" id="refsect1-function.mb-convert-encoding-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mb-detect-order.html" class="function" rel="rdfs-seeAlso">mb_detect_order()</a> - Set/Get character encoding detection order</span></li>
   </ul>
  <p></p>
 </div>

 
</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="112547">  
  <a class="name">
  <strong class="user"><em>josip at cubrad dot com</em></strong></a><div class="date" title="2013-06-27 11:24"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112547">
<div class="phpcode"><code><span class="html">
For my last project I needed to convert several CSV files from Windows-1250 to UTF-8, and after several days of searching around I found a function that is partially solved my problem, but it still has not transformed all the characters. So I made ​​this:<br><br>function w1250_to_utf8($text) {<br>&nbsp; &nbsp; // map based on:<br>&nbsp; &nbsp; // <a rel="nofollow" target="_blank">http://konfiguracja.c0.pl/iso02vscp1250en.html</a><br>&nbsp; &nbsp; // <a rel="nofollow" target="_blank">http://konfiguracja.c0.pl/webpl/index_en.html#examp</a><br>&nbsp; &nbsp; // <a rel="nofollow" target="_blank">http://www.htmlentities.com/html/entities/</a><br>&nbsp; &nbsp; $map = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8A) =&gt; chr(0xA9),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8C) =&gt; chr(0xA6),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8D) =&gt; chr(0xAB),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8E) =&gt; chr(0xAE),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8F) =&gt; chr(0xAC),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9C) =&gt; chr(0xB6),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9D) =&gt; chr(0xBB),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xA1) =&gt; chr(0xB7),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xA5) =&gt; chr(0xA1),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xBC) =&gt; chr(0xA5),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9F) =&gt; chr(0xBC),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xB9) =&gt; chr(0xB1),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9A) =&gt; chr(0xB9),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xBE) =&gt; chr(0xB5),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9E) =&gt; chr(0xBE),<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x80) =&gt; '&amp;euro;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x82) =&gt; '&amp;sbquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x84) =&gt; '&amp;bdquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x85) =&gt; '&amp;hellip;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x86) =&gt; '&amp;dagger;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x87) =&gt; '&amp;Dagger;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x89) =&gt; '&amp;permil;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x8B) =&gt; '&amp;lsaquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x91) =&gt; '&amp;lsquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x92) =&gt; '&amp;rsquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x93) =&gt; '&amp;ldquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x94) =&gt; '&amp;rdquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x95) =&gt; '&amp;bull;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x96) =&gt; '&amp;ndash;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x97) =&gt; '&amp;mdash;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x99) =&gt; '&amp;trade;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0x9B) =&gt; '&amp;rsquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xA6) =&gt; '&amp;brvbar;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xA9) =&gt; '&amp;copy;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xAB) =&gt; '&amp;laquo;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xAE) =&gt; '&amp;reg;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xB1) =&gt; '&amp;plusmn;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xB5) =&gt; '&amp;micro;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xB6) =&gt; '&amp;para;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xB7) =&gt; '&amp;middot;',<br>&nbsp; &nbsp; &nbsp; &nbsp; chr(0xBB) =&gt; '&amp;raquo;',<br>&nbsp; &nbsp; );<br>&nbsp; &nbsp; return html_entity_decode(mb_convert_encoding(strtr($text, $map), 'UTF-8', 'ISO-8859-2'), ENT_QUOTES, 'UTF-8');<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97902">  
  <a class="name">
  <strong class="user"><em>regrunge at hotmail dot it</em></strong></a><div class="date" title="2010-05-14 08:00"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97902">
<div class="phpcode"><code><span class="html">
I've been trying to find the charset of a norwegian (with a lot of ø, æ, å) txt file written on a Mac, i've found it in this way:
<br>
<br><span class="default">&lt;?php
<br>$text </span><span class="keyword">= </span><span class="string">"A strange string to pass, maybe with some ø, æ, å characters."</span><span class="keyword">;
<br>
<br>foreach(</span><span class="default">mb_list_encodings</span><span class="keyword">() as </span><span class="default">$chr</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$chr</span><span class="keyword">).</span><span class="string">" : "</span><span class="keyword">.</span><span class="default">$chr</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;&nbsp; &nbsp; 
<br> } 
<br></span><span class="default">?&gt;
<br></span>
<br>The line that looks good, gives you the encoding it was written in.
<br>
<br>Hope can help someone</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86878">  
  <a class="name">
  <strong class="user"><em>aaron at aarongough dot com</em></strong></a><div class="date" title="2008-11-07 08:24"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86878">
<div class="phpcode"><code><span class="html">
My solution below was slightly incorrect, so here is the correct version (I posted at the end of a long day, never a good idea!)<br><br>Again, this is a quick and dirty solution to stop mb_convert_encoding from filling your string with question marks whenever it encounters an illegal character for the target encoding. <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">convert_to </span><span class="keyword">( </span><span class="default">$source</span><span class="keyword">, </span><span class="default">$target_encoding </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; </span><span class="comment">// detect the character encoding of the incoming file<br>&nbsp; &nbsp; </span><span class="default">$encoding </span><span class="keyword">= </span><span class="default">mb_detect_encoding</span><span class="keyword">( </span><span class="default">$source</span><span class="keyword">, </span><span class="string">"auto" </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// escape all of the question marks so we can remove artifacts from<br>&nbsp; &nbsp; // the unicode conversion process<br>&nbsp; &nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">"?"</span><span class="keyword">, </span><span class="string">"[question_mark]"</span><span class="keyword">, </span><span class="default">$source </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// convert the string to the target encoding<br>&nbsp; &nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">( </span><span class="default">$target</span><span class="keyword">, </span><span class="default">$target_encoding</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// remove any question marks that have been introduced because of illegal characters<br>&nbsp; &nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">"?"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$target </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// replace the token string "[question_mark]" with the symbol "?"<br>&nbsp; &nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">"[question_mark]"</span><span class="keyword">, </span><span class="string">"?"</span><span class="keyword">, </span><span class="default">$target </span><span class="keyword">);<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$target</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>Hope this helps someone! (Admins should feel free to delete my previous, incorrect, post for clarity)<br>-A</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78033">  
  <a class="name">
  <strong class="user"><em>volker at machon dot biz</em></strong></a><div class="date" title="2007-09-24 09:05"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78033">
<div class="phpcode"><code><span class="html">
Hey guys. For everybody who's looking for a function that is converting an iso-string to utf8 or an utf8-string to iso, here's your solution:<br><br>public function encodeToUtf8($string) {<br>&nbsp; &nbsp;&nbsp; return mb_convert_encoding($string, "UTF-8", mb_detect_encoding($string, "UTF-8, ISO-8859-1, ISO-8859-15", true));<br>}<br><br>public function encodeToIso($string) {<br>&nbsp; &nbsp;&nbsp; return mb_convert_encoding($string, "ISO-8859-1", mb_detect_encoding($string, "UTF-8, ISO-8859-1, ISO-8859-15", true));<br>}<br><br>For me these functions are working fine. Give it a try</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86927">  
  <a class="name">
  <strong class="user"><em>francois at bonzon point com</em></strong></a><div class="date" title="2008-11-10 05:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86927">
<div class="phpcode"><code><span class="html">
aaron, to discard unsupported characters instead of printing a ?, you might as well simply set the configuration directive:<br><br>mbstring.substitute_character = "none"<br><br>in your php.ini. Be sure to include the quotes around none. Or at run-time with<br><br><span class="default">&lt;?php<br>ini_set</span><span class="keyword">(</span><span class="string">'mbstring.substitute_character'</span><span class="keyword">, </span><span class="string">"none"</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92426">  
  <a class="name">
  <strong class="user"><em>Daniel Trebbien</em></strong></a><div class="date" title="2009-07-23 11:25"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92426">
<div class="phpcode"><code><span class="html">
Note that `mb_convert_encoding($val, 'HTML-ENTITIES')` does not escape '\'', '"', '&lt;', '&gt;', or '&amp;'.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56618">  
  <a class="name">
  <strong class="user"><em>Stephan van der Feest</em></strong></a><div class="date" title="2005-09-09 04:47"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56618">
<div class="phpcode"><code><span class="html">
To add to the Flash conversion comment below, here's how I convert back from what I've stored in a database after converting from Flash HTML text field output, in order to load it back into a Flash HTML text field:<br><br>function htmltoflash($htmlstr)<br>{<br>&nbsp; return str_replace("&amp;lt;br /&amp;gt;","\n",<br>&nbsp; &nbsp; str_replace("&lt;","&amp;lt;",<br>&nbsp; &nbsp; &nbsp; str_replace("&gt;","&amp;gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; mb_convert_encoding(html_entity_decode($htmlstr),<br>&nbsp; &nbsp; &nbsp; &nbsp; "UTF-8","ISO-8859-1"))));<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="67981">  
  <a class="name">
  <strong class="user"><em>mac.com@nemo</em></strong></a><div class="date" title="2006-07-08 07:38"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom67981">
<div class="phpcode"><code><span class="html">
For those wanting to convert from $set to MacRoman, use iconv():<br><br><span class="default">&lt;?php<br><br>$string </span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">(</span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="string">'macintosh'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>('macintosh' is the IANA name for the MacRoman character set.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87991">  
  <a class="name">
  <strong class="user"><em>chzhang at gmail dot com</em></strong></a><div class="date" title="2009-01-05 12:34"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87991">
<div class="phpcode"><code><span class="html">
instead of ini_set(), you can try this<br><br>mb_substitute_character("none");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115406">  
  <a class="name">
  <strong class="user"><em>jackycms at outlook dot com</em></strong></a><div class="date" title="2014-07-19 02:48"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom115406">
<div class="phpcode"><code><span class="html">
// mb_convert_encoding($input,'UTF-8','windows-874');&nbsp; error : Illegal character encoding specified<br>// so convert Thai to UTF-8 is better use iconv instead<br><br><span class="default">&lt;?php<br><br>iconv</span><span class="keyword">(</span><span class="string">"windows-874"</span><span class="keyword">,</span><span class="string">"UTF-8"</span><span class="keyword">,</span><span class="default">$input</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106404">  
  <a class="name">
  <strong class="user"><em>qdb at kukmara dot ru</em></strong></a><div class="date" title="2011-11-07 07:44"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106404">
<div class="phpcode"><code><span class="html">
mb_substr and probably several other functions works faster in ucs-2 than in utf-8. and utf-16 works slower than utf-8. here is test, ucs-2 is near 50 times faster than utf-8, and utf-16 is near 6 times slower than utf-8 here:<br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">'Content-Type: text/html; charset=utf-8'</span><span class="keyword">);<br></span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="string">'utf-8'</span><span class="keyword">);<br><br></span><span class="default">$s</span><span class="keyword">=</span><span class="string">'укгезәөшөхзәхөшк2049һһлдябчсячмииюсит.июбҗрарэ'<br></span><span class="keyword">.</span><span class="string">'лдэфвәәуүйәуйүәу034928348539857әшаыдларорашһһрлоавы'</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">.=</span><span class="default">$s</span><span class="keyword">;<br><br></span><span class="default">$t1</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>while(</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">10</span><span class="keyword">)echo</span><span class="default">$a</span><span class="keyword">.</span><span class="string">'. '</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//echo$a.'. ';<br></span><span class="keyword">}<br>echo</span><span class="default">$i</span><span class="keyword">.</span><span class="string">'. '</span><span class="keyword">;<br>echo(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t1</span><span class="keyword">);<br><br>echo</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">=</span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">'UCS-2'</span><span class="keyword">,</span><span class="string">'utf8'</span><span class="keyword">);<br></span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="string">'UCS-2'</span><span class="keyword">);<br></span><span class="default">$t1</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>while(</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">10</span><span class="keyword">)echo </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="string">'utf8'</span><span class="keyword">,</span><span class="string">'ucs2'</span><span class="keyword">).</span><span class="string">'. '</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//echo$a.'. ';<br></span><span class="keyword">}<br>echo</span><span class="default">$i</span><span class="keyword">.</span><span class="string">'. '</span><span class="keyword">;<br>echo(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t1</span><span class="keyword">);<br><br>echo</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br></span><span class="default">$s</span><span class="keyword">=</span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">'utf-16'</span><span class="keyword">,</span><span class="string">'ucs-2'</span><span class="keyword">);<br></span><span class="default">mb_internal_encoding</span><span class="keyword">(</span><span class="string">'utf-16'</span><span class="keyword">);<br></span><span class="default">$t1</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>while(</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">+=</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">10</span><span class="keyword">)echo </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="string">'utf8'</span><span class="keyword">,</span><span class="string">'utf-16'</span><span class="keyword">).</span><span class="string">'. '</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//echo$a.'. ';<br></span><span class="keyword">}<br>echo</span><span class="default">$i</span><span class="keyword">.</span><span class="string">'. '</span><span class="keyword">;<br>echo(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$t1</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span>output:<br>өх. 12416. 1.71738100052<br>өх. 12416. 0.0211279392242<br>өх. 12416. 11.2330229282</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99571">  
  <a class="name">
  <strong class="user"><em>gullevek at gullevek dot org</em></strong></a><div class="date" title="2010-08-25 12:27"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99571">
<div class="phpcode"><code><span class="html">
If you want to convert japanese to ISO-2022-JP it is highly recommended to use ISO-2022-JP-MS as the target encoding instead. This includes the extended character set and avoids ? in the text. For example the often used "1 in a circle" ① will be correctly converted then.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91601">  
  <a class="name">
  <strong class="user"><em>me at gsnedders dot com</em></strong></a><div class="date" title="2009-06-18 03:06"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91601">
<div class="phpcode"><code><span class="html">
It appears that when dealing with an unknown "from encoding" the function will both throw an E_WARNING and proceed to convert the string from ISO-8859-1 to the "to encoding".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85079">  
  <a class="name">
  <strong class="user"><em>StigC</em></strong></a><div class="date" title="2008-08-13 03:38"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85079">
<div class="phpcode"><code><span class="html">
For the php-noobs (like me) - working with flash and php.<br><br>Here's a simple snippet of code that worked great for me, getting php to show special Danish characters, from a Flash email form:<br><br><span class="default">&lt;?php<br></span><span class="comment">// Name Escape<br></span><span class="default">$escName </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"Name"</span><span class="keyword">], </span><span class="string">"ISO-8859-1"</span><span class="keyword">, </span><span class="string">"UTF-8"</span><span class="keyword">);<br><br></span><span class="comment">// message escape<br></span><span class="default">$escMessage </span><span class="keyword">= </span><span class="default">mb_convert_encoding</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">"Message"</span><span class="keyword">], </span><span class="string">"ISO-8859-1"</span><span class="keyword">, </span><span class="string">"UTF-8"</span><span class="keyword">);<br><br></span><span class="comment">// Headers.. and so on...<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83228">  
  <a class="name">
  <strong class="user"><em>nospam at nihonbunka dot com</em></strong></a><div class="date" title="2008-05-15 06:51"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83228">
<div class="phpcode"><code><span class="html">
rodrigo at bb2 dot co dot jp wrote that inconv works better than mb_convert_encoding, I find that when converting from uft8 to shift_jis <br>$conv_str = mb_convert_encoding($str,$toCS,$fromCS); <br>works while<br>$conv_str = iconv($fromCS,$toCS.'//IGNORE',$str); <br>removes tildes from $str.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80620">  
  <a class="name">
  <strong class="user"><em>katzlbtjunk at hotmail dot com</em></strong></a><div class="date" title="2008-01-25 04:36"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80620">
<div class="phpcode"><code><span class="html">
Clean a string for use as filename by simply replacing all unwanted characters with underscore (ASCII converts to 7bit). It removes slightly more chars than necessary. Hope its useful. <br><br>$fileName = 'Test:!"$%&amp;/()=ÖÄÜöäü&lt;&lt;';<br>echo strtr(mb_convert_encoding($fileName,'ASCII'), <br>&nbsp; &nbsp; ' ,;:?*#!§$%&amp;/(){}&lt;&gt;=`´|\\\'"', <br>&nbsp; &nbsp; '____________________________');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80424">  
  <a class="name">
  <strong class="user"><em>rodrigo at bb2 dot co dot jp</em></strong></a><div class="date" title="2008-01-15 03:47"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80424">
<div class="phpcode"><code><span class="html">
For those who can´t use mb_convert_encoding() to convert from one charset to another as a metter of lower version of php, try iconv().<br><br>I had this problem converting to japanese charset:<br><br>$txt=mb_convert_encoding($txt,'SJIS',$this-&gt;encode);<br><br>And I could fix it by using this:<br><br>$txt = iconv('UTF-8', 'SJIS', $txt);<br><br>Maybe it´s helpfull for someone else! ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77262">  
  <a class="name">
  <strong class="user"><em>aofg</em></strong></a><div class="date" title="2007-08-21 06:49"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77262">
<div class="phpcode"><code><span class="html">
When converting Japanese strings to ISO-2022-JP or JIS on PHP &gt;= 5.2.1, you can use "ISO-2022-JP-MS" instead of them.<br>Kishu-Izon (platform dependent) characters are converted correctly with the encoding, as same as with eucJP-win or with SJIS-win.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71872">  
  <a class="name">
  <strong class="user"><em>David Hull</em></strong></a><div class="date" title="2006-12-20 10:52"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71872">
<div class="phpcode"><code><span class="html">
As an alternative to Johannes's suggestion for converting strings from other character sets to a 7bit representation while not just deleting latin diacritics, you might try this:<br><br><span class="default">&lt;?php<br>$text </span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">(</span><span class="default">$from_enc</span><span class="keyword">, </span><span class="string">'US-ASCII//TRANSLIT'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>The only disadvantage is that it does not convert "ä" to "ae", but it handles punctuation and other special characters better.<br>-- <br>David</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62131">  
  <a class="name">
  <strong class="user"><em>eion at bigfoot dot com</em></strong></a><div class="date" title="2006-02-20 04:54"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62131">
<div class="phpcode"><code><span class="html">
many people below talk about using 
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; mb_convert_encode</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="string">'HTML-ENTITIES'</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>to convert non-ascii code into html-readable stuff.&nbsp; Due to my webserver being out of my control, I was unable to set the database character set, and whenever PHP made a copy of my $s variable that it had pulled out of the database, it would convert it to nasty latin1 automatically and not leave it in it's beautiful UTF-8 glory.
<br>
<br>So [insert korean characters here] turned into ?????.
<br>
<br>I found myself needing to pass by reference (which of course is deprecated/nonexistent in recent versions of PHP)
<br>so instead of
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; mb_convert_encode</span><span class="keyword">(&amp;</span><span class="default">$s</span><span class="keyword">,</span><span class="string">'HTML-ENTITIES'</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>which worked perfectly until I upgraded, so I had to use
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; call_user_func_array</span><span class="keyword">(</span><span class="string">'mb_convert_encoding'</span><span class="keyword">, array(&amp;</span><span class="default">$s</span><span class="keyword">,</span><span class="string">'HTML-ENTITIES'</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">));
<br></span><span class="default">?&gt;
<br></span>
<br>Hope it helps someone else out</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58677">  
  <a class="name">
  <strong class="user"><em>Tom Class</em></strong></a><div class="date" title="2005-11-11 07:35"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58677">
<div class="phpcode"><code><span class="html">
Why did you use the php html encode functions? mbstring has it's own Encoding which is (as far as I tested it) much more usefull:<br><br>HTML-ENTITIES<br><br>Example:<br><br>$text = mb_convert_encoding($text, 'HTML-ENTITIES', "UTF-8");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56616">  
  <a class="name">
  <strong class="user"><em>Stephan van der Feest</em></strong></a><div class="date" title="2005-09-09 03:50"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56616">
<div class="phpcode"><code><span class="html">
Here's a tip for anyone using Flash and PHP for storing HTML output submitted from a Flash text field in a database or whatever.<br><br>Flash submits its HTML special characters in UTF-8, so you can use the following function to convert those into HTML entity characters:<br><br>function utf8html($utf8str)<br>{<br>&nbsp; return htmlentities(mb_convert_encoding($utf8str,"ISO-8859-1","UTF-8"));<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39549">  
  <a class="name">
  <strong class="user"><em>jamespilcher1 - hotmail</em></strong></a><div class="date" title="2004-02-01 07:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39549">
<div class="phpcode"><code><span class="html">
be careful when converting from iso-8859-1 to utf-8.<br><br>even if you explicitly specify the character encoding of a page as iso-8859-1(via headers and strict xml defs), windows 2000 will ignore that and interpret it as whatever character set it has natively installed. <br><br>for example, i wrote char #128 into a page, with char encoding iso-8859-1, and it displayed in internet explorer (&amp; mozilla) as a euro symbol.<br><br>it should have displayed a box, denoting that char #128 is undefined in iso-8859-1. The problem was it was displaying in "Windows: western europe" (my native character set).<br><br>this led to confusion when i tried to convert this euro to UTF-8 via mb_convert_encoding()&nbsp; <br><br>IE displays UTF-8 correctly- and because PHP correctly converted #128 into a box in UTF-8, IE would show a box.<br><br>so all i saw was mb_convert_encoding() converting a euro symbol into a box. It took me a long time to figure out what was going on.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="29256">  
  <a class="name">
  <strong class="user"><em>lanka at eurocom dot od dot ua</em></strong></a><div class="date" title="2003-02-07 08:03"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom29256">
<div class="phpcode"><code><span class="html">
Another sample of recoding without MultiByte enabling.<br>(Russian koi-&gt;win, if input in win-encoding already, function recode() returns unchanged string)<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="comment">// 0 - win<br>&nbsp; // 1 - koi<br>&nbsp; </span><span class="keyword">function </span><span class="default">detect_encoding</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$win </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$koi </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; if( </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) &gt;</span><span class="default">224 </span><span class="keyword">&amp;&amp; </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) &lt; </span><span class="default">255</span><span class="keyword">) </span><span class="default">$win</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; if( </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) &gt;</span><span class="default">192 </span><span class="keyword">&amp;&amp; </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) &lt; </span><span class="default">223</span><span class="keyword">) </span><span class="default">$koi</span><span class="keyword">++;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if( </span><span class="default">$win </span><span class="keyword">&lt; </span><span class="default">$koi </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; } else return </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; }<br><br>&nbsp; </span><span class="comment">// recodes koi to win<br>&nbsp; </span><span class="keyword">function </span><span class="default">koi_to_win</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="default">$kw </span><span class="keyword">= array(</span><span class="default">128</span><span class="keyword">, </span><span class="default">129</span><span class="keyword">, </span><span class="default">130</span><span class="keyword">, </span><span class="default">131</span><span class="keyword">, </span><span class="default">132</span><span class="keyword">, </span><span class="default">133</span><span class="keyword">, </span><span class="default">134</span><span class="keyword">, </span><span class="default">135</span><span class="keyword">, </span><span class="default">136</span><span class="keyword">, </span><span class="default">137</span><span class="keyword">, </span><span class="default">138</span><span class="keyword">, </span><span class="default">139</span><span class="keyword">, </span><span class="default">140</span><span class="keyword">, </span><span class="default">141</span><span class="keyword">, </span><span class="default">142</span><span class="keyword">, </span><span class="default">143</span><span class="keyword">, </span><span class="default">144</span><span class="keyword">, </span><span class="default">145</span><span class="keyword">, </span><span class="default">146</span><span class="keyword">, </span><span class="default">147</span><span class="keyword">, </span><span class="default">148</span><span class="keyword">, </span><span class="default">149</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">151</span><span class="keyword">, </span><span class="default">152</span><span class="keyword">, </span><span class="default">153</span><span class="keyword">, </span><span class="default">154</span><span class="keyword">, </span><span class="default">155</span><span class="keyword">, </span><span class="default">156</span><span class="keyword">, </span><span class="default">157</span><span class="keyword">, </span><span class="default">158</span><span class="keyword">, </span><span class="default">159</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">161</span><span class="keyword">, </span><span class="default">162</span><span class="keyword">, </span><span class="default">163</span><span class="keyword">, </span><span class="default">164</span><span class="keyword">, </span><span class="default">165</span><span class="keyword">, </span><span class="default">166</span><span class="keyword">, </span><span class="default">167</span><span class="keyword">, </span><span class="default">168</span><span class="keyword">, </span><span class="default">169</span><span class="keyword">, </span><span class="default">170</span><span class="keyword">, </span><span class="default">171</span><span class="keyword">, </span><span class="default">172</span><span class="keyword">, </span><span class="default">173</span><span class="keyword">, </span><span class="default">174</span><span class="keyword">, </span><span class="default">175</span><span class="keyword">, </span><span class="default">176</span><span class="keyword">, </span><span class="default">177</span><span class="keyword">, </span><span class="default">178</span><span class="keyword">, </span><span class="default">179</span><span class="keyword">, </span><span class="default">180</span><span class="keyword">, </span><span class="default">181</span><span class="keyword">, </span><span class="default">182</span><span class="keyword">, </span><span class="default">183</span><span class="keyword">,&nbsp; </span><span class="default">184</span><span class="keyword">, </span><span class="default">185</span><span class="keyword">, </span><span class="default">186</span><span class="keyword">, </span><span class="default">187</span><span class="keyword">, </span><span class="default">188</span><span class="keyword">, </span><span class="default">189</span><span class="keyword">, </span><span class="default">190</span><span class="keyword">, </span><span class="default">191</span><span class="keyword">, </span><span class="default">254</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">225</span><span class="keyword">, </span><span class="default">246</span><span class="keyword">, </span><span class="default">228</span><span class="keyword">, </span><span class="default">229</span><span class="keyword">, </span><span class="default">244</span><span class="keyword">, </span><span class="default">227</span><span class="keyword">, </span><span class="default">245</span><span class="keyword">, </span><span class="default">232</span><span class="keyword">, </span><span class="default">233</span><span class="keyword">, </span><span class="default">234</span><span class="keyword">, </span><span class="default">235</span><span class="keyword">, </span><span class="default">236</span><span class="keyword">, </span><span class="default">237</span><span class="keyword">, </span><span class="default">238</span><span class="keyword">, </span><span class="default">239</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">240</span><span class="keyword">, </span><span class="default">241</span><span class="keyword">, </span><span class="default">242</span><span class="keyword">, </span><span class="default">243</span><span class="keyword">, </span><span class="default">230</span><span class="keyword">, </span><span class="default">226</span><span class="keyword">, </span><span class="default">252</span><span class="keyword">, </span><span class="default">251</span><span class="keyword">, </span><span class="default">231</span><span class="keyword">, </span><span class="default">248</span><span class="keyword">, </span><span class="default">253</span><span class="keyword">, </span><span class="default">249</span><span class="keyword">, </span><span class="default">247</span><span class="keyword">, </span><span class="default">250</span><span class="keyword">, </span><span class="default">222</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">193</span><span class="keyword">, </span><span class="default">214</span><span class="keyword">, </span><span class="default">196</span><span class="keyword">, </span><span class="default">197</span><span class="keyword">, </span><span class="default">212</span><span class="keyword">, </span><span class="default">195</span><span class="keyword">, </span><span class="default">213</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">201</span><span class="keyword">, </span><span class="default">202</span><span class="keyword">, </span><span class="default">203</span><span class="keyword">, </span><span class="default">204</span><span class="keyword">, </span><span class="default">205</span><span class="keyword">, </span><span class="default">206</span><span class="keyword">, </span><span class="default">207</span><span class="keyword">, </span><span class="default">223</span><span class="keyword">, </span><span class="default">208</span><span class="keyword">, </span><span class="default">209</span><span class="keyword">, </span><span class="default">210</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">198</span><span class="keyword">, </span><span class="default">194</span><span class="keyword">, </span><span class="default">220</span><span class="keyword">, </span><span class="default">219</span><span class="keyword">, </span><span class="default">199</span><span class="keyword">, </span><span class="default">216</span><span class="keyword">, </span><span class="default">221</span><span class="keyword">, </span><span class="default">217</span><span class="keyword">, </span><span class="default">215</span><span class="keyword">, </span><span class="default">218</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$wk </span><span class="keyword">= array(</span><span class="default">128</span><span class="keyword">, </span><span class="default">129</span><span class="keyword">, </span><span class="default">130</span><span class="keyword">, </span><span class="default">131</span><span class="keyword">, </span><span class="default">132</span><span class="keyword">, </span><span class="default">133</span><span class="keyword">, </span><span class="default">134</span><span class="keyword">, </span><span class="default">135</span><span class="keyword">, </span><span class="default">136</span><span class="keyword">, </span><span class="default">137</span><span class="keyword">, </span><span class="default">138</span><span class="keyword">, </span><span class="default">139</span><span class="keyword">, </span><span class="default">140</span><span class="keyword">, </span><span class="default">141</span><span class="keyword">, </span><span class="default">142</span><span class="keyword">, </span><span class="default">143</span><span class="keyword">, </span><span class="default">144</span><span class="keyword">, </span><span class="default">145</span><span class="keyword">, </span><span class="default">146</span><span class="keyword">, </span><span class="default">147</span><span class="keyword">, </span><span class="default">148</span><span class="keyword">, </span><span class="default">149</span><span class="keyword">, </span><span class="default">150</span><span class="keyword">, </span><span class="default">151</span><span class="keyword">, </span><span class="default">152</span><span class="keyword">, </span><span class="default">153</span><span class="keyword">, </span><span class="default">154</span><span class="keyword">, </span><span class="default">155</span><span class="keyword">, </span><span class="default">156</span><span class="keyword">, </span><span class="default">157</span><span class="keyword">, </span><span class="default">158</span><span class="keyword">, </span><span class="default">159</span><span class="keyword">, </span><span class="default">160</span><span class="keyword">, </span><span class="default">161</span><span class="keyword">, </span><span class="default">162</span><span class="keyword">, </span><span class="default">163</span><span class="keyword">, </span><span class="default">164</span><span class="keyword">, </span><span class="default">165</span><span class="keyword">, </span><span class="default">166</span><span class="keyword">, </span><span class="default">167</span><span class="keyword">, </span><span class="default">168</span><span class="keyword">, </span><span class="default">169</span><span class="keyword">, </span><span class="default">170</span><span class="keyword">, </span><span class="default">171</span><span class="keyword">, </span><span class="default">172</span><span class="keyword">, </span><span class="default">173</span><span class="keyword">, </span><span class="default">174</span><span class="keyword">, </span><span class="default">175</span><span class="keyword">, </span><span class="default">176</span><span class="keyword">, </span><span class="default">177</span><span class="keyword">, </span><span class="default">178</span><span class="keyword">, </span><span class="default">179</span><span class="keyword">, </span><span class="default">180</span><span class="keyword">, </span><span class="default">181</span><span class="keyword">, </span><span class="default">182</span><span class="keyword">, </span><span class="default">183</span><span class="keyword">,&nbsp; </span><span class="default">184</span><span class="keyword">, </span><span class="default">185</span><span class="keyword">, </span><span class="default">186</span><span class="keyword">, </span><span class="default">187</span><span class="keyword">, </span><span class="default">188</span><span class="keyword">, </span><span class="default">189</span><span class="keyword">, </span><span class="default">190</span><span class="keyword">, </span><span class="default">191</span><span class="keyword">, </span><span class="default">225</span><span class="keyword">, </span><span class="default">226</span><span class="keyword">, </span><span class="default">247</span><span class="keyword">, </span><span class="default">231</span><span class="keyword">, </span><span class="default">228</span><span class="keyword">, </span><span class="default">229</span><span class="keyword">, </span><span class="default">246</span><span class="keyword">, </span><span class="default">250</span><span class="keyword">, </span><span class="default">233</span><span class="keyword">, </span><span class="default">234</span><span class="keyword">, </span><span class="default">235</span><span class="keyword">, </span><span class="default">236</span><span class="keyword">, </span><span class="default">237</span><span class="keyword">, </span><span class="default">238</span><span class="keyword">, </span><span class="default">239</span><span class="keyword">, </span><span class="default">240</span><span class="keyword">, </span><span class="default">242</span><span class="keyword">,&nbsp; </span><span class="default">243</span><span class="keyword">, </span><span class="default">244</span><span class="keyword">, </span><span class="default">245</span><span class="keyword">, </span><span class="default">230</span><span class="keyword">, </span><span class="default">232</span><span class="keyword">, </span><span class="default">227</span><span class="keyword">, </span><span class="default">254</span><span class="keyword">, </span><span class="default">251</span><span class="keyword">, </span><span class="default">253</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">249</span><span class="keyword">, </span><span class="default">248</span><span class="keyword">, </span><span class="default">252</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">241</span><span class="keyword">, </span><span class="default">193</span><span class="keyword">, </span><span class="default">194</span><span class="keyword">, </span><span class="default">215</span><span class="keyword">, </span><span class="default">199</span><span class="keyword">, </span><span class="default">196</span><span class="keyword">, </span><span class="default">197</span><span class="keyword">, </span><span class="default">214</span><span class="keyword">, </span><span class="default">218</span><span class="keyword">, </span><span class="default">201</span><span class="keyword">, </span><span class="default">202</span><span class="keyword">, </span><span class="default">203</span><span class="keyword">, </span><span class="default">204</span><span class="keyword">, </span><span class="default">205</span><span class="keyword">, </span><span class="default">206</span><span class="keyword">, </span><span class="default">207</span><span class="keyword">, </span><span class="default">208</span><span class="keyword">, </span><span class="default">210</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">212</span><span class="keyword">, </span><span class="default">213</span><span class="keyword">, </span><span class="default">198</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">195</span><span class="keyword">, </span><span class="default">222</span><span class="keyword">, </span><span class="default">219</span><span class="keyword">, </span><span class="default">221</span><span class="keyword">, </span><span class="default">223</span><span class="keyword">, </span><span class="default">217</span><span class="keyword">, </span><span class="default">216</span><span class="keyword">, </span><span class="default">220</span><span class="keyword">, </span><span class="default">192</span><span class="keyword">, </span><span class="default">209</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; do {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$c</span><span class="keyword">&gt;</span><span class="default">128</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$kw</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">-</span><span class="default">128</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; } while (++</span><span class="default">$pos </span><span class="keyword">&lt; </span><span class="default">$end</span><span class="keyword">);<br><br>&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;<br>&nbsp; }<br><br>&nbsp; function </span><span class="default">recode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="default">$enc </span><span class="keyword">= </span><span class="default">detect_encoding</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$enc</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">koi_to_win</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79143">  
  <a class="name">
  <strong class="user"><em>mightye at gmail dot com</em></strong></a><div class="date" title="2007-11-13 09:24"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79143">
<div class="phpcode"><code><span class="html">
To petruzanauticoyahoo?com!ar<br><br>If you don't specify a source encoding, then it assumes the internal (default) encoding.&nbsp; ñ is a multi-byte character whose bytes in your configuration default (often iso-8859-1) would actually mean Ã±.&nbsp; mb_convert_encoding() is upgrading those characters to their multi-byte equivalents within UTF-8.<br><br>Try this instead:<br><span class="default">&lt;?php<br></span><span class="keyword">print </span><span class="default">mb_convert_encoding</span><span class="keyword">( </span><span class="string">"ñ"</span><span class="keyword">, </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"UTF-8" </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>Of course this function does no work (for the most part - it can actually be used to strip characters which are not valid for UTF-8).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85752">  
  <a class="name">
  <strong class="user"><em>Edward</em></strong></a><div class="date" title="2008-09-16 03:54"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85752">
<div class="phpcode"><code><span class="html">
If mb_convert_encoding doesn't work for you, and iconv gives you a headache, you might be interested in this free class I found. It can convert almost any charset to almost any other charset. I think it's wonderful and I wish I had found it earlier. It would have saved me tons of headache.<br><br>I use it as a fail-safe, in case mb_convert_encoding is not installed. Download it from <a rel="nofollow" target="_blank">http://mikolajj.republika.pl/</a><br><br>This is not my own library, so technically it's not spamming, right? ;)<br><br>Hope this helps.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69412">  
  <a class="name">
  <strong class="user"><em>phpdoc at jeudi dot de</em></strong></a><div class="date" title="2006-09-05 06:46"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69412">
<div class="phpcode"><code><span class="html">
I\&amp;#039;d like to share some code to convert latin diacritics to their
<br>traditional 7bit representation, like, for example,
<br>
<br>- &amp;agrave;,&amp;ccedil;,&amp;eacute;,&amp;icirc;,... to a,c,e,i,...
<br>- &amp;szlig; to ss
<br>- &amp;auml;,&amp;Auml;,... to ae,Ae,...
<br>- &amp;euml;,... to e,...
<br>
<br>(mb_convert \&amp;quot;7bit\&amp;quot; would simply delete any offending characters). 
<br>
<br>I might have missed on your country\&amp;#039;s typographic 
<br>conventions--correct me then. 
<br>&amp;lt;?php
<br>/**
<br> * @args string $text line of encoded text
<br> *&nbsp; &nbsp; &nbsp;&nbsp; string $from_enc (encoding type of $text, e.g. UTF-8, ISO-8859-1)
<br> *
<br> * @returns 7bit representation
<br> */
<br>function to7bit($text,$from_enc) {
<br>&nbsp; &nbsp; $text = mb_convert_encoding($text,\&amp;#039;HTML-ENTITIES\&amp;#039;,$from_enc);
<br>&nbsp; &nbsp; $text = preg_replace(
<br>&nbsp; &nbsp; &nbsp; &nbsp; array(\&amp;#039;/&amp;szlig;/\&amp;#039;,\&amp;#039;/&amp;amp;(..)lig;/\&amp;#039;,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; \&amp;#039;/&amp;amp;([aouAOU])uml;/\&amp;#039;,\&amp;#039;/&amp;amp;(.)[^;]*;/\&amp;#039;),
<br>&nbsp; &nbsp; &nbsp; &nbsp; array(\&amp;#039;ss\&amp;#039;,\&amp;quot;$1\&amp;quot;,\&amp;quot;$1\&amp;quot;.\&amp;#039;e\&amp;#039;,\&amp;quot;$1\&amp;quot;),
<br>&nbsp; &nbsp; &nbsp; &nbsp; $text);
<br>&nbsp; &nbsp; return $text;
<br>}&nbsp;&nbsp; 
<br>?&amp;gt;
<br>
<br>Enjoy :-)
<br>Johannes
<br>
<br>==
<br>[EDIT BY danbrown AT php DOT net: Author provided the following update on 27-FEB-2012.]
<br>==
<br>
<br>An addendum to my &amp;quot;to7bit&amp;quot; function referenced below in the notes. 
<br>The function is supposed to solve the problem that some languages require a different 7bit rendering of special (umlauted) characters for sorting or other applications. For example, the German &amp;szlig; ligature is usually written &amp;quot;ss&amp;quot; in 7bit context. Dutch &amp;yuml; is typically rendered &amp;quot;ij&amp;quot; (not &amp;quot;y&amp;quot;). 
<br>
<br>The original function works well with word (alphabet) character entities and I&amp;#039;ve seen it used in many places. But non-word entities cause funny results:
<br>E.g., &amp;quot;&amp;copy;&amp;quot; is rendered as &amp;quot;c&amp;quot;, &amp;quot;&amp;shy;&amp;quot; as &amp;quot;s&amp;quot; and &amp;quot;&amp;amp;rquo;&amp;quot; as &amp;quot;r&amp;quot;. 
<br>The following version fixes this by converting non-alphanumeric characters (also chains thereof) to &amp;#039;_&amp;#039;.
<br>
<br>&amp;lt;?php
<br>/**
<br> * @args string $text line of encoded text
<br> *&nbsp; &nbsp; &nbsp;&nbsp; string $from_enc (encoding type of $text, e.g. UTF-8, ISO-8859-1)
<br> *
<br> * @returns 7bit representation
<br> */
<br>function to7bit($text,$from_enc) {
<br>&nbsp; &nbsp; $text = preg_replace(/W+/,&amp;#039;_&amp;#039;,$text);
<br>&nbsp; &nbsp; $text = mb_convert_encoding($text,&amp;#039;HTML-ENTITIES&amp;#039;,$from_enc);
<br>&nbsp; &nbsp; $text = preg_replace(
<br>&nbsp; &nbsp; &nbsp; &nbsp; array(&amp;#039;/&amp;szlig;/&amp;#039;,&amp;#039;/&amp;amp;(..)lig;/&amp;#039;,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;#039;/&amp;amp;([aouAOU])uml;/&amp;#039;,&amp;#039;/&amp;yuml;/&amp;#039;,&amp;#039;/&amp;amp;(.)[^;]*;/&amp;#039;),
<br>&nbsp; &nbsp; &nbsp; &nbsp; array(&amp;#039;ss&amp;#039;,&amp;quot;$1&amp;quot;,&amp;quot;$1&amp;quot;.&amp;#039;e&amp;#039;,&amp;#039;ij&amp;#039;,&amp;quot;$1&amp;quot;),
<br>&nbsp; &nbsp; &nbsp; &nbsp; $text);
<br>&nbsp; &nbsp; return $text;
<br>}&nbsp; 
<br>?&amp;gt;
<br>
<br>Enjoy again,
<br>Johannes</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110010">  
  <a class="name">
  <strong class="user"><em>urko at wegetit dot eu</em></strong></a><div class="date" title="2012-09-11 06:17"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110010">
<div class="phpcode"><code><span class="html">
If you are trying to generate a CSV (with extended chars) to be opened at Exel for Mac, the only that worked for me was:
<br><span class="default">&lt;?php mb_convert_encoding</span><span class="keyword">( </span><span class="default">$CSV</span><span class="keyword">, </span><span class="string">'Windows-1252'</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>I also tried this:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//Separado OK, chars MAL
<br></span><span class="default">iconv</span><span class="keyword">(</span><span class="string">'MACINTOSH'</span><span class="keyword">, </span><span class="string">'UTF8'</span><span class="keyword">, </span><span class="default">$CSV</span><span class="keyword">);
<br></span><span class="comment">//Separado MAL, chars OK
<br></span><span class="default">chr</span><span class="keyword">(</span><span class="default">255</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">254</span><span class="keyword">).</span><span class="default">mb_convert_encoding</span><span class="keyword">( </span><span class="default">$CSV</span><span class="keyword">, </span><span class="string">'UCS-2LE'</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>But the first one didn't show extended chars correctly, and the second one, did't separe fields correctly</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114549">  
  <a class="name">
  <strong class="user"><em>DanielAbbey at Hotmail dot co dot uk</em></strong></a><div class="date" title="2014-03-05 04:30"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114549">
<div class="phpcode"><code><span class="html">
When using the Windows Notepad text editor, it is important to note that when you select 'Save As' there is an Encoding selection dropdown. The default encoding is set to ANSI, with the other two options being Unicode and UTF-8. Since most text on the web is in UTF-8 format it could prove vital to save the .txt file with this encoding, since this function does not work on ANSI-encoded text.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.mb-convert-encoding.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:57:21 GMT -->


</body></html>