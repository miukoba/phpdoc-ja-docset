<html><!-- Mirrored from php.net/manual/en/function.soundex.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:18 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>soundex</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.soundex.html">
 <link rel="shorturl" href="http://php.net/soundex">
 <link rel="alternate" href="http://php.net/soundex" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.similar-text.html">
 <link rel="next" href="function.sprintf.html">

 <link rel="alternate" href="function.soundex.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.soundex.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.soundex.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.soundex.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.soundex.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.soundex.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.soundex.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.soundex.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.soundex.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.soundex.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.soundex.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.soundex" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">soundex</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">soundex</span> â€” <span class="dc-title">Calculate the soundex key of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.soundex-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>soundex</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   )</div>

  <p class="para rdfs-comment">
   Calculates the soundex key of <code class="parameter">str</code>.
  </p>
  <p class="para">
   Soundex keys have the property that words pronounced similarly
   produce the same soundex key, and can thus be used to simplify
   searches in databases where you know the pronunciation but not
   the spelling. This soundex function returns a string 4 characters
   long, starting with a letter.
  </p>
  <p class="para">
   This particular soundex function is one described by Donald Knuth
   in "The Art Of Computer Programming, vol. 3: Sorting And
   Searching", Addison-Wesley (1973), pp. 391-392.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.soundex-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.soundex-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the soundex key as a string.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.soundex-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4979">
    <p><strong>Example #1 Soundex Examples</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Euler"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ellery"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;E460<br></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Gauss"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ghosh"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;G200<br></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Hilbert"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Heilbronn"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;H416<br></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Knuth"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Kant"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;K530<br></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lloyd"</span><span style="color: #007700">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Ladd"</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;L300<br></span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lukasiewicz"</span><span style="color: #007700">)&nbsp;==&nbsp;</span><span style="color: #0000BB">soundex</span><span style="color: #007700">(</span><span style="color: #DD0000">"Lissajous"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;L222<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.soundex-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.levenshtein.html" class="function" rel="rdfs-seeAlso">levenshtein()</a> - Calculate Levenshtein distance between two strings</span></li>
    <li class="member"><span class="function"><a href="function.metaphone.html" class="function" rel="rdfs-seeAlso">metaphone()</a> - Calculate the metaphone key of a string</span></li>
    <li class="member"><span class="function"><a href="function.similar-text.html" class="function" rel="rdfs-seeAlso">similar_text()</a> - Calculate the similarity between two strings</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="21564">  
  <a class="name">
  <strong class="user"><em>witold4249 at rogers dot com</em></strong></a><div class="date" title="2002-05-17 10:11"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21564">
<div class="phpcode"><code><span class="html">
A MUCH easier way to check for similarity between words and avoid the problems that come up with Klancy/Clancy would be to simply add any letter infront of the string<br><br>ie:&nbsp; OKlancy/OClancy</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84881">  
  <a class="name">
  <strong class="user"><em>nicolas dot zimmer at einfachmarke dot de</em></strong></a><div class="date" title="2008-08-03 03:47"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84881">
<div class="phpcode"><code><span class="html">
Since soundex() does not produce optimal results for German language<br>we have written a function to implement the so called KÃ¶lner Phonetik<br>(Cologne Phonetic).<br><br>Please find the code below in the hope it might be useful:<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * A function for retrieving the KÃ¶lner Phonetik value of a string<br> * <br> * As described at <a rel="nofollow" target="_blank">http://de.wikipedia.org/wiki/KÃ¶lner_Phonetik</a><br> * Based on Hans Joachim Postel: Die KÃ¶lner Phonetik. <br> * Ein Verfahren zur Identifizierung von Personennamen auf der <br> * Grundlage der Gestaltanalyse. <br> * in: IBM-Nachrichten, 19. Jahrgang, 1969, S. 925-931<br> * <br> * This program is distributed in the hope that it will be useful,<br> * but WITHOUT ANY WARRANTY; without even the implied warranty of<br> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the<br> * GNU General Public License for more details.<br> *<br> * @package phonetics<br> * @version 1.0<br> * @link <a rel="nofollow" target="_blank">http://www.einfachmarke.de</a><br> * @license GPL 3.0 &lt;<a rel="nofollow" target="_blank">http://www.gnu.org/licenses/&gt;</a><br> * @copyright&nbsp; 2008 by einfachmarke.de<br> * @author Nicolas Zimmer &lt;nicolas dot zimmer at einfachmarke.de&gt;<br> */<br><br></span><span class="keyword">function </span><span class="default">cologne_phon</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">){<br>&nbsp; &nbsp; <br>&nbsp; </span><span class="comment">/**<br>&nbsp; * @param&nbsp; string&nbsp; $word string to be analyzed<br>&nbsp; * @return string&nbsp; $value represents the KÃ¶lner Phonetik value<br>&nbsp; * @access public<br>&nbsp; */<br>&nbsp; <br>&nbsp; &nbsp; //prepare for processing<br>&nbsp; &nbsp; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$substitution</span><span class="keyword">=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"Ã¤"</span><span class="keyword">=&gt;</span><span class="string">"a"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"Ã¶"</span><span class="keyword">=&gt;</span><span class="string">"o"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"Ã¼"</span><span class="keyword">=&gt;</span><span class="string">"u"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"ÃŸ"</span><span class="keyword">=&gt;</span><span class="string">"ss"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"ph"</span><span class="keyword">=&gt;</span><span class="string">"f"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$substitution </span><span class="keyword">as </span><span class="default">$letter</span><span class="keyword">=&gt;</span><span class="default">$substitution</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$word</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$letter</span><span class="keyword">,</span><span class="default">$substitution</span><span class="keyword">,</span><span class="default">$word</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//Rule for exeptions<br>&nbsp; &nbsp; </span><span class="default">$exceptionsLeading</span><span class="keyword">=array(<br>&nbsp; &nbsp; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">"ca"</span><span class="keyword">,</span><span class="string">"ch"</span><span class="keyword">,</span><span class="string">"ck"</span><span class="keyword">,</span><span class="string">"cl"</span><span class="keyword">,</span><span class="string">"co"</span><span class="keyword">,</span><span class="string">"cq"</span><span class="keyword">,</span><span class="string">"cu"</span><span class="keyword">,</span><span class="string">"cx"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">"dc"</span><span class="keyword">,</span><span class="string">"ds"</span><span class="keyword">,</span><span class="string">"dz"</span><span class="keyword">,</span><span class="string">"tc"</span><span class="keyword">,</span><span class="string">"ts"</span><span class="keyword">,</span><span class="string">"tz"</span><span class="keyword">)<br>&nbsp; &nbsp; );<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$exceptionsFollowing</span><span class="keyword">=array(</span><span class="string">"sc"</span><span class="keyword">,</span><span class="string">"zc"</span><span class="keyword">,</span><span class="string">"cx"</span><span class="keyword">,</span><span class="string">"kx"</span><span class="keyword">,</span><span class="string">"qx"</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//Table for coding<br>&nbsp; &nbsp; </span><span class="default">$codingTable</span><span class="keyword">=array(<br>&nbsp; &nbsp; </span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"e"</span><span class="keyword">,</span><span class="string">"i"</span><span class="keyword">,</span><span class="string">"j"</span><span class="keyword">,</span><span class="string">"o"</span><span class="keyword">,</span><span class="string">"u"</span><span class="keyword">,</span><span class="string">"y"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"p"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">"d"</span><span class="keyword">,</span><span class="string">"t"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">3</span><span class="keyword">=&gt;array(</span><span class="string">"f"</span><span class="keyword">,</span><span class="string">"v"</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"g"</span><span class="keyword">,</span><span class="string">"k"</span><span class="keyword">,</span><span class="string">"q"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">48</span><span class="keyword">=&gt;array(</span><span class="string">"x"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">5</span><span class="keyword">=&gt;array(</span><span class="string">"l"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">6</span><span class="keyword">=&gt;array(</span><span class="string">"m"</span><span class="keyword">,</span><span class="string">"n"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">7</span><span class="keyword">=&gt;array(</span><span class="string">"r"</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">8</span><span class="keyword">=&gt;array(</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"s"</span><span class="keyword">,</span><span class="string">"z"</span><span class="keyword">),<br>&nbsp; &nbsp; );<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Exceptions<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$i</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">AND </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]==</span><span class="string">"cr"</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">4</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$exceptionsLeading </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">)){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br><br>}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$i</span><span class="keyword">!=</span><span class="default">0 </span><span class="keyword">AND (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">].</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], <br></span><span class="default">$exceptionsFollowing</span><span class="keyword">))) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">8</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br><br>}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Normal encoding<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">""</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$codingTable </span><span class="keyword">as </span><span class="default">$code</span><span class="keyword">=&gt;</span><span class="default">$letters</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$letters</span><span class="keyword">))</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$code</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//delete double values<br>&nbsp; &nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">]) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//delete vocals <br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&gt;</span><span class="default">$len</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){</span><span class="comment">//omitting first characer code and h<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="default">0</span><span class="keyword">) </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; <br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22210">  
  <a class="name">
  <strong class="user"><em>dcallaghan at linuxmail dot org</em></strong></a><div class="date" title="2002-06-10 04:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22210">
<div class="phpcode"><code><span class="html">
Although the standard soundex string is 4 characters long, and this is what's returned by the php function, some database programs return an arbitrary number of strings. MySQL, for instance.<br><br>The MySQL documentation covers this, recommending that you may wish to use substring to output the standard 4 characters. Let's take 'Dostoyevski' as an example.<br><br>select soundex("Dostoyevski")<br>returns D2312<br>select substring(soundex("Dostoyevski"), 1, 4);<br>returns D231<br><br>PHP will return the value as 'D231'<br><br>So, to use the soundex function to generate a WHERE parameter in a MySQL SELECT statement, you might try this:<br>$s = soundex('Dostoyevski');<br>SELECT * FROM authors WHERE substring(soundex(lastname), 1 , 4) = "' . $s&nbsp; . '"';<br><br>Or, if you want to bypass the php function<br>$result = mysql_query("select soundex('Dostoyevski')");<br>$s = mysql_result($result, 0, 0);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57437">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-10-04 12:25"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57437">
<div class="phpcode"><code><span class="html">
Since the first letter is included in the phonetic representation in the output, it is worth pointing out that if you want a soundex key to work without the problems of klansy and clansy sounding different, take the substring from the first letter, as the first letter is the main constant of the word, and the numerical value is that of the phontic structure of the word.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71138">  
  <a class="name">
  <strong class="user"><em>shortcut</em></strong></a><div class="date" title="2006-11-13 11:24"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71138">
<div class="phpcode"><code><span class="html">
The answer to whether soundex works except for the first letter in klancy vs clancy is to always prefix words with the same letter.<br><br>aklancy will match aclancy<br>bklancy will match bclancy<br><br>soundex seems to only check the 1st 2 syllables.??<br>ie:&nbsp; spectacular matches spectacle<br><br>just a thought if you rely on soundex.<br><br>k-</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56724">  
  <a class="name">
  <strong class="user"><em>crchafer-php at c2se dot com</em></strong></a><div class="date" title="2005-09-13 08:25"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56724">
<div class="phpcode"><code><span class="html">
Rewritten, maybe -- but the algorithm has some obvious<br>optimisations which can be done, for example...<br><br>&nbsp; &nbsp; &nbsp; &nbsp; function text__soundex( $text ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $k = ' 123 12&nbsp; 22455 12623 1 2 2';<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nl = strlen( $tN = strtoupper( $text ) );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $p = trim( $k{ ord( $tS = $tN{0} ) - 65 } );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for( $n = 1; $n &lt; $nl; ++$n )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( ( $l = trim( $k{ ord( $tN{ $n } ) - 65 } ) ) != $p )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $tS .= ( $p = $l );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return substr( $tS . '000', 0, 4 );<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>// Notes:<br>// $k is the $key, essentially $SoundKey inverted<br>// $tN is the uppercase of the text to be optimised<br>// $tS is the partaully generated output <br>// $l is the current letter, $p the previous<br>// $n and $nl are iteration indicies<br>// 65 is ord('A'), precalculated for speed<br>// none ascii letters are not supported<br>// watch the brackets, quite a mixture here<br><br>(Code has suffered only basic tests, though it appears to<br>match the output of PHP's soundex(), speed untested --<br>though this should be /much/ faster than a4_perfect's<br>rewrite due to the removal of most loops and compares.)<br><br>C<br>2005-09-13</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28544">  
  <a class="name">
  <strong class="user"><em>jr</em></strong></a><div class="date" title="2003-01-16 09:25"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28544">
<div class="phpcode"><code><span class="html">
a workaround for the mysql/php differences in implementation of soundex is to do the soundex comparison entirely within mysql.<br><br>for example:<br>$sql = "SELECT * FROM table WHERE substring(soundex(field), 1, 4) =&nbsp; substring(soundex('".$wordsearch."'), 1, 4)";</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21563">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-05-17 10:07"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21563">
<div class="phpcode"><code><span class="html">
A MUCH easier way to do the above search would be to simply add any letter in front of the string and then compare them. <br><br>ie. Klancy =&gt; LKlancy<br>&nbsp; &nbsp; Clancy =&gt; LClancy</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20612">  
  <a class="name">
  <strong class="user"><em>administrator at zinious dot com</em></strong></a><div class="date" title="2002-04-09 08:21"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20612">
<div class="phpcode"><code><span class="html">
I wrote this function a long time ago in CGI-perl and then translated (if you can call it that) into PHP.&nbsp; A little clunky to say the least, but should handle true soundex specs 100%:<br><br>// ---begin code---<br><br>function MakeSoundEx($stringtomakesoundexof)<br>{<br>&nbsp; &nbsp; $temp_Name = $stringtomakesoundexof;<br>&nbsp; &nbsp; $SoundKey1 = "BPFV";<br>&nbsp; &nbsp; $SoundKey2 = "CSKGJQXZ";<br>&nbsp; &nbsp; $SoundKey3 = "DT";<br>&nbsp; &nbsp; $SoundKey4 = "L";<br>&nbsp; &nbsp; $SoundKey5 = "MN";<br>&nbsp; &nbsp; $SoundKey6 = "R";<br>&nbsp; &nbsp; $SoundKey7 = "AEHIOUWY";<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $temp_Name = strtoupper($temp_Name);<br>&nbsp; &nbsp; $temp_Last = "";<br>&nbsp; &nbsp; $temp_Soundex = substr($temp_Name, 0, 1);<br><br>&nbsp; &nbsp; $n = 1;<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey1); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey1, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey2); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey2, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "2";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey3); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey3, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "3";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey4); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey4, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "4";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey5); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey5, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "5";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey6, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "6";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($temp_Soundex == substr($SoundKey6, i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; for ($n = 1; $n &lt; strlen($temp_Name); $n++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (strlen($temp_Soundex) &lt; 4)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey1); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey1, $i - 1, 1) &amp;&amp; $temp_Last != "1")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "1";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey2); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey2, $i - 1, 1) &amp;&amp; $temp_Last != "2")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."2";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "2";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey3); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey3, $i - 1, 1) &amp;&amp; $temp_Last != "3")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."3";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "3";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey4); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey4, $i - 1, 1) &amp;&amp; $temp_Last != "4")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."4";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "4";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey5); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey5, $i - 1, 1) &amp;&amp; $temp_Last != "5")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."5";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "5";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey6); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey6, $i - 1, 1) &amp;&amp; $temp_Last != "6")<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."6";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "6";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for ($i = 0; $i &lt; strlen($SoundKey7); $i++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (substr($temp_Name, $n - 1, 1) == substr($SoundKey7, $i - 1, 1))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temp_Last = "";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; while (strlen($temp_Soundex) &lt; 4)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $temp_Soundex = $temp_Soundex."0";<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $temp_Soundex;<br>}<br><br>// --- end code---</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30163">  
  <a class="name">
  <strong class="user"><em>fie at myrealbox dot com</em></strong></a><div class="date" title="2003-03-08 05:29"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30163">
<div class="phpcode"><code><span class="html">
eek... hosting got taken down on that server.. here's the code for the previous<br><br>function cg_sylc($nos){<br>&nbsp; $nos = strtoupper($nos);<br>&nbsp; $syllables = 0;<br><br>&nbsp; $before = strlen($nos);<br>&nbsp; $nos = str_replace(array('AA','AE','AI','AO','AU',<br>&nbsp; 'EA','EE','EI','EO','EU','IA','IE','II','IO',<br>&nbsp; 'IU','OA','OE','OI','OO','OU','UA','UE',<br>&nbsp; 'UI','UO','UU'), "", $nos);<br>&nbsp; $after = strlen($nos);<br>&nbsp; $diference = $before - $after;<br>&nbsp; if($before != $after) $syllables += $diference / 2;<br><br>&nbsp; if($nos[strlen($nos)-1] == "E") $syllables --;<br>&nbsp; if($nos[strlen($nos)-1] == "Y") $syllables ++;<br><br>&nbsp; $before = $after;<br>&nbsp; $nos = str_replace(array('A','E','I','O','U'),"",$nos);<br>&nbsp; $after = strlen($nos);<br>&nbsp; $syllables += ($before - $after);<br><br>&nbsp; return $syllables;<br>}<br><br>function cg_SoundEx($SExStr){<br>&nbsp; $syl = cg_sylc($SExStr);<br>&nbsp; $SExStr = strtoupper($SExStr);<br><br>&nbsp; &nbsp; for($i = 1, $ii = 2,print $SExStr[0]; ;$ii++){<br><br>&nbsp; &nbsp; &nbsp; if(($SExStr[$i] != $SExStr[$ii])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $tsstr .= $SExStr[$ii];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $i ++;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; if($SExStr[$ii] == false){<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; $tsstr = str_replace(array('A', 'E', 'H', 'I', 'O', 'U', 'W', 'Y'), "", $tsstr);<br>&nbsp; $tsstr = str_replace(array('B', 'F', 'P', 'V'), "1", $tsstr);<br>&nbsp; $tsstr = str_replace(array('C', 'G', 'J', 'K', 'Q', 'S', 'X', 'Z', 'ï¿½'), "2", $tsstr);<br>&nbsp; $tsstr = str_replace(array('D', 'T'), "3", $tsstr);<br>&nbsp; $tsstr = str_replace(array('L'), "4", $tsstr);<br>&nbsp; $tsstr = str_replace(array('M', 'N', 'ï¿½'), "5", $tsstr);<br>&nbsp; $tsstr = str_replace(array('R'), "6", $tsstr);<br><br>&nbsp; while($iii &lt; 3){<br>&nbsp; &nbsp; if($tsstr[$iii] != false){<br>&nbsp; &nbsp; &nbsp; $ttsstr .= $tsstr[$iii];<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; $ttsstr .= "0";<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; $iii ++;<br>&nbsp; }<br>&nbsp; $ttsstr .= $syl;<br>&nbsp; print $ttsstr;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114220">  
  <a class="name">
  <strong class="user"><em>Dirk Hoeschen - Feenders de</em></strong></a><div class="date" title="2014-01-26 11:00"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114220">
<div class="phpcode"><code><span class="html">
I made some improvements to the "Cologne Phonetic" function of niclas zimmer. Key and value of the arrays are inverted to uses simple arrays instead of multidimensional arrays. Therefore all loops and iterations are not longer necessary to find the matching value&nbsp; for a char.<br>I put the function into a static class and moved the array declarations outside the function.<br><br>The result is more reliable and five times faster than the original.<br><br><span class="default">&lt;?php&nbsp;&nbsp; <br></span><span class="keyword">class </span><span class="default">CologneHash</span><span class="keyword">() {<br><br>&nbsp; &nbsp; static </span><span class="default">$eLeading </span><span class="keyword">= array(</span><span class="string">"ca" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"ch" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"ck" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cl" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"co" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cq" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cu" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"cx" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"dc" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"ds" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"dz" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"tc" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"ts" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"tz" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">); <br><br>&nbsp; &nbsp; static </span><span class="default">$eFollow </span><span class="keyword">= array(</span><span class="string">"sc"</span><span class="keyword">, </span><span class="string">"zc"</span><span class="keyword">, </span><span class="string">"cx"</span><span class="keyword">, </span><span class="string">"kx"</span><span class="keyword">, </span><span class="string">"qx"</span><span class="keyword">);<br><br>&nbsp; &nbsp; static </span><span class="default">$codingTable </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"e" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"i" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"j" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"o" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"u" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"p" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"t" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"f" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"v" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"w" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"g" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"k" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"q" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="default">48</span><span class="keyword">, </span><span class="string">"l" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">"m" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">"n" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="string">"r" </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"s" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">);<br><br>&nbsp; &nbsp; public static function </span><span class="default">getCologneHash</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (empty(</span><span class="default">$word</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Exceptions<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">] == </span><span class="string">"cr"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">4</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eLeading</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$i </span><span class="keyword">!= </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] . </span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">self</span><span class="keyword">::</span><span class="default">$eFollow</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">8</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// normal encoding<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]==</span><span class="string">""</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">$codingTable</span><span class="keyword">[</span><span class="default">$word</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// delete double values<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">]) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// delete vocals<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&gt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// omitting first characer code and h<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br> <br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48763">  
  <a class="name">
  <strong class="user"><em>Marc Quinton.</em></strong></a><div class="date" title="2005-01-06 06:53"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48763">
<div class="phpcode"><code><span class="html">
a French soundex version ; could be used for other foreigns languages where soudex lacks. Perhaps, a class with each language specifics could be writen.<br><br><a rel="nofollow" target="_blank">http://www.php-help.net/sources-php/a.french.adapted.soundex.289.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="29815">  
  <a class="name">
  <strong class="user"><em>fie at myrealbox dot com</em></strong></a><div class="date" title="2003-02-25 05:34"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom29815">
<div class="phpcode"><code><span class="html">
administrator at zinious dot com:<br><br>Sorry but your code wasnt soundex compliant<br>here were my results with your code, my code, and the default..<br><br>string: rest<br>R620 perform administrator's function 0.009452<br>R230 perform cg's function 0.001779<br>R230 perform default soundex function 9.4999999999956E-005<br><br>string: reset<br>R620 perform administrator's function 0.0055900000000001<br>R230 perform cg's function 0.00091799999999997<br>R230 perform default soundex function 0.00010600000000005<br><br>i dunno why the default, every once in a while, will for some reason be 9.xxx. very odd i think..<br>my code is at the bottom.. these tests were before the soundex modification as i discribe below..<br>btw for all the original specs on the soundex algorithm goto<br><a rel="nofollow" target="_blank">http://www.star-shine.net/~functionifelse/GFD/?word=soundex</a><br><br>dalibor dot toth at podravka dot hr:<br><br>yes it is perhaps sad that it gives you the same code,<br>even metaphone has that problem..<br>but one might not want to be so accurate.. if somone<br>is on search engine.. lets call it shmoogle looking<br>for "php array reset" and search for "php array rest"<br>then shmoogle might return stuff about beds and such..<br>(if they were all stupid and didnt use the first words<br>as more important) so anyways shmoogle might need it to<br>be less accurate in such cases.. but nonetheless..<br>my fix for this is to add the number of syllables at the end of the string making it 5 characters long..<br>this would work as fallows..<br><br>code at: <a rel="nofollow" target="_blank">http://star-shine.net/~functionifelse/cg_soundex.php</a><br><br>or if you wanted to just use the default soundex function<br><br>$str = soundex($str).cg_sylc($str);<br><br>revolutionary more or less.. problly less...<br>This function is only meant for one word though.. i'd like to see someone<br>modify it to use split and run it through a loop to get each words cg_soundex<br>that'll be fun ;)<br>i would also like to sujest to the php zend apache kinda people who make php<br>to add an optional additional variable the user can specify as fallows<br><br>soundex("string",SYL);<br><br>which would return the number of syllables at the end of the string<br>highly accurate sound testing woo! also you could add VOW for vowels<br>and CONS for consonant or whatever else someone would want..<br>but i really think the number of syllables will be pleanty efficiant.<br>umm.. if this helps anyone your welcome.. ummm.. good luck in all<br>your php adventures.. oh... and the final results<br><br>syllables<br>1 rest<br>2 reset<br>metaphone<br>RST rest<br>RST reset<br>soundex<br>R230 rest<br>R230 reset<br><br>string: rest<br>R2301 perform cg's function 0.00211<br>R230 perform default soundex function 0.00011299999999997<br><br>string: reset<br>R2302 perform cg's function 0.001691<br>R230 perform default soundex function 0.00010399999999999<br><br>the default function is a tad bit faster..<br>so maybe they will add this option and we'll have speed and accuracy.<br><br>SILENT WIND OF DOOM WOOSH!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45843">  
  <a class="name">
  <strong class="user"><em>justin at NO dot blukrew dot SPAM dot com</em></strong></a><div class="date" title="2004-09-21 04:18"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45843">
<div class="phpcode"><code><span class="html">
I originally looked at soundex() because I wanted to compare how individual letters sounded. So, when pronouncing a string of generated characters it would be easy to to distinguish them from eachother.&nbsp; (ie, TGDE is hard to distinguish, whereas RFQA is easier to understand). The goal was to generate IDs that could be easily understood with a high degree of accuracy over a radio of varying quality. I quickly figured out that soundex and metaphone wouldn't do this (they work for words), so I wrote the following to help out. The ID generation function iteratively calls chrSoundAlike() to compare each new character with the preceeding characters. I'd be interested in recieving any feedback on this. Thanks.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">chrSoundAlike</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">, </span><span class="default">$char2</span><span class="keyword">, </span><span class="default">$opts </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$char1 </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$char2 </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$char2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$opts&nbsp; </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// Setup the sets of characters that sound alike.<br>&nbsp; &nbsp; // (Options: include numbers, include W, include both, or default is none of those.)<br>&nbsp; &nbsp; </span><span class="keyword">switch (</span><span class="default">$opts</span><span class="keyword">) {<br>&nbsp; &nbsp; case </span><span class="string">'NUMBERS'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; case </span><span class="string">'STRICT'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; case </span><span class="string">'BOTH'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; default:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sets </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'P'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'V'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'X'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">3 </span><span class="keyword">=&gt; array(</span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">4 </span><span class="keyword">=&gt; array(</span><span class="string">'M'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">5 </span><span class="keyword">=&gt; array(</span><span class="string">'Q'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// See if $char1 is in a set.<br>&nbsp; &nbsp; </span><span class="default">$matchset </span><span class="keyword">= array();<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$sets</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$char1</span><span class="keyword">, </span><span class="default">$sets</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$matchset </span><span class="keyword">= </span><span class="default">$sets</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// IF char2 is in the same set as char1, or if char1 and char2 and the same, then return true.<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$char2</span><span class="keyword">, </span><span class="default">$matchset</span><span class="keyword">) OR </span><span class="default">$char1 </span><span class="keyword">== </span><span class="default">$char2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33922">  
  <a class="name">
  <strong class="user"><em>mail at gettheeawayspam dot iaindooley dot com</em></strong></a><div class="date" title="2003-07-10 11:04"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33922">
<div class="phpcode"><code><span class="html">
The soundex 'different letter in front' problem can be solved by using levenshtein() on the soundex codes. in my application, which is searching a database of album names for entries that match a particular user provided string, i do the following:<br><br>1. Search the database for the exact name<br>2. Search the database for entries where the name occurs anyway as a string<br>3. Search the database for entries where any of the words in the name (if the user has typed in more than one word) is present, except for little words (and, the, of etc)<br>4. Then, if all this fails, I go to plan b:<br><br>- calculate the levenshtein distance (levenshtein()) between the user search term and each of the entries in the database as a percentage of the length of the user search term entered<br><br>- calculate the levenshtein distance between the metphone codes of the user search term entered and each field in the database as a percentage of the length of the metaphone code of the user search term entered<br><br>- calculate the levenshtein distance between the soundex codes of the user search term entered and each field in the database as a percentage of the length of the soundex code of the original user search term entered<br><br>if any of these percentages is less than 50 (means that two soundex codes with different first letters will be accepted!!) then the entry is accepted as a possible match.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32854">  
  <a class="name">
  <strong class="user"><em>pee whitt at dental dot ufl dor edu</em></strong></a><div class="date" title="2003-06-09 06:12"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32854">
<div class="phpcode"><code><span class="html">
fie at myrealbox dot com-<br><br>regarding your soudex syllable request- i think counting vowel clusters in the word will result in an accurate count of syllables.&nbsp; so no soudex feature is necessary, just count through the chars in the word, and everytime you run from vowel to consanant, increment the syllable count.<br><br>using this logic, this sentence is categorized as follows.<br>2 1 2 1 1 (3) (0) (4) (0) 2<br><br>where (#) marks a word that is incorrectly categorized.&nbsp; i'm sure usiong a little thinking one could figure out the logic in those cases that would result in an accurate count.&nbsp; counting changes from vowel to consanant would yield-<br>(1) 1 2 1 2 1 (4) 1 2<br><br>taking the average and then cieling of the two types would fix most of the errors.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="27838">  
  <a class="name">
  <strong class="user"><em>info at nederlandsch dot net</em></strong></a><div class="date" title="2002-12-20 05:26"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom27838">
<div class="phpcode"><code><span class="html">
MySQL soundex (3.23.49) doesn't examine the first character at all to see whether it should be skipped. Therefore the Dutch name of The Hague, the country's government seat, 's-Gravenhage will give a soundex value of '261 in MySQL and S615 in PHP.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="2708">  
  <a class="name">
  <strong class="user"><em>cap at capsi dot cx</em></strong></a><div class="date" title="1999-12-13 07:16"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom2708">
<div class="phpcode"><code><span class="html">
soundex() unfortunately is very sensitive about the first character. It is not possible to use it and have Clansy and Klansy return the same value. If you want to do a phonetic search on such names you will still need to write a routine to evaluate C452 as being similar to K452.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.soundex.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:18 GMT -->


</body></html>