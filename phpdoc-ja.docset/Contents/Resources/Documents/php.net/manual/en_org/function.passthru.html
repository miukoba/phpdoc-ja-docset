<html><!-- Mirrored from php.net/manual/en/function.passthru.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:06 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>passthru</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.passthru.html">
 <link rel="shorturl" href="http://php.net/passthru">
 <link rel="alternate" href="http://php.net/passthru" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.exec.html">
 <link rel="prev" href="function.exec.html">
 <link rel="next" href="function.proc-close.html">

 <link rel="alternate" href="function.passthru.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.passthru.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.passthru.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.passthru.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.passthru.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.passthru.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.passthru.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.passthru.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.passthru.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.passthru.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.passthru.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.process.html">Process Control Extensions</a></li>      <li><a href="book.exec.html">Program execution</a></li>      <li><a href="ref.exec.html">Program execution Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.passthru" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">passthru</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">passthru</span> â€” <span class="dc-title">Execute an external program and display raw output</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.passthru-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>passthru</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&amp;$return_var</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   The <span class="function"><strong>passthru()</strong></span> function is similar to the
   <span class="function"><a href="function.exec.html" class="function">exec()</a></span> function in that it executes a
   <code class="parameter">command</code>. This function
   should be used in place of <span class="function"><a href="function.exec.html" class="function">exec()</a></span> or
   <span class="function"><a href="function.system.html" class="function">system()</a></span> when the output from the Unix command
   is binary data which needs to be passed directly back to the
   browser.  A common use for this is to execute something like the
   pbmplus utilities that can output an image stream directly.  By
   setting the Content-type to <em>image/gif</em> and
   then calling a pbmplus program to output a gif, you can create
   PHP scripts that output images directly.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.passthru-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">command</code></dt>

     <dd>

      <p class="para">
       The command that will be executed.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_var</code></dt>

     <dd>

      <p class="para">
       If the <code class="parameter">return_var</code> argument is present, the 
       return status of the Unix command will be placed here.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.passthru-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   No value is returned.
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.passthru-notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><strong class="warning">Warning</strong><p class="para">When allowing user-supplied data to be
passed to this function, use
<span class="function"><a href="function.escapeshellarg.html" class="function">escapeshellarg()</a></span> or <span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span>
to ensure that users cannot trick the system into executing arbitrary
commands.</p></div>
  <blockquote class="note"><p><strong class="note">Note</strong>: </p><p class="para">If a program is started with this function,
in order for it to continue running in the background, the output of the
program must be redirected to a file or another output stream. Failing to do so
will cause PHP to hang until the execution of the program ends.</p><p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">When
<a href="features.safe-mode.html" class="link">safe mode</a> is enabled, you can only
execute files within the <a href="ini.sect.safe-mode.html#ini.safe-mode-exec-dir" class="link">safe_mode_exec_dir</a>.
For practical reasons, it is currently not allowed to have <em>..</em>
components in the path to the executable.</span></p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">With <a href="features.safe-mode.html" class="link">safe mode</a> enabled,
the command string is escaped with <span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span>. Thus,
<em>echo y | echo x</em> becomes <em>echo y \| echo x</em>.</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.passthru-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.exec.html" class="function" rel="rdfs-seeAlso">exec()</a> - Execute an external program</span></li>
    <li class="member"><span class="function"><a href="function.system.html" class="function" rel="rdfs-seeAlso">system()</a> - Execute an external program and display the output</span></li>
    <li class="member"><span class="function"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - Opens process file pointer</span></li>
    <li class="member"><span class="function"><a href="function.escapeshellcmd.html" class="function" rel="rdfs-seeAlso">escapeshellcmd()</a> - Escape shell metacharacters</span></li>
    <li class="member"><a href="language.operators.execution.html" class="link">backtick operator</a></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="54108">  
  <a class="name">
  <strong class="user"><em>igor at bboy dot ru</em></strong></a><div class="date" title="2005-06-23 01:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54108">
<div class="phpcode"><code><span class="html">
If you are using passthru() to download files (for dynamically generated content or something outside webserver root) using similar code:<br><br>header("Content-Type: application/octet-stream");<br>header("Content-Disposition: attachment; filename=\"myfile.zip\"");<br>header("Content-Length: 11111");<br>passthru("cat myfile.zip",$err);<br><br>and your download goes fine, but subsequent downloads / link clicks are screwed up, with headers and binary data being all over the website, try putting<br><br>exit();<br><br>after the passthrough. This will exit the script after the download is done and will not interfere with any future actions.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84773">  
  <a class="name">
  <strong class="user"><em>Chroot</em></strong></a><div class="date" title="2008-07-29 09:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84773">
<div class="phpcode"><code><span class="html">
If you have chrooted apache and php, you will also want to put /bin/sh into the chrooted environment. Otherwise, the exec() or passthru() will not function properly, and will produce error code 127, file not found.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101148">  
  <a class="name">
  <strong class="user"><em>myselfasunder at gmail dot com dot dfvuks</em></strong></a><div class="date" title="2010-11-29 01:00"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101148">
<div class="phpcode"><code><span class="html">
PHP's program-execution commands fail miserably when it comes to STDERR, and the proc_open() command doesn't work all that consistently in non-blocking mode under Windows.<br><br>This command, although useful, is no different. To form a mechanism that will see/capture both STDOUT and STDERR output, pipe the command to the 'tee' command (which can be found for Windows), and wrap the whole thing in output buffering.<br><br>Dustin Oprea</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15799">  
  <a class="name">
  <strong class="user"><em>andreas dot hochsteger at oeamtc dot at</em></strong></a><div class="date" title="2001-10-03 07:51"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15799">
<div class="phpcode"><code><span class="html">
If you sometimes get no output from passthru() use system() instead. This solved this problem for me (php 4.0.5 on Tru64 Unix compiled with gcc).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79361">  
  <a class="name">
  <strong class="user"><em>jo at durchholz dot org</em></strong></a><div class="date" title="2007-11-22 12:17"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79361">
<div class="phpcode"><code><span class="html">
Note to Paul Giblock: the command *is* run through the shell.<br>You can verify this on any Linux system with<br><br><span class="default">&lt;?php<br>passthru </span><span class="keyword">(</span><span class="string">'echo $PATH'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>You'll get the content of the PATH environment variable, not the string $PATH.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55643">  
  <a class="name">
  <strong class="user"><em>stuartc1 at NOSPAM dot hotmail dot com</em></strong></a><div class="date" title="2005-08-09 07:52"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55643">
<div class="phpcode"><code><span class="html">
Thought it might beuseful to note the passthru seems to supress error messages whilst being run in Dos on Windows (test on NT).<br><br>To show FULL raw output including errors, use system().</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32662">  
  <a class="name">
  <strong class="user"><em>swbrown at ucsd dot edu</em></strong></a><div class="date" title="2003-06-03 08:41"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32662">
<div class="phpcode"><code><span class="html">
passthru() seems absolutely determined to buffer output no matter what you do, even with ob_implicit_flush().&nbsp; The solution seems to be to use popen() instead.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="13535">  
  <a class="name">
  <strong class="user"><em>sidney at jigsaw dot nl</em></strong></a><div class="date" title="2001-06-20 05:25"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13535">
<div class="phpcode"><code><span class="html">
PJ's ulimit example is nice; however, if you include multiple commands in the script after the ulimit command, each gets its own, seperate 60 second time slot!&lt;br&gt;
<br>
<br>Furthermore, these sixty seconds are *CPU* time. Most programs hang for other reasons than CPU hogging (for example, waiting for a database connection) so for most purposes the number 60 is rather too high.&lt;br&gt;
<br>
<br>Try "ulimit -t 1" first, which will give you about 10^9 cycles on modern hardware -- quite enough to get a lot of work done!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59507">  
  <a class="name">
  <strong class="user"><em>Stuart Eve</em></strong></a><div class="date" title="2005-12-08 11:24"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59507">
<div class="phpcode"><code><span class="html">
I dunno if anyone else might find this useful, but when I was trying to use the passthru() command on Suse9.3 I was having no success with the command:<br><br>$command = 'gdal_translate blahahahaha';<br><br>passthru($command);<br><br>It only worked once I put:<br><br>$command = '/usr/bin/local/gdal_translate blalalala';<br><br>passthru($command);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57754">  
  <a class="name">
  <strong class="user"><em>vijayramanan at rediffmail dot com</em></strong></a><div class="date" title="2005-10-13 03:09"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57754">
<div class="phpcode"><code><span class="html">
I had an issue when i used exec<br><br>I think we were echoing information on the test.php script.<br>for eg: when we tried <br><br>exec(php test.php,$array,$error);<br><br>the return was 127 and the code was failing.<br><br>checking the note on this page gave us a hint to use passthru instead.<br>The only thing to note is that you need to provide the fuull path.<br><br>now our command became<br><br>passthru(/bin/php /pathtotest/test.php,$array,$error);<br><br>this works.<br><br>yipeee!!!!!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50759">  
  <a class="name">
  <strong class="user"><em>sarel dot w at envent dot co dot za</em></strong></a><div class="date" title="2005-03-08 11:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50759">
<div class="phpcode"><code><span class="html">
Zak Estrada<br>14-Dec-2004 11:21 <br>Remember to use the full path (IE '/usr/local/bin/foo' instead of 'foo') when using passthru, otherwise you'll get an exit code of 127 (command not found).<br><br>Remember, you'll also get this error if your file does not have executable permission.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50540">  
  <a class="name">
  <strong class="user"><em>puppy at cyberpuppy dot org</em></strong></a><div class="date" title="2005-03-02 02:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50540">
<div class="phpcode"><code><span class="html">
Regarding swbrown's comment...you need to use an output buffer if you don't want the data displayed.<br><br>For example:<br>ob_start();<br>passthru("&lt;i&gt;command&lt;/i&gt;");<br>$var = ob_get_contents();<br>ob_end_clean(); //Use this instead of ob_flush()<br><br>This gets all the output from the command, and exits without sending any data to stdout.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42732">  
  <a class="name">
  <strong class="user"><em>php @ richud dot com</em></strong></a><div class="date" title="2004-05-27 08:30"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42732">
<div class="phpcode"><code><span class="html">
Regarding kpierre's post, be mindful that if you shell script errors, you will find the error output from it in the base error_log file (not virtualhost error_log) in apache.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35540">  
  <a class="name">
  <strong class="user"><em>jcr at marvel-databadge dot com</em></strong></a><div class="date" title="2003-09-04 11:23"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom35540">
<div class="phpcode"><code><span class="html">
With apache 2.x on RH9 passthru() writes 1 byte at a time. Apache 2.x buffers and chunk encodes the output for you - but the chunked encoding devides the output in chunks of 1 byte each...thus several bytes of overhead per byte. I guess that buffering behaviour is by design - but caused problems for me with IE adobe acrobot 5 plugin. The plugin doesn't like like it if you send it a stream of 1 byte chunks - it tells you your file is not a pdf or gives a blank screen. Using output buffering (ob_start / ob_endflush) gives reasonable size chunks and the plugin works OK.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18647">  
  <a class="name">
  <strong class="user"><em>kpierre at fit dot edu</em></strong></a><div class="date" title="2002-01-30 07:35"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18647">
<div class="phpcode"><code><span class="html">
The documention does not mention that passthru() will only display standard output and not standard error.<br><br>If you are running a script you can pipe the STDERR to STDOUT by doing <br><br>exec 2&gt;&amp;1<br><br>Eg. the script below will actually print something with the passthru() function...<br><br>#!/bin/sh<br>exec 2&gt;&amp;1<br>ulimit -t 60<br>cat nosuchfile.txt</span>
</code></div>
  </div>
 </div>
  <div class="note" id="11298">  
  <a class="name">
  <strong class="user"><em>PJ at piggei dot com</em></strong></a><div class="date" title="2001-02-14 05:06"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom11298">
<div class="phpcode"><code><span class="html">
About the problem of zombies, you may call a bash script like this:
<br>
<br>--------------------------
<br>#! /bin/bash
<br>ulimit -t 60
<br>
<br>&lt;your command here&gt;
<br>--------------------------</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60314">  
  <a class="name">
  <strong class="user"><em>nuker at list dot ru</em></strong></a><div class="date" title="2006-01-03 05:51"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60314">
<div class="phpcode"><code><span class="html">
I wrote function, that gets proxy server value from the Internet Explorer (from<br>registry). It was tested in Windows XP Pro<br><br>(Sorry for my English)<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getProxyFromIE</span><span class="keyword">()<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"reg query \"HKEY_CURRENT_USER\Software\Microsoft"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\Windows\CurrentVersion\Internet Settings\" /v ProxyEnable"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$proxyenable</span><span class="keyword">,</span><span class="default">$proxyenable_status</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"reg query \"HKEY_CURRENT_USER\Software\Microsoft"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"\Windows\CurrentVersion\Internet Settings\" /v ProxyServer"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$proxyserver</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$proxyenable_status</span><span class="keyword">!=</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">#Can't access the registry! Very very bad...<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$enabled</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$proxyenable</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">],-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$enabled</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$proxy</span><span class="keyword">=</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">"^[ \t]{1,10}ProxyServer\tREG_SZ[ \t]{1,20}"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$proxyserver</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[\=\;]"</span><span class="keyword">,</span><span class="default">$proxy</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$proxy</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">";"</span><span class="keyword">,</span><span class="default">$proxy</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$proxy </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"http"</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$proxy</span><span class="keyword">=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"http="</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(@!</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\:"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"[0-9]{1,5}$"</span><span class="keyword">,</span><span class="default">$proxy</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$proxy</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$proxy</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span>Note, that this function returns FALSE if proxy is disabled in Internet<br>Explorer. This function returns ONLY HTTP proxy server.<br><br>Usage:<br><span class="default">&lt;?php<br>$proxy</span><span class="keyword">=</span><span class="default">getProxyFromIE</span><span class="keyword">();<br>if(!</span><span class="default">$proxy</span><span class="keyword">)<br>echo </span><span class="string">"Can't get proxy!"</span><span class="keyword">;<br>else<br>echo </span><span class="default">$proxy</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75229">  
  <a class="name">
  <strong class="user"><em>Paul Giblock</em></strong></a><div class="date" title="2007-05-18 11:30"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75229">
<div class="phpcode"><code><span class="html">
Stuart:<br><br>The pasthru function does not execute the program through the shell.&nbsp; What this mean, among other things, is that your PATH variable is never set.&nbsp; Therefore, you have to use full paths on everything.<br><br>I believe system() will run your program underneith a shell.&nbsp; This allow the program to run in a 'normal' environment.<br><br>-Paul</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48174">  
  <a class="name">
  <strong class="user"><em>Zak Estrada</em></strong></a><div class="date" title="2004-12-14 08:21"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48174">
<div class="phpcode"><code><span class="html">
Remember to use the full path (IE '/usr/local/bin/foo' instead of 'foo') when using passthru, otherwise you'll get an exit code of 127 (command not found).</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.passthru.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:07 GMT -->


</body></html>