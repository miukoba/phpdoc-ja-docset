<html><!-- Mirrored from php.net/manual/en/imagick.getimagesignature.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:26:08 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Imagick::getImageSignature</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="imagick.getimagesignature.html">
 <link rel="shorturl" href="imagick.getimagesignature.html">
 <link rel="alternate" href="imagick.getimagesignature.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.imagick.html">
 <link rel="prev" href="imagick.getimagescene.html">
 <link rel="next" href="imagick.getimagesize.html">

 <link rel="alternate" href="imagick.getimagesignature.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/imagick.getimagesignature.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/imagick.getimagesignature.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/imagick.getimagesignature.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/imagick.getimagesignature.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/imagick.getimagesignature.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/imagick.getimagesignature.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/imagick.getimagesignature.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/imagick.getimagesignature.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/imagick.getimagesignature.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/imagick.getimagesignature.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.utilspec.image.html">Image Processing and Generation</a></li>      <li><a href="book.imagick.html">ImageMagick</a></li>      <li><a href="class.imagick.html">Imagick</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="imagick.getimagesignature" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::getImageSignature</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::getImageSignature</span> â€” <span class="dc-title">Generates an SHA-256 message digest</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.getimagesignature-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>Imagick::getImageSignature</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   Generates an SHA-256 message digest for the image pixel stream.
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.getimagesignature-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a string containing the SHA-256 hash of the file.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-imagick.getimagesignature-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   Throws ImagickException on error.
  </p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="111776">  
  <a class="name">
  <strong class="user"><em>vojtech at kral dot hk</em></strong></a><div class="date" title="2013-03-27 12:39"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111776">
<div class="phpcode"><code><span class="html">
Well the SHA-2 digest returned by this function IS different from what you get when you hash the file, because this funtions hashesh the pixels themselves.<br><br>This is very useful when you need to identify identical images, because if you just hash the files, you may get different hashes even if the image is the same pixel by pixel because of differences in metadata or different format (ie PNG vs BMP) or perhaps stray bytes at the end of file etc...<br><br>There is no point in posting code that hashes files, that is completely irrelevant here.<br><br>Also, I doubt you really need to pick a different hashing algo, SHA-2 should be perfectly fine for this job.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113469">  
  <a class="name">
  <strong class="user"><em>barrerasalom at gmail dot com</em></strong></a><div class="date" title="2013-10-15 02:15"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113469">
<div class="phpcode"><code><span class="html">
Please take that note tha different versions of ImageMagick could create different signatures, even when working with the same image.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109180">  
  <a class="name">
  <strong class="user"><em>holdoffhunger at gmail dot com</em></strong></a><div class="date" title="2012-06-26 11:51"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109180">
<div class="phpcode"><code><span class="html">
The getImageSignature function for the ImageMagick package in PHP returns only the SHA-1 hash value for an image.&nbsp; There are not any other algorithms available for it within the ImageMagick package, but fortunately, this is PHP and you have a wide array of hashing algorithms to use on any image file.&nbsp; The function hash_algos() will return an array of hashing algorithms available in PHP and the function hash_file() will take three parameters (one for the algorithm to use, one for the filename, and an optional variable for binary output).&nbsp; Instead of being limited to the SHA-1 algorithm of the getImageSignature function, you could use SHA-256, SHA-384, SHA-512, Whirlpool, HAVAL, Salsa, Gost, Adler32, CRC32, or MD5, among others and variations of these.<br><br>However, the SHA-1 result of the hash_file() function performed on a file does not return the same result as the SHA-1 of the getImageSignature() function.&nbsp; This leads me to believe that the SHA-1 of the getImageSignature() might be performed on the Imagick object itself, instead of the file, whereas the hash_file() function is clearly performed on the file itself.&nbsp; That's just a guess, though.<br><br>Some sample code for the alternate hashing algorithm, with every algorithm performed on the image file :<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Author: holdoffhunger@gmail.com<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // Set File for Hashing Function<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br><br>&nbsp; &nbsp; </span><span class="default">$filename_with_folder_for_hashing </span><span class="keyword">= </span><span class="string">"image_workshop/test_file.bmp"</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Acquire Dynamic Hashing Algorithm List<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br><br>&nbsp; &nbsp; </span><span class="default">$php_dynamic_hash_algorithms </span><span class="keyword">= </span><span class="default">hash_algos</span><span class="keyword">();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Count Dynamic Hashing Algorithm List<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$number_of_dynamic_hash_algorithms </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$php_dynamic_hash_algorithms</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Parse Dynamic Hashing Algorithm List<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$number_of_dynamic_hash_algorithms</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Get Current Hashing Algorithm<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current_hashing_algorithm </span><span class="keyword">= </span><span class="default">$php_dynamic_hash_algorithms</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Perform Hashing on File<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current_hashing_algorithm_hex_result </span><span class="keyword">= </span><span class="default">hash_file</span><span class="keyword">(</span><span class="default">$current_hashing_algorithm</span><span class="keyword">, </span><span class="default">$filename_with_folder_for_hashing</span><span class="keyword">, </span><span class="default">FALSE</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Print Hashed Results<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------------<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">print(</span><span class="string">"</span><span class="default">$current_hashing_algorithm</span><span class="string"> Algorithm ::: </span><span class="default">$current_hashing_algorithm_hex_result</span><span class="string">"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="string">"&lt;br&gt;&lt;br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>&nbsp; &nbsp; Example Results:<br>&nbsp; &nbsp; ...........................<br><br>md2 Algorithm ::: 03205df9c6717d74f1f003c66f58e98a<br><br>md4 Algorithm ::: b2a204a2e5c3968d2abd5dc372fbee10<br><br>md5 Algorithm ::: b9d92a61714b221d24c7730d4764ca82<br><br>sha1 Algorithm ::: 8db4c92346c26568b13ea43fbcf514e37942a41a<br><br>(and so on for 34 more algorithms)...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108724">  
  <a class="name">
  <strong class="user"><em>holdoffhunger at gmail dot com</em></strong></a><div class="date" title="2012-05-20 10:30"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108724">
<div class="phpcode"><code><span class="html">
The getImageSignature function returns the SHA-256 hash value, which is 256 bits (or 32 bytes) in length.&nbsp; SHA-256 is part of the SHA-2 set of cryptographic hash functions designed by the NSA, which also includes SHA-224, SHA-384, and SHA-512.&nbsp; According to Wikipedia, there are some security flaws in it similar to the set of SHA-1 hash functions, which should be fixed with SHA-3, eventually.&nbsp; Unlike MD5 or the SHA-1 set of cryptographic functions, SHA-2 has had no collisions discovered yet (a collision is an incident where two different pieces of data result in the same hash value from the hashing function).&nbsp; For the time being, it seems to be the most efficient method for creating a small (32-byte), uniquely-identifiable, generally-secure value for either a file or a piece of data.<br><br>Some sample code :<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Author: holdoffhunger@gmail.com<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; // Imagick Type<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------<br><br>&nbsp; &nbsp; </span><span class="default">$imagick_type </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Open File<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$file_to_grab </span><span class="keyword">= </span><span class="string">"image_workshop_directory/test.bmp"</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$file_handle_for_viewing_image_file </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file_to_grab</span><span class="keyword">, </span><span class="string">'a+'</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Grab File<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------<br><br>&nbsp; &nbsp; </span><span class="default">$imagick_type</span><span class="keyword">-&gt;</span><span class="default">readImageFile</span><span class="keyword">(</span><span class="default">$file_handle_for_viewing_image_file</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Get Image SHA-256 Signature / Hash Value<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$imagick_type_signature </span><span class="keyword">= </span><span class="default">$imagick_type</span><span class="keyword">-&gt;</span><span class="default">getImageSignature</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Print Image Signature / Hash Value<br>&nbsp; &nbsp; &nbsp; &nbsp; // ---------------------------------------------<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">print(</span><span class="default">$imagick_type_signature</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Results of this done on a standard BMP image :<br><br>cb2f387a7b23d11340ad1f5ba9c765125ea6b2d50a0d25412abe1ce568adac68</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/imagick.getimagesignature.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:26:09 GMT -->


</body></html>