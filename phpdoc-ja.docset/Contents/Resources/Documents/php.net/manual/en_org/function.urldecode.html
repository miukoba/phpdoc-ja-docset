<html><!-- Mirrored from php.net/manual/en/function.urldecode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:57 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>urldecode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.urldecode.html">
 <link rel="shorturl" href="http://php.net/urldecode">
 <link rel="alternate" href="http://php.net/urldecode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.url.html">
 <link rel="prev" href="function.rawurlencode.html">
 <link rel="next" href="function.urlencode.html">

 <link rel="alternate" href="function.urldecode.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.urldecode.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.urldecode.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.urldecode.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.urldecode.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.urldecode.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.urldecode.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.urldecode.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.urldecode.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.urldecode.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.urldecode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.other.html">Other Basic Extensions</a></li>      <li><a href="book.url.html">URLs</a></li>      <li><a href="ref.url.html">URL Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.urldecode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">urldecode</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">urldecode</span> — <span class="dc-title">Decodes URL-encoded string</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.urldecode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>urldecode</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   )</div>

  <p class="para rdfs-comment">
   Decodes any <em>%<span class="replaceable">##</span></em>
   encoding in the given string. Plus symbols ('<em>+</em>') are
   decoded to a space character.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.urldecode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       The string to be decoded.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.urldecode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the decoded string.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.urldecode-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4219">
    <p><strong>Example #1 <span class="function"><strong>urldecode()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$query&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"my=apples&amp;are=green+and+red"</span><span style="color: #007700">;<br><br>foreach&nbsp;(</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">'&amp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$chunk</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$param&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">"="</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$chunk</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$param</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Value&nbsp;for&nbsp;parameter&nbsp;\"%s\"&nbsp;is&nbsp;\"%s\"&lt;br/&gt;\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">urldecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$param</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]),&nbsp;</span><span style="color: #0000BB">urldecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$param</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.urldecode-notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    The superglobals <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var> and <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>
    are already decoded.  Using <span class="function"><strong>urldecode()</strong></span> on an element
    in <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var> or <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var> could have
    unexpected and dangerous results.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.urldecode-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.urlencode.html" class="function" rel="rdfs-seeAlso">urlencode()</a> - URL-encodes string</span></li>
    <li class="member"><span class="function"><a href="function.rawurlencode.html" class="function" rel="rdfs-seeAlso">rawurlencode()</a> - URL-encode according to RFC 3986</span></li>
    <li class="member"><span class="function"><a href="function.rawurldecode.html" class="function" rel="rdfs-seeAlso">rawurldecode()</a> - Decode URL-encoded strings</span></li>
    <li class="member"><a href="http://www.faqs.org/rfcs/rfc3986" class="link external">»&nbsp;RFC 3986</a></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="101401">  
  <a class="name">
  <strong class="user"><em>alejandro at devenet dot net</em></strong></a><div class="date" title="2010-12-14 06:27"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101401">
<div class="phpcode"><code><span class="html">
When the client send Get data, utf-8 character encoding have a tiny problem with the urlencode.
<br>Consider the "º" character. 
<br>Some clients can send (as example)
<br>foo.php?myvar=%BA
<br>and another clients send
<br>foo.php?myvar=%C2%BA (The "right" url encoding)
<br>
<br>in this scenary, you assign the value into variable $x
<br>
<br><span class="default">&lt;?php
<br>$x </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'myvar'</span><span class="keyword">];
<br></span><span class="default">?&gt;
<br></span>
<br>$x store: in the first case "�" (bad) and in the second case "º" (good)
<br>
<br>To fix that, you can use this function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">to_utf8</span><span class="keyword">( </span><span class="default">$string </span><span class="keyword">) {
<br></span><span class="comment">// From <a rel="nofollow" target="_blank">http://w3.org/International/questions/qa-forms-utf-8.html</a>
<br>&nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^(?:
<br>&nbsp; &nbsp; &nbsp; [\x09\x0A\x0D\x20-\x7E]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # ASCII
<br>&nbsp; &nbsp; | [\xC2-\xDF][\x80-\xBF]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; # non-overlong 2-byte
<br>&nbsp; &nbsp; | \xE0[\xA0-\xBF][\x80-\xBF]&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; # excluding overlongs
<br>&nbsp; &nbsp; | [\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}&nbsp; # straight 3-byte
<br>&nbsp; &nbsp; | \xED[\x80-\x9F][\x80-\xBF]&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; # excluding surrogates
<br>&nbsp; &nbsp; | \xF0[\x90-\xBF][\x80-\xBF]{2}&nbsp; &nbsp; &nbsp; # planes 1-3
<br>&nbsp; &nbsp; | [\xF1-\xF3][\x80-\xBF]{3}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # planes 4-15
<br>&nbsp; &nbsp; | \xF4[\x80-\x8F][\x80-\xBF]{2}&nbsp; &nbsp; &nbsp; # plane 16
<br>)*$%xs'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">) ) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">iconv</span><span class="keyword">( </span><span class="string">'CP1252'</span><span class="keyword">, </span><span class="string">'UTF-8'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>and assign in this way:
<br>
<br><span class="default">&lt;?php
<br>$x </span><span class="keyword">= </span><span class="default">to_utf8</span><span class="keyword">( </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'myvar'</span><span class="keyword">] );
<br></span><span class="default">?&gt;
<br></span>
<br>$x store: in the first case "º" (good) and in the second case "º" (good)
<br>
<br>Solve a lot of i18n problems.
<br>
<br>Please fix the auto-urldecode of $_GET var in the next PHP version.
<br>
<br>Bye.
<br>
<br>Alejandro Salamanca</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79595">  
  <a class="name">
  <strong class="user"><em>mkaganer at gmail dot com</em></strong></a><div class="date" title="2007-12-04 02:58"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79595">
<div class="phpcode"><code><span class="html">
B.H.<br><br>I had troubles converting Unicode-encoded data in $_GET (like this: %u05D8%u05D1%u05E2) which is generated by JavaScript's escape() function to UTF8 for server-side processing.<br><br>Finally, i've found a simple solution (only 3 lines of code) that does it (at least in my configuration):<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">function </span><span class="default">utf8_urldecode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/%u([0-9a-f]{3,4})/i"</span><span class="keyword">,</span><span class="string">"&amp;#x\\1;"</span><span class="keyword">,</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br>&nbsp; &nbsp; return </span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="string">'UTF-8'</span><span class="keyword">);;<br>&nbsp; }<br></span><span class="default">?&gt;<br></span><br>note that documentation for html_entity_decode() states that "Support for multi-byte character sets was added at PHP 5.0.0" so this might not work for PHP 4</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113119">  
  <a class="name">
  <strong class="user"><em>aravind dot a dot padmanabhan at gmail dot com</em></strong></a><div class="date" title="2013-09-02 10:26"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113119">
<div class="phpcode"><code><span class="html">
It seems that the $_REQUEST global parameter is automatically decoded only if the content type is application/x-www-form-urlencoded.<br><br>if the content type is multipart/form-data. the data remains un-decoded. and we have to manually handle the decoding at our end</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36435">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2003-10-09 08:17"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36435">
<div class="phpcode"><code><span class="html">
nataniel, your function needs to be corrected as follows:<br><br>------------------------------------------------------------<br>function unicode_decode($txt) {<br>&nbsp; return ereg_replace('%u([[:alnum:]]{4})', '&amp;#x\1;',$txt);<br>}<br>------------------------------------------------------------<br><br>since some codes does not begin with %u0.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83798">  
  <a class="name">
  <strong class="user"><em>Jan Vratny</em></strong></a><div class="date" title="2008-06-12 05:09"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83798">
<div class="phpcode"><code><span class="html">
mkaganer at gmail dot com:<br><br>try using encodeURI() instead of encode() in javascript. That worked for me, while your solution did not on __some__ national characters (at least in IE6).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82281">  
  <a class="name">
  <strong class="user"><em>Joe</em></strong></a><div class="date" title="2008-04-03 11:11"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82281">
<div class="phpcode"><code><span class="html">
It's worth pointing out that if you are using AJAX and need to encode strings that are being sent to a PHP application, you may not need to decode them in PHP.<br><br><span class="default">&lt;?php<br></span><span class="keyword">echo </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">nl2br</span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'message'</span><span class="keyword">]));<br></span><span class="default">?&gt;<br></span><br>Will properly output a message sent with the javascript code if the message is encoded:<br><br>message = encodeURIComponent(message)<br><br>And is sent with an AJAX POST request with the header:<br>ajaxVar.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70180">  
  <a class="name">
  <strong class="user"><em>tikitiki at mybboard dot com</em></strong></a><div class="date" title="2006-10-05 03:56"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70180">
<div class="phpcode"><code><span class="html">
Here is a rewritten example that does the same thing but runs cleaner.
<br>
<br><span class="default">&lt;?php
<br>$a </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$QUERY_STRING</span><span class="keyword">);
<br>
<br>foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$b</span><span class="keyword">)
<br>{
<br>&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);
<br>&nbsp;&nbsp; echo </span><span class="string">'Value for parameter '</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])).</span><span class="string">' is '</span><span class="keyword">.</span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="66301">  
  <a class="name">
  <strong class="user"><em>Visual</em></strong></a><div class="date" title="2006-05-18 12:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom66301">
<div class="phpcode"><code><span class="html">
If you are escaping strings in javascript and want to decode them in PHP with urldecode (or want PHP to decode them automatically when you're putting them in the query string or post request), you should use the javascript function encodeURIComponent() instead of escape(). Then you won't need any of the fancy custom utf_urldecode functions from the previous comments.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51630">  
  <a class="name">
  <strong class="user"><em>spam at soiland dot no</em></strong></a><div class="date" title="2005-04-05 05:45"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51630">
<div class="phpcode"><code><span class="html">
About reg_var and "html reserved words"<br><br>Do not add spaces as the user suggests.<br><br>Instead, do what all HTML standards says and encode &amp; in URLs as &amp;amp; in your HTML. <br><br>The reason why &amp; works "most of the time" is that browsers are forgiving and just decode the &amp; as the &amp;-sign. This breaks whenever you have a variable that matches an HTML entity, like "gt" or "copy" or whatever. &amp;copy in your URL will be interpreted as &amp;copy;&nbsp; (the ; is not mandatory in SGML as it is "implied". In XML it is mandatory.).&nbsp;&nbsp; The result will be the same as if you had inserted the actual character into your source code, for instance by pressing alt-0169 and actually inserted � in your HTML.<br><br>Ie, use:<br><br>&lt;a href="?name=stain&amp;amp;fish=knott"&gt;mylink&lt;/a&gt;<br><br>Note that the decoding of &amp;amp; to &amp; is done in the browser, and it's done right after splitting the HTML into tags, attributes and content, but it works both for attributes and content.<br><br>This mean you should &amp;entitify all &amp;-s in any other HTML attributes as well, such as in a form with <br>&lt;input name="fish" value="fish &amp;amp; fries" /&gt;.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="29272">  
  <a class="name">
  <strong class="user"><em>smolniy at mtu dot ru</em></strong></a><div class="date" title="2003-02-07 02:42"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom29272">
<div class="phpcode"><code><span class="html">
For compatibility of new and old brousers:<br><br>%xx -&gt; char<br>%u0xxxx -&gt; char<br><br>function unicode_decode($txt) {<br> $txt = ereg_replace('%u0([[:alnum:]]{3})', '&amp;#x\1;',$txt);<br> $txt = ereg_replace('%([[:alnum:]]{2})', '&amp;#x\1;',$txt);<br> return ($txt);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="34280">  
  <a class="name">
  <strong class="user"><em>tomas at penajaca dot com dot br</em></strong></a><div class="date" title="2003-07-20 11:14"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom34280">
<div class="phpcode"><code><span class="html">
urldecode does not decode "%0"&nbsp; bypassing it. I can cause troble when you are working with fixed lenght strings.<br><br>You can you the function below.<br><br>function my_urldecode($string){<br><br>&nbsp; $array = split ("%",$string);<br><br>&nbsp; if (is_array($array)){<br>&nbsp; &nbsp; while (list ($k,$v) = each ($array)){<br>&nbsp; &nbsp; &nbsp;&nbsp; $ascii = base_convert ($v,16,10);<br>&nbsp; &nbsp; &nbsp;&nbsp; $ret .= chr ($ascii);<br>&nbsp; &nbsp; }<br> }<br> return ("$ret");<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64676">  
  <a class="name">
  <strong class="user"><em>rosty dot kerei at gmail dot com</em></strong></a><div class="date" title="2006-04-19 09:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64676">
<div class="phpcode"><code><span class="html">
This function doesn't decode unicode characters. I wrote a function that does.<br><br>function unicode_urldecode($url)<br>{<br>&nbsp; &nbsp; preg_match_all('/%u([[:alnum:]]{4})/', $url, $a);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach ($a[1] as $uniord)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $dec = hexdec($uniord);<br>&nbsp; &nbsp; &nbsp; &nbsp; $utf = '';<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if ($dec &lt; 128)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr($dec); <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if ($dec &lt; 2048)<br>&nbsp; &nbsp; &nbsp; &nbsp; { <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr(192 + (($dec - ($dec % 64)) / 64)); <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ($dec % 64)); <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; { <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf = chr(224 + (($dec - ($dec % 4096)) / 4096)); <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ((($dec % 4096) - ($dec % 64)) / 64)); <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $utf .= chr(128 + ($dec % 64)); <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $url = str_replace('%u'.$uniord, $utf, $url);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return urldecode($url);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36528">  
  <a class="name">
  <strong class="user"><em>caribe at flash-brasil dot com dot br</em></strong></a><div class="date" title="2003-10-13 01:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36528">
<div class="phpcode"><code><span class="html">
To allow urldecode to work with Brazilian characters as � � � and other just place this header command :<br><br>header('Content-type: text/html; charset=UTF-8');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31494">  
  <a class="name">
  <strong class="user"><em>regindk at hotmail dot com</em></strong></a><div class="date" title="2003-04-23 06:00"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31494">
<div class="phpcode"><code><span class="html">
About: bellani at upgrade4 dot it<br>$str = "pippo.php?param1=&amp;reg_var";<br>echo rawurldecode($str);<br>Gives:<br>pippo.php?param1=�_var<br>Instead of using a space you should exchange &amp; with the correct W3C &amp;amp;<br>Like this:<br>$str = "pippo.php?param1=&amp;amp;reg_var";<br>echo rawurldecode($str);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48481">  
  <a class="name">
  <strong class="user"><em>Matt Johnson</em></strong></a><div class="date" title="2004-12-25 04:49"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48481">
<div class="phpcode"><code><span class="html">
A reminder: if you are considering using urldecode() on a $_GET variable, DON'T!<br><br>Evil PHP:<br><br><span class="default">&lt;?php<br></span><span class="comment"># BAD CODE! DO NOT USE!<br></span><span class="default">$term </span><span class="keyword">= </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'sterm'</span><span class="keyword">]);<br></span><span class="default">?&gt;<br></span><br>Good PHP:<br><br><span class="default">&lt;?php<br>$term </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'sterm'</span><span class="keyword">];<br></span><span class="default">?&gt;<br></span><br>The webserver will arrange for $_GET to have been urldecoded once already by the time it reaches you!<br><br>Using urldecode() on $_GET can lead to extreme badness, PARTICULARLY when you are assuming "magic quotes" on GET is protecting you against quoting.<br><br>Hint: script.php?sterm=%2527 [...]<br><br>PHP "receives" this as %27, which your urldecode() will convert to "'" (the singlequote). This may be CATASTROPHIC when injecting into SQL or some PHP functions relying on escaped quotes -- magic quotes rightly cannot detect this and will not protect you!<br><br>This "common error" is one of the underlying causes of the Santy.A worm which affects phpBB &lt; 2.0.11.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21547">  
  <a class="name">
  <strong class="user"><em>igjav at cesga dot es</em></strong></a><div class="date" title="2002-05-16 11:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21547">
<div class="phpcode"><code><span class="html">
This seems to decode correctly between most browsers and charater coding configurations. Specially indicated for direct parsing of URL as it comes on environment variables:<br><br>function crossUrlDecode($source) {<br>&nbsp; &nbsp; $decodedStr = '';<br>&nbsp; &nbsp; $pos = 0;<br>&nbsp; &nbsp; $len = strlen($source);<br><br>&nbsp; &nbsp; while ($pos &lt; $len) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $charAt = substr ($source, $pos, 1);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($charAt == '�') {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $char2 = substr($source, $pos, 2);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= htmlentities(utf8_decode($char2),ENT_QUOTES,'ISO-8859-1');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos += 2;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(ord($charAt) &gt; 127) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= "&amp;#".ord($charAt).";";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif($charAt == '%') {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $hex2 = substr($source, $pos, 2);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dechex = chr(hexdec($hex2));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($dechex == '�') {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos += 2;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(substr($source, $pos, 1) == '%') {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $char2a = chr(hexdec(substr($source, $pos, 2)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= htmlentities(utf8_decode($dechex . $char2a),ENT_QUOTES,'ISO-8859-1');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= htmlentities(utf8_decode($dechex));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= $dechex;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos += 2;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $decodedStr .= $charAt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $pos++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $decodedStr;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30225">  
  <a class="name">
  <strong class="user"><em>bellani at upgrade4 dot it</em></strong></a><div class="date" title="2003-03-11 10:12"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30225">
<div class="phpcode"><code><span class="html">
If you have a "html reserved word" as variable name (i.e. "reg_var") and you pass it as an argument you will get&nbsp; a wrong url. i.e.<br><br>&lt;a href="pippo.php?param1=&amp;reg_var="&gt;go&lt;/a&gt;<br><br>you will get a wrong url like this <br><br>"pippo.php?param1=�_var"<br><br>Simply add a space between "&amp;" and "reg_var" and it will work!<br><br>&lt;a href="pippo.php?param1=&amp; reg_var="&gt;go&lt;/a&gt;<br><br>"pippo.php?param1=&amp;%20reg_var"<br><br>Works!!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90976">  
  <a class="name">
  <strong class="user"><em>mail dot roliveira at gmail dot com</em></strong></a><div class="date" title="2009-05-19 04:50"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90976">
<div class="phpcode"><code><span class="html">
Send json to PHP via AJAX (POST)
<br>
<br>If you send json data via ajax, and encode it with encodeURIComponent in javascript, then on PHP side, you will have to do stripslashes on your $_POST['myVar'].
<br>
<br>After this, you can do json_decode on your string.
<br>
<br>Ex.:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// first use encodeURIComponent on javascript to encode the string
<br>// receive json string and prepare it to json_decode
<br></span><span class="default">$jsonStr </span><span class="keyword">= </span><span class="default">stripslashes </span><span class="keyword">(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'action'</span><span class="keyword">]);
<br></span><span class="comment">// decode to php object
<br></span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_decode </span><span class="keyword">(</span><span class="default">$jsonStr</span><span class="keyword">);
<br>
<br></span><span class="comment">// $json is now a php object
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.urldecode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:58 GMT -->


</body></html>