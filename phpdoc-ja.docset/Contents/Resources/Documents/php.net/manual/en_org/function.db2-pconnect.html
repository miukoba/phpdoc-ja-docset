<html><!-- Mirrored from php.net/manual/en/function.db2-pconnect.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:58:32 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>db2_pconnect</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.db2-pconnect.html">
 <link rel="shorturl" href="http://php.net/db2-pconnect">
 <link rel="alternate" href="http://php.net/db2-pconnect" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.ibm-db2.html">
 <link rel="prev" href="function.db2-pclose.html">
 <link rel="next" href="function.db2-prepare.html">

 <link rel="alternate" href="function.db2-pconnect.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.db2-pconnect.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.db2-pconnect.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.db2-pconnect.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.db2-pconnect.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.db2-pconnect.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.db2-pconnect.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.db2-pconnect.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.db2-pconnect.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.db2-pconnect.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.db2-pconnect.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="book.ibm-db2.html">IBM DB2</a></li>      <li><a href="ref.ibm-db2.html">IBM DB2 Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.db2-pconnect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_pconnect</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_pconnect</span> â€” <span class="dc-title">
   Returns a persistent connection to a database
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-pconnect-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><strong>db2_pconnect</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$database</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
  ] )</div>



  <p class="para rdfs-comment">
   Returns a persistent connection to an IBM DB2 Universal Database, IBM
   Cloudscape, or Apache Derby database. 
  </p>

  <p class="para">
   For more information on persistent
   connections, refer to <a href="features.persistent-connections.html" class="xref">Persistent Database Connections</a>.
  </p>

  <p class="para">
   Calling <span class="function"><a href="function.db2-close.html" class="function">db2_close()</a></span> on a persistent connection always
   returns <strong><code>TRUE</code></strong>, but the underlying DB2 client connection remains open and
   waiting to serve the next matching <span class="function"><strong>db2_pconnect()</strong></span>
   request.
  </p>

  <p class="para">
   Users running version 1.9.0 or later of ibm_db2 should be aware that the
   extension will perform a transaction rollback on persistent connections at
   the end of a request, thus ending the transaction.  This prevents the
   transaction block from carrying over to the next request which uses that
   connection if script execution ends before the transaction block does.
  </p>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-pconnect-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">database</code></dt>

     <dd>

      <p class="para">
       The database alias in the DB2 client catalog.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       The username with which you are connecting to the database.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       The password with which you are connecting to the database.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       An associative array of connection options that affect the behavior
       of the connection, where valid array keys include:
       </p><dl>

        
         <dt>
<code class="parameter">autocommit</code></dt>

         <dd>

          <p class="para">
           Passing the <em>DB2_AUTOCOMMIT_ON</em> value turns
           autocommit on for this connection handle.
          </p>
          <p class="para">
           Passing the <em>DB2_AUTOCOMMIT_OFF</em> value turns
           autocommit off for this connection handle.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">DB2_ATTR_CASE</code></dt>

         <dd>

          <p class="para">
           Passing the <em>DB2_CASE_NATURAL</em> value specifies
           that column names are returned in natural case.
          </p>
          <p class="para">
           Passing the <em>DB2_CASE_LOWER</em> value specifies
           that column names are returned in lower case.
          </p>
          <p class="para">
           Passing the <em>DB2_CASE_UPPER</em> value specifies
           that column names are returned in upper case.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">CURSOR</code></dt>

         <dd>

          <p class="para">
           Passing the <em>DB2_FORWARD_ONLY</em> value specifies a
           forward-only cursor for a statement resource. This is the default
           cursor type and is supported on all database servers.
          </p>
          <p class="para">
           Passing the <em>DB2_SCROLLABLE</em> value specifies a
           scrollable cursor for a statement resource. This mode enables
           random access to rows in a result set, but currently is supported
           only by IBM DB2 Universal Database.
          </p>
         </dd>

        
       </dl>

      <p></p>
      <p class="para">
       The following new option is available in ibm_db2 version 1.7.0 
       and later. 
       </p><dl>

        
         <dt>
<code class="parameter">trustedcontext</code></dt>

         <dd>

          <p class="para">
           Passing the DB2_TRUSTED_CONTEXT_ENABLE value turns trusted context 
           on for this connection handle. This parameter cannot be set using 
           <span class="function"><a href="function.db2-set-option.html" class="function">db2_set_option()</a></span>.
          </p>
          <p class="para">
           This key works only if the database is cataloged (even if the 
           database is local), or if you specify the full DSN when you create  
           the connection.
          </p>
          <p class="para">
           To catalog the database, use following commands:
          </p>
          <p class="para">
           </p><pre class="literallayout">db2 catalog tcpip node loopback remote &lt;SERVERNAME&gt; server &lt;SERVICENAME&gt;
db2 catalog database &lt;LOCALDBNAME&gt; as &lt;REMOTEDBNAME&gt; at node loopback
db2 "update dbm cfg using svcename &lt;SERVICENAME&gt;"
db2set DB2COMM=TCPIP</pre>
          <p></p>
          
         </dd>

                     
      </dl>

      <p></p>
      <p class="para">
       The following new i5/OS options are available in ibm_db2 version 1.5.1 
       and later.
       </p><div class="tip"><strong class="tip">Tip</strong>
        <p class="para">Conflicting connection attributes used in conjunction with persistent 
         connections can produce indeterminate results on i5/OS. Site policies should 
         be establish for all applications using each persistent connection user 
         profile. The default DB2_AUTOCOMMIT_ON is suggested when using persistent connections.
        </p>
       </div>
       <dl>

        
         <dt>
<code class="parameter">i5_lib</code></dt>

         <dd>

          <p class="para">
           A character value that indicates the default library that will be 
           used for resolving unqualified file references. This is not valid 
           if the connection is using system naming mode.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_naming</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_NAMING_ON</em> value turns on DB2 UDB CLI iSeries 
           system naming mode. Files are qualified using the slash (/) delimiter. 
           Unqualified files are resolved using the library list for the job.
          </p>
          <p class="para">
           <em>DB2_I5_NAMING_OFF</em> value turns off DB2 UDB CLI default 
           naming mode, which is SQL naming. Files are qualified using the period (.) 
           delimiter. Unqualified files are resolved using either the default library 
           or the current user ID.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_commit</code></dt>

         <dd>

          <p class="para">
           The <code class="parameter">i5_commit</code> attribute should be set before the 
           <span class="function"><strong>db2_pconnect()</strong></span>. If the value is changed after the 
           connection has been established, and the connection is to a remote data 
           source, the change does not take effect until the next successful 
           <span class="function"><strong>db2_pconnect()</strong></span> for the connection handle.
           </p><blockquote class="note"><p><strong class="note">Note</strong>: 
            </p><p class="para">
             The php.ini setting <code class="parameter">ibm_db2.i5_allow_commit</code>==0 
             or <em>DB2_I5_TXN_NO_COMMIT</em> is the default, but may be 
             overridden with the <code class="parameter">i5_commit</code> option.
            </p>
           <p></p></blockquote>           
          <p></p>
          <p class="para">
           <em>DB2_I5_TXN_NO_COMMIT</em> - Commitment control is not used.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_READ_UNCOMMITTED</em> - Dirty reads, nonrepeatable 
           reads, and phantoms are possible.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_READ_COMMITTED</em> - Dirty reads are not possible. 
           Nonrepeatable reads, and phantoms are possible.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_REPEATABLE_READ</em> - Dirty reads and nonrepeatable 
           reads are not possible. Phantoms are possible.
          </p>
          <p class="para">
           <em>DB2_I5_TXN_SERIALIZABLE</em> - Transactions are serializable. 
           Dirty reads, non-repeatable reads, and phantoms are not possible
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_query_optimize</code></dt>

         <dd>

          <p class="para">
            <em>DB2_FIRST_IO</em> All queries are optimized with the goal of 
            returning the first page of output as fast as possible. This goal works well 
            when the output is controlled by a user who is most likely to cancel the query 
            after viewing the first page of output data. Queries coded with an 
            OPTIMIZE FOR nnn ROWS clause honor the goal specified by the clause.
          </p>
          <p class="para">
           <em>DB2_ALL_IO</em> All queries are optimized with the goal of running 
           the entire query to completion in the shortest amount of elapsed time. This is a 
           good option when the output of a query is being written to a file or report, or 
           the interface is queuing the output data. Queries coded with an OPTIMIZE FOR nnn 
           ROWS clause honor the goal specified by the clause. This is the default.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_dbcs_alloc</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_DBCS_ALLOC_ON</em> value turns on DB2 6X allocation scheme 
           for DBCS translation column size growth.
          </p>
          <p class="para">
           <em>DB2_I5_DBCS_ALLOC_OFF</em> value turns off DB2 6X allocation scheme 
           for DBCS translation column size growth. 
           </p><blockquote class="note"><p><strong class="note">Note</strong>: 
            </p><p class="para">
             The php.ini setting <code class="parameter">ibm_db2.i5_dbcs_alloc</code>==0 or 
             <em>DB2_I5_DBCS_ALLOC_OFF</em> is the default, but may be overridden 
             with the <code class="parameter">i5_dbcs_alloc</code> option.
            </p>
           <p></p></blockquote>
           <p></p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_fmt</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_FMT_ISO</em> - The International Organization for Standardization 
           (ISO) date format yyyy-mm-dd is used. This is the default.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_USA</em> - The United States date format mm/dd/yyyy is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_EUR</em> - The European date format dd.mm.yyyy is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JIS</em> - The Japanese Industrial Standard date format 
           yyyy-mm-dd is used. 
          </p>
          <p class="para">
           <em>DB2_I5_FMT_MDY</em> - The date format mm/dd/yyyy is used. 
          </p>
          <p class="para">
           <em>DB2_I5_FMT_DMY</em> - The date format dd/mm/yyyy is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_YMD</em> - The date format yy/mm/dd is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JUL</em> - The Julian date format yy/ddd is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JOB</em> - The job default is used.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_date_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_SLASH</em> - A slash ( / ) is used as the date separator. 
           This is the default.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_DASH</em> - A dash ( - ) is used as the date separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - A period ( . ) is used as the date 
           separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - A comma ( , ) is used as the date separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_BLANK</em> - A blank is used as the date separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - The job default is used
          </p>
         </dd>

             
        
         <dt>
<code class="parameter">i5_time_fmt</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_FMT_ISO</em> - The International Organization for 
           Standardization (ISO) time format hh.mm.ss is used. This is the default.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_USA</em> - The United States time format 
           hh:mmxx is used, where xx is AM or PM.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_EUR</em> - The European time format hh.mm.ss 
           is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_JIS</em> - The Japanese Industrial Standard 
           time format hh:mm:ss is used.
          </p>
          <p class="para">
           <em>DB2_I5_FMT_HMS</em> - The hh:mm:ss format is used.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_time_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_COLON</em> - A colon ( : ) is used as the time 
           separator. This is the default.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - A period ( . ) is used as the time 
           separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - A comma ( , ) is used as the time 
           separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_BLANK</em> - A blank is used as the time separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - The job default is used.
          </p>
         </dd>

        
        
         <dt>
<code class="parameter">i5_decimal_sep</code></dt>

         <dd>

          <p class="para">
           <em>DB2_I5_SEP_PERIOD</em> - A period ( . ) is used as 
           the decimal separator. This is the default.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_COMMA</em> - A comma ( , ) is used as the 
           decimal separator.
          </p>
          <p class="para">
           <em>DB2_I5_SEP_JOB</em> - The job default is used.
          </p>
         </dd>

                
       </dl>

      <p></p> 
      <p class="para">
       The following new i5/OS option is available in ibm_db2 version 1.8.0 
       and later.  
       </p><dl>

        
         <dt>
<code class="parameter">i5_libl</code></dt>

         <dd>

          <p class="para">
           A character value that indicates the library list that will be used for 
           resolving unqualified file references. Specify the library list 
           elements separated by blanks 'i5_libl'=&gt;"MYLIB YOURLIB ANYLIB". 
           </p><blockquote class="note"><p><strong class="note">Note</strong>: 
            </p><p class="para">
             i5_libl calls qsys2/qcmdexc('cmd',cmdlen), which is only available 
             in i5/OS V5R4 and later.
            </p>
           <p></p></blockquote>
          <p></p>
         </dd>

                 
       </dl>

      <p></p>      
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-pconnect-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a connection handle resource if the connection attempt is
   successful. <span class="function"><strong>db2_pconnect()</strong></span> tries to reuse an existing
   connection resource that exactly matches the
   <code class="parameter">database</code>, <code class="parameter">username</code>, and
   <code class="parameter">password</code> parameters. If the connection attempt fails,
   <span class="function"><strong>db2_pconnect()</strong></span> returns <strong><code>FALSE</code></strong>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.db2-pconnect-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>ibm_db2 1.9.0</td>
       <td>
        Active transactions within a persistent connection will be rolled back
        at the end of each request.
       </td>
      </tr>

      <tr>
       <td>ibm_db2 1.8.0</td>
       <td>
        The <code class="parameter">i5_libl</code> option is available for i5/OS
        users.
       </td>
      </tr>

      <tr>
       <td>ibm_db2 1.7.0</td>
       <td>
        The <code class="parameter">trustedcontext</code> option is available.
       </td>
      </tr>

      <tr>
       <td>ibm_db2 1.5.1</td>
       <td>
        The <code class="parameter">i5_lib</code>, <code class="parameter">i5_naming</code>,
        <code class="parameter">i5_commit</code>,
        <code class="parameter">i5_query_optimize</code>,
        <code class="parameter">i5_dbcs_alloc</code>,
        <code class="parameter">i5_date_fmt</code>,
        <code class="parameter">i5_date_sep</code>,
        <code class="parameter">i5_time_fmt</code>, <code class="parameter">i5_time_sep</code>
        and <code class="parameter">i5_decimal_sep</code> options are available for
        i5/OS users.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.db2-pconnect-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-1226">
    <p><strong>Example #1 A <span class="function"><strong>db2_pconnect()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     In the following example, the first call to
     <span class="function"><strong>db2_pconnect()</strong></span> returns a new persistent connection
     resource. The second call to <span class="function"><strong>db2_pconnect()</strong></span> returns
     a persistent connection resource that simply reuses the first persistent
     connection resource.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$pconn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br><br>if&nbsp;(</span><span style="color: #0000BB">$pconn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Persistent&nbsp;connection&nbsp;succeeded."</span><span style="color: #007700">;<br>}<br>else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Persistent&nbsp;connection&nbsp;failed."</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">$pconn2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$pconn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Second&nbsp;persistent&nbsp;connection&nbsp;succeeded."</span><span style="color: #007700">;<br>}<br>else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Second&nbsp;persistent&nbsp;connection&nbsp;failed."</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Persistent connection succeeded.
Second persistent connection succeeded.
</pre></div>
    </div>
   </div>
   <div class="example" id="example-1227">
    <p><strong>Example #2 Using trusted context</strong></p>
    <div class="example-contents"><p>
     The following example shows how to enable trusted context, switch 
     users, and get the current user ID.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"SAMPLE"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$authID&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"db2inst1"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$auth_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"ibmdb2"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$tc_user&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcuser"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$tc_pass&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"tcpassword"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">$dsn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DATABASE=</span><span style="color: #0000BB">$database</span><span style="color: #DD0000">;HOSTNAME=</span><span style="color: #0000BB">$hostname</span><span style="color: #DD0000">;PORT=</span><span style="color: #0000BB">$port</span><span style="color: #DD0000">;<br>&nbsp;&nbsp;PROTOCOL=TCPIP;UID=</span><span style="color: #0000BB">$authID</span><span style="color: #DD0000">;PWD=</span><span style="color: #0000BB">$auth_pass</span><span style="color: #DD0000">;"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">"trustedcontext"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_TRUSTED_CONTEXT_ENABLE</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$tc_conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$dsn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br>if(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Explicit&nbsp;trusted&nbsp;connection&nbsp;succeeded.\n"</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trustedcontext"</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Do&nbsp;some&nbsp;work&nbsp;as&nbsp;user&nbsp;1.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//Switching&nbsp;to&nbsp;trusted&nbsp;user.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"trusted_user"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tc_user</span><span style="color: #007700">,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"trusted_password"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$tcuser_pass</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$userAfter&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_get_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"trusted_user"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//Do&nbsp;more&nbsp;work&nbsp;as&nbsp;trusted&nbsp;user.<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if(</span><span style="color: #0000BB">$userBefore&nbsp;</span><span style="color: #007700">!=&nbsp;</span><span style="color: #0000BB">$userAfter</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"User&nbsp;has&nbsp;been&nbsp;switched."&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$tc_conn</span><span style="color: #007700">);<br>}<br>else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Explicit&nbsp;trusted&nbsp;connection&nbsp;failed.\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Explicit trusted connection succeeded.
User has been switched.
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.db2-pconnect-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.db2-connect.html" class="function" rel="rdfs-seeAlso">db2_connect()</a> - Returns a connection to a database</span></li>
   </ul>
  <p></p>
 </div>



</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="107225">  
  <a class="name">
  <strong class="user"><em>satoruyoshida at php dot net</em></strong></a><div class="date" title="2012-01-23 08:28"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107225">
<div class="phpcode"><code><span class="html">
If You will create db2 connection on IBMi , QSQSRVR job will be created under QSYSWRK subsystem with specified user.<br>You can ensure it with using db2_pconnect() function.<br><br>For example, db2_pconnect('*LOCAL', 'TESTUSR', 'PASSWORD') will bring us QSQSRVR job with TESTUSR user.<br><br>If You omit the user, IHS default user is used in the job.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.db2-pconnect.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:58:32 GMT -->


</body></html>