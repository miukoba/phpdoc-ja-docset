<html><!-- Mirrored from php.net/manual/en/function.curl-setopt-array.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:40:53 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>curl_setopt_array</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.curl-setopt-array.html">
 <link rel="shorturl" href="http://php.net/curl-setopt-array">
 <link rel="alternate" href="http://php.net/curl-setopt-array" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.curl.html">
 <link rel="prev" href="function.curl-reset.html">
 <link rel="next" href="function.curl-setopt.html">

 <link rel="alternate" href="function.curl-setopt-array.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.curl-setopt-array.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.curl-setopt-array.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.curl-setopt-array.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.curl-setopt-array.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.curl-setopt-array.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.curl-setopt-array.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.curl-setopt-array.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.curl-setopt-array.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.curl-setopt-array.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.curl-setopt-array.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.curl.html">cURL</a></li>      <li><a href="ref.curl.html">cURL Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.curl-setopt-array" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">curl_setopt_array</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.3)</p><p class="refpurpose"><span class="refname">curl_setopt_array</span> â€” <span class="dc-title">Set multiple options for a cURL transfer</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.curl-setopt-array-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>curl_setopt_array</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$ch</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code></span>
   )</div>

  <p class="para rdfs-comment">
   Sets multiple options for a cURL session. This function is
   useful for setting a large amount of cURL options without repetitively
   calling <span class="function"><a href="function.curl-setopt.html" class="function">curl_setopt()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.curl-setopt-array-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt>
<code class="parameter">ch</code>
</dt>
<dd>
<p class="para">A cURL handle returned by
<span class="function"><a href="function.curl-init.html" class="function">curl_init()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       An <span class="type"><a href="language.types.array.html" class="type array">array</a></span> specifying which options to set and their values.
       The keys should be valid <span class="function"><a href="function.curl-setopt.html" class="function">curl_setopt()</a></span> constants or
       their integer equivalents.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.curl-setopt-array-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> if all options were successfully set. If an option could
   not be successfully set, <strong><code>FALSE</code></strong> is immediately returned, ignoring any
   future options in the <code class="parameter">options</code> array.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.curl-setopt-array-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4336">
    <p><strong>Example #1 
     Initializing a new cURL session and fetching a web page
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;create&nbsp;a&nbsp;new&nbsp;cURL&nbsp;resource<br></span><span style="color: #0000BB">$ch&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">curl_init</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;set&nbsp;URL&nbsp;and&nbsp;other&nbsp;appropriate&nbsp;options<br></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">CURLOPT_URL&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">CURLOPT_HEADER&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">false<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">curl_setopt_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;grab&nbsp;URL&nbsp;and&nbsp;pass&nbsp;it&nbsp;to&nbsp;the&nbsp;browser<br></span><span style="color: #0000BB">curl_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;close&nbsp;cURL&nbsp;resource,&nbsp;and&nbsp;free&nbsp;up&nbsp;system&nbsp;resources<br></span><span style="color: #0000BB">curl_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   Prior to PHP 5.1.3 this function can be simulated with:
  </p>
  <p class="para">
   </p><div class="example" id="example-4337">
    <p><strong>Example #2 Our own implementation of <span class="function"><strong>curl_setopt_array()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">function_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'curl_setopt_array'</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">curl_setopt_array</span><span style="color: #007700">(&amp;</span><span style="color: #0000BB">$ch</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$curl_options</span><span style="color: #007700">)<br>&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$curl_options&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$option&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$option</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.curl-setopt-array-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    As with <span class="function"><a href="function.curl-setopt.html" class="function">curl_setopt()</a></span>, passing an array to 
    <strong><code>CURLOPT_POST</code></strong> will encode the data as 
    <em class="emphasis">multipart/form-data</em>, while passing a 
    URL-encoded string will encode the data as 
    <em class="emphasis">application/x-www-form-urlencoded</em>.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.curl-setopt-array-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.curl-setopt.html" class="function" rel="rdfs-seeAlso">curl_setopt()</a> - Set an option for a cURL transfer</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="89850">  
  <a class="name">
  <strong class="user"><em>maran dot emil at gmail dot com</em></strong></a><div class="date" title="2009-03-25 11:54"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89850">
<div class="phpcode"><code><span class="html">
In case that you need to read SSL page content from https with curl, this function can help you:
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="keyword">function </span><span class="default">get_web_page</span><span class="keyword">( </span><span class="default">$url</span><span class="keyword">,</span><span class="default">$curl_data </span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$options </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_RETURNTRANSFER </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return web page
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_HEADER&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// don't return headers
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_FOLLOWLOCATION </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// follow redirects
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_ENCODING&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">""</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// handle all encodings
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_USERAGENT&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">"spider"</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="comment">// who am i
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_AUTOREFERER&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">true</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// set referer on redirect
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_CONNECTTIMEOUT </span><span class="keyword">=&gt; </span><span class="default">120</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// timeout on connect
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_TIMEOUT&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">120</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// timeout on response
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_MAXREDIRS&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">10</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// stop after 10 redirects
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_POST&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// i am sending post data
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">CURLOPT_POSTFIELDS&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$curl_data</span><span class="keyword">,&nbsp; &nbsp; </span><span class="comment">// this are my post vars
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_SSL_VERIFYHOST </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// don't verify ssl
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_SSL_VERIFYPEER </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">CURLOPT_VERBOSE&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//
<br>&nbsp; &nbsp; </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; </span><span class="default">$ch&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">,</span><span class="default">$options</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$err&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_errno</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$errmsg&nbsp; </span><span class="keyword">= </span><span class="default">curl_error</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">) ;
<br>&nbsp; &nbsp; </span><span class="default">$header&nbsp; </span><span class="keyword">= </span><span class="default">curl_getinfo</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>
<br>&nbsp; </span><span class="comment">//&nbsp; $header['errno']&nbsp;&nbsp; = $err;
<br>&nbsp; //&nbsp; $header['errmsg']&nbsp; = $errmsg;
<br>&nbsp; //&nbsp; $header['content'] = $content;
<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$header</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">$curl_data </span><span class="keyword">= </span><span class="string">"var1=60&amp;var2=test"</span><span class="keyword">;
<br></span><span class="default">$url </span><span class="keyword">= </span><span class="string">"https://www.example.com"</span><span class="keyword">;
<br></span><span class="default">$response </span><span class="keyword">= </span><span class="default">get_web_page</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$curl_data</span><span class="keyword">);
<br>
<br>print </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">);
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98208">  
  <a class="name">
  <strong class="user"><em>anthon at piwik dot org</em></strong></a><div class="date" title="2010-06-01 06:52"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98208">
<div class="phpcode"><code><span class="html">
Starting in PHP 5.2.0, CURLOPT_FOLLOWLOCATION can't be set via curl_setopt_array() (or curl_setopt()) when either safe_mode is enabled or open_basedir is set.&nbsp; In these cases, the order of CURLOPT_* settings in the array can be important.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68122">  
  <a class="name">
  <strong class="user"><em>bendavis78 at gmail dot com</em></strong></a><div class="date" title="2006-07-13 03:58"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68122">
<div class="phpcode"><code><span class="html">
You can use CURLOPT_HEADERFUNCTION&nbsp; with a callback inside an object.&nbsp; This makes is it easy to capture the headers for later use.&nbsp; For example:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">Test
<br></span><span class="keyword">{
<br>&nbsp; &nbsp; public </span><span class="default">$headers</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="comment">//...
<br>
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">exec</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$opts</span><span class="keyword">[</span><span class="default">CURLOPT_HEADERFUNCTION</span><span class="keyword">] = array(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'_setHeader'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$opts</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; private function </span><span class="default">_setHeader</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">[] = </span><span class="default">$header</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; 
<br>}
<br>
<br></span><span class="default">$test </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">();
<br></span><span class="default">$opts </span><span class="keyword">= array(
<br>&nbsp;&nbsp; </span><span class="comment">//... your curl opts here
<br></span><span class="keyword">);
<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">exec</span><span class="keyword">(</span><span class="default">$opts</span><span class="keyword">);
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">headers</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>...something like that
<br>
<br>(This works in php v. 5.1.4)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104369">  
  <a class="name">
  <strong class="user"><em>loop4u at gmail dot com</em></strong></a><div class="date" title="2011-06-11 07:59"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104369">
<div class="phpcode"><code><span class="html">
it should be noted that when using CURLOPT_POSTFIELDS in a loop, CURLOPT_POSTFIELDS appends to the sting. You can use unset() if you don't want this sort of behavior.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//this will append postfields
<br>
<br></span><span class="keyword">while(</span><span class="default">true</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$options </span><span class="keyword">= array(</span><span class="default">CURLOPT_POSTFIELDS </span><span class="keyword">=&gt; </span><span class="string">'foo=bar&amp;foo2=bar'</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://www.example.com</a>"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>}
<br>
<br></span><span class="comment">//this will NOT append postfields
<br></span><span class="keyword">while(</span><span class="default">true</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$options </span><span class="keyword">= array(</span><span class="default">CURLOPT_POSTFIELDS </span><span class="keyword">=&gt; </span><span class="string">'foo=bar&amp;foo2=bar'</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://www.example.com</a>"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>&nbsp; &nbsp; unset(</span><span class="default">$options</span><span class="keyword">[</span><span class="default">CURLOPT_POSTFIELDS</span><span class="keyword">]);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87342">  
  <a class="name">
  <strong class="user"><em>fnjordy at gmail dot com</em></strong></a><div class="date" title="2008-11-30 11:48"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87342">
<div class="phpcode"><code><span class="html">
There is no CURLOPT_MAXFILESIZE in the PHP module but it's function only works with Content-Length headers anyway.&nbsp; There are two ways of checking download sizes, one is after the download is complete using filesize(), the other is as the download is running allowing you to terminate before wasting time and disk space.
<br>
<br><span class="default">&lt;?php
<br>$GLOBALS</span><span class="keyword">[</span><span class="string">'file_size'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;
<br></span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'max_file_size'</span><span class="keyword">] = </span><span class="default">1024 </span><span class="keyword">* </span><span class="default">1024</span><span class="keyword">;
<br>function </span><span class="default">on_curl_header</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$header</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$trimmed </span><span class="keyword">= </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^Content-Length: (\d+)$/'</span><span class="keyword">, </span><span class="default">$trimmed</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file_size </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$file_size </span><span class="keyword">&gt; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'max_file_size'</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// handle error here.
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$header</span><span class="keyword">);
<br>}
<br>
<br>function </span><span class="default">on_curl_write</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$bytes </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'file_size'</span><span class="keyword">] += </span><span class="default">$bytes</span><span class="keyword">;
<br>&nbsp; &nbsp; if (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'file_size'</span><span class="keyword">] &gt; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'max_file_size'</span><span class="keyword">]) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// handle error here.
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; return </span><span class="default">$bytes</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();
<br></span><span class="default">$options </span><span class="keyword">= array(</span><span class="default">CURLOPT_URL&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'<a rel="nofollow" target="_blank">http://www.php.net/</a>'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">CURLOPT_HEADER&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">false</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">CURLOPT_HEADERFUNCTION&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'on_curl_header'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">CURLOPT_WRITEFUNCTION&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="string">'on_curl_write'</span><span class="keyword">);
<br></span><span class="default">curl_setopt_array</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">);
<br></span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br></span><span class="comment">// ...
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.curl-setopt-array.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:40:54 GMT -->


</body></html>