<html><!-- Mirrored from php.net/manual/en/function.levenshtein.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>levenshtein</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.levenshtein.html">
 <link rel="shorturl" href="http://php.net/levenshtein">
 <link rel="alternate" href="http://php.net/levenshtein" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.lcfirst.html">
 <link rel="next" href="function.localeconv.html">

 <link rel="alternate" href="function.levenshtein.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.levenshtein.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.levenshtein.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.levenshtein.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.levenshtein.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.levenshtein.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.levenshtein.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.levenshtein.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.levenshtein.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.levenshtein.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.levenshtein.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.levenshtein" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">levenshtein</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">levenshtein</span> — <span class="dc-title">Calculate Levenshtein distance between two strings</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.levenshtein-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>levenshtein</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str1</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$str2</code></span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>levenshtein</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str1</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$str2</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$cost_ins</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$cost_rep</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$cost_del</code></span>
   )</div>

  <p class="para rdfs-comment">
   The Levenshtein distance is defined as the minimal number of
   characters you have to replace, insert or delete to transform
   <code class="parameter">str1</code> into <code class="parameter">str2</code>.
   The complexity of the algorithm is <em>O(m*n)</em>,
   where <em>n</em> and <em>m</em> are the
   length of <code class="parameter">str1</code> and
   <code class="parameter">str2</code> (rather good when compared to
   <span class="function"><a href="function.similar-text.html" class="function">similar_text()</a></span>, which is O(max(n,m)**3),
   but still expensive).
  </p>
  <p class="para">
   In its simplest form the function will take only the two
   strings as parameter and will calculate just the number of
   insert, replace and delete operations needed to transform
   <code class="parameter">str1</code> into <code class="parameter">str2</code>.
  </p>
  <p class="para">
   A second variant will take three additional parameters that
   define the cost of insert, replace and delete operations.  This
   is more general and adaptive than variant one, but not as
   efficient.
  </p>
 </div>


<div class="refsect1 parameters" id="refsect1-function.levenshtein-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str1</code></dt>

     <dd>

      <p class="para">
       One of the strings being evaluated for Levenshtein distance.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">str2</code></dt>

     <dd>

      <p class="para">
       One of the strings being evaluated for Levenshtein distance.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">cost_ins</code></dt>

     <dd>

      <p class="para">
       Defines the cost of insertion.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">cost_rep</code></dt>

     <dd>

      <p class="para">
       Defines the cost of replacement.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">cost_del</code></dt>

     <dd>

      <p class="para">
       Defines the cost of deletion.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.levenshtein-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   This function returns the Levenshtein-Distance between the
   two argument strings or -1, if one of the argument strings
   is longer than the limit of 255 characters.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.levenshtein-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4959">
    <p><strong>Example #1 <span class="function"><strong>levenshtein()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;input&nbsp;misspelled&nbsp;word<br></span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'carrrot'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;array&nbsp;of&nbsp;words&nbsp;to&nbsp;check&nbsp;against<br></span><span style="color: #0000BB">$words&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,</span><span style="color: #DD0000">'pineapple'</span><span style="color: #007700">,</span><span style="color: #DD0000">'banana'</span><span style="color: #007700">,</span><span style="color: #DD0000">'orange'</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'radish'</span><span style="color: #007700">,</span><span style="color: #DD0000">'carrot'</span><span style="color: #007700">,</span><span style="color: #DD0000">'pea'</span><span style="color: #007700">,</span><span style="color: #DD0000">'bean'</span><span style="color: #007700">,</span><span style="color: #DD0000">'potato'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;no&nbsp;shortest&nbsp;distance&nbsp;found,&nbsp;yet<br></span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">=&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;loop&nbsp;through&nbsp;words&nbsp;to&nbsp;find&nbsp;the&nbsp;closest<br></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$words&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$word</span><span style="color: #007700">)&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;calculate&nbsp;the&nbsp;distance&nbsp;between&nbsp;the&nbsp;input&nbsp;word,<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;and&nbsp;the&nbsp;current&nbsp;word<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$lev&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">levenshtein</span><span style="color: #007700">(</span><span style="color: #0000BB">$input</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$word</span><span style="color: #007700">);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;check&nbsp;for&nbsp;an&nbsp;exact&nbsp;match<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$lev&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;closest&nbsp;word&nbsp;is&nbsp;this&nbsp;one&nbsp;(exact&nbsp;match)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$closest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$word</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;break&nbsp;out&nbsp;of&nbsp;the&nbsp;loop;&nbsp;we've&nbsp;found&nbsp;an&nbsp;exact&nbsp;match<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">break;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;if&nbsp;this&nbsp;distance&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;next&nbsp;found&nbsp;shortest<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;distance,&nbsp;OR&nbsp;if&nbsp;a&nbsp;next&nbsp;shortest&nbsp;word&nbsp;has&nbsp;not&nbsp;yet&nbsp;been&nbsp;found<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$lev&nbsp;</span><span style="color: #007700">&lt;=&nbsp;</span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;set&nbsp;the&nbsp;closest&nbsp;match,&nbsp;and&nbsp;shortest&nbsp;distance<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$closest&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$word</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$lev</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br>echo&nbsp;</span><span style="color: #DD0000">"Input&nbsp;word:&nbsp;</span><span style="color: #0000BB">$input</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>if&nbsp;(</span><span style="color: #0000BB">$shortest&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Exact&nbsp;match&nbsp;found:&nbsp;</span><span style="color: #0000BB">$closest</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Did&nbsp;you&nbsp;mean:&nbsp;</span><span style="color: #0000BB">$closest</span><span style="color: #DD0000">?\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Input word: carrrot
Did you mean: carrot?
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.levenshtein-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.soundex.html" class="function" rel="rdfs-seeAlso">soundex()</a> - Calculate the soundex key of a string</span></li>
    <li class="member"><span class="function"><a href="function.similar-text.html" class="function" rel="rdfs-seeAlso">similar_text()</a> - Calculate the similarity between two strings</span></li>
    <li class="member"><span class="function"><a href="function.metaphone.html" class="function" rel="rdfs-seeAlso">metaphone()</a> - Calculate the metaphone key of a string</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="85387">  
  <a class="name">
  <strong class="user"><em>paulrowe at iname dot com</em></strong></a><div class="date" title="2008-08-27 05:58"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85387">
<div class="phpcode"><code><span class="html">
[EDITOR'S NOTE: original post and 2 corrections combined into 1 -- mgf]
<br>
<br>Here is an implementation of the Levenshtein Distance calculation that only uses a one-dimensional array and doesn't have a limit to the string length. This implementation was inspired by maze generation algorithms that also use only one-dimensional arrays.
<br>
<br>I have tested this function with two 532-character strings and it completed in 0.6-0.8 seconds. 
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/*
<br>* This function starts out with several checks in an attempt to save time.
<br>*&nbsp;&nbsp; 1.&nbsp; The shorter string is always used as the "right-hand" string (as the size of the array is based on its length).&nbsp; 
<br>*&nbsp;&nbsp; 2.&nbsp; If the left string is empty, the length of the right is returned.
<br>*&nbsp;&nbsp; 3.&nbsp; If the right string is empty, the length of the left is returned.
<br>*&nbsp;&nbsp; 4.&nbsp; If the strings are equal, a zero-distance is returned.
<br>*&nbsp;&nbsp; 5.&nbsp; If the left string is contained within the right string, the difference in length is returned.
<br>*&nbsp;&nbsp; 6.&nbsp; If the right string is contained within the left string, the difference in length is returned.
<br>* If none of the above conditions were met, the Levenshtein algorithm is used.
<br>*/
<br></span><span class="keyword">function </span><span class="default">LevenshteinDistance</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">$sLeft </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) &gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">)) ? </span><span class="default">$s1 </span><span class="keyword">: </span><span class="default">$s2</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$sRight </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) &gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">)) ? </span><span class="default">$s2 </span><span class="keyword">: </span><span class="default">$s1</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$nLeftLength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$sLeft</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$nRightLength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$sRight</span><span class="keyword">);
<br>&nbsp; if (</span><span class="default">$nLeftLength </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)
<br>&nbsp; &nbsp; return </span><span class="default">$nRightLength</span><span class="keyword">;
<br>&nbsp; else if (</span><span class="default">$nRightLength </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)
<br>&nbsp; &nbsp; return </span><span class="default">$nLeftLength</span><span class="keyword">;
<br>&nbsp; else if (</span><span class="default">$sLeft </span><span class="keyword">=== </span><span class="default">$sRight</span><span class="keyword">)
<br>&nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; else if ((</span><span class="default">$nLeftLength </span><span class="keyword">&lt; </span><span class="default">$nRightLength</span><span class="keyword">) &amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$sRight</span><span class="keyword">, </span><span class="default">$sLeft</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">))
<br>&nbsp; &nbsp; return </span><span class="default">$nRightLength </span><span class="keyword">- </span><span class="default">$nLeftLength</span><span class="keyword">;
<br>&nbsp; else if ((</span><span class="default">$nRightLength </span><span class="keyword">&lt; </span><span class="default">$nLeftLength</span><span class="keyword">) &amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$sLeft</span><span class="keyword">, </span><span class="default">$sRight</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">))
<br>&nbsp; &nbsp; return </span><span class="default">$nLeftLength </span><span class="keyword">- </span><span class="default">$nRightLength</span><span class="keyword">;
<br>&nbsp; else {
<br>&nbsp; &nbsp; </span><span class="default">$nsDistance </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">$nRightLength </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; for (</span><span class="default">$nLeftPos </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$nLeftPos </span><span class="keyword">&lt;= </span><span class="default">$nLeftLength</span><span class="keyword">; ++</span><span class="default">$nLeftPos</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$cLeft </span><span class="keyword">= </span><span class="default">$sLeft</span><span class="keyword">[</span><span class="default">$nLeftPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$nDiagonal </span><span class="keyword">= </span><span class="default">$nLeftPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">$nLeftPos</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; for (</span><span class="default">$nRightPos </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$nRightPos </span><span class="keyword">&lt;= </span><span class="default">$nRightLength</span><span class="keyword">; ++</span><span class="default">$nRightPos</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cRight </span><span class="keyword">= </span><span class="default">$sRight</span><span class="keyword">[</span><span class="default">$nRightPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nCost </span><span class="keyword">= (</span><span class="default">$cRight </span><span class="keyword">== </span><span class="default">$cLeft</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nNewDiagonal </span><span class="keyword">= </span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">$nRightPos</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">$nRightPos</span><span class="keyword">] = 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">min</span><span class="keyword">(</span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">$nRightPos</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">$nRightPos </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nDiagonal </span><span class="keyword">+ </span><span class="default">$nCost</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nDiagonal </span><span class="keyword">= </span><span class="default">$nNewDiagonal</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$nsDistance</span><span class="keyword">[</span><span class="default">$nRightLength</span><span class="keyword">];
<br>&nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113702">  
  <a class="name">
  <strong class="user"><em>luciole75w at no dot spam dot gmail dot com</em></strong></a><div class="date" title="2013-11-18 02:25"><strong>9 months ago</strong></div>
  <div class="text" id="Hcom113702">
<div class="phpcode"><code><span class="html">
The levenshtein function processes each byte of the input string individually. Then for multibyte encodings, such as UTF-8, it may give misleading results.<br><br>Example with a french accented word :<br>- levenshtein('notre', 'votre') = 1<br>- levenshtein('notre', 'nôtre') = 2 (huh ?!)<br><br>You can easily find a multibyte compliant PHP implementation of the levenshtein function but it will be of course much slower than the C implementation.<br><br>Another option is to convert the strings to a single-byte (lossless) encoding so that they can feed the fast core levenshtein function.<br><br>Here is the conversion function I used with a search engine storing UTF-8 strings, and a quick benchmark. I hope it will help.<br><br><span class="default">&lt;?php<br></span><span class="comment">// Convert an UTF-8 encoded string to a single-byte string suitable for<br>// functions such as levenshtein.<br>// <br>// The function simply uses (and updates) a tailored dynamic encoding<br>// (in/out map parameter) where non-ascii characters are remapped to<br>// the range [128-255] in order of appearance.<br>//<br>// Thus it supports up to 128 different multibyte code points max over<br>// the whole set of strings sharing this encoding.<br>//<br></span><span class="keyword">function </span><span class="default">utf8_to_extended_ascii</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, &amp;</span><span class="default">$map</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// find all multibyte characters (cf. utf-8 encoding specs)<br>&nbsp; &nbsp; </span><span class="default">$matches </span><span class="keyword">= array();<br>&nbsp; &nbsp; if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/[\xC0-\xF7][\x80-\xBF]+/'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">; </span><span class="comment">// plain ascii string<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; // update the encoding map with the characters not already met<br>&nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] as </span><span class="default">$mbc</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$map</span><span class="keyword">[</span><span class="default">$mbc</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$map</span><span class="keyword">[</span><span class="default">$mbc</span><span class="keyword">] = </span><span class="default">chr</span><span class="keyword">(</span><span class="default">128 </span><span class="keyword">+ </span><span class="default">count</span><span class="keyword">(</span><span class="default">$map</span><span class="keyword">));<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// finally remap non-ascii characters<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$map</span><span class="keyword">);<br>}<br><br></span><span class="comment">// Didactic example showing the usage of the previous conversion function but,<br>// for better performance, in a real application with a single input string<br>// matched against many strings from a database, you will probably want to<br>// pre-encode the input only once.<br>//<br></span><span class="keyword">function </span><span class="default">levenshtein_utf8</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$charMap </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">utf8_to_extended_ascii</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$charMap</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">utf8_to_extended_ascii</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">, </span><span class="default">$charMap</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Results (for about 6000 calls)<br>- reference time core C function (single-byte) : 30 ms<br>- utf8 to ext-ascii conversion + core function : 90 ms<br>- full php implementation : 3000 ms</span>
</code></div>
  </div>
 </div>
  <div class="note" id="7658">  
  <a class="name">
  <strong class="user"><em>dschultz at protonic dot com</em></strong></a><div class="date" title="2000-08-10 09:01"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom7658">
<div class="phpcode"><code><span class="html">
It's also useful if you want to make some sort of registration page and you want to make sure that people who register don't pick usernames that are very similar to their passwords.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33940">  
  <a class="name">
  <strong class="user"><em>"inerte" is my hotmail.com username</em></strong></a><div class="date" title="2003-07-11 10:22"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33940">
<div class="phpcode"><code><span class="html">
I am using this function to avoid duplicate information on my client's database.<br><br>After retrieving a series of rows and assigning the results to an array values, I loop it with foreach comparing its levenshtein() with the user supplied string.<br><br>It helps to avoid people re-registering "John Smith", "Jon Smith" or "Jon Smit".<br><br>Of course, I can't block the operation if the user really wants to, but a suggestion is displayed along the lines of: "There's a similar client with this name.", followed by the list of the similar strings.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51600">  
  <a class="name">
  <strong class="user"><em>justin at visunet dot ie</em></strong></a><div class="date" title="2005-04-05 07:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51600">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="comment">/*********************************************************************<br>&nbsp; &nbsp; * The below func, btlfsa, (better than levenstien for spelling apps)<br>&nbsp; &nbsp; * produces better results when comparing words like haert against<br>&nbsp; &nbsp; * haart and heart.<br>&nbsp; &nbsp; *<br>&nbsp; &nbsp; * For example here is the output of levenshtein compared to btlfsa<br>&nbsp; &nbsp; * when comparing 'haert' to 'herat, haart, heart, harte'<br>&nbsp; &nbsp; *<br>&nbsp; &nbsp; * btlfsa('haert','herat'); output is.. 3<br>&nbsp; &nbsp; * btlfsa('haert','haart'); output is.. 3<br>&nbsp; &nbsp; * btlfsa('haert','harte'); output is.. 3<br>&nbsp; &nbsp; * btlfsa('haert','heart'); output is.. 2<br>&nbsp; &nbsp; *<br>&nbsp; &nbsp; * levenshtein('haert','herat'); output is.. 2<br>&nbsp; &nbsp; * levenshtein('haert','haart'); output is.. 1<br>&nbsp; &nbsp; * levenshtein('haert','harte'); output is.. 2<br>&nbsp; &nbsp; * levenshtein('haert','heart'); output is.. 2<br>&nbsp; &nbsp; *<br>&nbsp; &nbsp; * In other words, if you used levenshtein, 'haart' would be the<br>&nbsp; &nbsp; * closest match to 'haert'. Where as, btlfsa sees that it should be<br>&nbsp; &nbsp; * 'heart'<br>&nbsp; &nbsp; */<br><br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">btlfsa</span><span class="keyword">(</span><span class="default">$word1</span><span class="keyword">,</span><span class="default">$word2</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$score </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// For each char that is different add 2 to the score<br>&nbsp; &nbsp; &nbsp; &nbsp; // as this is a BIG difference<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$remainder&nbsp; </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/["</span><span class="keyword">.</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/[^A-Za-z0-9\']/"</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$word1</span><span class="keyword">).</span><span class="string">"]/i"</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$word2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$remainder </span><span class="keyword">.= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/["</span><span class="keyword">.</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/[^A-Za-z0-9\']/"</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$word2</span><span class="keyword">).</span><span class="string">"]/i"</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$word1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$score&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$remainder</span><span class="keyword">)*</span><span class="default">2</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Take the difference in string length and add it to the score<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$w1_len&nbsp; </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$w2_len&nbsp; </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$score&nbsp; </span><span class="keyword">+= </span><span class="default">$w1_len </span><span class="keyword">&gt; </span><span class="default">$w2_len </span><span class="keyword">? </span><span class="default">$w1_len </span><span class="keyword">- </span><span class="default">$w2_len </span><span class="keyword">: </span><span class="default">$w2_len </span><span class="keyword">- </span><span class="default">$w1_len</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Calculate how many letters are in different locations<br>&nbsp; &nbsp; &nbsp; &nbsp; // And add it to the score i.e.<br>&nbsp; &nbsp; &nbsp; &nbsp; //<br>&nbsp; &nbsp; &nbsp; &nbsp; // h e a r t<br>&nbsp; &nbsp; &nbsp; &nbsp; // 1 2 3 4 5<br>&nbsp; &nbsp; &nbsp; &nbsp; //<br>&nbsp; &nbsp; &nbsp; &nbsp; // h a e r t&nbsp; &nbsp;&nbsp; a e&nbsp; &nbsp; &nbsp; &nbsp; = 2<br>&nbsp; &nbsp; &nbsp; &nbsp; // 1 2 3 4 5&nbsp;&nbsp; 1 2 3 4 5<br>&nbsp; &nbsp; &nbsp; &nbsp; //<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$w1 </span><span class="keyword">= </span><span class="default">$w1_len </span><span class="keyword">&gt; </span><span class="default">$w2_len </span><span class="keyword">? </span><span class="default">$word1 </span><span class="keyword">: </span><span class="default">$word2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$w2 </span><span class="keyword">= </span><span class="default">$w1_len </span><span class="keyword">&gt; </span><span class="default">$w2_len </span><span class="keyword">? </span><span class="default">$word2 </span><span class="keyword">: </span><span class="default">$word1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$w1</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( !isset(</span><span class="default">$w2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) || </span><span class="default">$w1</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">$w2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$score</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$score</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// *************************************************************<br>&nbsp; &nbsp; // Here is a full code example showing the difference<br><br>&nbsp; &nbsp; </span><span class="default">$misspelled </span><span class="keyword">= </span><span class="string">'haert'</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// Imagine that these are sample suggestions thrown back by soundex or metaphone..<br>&nbsp; &nbsp; </span><span class="default">$suggestions </span><span class="keyword">= array(</span><span class="string">'herat'</span><span class="keyword">, </span><span class="string">'haart'</span><span class="keyword">, </span><span class="string">'heart'</span><span class="keyword">, </span><span class="string">'harte'</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// Firstly order an array based on levenshtein<br>&nbsp; &nbsp; </span><span class="default">$levenshtein_ordered </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach ( </span><span class="default">$suggestions </span><span class="keyword">as </span><span class="default">$suggestion </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$levenshtein_ordered</span><span class="keyword">[</span><span class="default">$suggestion</span><span class="keyword">] = </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$misspelled</span><span class="keyword">,</span><span class="default">$suggestion</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$levenshtein_ordered</span><span class="keyword">, </span><span class="default">SORT_NUMERIC </span><span class="keyword">);<br><br>&nbsp; &nbsp; print </span><span class="string">"&lt;b&gt;Suggestions as ordered by levenshtein...&lt;/b&gt;&lt;ul&gt;&lt;pre&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$levenshtein_ordered</span><span class="keyword">);<br>&nbsp; &nbsp; print </span><span class="string">"&lt;/pre&gt;&lt;/ul&gt;"</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// Secondly order an array based on btlfsa<br>&nbsp; &nbsp; </span><span class="default">$btlfsa_ordered </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach ( </span><span class="default">$suggestions </span><span class="keyword">as </span><span class="default">$suggestion </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$btlfsa_ordered</span><span class="keyword">[</span><span class="default">$suggestion</span><span class="keyword">] = </span><span class="default">btlfsa</span><span class="keyword">(</span><span class="default">$misspelled</span><span class="keyword">,</span><span class="default">$suggestion</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$btlfsa_ordered</span><span class="keyword">, </span><span class="default">SORT_NUMERIC </span><span class="keyword">);<br><br>&nbsp; &nbsp; print </span><span class="string">"&lt;b&gt;Suggestions as ordered by btlfsa...&lt;/b&gt;&lt;ul&gt;&lt;pre&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$btlfsa_ordered</span><span class="keyword">);<br>&nbsp; &nbsp; print </span><span class="string">"&lt;/pre&gt;&lt;/ul&gt;"</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107114">  
  <a class="name">
  <strong class="user"><em>engineglue at gmail dot com</em></strong></a><div class="date" title="2012-01-08 08:05"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107114">
<div class="phpcode"><code><span class="html">
I really like [the manual's] example for the use of the levenshtein function to match against an array. I ran into the need to specify the sensitivity of the result. There are circumstances when you want it to return false if the match is way out of line. I wouldn't want "marry had a little lamb" to match with "saw viii" simply because it was the best match in the array. Hence the need for sensitivity:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">wordMatch</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">, </span><span class="default">$sensitivity</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lev </span><span class="keyword">= </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$lev </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$lev </span><span class="keyword">&lt;= </span><span class="default">$shortest </span><span class="keyword">|| </span><span class="default">$shortest </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest&nbsp; </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">$lev</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$shortest </span><span class="keyword">&lt;= </span><span class="default">$sensitivity</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$closest</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="string">'PINEEEEAPPLE'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$words&nbsp; </span><span class="keyword">= array(</span><span class="string">'apple'</span><span class="keyword">,</span><span class="string">'pineapple'</span><span class="keyword">,</span><span class="string">'banana'</span><span class="keyword">,</span><span class="string">'orange'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'radish'</span><span class="keyword">,</span><span class="string">'carrot'</span><span class="keyword">,</span><span class="string">'pea'</span><span class="keyword">,</span><span class="string">'bean'</span><span class="keyword">,</span><span class="string">'potato'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; echo </span><span class="default">wordMatch</span><span class="keyword">(</span><span class="default">$words</span><span class="keyword">, </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70796">  
  <a class="name">
  <strong class="user"><em>carey at NOSPAM dot internode dot net dot au</em></strong></a><div class="date" title="2006-10-28 07:06"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70796">
<div class="phpcode"><code><span class="html">
I have found that levenshtein is actually case-sensitive (in PHP 4.4.2 at least).<br><br><span class="default">&lt;?php<br>$distance</span><span class="keyword">=</span><span class="default">levenshtein</span><span class="keyword">(</span><span class="string">'hello'</span><span class="keyword">,</span><span class="string">'ELLO'</span><span class="keyword">);<br>echo </span><span class="string">"</span><span class="default">$distance</span><span class="string">"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>Outputs: "5", instead of "1". If you are implementing a fuzzy search feature that makes use of levenshtein, you will probably need to find a way to work around this.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63274">  
  <a class="name">
  <strong class="user"><em>dinesh AT dinsoft DOT net</em></strong></a><div class="date" title="2006-03-17 03:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63274">
<div class="phpcode"><code><span class="html">
Here is a string resynch function:<br><br><span class="default">&lt;?php<br></span><span class="comment">// Trouve les operations a effectuer pour modifier $b en $a en exploitant leurs similitudes (Finds the operations required to change $b to $a)<br>// Identique a la fonction Resynch Compare de Hex Workshop<br>//<br>// Parametres:<br>//&nbsp; &nbsp; &nbsp; $a Premiere chaine (cible, target)<br>//&nbsp; &nbsp; &nbsp; $b Seconde chaine (source)<br>//&nbsp; &nbsp; &nbsp; $l Nombre d'octets devant correspondre pour etre consides comme un bloc similaire (number of matching bytes required)<br>//&nbsp; &nbsp; &nbsp; $s Distance maximale dans laquelle les blocs similaires sont cherches (search window)<br>//<br>// Retourne:<br>//&nbsp; &nbsp; &nbsp; Array<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Array<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] Operation: + Add , - Del , / Replace, = Match<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] Source offset<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] Source count<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [3] Target offset<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [4] Target count<br>//<br></span><span class="keyword">function </span><span class="default">str_resynch</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$l</span><span class="keyword">=</span><span class="default">32</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">=</span><span class="default">2048</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=array();<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">),</span><span class="default">$cc</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">),</span><span class="default">$ii</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">=</span><span class="default">$s</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$z2</span><span class="keyword">=(</span><span class="default">$z</span><span class="keyword">&lt;&lt;</span><span class="default">1</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$c</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$z</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">=(</span><span class="default">$d</span><span class="keyword">&lt;</span><span class="default">$ii</span><span class="keyword">)?</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$ii</span><span class="keyword">,</span><span class="default">$z2</span><span class="keyword">-</span><span class="default">$ii</span><span class="keyword">+</span><span class="default">$d</span><span class="keyword">):</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$z2</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$p</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$p</span><span class="keyword">!==</span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bi</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bp</span><span class="keyword">=</span><span class="default">$p</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$p</span><span class="keyword">+=</span><span class="default">$ii</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ((++</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$c</span><span class="keyword">) &amp;&amp; (++</span><span class="default">$p</span><span class="keyword">&lt;</span><span class="default">$cc</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$a</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">}!=</span><span class="default">$b</span><span class="keyword">{</span><span class="default">$p</span><span class="keyword">}) break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$m</span><span class="keyword">&lt;</span><span class="default">$l</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$bi</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">=</span><span class="default">$bp</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$p</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">},</span><span class="default">$n</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">--;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[]=array(</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">+</span><span class="default">$ii</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">); </span><span class="comment">// offset a, offset b, Count<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ii</span><span class="keyword">=</span><span class="default">$p</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">)) return (</span><span class="default">$cc</span><span class="keyword">)?array(</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$cc</span><span class="keyword">):array(array(</span><span class="string">'+'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">));<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">=array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bi</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bp</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$m</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]!=</span><span class="default">$bi</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]!=</span><span class="default">$bp</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Replace<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]-</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$bp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bi</span><span class="keyword">=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bp</span><span class="keyword">=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Insertion<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'+'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]-</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bi</span><span class="keyword">=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]!=</span><span class="default">$bp</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Delete<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$bp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bp</span><span class="keyword">=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Match<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'='</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">],</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">],</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">],</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bi</span><span class="keyword">+=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bp</span><span class="keyword">+=</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$c</span><span class="keyword">!=</span><span class="default">$bi</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$cc</span><span class="keyword">!=</span><span class="default">$bp</span><span class="keyword">) </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">-</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">$cc</span><span class="keyword">-</span><span class="default">$bp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'+'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">-</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$cc</span><span class="keyword">!=</span><span class="default">$bp</span><span class="keyword">) </span><span class="default">$o</span><span class="keyword">[]=array(</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$bi</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$bp</span><span class="keyword">,</span><span class="default">$cc</span><span class="keyword">-</span><span class="default">$bp</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$o</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50699">  
  <a class="name">
  <strong class="user"><em>mcreuzer at r-world dot com</em></strong></a><div class="date" title="2005-03-07 09:01"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50699">
<div class="phpcode"><code><span class="html">
I am using the Levenshtein distance to SORT my search results.<br><br>I have a search page for peoples names. I do a SOUNDEX() search on the name in mysql. MySQL SOUNDEX() will perform the "fuzzy" search for me.<br><br>I then calculate the Levenshtein distance between the search term and the actual name found by the SOUNDEX() search. This will give me a score on how close my results are to the search string.<br><br>I can the sort my results for display listing the closest results first.<br><br><span class="default">&lt;?php<br></span><span class="comment">// PHP CODE INCLUDING DB LOOKUPS HERE<br>&nbsp; &nbsp; </span><span class="default">usort</span><span class="keyword">(</span><span class="default">$searchresults</span><span class="keyword">, </span><span class="string">"finallevenshteinsortfunction"</span><span class="keyword">);<br><br>function </span><span class="default">finallevenshteinsortfunction</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if((</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">] &gt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">]) || ( </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">] &amp;&amp; </span><span class="default">strnatcasecmp</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'Last_Name'</span><span class="keyword">], </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'Last_Name'</span><span class="keyword">]) &gt;= </span><span class="default">1</span><span class="keyword">) ){ return </span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">];} </span><span class="comment">// Ok... The levenstein is greater OR with the same levenshtein, the last name is alphanumerically first<br>&nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">]){ return </span><span class="string">'0'</span><span class="keyword">;} </span><span class="comment">// The levenstein matches <br>&nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">] &lt; </span><span class="default">$b</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">]){ return -</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'levenshtein'</span><span class="keyword">];}<br>&nbsp; &nbsp; else{die(</span><span class="string">"&lt;!-- a horrable death --&gt;"</span><span class="keyword">);}<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81046">  
  <a class="name">
  <strong class="user"><em>dale3h</em></strong></a><div class="date" title="2008-02-12 08:52"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81046">
<div class="phpcode"><code><span class="html">
Using PHP's example along with Patrick's comparison percentage function, I have come up with a function that returns the closest word from an array, and assigns the percentage to a referenced variable:<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">function </span><span class="default">closest_word</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">, &amp;</span><span class="default">$percent </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$lev </span><span class="keyword">= </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$lev </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$lev </span><span class="keyword">&lt;= </span><span class="default">$shortest </span><span class="keyword">|| </span><span class="default">$shortest </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest&nbsp; </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">$lev</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$percent </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">- </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$closest</span><span class="keyword">) / </span><span class="default">max</span><span class="keyword">(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$closest</span><span class="keyword">));<br><br>&nbsp; &nbsp; return </span><span class="default">$closest</span><span class="keyword">;<br>&nbsp; }<br></span><span class="default">?&gt;<br></span><br>Usage:<br><span class="default">&lt;?php<br>&nbsp; $input </span><span class="keyword">= </span><span class="string">'carrrot'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$words </span><span class="keyword">= array(</span><span class="string">'apple'</span><span class="keyword">,</span><span class="string">'pineapple'</span><span class="keyword">,</span><span class="string">'banana'</span><span class="keyword">,</span><span class="string">'orange'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'radish'</span><span class="keyword">,</span><span class="string">'carrot'</span><span class="keyword">,</span><span class="string">'pea'</span><span class="keyword">,</span><span class="string">'bean'</span><span class="keyword">,</span><span class="string">'potato'</span><span class="keyword">);<br><br>&nbsp; </span><span class="default">$percent </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">closest_word</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$words</span><span class="keyword">, </span><span class="default">$percent</span><span class="keyword">);<br><br>&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'Closest word to "%s": %s (%s%% match)'</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">, </span><span class="default">$found</span><span class="keyword">, </span><span class="default">round</span><span class="keyword">(</span><span class="default">$percent </span><span class="keyword">* </span><span class="default">100</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>I found that lowercasing the array prior to comparing yields a better comparison when the case is not of importance, for example: comparing a user-inputted category to a list of existing categories.<br><br>I also found that when the percentage was above 75%, it was usually the match that I was looking for.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24289">  
  <a class="name">
  <strong class="user"><em>bisqwit at iki dot fi</em></strong></a><div class="date" title="2002-08-12 07:43"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom24289">
<div class="phpcode"><code><span class="html">
At the time of this manual note the user defined thing&nbsp; <br>in levenshtein() is not implemented yet. I wanted something<br>like that, so I wrote my own function. Note that this<br>doesn't return levenshtein() difference, but instead <br>an array of operations to transform a string to another.<br><br>Please note that the difference finding part (resync)<br>may be extremely slow on long strings.<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/* matchlen(): returns the length of matching<br> * substrings at beginning of $a and $b<br> */<br></span><span class="keyword">function </span><span class="default">matchlen</span><span class="keyword">(&amp;</span><span class="default">$a</span><span class="keyword">, &amp;</span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$c</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; </span><span class="default">$alen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br>&nbsp; </span><span class="default">$blen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br>&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$alen</span><span class="keyword">, </span><span class="default">$blen</span><span class="keyword">);<br>&nbsp; while(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">] == </span><span class="default">$b</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">] &amp;&amp; </span><span class="default">$c </span><span class="keyword">&lt; </span><span class="default">$d</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$c</span><span class="keyword">++;&nbsp;&nbsp; <br>&nbsp; return </span><span class="default">$c</span><span class="keyword">;<br>}<br><br></span><span class="comment">/* Returns a table describing<br> * the differences of $a and $b */<br></span><span class="keyword">function </span><span class="default">calcdiffer</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$alen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br>&nbsp; </span><span class="default">$blen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br>&nbsp; </span><span class="default">$aptr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; </span><span class="default">$bptr </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; <br>&nbsp; </span><span class="default">$ops </span><span class="keyword">= array();<br>&nbsp; <br>&nbsp; while(</span><span class="default">$aptr </span><span class="keyword">&lt; </span><span class="default">$alen </span><span class="keyword">&amp;&amp; </span><span class="default">$bptr </span><span class="keyword">&lt; </span><span class="default">$blen</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$matchlen </span><span class="keyword">= </span><span class="default">matchlen</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$aptr</span><span class="keyword">), </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$bptr</span><span class="keyword">));<br>&nbsp; &nbsp; if(</span><span class="default">$matchlen</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$aptr</span><span class="keyword">, </span><span class="default">$matchlen</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$aptr </span><span class="keyword">+= </span><span class="default">$matchlen</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$bptr </span><span class="keyword">+= </span><span class="default">$matchlen</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/* Difference found */<br>&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="default">$bestlen</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bestpos</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">); <br>&nbsp; &nbsp; for(</span><span class="default">$atmp </span><span class="keyword">= </span><span class="default">$aptr</span><span class="keyword">; </span><span class="default">$atmp </span><span class="keyword">&lt; </span><span class="default">$alen</span><span class="keyword">; </span><span class="default">$atmp</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; for(</span><span class="default">$btmp </span><span class="keyword">= </span><span class="default">$bptr</span><span class="keyword">; </span><span class="default">$btmp </span><span class="keyword">&lt; </span><span class="default">$blen</span><span class="keyword">; </span><span class="default">$btmp</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$matchlen </span><span class="keyword">= </span><span class="default">matchlen</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$atmp</span><span class="keyword">), </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$btmp</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$matchlen</span><span class="keyword">&gt;</span><span class="default">$bestlen</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bestlen</span><span class="keyword">=</span><span class="default">$matchlen</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bestpos</span><span class="keyword">=array(</span><span class="default">$atmp</span><span class="keyword">,</span><span class="default">$btmp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$matchlen </span><span class="keyword">&gt;= </span><span class="default">$blen</span><span class="keyword">-</span><span class="default">$btmp</span><span class="keyword">)break;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(!</span><span class="default">$bestlen</span><span class="keyword">)break;<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; </span><span class="default">$adifflen </span><span class="keyword">= </span><span class="default">$bestpos</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] - </span><span class="default">$aptr</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bdifflen </span><span class="keyword">= </span><span class="default">$bestpos</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">$bptr</span><span class="keyword">;<br><br>&nbsp; &nbsp; if(</span><span class="default">$adifflen</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$aptr</span><span class="keyword">, </span><span class="default">$adifflen</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$aptr </span><span class="keyword">+= </span><span class="default">$adifflen</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(</span><span class="default">$bdifflen</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'+'</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$bptr</span><span class="keyword">, </span><span class="default">$bdifflen</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$bptr </span><span class="keyword">+= </span><span class="default">$bdifflen</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$aptr</span><span class="keyword">, </span><span class="default">$bestlen</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$aptr </span><span class="keyword">+= </span><span class="default">$bestlen</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$bptr </span><span class="keyword">+= </span><span class="default">$bestlen</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; if(</span><span class="default">$aptr </span><span class="keyword">&lt; </span><span class="default">$alen</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="comment">/* b has too much stuff */<br>&nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$aptr</span><span class="keyword">));<br>&nbsp; }<br>&nbsp; if(</span><span class="default">$bptr </span><span class="keyword">&lt; </span><span class="default">$blen</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="comment">/* a has too little stuff */<br>&nbsp; &nbsp; </span><span class="default">$ops</span><span class="keyword">[] = array(</span><span class="string">'+'</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$bptr</span><span class="keyword">));<br>&nbsp; }<br>&nbsp; return </span><span class="default">$ops</span><span class="keyword">;<br>}<br> <br><br></span><span class="default">Example</span><span class="keyword">:<br><br></span><span class="default">$tab </span><span class="keyword">= </span><span class="default">calcdiffer</span><span class="keyword">(</span><span class="string">'T�m� on jonkinlainen testi'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'T�m� ei ole mink��nlainen testi.'</span><span class="keyword">);&nbsp; <br></span><span class="default">$ops </span><span class="keyword">= array(</span><span class="string">'='</span><span class="keyword">=&gt;</span><span class="string">'Ok'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">=&gt;</span><span class="string">'Remove'</span><span class="keyword">, </span><span class="string">'+'</span><span class="keyword">=&gt;</span><span class="string">'Add'</span><span class="keyword">);<br>foreach(</span><span class="default">$tab </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">)<br>&nbsp; echo </span><span class="default">$ops</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]], </span><span class="string">" '"</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="string">"'\n"</span><span class="keyword">;<br><br></span><span class="default">Example output</span><span class="keyword">:<br><br></span><span class="default">Ok </span><span class="string">'T�m� '<br></span><span class="default">Remove </span><span class="string">'on jonki'<br></span><span class="default">Add </span><span class="string">'ei ole mink��'<br></span><span class="default">Ok </span><span class="string">'nlainen testi'<br></span><span class="default">Add </span><span class="string">'.'</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106381">  
  <a class="name">
  <strong class="user"><em>Chaim Chaikin</em></strong></a><div class="date" title="2011-11-02 11:40"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106381">
<div class="phpcode"><code><span class="html">
As regards to Example #1 above, would it not be more efficient to first use a simple php == comparison to check if the strings are equal even before testing the word with levenshtein().<br><br>Something like this:<br><br><span class="default">&lt;?php<br></span><span class="comment">// input misspelled word<br></span><span class="default">$input </span><span class="keyword">= </span><span class="string">'carrrot'</span><span class="keyword">;<br><br></span><span class="comment">// array of words to check against<br></span><span class="default">$words&nbsp; </span><span class="keyword">= array(</span><span class="string">'apple'</span><span class="keyword">,</span><span class="string">'pineapple'</span><span class="keyword">,</span><span class="string">'banana'</span><span class="keyword">,</span><span class="string">'orange'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'radish'</span><span class="keyword">,</span><span class="string">'carrot'</span><span class="keyword">,</span><span class="string">'pea'</span><span class="keyword">,</span><span class="string">'bean'</span><span class="keyword">,</span><span class="string">'potato'</span><span class="keyword">);<br><br></span><span class="comment">// no shortest distance found, yet<br></span><span class="default">$shortest </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br><br></span><span class="comment">// loop through words to find the closest<br></span><span class="keyword">foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="comment">// check for an exact match<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$input </span><span class="keyword">== </span><span class="default">$word</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// closest word is this one (exact match)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// break out of the loop; we've found an exact match<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">break;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">// calculate the distance between the input word,<br>&nbsp; &nbsp; // and the current word<br>&nbsp; &nbsp; </span><span class="default">$lev </span><span class="keyword">= </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// if this distance is less than the next found shortest<br>&nbsp; &nbsp; // distance, OR if a next shortest word has not yet been found<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$lev </span><span class="keyword">&lt;= </span><span class="default">$shortest </span><span class="keyword">|| </span><span class="default">$shortest </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// set the closest match, and shortest distance<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closest&nbsp; </span><span class="keyword">= </span><span class="default">$word</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$shortest </span><span class="keyword">= </span><span class="default">$lev</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br>echo </span><span class="string">"Input word: </span><span class="default">$input</span><span class="string">\n"</span><span class="keyword">;<br>if (</span><span class="default">$shortest </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; echo </span><span class="string">"Exact match found: </span><span class="default">$closest</span><span class="string">\n"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"Did you mean: </span><span class="default">$closest</span><span class="string">?\n"</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37953">  
  <a class="name">
  <strong class="user"><em>gzink at zinkconsulting dot com</em></strong></a><div class="date" title="2003-12-03 03:03"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37953">
<div class="phpcode"><code><span class="html">
Try combining this with metaphone() for a truly amazing fuzzy search function. Play with it a bit, the results can be plain scary (users thinking the computer is almost telepathic) when implemented properly. I wish spell checkers worked as well as the code I've written.
<br>
<br>I would release my complete code if reasonable, but it's not, due to copyright issues. I just hope that somebody can learn from this little tip!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114718">  
  <a class="name">
  <strong class="user"><em>kars at kargn dot as</em></strong></a><div class="date" title="2014-03-28 02:13"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114718">
<div class="phpcode"><code><span class="html">
This is useful to detect spam user.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83501">  
  <a class="name">
  <strong class="user"><em>luka8088 at gmail dot com</em></strong></a><div class="date" title="2008-05-28 01:03"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83501">
<div class="phpcode"><code><span class="html">
Simple levenshtein function without string length limit ...<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">levenshtein2</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">, </span><span class="default">$str2</span><span class="keyword">, </span><span class="default">$cost_ins </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$cost_rep </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, </span><span class="default">$cost_del </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br>&nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$j</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$str1</span><span class="keyword">{</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">} == </span><span class="default">$str2</span><span class="keyword">{</span><span class="default">$j </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">})<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">min</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">][</span><span class="default">$j </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">] + </span><span class="default">$c</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$d</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82605">  
  <a class="name">
  <strong class="user"><em>atx dot antrax at gmail dot com</em></strong></a><div class="date" title="2008-04-17 02:42"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82605">
<div class="phpcode"><code><span class="html">
I have made a function that removes the length-limit of levenshtein function and ajust the result with similar_text:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">_similar</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">, </span><span class="default">$str2</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$strlen1</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$strlen2</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$max</span><span class="keyword">=</span><span class="default">max</span><span class="keyword">(</span><span class="default">$strlen1</span><span class="keyword">, </span><span class="default">$strlen2</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$splitSize</span><span class="keyword">=</span><span class="default">250</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$max</span><span class="keyword">&gt;</span><span class="default">$splitSize</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lev</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$cont</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$cont</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">;</span><span class="default">$cont</span><span class="keyword">+=</span><span class="default">$splitSize</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$strlen1</span><span class="keyword">&lt;=</span><span class="default">$cont </span><span class="keyword">|| </span><span class="default">$strlen2</span><span class="keyword">&lt;=</span><span class="default">$cont</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lev</span><span class="keyword">=</span><span class="default">$lev</span><span class="keyword">/(</span><span class="default">$max</span><span class="keyword">/</span><span class="default">min</span><span class="keyword">(</span><span class="default">$strlen1</span><span class="keyword">,</span><span class="default">$strlen2</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lev</span><span class="keyword">+=</span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">,</span><span class="default">$cont</span><span class="keyword">,</span><span class="default">$splitSize</span><span class="keyword">), </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str2</span><span class="keyword">,</span><span class="default">$cont</span><span class="keyword">,</span><span class="default">$splitSize</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; </span><span class="default">$lev</span><span class="keyword">=</span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">, </span><span class="default">$str2</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$porcentage</span><span class="keyword">= -</span><span class="default">100</span><span class="keyword">*</span><span class="default">$lev</span><span class="keyword">/</span><span class="default">$max</span><span class="keyword">+</span><span class="default">100</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$porcentage</span><span class="keyword">&gt;</span><span class="default">75</span><span class="keyword">)</span><span class="comment">//Ajustar con similar_text<br>&nbsp; &nbsp; </span><span class="default">similar_text</span><span class="keyword">(</span><span class="default">$str1</span><span class="keyword">,</span><span class="default">$str2</span><span class="keyword">,</span><span class="default">$porcentage</span><span class="keyword">);<br><br>&nbsp; &nbsp; return </span><span class="default">$porcentage</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53562">  
  <a class="name">
  <strong class="user"><em>june05 at tilo-hauke dot de</em></strong></a><div class="date" title="2005-06-06 12:44"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53562">
<div class="phpcode"><code><span class="html">
//levenshtein for arrays<br>function array_levenshtein($array1,$array2)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {&nbsp;&nbsp; $aliases= array_flip(array_values(array_unique(array_merge($array1,$array2))));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(count($aliases)&gt;255) return -1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $stringA=''; $stringB='';<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($array1 as $entry) $stringA.=chr($aliases[$entry]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($array2 as $entry) $stringB.=chr($aliases[$entry]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return levenshtein($stringA,$stringB);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>// e.g. use array_levenshtein to detect special expressions in unser-inputs<br><br>echo array_levenshtein(split(" ", "my name is xxx"), split(" ","my name is levenshtein")); <br><br>//output: 1</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36900">  
  <a class="name">
  <strong class="user"><em>genialbrainmachine at  dot IHATESPAM dot tiscali dot it</em></strong></a><div class="date" title="2003-10-26 11:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36900">
<div class="phpcode"><code><span class="html">
I wrote this function to have an "intelligent" comparison between data to be written in a DB<br>and already existent data. Not ony calculating distances but also balancing distances for<br>each field.<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>This function calculate a balanced percentage distance between an array of strings<br>"$record" and a compared array "$compared", balanced through an array of<br>weights "$weight". The three arrays must have the same indices.<br>For an unbalanced distance, set all weights to 1.<br>The used formula is:<br>percentage distance = sum(field_levenshtein_distance * field_weight) / sum(record_field_length * field_weight) * 100<br>*/<br></span><span class="keyword">function </span><span class="default">search_similar</span><span class="keyword">(</span><span class="default">$record</span><span class="keyword">, </span><span class="default">$weights</span><span class="keyword">, </span><span class="default">$compared</span><span class="keyword">, </span><span class="default">$precision</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$field_names </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$record</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># "Weighted length" of $record and "weighted distance".<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$field_names </span><span class="keyword">as </span><span class="default">$field_key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$record_weight </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$record</span><span class="keyword">[</span><span class="default">$field_key</span><span class="keyword">]) * </span><span class="default">$weights</span><span class="keyword">[</span><span class="default">$field_key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$weighted_distance </span><span class="keyword">+= </span><span class="default">levenshtein</span><span class="keyword">(</span><span class="default">$record</span><span class="keyword">[</span><span class="default">$field_key</span><span class="keyword">],</span><span class="default">$compared</span><span class="keyword">[</span><span class="default">$field_key</span><span class="keyword">]) * </span><span class="default">$weights</span><span class="keyword">[</span><span class="default">$field_key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Building the result..<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$record_weight</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">((</span><span class="default">$weighted_distance </span><span class="keyword">/ </span><span class="default">$record_weight </span><span class="keyword">* </span><span class="default">100</span><span class="keyword">),</span><span class="default">$precision</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$record</span><span class="keyword">)) == </span><span class="default">0</span><span class="keyword">) &amp;&amp; (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$compared</span><span class="keyword">)) == </span><span class="default">0</span><span class="keyword">)) { </span><span class="comment">// empty records<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">round</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$precision</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$weights</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) { </span><span class="comment">// all weights == 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">round</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$precision</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Be very careful distinguising 0 result and false result.<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The function results 0 ('0.00' if $precision is 2 and so on) if:<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - $record and $compared are equals (even if $record and $compared are empty);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - all weights are 0 (the meaning could be "no care about any field").<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Conversely, the function results false if $record is empty, but the weights<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; are not all 0 and $compared is not empty. That cause a "division by 0" error.<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; I wrote this kind of check:<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ($rel_dist = search_similar(...)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; print $rel_dist;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif ($rel_dist == "0.00") { // supposing that $precision is 2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print $rel_dist;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "infinite";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36877">  
  <a class="name">
  <strong class="user"><em>jlsalinas at gmx dot net</em></strong></a><div class="date" title="2003-10-25 07:28"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36877">
<div class="phpcode"><code><span class="html">
Regarding the post by fgilles on April 26th 2001, I suggest not to use levenshtein() function to test for over-uppercasing unless you've got plenty of time to waste in your host. ;) Anyhow, I think it's a useful feature, as I get really annoyed when reading whole messages in uppercase.<br><br>PHP's levenshtein() function can only handle up to 255 characters, which is not realistic for user input (only the first paragraph oh this post has 285 characters). If you choose to use a custom function able to handle more than 255 characters, efficiency is an important issue.<br><br>I use this function, specific for this case, but much faster:<br><br>function ucase_percent ($str) {<br>&nbsp; &nbsp; $str2 = strtolower ($str);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $l = strlen ($str);<br>&nbsp; &nbsp; $ucase = 0;<br><br>&nbsp; &nbsp; for ($i = 0; $i &lt; $l; $i++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($str{$i} != $str2{$i}) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ucase++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return $ucase / $l * 100.0;<br>}<br><br>I think 10% is enough for written English (maybe other languages like German, which use more capital letters, need more). With some sentencies in uppercase (everybody has the right to shout occasionally), 20% would be enough; so I use a threshold of 30%. When exceeded, I lowercase the whole message.<br><br>Hope you find it useful and it helps keeping the web free of ill-mannered people.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20670">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-04-11 06:57"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20670">
<div class="phpcode"><code><span class="html">
For spell checking applications, delay could be tolerable if you assume the typist got the first two or three chars of each word right.&nbsp; Then you'd only need to calc distances for a small segment of the dictionary.&nbsp; This is a compromise but one I think a lot of spell checkers make.<br>For an example of site search using this function look at the PHP manual search button on this page.&nbsp; It appears to be doing this for the PHP function list.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12645">  
  <a class="name">
  <strong class="user"><em>fgilles at free dot fr</em></strong></a><div class="date" title="2001-04-26 01:32"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom12645">
<div class="phpcode"><code><span class="html">
Exempla of use for a forum: users can't post messages too much uppercased
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if ((</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)&gt;</span><span class="default">10</span><span class="keyword">) and ( ( </span><span class="default">levenshtein </span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">strtolower </span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">) / </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">) ) &gt; </span><span class="default">.3 </span><span class="keyword">) ){
<br>&nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="7486">  
  <a class="name">
  <strong class="user"><em>ad1n at dc dot uba dot ar</em></strong></a><div class="date" title="2000-08-04 05:01"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom7486">
<div class="phpcode"><code><span class="html">
One application of this is when you want to look for a similar match instead of an exact one. You can sort the results of checking the distances of a word to a dictionary and sort them to see which were the more similar ones. Of course it will be a quite resourse consuming task anyway.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.levenshtein.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:14 GMT -->


</body></html>