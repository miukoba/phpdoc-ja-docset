<html><!-- Mirrored from php.net/manual/en/function.crc32.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:10 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>crc32</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.crc32.html">
 <link rel="shorturl" href="http://php.net/crc32">
 <link rel="alternate" href="http://php.net/crc32" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.count-chars.html">
 <link rel="next" href="function.crypt.html">

 <link rel="alternate" href="function.crc32.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.crc32.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.crc32.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.crc32.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.crc32.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.crc32.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.crc32.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.crc32.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.crc32.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.crc32.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.crc32.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.crc32" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">crc32</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">crc32</span> â€” <span class="dc-title">Calculates the crc32 polynomial of a string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.crc32-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>crc32</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   )</div>

  <p class="para rdfs-comment">
   Generates the cyclic redundancy checksum polynomial of 32-bit
   lengths of the <code class="parameter">str</code>. This is usually used
   to validate the integrity of data being transmitted.
  </p>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="simpara">
    Because PHP's integer type is signed many crc32 checksums will
    result in negative integers on 32bit platforms. On 64bit installations
    all <span class="function"><strong>crc32()</strong></span> results will be positive integers though.
   </p>
   <p class="simpara">
    So you need to use the "%u" formatter of <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span> or 
    <span class="function"><a href="function.printf.html" class="function">printf()</a></span> to get the string representation of the 
    unsigned <span class="function"><strong>crc32()</strong></span> checksum in decimal format.
   </p>
   <p class="simpara">
    For a hexadecimal representation of the checksum you can either use the 
    "%x" formatter of <span class="function"><a href="function.sprintf.html" class="function">sprintf()</a></span> or <span class="function"><a href="function.printf.html" class="function">printf()</a></span> 
    or the <span class="function"><a href="function.dechex.html" class="function">dechex()</a></span> conversion functions, both of these
    also take care of converting the <span class="function"><strong>crc32()</strong></span> result to
    an unsigned integer.
   </p>
   <p class="simpara">
    Having 64bit installations also return negative integers for higher
    result values was considered but would break the hexadecimal conversion
    as negatives would get an extra 0xFFFFFFFF######## offset then. As 
    hexadecimal representation seems to be the most common use case we
    decided to not break this even if it breaks direct decimal comparisons
    in about 50% of the cases when moving from 32 to 64bits.
   </p>
   <p class="simpara">
    In retrospect having the function return an integer maybe wasn't the 
    best idea and returning a hex string representation right away (as 
    e.g. <span class="function"><a href="function.md5.html" class="function">md5()</a></span> does) might have been a better plan to
    begin with.
   </p>
   <p class="simpara">
    For a more portable solution you may also consider the generic 
    <span class="function"><a href="function.hash.html" class="function">hash()</a></span>. <code class="code">hash("crc32b", $str)</code> will 
    return the same string as <code class="code">dechex(crc32($str))</code>.
   </p>
  </div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.crc32-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       The data.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.crc32-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the crc32 checksum of <code class="parameter">str</code> as an integer.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.crc32-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4940">
    <p><strong>Example #1 Displaying a crc32 checksum</strong></p>
    <div class="example-contents"><p>
     This example shows how to print a converted checksum with the
     <span class="function"><a href="function.printf.html" class="function">printf()</a></span> function:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$checksum&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">crc32</span><span style="color: #007700">(</span><span style="color: #DD0000">"The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog."</span><span style="color: #007700">);<br></span><span style="color: #0000BB">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%u\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$checksum</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.crc32-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.hash.html" class="function" rel="rdfs-seeAlso">hash()</a> - Generate a hash value (message digest)</span></li>
    <li class="member"><span class="function"><a href="function.md5.html" class="function" rel="rdfs-seeAlso">md5()</a> - Calculate the md5 hash of a string</span></li>
    <li class="member"><span class="function"><a href="function.sha1.html" class="function" rel="rdfs-seeAlso">sha1()</a> - Calculate the sha1 hash of a string</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="56215">  
  <a class="name">
  <strong class="user"><em>Bulk at bulksplace dot com</em></strong></a><div class="date" title="2005-08-27 05:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom56215">
<div class="phpcode"><code><span class="html">
A faster way I've found to return CRC values of larger files, is instead of using the file()/implode() method used below, is to us file_get_contents() (PHP 4 &gt;= 4.3.0) which uses memory mapping techniques if supported by your OS to enhance performance. Here's my example function: 
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// $file is the path to the file you want to check.
<br></span><span class="keyword">function </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$file_string </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$file_string</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"%u"</span><span class="keyword">, </span><span class="default">$crc</span><span class="keyword">);
<br>}
<br>
<br></span><span class="default">$file_to_crc </span><span class="keyword">= /</span><span class="default">home</span><span class="keyword">/</span><span class="default">path</span><span class="keyword">/</span><span class="default">to</span><span class="keyword">/</span><span class="default">file</span><span class="keyword">.</span><span class="default">jpg</span><span class="keyword">;
<br>
<br>echo </span><span class="default">file_crc</span><span class="keyword">(</span><span class="default">$file_to_crc</span><span class="keyword">); </span><span class="comment">// Outputs CRC value for given file.
<br></span><span class="default">?&gt;
<br></span>
<br>I've found in testing this method is MUCH faster for larger binary files.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105703">  
  <a class="name">
  <strong class="user"><em>sukitsupaluk at hotmail dot com</em></strong></a><div class="date" title="2011-09-08 03:04"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105703">
<div class="phpcode"><code><span class="html">
small sample convert crc32 to character map<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">khash</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) {<br>&nbsp; &nbsp; static </span><span class="default">$map</span><span class="keyword">=</span><span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$hash</span><span class="keyword">=</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)+</span><span class="default">0x100000000</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; do {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">$map</span><span class="keyword">[</span><span class="default">31</span><span class="keyword">+ (</span><span class="default">$hash </span><span class="keyword">% </span><span class="default">31</span><span class="keyword">)] . </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$hash </span><span class="keyword">/= </span><span class="default">31</span><span class="keyword">;<br>&nbsp; &nbsp; } while(</span><span class="default">$hash </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br></span><span class="default">$test</span><span class="keyword">= array(</span><span class="default">null</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">FALSE</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">,</span><span class="string">"abc"</span><span class="keyword">,</span><span class="string">"abcd"</span><span class="keyword">,</span><span class="string">"abcde"</span><span class="keyword">,</span><span class="string">"abcdefoo"</span><span class="keyword">);<br></span><span class="default">$out </span><span class="keyword">= array();<br>foreach(</span><span class="default">$test </span><span class="keyword">as </span><span class="default">$s</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[]=</span><span class="default">khash</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">).</span><span class="string">": "</span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;<br>}<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br><br></span><span class="comment">/*<br>output:<br>array<br>&nbsp; 0 =&gt; string 'zVvOYTv: ' (length=9)<br>&nbsp; 1 =&gt; string 'xKDKKL8: 1' (length=10)<br>&nbsp; 2 =&gt; string 'zVvOYTv: ' (length=9)<br>&nbsp; 3 =&gt; string 'zOKCQxh: 0' (length=10)<br>&nbsp; 4 =&gt; string 'zOKCQxh: 0' (length=10)<br>&nbsp; 5 =&gt; string 'xKDKKL8: 1' (length=10)<br>&nbsp; 6 =&gt; string 'xKDKKL8: 1' (length=10)<br>&nbsp; 7 =&gt; string 'AFSzIAO: 2' (length=10)<br>&nbsp; 8 =&gt; string 'BXGSvQJ: 3' (length=10)<br>&nbsp; 9 =&gt; string 'xZWOQSu: ab' (length=11)<br>&nbsp; 10 =&gt; string 'AVAwHOR: abc' (length=12)<br>&nbsp; 11 =&gt; string 'zKASNE1: abcd' (length=13)<br>&nbsp; 12 =&gt; string 'xLCTOV7: abcde' (length=14)<br>&nbsp; 13 =&gt; string 'zQLzKMt: abcdefoo' (length=17)<br><br>*/<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96262">  
  <a class="name">
  <strong class="user"><em>jian at theorchard dot com</em></strong></a><div class="date" title="2010-02-17 10:13"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96262">
<div class="phpcode"><code><span class="html">
This function returns an unsigned integer from a 64-bit Linux platform.&nbsp; It does return the signed integer from other 32-bit platforms even a 64-bit Windows one.
<br>
<br>The reason is because the two constants PHP_INT_SIZE and PHP_INT_MAX have different values on the 64-bit Linux platform.
<br>
<br>I've created a work-around function to handle this situation.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">get_signed_int</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$int_max </span><span class="keyword">= </span><span class="default">pow</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">, </span><span class="default">31</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; if (</span><span class="default">$in </span><span class="keyword">&gt; </span><span class="default">$int_max</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">$in </span><span class="keyword">- </span><span class="default">$int_max </span><span class="keyword">* </span><span class="default">2 </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="default">$in</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$out</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Hope this helps.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79567">  
  <a class="name">
  <strong class="user"><em>dave at jufer dot info</em></strong></a><div class="date" title="2007-12-03 02:15"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79567">
<div class="phpcode"><code><span class="html">
This function returns the same int value on a 64 bit mc. like the crc32() function on a 32 bit mc.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">crcKw</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">);
<br>&nbsp; &nbsp; if(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= -</span><span class="default">$crc</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$crc</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64127">  
  <a class="name">
  <strong class="user"><em>roberto at spadim dot com dot br</em></strong></a><div class="date" title="2006-04-07 09:52"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64127">
<div class="phpcode"><code><span class="html">
MODBUS RTU, CRC16, 
<br>input-&gt; modbus rtu string
<br>output -&gt; 2bytes string, in correct modbus order
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">crc16</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; </span><span class="default">$auchCRCHi</span><span class="keyword">=array(&nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x40</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$auchCRCLo</span><span class="keyword">=array(&nbsp; &nbsp; </span><span class="default">0x00</span><span class="keyword">, </span><span class="default">0xC0</span><span class="keyword">, </span><span class="default">0xC1</span><span class="keyword">, </span><span class="default">0x01</span><span class="keyword">, </span><span class="default">0xC3</span><span class="keyword">, </span><span class="default">0x03</span><span class="keyword">, </span><span class="default">0x02</span><span class="keyword">, </span><span class="default">0xC2</span><span class="keyword">, </span><span class="default">0xC6</span><span class="keyword">, </span><span class="default">0x06</span><span class="keyword">, </span><span class="default">0x07</span><span class="keyword">, </span><span class="default">0xC7</span><span class="keyword">, </span><span class="default">0x05</span><span class="keyword">, </span><span class="default">0xC5</span><span class="keyword">, </span><span class="default">0xC4</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x04</span><span class="keyword">, </span><span class="default">0xCC</span><span class="keyword">, </span><span class="default">0x0C</span><span class="keyword">, </span><span class="default">0x0D</span><span class="keyword">, </span><span class="default">0xCD</span><span class="keyword">, </span><span class="default">0x0F</span><span class="keyword">, </span><span class="default">0xCF</span><span class="keyword">, </span><span class="default">0xCE</span><span class="keyword">, </span><span class="default">0x0E</span><span class="keyword">, </span><span class="default">0x0A</span><span class="keyword">, </span><span class="default">0xCA</span><span class="keyword">, </span><span class="default">0xCB</span><span class="keyword">, </span><span class="default">0x0B</span><span class="keyword">, </span><span class="default">0xC9</span><span class="keyword">, </span><span class="default">0x09</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x08</span><span class="keyword">, </span><span class="default">0xC8</span><span class="keyword">, </span><span class="default">0xD8</span><span class="keyword">, </span><span class="default">0x18</span><span class="keyword">, </span><span class="default">0x19</span><span class="keyword">, </span><span class="default">0xD9</span><span class="keyword">, </span><span class="default">0x1B</span><span class="keyword">, </span><span class="default">0xDB</span><span class="keyword">, </span><span class="default">0xDA</span><span class="keyword">, </span><span class="default">0x1A</span><span class="keyword">, </span><span class="default">0x1E</span><span class="keyword">, </span><span class="default">0xDE</span><span class="keyword">, </span><span class="default">0xDF</span><span class="keyword">, </span><span class="default">0x1F</span><span class="keyword">, </span><span class="default">0xDD</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x1D</span><span class="keyword">, </span><span class="default">0x1C</span><span class="keyword">, </span><span class="default">0xDC</span><span class="keyword">, </span><span class="default">0x14</span><span class="keyword">, </span><span class="default">0xD4</span><span class="keyword">, </span><span class="default">0xD5</span><span class="keyword">, </span><span class="default">0x15</span><span class="keyword">, </span><span class="default">0xD7</span><span class="keyword">, </span><span class="default">0x17</span><span class="keyword">, </span><span class="default">0x16</span><span class="keyword">, </span><span class="default">0xD6</span><span class="keyword">, </span><span class="default">0xD2</span><span class="keyword">, </span><span class="default">0x12</span><span class="keyword">, </span><span class="default">0x13</span><span class="keyword">, </span><span class="default">0xD3</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x11</span><span class="keyword">, </span><span class="default">0xD1</span><span class="keyword">, </span><span class="default">0xD0</span><span class="keyword">, </span><span class="default">0x10</span><span class="keyword">, </span><span class="default">0xF0</span><span class="keyword">, </span><span class="default">0x30</span><span class="keyword">, </span><span class="default">0x31</span><span class="keyword">, </span><span class="default">0xF1</span><span class="keyword">, </span><span class="default">0x33</span><span class="keyword">, </span><span class="default">0xF3</span><span class="keyword">, </span><span class="default">0xF2</span><span class="keyword">, </span><span class="default">0x32</span><span class="keyword">, </span><span class="default">0x36</span><span class="keyword">, </span><span class="default">0xF6</span><span class="keyword">, </span><span class="default">0xF7</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x37</span><span class="keyword">, </span><span class="default">0xF5</span><span class="keyword">, </span><span class="default">0x35</span><span class="keyword">, </span><span class="default">0x34</span><span class="keyword">, </span><span class="default">0xF4</span><span class="keyword">, </span><span class="default">0x3C</span><span class="keyword">, </span><span class="default">0xFC</span><span class="keyword">, </span><span class="default">0xFD</span><span class="keyword">, </span><span class="default">0x3D</span><span class="keyword">, </span><span class="default">0xFF</span><span class="keyword">, </span><span class="default">0x3F</span><span class="keyword">, </span><span class="default">0x3E</span><span class="keyword">, </span><span class="default">0xFE</span><span class="keyword">, </span><span class="default">0xFA</span><span class="keyword">, </span><span class="default">0x3A</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x3B</span><span class="keyword">, </span><span class="default">0xFB</span><span class="keyword">, </span><span class="default">0x39</span><span class="keyword">, </span><span class="default">0xF9</span><span class="keyword">, </span><span class="default">0xF8</span><span class="keyword">, </span><span class="default">0x38</span><span class="keyword">, </span><span class="default">0x28</span><span class="keyword">, </span><span class="default">0xE8</span><span class="keyword">, </span><span class="default">0xE9</span><span class="keyword">, </span><span class="default">0x29</span><span class="keyword">, </span><span class="default">0xEB</span><span class="keyword">, </span><span class="default">0x2B</span><span class="keyword">, </span><span class="default">0x2A</span><span class="keyword">, </span><span class="default">0xEA</span><span class="keyword">, </span><span class="default">0xEE</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x2E</span><span class="keyword">, </span><span class="default">0x2F</span><span class="keyword">, </span><span class="default">0xEF</span><span class="keyword">, </span><span class="default">0x2D</span><span class="keyword">, </span><span class="default">0xED</span><span class="keyword">, </span><span class="default">0xEC</span><span class="keyword">, </span><span class="default">0x2C</span><span class="keyword">, </span><span class="default">0xE4</span><span class="keyword">, </span><span class="default">0x24</span><span class="keyword">, </span><span class="default">0x25</span><span class="keyword">, </span><span class="default">0xE5</span><span class="keyword">, </span><span class="default">0x27</span><span class="keyword">, </span><span class="default">0xE7</span><span class="keyword">, </span><span class="default">0xE6</span><span class="keyword">, </span><span class="default">0x26</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x22</span><span class="keyword">, </span><span class="default">0xE2</span><span class="keyword">, </span><span class="default">0xE3</span><span class="keyword">, </span><span class="default">0x23</span><span class="keyword">, </span><span class="default">0xE1</span><span class="keyword">, </span><span class="default">0x21</span><span class="keyword">, </span><span class="default">0x20</span><span class="keyword">, </span><span class="default">0xE0</span><span class="keyword">, </span><span class="default">0xA0</span><span class="keyword">, </span><span class="default">0x60</span><span class="keyword">, </span><span class="default">0x61</span><span class="keyword">, </span><span class="default">0xA1</span><span class="keyword">, </span><span class="default">0x63</span><span class="keyword">, </span><span class="default">0xA3</span><span class="keyword">, </span><span class="default">0xA2</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x62</span><span class="keyword">, </span><span class="default">0x66</span><span class="keyword">, </span><span class="default">0xA6</span><span class="keyword">, </span><span class="default">0xA7</span><span class="keyword">, </span><span class="default">0x67</span><span class="keyword">, </span><span class="default">0xA5</span><span class="keyword">, </span><span class="default">0x65</span><span class="keyword">, </span><span class="default">0x64</span><span class="keyword">, </span><span class="default">0xA4</span><span class="keyword">, </span><span class="default">0x6C</span><span class="keyword">, </span><span class="default">0xAC</span><span class="keyword">, </span><span class="default">0xAD</span><span class="keyword">, </span><span class="default">0x6D</span><span class="keyword">, </span><span class="default">0xAF</span><span class="keyword">, </span><span class="default">0x6F</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x6E</span><span class="keyword">, </span><span class="default">0xAE</span><span class="keyword">, </span><span class="default">0xAA</span><span class="keyword">, </span><span class="default">0x6A</span><span class="keyword">, </span><span class="default">0x6B</span><span class="keyword">, </span><span class="default">0xAB</span><span class="keyword">, </span><span class="default">0x69</span><span class="keyword">, </span><span class="default">0xA9</span><span class="keyword">, </span><span class="default">0xA8</span><span class="keyword">, </span><span class="default">0x68</span><span class="keyword">, </span><span class="default">0x78</span><span class="keyword">, </span><span class="default">0xB8</span><span class="keyword">, </span><span class="default">0xB9</span><span class="keyword">, </span><span class="default">0x79</span><span class="keyword">, </span><span class="default">0xBB</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x7B</span><span class="keyword">, </span><span class="default">0x7A</span><span class="keyword">, </span><span class="default">0xBA</span><span class="keyword">, </span><span class="default">0xBE</span><span class="keyword">, </span><span class="default">0x7E</span><span class="keyword">, </span><span class="default">0x7F</span><span class="keyword">, </span><span class="default">0xBF</span><span class="keyword">, </span><span class="default">0x7D</span><span class="keyword">, </span><span class="default">0xBD</span><span class="keyword">, </span><span class="default">0xBC</span><span class="keyword">, </span><span class="default">0x7C</span><span class="keyword">, </span><span class="default">0xB4</span><span class="keyword">, </span><span class="default">0x74</span><span class="keyword">, </span><span class="default">0x75</span><span class="keyword">, </span><span class="default">0xB5</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x77</span><span class="keyword">, </span><span class="default">0xB7</span><span class="keyword">, </span><span class="default">0xB6</span><span class="keyword">, </span><span class="default">0x76</span><span class="keyword">, </span><span class="default">0x72</span><span class="keyword">, </span><span class="default">0xB2</span><span class="keyword">, </span><span class="default">0xB3</span><span class="keyword">, </span><span class="default">0x73</span><span class="keyword">, </span><span class="default">0xB1</span><span class="keyword">, </span><span class="default">0x71</span><span class="keyword">, </span><span class="default">0x70</span><span class="keyword">, </span><span class="default">0xB0</span><span class="keyword">, </span><span class="default">0x50</span><span class="keyword">, </span><span class="default">0x90</span><span class="keyword">, </span><span class="default">0x91</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x51</span><span class="keyword">, </span><span class="default">0x93</span><span class="keyword">, </span><span class="default">0x53</span><span class="keyword">, </span><span class="default">0x52</span><span class="keyword">, </span><span class="default">0x92</span><span class="keyword">, </span><span class="default">0x96</span><span class="keyword">, </span><span class="default">0x56</span><span class="keyword">, </span><span class="default">0x57</span><span class="keyword">, </span><span class="default">0x97</span><span class="keyword">, </span><span class="default">0x55</span><span class="keyword">, </span><span class="default">0x95</span><span class="keyword">, </span><span class="default">0x94</span><span class="keyword">, </span><span class="default">0x54</span><span class="keyword">, </span><span class="default">0x9C</span><span class="keyword">, </span><span class="default">0x5C</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x5D</span><span class="keyword">, </span><span class="default">0x9D</span><span class="keyword">, </span><span class="default">0x5F</span><span class="keyword">, </span><span class="default">0x9F</span><span class="keyword">, </span><span class="default">0x9E</span><span class="keyword">, </span><span class="default">0x5E</span><span class="keyword">, </span><span class="default">0x5A</span><span class="keyword">, </span><span class="default">0x9A</span><span class="keyword">, </span><span class="default">0x9B</span><span class="keyword">, </span><span class="default">0x5B</span><span class="keyword">, </span><span class="default">0x99</span><span class="keyword">, </span><span class="default">0x59</span><span class="keyword">, </span><span class="default">0x58</span><span class="keyword">, </span><span class="default">0x98</span><span class="keyword">, </span><span class="default">0x88</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x48</span><span class="keyword">, </span><span class="default">0x49</span><span class="keyword">, </span><span class="default">0x89</span><span class="keyword">, </span><span class="default">0x4B</span><span class="keyword">, </span><span class="default">0x8B</span><span class="keyword">, </span><span class="default">0x8A</span><span class="keyword">, </span><span class="default">0x4A</span><span class="keyword">, </span><span class="default">0x4E</span><span class="keyword">, </span><span class="default">0x8E</span><span class="keyword">, </span><span class="default">0x8F</span><span class="keyword">, </span><span class="default">0x4F</span><span class="keyword">, </span><span class="default">0x8D</span><span class="keyword">, </span><span class="default">0x4D</span><span class="keyword">, </span><span class="default">0x4C</span><span class="keyword">, </span><span class="default">0x8C</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x44</span><span class="keyword">, </span><span class="default">0x84</span><span class="keyword">, </span><span class="default">0x85</span><span class="keyword">, </span><span class="default">0x45</span><span class="keyword">, </span><span class="default">0x87</span><span class="keyword">, </span><span class="default">0x47</span><span class="keyword">, </span><span class="default">0x46</span><span class="keyword">, </span><span class="default">0x86</span><span class="keyword">, </span><span class="default">0x82</span><span class="keyword">, </span><span class="default">0x42</span><span class="keyword">, </span><span class="default">0x43</span><span class="keyword">, </span><span class="default">0x83</span><span class="keyword">, </span><span class="default">0x41</span><span class="keyword">, </span><span class="default">0x81</span><span class="keyword">, </span><span class="default">0x80</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x40</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$length&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=(</span><span class="default">$length</span><span class="keyword">&lt;=</span><span class="default">0</span><span class="keyword">?</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">):</span><span class="default">$length</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$uchCRCHi&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0xFF</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$uchCRCLo&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0xFF</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$uIndex&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$uIndex&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$uchCRCLo </span><span class="keyword">^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$uchCRCLo&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$uchCRCHi </span><span class="keyword">^ </span><span class="default">$auchCRCHi</span><span class="keyword">[</span><span class="default">$uIndex</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$uchCRCHi&nbsp; &nbsp; </span><span class="keyword">=</span><span class="default">$auchCRCLo</span><span class="keyword">[</span><span class="default">$uIndex</span><span class="keyword">] ;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">$uchCRCLo</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">$uchCRCHi</span><span class="keyword">));
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39545">  
  <a class="name">
  <strong class="user"><em>same</em></strong></a><div class="date" title="2004-02-01 05:27"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39545">
<div class="phpcode"><code><span class="html">
bit by bit crc32 computation<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">bitbybit_crc32</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$first_call</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">){<br><br>&nbsp; &nbsp; </span><span class="comment">//reflection in 32 bits of crc32 polynomial 0x04C11DB7<br>&nbsp; &nbsp; </span><span class="default">$poly_reflected</span><span class="keyword">=</span><span class="default">0xEDB88320</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//=0xFFFFFFFF; //keep track of register value after each call<br>&nbsp; &nbsp; </span><span class="keyword">static </span><span class="default">$reg</span><span class="keyword">=</span><span class="default">0xFFFFFFFF</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//initialize register on first call<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$first_call</span><span class="keyword">) </span><span class="default">$reg</span><span class="keyword">=</span><span class="default">0xFFFFFFFF</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$zeros</span><span class="keyword">=</span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">4 </span><span class="keyword">? </span><span class="default">$n </span><span class="keyword">: </span><span class="default">4</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//xor first $zeros=min(4,strlen($str)) bytes into the register<br>&nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$zeros</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$reg</span><span class="keyword">^=</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})&lt;&lt;</span><span class="default">$i</span><span class="keyword">*</span><span class="default">8</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//now for the rest of the string<br>&nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$n</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$next_char</span><span class="keyword">=</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">8</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$reg</span><span class="keyword">=((</span><span class="default">$reg</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">&amp;</span><span class="default">0x7FFFFFFF</span><span class="keyword">)|(</span><span class="default">$next_char</span><span class="keyword">&gt;&gt;</span><span class="default">$j</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)&lt;&lt;</span><span class="default">0x1F</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^(</span><span class="default">$reg</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)*</span><span class="default">$poly_reflected</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">//put in enough zeros at the end<br>&nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$zeros</span><span class="keyword">*</span><span class="default">8</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$reg</span><span class="keyword">=(</span><span class="default">$reg</span><span class="keyword">&gt;&gt;</span><span class="default">1</span><span class="keyword">&amp;</span><span class="default">0x7FFFFFFF</span><span class="keyword">)^(</span><span class="default">$reg</span><span class="keyword">&amp;</span><span class="default">1</span><span class="keyword">)*</span><span class="default">$poly_reflected</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//xor the register with 0xFFFFFFFF<br>&nbsp; &nbsp; </span><span class="keyword">return ~</span><span class="default">$reg</span><span class="keyword">;<br>}<br><br></span><span class="default">$str</span><span class="keyword">=</span><span class="string">"123456789"</span><span class="keyword">; </span><span class="comment">//whatever<br></span><span class="default">$blocksize</span><span class="keyword">=</span><span class="default">4</span><span class="keyword">; </span><span class="comment">//whatever<br><br></span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">+=</span><span class="default">$blocksize</span><span class="keyword">) </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">bitbybit_crc32</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$blocksize</span><span class="keyword">),!</span><span class="default">$i</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78232">  
  <a class="name">
  <strong class="user"><em>Ren</em></strong></a><div class="date" title="2007-10-03 11:53"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78232">
<div class="phpcode"><code><span class="html">
Dealing with 32 bit unsigned values overflowing 32 bit php signed values can be done by adding 0x10000000 to any unexpected negative result, rather than using sprintf.<br><br>$i = crc32('1');<br>printf("%u\n", $i);<br>if (0 &gt; $i)<br>{<br>&nbsp; &nbsp; // Implicitly casts i as float, and corrects this sign.<br>&nbsp; &nbsp; $i += 0x100000000;<br>}<br>var_dump($i);<br><br>Outputs:<br><br>2212294583<br>float(2212294583)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100060">  
  <a class="name">
  <strong class="user"><em>chernyshevsky at hotmail dot com</em></strong></a><div class="date" title="2010-09-22 03:54"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100060">
<div class="phpcode"><code><span class="html">
The crc32_combine() function provided by petteri at qred dot fi has a bug that causes an infinite loop, a shift operation on a 32-bit signed int might never reach zero. Replacing the function gf2_matrix_times() with the following seems to fix it:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">gf2_matrix_times</span><span class="keyword">(</span><span class="default">$mat</span><span class="keyword">, </span><span class="default">$vec</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$sum</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; while (</span><span class="default">$vec</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$vec </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sum </span><span class="keyword">^= </span><span class="default">$mat</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$vec </span><span class="keyword">= (</span><span class="default">$vec </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; </span><span class="default">0x7FFFFFFF</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;&nbsp; &nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$sum</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Otherwise, it's probably the best solution if you can't use hash_file(). Using a 1meg read buffer, the function only takes twice as long to process a 300meg files than hash_file() in my test.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111699">  
  <a class="name">
  <strong class="user"><em>i at morfi dot ru</em></strong></a><div class="date" title="2013-03-18 01:16"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111699">
<div class="phpcode"><code><span class="html">
Implementation crc64() in php 64bit<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * @return array<br> */<br></span><span class="keyword">function </span><span class="default">crc64Table</span><span class="keyword">()<br>{<br>&nbsp; &nbsp; </span><span class="default">$crc64tab </span><span class="keyword">= [];<br><br>&nbsp; &nbsp; </span><span class="comment">// ECMA polynomial<br>&nbsp; &nbsp; </span><span class="default">$poly64rev </span><span class="keyword">= (</span><span class="default">0xC96C5795 </span><span class="keyword">&lt;&lt; </span><span class="default">32</span><span class="keyword">) | </span><span class="default">0xD7870F42</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// ISO polynomial<br>&nbsp; &nbsp; // $poly64rev = (0xD8 &lt;&lt; 56);<br><br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">256</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$part </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$bit </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$bit </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$bit</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$part </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$part </span><span class="keyword">= ((</span><span class="default">$part </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; ~(</span><span class="default">0x8 </span><span class="keyword">&lt;&lt; </span><span class="default">60</span><span class="keyword">)) ^ </span><span class="default">$poly64rev</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$part </span><span class="keyword">= (</span><span class="default">$part </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; ~(</span><span class="default">0x8 </span><span class="keyword">&lt;&lt; </span><span class="default">60</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc64tab</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$part</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$crc64tab</span><span class="keyword">;<br>}<br><br></span><span class="comment">/**<br> * @param string $string<br> * @param string $format<br> * @return mixed<br> * <br> * Formats:<br> *&nbsp; crc64('php'); // afe4e823e7cef190<br> *&nbsp; crc64('php', '0x%x'); // 0xafe4e823e7cef190<br> *&nbsp; crc64('php', '0x%X'); // 0xAFE4E823E7CEF190<br> *&nbsp; crc64('php', '%d'); // -5772233581471534704 signed int<br> *&nbsp; crc64('php', '%u'); // 12674510492238016912 unsigned int<br> */<br></span><span class="keyword">function </span><span class="default">crc64</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$format </span><span class="keyword">= </span><span class="string">'%x'</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; static </span><span class="default">$crc64tab</span><span class="keyword">;<br><br>&nbsp; &nbsp; if (</span><span class="default">$crc64tab </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc64tab </span><span class="keyword">= </span><span class="default">crc64Table</span><span class="keyword">();<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$crc64tab</span><span class="keyword">[(</span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) &amp; </span><span class="default">0xff</span><span class="keyword">] ^ ((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; ~(</span><span class="default">0xff </span><span class="keyword">&lt;&lt; </span><span class="default">56</span><span class="keyword">));<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$format</span><span class="keyword">, </span><span class="default">$crc</span><span class="keyword">);<br>}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109662">  
  <a class="name">
  <strong class="user"><em>Clifford dot ct at gmail dot com</em></strong></a><div class="date" title="2012-08-07 08:54"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109662">
<div class="phpcode"><code><span class="html">
The crc32() function can return a signed integer in certain environments.&nbsp; Assuming that it will always return an unsigned integer is not portable.
<br>
<br>Depending on your desired behavior, you should probably use sprintf() on the result or the generic hash() instead.&nbsp; Also note that integer arithmetic operators do not have the precision to work correctly with the integer output.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106216">  
  <a class="name">
  <strong class="user"><em>arris at zsolttech dot com</em></strong></a><div class="date" title="2011-10-19 05:17"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106216">
<div class="phpcode"><code><span class="html">
not found anywhere crc64 based on <a rel="nofollow" target="_blank">http://bioinfadmin.cs.ucl.ac.uk/downloads/crc64/crc64.c</a> .<br><br>(use gmp module)<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/* OLDCRC */<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'POLY64REV'</span><span class="keyword">, </span><span class="string">"d800000000000000"</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'INITIALCRC'</span><span class="keyword">, </span><span class="string">"0000000000000000"</span><span class="keyword">);<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'TABLELEN'</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">);<br></span><span class="comment">/* NEWCRC */<br>// define('POLY64REV', "95AC9329AC4BC9B5");<br>// define('INITIALCRC', "FFFFFFFFFFFFFFFF");<br><br></span><span class="keyword">if(</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'gmp_init'</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; class </span><span class="default">CRC64</span><span class="keyword">{<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; private static </span><span class="default">$CRCTable </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; public static function </span><span class="default">encode</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">INITIALCRC</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$init </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$poly64rev </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">POLY64REV</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$init</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$init </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">TABLELEN</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">gmp_and</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"0x1"</span><span class="keyword">)) != </span><span class="string">"0"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// if (gmp_testbit($part, 1)){ /* PHP 5 &gt;= 5.3.0, untested */<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">), </span><span class="default">$poly64rev</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$part </span><span class="keyword">= </span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$part</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$CRCTable</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$part</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$k </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$k </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">); </span><span class="default">$k</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_gmp_val </span><span class="keyword">= </span><span class="default">gmp_init</span><span class="keyword">(</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$seq</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]), </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tableindex </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">gmp_and</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="string">"0xff"</span><span class="keyword">), </span><span class="default">$tmp_gmp_val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_div_q</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="string">"256"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">gmp_xor</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">$CRCTable</span><span class="keyword">[</span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">$tableindex</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">)]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= </span><span class="default">gmp_strval</span><span class="keyword">(</span><span class="default">$crc</span><span class="keyword">, </span><span class="default">16</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$res</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; die(</span><span class="string">"Please install php-gmp package!!!"</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75884">  
  <a class="name">
  <strong class="user"><em>slimshady451</em></strong></a><div class="date" title="2007-06-20 02:14"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75884">
<div class="phpcode"><code><span class="html">
I see a lot of function for crc32_file, but for php version &gt;= 5.1.2 don't forget you can use this :
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">crc32_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; return </span><span class="default">hash_file </span><span class="keyword">(</span><span class="string">'CRC32'</span><span class="keyword">, </span><span class="default">$filename </span><span class="keyword">, </span><span class="default">FALSE </span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Using crc32(file_get_contents($filename)) will use too many memory on big file so don't use it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75440">  
  <a class="name">
  <strong class="user"><em>mail at tristansmis dot nl</em></strong></a><div class="date" title="2007-05-30 01:36"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75440">
<div class="phpcode"><code><span class="html">
I used the abs value of this function on a 32-bit system. When porting the code to a 64-bit system Iâ€™ve found that the value is different. The following code has the same outcome on both systems.<br><span class="default">&lt;?php<br><br>&nbsp;&nbsp; $crc </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">));<br>&nbsp;&nbsp; if( </span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; </span><span class="comment">/* Old solution<br>&nbsp; &nbsp; * $crc = abs(crc32($string))<br>&nbsp; &nbsp; */<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111931">  
  <a class="name">
  <strong class="user"><em>JS at JavsSys dot Org</em></strong></a><div class="date" title="2013-04-13 04:22"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111931">
<div class="phpcode"><code><span class="html">
The khash() function by sukitsupaluk has two problems, it does not use all 62 characters from the $map set and when corrected it then produces different results on 64-bit compared to 32-bit PHP systems.<br><br>Here is my modified version :<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Small sample convert crc32 to character map<br> * Based upon <a rel="nofollow" target="_blank">http://www.php.net/manual/en/function.crc32.php#105703</a><br> * (Modified to now use all characters from $map)<br> * (Modified to be 32-bit PHP safe)<br> */<br></span><span class="keyword">function </span><span class="default">khash</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; static </span><span class="default">$map </span><span class="keyword">= </span><span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$hash </span><span class="keyword">= </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%u'</span><span class="keyword">,</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) , </span><span class="default">0x100000000</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; do<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">$map</span><span class="keyword">[</span><span class="default">bcmod</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">, </span><span class="default">62</span><span class="keyword">) ] . </span><span class="default">$str</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$hash </span><span class="keyword">= </span><span class="default">bcdiv</span><span class="keyword">(</span><span class="default">$hash</span><span class="keyword">, </span><span class="default">62</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; while (</span><span class="default">$hash </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br></span><span class="comment">//-----------------------------------------------------------------------------------<br></span><span class="default">$test </span><span class="keyword">= array(</span><span class="default">null</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">"1"</span><span class="keyword">, </span><span class="string">"2"</span><span class="keyword">, </span><span class="string">"3"</span><span class="keyword">, </span><span class="string">"ab"</span><span class="keyword">, </span><span class="string">"abc"</span><span class="keyword">, </span><span class="string">"abcd"</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">"abcde"</span><span class="keyword">, </span><span class="string">"abcdefoo"</span><span class="keyword">, </span><span class="string">"248840027"</span><span class="keyword">, </span><span class="string">"1365848013"</span><span class="keyword">, </span><span class="comment">// time()<br>&nbsp; &nbsp; </span><span class="string">"9223372035488927794"</span><span class="keyword">, </span><span class="comment">// PHP_INT_MAX-time()<br>&nbsp; &nbsp; </span><span class="string">"901131979"</span><span class="keyword">, </span><span class="comment">// mt_rand()<br>&nbsp; &nbsp; </span><span class="string">"Sat, 13 Apr 2013 10:13:33 +0000" </span><span class="comment">// gmdate('r') <br></span><span class="keyword">);<br></span><span class="default">$out </span><span class="keyword">= array();<br>foreach (</span><span class="default">$test </span><span class="keyword">as </span><span class="default">$s</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">khash</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">) . </span><span class="string">": " </span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;<br>}<br>print </span><span class="string">"&lt;h3&gt;khash() -- maps a crc32 result into a (62-character) result&lt;/h3&gt;"</span><span class="keyword">;<br>print </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br>print </span><span class="string">"\n\n\$GLOBALS['raw_crc32']:\n"</span><span class="keyword">;<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'raw_crc32'</span><span class="keyword">]);<br>print </span><span class="string">'&lt;/pre&gt;&lt;hr&gt;'</span><span class="keyword">;<br></span><span class="default">flush</span><span class="keyword">();<br></span><span class="default">$pefile </span><span class="keyword">= </span><span class="default">__FILE__</span><span class="keyword">;<br>print </span><span class="string">"&lt;h3&gt;</span><span class="default">$pefile</span><span class="string">&lt;/h3&gt;"</span><span class="keyword">;<br></span><span class="default">ob_end_flush</span><span class="keyword">();<br></span><span class="default">flush</span><span class="keyword">();<br></span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$pefile</span><span class="keyword">);<br>print </span><span class="string">"&lt;hr&gt;"</span><span class="keyword">;<br></span><span class="comment">//-----------------------------------------------------------------------------------<br>/* CURRENT output<br>array(19) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(8) "4GFfc4: "<br>&nbsp; [1]=&gt;<br>&nbsp; string(9) "76nO4L: 1"<br>&nbsp; [2]=&gt;<br>&nbsp; string(8) "4GFfc4: "<br>&nbsp; [3]=&gt;<br>&nbsp; string(9) "9aGcIp: 0"<br>&nbsp; [4]=&gt;<br>&nbsp; string(9) "9aGcIp: 0"<br>&nbsp; [5]=&gt;<br>&nbsp; string(9) "76nO4L: 1"<br>&nbsp; [6]=&gt;<br>&nbsp; string(9) "76nO4L: 1"<br>&nbsp; [7]=&gt;<br>&nbsp; string(9) "5b8iNn: 2"<br>&nbsp; [8]=&gt;<br>&nbsp; string(9) "6HmfFN: 3"<br>&nbsp; [9]=&gt;<br>&nbsp; string(10) "7ADPD7: ab"<br>&nbsp; [10]=&gt;<br>&nbsp; string(11) "5F0aUq: abc"<br>&nbsp; [11]=&gt;<br>&nbsp; string(12) "92kWw9: abcd"<br>&nbsp; [12]=&gt;<br>&nbsp; string(13) "78hcpf: abcde"<br>&nbsp; [13]=&gt;<br>&nbsp; string(16) "9eBVPB: abcdefoo"<br>&nbsp; [14]=&gt;<br>&nbsp; string(17) "5TjOuZ: 248840027"<br>&nbsp; [15]=&gt;<br>&nbsp; string(18) "5eNliI: 1365848013"<br>&nbsp; [16]=&gt;<br>&nbsp; string(27) "4Q00e5: 9223372035488927794"<br>&nbsp; [17]=&gt;<br>&nbsp; string(17) "6DUX8V: 901131979"<br>&nbsp; [18]=&gt;<br>&nbsp; string(39) "5i2aOW: Sat, 13 Apr 2013 10:13:33 +0000"<br>}<br>*/<br>//-----------------------------------------------------------------------------------<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41541">  
  <a class="name">
  <strong class="user"><em>arachnid at notdot dot net</em></strong></a><div class="date" title="2004-04-13 08:44"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41541">
<div class="phpcode"><code><span class="html">
Note that the CRC32 algorithm should NOT be used for cryptographic purposes, or in situations where a hostile/untrusted user is involved, as it is far too easy to generate a hash collision for CRC32 (two different binary strings that have the same CRC32 hash). Instead consider SHA-1 or MD5.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31832">  
  <a class="name">
  <strong class="user"><em>quix at free dot fr</em></strong></a><div class="date" title="2003-05-05 01:19"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31832">
<div class="phpcode"><code><span class="html">
I needed the crc32 of a file that was pretty large, so I didn't want to read it into memory.<br>So I made this:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">]=array();&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Lookup table array<br>&nbsp; &nbsp; </span><span class="default">__crc32_init_table</span><span class="keyword">();<br><br>&nbsp; &nbsp; function </span><span class="default">__crc32_init_table</span><span class="keyword">() {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Builds lookup table array<br>&nbsp; &nbsp; &nbsp; &nbsp; // This is the official polynomial used by<br>&nbsp; &nbsp; &nbsp; &nbsp; // CRC-32 in PKZip, WinZip and Ethernet.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$polynomial </span><span class="keyword">= </span><span class="default">0x04c11db7</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 256 values representing ASCII character codes.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">0xFF</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]=(</span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">) &lt;&lt; </span><span class="default">24</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">;++</span><span class="default">$j</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]=((</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] &lt;&lt; </span><span class="default">1</span><span class="keyword">) ^<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ((</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] &amp; (</span><span class="default">1 </span><span class="keyword">&lt;&lt; </span><span class="default">31</span><span class="keyword">))?</span><span class="default">$polynomial</span><span class="keyword">:</span><span class="default">0</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">], </span><span class="default">32</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">__crc32_reflect</span><span class="keyword">(</span><span class="default">$ref</span><span class="keyword">, </span><span class="default">$ch</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Reflects CRC bits in the lookup table<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Swap bit 0 for bit 7, bit 1 for bit 6, etc.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;(</span><span class="default">$ch</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$ref </span><span class="keyword">&amp; </span><span class="default">1</span><span class="keyword">) </span><span class="default">$value </span><span class="keyword">|= (</span><span class="default">1 </span><span class="keyword">&lt;&lt; (</span><span class="default">$ch</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ref </span><span class="keyword">= ((</span><span class="default">$ref </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) &amp; </span><span class="default">0x7fffffff</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">__crc32_string</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Creates a CRC from a text string<br>&nbsp; &nbsp; &nbsp; &nbsp; // Once the lookup table has been filled in by the two functions above,<br>&nbsp; &nbsp; &nbsp; &nbsp; // this function creates all CRCs using only the lookup table.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // You need unsigned variables because negative values<br>&nbsp; &nbsp; &nbsp; &nbsp; // introduce high bits where zero bits are required.<br>&nbsp; &nbsp; &nbsp; &nbsp; // PHP doesn't have unsigned integers:<br>&nbsp; &nbsp; &nbsp; &nbsp; // I've solved this problem by doing a '&amp;' after a '&gt;&gt;'.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // Start out with all bits set high.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">0xffffffff</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Perform the algorithm on each character in the string,<br>&nbsp; &nbsp; &nbsp; &nbsp; // using the lookup table values.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc</span><span class="keyword">=((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00ffffff</span><span class="keyword">) ^ </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">{</span><span class="default">$i</span><span class="keyword">})];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Exclusive OR the result with the beginning value.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function </span><span class="default">__crc32_file</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Creates a CRC from a file<br>&nbsp; &nbsp; &nbsp; &nbsp; // Info: look at __crc32_string<br><br>&nbsp; &nbsp; &nbsp; &nbsp; // Start out with all bits set high.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc</span><span class="keyword">=</span><span class="default">0xffffffff</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if((</span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="string">'rb'</span><span class="keyword">))===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Perform the algorithm on each character in file<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for(;;) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=@</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc</span><span class="keyword">=((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00ffffff</span><span class="keyword">) ^ </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__crc32_table'</span><span class="keyword">][(</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Exclusive OR the result with the beginning value.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112073">  
  <a class="name">
  <strong class="user"><em>D</em></strong></a><div class="date" title="2013-04-29 11:59"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112073">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>$i </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="string">'weak_hash'</span><span class="keyword">);<br>&nbsp; &nbsp; <br>if(</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">) </span><span class="comment">// if hash is negative<br></span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">*=-</span><span class="default">1</span><span class="keyword">; </span><span class="comment">// do some basic math<br></span><span class="keyword">}<br><br>echo </span><span class="default">$i</span><span class="keyword">;<br><br></span><span class="comment">/*<br>OUTPUTS 275953381<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106672">  
  <a class="name">
  <strong class="user"><em>alban dot lopez+php [ at ] gmail dot com</em></strong></a><div class="date" title="2011-11-26 06:02"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106672">
<div class="phpcode"><code><span class="html">
I made this code to verify Transmition with Vantage Pro2 ( weather station ) based on CRC16-CCITT standard.<br><br><span class="default">&lt;?php<br></span><span class="comment">// CRC16-CCITT validator<br></span><span class="default">$crc_table </span><span class="keyword">= array(<br>&nbsp; &nbsp; </span><span class="default">0x0</span><span class="keyword">,&nbsp; </span><span class="default">0x1021</span><span class="keyword">,&nbsp; </span><span class="default">0x2042</span><span class="keyword">,&nbsp; </span><span class="default">0x3063</span><span class="keyword">,&nbsp; </span><span class="default">0x4084</span><span class="keyword">,&nbsp; </span><span class="default">0x50a5</span><span class="keyword">,&nbsp; </span><span class="default">0x60c6</span><span class="keyword">,&nbsp; </span><span class="default">0x70e7</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x8108</span><span class="keyword">,&nbsp; </span><span class="default">0x9129</span><span class="keyword">,&nbsp; </span><span class="default">0xa14a</span><span class="keyword">,&nbsp; </span><span class="default">0xb16b</span><span class="keyword">,&nbsp; </span><span class="default">0xc18c</span><span class="keyword">,&nbsp; </span><span class="default">0xd1ad</span><span class="keyword">,&nbsp; </span><span class="default">0xe1ce</span><span class="keyword">,&nbsp; </span><span class="default">0xf1ef</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x1231</span><span class="keyword">,&nbsp; </span><span class="default">0x210</span><span class="keyword">,&nbsp; </span><span class="default">0x3273</span><span class="keyword">,&nbsp; </span><span class="default">0x2252</span><span class="keyword">,&nbsp; </span><span class="default">0x52b5</span><span class="keyword">,&nbsp; </span><span class="default">0x4294</span><span class="keyword">,&nbsp; </span><span class="default">0x72f7</span><span class="keyword">,&nbsp; </span><span class="default">0x62d6</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x9339</span><span class="keyword">,&nbsp; </span><span class="default">0x8318</span><span class="keyword">,&nbsp; </span><span class="default">0xb37b</span><span class="keyword">,&nbsp; </span><span class="default">0xa35a</span><span class="keyword">,&nbsp; </span><span class="default">0xd3bd</span><span class="keyword">,&nbsp; </span><span class="default">0xc39c</span><span class="keyword">,&nbsp; </span><span class="default">0xf3ff</span><span class="keyword">,&nbsp; </span><span class="default">0xe3de</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x2462</span><span class="keyword">,&nbsp; </span><span class="default">0x3443</span><span class="keyword">,&nbsp; </span><span class="default">0x420</span><span class="keyword">,&nbsp; </span><span class="default">0x1401</span><span class="keyword">,&nbsp; </span><span class="default">0x64e6</span><span class="keyword">,&nbsp; </span><span class="default">0x74c7</span><span class="keyword">,&nbsp; </span><span class="default">0x44a4</span><span class="keyword">,&nbsp; </span><span class="default">0x5485</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xa56a</span><span class="keyword">,&nbsp; </span><span class="default">0xb54b</span><span class="keyword">,&nbsp; </span><span class="default">0x8528</span><span class="keyword">,&nbsp; </span><span class="default">0x9509</span><span class="keyword">,&nbsp; </span><span class="default">0xe5ee</span><span class="keyword">,&nbsp; </span><span class="default">0xf5cf</span><span class="keyword">,&nbsp; </span><span class="default">0xc5ac</span><span class="keyword">,&nbsp; </span><span class="default">0xd58d</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x3653</span><span class="keyword">,&nbsp; </span><span class="default">0x2672</span><span class="keyword">,&nbsp; </span><span class="default">0x1611</span><span class="keyword">,&nbsp; </span><span class="default">0x630</span><span class="keyword">,&nbsp; </span><span class="default">0x76d7</span><span class="keyword">,&nbsp; </span><span class="default">0x66f6</span><span class="keyword">,&nbsp; </span><span class="default">0x5695</span><span class="keyword">,&nbsp; </span><span class="default">0x46b4</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xb75b</span><span class="keyword">,&nbsp; </span><span class="default">0xa77a</span><span class="keyword">,&nbsp; </span><span class="default">0x9719</span><span class="keyword">,&nbsp; </span><span class="default">0x8738</span><span class="keyword">,&nbsp; </span><span class="default">0xf7df</span><span class="keyword">,&nbsp; </span><span class="default">0xe7fe</span><span class="keyword">,&nbsp; </span><span class="default">0xd79d</span><span class="keyword">,&nbsp; </span><span class="default">0xc7bc</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x48c4</span><span class="keyword">,&nbsp; </span><span class="default">0x58e5</span><span class="keyword">,&nbsp; </span><span class="default">0x6886</span><span class="keyword">,&nbsp; </span><span class="default">0x78a7</span><span class="keyword">,&nbsp; </span><span class="default">0x840</span><span class="keyword">,&nbsp; </span><span class="default">0x1861</span><span class="keyword">,&nbsp; </span><span class="default">0x2802</span><span class="keyword">,&nbsp; </span><span class="default">0x3823</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xc9cc</span><span class="keyword">,&nbsp; </span><span class="default">0xd9ed</span><span class="keyword">,&nbsp; </span><span class="default">0xe98e</span><span class="keyword">,&nbsp; </span><span class="default">0xf9af</span><span class="keyword">,&nbsp; </span><span class="default">0x8948</span><span class="keyword">,&nbsp; </span><span class="default">0x9969</span><span class="keyword">,&nbsp; </span><span class="default">0xa90a</span><span class="keyword">,&nbsp; </span><span class="default">0xb92b</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x5af5</span><span class="keyword">,&nbsp; </span><span class="default">0x4ad4</span><span class="keyword">,&nbsp; </span><span class="default">0x7ab7</span><span class="keyword">,&nbsp; </span><span class="default">0x6a96</span><span class="keyword">,&nbsp; </span><span class="default">0x1a71</span><span class="keyword">,&nbsp; </span><span class="default">0xa50</span><span class="keyword">,&nbsp; </span><span class="default">0x3a33</span><span class="keyword">,&nbsp; </span><span class="default">0x2a12</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xdbfd</span><span class="keyword">,&nbsp; </span><span class="default">0xcbdc</span><span class="keyword">,&nbsp; </span><span class="default">0xfbbf</span><span class="keyword">,&nbsp; </span><span class="default">0xeb9e</span><span class="keyword">,&nbsp; </span><span class="default">0x9b79</span><span class="keyword">,&nbsp; </span><span class="default">0x8b58</span><span class="keyword">,&nbsp; </span><span class="default">0xbb3b</span><span class="keyword">,&nbsp; </span><span class="default">0xab1a</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x6ca6</span><span class="keyword">,&nbsp; </span><span class="default">0x7c87</span><span class="keyword">,&nbsp; </span><span class="default">0x4ce4</span><span class="keyword">,&nbsp; </span><span class="default">0x5cc5</span><span class="keyword">,&nbsp; </span><span class="default">0x2c22</span><span class="keyword">,&nbsp; </span><span class="default">0x3c03</span><span class="keyword">,&nbsp; </span><span class="default">0xc60</span><span class="keyword">,&nbsp; </span><span class="default">0x1c41</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xedae</span><span class="keyword">,&nbsp; </span><span class="default">0xfd8f</span><span class="keyword">,&nbsp; </span><span class="default">0xcdec</span><span class="keyword">,&nbsp; </span><span class="default">0xddcd</span><span class="keyword">,&nbsp; </span><span class="default">0xad2a</span><span class="keyword">,&nbsp; </span><span class="default">0xbd0b</span><span class="keyword">,&nbsp; </span><span class="default">0x8d68</span><span class="keyword">,&nbsp; </span><span class="default">0x9d49</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x7e97</span><span class="keyword">,&nbsp; </span><span class="default">0x6eb6</span><span class="keyword">,&nbsp; </span><span class="default">0x5ed5</span><span class="keyword">,&nbsp; </span><span class="default">0x4ef4</span><span class="keyword">,&nbsp; </span><span class="default">0x3e13</span><span class="keyword">,&nbsp; </span><span class="default">0x2e32</span><span class="keyword">,&nbsp; </span><span class="default">0x1e51</span><span class="keyword">,&nbsp; </span><span class="default">0xe70</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xff9f</span><span class="keyword">,&nbsp; </span><span class="default">0xefbe</span><span class="keyword">,&nbsp; </span><span class="default">0xdfdd</span><span class="keyword">,&nbsp; </span><span class="default">0xcffc</span><span class="keyword">,&nbsp; </span><span class="default">0xbf1b</span><span class="keyword">,&nbsp; </span><span class="default">0xaf3a</span><span class="keyword">,&nbsp; </span><span class="default">0x9f59</span><span class="keyword">,&nbsp; </span><span class="default">0x8f78</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x9188</span><span class="keyword">,&nbsp; </span><span class="default">0x81a9</span><span class="keyword">,&nbsp; </span><span class="default">0xb1ca</span><span class="keyword">,&nbsp; </span><span class="default">0xa1eb</span><span class="keyword">,&nbsp; </span><span class="default">0xd10c</span><span class="keyword">,&nbsp; </span><span class="default">0xc12d</span><span class="keyword">,&nbsp; </span><span class="default">0xf14e</span><span class="keyword">,&nbsp; </span><span class="default">0xe16f</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x1080</span><span class="keyword">,&nbsp; </span><span class="default">0xa1</span><span class="keyword">,&nbsp; </span><span class="default">0x30c2</span><span class="keyword">,&nbsp; </span><span class="default">0x20e3</span><span class="keyword">,&nbsp; </span><span class="default">0x5004</span><span class="keyword">,&nbsp; </span><span class="default">0x4025</span><span class="keyword">,&nbsp; </span><span class="default">0x7046</span><span class="keyword">,&nbsp; </span><span class="default">0x6067</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x83b9</span><span class="keyword">,&nbsp; </span><span class="default">0x9398</span><span class="keyword">,&nbsp; </span><span class="default">0xa3fb</span><span class="keyword">,&nbsp; </span><span class="default">0xb3da</span><span class="keyword">,&nbsp; </span><span class="default">0xc33d</span><span class="keyword">,&nbsp; </span><span class="default">0xd31c</span><span class="keyword">,&nbsp; </span><span class="default">0xe37f</span><span class="keyword">,&nbsp; </span><span class="default">0xf35e</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x2b1</span><span class="keyword">,&nbsp; </span><span class="default">0x1290</span><span class="keyword">,&nbsp; </span><span class="default">0x22f3</span><span class="keyword">,&nbsp; </span><span class="default">0x32d2</span><span class="keyword">,&nbsp; </span><span class="default">0x4235</span><span class="keyword">,&nbsp; </span><span class="default">0x5214</span><span class="keyword">,&nbsp; </span><span class="default">0x6277</span><span class="keyword">,&nbsp; </span><span class="default">0x7256</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xb5ea</span><span class="keyword">,&nbsp; </span><span class="default">0xa5cb</span><span class="keyword">,&nbsp; </span><span class="default">0x95a8</span><span class="keyword">,&nbsp; </span><span class="default">0x8589</span><span class="keyword">,&nbsp; </span><span class="default">0xf56e</span><span class="keyword">,&nbsp; </span><span class="default">0xe54f</span><span class="keyword">,&nbsp; </span><span class="default">0xd52c</span><span class="keyword">,&nbsp; </span><span class="default">0xc50d</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x34e2</span><span class="keyword">,&nbsp; </span><span class="default">0x24c3</span><span class="keyword">,&nbsp; </span><span class="default">0x14a0</span><span class="keyword">,&nbsp; </span><span class="default">0x481</span><span class="keyword">,&nbsp; </span><span class="default">0x7466</span><span class="keyword">,&nbsp; </span><span class="default">0x6447</span><span class="keyword">,&nbsp; </span><span class="default">0x5424</span><span class="keyword">,&nbsp; </span><span class="default">0x4405</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xa7db</span><span class="keyword">,&nbsp; </span><span class="default">0xb7fa</span><span class="keyword">,&nbsp; </span><span class="default">0x8799</span><span class="keyword">,&nbsp; </span><span class="default">0x97b8</span><span class="keyword">,&nbsp; </span><span class="default">0xe75f</span><span class="keyword">,&nbsp; </span><span class="default">0xf77e</span><span class="keyword">,&nbsp; </span><span class="default">0xc71d</span><span class="keyword">,&nbsp; </span><span class="default">0xd73c</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x26d3</span><span class="keyword">,&nbsp; </span><span class="default">0x36f2</span><span class="keyword">,&nbsp; </span><span class="default">0x691</span><span class="keyword">,&nbsp; </span><span class="default">0x16b0</span><span class="keyword">,&nbsp; </span><span class="default">0x6657</span><span class="keyword">,&nbsp; </span><span class="default">0x7676</span><span class="keyword">,&nbsp; </span><span class="default">0x4615</span><span class="keyword">,&nbsp; </span><span class="default">0x5634</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xd94c</span><span class="keyword">,&nbsp; </span><span class="default">0xc96d</span><span class="keyword">,&nbsp; </span><span class="default">0xf90e</span><span class="keyword">,&nbsp; </span><span class="default">0xe92f</span><span class="keyword">,&nbsp; </span><span class="default">0x99c8</span><span class="keyword">,&nbsp; </span><span class="default">0x89e9</span><span class="keyword">,&nbsp; </span><span class="default">0xb98a</span><span class="keyword">,&nbsp; </span><span class="default">0xa9ab</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x5844</span><span class="keyword">,&nbsp; </span><span class="default">0x4865</span><span class="keyword">,&nbsp; </span><span class="default">0x7806</span><span class="keyword">,&nbsp; </span><span class="default">0x6827</span><span class="keyword">,&nbsp; </span><span class="default">0x18c0</span><span class="keyword">,&nbsp; </span><span class="default">0x8e1</span><span class="keyword">,&nbsp; </span><span class="default">0x3882</span><span class="keyword">,&nbsp; </span><span class="default">0x28a3</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xcb7d</span><span class="keyword">,&nbsp; </span><span class="default">0xdb5c</span><span class="keyword">,&nbsp; </span><span class="default">0xeb3f</span><span class="keyword">,&nbsp; </span><span class="default">0xfb1e</span><span class="keyword">,&nbsp; </span><span class="default">0x8bf9</span><span class="keyword">,&nbsp; </span><span class="default">0x9bd8</span><span class="keyword">,&nbsp; </span><span class="default">0xabbb</span><span class="keyword">,&nbsp; </span><span class="default">0xbb9a</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x4a75</span><span class="keyword">,&nbsp; </span><span class="default">0x5a54</span><span class="keyword">,&nbsp; </span><span class="default">0x6a37</span><span class="keyword">,&nbsp; </span><span class="default">0x7a16</span><span class="keyword">,&nbsp; </span><span class="default">0xaf1</span><span class="keyword">,&nbsp; </span><span class="default">0x1ad0</span><span class="keyword">,&nbsp; </span><span class="default">0x2ab3</span><span class="keyword">,&nbsp; </span><span class="default">0x3a92</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xfd2e</span><span class="keyword">,&nbsp; </span><span class="default">0xed0f</span><span class="keyword">,&nbsp; </span><span class="default">0xdd6c</span><span class="keyword">,&nbsp; </span><span class="default">0xcd4d</span><span class="keyword">,&nbsp; </span><span class="default">0xbdaa</span><span class="keyword">,&nbsp; </span><span class="default">0xad8b</span><span class="keyword">,&nbsp; </span><span class="default">0x9de8</span><span class="keyword">,&nbsp; </span><span class="default">0x8dc9</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x7c26</span><span class="keyword">,&nbsp; </span><span class="default">0x6c07</span><span class="keyword">,&nbsp; </span><span class="default">0x5c64</span><span class="keyword">,&nbsp; </span><span class="default">0x4c45</span><span class="keyword">,&nbsp; </span><span class="default">0x3ca2</span><span class="keyword">,&nbsp; </span><span class="default">0x2c83</span><span class="keyword">,&nbsp; </span><span class="default">0x1ce0</span><span class="keyword">,&nbsp; </span><span class="default">0xcc1</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0xef1f</span><span class="keyword">,&nbsp; </span><span class="default">0xff3e</span><span class="keyword">,&nbsp; </span><span class="default">0xcf5d</span><span class="keyword">,&nbsp; </span><span class="default">0xdf7c</span><span class="keyword">,&nbsp; </span><span class="default">0xaf9b</span><span class="keyword">,&nbsp; </span><span class="default">0xbfba</span><span class="keyword">,&nbsp; </span><span class="default">0x8fd9</span><span class="keyword">,&nbsp; </span><span class="default">0x9ff8</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0x6e17</span><span class="keyword">,&nbsp; </span><span class="default">0x7e36</span><span class="keyword">,&nbsp; </span><span class="default">0x4e55</span><span class="keyword">,&nbsp; </span><span class="default">0x5e74</span><span class="keyword">,&nbsp; </span><span class="default">0x2e93</span><span class="keyword">,&nbsp; </span><span class="default">0x3eb2</span><span class="keyword">,&nbsp; </span><span class="default">0xed1</span><span class="keyword">,&nbsp; </span><span class="default">0x1ef0</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$test </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xC6</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xCE</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0xA2</span><span class="keyword">).</span><span class="default">chr</span><span class="keyword">(</span><span class="default">0x03</span><span class="keyword">); </span><span class="comment">// CRC16-CCITT = 0xE2B4<br>&nbsp; &nbsp; </span><span class="default">genCRC </span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>function </span><span class="default">genCRC </span><span class="keyword">(&amp;</span><span class="default">$ptr</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">0x0000</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$crc_table </span><span class="keyword">= </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'crc_table'</span><span class="keyword">];<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$ptr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">=&nbsp; </span><span class="default">$crc_table</span><span class="keyword">[((</span><span class="default">$crc</span><span class="keyword">&gt;&gt;</span><span class="default">8</span><span class="keyword">) ^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$ptr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))] ^ ((</span><span class="default">$crc</span><span class="keyword">&lt;&lt;</span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0x00FFFF</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$crc</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41840">  
  <a class="name">
  <strong class="user"><em>waldomonster at netjukebox dot demon dot nl</em></strong></a><div class="date" title="2004-04-23 08:48"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41840">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>$data </span><span class="keyword">= </span><span class="string">'dot'</span><span class="keyword">;<br>echo </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Returns 59278a3<br>Witch is missing a leading zero.<br><br><span class="default">&lt;?php<br>$data </span><span class="keyword">= </span><span class="string">'dot'</span><span class="keyword">;<br>echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)), </span><span class="default">8</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Returns the correct string: 059278a3</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28012">  
  <a class="name">
  <strong class="user"><em>spectrumizer at cycos dot net</em></strong></a><div class="date" title="2002-12-29 03:30"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28012">
<div class="phpcode"><code><span class="html">
Here is a tested and working CRC16-Algorithm:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">crc16</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">0xFFFF</span><span class="keyword">;
<br>&nbsp; for (</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++) {
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$crc </span><span class="keyword">^ </span><span class="default">ord</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);
<br>&nbsp; &nbsp; for (</span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; if ((</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x0001</span><span class="keyword">) == </span><span class="default">0x0001</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= ((</span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">) ^ </span><span class="default">0xA001</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; } else { </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$crc </span><span class="keyword">&gt;&gt; </span><span class="default">1</span><span class="keyword">; }
<br>&nbsp; &nbsp; }
<br>&nbsp; }
<br>&nbsp; return </span><span class="default">$crc</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Regards,
<br>Mario</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99939">  
  <a class="name">
  <strong class="user"><em>gabri dot ns at gmail dot com</em></strong></a><div class="date" title="2010-09-15 10:05"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99939">
<div class="phpcode"><code><span class="html">
if you are looking for a fast function to hash a file, take a look at<br><a rel="nofollow" target="_blank">http://www.php.net/manual/en/function.hash-file.php</a><br>this is crc32 file checker based on a CRC32 guide<br>it have performance at ~ 625 KB/s on my 2.2GHz Turion<br>far slower than hash_file('crc32b','filename.ext')<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">crc32_file </span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br>{<br>&nbsp;&nbsp; </span><span class="default">$f </span><span class="keyword">= @</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">,</span><span class="string">'rb'</span><span class="keyword">);<br>&nbsp;&nbsp; if (!</span><span class="default">$f</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; static </span><span class="default">$CRC32Table</span><span class="keyword">, </span><span class="default">$Reflect8Table</span><span class="keyword">;<br>&nbsp;&nbsp; if (!isset(</span><span class="default">$CRC32Table</span><span class="keyword">))<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$Polynomial </span><span class="keyword">= </span><span class="default">0x04c11db7</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$topBit </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">&lt;&lt; </span><span class="default">31</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">256</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) <br>&nbsp; &nbsp; &nbsp; { <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">&lt;&lt; </span><span class="default">24</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">8</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$remainder </span><span class="keyword">&amp; </span><span class="default">$topBit</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= (</span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">1</span><span class="keyword">) ^ </span><span class="default">$Polynomial</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$CRC32Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$remainder</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) continue;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">), </span><span class="default">8</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">bindec</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$num</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">$num</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">0xffffffff</span><span class="keyword">;<br>&nbsp;&nbsp; while (</span><span class="default">$data </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">1024</span><span class="keyword">))<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$byte </span><span class="keyword">= </span><span class="default">$Reflect8Table</span><span class="keyword">[</span><span class="default">ord</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])];<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= ((</span><span class="default">$remainder </span><span class="keyword">&gt;&gt; </span><span class="default">24</span><span class="keyword">) &amp; </span><span class="default">0xff</span><span class="keyword">) ^ </span><span class="default">$byte</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">$CRC32Table</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= (</span><span class="default">$remainder </span><span class="keyword">&lt;&lt; </span><span class="default">8</span><span class="keyword">) ^ </span><span class="default">$crc</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">decbin</span><span class="keyword">(</span><span class="default">$remainder</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">32</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$remainder </span><span class="keyword">= </span><span class="default">bindec</span><span class="keyword">(</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">));<br>&nbsp;&nbsp; return </span><span class="default">$remainder </span><span class="keyword">^ </span><span class="default">0xffffffff</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br>$a </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(); <br>echo </span><span class="default">dechex</span><span class="keyword">(</span><span class="default">crc32_file</span><span class="keyword">(</span><span class="string">'filename.ext'</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">; <br></span><span class="default">$b </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(); <br>echo </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">)) - </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span>Output:<br>ec7369fe<br>2.384134054184 (or similiar)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93797">  
  <a class="name">
  <strong class="user"><em>berna (at) gensis (dot) com (dot) br</em></strong></a><div class="date" title="2009-09-29 08:16"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93797">
<div class="phpcode"><code><span class="html">
For those who want a more familiar return value for the function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">strcrc32</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$crc </span><span class="keyword">= </span><span class="default">crc32</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br>&nbsp; if (</span><span class="default">$crc </span><span class="keyword">&amp; </span><span class="default">0x80000000</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">^= </span><span class="default">0xffffffff</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$crc </span><span class="keyword">= -</span><span class="default">$crc</span><span class="keyword">;
<br>&nbsp; }
<br>&nbsp; return </span><span class="default">$crc</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>And to show the result in Hex string:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">int32_to_hex</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$value </span><span class="keyword">&amp;= </span><span class="default">0xffffffff</span><span class="keyword">;
<br>&nbsp; return </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">dechex</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)), </span><span class="default">8</span><span class="keyword">, </span><span class="string">"0"</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.crc32.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:11 GMT -->


</body></html>