<html><!-- Mirrored from php.net/manual/en/imagick.writeimage.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:27:31 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Imagick::writeImage</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="imagick.writeimage.html">
 <link rel="shorturl" href="imagick.writeimage.html">
 <link rel="alternate" href="imagick.writeimage.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.imagick.html">
 <link rel="prev" href="imagick.whitethresholdimage.html">
 <link rel="next" href="imagick.writeimagefile.html">

 <link rel="alternate" href="imagick.writeimage.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/imagick.writeimage.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/imagick.writeimage.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/imagick.writeimage.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/imagick.writeimage.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/imagick.writeimage.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/imagick.writeimage.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/imagick.writeimage.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/imagick.writeimage.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/imagick.writeimage.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/imagick.writeimage.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.utilspec.image.html">Image Processing and Generation</a></li>      <li><a href="book.imagick.html">ImageMagick</a></li>      <li><a href="class.imagick.html">Imagick</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="imagick.writeimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::writeImage</h1>
  <p class="verinfo">(PECL imagick 0.9.0-0.9.9)</p><p class="refpurpose"><span class="refname">Imagick::writeImage</span> â€” <span class="dc-title">Writes an image to the specified filename</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.writeimage-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>Imagick::writeImage</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code><span class="initializer"> = NULL</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Writes an image to the specified filename. If the filename parameter is NULL,
   the image is written to the filename set by Imagick::readImage() or
   Imagick::setImageFilename().
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.writeimage-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Filename where to write the image. The extension of the filename
       defines the type of the file. 
       Format can be forced regardless of file extension using format: prefix,
       for example "jpg:test.png".
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.writeimage-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success.
  </p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="114714">  
  <a class="name">
  <strong class="user"><em>SkepticaLee</em></strong></a><div class="date" title="2014-03-27 02:30"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114714">
<div class="phpcode"><code><span class="html">
When running Imagick as packaged with the Abyss Web Server, neither this method nor writeImages () works. Instead the format has to be declared and the file saved by using another method or procedure, e.g.:<br><br><span class="default">&lt;?php<br>$im </span><span class="keyword">= new </span><span class="default">Imagick </span><span class="keyword">();<br></span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">newImage </span><span class="keyword">(</span><span class="default">300</span><span class="keyword">, </span><span class="default">225</span><span class="keyword">, </span><span class="string">"blue"</span><span class="keyword">);<br></span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">writeImage </span><span class="keyword">(</span><span class="string">"test_0.jpg"</span><span class="keyword">); </span><span class="comment">// fails with no error message<br>//instead<br></span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">setImageFormat </span><span class="keyword">(</span><span class="string">"jpeg"</span><span class="keyword">);<br></span><span class="default">file_put_contents </span><span class="keyword">(</span><span class="string">"test_1.jpg"</span><span class="keyword">, </span><span class="default">$im</span><span class="keyword">); </span><span class="comment">// works, or:<br></span><span class="default">$im</span><span class="keyword">-&gt;</span><span class="default">imageWriteFile </span><span class="keyword">(</span><span class="default">fopen </span><span class="keyword">(</span><span class="string">"test_2.jpg"</span><span class="keyword">, </span><span class="string">"wb"</span><span class="keyword">)); </span><span class="comment">//also works<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110703">  
  <a class="name">
  <strong class="user"><em>pfz at pfzone dot org</em></strong></a><div class="date" title="2012-11-24 05:47"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110703">
<div class="phpcode"><code><span class="html">
With Imagick 3.1.0RC2, PHP4.8<br>If you plan to overwrite the file you're working on, before doing writeImage, consider clearing the file buffer before the write statement : <br><br><span class="default">&lt;?php<br>$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br></span><span class="comment">/* some processing */<br><br></span><span class="default">clearstatcache</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">));<br></span><span class="comment">// or<br></span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>It happened to me that the resulting file size was wrong. This could lead to truncation, as the file is not expanded.<br>This happened while working on JPEG, and PNG. <br><br>this line worked for me without this hack. <br><span class="default">&lt;?php<br>file_put_contents</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">, </span><span class="default">$image</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Do not rely on getImageLength() for sending your image, especially when keepalive is ON. Content length is then relevant, and must be set. If the wrong size is given, your image will be truncated.<br>Use filesize($your_file_) once written or strlen($image) instead (which renders your image and updates getImageLength() result).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115359">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2014-07-11 10:25"><strong>1 month ago</strong></div>
  <div class="text" id="Hcom115359">
<div class="phpcode"><code><span class="html">
I opened image with Imagick::readImageBlob. When I wanted to save resized image Imagick::writeImage did not work, but Imagick::writeImageFile did.<br><br>$image = new Imagick();<br>$image-&gt;readImageBlob($image_data);<br>// $image-&gt;writeImage($fileDst)&nbsp; &nbsp; did not work<br>if($f=fopen($fileDst, "w")){ <br>&nbsp; $image-&gt;writeImageFile($f);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104112">  
  <a class="name">
  <strong class="user"><em>icinagle at gmail dot com</em></strong></a><div class="date" title="2011-05-23 06:47"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104112">
<div class="phpcode"><code><span class="html">
If you are trying to manipulate a uploaded file and then save the file all in the same request with Apache + mod_dav this will fail.<br>mod_dav puts a lock on the file during the request where the file is uploaded so trying to save the smallest file, e.g. 1kb will fail with a "Failed to allocate memory" error.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/imagick.writeimage.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:27:32 GMT -->


</body></html>