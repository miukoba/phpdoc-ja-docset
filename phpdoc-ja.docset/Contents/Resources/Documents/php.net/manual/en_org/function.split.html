<html><!-- Mirrored from php.net/manual/en/function.split.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:03 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>split</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.split.html">
 <link rel="shorturl" href="http://php.net/split">
 <link rel="alternate" href="http://php.net/split" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.regex.html">
 <link rel="prev" href="function.eregi.html">
 <link rel="next" href="function.spliti.html">

 <link rel="alternate" href="function.split.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.split.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.split.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.split.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.split.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.split.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.split.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.split.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.split.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.split.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.split.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.regex.html">POSIX Regex</a></li>      <li><a href="ref.regex.html">POSIX Regex Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.split" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">split</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">split</span> â€” <span class="dc-title">Split string into array by regular expression</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.split-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>split</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$limit</code><span class="initializer"> = -1</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Splits a <code class="parameter">string</code> into array by regular expression.
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This function has been
<em class="emphasis">DEPRECATED</em> as of PHP 5.3.0. Relying on this feature is
highly discouraged.</p></div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.split-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       Case sensitive regular expression.
      </p>
      <p class="para">
       If you want to split on any of the characters which are considered
       special by regular expressions, you'll need to escape them first. If
       you think <span class="function"><strong>split()</strong></span> (or any other regex function, for
       that matter) is doing something weird, please read the file
       <var class="filename">regex.7</var>, included in the 
       <var class="filename">regex/</var> subdirectory of the PHP distribution. It's
       in manpage format, so you'll want to do something along the lines of
       <strong class="command">man /usr/local/src/regex/regex.7</strong> in order to read it.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">limit</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">limit</code> is set, the returned array will
       contain a maximum of <code class="parameter">limit</code> elements with the
       last element containing the whole rest of
       <code class="parameter">string</code>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.split-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array of strings, each of which is a substring of
   <code class="parameter">string</code> formed by splitting it on boundaries formed
   by the case-sensitive regular expression <code class="parameter">pattern</code>.
  </p>
  <p class="para">
   If there are <span class="replaceable">n</span> occurrences of
   <code class="parameter">pattern</code>, the returned array will contain
   <em><span class="replaceable">n</span>+1</em> items. For example, if
   there is no occurrence of <code class="parameter">pattern</code>, an array with
   only one element will be returned. Of course, this is also true if
   <code class="parameter">string</code> is empty. If an error occurs,
   <span class="function"><strong>split()</strong></span> returns <strong><code>FALSE</code></strong>.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.split-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4929">
    <p><strong>Example #1 <span class="function"><strong>split()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     To split off the first four fields from a line from
     <var class="filename">/etc/passwd</var>:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">list(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$uid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$gid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$extra</span><span style="color: #007700">)&nbsp;=<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">":"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$passwd_line</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4930">
    <p><strong>Example #2 <span class="function"><strong>split()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     To parse a date which may be delimited with slashes, dots, or hyphens:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Delimiters&nbsp;may&nbsp;be&nbsp;slash,&nbsp;dot,&nbsp;or&nbsp;hyphen<br></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"04/30/1973"</span><span style="color: #007700">;<br>list(</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">split</span><span style="color: #007700">(</span><span style="color: #DD0000">'[/.-]'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #DD0000">"Month:&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #DD0000">;&nbsp;Day:&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #DD0000">;&nbsp;Year:&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.split-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: </p><p class="para">As of PHP 5.3.0, the
regex extension is deprecated in favor of the
<a href="book.pcre.html" class="link">PCRE extension</a>. Calling this function
will issue an <strong><code>E_DEPRECATED</code></strong> notice. See <a href="reference.pcre.pattern.posix.html" class="link">the list of
differences</a> for help on converting to PCRE.</p><p></p></blockquote>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    <span class="function"><strong>split()</strong></span> is deprecated as of PHP 5.3.0. <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> 
    is the suggested alternative to this function. If you don't require the power of regular
    expressions, it is faster to use <span class="function"><a href="function.explode.html" class="function">explode()</a></span>, which
    doesn't incur the overhead of the regular expression engine.
   </p>
  </div>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    For users looking for a way to emulate Perl's <strong class="command">@chars =
    split('', $str)</strong> behaviour, please see the examples for
    <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span> or <span class="function"><a href="function.str-split.html" class="function">str_split()</a></span>.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.split-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - Split string by a regular expression</span></li>
    <li class="member"><span class="function"><a href="function.spliti.html" class="function" rel="rdfs-seeAlso">spliti()</a> - Split string into array by regular expression case insensitive</span></li>
    <li class="member"><span class="function"><a href="function.str-split.html" class="function" rel="rdfs-seeAlso">str_split()</a> - Convert a string to an array</span></li>
    <li class="member"><span class="function"><a href="function.explode.html" class="function" rel="rdfs-seeAlso">explode()</a> - Split a string by string</span></li>
    <li class="member"><span class="function"><a href="function.implode.html" class="function" rel="rdfs-seeAlso">implode()</a> - Join array elements with a string</span></li>
    <li class="member"><span class="function"><a href="function.chunk-split.html" class="function" rel="rdfs-seeAlso">chunk_split()</a> - Split a string into smaller chunks</span></li>
    <li class="member"><span class="function"><a href="function.wordwrap.html" class="function" rel="rdfs-seeAlso">wordwrap()</a> - Wraps a string to a given number of characters</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="81490">  
  <a class="name">
  <strong class="user"><em>Dave Walter</em></strong></a><div class="date" title="2008-02-29 03:39"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81490">
<div class="phpcode"><code><span class="html">
In response to&nbsp; the getCSVValues() function posted by justin at cam dot org, my testing indicates that it has a problem with a CSV string like this:<br><br>1,2,"3,""4,5"",6",7<br><br>This parses as:<br><br>array(6) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(1) "1"<br>&nbsp; [1]=&gt;<br>&nbsp; string(1) "2"<br>&nbsp; [2]=&gt;<br>&nbsp; string(4) "3,"4"<br>&nbsp; [3]=&gt;<br>&nbsp; string(1) "5"<br>&nbsp; [4]=&gt;<br>&nbsp; string(0) ""<br>&nbsp; [5]=&gt;<br>&nbsp; string(1) "7"<br>}<br><br>instead of:<br><br>array(4) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(1) "1"<br>&nbsp; [1]=&gt;<br>&nbsp; string(1) "2"<br>&nbsp; [2]=&gt;<br>&nbsp; string(9) "3,"4,5",6"<br>&nbsp; [3]=&gt;<br>&nbsp; string(1) "7"<br>}<br><br>To fix this, I changed the second substr_count to look for an odd number of quotes, as opposed to any quotes at all:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getCSVValues</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">=</span><span class="string">","</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$elements </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nquotes </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">%</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">], </span><span class="string">'"'</span><span class="keyword">) %</span><span class="default">2 </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// Look for an odd-number of quotes<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Put the quoted string's pieces back together again<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$nquotes </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Remove first and last quotes, then merge pairs of quotes<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$qstr </span><span class="keyword">=&amp; </span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$qstr</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$qstr </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'""'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$qstr</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$elements</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61648">  
  <a class="name">
  <strong class="user"><em>RE: gcerretini at technica dot net /UTF8</em></strong></a><div class="date" title="2006-02-08 04:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61648">
<div class="phpcode"><code><span class="html">
Original problem:<br>=================<br><br>I've try using split function.<br><br><span class="default">&lt;?php<br>$ferro</span><span class="keyword">=</span><span class="string">"2&amp;#65533;12"</span><span class="keyword">;<br></span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[&amp;#65533;]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br>echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br></span><span class="default">$ferro</span><span class="keyword">=</span><span class="string">"2d12"</span><span class="keyword">;<br></span><span class="default">$valore</span><span class="keyword">=</span><span class="default">split</span><span class="keyword">(</span><span class="string">"[d]"</span><span class="keyword">,</span><span class="default">$ferro</span><span class="keyword">);<br>echo </span><span class="default">$ferro</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p1-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p2-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"p3-"</span><span class="keyword">.</span><span class="default">$valore</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>This return:<br>============<br><br>2&amp;#65533;12<br>p1-2<br>p2-<br>p3-12<br>2d12<br>p1-2<br>p2-12<br>p3-<br><br>I use charset UTF-8. When I use char &amp;#65533; the split function ad an empty string between "2" and "12"... Why?<br><br>Explanation:<br>============<br><br>UTF-8 charset codes some characters (like the "&amp;#65533;" character) into two bytes. In fact the regular expresion "[&amp;#65533;]" contains 4 bytes (4 non-unicode characters). To demonstrate the real situation I wrote following example:<br><br>$ferro="2de12";<br>$valore=split("[de]",$ferro);<br>echo $ferro."&lt;br&gt;";<br>echo "p1-".$valore[0]."&lt;br&gt;";<br>echo "p2-".$valore[1]."&lt;br&gt;";<br>echo "p3-".$valore[2]."&lt;br&gt;";<br><br>This returns:<br>=============<br><br>2d12<br>p1-2<br>p2-<br>p3-12</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58445">  
  <a class="name">
  <strong class="user"><em>franz at fholzinger dot com</em></strong></a><div class="date" title="2005-11-04 04:34"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58445">
<div class="phpcode"><code><span class="html">
The example from ramkumar rajendran did not work. <br>$line = split("/\n", $input_several_lines_long);<br>I do not know why this does not work for me.<br><br>The following has worked for me to get a maximum of 2 array parts separated by the first new line (independant if saved under UNIX or WINDOWS):<br>$line = preg_split('/[\n\r]+/',$input_several_lines_long,2);<br>Also empty lines are not considered here.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73899">  
  <a class="name">
  <strong class="user"><em>Jort</em></strong></a><div class="date" title="2007-03-14 12:53"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73899">
<div class="phpcode"><code><span class="html">
If you are looking for EITHER open square brackets OR close square brackets, then '[[]]' won't work (reasonably expected), but neither will '[\[\]]', nor with any number of escapes. HOWEVER, if your pattern is '[][]' it will work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54306">  
  <a class="name">
  <strong class="user"><em>robin at teddyb dot org</em></strong></a><div class="date" title="2005-06-29 09:01"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54306">
<div class="phpcode"><code><span class="html">
Actually, this version is better than the last I submitted.&nbsp; The goal here is to be able to engage in *multiple* delimeter removal passes; for all but the last pass, set the third value to "1", and everything should go well.<br><br>&nbsp; &nbsp; function quotesplit( $splitter=',', $s, $restore_quotes=0 )<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; //First step is to split it up into the bits that are surrounded by quotes<br>&nbsp; &nbsp; &nbsp; &nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br>&nbsp; &nbsp; &nbsp; &nbsp; //the logic further down<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; //$instring toggles so we know if we are in a quoted string or not<br>&nbsp; &nbsp; &nbsp; &nbsp; $delimlen = strlen($splitter);<br>&nbsp; &nbsp; &nbsp; &nbsp; $instring = 0;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; while (list($arg, $val) = each($getstrings))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($instring==1)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( $restore_quotes )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Add the whole string, untouched to the previous value in the array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[count($result)-1] = $result[count($result)-1].'"'.$val.'"';<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Add the whole string, untouched to the array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = $val;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Break up the string according to the delimiter character<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //above), so they need to be stripped off<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(list($iarg, $ival) = each($temparray))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = trim($ival);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $result;<br>&nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50113">  
  <a class="name">
  <strong class="user"><em>wchris</em></strong></a><div class="date" title="2005-02-18 03:53"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50113">
<div class="phpcode"><code><span class="html">
moritz's quotesplit didn't work for me. It seemed to split on a comma even though it was between a pair of quotes. However, this did work:<br><br>function quotesplit($s, $splitter=',')<br>{<br>//First step is to split it up into the bits that are surrounded by quotes and the bits that aren't. Adding the delimiter to the ends simplifies the logic further down<br><br>&nbsp; &nbsp; $getstrings = split('\"', $splitter.$s.$splitter);<br><br>//$instring toggles so we know if we are in a quoted string or not<br>&nbsp; &nbsp; $delimlen = strlen($splitter);<br>&nbsp; &nbsp; $instring = 0;<br><br>&nbsp; &nbsp; while (list($arg, $val) = each($getstrings))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ($instring==1)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>//Add the whole string, untouched to the result array.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = $val;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>//Break up the string according to the delimiter character<br>//Each string has extraneous delimiters around it (inc the ones we added above), so they need to be stripped off<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen ) );<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(list($iarg, $ival) = each($temparray))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = trim($ival);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return $result;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41133">  
  <a class="name">
  <strong class="user"><em>alphibia at alphibia dot com</em></strong></a><div class="date" title="2004-03-31 06:19"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41133">
<div class="phpcode"><code><span class="html">
I'd like to correct myself, I found that after testing my last solution it will create 5 lines no matter what... So I added this to make sure that it only displays 5 if there are five newlines. :-)<br><br><span class="default">&lt;?php <br>&nbsp; &nbsp; $MaxNewLines </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">; <br><br>&nbsp; &nbsp; </span><span class="default">$BRCount </span><span class="keyword">= </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$Message</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);&nbsp; <br>&nbsp; &nbsp; if (</span><span class="default">$BRCount</span><span class="keyword">&lt;</span><span class="default">$MaxNewLines</span><span class="keyword">) <br>&nbsp; &nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">$BRCount</span><span class="keyword">; <br>&nbsp; &nbsp; else if(</span><span class="default">$BRCount </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) <br>&nbsp; &nbsp; </span><span class="default">$MaxNewLines</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; <br><br>&nbsp; &nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">), </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">); <br>&nbsp; &nbsp; </span><span class="default">$MessageArray </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">, </span><span class="default">$Message</span><span class="keyword">, </span><span class="default">$MaxNewLines</span><span class="keyword">); <br>&nbsp; &nbsp; </span><span class="default">$Message </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">; </span><span class="default">$u</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; <br>&nbsp; &nbsp; do&nbsp; &nbsp; { <br>&nbsp; &nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">; <br>&nbsp; &nbsp; </span><span class="default">$u</span><span class="keyword">++; <br>&nbsp; &nbsp; } while(</span><span class="default">$u</span><span class="keyword">&lt;(</span><span class="default">$MaxNewLines</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)); <br>&nbsp; &nbsp; </span><span class="default">$Message</span><span class="keyword">.=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$MessageArray</span><span class="keyword">[</span><span class="default">$u</span><span class="keyword">]); <br>&nbsp; &nbsp; </span><span class="default">?&gt;</span> <br><br>-Tim<br><a rel="nofollow" target="_blank">http://www.alphibia.com</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="28369">  
  <a class="name">
  <strong class="user"><em>jeffrey at jhu dot edu</em></strong></a><div class="date" title="2003-01-10 01:51"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28369">
<div class="phpcode"><code><span class="html">
In answer to gwyne at gmx dot net, dec 1, 2002:<br><br>For split(), when using a backslash as the delimiter, you have to *double escape* the backslash.<br><br>example:<br>==================================<br>&lt;pre&gt;<br>&lt;?<br>$line = 'stuff\\\thing\doodad\\';<br>$linearray = split('\\\\', $line); //&lt;--NOTE USE OF FOUR(4)backslashes<br>print join(":", $linearray);<br>?&gt;<br>&lt;/pre&gt;<br><br>==================================<br>output is:<br><br>&lt;pre&gt;<br>stuff::thing:doodad:<br>&lt;/pre&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22415">  
  <a class="name">
  <strong class="user"><em>fotw at gmx dot net</em></strong></a><div class="date" title="2002-06-17 12:50"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22415">
<div class="phpcode"><code><span class="html">
Ups! It seems that neither explode nor split REALY takes a STRING but only a single character as a string for splitting the string.<br> I found this problem in one of my codes when trying to split a string using ";\n" as breaking string. The result, only ";" was thaken... the rest of the string was ignored.<br> Same when I tried to substitute "\n" by any other thing. :(</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22396">  
  <a class="name">
  <strong class="user"><em>not at anythingspecial dot com</em></strong></a><div class="date" title="2002-06-16 06:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22396">
<div class="phpcode"><code><span class="html">
If you need to do a split on a period make sure you escape the period out..<br><br>$ext_arr = split("\.","something.jpg");<br>... because<br>$ext_arr = split(".","something.jpg"); won't work properly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21942">  
  <a class="name">
  <strong class="user"><em>jchart at sdccu dot net</em></strong></a><div class="date" title="2002-05-31 12:56"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21942">
<div class="phpcode"><code><span class="html">
[Ed. note: Close. The pipe *is* an operator in PHP, but
<br>the reason this fails is because it's also an operator
<br>in the regex syntax. The distinction here is important
<br>since a PHP operator inside a string is just a character.]
<br>
<br>The reason your code:
<br>
<br>$line = "12|3|Fred"; 
<br>list ($msgid, $msgref, $msgtopic)=split('|', $line); 
<br>
<br>didn't work is because the "|" symbol is an operator in PHP. If you want to use the pipe symbol as a delimiter you must excape it with a back slash, "\|". You code should look like this:
<br>
<br>$line = "12|3|Fred"; 
<br>list ($msgid, $msgref, $msgtopic)=split('\|', $line);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49130">  
  <a class="name">
  <strong class="user"><em>ramkumar rajendran</em></strong></a><div class="date" title="2005-01-17 10:09"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49130">
<div class="phpcode"><code><span class="html">
A correction to a earlier note<br>If you want to use split to check on line feeds (\n), the following won't work:<br><br>$line = split("\n", $input_several_lines_long);<br><br>You really have to do this instead, notice the second slash:<br>$line = split("/\n", $input_several_lines_long);<br><br>Took me a little while to figure to do</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37635">  
  <a class="name">
  <strong class="user"><em>nomail at please dot now</em></strong></a><div class="date" title="2003-11-21 09:33"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37635">
<div class="phpcode"><code><span class="html">
If you want to use split to check on line feeds (\n), the following won't work:<br><br>$line = split("\n", $input_several_lines_long);<br><br>You really have to do this instead, notice the second slash:<br>$line = split("\\n", $input_several_lines_long);<br><br>Took me a little while to figure out.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36398">  
  <a class="name">
  <strong class="user"><em>dalu at uni dot de</em></strong></a><div class="date" title="2003-10-08 12:26"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36398">
<div class="phpcode"><code><span class="html">
php4.3.0<br><br>strange things happen with split<br><br>this didn't work<br>$vontag $vonmonat were empty strings<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br>&nbsp; &nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br>&nbsp; &nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'.' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; bad<br>&nbsp; &nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br>&nbsp; &nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>however this one worked perfectly<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">ckdate</span><span class="keyword">(</span><span class="default">$fromdate</span><span class="keyword">=</span><span class="string">"01.01"</span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">=</span><span class="string">"31.12"</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$nowyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">);<br>&nbsp; &nbsp; list (</span><span class="default">$vontag </span><span class="keyword">, </span><span class="default">$vonmonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$fromdate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br>&nbsp; &nbsp; </span><span class="default">$vondatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$vonmonat</span><span class="string">-</span><span class="default">$vontag</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; list (</span><span class="default">$bistag </span><span class="keyword">, </span><span class="default">$bismonat</span><span class="keyword">) = </span><span class="default">split </span><span class="keyword">(</span><span class="string">'[.]' </span><span class="keyword">, </span><span class="default">$todate</span><span class="keyword">); </span><span class="comment">// &lt;&lt; good<br>&nbsp; &nbsp; </span><span class="default">$bisdatum </span><span class="keyword">= </span><span class="string">"</span><span class="default">$nowyear</span><span class="string">-</span><span class="default">$bismonat</span><span class="string">-</span><span class="default">$bistag</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$von </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$vondatum</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$bis </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$bisdatum</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$now </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br>&nbsp; &nbsp; if ((</span><span class="default">$now </span><span class="keyword">&lt;= </span><span class="default">$bis</span><span class="keyword">) and (</span><span class="default">$now </span><span class="keyword">&gt;= </span><span class="default">$von</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>btw this fn checks if $now if between $fromdate and $todate<br>use it if you like</span>
</code></div>
  </div>
 </div>
  <div class="note" id="23546">  
  <a class="name">
  <strong class="user"><em>paha at paha dot hu</em></strong></a><div class="date" title="2002-07-21 06:51"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom23546">
<div class="phpcode"><code><span class="html">
It's evident but not mentioned in the documentation that using asterisks is more restricted than in a normal regular expression.<br><br>for exaple you cannot say:<br><br>split(";*",$string);<br><br>because what if there's no ";" separator?(which is covered by this regular expression) <br><br>so you have to use at least<br><br>split(";+",$quotatxt);<br><br>in this situation.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22267">  
  <a class="name">
  <strong class="user"><em>kang at elpmis dot com</em></strong></a><div class="date" title="2002-06-12 11:30"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22267">
<div class="phpcode"><code><span class="html">
This is a good way to display a comma delimited file with two columns.&nbsp; The first column is the URL's description, the second is the actual URL.<br><br>&lt;ul&gt;<br><span class="default">&lt;?php<br>&nbsp; $fname</span><span class="keyword">=</span><span class="string">"relatedlinks.csv"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$fp</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fname</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">) or die(</span><span class="string">"Error found."</span><span class="keyword">);<br>&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br>&nbsp; while(!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br>&nbsp; {<br>&nbsp; &nbsp; list(</span><span class="default">$desc</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">,</span><span class="default">$dummy</span><span class="keyword">) = </span><span class="default">split</span><span class="keyword">( </span><span class="string">","</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br>&nbsp; &nbsp; print </span><span class="string">"&lt;li&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; print </span><span class="string">"&lt;a href='</span><span class="default">$url</span><span class="string">'&gt;</span><span class="default">$desc</span><span class="string">&lt;/a&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; print </span><span class="string">"&lt;/li&gt;\n"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">1024 </span><span class="keyword">);<br>&nbsp; }<br>&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>&lt;/ul&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21557">  
  <a class="name">
  <strong class="user"><em>mcgarry at tig dot com dot au</em></strong></a><div class="date" title="2002-05-17 03:27"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21557">
<div class="phpcode"><code><span class="html">
split() doesn't like NUL characters within the string, it treats the first one it meets as the end of the string, so if you have data you want to split that can contain a NUL character you'll need to convert it into something else first, eg:<br><br>$line=str_replace(chr(0),'',$line);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82413">  
  <a class="name">
  <strong class="user"><em>Chris Tyler</em></strong></a><div class="date" title="2008-04-09 03:25"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82413">
<div class="phpcode"><code><span class="html">
Thank you Dave for your code below.&nbsp; Here is one change I made to avoid a redundant quote at the end of some lines (at least when I used excel:&nbsp; <br><br>Added another --length;&nbsp; into the if statement below:<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Is the last thing a quote?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($trim_quote){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Well then get rid of it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --$length;<br>&nbsp; &nbsp; &nbsp; &nbsp; // ADD TO FIX extra quote<br>&nbsp; &nbsp; --$length;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82050">  
  <a class="name">
  <strong class="user"><em>lewis [ at t] hcoms [d dot t] co [d dot t] uk</em></strong></a><div class="date" title="2008-03-25 03:32"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82050">
<div class="phpcode"><code><span class="html">
Those of you trying to use split for CSV, it won't always work as expected. Instead, try using a simple stack method:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Create a 2D array from a CSV string<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param mixed $data 2D array<br>&nbsp; &nbsp;&nbsp; * @param string $delimiter Field delimiter<br>&nbsp; &nbsp;&nbsp; * @param string $enclosure Field enclosure<br>&nbsp; &nbsp;&nbsp; * @param string $newline Line seperator<br>&nbsp; &nbsp;&nbsp; * @return<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">parse</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">','</span><span class="keyword">, </span><span class="default">$enclosure </span><span class="keyword">= </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$newline </span><span class="keyword">= </span><span class="string">"\n"</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">$last_pos </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Create a continuous loop<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;; ++</span><span class="default">$i</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++</span><span class="default">$pos</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Get the positions<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comma_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$quote_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newline_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$newline</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Which one comes first?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">((</span><span class="default">$comma_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$comma_pos</span><span class="keyword">, (</span><span class="default">$quote_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$quote_pos</span><span class="keyword">, (</span><span class="default">$newline_pos </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">$end </span><span class="keyword">: </span><span class="default">$newline_pos</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Cache it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$char </span><span class="keyword">= (isset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">])) ? </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$pos</span><span class="keyword">] : </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$done </span><span class="keyword">= (</span><span class="default">$pos </span><span class="keyword">== </span><span class="default">$end</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// It it a special character?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$done </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$delimiter </span><span class="keyword">|| </span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Ignore it as we're still in a quote<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">&amp;&amp; !</span><span class="default">$done</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$length </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">- ++</span><span class="default">$last_pos</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Is the last thing a quote?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$trim_quote</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Well then get rid of it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">--</span><span class="default">$length</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Get all the contents of this column<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">][] = (</span><span class="default">$length </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) ? </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$enclosure </span><span class="keyword">. </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">$enclosure</span><span class="keyword">, </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$last_pos</span><span class="keyword">, </span><span class="default">$length</span><span class="keyword">)) : </span><span class="string">''</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// And we're done<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$done</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Save the last position<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_pos </span><span class="keyword">= </span><span class="default">$pos</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Next row?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$newline</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++</span><span class="default">$row</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Our quote?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else if (</span><span class="default">$char </span><span class="keyword">== </span><span class="default">$enclosure</span><span class="keyword">){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Toggle it<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$quote_open </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// It's an opening quote<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Trim this opening quote?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$last_pos </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">== </span><span class="default">$pos</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++</span><span class="default">$last_pos</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// It's a closing quote<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$quote_open </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Trim the last quote?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trim_quote </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>This *should* work for any valid CSV string, regardless of what it contains inside its quotes (using RFC 4180). It should also be faster than most of the others I've seen. It's very simple in concept, and thoroughly commented.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84419">  
  <a class="name">
  <strong class="user"><em>pascalaschwandenNOSPAM at gmail dot com</em></strong></a><div class="date" title="2008-07-13 12:12"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84419">
<div class="phpcode"><code><span class="html">
The following code will mimick the explode functionality: explode( " ", $s );&nbsp; The difference, of course, is that the split method takes a regular expression instead of a string.<br><br>$s = "Split this sentence by spaces";<br>$words = split("[ ]+", $s);<br>print_r($words);<br><br>Output:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Split<br>&nbsp; &nbsp; [1] =&gt; this<br>&nbsp; &nbsp; [2] =&gt; sentence<br>&nbsp; &nbsp; [3] =&gt; by<br>&nbsp; &nbsp; [4] =&gt; spaces<br>)<br><a rel="nofollow" target="_blank">http://www.codesplunk.com/nr/questions/php12.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="54304">  
  <a class="name">
  <strong class="user"><em>robin at teddyb dot org</em></strong></a><div class="date" title="2005-06-29 08:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54304">
<div class="phpcode"><code><span class="html">
wchris's quotesplit assumes that anything that is quoted must also be a complete delimiter-seperated entry by itself.&nbsp; This version does not.&nbsp; It also uses split's argument order.<br><br>&nbsp; &nbsp; function quotesplit( $splitter=',', $s )<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; //First step is to split it up into the bits that are surrounded by quotes<br>&nbsp; &nbsp; &nbsp; &nbsp; //and the bits that aren't. Adding the delimiter to the ends simplifies<br>&nbsp; &nbsp; &nbsp; &nbsp; //the logic further down<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $getstrings = explode('"', $splitter.$s.$splitter);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; //$instring toggles so we know if we are in a quoted string or not<br>&nbsp; &nbsp; &nbsp; &nbsp; $delimlen = strlen($splitter);<br>&nbsp; &nbsp; &nbsp; &nbsp; $instring = 0;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; while (list($arg, $val) = each($getstrings))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($instring==1)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Add the whole string, untouched to the previous value in the array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[count($result)-1] = $result[count($result)-1].$val;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Break up the string according to the delimiter character<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //Each string has extraneous delimiters around it (inc the ones we added<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //above), so they need to be stripped off<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $temparray = split($splitter, substr($val, $delimlen, strlen($val)-$delimlen-$delimlen+1 ) );<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(list($iarg, $ival) = each($temparray))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $result[] = trim($ival);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $instring = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return $result;<br>&nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47127">  
  <a class="name">
  <strong class="user"><em>claes at dot2me.com</em></strong></a><div class="date" title="2004-11-03 04:10"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom47127">
<div class="phpcode"><code><span class="html">
Though this is obvious, the manual is a bit incorrect when claiming that the return will always be 1+number of time the split pattern occures.&nbsp; If the split pattern is the first part of the string, the return will still be 1.&nbsp; E.g.<br><br>$a = split("zz," "zzxsj.com");<br>count($a);<br><br>=&gt; 1.<br><br>The return of this can not in anyway be seperated from the return where the split pattern is not found.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36853">  
  <a class="name">
  <strong class="user"><em>krahn at niehs dot nih dot gov</em></strong></a><div class="date" title="2003-10-24 12:14"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36853">
<div class="phpcode"><code><span class="html">
&gt; strange things happen with split<br>&gt; this didn't work<br>&gt; $vontag $vonmonat were empty strings<br>...<br>&gt; list ($vontag , $vonmonat) = split ('.' , $fromdate); // &lt;&lt; bad<br><br>Split is acting exactly as it should; it splits on regular expressions.<br>A period is a regular expression pattern for a single character.<br>So, an actual period must be escaped with a backslash:&nbsp; '\.'<br>A period within brackets is not an any-character pattern, because it does<br>not make sense in that context.<br><br>Beware that regular expressions can be confusing becuase there<br>are a few different varieties of patterns.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87428">  
  <a class="name">
  <strong class="user"><em>Greg Levine</em></strong></a><div class="date" title="2008-12-04 01:45"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87428">
<div class="phpcode"><code><span class="html">
I kept running into the same issue Chris Tyler experienced with lewis [ at t] hcoms [d dot t] co [d dot t] uk's function before realizing that Chris had come up with a solution. However, that solution was just a little off it seems, unless your CSV only contains one line.<br><br>If you simply add another --length; in the place you suggested, then the function will always trim the last two characters on the line. Since the newline character is the last character on the line and the redundant quote (or other enclosure) is the second to last character, this works for the final segment. But when parsing segments that do not include a newline character, you end up trimming the redundant enclosure and the last character before the enclosure.<br><br>For example,<br><br>"he","she","him","her"\r\n<br><br>becomes<br><br>[0] =&gt; h<br>[1] =&gt; sh<br>[2] =&gt; hi<br>[3] =&gt; her<br><br>Since the segment could end with the enclosure (i.e., ") or the enclosure followed by the newline (i.e., "\r\n), you have make sure you are only adding another --length; when the latter is the case. Replacing the code block that you suggested with the following will do the trick.<br><br># Is the last thing a newline?<br>if( $char == $newline )<br>{<br>&nbsp; &nbsp; # Well then get rid of it<br>&nbsp; &nbsp; --$length;<br>}<br><br># Is the last thing a quote?<br>if( $trim_quote )<br>{<br>&nbsp; &nbsp; # Well then get rid of it<br>&nbsp; &nbsp; --$length;<br>}<br><br>I've tested this only for the purposes of the script I'm working on at this time. So, there could be other bugs I haven't come across, but this seems like the easiest way to eliminate the redundant enclosure.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75236">  
  <a class="name">
  <strong class="user"><em>Mike</em></strong></a><div class="date" title="2007-05-18 10:40"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75236">
<div class="phpcode"><code><span class="html">
// Split a string into words on boundaries of one or more spaces, tabs or new-lines<br>$s = "Please cut&nbsp;&nbsp; \t me \n in pieces";<br>$words = split("[\n\r\t ]+", $s);<br>print_r($words);<br><br>// Output:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Please<br>&nbsp; &nbsp; [1] =&gt; cut<br>&nbsp; &nbsp; [2] =&gt; me<br>&nbsp; &nbsp; [3] =&gt; in<br>&nbsp; &nbsp; [4] =&gt; pieces<br>)</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.split.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:03 GMT -->


</body></html>