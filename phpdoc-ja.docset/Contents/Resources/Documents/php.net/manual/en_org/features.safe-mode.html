<html><!-- Mirrored from php.net/manual/en/features.safe-mode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:21:06 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Safe Mode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="features.safe-mode.html">
 <link rel="shorturl" href="http://php.net/safe-mode">
 <link rel="alternate" href="http://php.net/safe-mode" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="features.html">
 <link rel="prev" href="features.persistent-connections.html">
 <link rel="next" href="ini.sect.safe-mode.html">

 <link rel="alternate" href="features.safe-mode.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/features.safe-mode.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/features.safe-mode.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/features.safe-mode.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/features.safe-mode.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/features.safe-mode.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/features.safe-mode.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/features.safe-mode.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/features.safe-mode.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/features.safe-mode.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/features.safe-mode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="features.html">Features</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="features.safe-mode" class="chapter">
  <h1>Safe Mode</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="ini.sect.safe-mode.html">Security and Safe Mode</a></li><li><a href="features.safe-mode.functions.html">Functions restricted/disabled by safe mode</a></li></ul>


  <p class="para">
   The PHP safe mode is an attempt to solve the shared-server security
   problem. It is architecturally incorrect to try to solve this
   problem at the PHP level, but since the alternatives at the web
   server and OS levels aren't very realistic, many people,
   especially ISP's, use safe mode for now. 
  </p>
  
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This feature has been
<em class="emphasis">DEPRECATED</em> as of PHP 5.3.0 and <em class="emphasis">REMOVED</em>
as of PHP 5.4.0.</p></div>

  <p class="para">
   </p><table class="doctable table">
    <caption><strong>Changelog for <em>safe mode</em></strong></caption>
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.0</td>
       <td>
        Removed from PHP, and generates a fatal <strong><code>E_CORE_ERROR</code></strong>
        level error when enabled.
       </td>
      </tr>

      <tr>
       <td>5.3.0</td>
       <td>
        Deprecated, and <strong><code>E_DEPRECATED</code></strong> errors were added.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>

  

  

 </div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="30151">  
  <a class="name">
  <strong class="user"><em>info at phpcoding dot net</em></strong></a><div class="date" title="2003-03-08 06:44"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30151">
<div class="phpcode"><code><span class="html">
readfile() seems not always to take care of the safe_mode setting.<br>When the file you want to read with readfile() resides in the same directory as the script itself, it doesn`t matter who the owner of the file is, readfile() will work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54858">  
  <a class="name">
  <strong class="user"><em>jo at durchholz dot org</em></strong></a><div class="date" title="2005-07-18 01:18"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54858">
<div class="phpcode"><code><span class="html">
Note that safe mode is largely useless. Most ISPs that offer Perl also offer other scripting languages (mostly Perl), and these other languages don't have the equivalent of PHP.<br>In other words, if PHP's safe mode won't allow vandals into your web presence, they will simply use Perl.<br>Also, safe mode prevents scripts from creating and using directories (because they will be owned by the WWW server, not by the user who uploaded the PHP script). So it's not only useless, it's also a hindrance.<br>The only realistic option is to bugger the Apache folks until they run all scripts as the user who's responsible for a given virtualhost or directory.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45917">  
  <a class="name">
  <strong class="user"><em>bertrand dot gorge at epistema dot com</em></strong></a><div class="date" title="2004-09-23 05:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45917">
<div class="phpcode"><code><span class="html">
Beware that when in safe mode, mkdir creates folders with apache's UID, though the files you create in them are of your script's UID (usually the same as your FTP uid).<br><br>What this means is that if you create a folder, you won't be able to remove it, nor to remove any of the files you've created in it (because those operations require the UID to be the same).<br><br>Ideally mkdir should create the folder with the script's UID, but this has already been discussed and will not be fixed in the near future. <br><br>In the meantime, I would advice NOT to user mkdir in safe mode, as you may end up with folders you can't remove/use.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58344">  
  <a class="name">
  <strong class="user"><em>martin at example dot com</em></strong></a><div class="date" title="2005-11-01 04:07"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58344">
<div class="phpcode"><code><span class="html">
On the note of php security <br><br>have a look at: <a rel="nofollow" target="_blank">http://www.suphp.org/Home.html</a><br><br> suPHP is a tool for executing PHP scripts with the permissions of their owners. It consists of an Apache module (mod_suphp) and a setuid root binary (suphp) that is called by the Apache module to change the uid of the process executing the PHP interpreter.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21085">  
  <a class="name">
  <strong class="user"><em>zebz at ihaveenoughspam_hotmail dot com</em></strong></a><div class="date" title="2002-04-28 08:42"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21085">
<div class="phpcode"><code><span class="html">
All the filesystem-related functions (unlink, fopen, unlink, etc) seems to be restricted the same way in safe mode, at least on PHP 4.2. If the file UID is different *but* the directory (where the file is located) UID is the same, it will work.<br><br>So creating a directory in safe mode is usually a bad idea since the UID will be different from the script (it will be the apache UID) so it won't be possible to do anything with the files created on this directory.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18484">  
  <a class="name">
  <strong class="user"><em>devik at cdi dot cz</em></strong></a><div class="date" title="2002-01-24 04:45"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18484">
<div class="phpcode"><code><span class="html">
Just to note, I created patch which allows VirtualHost to set User under which all (PHP too) runs. It is more secure than safe_mode. See luxik.cdi.cz/~devik/apache/ if you are interested</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28867">  
  <a class="name">
  <strong class="user"><em>gtg782a at mail dot gatech dot edu</em></strong></a><div class="date" title="2003-01-26 09:14"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28867">
<div class="phpcode"><code><span class="html">
zebz: The user would not be able to create a directory outside the namespace where he/she would be able to modify its contents. One can't create a directory that becomes apache-owned unless one owns the parent directory.<br><br>Another security risk: since files created by apache are owned by apache, a user could call the fputs function and output PHP code to a newly-created file with a .php extension, thus creating an apache-owned PHP script on the server. Executing that apache-owned script would allow the script to work with files in the apache user's namespace, such as logs. A solution would be to force PHP-created files to be owned by the same owner/group as the script that created them. Using open_basedir would be a likely workaround to prevent ascension into uncontrolled areas.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45263">  
  <a class="name">
  <strong class="user"><em>Russ</em></strong></a><div class="date" title="2004-08-31 08:52"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45263">
<div class="phpcode"><code><span class="html">
Sometimes you're stuck on a system you don't run and you can't control the setting of safe mode.&nbsp; If your script needs to run on different hosts (some with safe mode, some without it), you can code around it with something like:<br><br><span class="default">&lt;?php <br></span><span class="comment">// Check for safe mode<br></span><span class="keyword">if( </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'safe_mode'</span><span class="keyword">) ){<br>&nbsp; &nbsp; </span><span class="comment">// Do it the safe mode way<br></span><span class="keyword">}else{<br>&nbsp; &nbsp; </span><span class="comment">// Do it the regular way<br></span><span class="keyword">}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15399">  
  <a class="name">
  <strong class="user"><em>jedi at tstonramp dot com</em></strong></a><div class="date" title="2001-09-07 07:17"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15399">
<div class="phpcode"><code><span class="html">
Many filesystem-related functions are not appropriately restricted when Safe Mode is activated on an NT server it seems.&nbsp; I would assume that this is due to the filesystem not making use of UID.
<br>
<br>In all of my scripts, no matter WHO owns the script (file Ownership-wise) or WHO owns the directory/file in question; both UIDs display
<br>
<br>(getmyuid() and fileowner()) as UID = 0
<br>
<br>This has the rather nasty side effect of Safe Mode allowing multiple filesystem operations because it believes the script owner and file/dir owner are one and the same.
<br>
<br>While this can be worked around by the judicious application of proper filesystem privileges, it's still a "dud" that many of Safe Mode's securities are simply not there with an NT implementation.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52495">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-05-03 09:37"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52495">
<div class="phpcode"><code><span class="html">
To separate distinct open_basedir use : instead of on , or ; on unix machines.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69670">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-09-14 10:18"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69670">
<div class="phpcode"><code><span class="html">
Each IIS server in Windows runs as a User so it does have a UID file ACLs can be applied via a Group (GID) or User.&nbsp; The trick is to configure each website to run as a distinct user instead of the default of System.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52387">  
  <a class="name">
  <strong class="user"><em>plyrvt at mail dot ru</em></strong></a><div class="date" title="2005-04-29 03:14"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52387">
<div class="phpcode"><code><span class="html">
[In reply to jedi at tstonramp dot com]<br>Safe mode is used "since the alternatives at the web server and OS levels aren't very realistic". Manual says about UNIX OS level and UNIX web-servers by design (Apache). It's not realistic for unix-like server, but for NT (IIS) each virtual host can run from different user account, so there is no need in Safe Mode restrictions at all, if proper NTFS rights are set.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40870">  
  <a class="name">
  <strong class="user"><em>daniel dot gaddis at tlc dot state dot tx dot us</em></strong></a><div class="date" title="2004-03-17 11:03"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40870">
<div class="phpcode"><code><span class="html">
on windows if multiple directories are wanted for safe_mode_exec_dir and open_basedir be sure to separate the paths with a semi colon and double quote the whole path string. For example:<br><br>safe_mode = On<br>safe_mode_exec_dir = "F:\WWW\HTML;F:\batfiles\batch"<br>open_basedir = "F:\WWW\HTML;F:\batfiles\batch"</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/features.safe-mode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:21:06 GMT -->


</body></html>