<html><!-- Mirrored from php.net/manual/en/function.microtime.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:18:49 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>microtime</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.microtime.html">
 <link rel="shorturl" href="http://php.net/microtime">
 <link rel="alternate" href="http://php.net/microtime" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.datetime.html">
 <link rel="prev" href="function.localtime.html">
 <link rel="next" href="function.mktime.html">

 <link rel="alternate" href="function.microtime.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.microtime.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.microtime.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.microtime.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.microtime.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.microtime.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.microtime.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.microtime.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.microtime.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.microtime.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.microtime.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.calendar.html">Date and Time Related Extensions</a></li>      <li><a href="book.datetime.html">Date/Time</a></li>      <li><a href="ref.datetime.html">Date/Time Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.microtime" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">microtime</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">microtime</span> â€” <span class="dc-title">Return current Unix timestamp with microseconds</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.microtime-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>microtime</strong></span>
    ([ <span class="methodparam"><span class="type">bool</span> <code class="parameter">$get_as_float</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>microtime()</strong></span> returns the current Unix timestamp with
   microseconds. This function is only available on operating systems that
   support the gettimeofday() system call.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.microtime-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">get_as_float</code></dt>

     <dd>

      <p class="para">
       If used and set to <strong><code>TRUE</code></strong>, <span class="function"><strong>microtime()</strong></span> will return a
       <span class="type"><a href="language.types.float.html" class="type float">float</a></span> instead of a <span class="type"><a href="language.types.string.html" class="type string">string</a></span>, as described in
       the return values section below.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.microtime-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   By default, <span class="function"><strong>microtime()</strong></span> returns a <span class="type"><a href="language.types.string.html" class="type string">string</a></span> in
   the form "msec sec", where <em>sec</em> is the number of seconds 
   since the Unix epoch (0:00:00 January 1,1970 GMT), and <em>msec</em> 
   measures microseconds that have elapsed since <em>sec</em> 
   and is also expressed in seconds.
  </p>
  <p class="para">
   If <code class="parameter">get_as_float</code> is set to <strong><code>TRUE</code></strong>, then
   <span class="function"><strong>microtime()</strong></span> returns a <span class="type"><a href="language.types.float.html" class="type float">float</a></span>, which
   represents the current time in seconds since the Unix epoch accurate to the
   nearest microsecond.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.microtime-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2405">
    <p><strong>Example #1 Timing script execution with <span class="function"><strong>microtime()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/**<br>&nbsp;*&nbsp;Simple&nbsp;function&nbsp;to&nbsp;replicate&nbsp;PHP&nbsp;5&nbsp;behaviour<br>&nbsp;*/<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">microtime_float</span><span style="color: #007700">()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;list(</span><span style="color: #0000BB">$usec</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$sec</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">"&nbsp;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">());<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;((float)</span><span style="color: #0000BB">$usec&nbsp;</span><span style="color: #007700">+&nbsp;(float)</span><span style="color: #0000BB">$sec</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$time_start&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime_float</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Sleep&nbsp;for&nbsp;a&nbsp;while<br></span><span style="color: #0000BB">usleep</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$time_end&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime_float</span><span style="color: #007700">();<br></span><span style="color: #0000BB">$time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$time_end&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$time_start</span><span style="color: #007700">;<br><br>echo&nbsp;</span><span style="color: #DD0000">"Did&nbsp;nothing&nbsp;in&nbsp;</span><span style="color: #0000BB">$time</span><span style="color: #DD0000">&nbsp;seconds\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-2406">
    <p><strong>Example #2 Timing script execution in PHP 5</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$time_start&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Sleep&nbsp;for&nbsp;a&nbsp;while<br></span><span style="color: #0000BB">usleep</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$time_end&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$time_end&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$time_start</span><span style="color: #007700">;<br><br>echo&nbsp;</span><span style="color: #DD0000">"Did&nbsp;nothing&nbsp;in&nbsp;</span><span style="color: #0000BB">$time</span><span style="color: #DD0000">&nbsp;seconds\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-2407">
    <p><strong>Example #3 <span class="function"><strong>microtime()</strong></span> and <em>REQUEST_TIME_FLOAT</em> (as of PHP 5.4.0)</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Randomize&nbsp;sleeping&nbsp;time<br></span><span style="color: #0000BB">usleep</span><span style="color: #007700">(</span><span style="color: #0000BB">mt_rand</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">10000</span><span style="color: #007700">));<br><br></span><span style="color: #FF8000">//&nbsp;As&nbsp;of&nbsp;PHP&nbsp;5.4.0,&nbsp;REQUEST_TIME_FLOAT&nbsp;is&nbsp;available&nbsp;in&nbsp;the&nbsp;$_SERVER&nbsp;superglobal&nbsp;array.<br>//&nbsp;It&nbsp;contains&nbsp;the&nbsp;timestamp&nbsp;of&nbsp;the&nbsp;start&nbsp;of&nbsp;the&nbsp;request&nbsp;with&nbsp;microsecond&nbsp;precision.<br></span><span style="color: #0000BB">$time&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">"REQUEST_TIME_FLOAT"</span><span style="color: #007700">];<br><br>echo&nbsp;</span><span style="color: #DD0000">"Did&nbsp;nothing&nbsp;in&nbsp;</span><span style="color: #0000BB">$time</span><span style="color: #DD0000">&nbsp;seconds\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.microtime-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.time.html" class="function" rel="rdfs-seeAlso">time()</a> - Return current Unix timestamp</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="111107">  
  <a class="name">
  <strong class="user"><em>player27</em></strong></a><div class="date" title="2013-01-15 04:31"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111107">
<div class="phpcode"><code><span class="html">
You can use one variable to check execution $time as follow:
<br>
<br><span class="default">&lt;?php
<br>$time </span><span class="keyword">= -</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br></span><span class="default">$hash </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1000</span><span class="keyword">,</span><span class="default">4000</span><span class="keyword">); ++</span><span class="default">$i</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$hash </span><span class="keyword">^= </span><span class="default">md5</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">str_shuffle</span><span class="keyword">(</span><span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">)));
<br>}
<br></span><span class="default">$time </span><span class="keyword">+= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>echo </span><span class="string">"Hash: </span><span class="default">$hash</span><span class="string"> iterations:</span><span class="default">$i</span><span class="string"> time: "</span><span class="keyword">,</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%f'</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">),</span><span class="default">PHP_EOL</span><span class="keyword">;
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91566">  
  <a class="name">
  <strong class="user"><em>gomodo at free dot fr</em></strong></a><div class="date" title="2009-06-17 03:32"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91566">
<div class="phpcode"><code><span class="html">
Need a mini benchmark ?<br>Use microtime with this (very smart) benchmark function :<br><br>mixed mini_bench_to(array timelist[, return_array=false])<br>return a mini bench result<br><br>-the timelist first key must be 'start'<br>-default return a resume string, or array if return_array= true :<br>'total_time' (ms) in first row<br>details (purcent) in next row<br><br>example :<br><span class="default">&lt;?php<br></span><span class="keyword">unset(</span><span class="default">$t</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// if previous used<br><br>//-- zone to bench<br></span><span class="default">$t</span><span class="keyword">[</span><span class="string">'start'</span><span class="keyword">] = </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$tab_test</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">);<br></span><span class="default">$fact</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br></span><span class="default">$t</span><span class="keyword">[</span><span class="string">'init_values'</span><span class="keyword">] = </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>foreach (</span><span class="default">$tab_test </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$fact</span><span class="keyword">=</span><span class="default">$fact</span><span class="keyword">*</span><span class="default">$value</span><span class="keyword">;<br>}<br></span><span class="default">$t</span><span class="keyword">[</span><span class="string">'loop_fact'</span><span class="keyword">] = </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>echo </span><span class="string">"fact = "</span><span class="keyword">.</span><span class="default">$fact</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="comment">//-- END zone to bench<br><br></span><span class="keyword">echo </span><span class="string">"---- string result----\n"</span><span class="keyword">;<br></span><span class="default">$str_result_bench</span><span class="keyword">=</span><span class="default">mini_bench_to</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">);<br>echo </span><span class="default">$str_result_bench</span><span class="keyword">; </span><span class="comment">// string return<br></span><span class="keyword">echo </span><span class="string">"---- tab result----\n"</span><span class="keyword">;<br></span><span class="default">$tab_result_bench</span><span class="keyword">=</span><span class="default">mini_bench_to</span><span class="keyword">(</span><span class="default">$t</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br>echo </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$tab_result_bench</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>this example return:<br><br>---- string result----<br>total time : 0.0141 ms<br>start -&gt; init_values : 51.1 %<br>init_values -&gt; loop_fact : 48.9 %<br>---- tab result----<br>array (<br>&nbsp; 'total_time' =&gt; 0.0141,<br>&nbsp; 'start -&gt; init_values' =&gt; 51.1,<br>&nbsp; 'init_values -&gt; loop_fact' =&gt; 48.9,<br>)<br><br>The function to include :<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">mini_bench_to</span><span class="keyword">(</span><span class="default">$arg_t</span><span class="keyword">, </span><span class="default">$arg_ra</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) <br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$tttime</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">((</span><span class="default">end</span><span class="keyword">(</span><span class="default">$arg_t</span><span class="keyword">)-</span><span class="default">$arg_t</span><span class="keyword">[</span><span class="string">'start'</span><span class="keyword">])*</span><span class="default">1000</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$arg_ra</span><span class="keyword">) </span><span class="default">$ar_aff</span><span class="keyword">[</span><span class="string">'total_time'</span><span class="keyword">]=</span><span class="default">$tttime</span><span class="keyword">;<br>&nbsp; &nbsp; else </span><span class="default">$aff</span><span class="keyword">=</span><span class="string">"total time : "</span><span class="keyword">.</span><span class="default">$tttime</span><span class="keyword">.</span><span class="string">"ms\n"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$prv_cle</span><span class="keyword">=</span><span class="string">'start'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$prv_val</span><span class="keyword">=</span><span class="default">$arg_t</span><span class="keyword">[</span><span class="string">'start'</span><span class="keyword">];<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$arg_t </span><span class="keyword">as </span><span class="default">$cle</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$cle</span><span class="keyword">!=</span><span class="string">'start'</span><span class="keyword">)&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$prcnt_t</span><span class="keyword">=</span><span class="default">round</span><span class="keyword">(((</span><span class="default">round</span><span class="keyword">((</span><span class="default">$val</span><span class="keyword">-</span><span class="default">$prv_val</span><span class="keyword">)*</span><span class="default">1000</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)/</span><span class="default">$tttime</span><span class="keyword">)*</span><span class="default">100</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$arg_ra</span><span class="keyword">) </span><span class="default">$ar_aff</span><span class="keyword">[</span><span class="default">$prv_cle</span><span class="keyword">.</span><span class="string">' -&gt; '</span><span class="keyword">.</span><span class="default">$cle</span><span class="keyword">]=</span><span class="default">$prcnt_t</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aff</span><span class="keyword">.=</span><span class="default">$prv_cle</span><span class="keyword">.</span><span class="string">' -&gt; '</span><span class="keyword">.</span><span class="default">$cle</span><span class="keyword">.</span><span class="string">' : '</span><span class="keyword">.</span><span class="default">$prcnt_t</span><span class="keyword">.</span><span class="string">" %\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$prv_val</span><span class="keyword">=</span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$prv_cle</span><span class="keyword">=</span><span class="default">$cle</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$arg_ra</span><span class="keyword">) return </span><span class="default">$ar_aff</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">$aff</span><span class="keyword">;<br>&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101628">  
  <a class="name">
  <strong class="user"><em>jamie at bishopston dot net</em></strong></a><div class="date" title="2010-12-30 12:55"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101628">
<div class="phpcode"><code><span class="html">
All these timing scripts rely on microtime which relies on gettimebyday(2)<br><br>This can be inaccurate on servers that run ntp to syncronise the servers<br>time.<br><br>For timing, you should really use clock_gettime(2) with the<br>CLOCK_MONOTONIC flag set.<br><br>This returns REAL WORLD time, not affected by intentional clock drift.<br><br>This may seem a bit picky, but I recently saw a server that's clock was an<br>hour out, and they'd set it to 'drift' to the correct time (clock is speeded<br>up until it reaches the correct time)<br><br>Those sorts of things can make a real impact.<br><br>Any solutions, seeing as php doesn't have a hook into clock_gettime?<br><br>More info here: <a rel="nofollow" target="_blank">http://tinyurl.com/28vxja9</a><br><br><a rel="nofollow" target="_blank">http://blog.habets.pp.se/2010/09/</a><br>gettimeofday-should-never-be-used-to-measure-time</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99307">  
  <a class="name">
  <strong class="user"><em>Andris</em></strong></a><div class="date" title="2010-08-10 02:23"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99307">
<div class="phpcode"><code><span class="html">
I wrote a class which allows to time execution of php scripts very easily. You can even time multiple separate blocks and then get the total time at the end. 
<br>
<br>The class is pretty long so I won't post it here, but here's the link:
<br><a rel="nofollow" target="_blank">http://codeaid.net/php/calculate-script-execution-time-(php-class</a>)
<br>
<br>An quick usage example:
<br><span class="default">&lt;?php
<br></span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">// calculate the time it takes to run fx()
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">Timer</span><span class="keyword">::</span><span class="default">start</span><span class="keyword">(); 
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">fx</span><span class="keyword">();
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">Timer</span><span class="keyword">::</span><span class="default">stop</span><span class="keyword">(); 
<br> 
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">fy</span><span class="keyword">();
<br> 
<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">// calculate the time it takes to run fz()
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">Timer</span><span class="keyword">::</span><span class="default">start</span><span class="keyword">();
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">fz</span><span class="keyword">();
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">Timer</span><span class="keyword">::</span><span class="default">stop</span><span class="keyword">();
<br>}
<br> 
<br>print </span><span class="default">Timer</span><span class="keyword">::</span><span class="default">get</span><span class="keyword">();
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93568">  
  <a class="name">
  <strong class="user"><em>bleakwind at gmail dot com</em></strong></a><div class="date" title="2009-09-16 10:19"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93568">
<div class="phpcode"><code><span class="html">
Check Program runtime:
<br><span class="default">&lt;?php
<br>
<br></span><span class="keyword">class </span><span class="default">bwruntime
<br></span><span class="keyword">{
<br>&nbsp; &nbsp; var </span><span class="default">$timestart</span><span class="keyword">;
<br>&nbsp; &nbsp; var </span><span class="default">$digits</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; function </span><span class="default">bwruntime</span><span class="keyword">(</span><span class="default">$digits </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">timestart&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">digits&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$digits</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; function </span><span class="default">totaltime</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$timefinish&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">digits </span><span class="keyword">== </span><span class="string">""</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$runtime_float&nbsp; </span><span class="keyword">= </span><span class="default">$timefinish</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] - </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">timestart</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$runtime_float&nbsp; </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">((</span><span class="default">$timefinish</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] - </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">timestart</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]), </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">digits</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$runtime </span><span class="keyword">= (</span><span class="default">$timefinish</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">timestart</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) + </span><span class="default">$runtime_float</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$runtime</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101561">  
  <a class="name">
  <strong class="user"><em>Robin Leffmann</em></strong></a><div class="date" title="2010-12-24 12:07"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101561">
<div class="phpcode"><code><span class="html">
While doing some experiments on using microtime()'s output for an entropy generator I found that its microsecond value was always quantified to the nearest hundreds (i.e. the number ends with 00), which affected the randomness of the entropy generator. This output pattern was consistent on three separate machines, running OpenBSD, Mac OS X and Windows.<br> <br>The solution was to instead use gettimeofday()'s output, as its usec value followed no quantifiable pattern on any of the three test platforms.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="66187">  
  <a class="name">
  <strong class="user"><em>EdorFaus</em></strong></a><div class="date" title="2006-05-16 12:47"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom66187">
<div class="phpcode"><code><span class="html">
Of the methods I've seen here, and thought up myself, to convert microtime() output into a numerical value, the microtime_float() one shown in the documentation proper(using explode,list,float,+) is the slowest in terms of runtime.<br><br>I implemented the various methods, ran each in a tight loop 1,000,000 times, and compared runtimes (and output). I did this 10 times to make sure there wasn't a problem of other things putting a load spike on the server. I'll admit I didn't take into account martijn at vanderlee dot com's comments on testing accuracy, but as I figured the looping code etc would be the same, and this was only meant as a relative comparison, it should not be necessary.<br><br>The above method took on average 5.7151877 seconds, while a method using substr and simply adding strings with . took on average 3.0144226 seconds. rsalazar at innox dot com dot mx's method using preg_replace used on average 4.1819633 seconds. This shows that there are indeed differences, but for normal use noone is going to notice it.<br><br>Note that the substr method mentioned isn't quite the one given anonymously below, but one I made based on it:<br><span class="default">&lt;?php<br>$time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">();<br></span><span class="default">$timeval</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">).</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Also worth noting is that the microtime_float() method gets faster, and no less accurate, if the (float) conversions are taken out and the variables are simply added together.<br><br>Any of the methods that used + or array_sum ended up rounding the result to 2 digits after the decimal point, while (most of) the ones using preg_replace or substr and . kept all the digits.<br><br>For accurate timing, since floating-point arithmetic would lose precision, I stored microtime results as-is and calculated time difference with this function:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">microtime_used</span><span class="keyword">(</span><span class="default">$before</span><span class="keyword">,</span><span class="default">$after</span><span class="keyword">) {<br>&nbsp; &nbsp; return (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$after</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">)-</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$before</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; +(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$after</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">)-</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$before</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>For further information, the script itself, etc, see <a rel="nofollow" target="_blank">http://edorfaus.xepher.net/div/convert-method-test.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="113078">  
  <a class="name">
  <strong class="user"><em>Daniel Rhodes</em></strong></a><div class="date" title="2013-08-27 12:54"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom113078">
<div class="phpcode"><code><span class="html">
But note that the default 'precision' setting of PHP* - which is used when a float is converted to a stringy format by echo()ing, casting or json_encode()ing etc - is not enough to hold the six digit accuracy of microtime(true).<br><br>Out of the box, microtime(true) will echo something like:<br><br>1377611450.1234<br><br>Which is obviously less than microsecond accuracy. You'll probably want to bump the 'precision' setting up to 16 which will echo something like:<br><br>1377611450.123456<br><br>*Internally* it will be accurate to the six digits even with the default 'precision', but a lot of things (ie. NoSQL databases) are moving to all-text representations these days so it becomes a bit more important.<br><br>* 14 at the time of writing</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83642">  
  <a class="name">
  <strong class="user"><em>kpsimoulis [at] genatec</em></strong></a><div class="date" title="2008-06-05 12:53"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83642">
<div class="phpcode"><code><span class="html">
This function is very useful for putting a start and end point in your page to find out where is the delay.<br><br><span class="default">&lt;?php<br><br>$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="comment">// My source code here<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br><br>echo </span><span class="default">$end</span><span class="keyword">.</span><span class="string">"-"</span><span class="keyword">.</span><span class="default">$start</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.(</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">). </span><span class="string">" seconds"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>If you try this example above (without any source code between the start and the end point). You will get an ugly value, something like:<br>1212690530.4132-1212690530.4132=8.1062316894531E-6 seconds<br><br>You will wonder why you get this because both numbers seem to be equal. Well this is because there is a hidden precision that we are not able to see.<br><br>To solve this problem I made a new function:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">my_microtime</span><span class="keyword">(</span><span class="default">$precision </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">),</span><span class="default">4</span><span class="keyword">);<br>}<br><br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="comment">// My source code here<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br><br>echo </span><span class="default">$end</span><span class="keyword">.</span><span class="string">"-"</span><span class="keyword">.</span><span class="default">$start</span><span class="keyword">.</span><span class="string">"="</span><span class="keyword">.</span><span class="default">substr</span><span class="keyword">((</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">),</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">). </span><span class="string">" seconds"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>It would be useful if they add another parameter for precision in this function or at least another boolean that will not include the hidden precision.<br>You can read more about the hidden precision in <a rel="nofollow" target="_blank">http://php.net/float</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="59052">  
  <a class="name">
  <strong class="user"><em>radek at pinkbike com</em></strong></a><div class="date" title="2005-11-24 08:48"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59052">
<div class="phpcode"><code><span class="html">
A lot of the comments here suggest adding in the following way:&nbsp; (float)$usec + (float)$sec<br>Make sure you have the float precision high enough as with the default precision of 12, you are only precise to the 0.01 seconds.&nbsp; <br>Set this in you php.ini file.<br>&nbsp; &nbsp; &nbsp; &nbsp; precision&nbsp; &nbsp; =&nbsp; 16</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112725">  
  <a class="name">
  <strong class="user"><em>Nads</em></strong></a><div class="date" title="2013-07-17 08:28"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112725">
<div class="phpcode"><code><span class="html">
Get date time with milliseconds<br><br>$micro_date = microtime();<br>$date_array = explode(" ",$micro_date);<br>$date = date("Y-m-d H:i:s",$date_array[1]);<br>echo "Date: $date:" . $date_array[0];<br><br>Test accuracy by running it in a loop.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112104">  
  <a class="name">
  <strong class="user"><em>Russell G.</em></strong></a><div class="date" title="2013-05-03 08:34"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112104">
<div class="phpcode"><code><span class="html">
Note that the timestamp returned is "with microseconds", not "in microseconds". This is especially good to know if you pass 'true' as the parameter and then calculate the difference between two float values -- the result is already in seconds; it doesn't need to be divided by a million.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108255">  
  <a class="name">
  <strong class="user"><em>thomas</em></strong></a><div class="date" title="2012-04-12 02:45"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108255">
<div class="phpcode"><code><span class="html">
I have been getting negative values substracting a later microtime(true) call from an earlier microtime(true) call on Windows with PHP 5.3.8<br><br>Produces negative values<br>------------------------------<br>for($i = 0; $i&lt;100; $i++) {<br>&nbsp; &nbsp; $x =&nbsp; microtime(true);<br>&nbsp; &nbsp; //short calculation<br>&nbsp; &nbsp; $y = microtime(true);<br>&nbsp; &nbsp; echo ($y-$x) . "\n"; // &lt;--- mostly negatives<br>}<br><br>Calling usleep(1) seems to work<br>---------------------------------------<br>for($i = 0; $i&lt;100; $i++) {<br>&nbsp; &nbsp; $x =&nbsp; microtime(true);<br>&nbsp; &nbsp; //short calculation<br>&nbsp; &nbsp; usleep(1);<br>&nbsp; &nbsp; $y = microtime(true);<br>&nbsp; &nbsp; echo ($y-$x) . "\n"; // &lt;--- fixed now<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104053">  
  <a class="name">
  <strong class="user"><em>langpavel at phpskelet dot org</em></strong></a><div class="date" title="2011-05-19 01:46"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104053">
<div class="phpcode"><code><span class="html">
I use this for measure duration of script execution. This function should be defined (and of couse first call made) as soon as possible.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * get execution time in seconds at current point of call in seconds<br> * @return float Execution time at this point of call<br> */<br></span><span class="keyword">function </span><span class="default">get_execution_time</span><span class="keyword">()<br>{<br>&nbsp; &nbsp; static </span><span class="default">$microtime_start </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$microtime_start </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$microtime_start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">0.0</span><span class="keyword">; <br>&nbsp; &nbsp; }&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$microtime_start</span><span class="keyword">; <br>}<br></span><span class="default">get_execution_time</span><span class="keyword">();<br><br></span><span class="default">?&gt;<br></span><br>However it is true that result depends of gettimeofday() call. ([jamie at bishopston dot net] wrote this &amp; I can confirm)<br>If system time change, result of this function can be unpredictable (much greater or less than zero).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92659">  
  <a class="name">
  <strong class="user"><em>thawootah</em></strong></a><div class="date" title="2009-08-02 04:23"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92659">
<div class="phpcode"><code><span class="html">
Want to make sure your script doesn't time out on large updates? Say you're doing a poor mans cron job or working with large amounts of data in loop and the user begins to hang too long. Instead of them giving up and leaving you can break the loop when it reaches a set time and still display data. <br><br>Here's a simple handy dandy loop timer rounded to second.<br><span class="default">&lt;?php<br>$starttime </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">));<br></span><span class="default">$totaltime&nbsp; </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$maxtime </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">; </span><span class="comment">//seconds<br></span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">20</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {&nbsp; </span><span class="comment">/// 20 loops 1 sec each<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">1000000</span><span class="keyword">); <br><br>&nbsp; &nbsp; if(</span><span class="default">$totaltime </span><span class="keyword">&lt; </span><span class="default">$maxtime</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$currenttime </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$totaltime </span><span class="keyword">= </span><span class="default">$totaltime </span><span class="keyword">+ (</span><span class="default">$currenttime </span><span class="keyword">-</span><span class="default">$starttime</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//update and continue<br>&nbsp; &nbsp; </span><span class="keyword">echo&nbsp; </span><span class="default">$i</span><span class="keyword">.</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// stop updating or display not updated data.<br>&nbsp; &nbsp; </span><span class="keyword">break;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85719">  
  <a class="name">
  <strong class="user"><em>christ dot boris at nospam gmail dot com</em></strong></a><div class="date" title="2008-09-13 12:39"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85719">
<div class="phpcode"><code><span class="html">
Hi, I made a function to get the generation page time :<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">gentime</span><span class="keyword">() {<br>&nbsp; &nbsp; static </span><span class="default">$a</span><span class="keyword">;<br>&nbsp; &nbsp; if(</span><span class="default">$a </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="default">$a </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; else return (string)(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">)-</span><span class="default">$a</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>(You can add a round() to the return value if you want)<br><br>Use :<br><br><span class="default">&lt;?php<br></span><span class="comment"># you should include your libraries/conf files here (including the gentime function)<br></span><span class="default">gentime</span><span class="keyword">();<br><br></span><span class="comment"># your source code here<br><br></span><span class="keyword">echo </span><span class="string">'Generated in '</span><span class="keyword">.</span><span class="default">gentime</span><span class="keyword">().</span><span class="string">' seconds.'<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84395">  
  <a class="name">
  <strong class="user"><em>pascalxusPLEASENOSPAM at yahoo dot com</em></strong></a><div class="date" title="2008-07-12 01:19"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84395">
<div class="phpcode"><code><span class="html">
I wanted to find out whether echo would be quicker in small chunks or one large chunk to test the theory mentioned in the previous post.&nbsp; The following experiment shows that there is no significant performance difference, in terms of execution time elapsed, between the two methods of using echo.&nbsp; I ran two test cases, one with a string that is 100000 bytes long and another with a string length of 1000000.&nbsp; The source code follows below.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">echobig</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$bufferSize </span><span class="keyword">= </span><span class="default">8192</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$splitString </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$bufferSize</span><span class="keyword">);<br><br>&nbsp; &nbsp; foreach(</span><span class="default">$splitString </span><span class="keyword">as </span><span class="default">$chunk</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$chunk</span><span class="keyword">;<br>}<br><br>global </span><span class="default">$dat</span><span class="keyword">;<br></span><span class="default">$dat </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br><br>function </span><span class="default">testit</span><span class="keyword">()<br>{<br>global </span><span class="default">$dat</span><span class="keyword">;<br></span><span class="default">$data </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br><br>for( </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">&lt;= </span><span class="default">1000000</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">+= </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$data </span><span class="keyword">.= </span><span class="string">"a"</span><span class="keyword">;<br><br></span><span class="default">$u1</span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">echobig</span><span class="keyword">( </span><span class="default">$data </span><span class="keyword">);<br></span><span class="default">$u2</span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>echo </span><span class="default">$data</span><span class="keyword">;<br></span><span class="default">$u3</span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br><br></span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$u2 </span><span class="keyword">- </span><span class="default">$u1</span><span class="keyword">;<br></span><span class="default">$diff2</span><span class="keyword">= </span><span class="default">$u3 </span><span class="keyword">- </span><span class="default">$u2</span><span class="keyword">;<br></span><span class="default">$dat </span><span class="keyword">.= </span><span class="string">"</span><span class="default">$diff2</span><span class="string"> </span><span class="default">$diff</span><span class="string">&nbsp; &nbsp; </span><span class="default">$u2</span><span class="string">&nbsp; </span><span class="default">$u1</span><span class="string">\r\n"</span><span class="keyword">;<br>}<br><br></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>while( </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">5 </span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">testit</span><span class="keyword">(); </span><span class="default">$i </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;<br>}<br><br>global </span><span class="default">$dat</span><span class="keyword">;<br></span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">( </span><span class="string">"../Data/results.txt"</span><span class="keyword">, </span><span class="string">"w" </span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">( </span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$dat </span><span class="keyword">);<br></span><span class="default">fclose</span><span class="keyword">( </span><span class="default">$fp </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>You can run the above experiment yourself or you can look at my test data.&nbsp; I got some test data here:&nbsp; <a rel="nofollow" target="_blank">http://www.codesplunk.com/examples/echo.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="83504">  
  <a class="name">
  <strong class="user"><em>luke at lucanos dot com</em></strong></a><div class="date" title="2008-05-28 04:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83504">
<div class="phpcode"><code><span class="html">
Rather than using the list() function, etc. I have found the following code to be a bit cleaner and simpler:<br><span class="default">&lt;?php<br>$theTime </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">( </span><span class="default">explode</span><span class="keyword">( </span><span class="string">' ' </span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">() ) );<br>echo </span><span class="default">$theTime</span><span class="keyword">;<br></span><span class="comment"># Displays "1212018372.3366"<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53969">  
  <a class="name">
  <strong class="user"><em>vladson at pc-labs dot info</em></strong></a><div class="date" title="2005-06-19 03:49"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53969">
<div class="phpcode"><code><span class="html">
I like to use bcmath for it<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">micro_time</span><span class="keyword">() {<br>&nbsp; &nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());<br>&nbsp; &nbsp; return </span><span class="default">bcadd</span><span class="keyword">(</span><span class="default">$temp</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">6</span><span class="keyword">);<br>}<br><br></span><span class="default">$time_start </span><span class="keyword">= </span><span class="default">micro_time</span><span class="keyword">();<br></span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br></span><span class="default">$time_stop </span><span class="keyword">= </span><span class="default">micro_time</span><span class="keyword">();<br><br></span><span class="default">$time_overall </span><span class="keyword">= </span><span class="default">bcsub</span><span class="keyword">(</span><span class="default">$time_stop</span><span class="keyword">, </span><span class="default">$time_start</span><span class="keyword">, </span><span class="default">6</span><span class="keyword">);<br>echo </span><span class="string">"Execution time - </span><span class="default">$time_overall</span><span class="string"> Seconds"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69035">  
  <a class="name">
  <strong class="user"><em>admin at emuxperts dot net</em></strong></a><div class="date" title="2006-08-20 07:37"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom69035">
<div class="phpcode"><code><span class="html">
This little function comes in handy if you want a single integer when your server doesn't have php &gt;= 5.0<br><br>It returns seconds passed unix epoch to the microsecond. Or microseconds since unix epoch.<br><br><span class="default">&lt;?php<br></span><span class="comment">//A hack for PHP &lt; 5.0<br></span><span class="keyword">function </span><span class="default">utime</span><span class="keyword">(</span><span class="default">$inms</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$utime </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^(.*?) (.*?)$/"</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">(), </span><span class="default">$match</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$utime </span><span class="keyword">= </span><span class="default">$match</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] + </span><span class="default">$match</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; if(</span><span class="default">$inms</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$utime </span><span class="keyword">*=&nbsp; </span><span class="default">1000000</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$utime</span><span class="keyword">;<br>}<br><br></span><span class="comment">//Example:<br></span><span class="keyword">print </span><span class="default">utime</span><span class="keyword">();<br></span><span class="comment">//Returns:<br>//1156127104.746352 Seconds<br><br>//Example two:<br></span><span class="keyword">print </span><span class="default">utime</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br></span><span class="comment">//Returns:<br>//1156127104746352 Microseconds<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50300">  
  <a class="name">
  <strong class="user"><em>php at washboardabs dot net</em></strong></a><div class="date" title="2005-02-24 12:57"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50300">
<div class="phpcode"><code><span class="html">
Interesting quirk (tested in PHP 5.0.3): You can get very wacky results from microtime when it is called in the destructor of an object at the end of a script. These times vary enormously and can be in the *past*, when compared to microtime calls in the body of the script.<br><br>As a case example, I played with a timer object that measured microtime when it was created at the start of the script, and measured microtime again at the end of the script using __destruct(); and then printed the total execution time (end time - start time) at the bottom of the page. On short scripts, this would often give a negative time!<br><br>This quirk does not appear if microtime is measured with an automatic shutdown function (using <span class="default">&lt;?PHP register_shutdown_function</span><span class="keyword">(</span><span class="string">'myfunc'</span><span class="keyword">) </span><span class="default">?&gt;</span>. Incidentally, the automatic shutdown functions are called after output buffers are flushed but before object destructors are called.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100084">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2010-09-23 09:53"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100084">
<div class="phpcode"><code><span class="html">
that related to the prescedence of the . operator<br><br><span class="default">&lt;?php<br></span><span class="comment"># normal prescedence<br></span><span class="default">$a </span><span class="keyword">= </span><span class="string">"te" </span><span class="keyword">.&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">- </span><span class="default">2&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"st"</span><span class="keyword">; </span><span class="comment"># ((te . 1) - 2 ) . st ==&gt; -2st<br></span><span class="default">$b </span><span class="keyword">= </span><span class="string">"te" </span><span class="keyword">.&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">2&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"st"</span><span class="keyword">; </span><span class="comment"># ((te . 1) + 2 ) . st ==&gt;&nbsp; 2st<br><br># modified prescedence<br></span><span class="default">$c </span><span class="keyword">= </span><span class="string">"te" </span><span class="keyword">. ( </span><span class="default">1 </span><span class="keyword">- </span><span class="default">2 </span><span class="keyword">) . </span><span class="string">"st"</span><span class="keyword">; </span><span class="comment"># te . ( 1 - 2 ) . st ==&gt; te-1st<br></span><span class="default">$d </span><span class="keyword">= </span><span class="string">"te" </span><span class="keyword">. ( </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">2 </span><span class="keyword">) . </span><span class="string">"st"</span><span class="keyword">; </span><span class="comment"># te . ( 1 + 2 ) . st ==&gt; te3st<br><br></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d </span><span class="keyword">);</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90216">  
  <a class="name">
  <strong class="user"><em>singh206 at gmail dot com</em></strong></a><div class="date" title="2009-04-10 11:35"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90216">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">StopWatch </span><span class="keyword">{
<br>&nbsp; &nbsp; public </span><span class="default">$total</span><span class="keyword">;
<br>&nbsp; &nbsp; public </span><span class="default">$time</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">total </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; public function </span><span class="default">clock</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">time </span><span class="keyword">+ (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">));
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; public function </span><span class="default">elapsed</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">total</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; public function </span><span class="default">reset</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">total</span><span class="keyword">=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br>
<br></span><span class="default">$stopwatch </span><span class="keyword">= new </span><span class="default">StopWatch</span><span class="keyword">();
<br></span><span class="default">usleep</span><span class="keyword">(</span><span class="default">1000000</span><span class="keyword">);
<br>echo </span><span class="string">"Checkpoint 1: "</span><span class="keyword">.</span><span class="default">$stopwatch</span><span class="keyword">-&gt;</span><span class="default">clock</span><span class="keyword">().</span><span class="string">" seconds&lt;br /&gt;"</span><span class="keyword">;
<br>
<br></span><span class="default">usleep</span><span class="keyword">(</span><span class="default">1000000</span><span class="keyword">);
<br>echo </span><span class="string">"Checkpoint 2: "</span><span class="keyword">.</span><span class="default">$stopwatch</span><span class="keyword">-&gt;</span><span class="default">clock</span><span class="keyword">().</span><span class="string">" seconds&lt;br /&gt;"</span><span class="keyword">;
<br>
<br>echo </span><span class="string">"Total Elapsed: "</span><span class="keyword">.</span><span class="default">$stopwatch</span><span class="keyword">-&gt;</span><span class="default">elapsed</span><span class="keyword">().</span><span class="string">" seconds&lt;br /&gt;"</span><span class="keyword">;
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109826">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-08-24 03:34"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109826">
<div class="phpcode"><code><span class="html">
Observed in php 5.3.3 on CentOS 6 and php 5.3.14 on Amazon Linux 2012.03:<br><br>microtime()'s string value is in the format "0.dddddd00 ddddd...".&nbsp; That is, there's room for 10-ns precision that isn't being used, and the "msec" value is in decimal, not a literal number of microseconds (and *especially* not milliseconds, which is what msec usually stands for) as the documentation might imply.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83527">  
  <a class="name">
  <strong class="user"><em>Peter Kehl</em></strong></a><div class="date" title="2008-05-30 03:31"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83527">
<div class="phpcode"><code><span class="html">
This function allows you to easily calculate time difference between two points in time without losing the precision.
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**&nbsp; &nbsp; Calculate a precise time difference.
<br>&nbsp; &nbsp; &nbsp; &nbsp; @param string $start result of microtime()
<br>&nbsp; &nbsp; &nbsp; &nbsp; @param string $end result of microtime(); if NULL/FALSE/0/'' then it's now
<br>&nbsp; &nbsp; &nbsp; &nbsp; @return flat difference in seconds, calculated with minimum precision loss
<br>&nbsp; &nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">microtime_diff</span><span class="keyword">( </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">=</span><span class="default">NULL </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if( !</span><span class="default">$end </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end</span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$start_usec</span><span class="keyword">, </span><span class="default">$start_sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$end_usec</span><span class="keyword">, </span><span class="default">$end_sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff_sec</span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$end_sec</span><span class="keyword">) - </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$start_sec</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$diff_usec</span><span class="keyword">= </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$end_usec</span><span class="keyword">) - </span><span class="default">floatval</span><span class="keyword">(</span><span class="default">$start_usec</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">floatval</span><span class="keyword">( </span><span class="default">$diff_sec </span><span class="keyword">) + </span><span class="default">$diff_usec</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.microtime.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:18:50 GMT -->


</body></html>