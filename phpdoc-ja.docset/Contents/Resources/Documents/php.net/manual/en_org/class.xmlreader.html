<html><!-- Mirrored from php.net/manual/en/class.xmlreader.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:52:56 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>XMLReader</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="class.xmlreader.html">
 <link rel="shorturl" href="http://php.net/xmlreader">
 <link rel="alternate" href="http://php.net/xmlreader" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.xmlreader.html">
 <link rel="prev" href="xmlreader.resources.html">
 <link rel="next" href="xmlreader.close.html">

 <link rel="alternate" href="class.xmlreader.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/class.xmlreader.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/class.xmlreader.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/class.xmlreader.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/class.xmlreader.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/class.xmlreader.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/class.xmlreader.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/class.xmlreader.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/class.xmlreader.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/class.xmlreader.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/class.xmlreader.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xmlreader.html">XMLReader</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="class.xmlreader" class="reference">
 <h1 class="title">The XMLReader class</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.1.0)</p>
 

  <div class="section" id="xmlreader.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    The XMLReader extension is an XML Pull parser. The reader acts as a 
    cursor going forward on the document stream and stopping at each node 
    on the way.
   </p>
  </div>

 
  <div class="section" id="xmlreader.synopsis">
   <h2 class="title">Class synopsis</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">XMLReader</strong>
     </span>
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.none"><var class="varname">NONE</var></a></var>
      <span class="initializer"> = 0</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.element"><var class="varname">ELEMENT</var></a></var>
      <span class="initializer"> = 1</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.attribute"><var class="varname">ATTRIBUTE</var></a></var>
      <span class="initializer"> = 2</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.text"><var class="varname">TEXT</var></a></var>
      <span class="initializer"> = 3</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.cdata"><var class="varname">CDATA</var></a></var>
      <span class="initializer"> = 4</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.entity-ref"><var class="varname">ENTITY_REF</var></a></var>
      <span class="initializer"> = 5</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.entity"><var class="varname">ENTITY</var></a></var>
      <span class="initializer"> = 6</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.pi"><var class="varname">PI</var></a></var>
      <span class="initializer"> = 7</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.comment"><var class="varname">COMMENT</var></a></var>
      <span class="initializer"> = 8</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.doc"><var class="varname">DOC</var></a></var>
      <span class="initializer"> = 9</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.doc-type"><var class="varname">DOC_TYPE</var></a></var>
      <span class="initializer"> = 10</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.doc-fragment"><var class="varname">DOC_FRAGMENT</var></a></var>
      <span class="initializer"> = 11</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.notation"><var class="varname">NOTATION</var></a></var>
      <span class="initializer"> = 12</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.whitespace"><var class="varname">WHITESPACE</var></a></var>
      <span class="initializer"> = 13</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.significant-whitespace"><var class="varname">SIGNIFICANT_WHITESPACE</var></a></var>
      <span class="initializer"> = 14</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.end-element"><var class="varname">END_ELEMENT</var></a></var>
      <span class="initializer"> = 15</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.end-entity"><var class="varname">END_ENTITY</var></a></var>
      <span class="initializer"> = 16</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.xml-declaration"><var class="varname">XML_DECLARATION</var></a></var>
      <span class="initializer"> = 17</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.loaddtd"><var class="varname">LOADDTD</var></a></var>
      <span class="initializer"> = 1</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.defaultattrs"><var class="varname">DEFAULTATTRS</var></a></var>
      <span class="initializer"> = 2</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.validate"><var class="varname">VALIDATE</var></a></var>
      <span class="initializer"> = 3</span>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">const</span>
      <span class="type">int</span>
       <var class="fieldsynopsis_varname"><a href="class.xmlreader.html#xmlreader.constants.subst-entities"><var class="varname">SUBST_ENTITIES</var></a></var>
      <span class="initializer"> = 4</span>
     ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Properties */</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">int</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.attributecount">$<var class="varname">attributeCount</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.baseuri">$<var class="varname">baseURI</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">int</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.depth">$<var class="varname">depth</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">bool</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.hasattributes">$<var class="varname">hasAttributes</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">bool</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.hasvalue">$<var class="varname">hasValue</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">bool</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.isdefault">$<var class="varname">isDefault</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">bool</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.isemptyelement">$<var class="varname">isEmptyElement</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.localname">$<var class="varname">localName</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.name">$<var class="varname">name</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.namespaceuri">$<var class="varname">namespaceURI</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">int</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.nodetype">$<var class="varname">nodeType</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.prefix">$<var class="varname">prefix</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.value">$<var class="varname">value</var></a></var>
     ;</div>

     <div class="fieldsynopsis">
      <span class="modifier">public</span>
      <span class="modifier">readonly</span>
      <span class="type">string</span>
       <var class="varname"><a href="class.xmlreader.html#xmlreader.props.xmllang">$<var class="varname">xmlLang</var></a></var>
     ;</div>



    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.close.html" class="methodname">close</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">DOMNode</span> 
   <span class="methodname"><a href="xmlreader.expand.html" class="methodname">expand</a></span>
    ([ <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <code class="parameter">$basenode</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">string</span> 
   <span class="methodname"><a href="xmlreader.getattribute.html" class="methodname">getAttribute</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">string</span> 
   <span class="methodname"><a href="xmlreader.getattributeno.html" class="methodname">getAttributeNo</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="xmlreader.getattributens.html" class="methodname">getAttributeNs</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$localName</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespaceURI</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.getparserproperty.html" class="methodname">getParserProperty</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$property</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.isvalid.html" class="methodname">isValid</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.lookupnamespace.html" class="methodname">lookupNamespace</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$prefix</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.movetoattribute.html" class="methodname">moveToAttribute</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$name</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.movetoattributeno.html" class="methodname">moveToAttributeNo</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$index</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.movetoattributens.html" class="methodname">moveToAttributeNs</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$localName</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$namespaceURI</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.movetoelement.html" class="methodname">moveToElement</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.movetofirstattribute.html" class="methodname">moveToFirstAttribute</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.movetonextattribute.html" class="methodname">moveToNextAttribute</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.next.html" class="methodname">next</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$localname</code></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.open.html" class="methodname">open</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$URI</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$encoding</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$options</code><span class="initializer"> = 0</span></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.read.html" class="methodname">read</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="xmlreader.readinnerxml.html" class="methodname">readInnerXML</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="xmlreader.readouterxml.html" class="methodname">readOuterXML</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="xmlreader.readstring.html" class="methodname">readString</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.setparserproperty.html" class="methodname">setParserProperty</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$property</code></span>
   , <span class="methodparam"><span class="type">bool</span> <code class="parameter">$value</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.setrelaxngschema.html" class="methodname">setRelaxNGSchema</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.setrelaxngschemasource.html" class="methodname">setRelaxNGSchemaSource</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$source</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><a href="xmlreader.setschema.html" class="methodname">setSchema</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span>
   <span class="type">bool</span> 
   <span class="methodname"><a href="xmlreader.xml.html" class="methodname">xml</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$source</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$encoding</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$options</code><span class="initializer"> = 0</span></span>
  ]] )</div>

 
   }</div>

 
  </div>
 

  <div class="section" id="xmlreader.props">
   <h2 class="title">Properties</h2>
   <dl>

    
     <a class="dashAnchor" name="//apple_ref/Property/attributeCount"></a><dt id="xmlreader.props.attributecount"><var class="varname"><var class="varname">attributeCount</var></var></dt>

     <dd>

      <p class="para">
       The number of attributes on the node
      </p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/baseURI"></a><dt id="xmlreader.props.baseuri"><var class="varname"><var class="varname">baseURI</var></var></dt>

     <dd>

      <p class="para">The base URI of the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/depth"></a><dt id="xmlreader.props.depth"><var class="varname"><var class="varname">depth</var></var></dt>

     <dd>

      <p class="para">Depth of the node in the tree, starting at 0</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/hasAttributes"></a><dt id="xmlreader.props.hasattributes"><var class="varname"><var class="varname">hasAttributes</var></var></dt>

     <dd>

      <p class="para">Indicates if node has attributes</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/hasValue"></a><dt id="xmlreader.props.hasvalue"><var class="varname"><var class="varname">hasValue</var></var></dt>

     <dd>

      <p class="para">Indicates if node has a text value</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/isDefault"></a><dt id="xmlreader.props.isdefault"><var class="varname"><var class="varname">isDefault</var></var></dt>

     <dd>

      <p class="para">Indicates if attribute is defaulted from DTD</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/isEmptyElement"></a><dt id="xmlreader.props.isemptyelement"><var class="varname"><var class="varname">isEmptyElement</var></var></dt>

     <dd>

       <p class="para">Indicates if node is an empty element tag</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/localName"></a><dt id="xmlreader.props.localname"><var class="varname"><var class="varname">localName</var></var></dt>

     <dd>

      <p class="para">The local name of the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/name"></a><dt id="xmlreader.props.name"><var class="varname"><var class="varname">name</var></var></dt>

     <dd>

      <p class="para">The qualified name of the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/namespaceURI"></a><dt id="xmlreader.props.namespaceuri"><var class="varname"><var class="varname">namespaceURI</var></var></dt>

     <dd>

      <p class="para">The URI of the namespace associated with the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/nodeType"></a><dt id="xmlreader.props.nodetype"><var class="varname"><var class="varname">nodeType</var></var></dt>

     <dd>

      <p class="para">The node type for the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/prefix"></a><dt id="xmlreader.props.prefix"><var class="varname"><var class="varname">prefix</var></var></dt>

     <dd>

      <p class="para">The prefix of the namespace associated with the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/value"></a><dt id="xmlreader.props.value"><var class="varname"><var class="varname">value</var></var></dt>

     <dd>

      <p class="para">The text value of the node</p>
     </dd>

    

    
     <a class="dashAnchor" name="//apple_ref/Property/xmlLang"></a><dt id="xmlreader.props.xmllang"><var class="varname"><var class="varname">xmlLang</var></var></dt>

     <dd>

      <p class="para">The xml:lang scope which the node resides</p>
     </dd>

    

   </dl>

  </div>

 
  
  <div class="section" id="xmlreader.constants">
   <h2 class="title">Predefined Constants</h2>
   <div class="section" id="xmlreader.constants.types">
    <h2 class="title">XMLReader Node Types</h2>
    <dl>


     
      <a class="dashAnchor" name="//apple_ref/Constant/NONE"></a><dt id="xmlreader.constants.none"><strong><code>XMLReader::NONE</code></strong></dt>

      <dd>

       <p class="para">No node type</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/ELEMENT"></a><dt id="xmlreader.constants.element"><strong><code>XMLReader::ELEMENT</code></strong></dt>

      <dd>

       <p class="para">Start element</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/ATTRIBUTE"></a><dt id="xmlreader.constants.attribute"><strong><code>XMLReader::ATTRIBUTE</code></strong></dt>

      <dd>

       <p class="para">Attribute node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/TEXT"></a><dt id="xmlreader.constants.text"><strong><code>XMLReader::TEXT</code></strong></dt>

      <dd>

       <p class="para">Text node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/CDATA"></a><dt id="xmlreader.constants.cdata"><strong><code>XMLReader::CDATA</code></strong></dt>

      <dd>

       <p class="para">CDATA node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/ENTITY%5FREF"></a><dt id="xmlreader.constants.entity-ref"><strong><code>XMLReader::ENTITY_REF</code></strong></dt>

      <dd>

       <p class="para">Entity Reference node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/ENTITY"></a><dt id="xmlreader.constants.entity"><strong><code>XMLReader::ENTITY</code></strong></dt>

      <dd>

       <p class="para">Entity Declaration node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/PI"></a><dt id="xmlreader.constants.pi"><strong><code>XMLReader::PI</code></strong></dt>

      <dd>

       <p class="para">Processing Instruction node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/COMMENT"></a><dt id="xmlreader.constants.comment"><strong><code>XMLReader::COMMENT</code></strong></dt>

      <dd>

       <p class="para">Comment node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/DOC"></a><dt id="xmlreader.constants.doc"><strong><code>XMLReader::DOC</code></strong></dt>

      <dd>

       <p class="para">Document node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/DOC%5FTYPE"></a><dt id="xmlreader.constants.doc-type"><strong><code>XMLReader::DOC_TYPE</code></strong></dt>

      <dd>

       <p class="para">Document Type node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/DOC%5FFRAGMENT"></a><dt id="xmlreader.constants.doc-fragment"><strong><code>XMLReader::DOC_FRAGMENT</code></strong></dt>

      <dd>

       <p class="para">Document Fragment node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/NOTATION"></a><dt id="xmlreader.constants.notation"><strong><code>XMLReader::NOTATION</code></strong></dt>

      <dd>

       <p class="para">Notation node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/WHITESPACE"></a><dt id="xmlreader.constants.whitespace"><strong><code>XMLReader::WHITESPACE</code></strong></dt>

      <dd>

       <p class="para">Whitespace node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/SIGNIFICANT%5FWHITESPACE"></a><dt id="xmlreader.constants.significant-whitespace"><strong><code>XMLReader::SIGNIFICANT_WHITESPACE</code></strong></dt>

      <dd>

       <p class="para">Significant Whitespace node</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/END%5FELEMENT"></a><dt id="xmlreader.constants.end-element"><strong><code>XMLReader::END_ELEMENT</code></strong></dt>

      <dd>

       <p class="para">End Element</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/END%5FENTITY"></a><dt id="xmlreader.constants.end-entity"><strong><code>XMLReader::END_ENTITY</code></strong></dt>

      <dd>

       <p class="para">End Entity</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/XML%5FDECLARATION"></a><dt id="xmlreader.constants.xml-declaration"><strong><code>XMLReader::XML_DECLARATION</code></strong></dt>

      <dd>

       <p class="para">XML Declaration node</p>
      </dd>

     

    </dl>

   </div>

   <div class="section" id="xmlreader.constants.options">
    <h2 class="title">XMLReader Parser Options</h2>

    <dl>


     
      <a class="dashAnchor" name="//apple_ref/Constant/LOADDTD"></a><dt id="xmlreader.constants.loaddtd"><strong><code>XMLReader::LOADDTD</code></strong></dt>

      <dd>

       <p class="para">Load DTD but do not validate</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/DEFAULTATTRS"></a><dt id="xmlreader.constants.defaultattrs"><strong><code>XMLReader::DEFAULTATTRS</code></strong></dt>

      <dd>

       <p class="para">Load DTD and default attributes but do not validate</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/VALIDATE"></a><dt id="xmlreader.constants.validate"><strong><code>XMLReader::VALIDATE</code></strong></dt>

      <dd>

       <p class="para">Load DTD and validate while parsing</p>
      </dd>

     

     
      <a class="dashAnchor" name="//apple_ref/Constant/SUBST%5FENTITIES"></a><dt id="xmlreader.constants.subst-entities"><strong><code>XMLReader::SUBST_ENTITIES</code></strong></dt>

      <dd>

       <p class="para">Substitute entities and expand references</p>
      </dd>

     

    </dl>

   </div>
  </div>

 </div>
 
 









































































































 







 







 

























 










 
<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="xmlreader.close.html">XMLReader::close</a> — Close the XMLReader input</li><li><a href="xmlreader.expand.html">XMLReader::expand</a> — Returns a copy of the current node as a DOM object</li><li><a href="xmlreader.getattribute.html">XMLReader::getAttribute</a> — Get the value of a named attribute</li><li><a href="xmlreader.getattributeno.html">XMLReader::getAttributeNo</a> — Get the value of an attribute by index</li><li><a href="xmlreader.getattributens.html">XMLReader::getAttributeNs</a> — Get the value of an attribute by localname and URI</li><li><a href="xmlreader.getparserproperty.html">XMLReader::getParserProperty</a> — Indicates if specified property has been set</li><li><a href="xmlreader.isvalid.html">XMLReader::isValid</a> — Indicates if the parsed document is valid</li><li><a href="xmlreader.lookupnamespace.html">XMLReader::lookupNamespace</a> — Lookup namespace for a prefix</li><li><a href="xmlreader.movetoattribute.html">XMLReader::moveToAttribute</a> — Move cursor to a named attribute</li><li><a href="xmlreader.movetoattributeno.html">XMLReader::moveToAttributeNo</a> — Move cursor to an attribute by index</li><li><a href="xmlreader.movetoattributens.html">XMLReader::moveToAttributeNs</a> — Move cursor to a named attribute</li><li><a href="xmlreader.movetoelement.html">XMLReader::moveToElement</a> — Position cursor on the parent Element of current Attribute</li><li><a href="xmlreader.movetofirstattribute.html">XMLReader::moveToFirstAttribute</a> — Position cursor on the first Attribute</li><li><a href="xmlreader.movetonextattribute.html">XMLReader::moveToNextAttribute</a> — Position cursor on the next Attribute</li><li><a href="xmlreader.next.html">XMLReader::next</a> — Move cursor to next node skipping all subtrees</li><li><a href="xmlreader.open.html">XMLReader::open</a> — Set the URI containing the XML to parse</li><li><a href="xmlreader.read.html">XMLReader::read</a> — Move to next node in document</li><li><a href="xmlreader.readinnerxml.html">XMLReader::readInnerXML</a> — Retrieve XML from current node</li><li><a href="xmlreader.readouterxml.html">XMLReader::readOuterXML</a> — Retrieve XML from current node, including it self</li><li><a href="xmlreader.readstring.html">XMLReader::readString</a> — Reads the contents of the current node as a string</li><li><a href="xmlreader.setparserproperty.html">XMLReader::setParserProperty</a> — Set parser options</li><li><a href="xmlreader.setrelaxngschema.html">XMLReader::setRelaxNGSchema</a> — Set the filename or URI for a RelaxNG Schema</li><li><a href="xmlreader.setrelaxngschemasource.html">XMLReader::setRelaxNGSchemaSource</a> — Set the data containing a RelaxNG Schema</li><li><a href="xmlreader.setschema.html">XMLReader::setSchema</a> — Validate document against XSD</li><li><a href="xmlreader.xml.html">XMLReader::XML</a> — Set the data containing the XML to parse</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="113381">  
  <a class="name">
  <strong class="user"><em>dkrnl at yandex dot ru</em></strong></a><div class="date" title="2013-10-04 04:10"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113381">
<div class="phpcode"><code><span class="html">
Wrapper XMLReader class, for simple SAX-reading huge xml:<br>https://github.com/dkrnl/SimpleXMLReader<br><br>Usage example: <a rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1.php</a><br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Simple XML Reader<br> *<br> * @license Public Domain<br> * @author Dmitry Pyatkov(aka dkrnl) &lt;dkrnl@yandex.ru&gt;<br> * @url <a rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader</a><br> */<br></span><span class="keyword">class </span><span class="default">SimpleXMLReader </span><span class="keyword">extends </span><span class="default">XMLReader<br></span><span class="keyword">{<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Callbacks<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @var array<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$callback </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Add node callback<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string&nbsp;&nbsp; $name<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; callback $callback<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; integer&nbsp; $nodeType<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLReader<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">registerCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$callback</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Remove node callback<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string&nbsp; $name<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; integer $nodeType<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLReader<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">unRegisterCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Unknow parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Run parser<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @return void<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">parse</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (empty(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Empty parser callback."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$continue </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">], </span><span class="default">$this</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Run XPath query on current node<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $path<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return array(SimpleXMLElement)<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandXpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to string<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandString</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">asXML</span><span class="keyword">();<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $className<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="default">$className </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, </span><span class="default">$className</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to DomDocument<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return DomDocument<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandDomDocument</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$document</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89853">  
  <a class="name">
  <strong class="user"><em>james dot ellis at example dot com</em></strong></a><div class="date" title="2009-03-25 03:16"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89853">
<div class="phpcode"><code><span class="html">
The "XML2Assoc" functions noted here should be used with caution... basically they are duplicating the functionality already present in SimpleXML. They may work but they won't scale.<br><br>Their are two main uses cases for parsing XML, each suited to either XMLReader or SimpleXML.<br><br>1. SimpleXML is an excellent tool for easy access to an XML document tree using native PHP data types. It starts to flounder with massive (&gt; 50M or so) XML documents, as it reads the entire document into memory before it can be processed. SimpleXML will just laugh at you then die when your server runs out of memory (or it will cause a load spike).<br><br>2. Aside from the reasoning behind massive XML documents, if you have to deal with massive XML documents, use XMLReader to process them. Don't try and gather an entire XML document into a PHP data structure using XMLReader and a PHP xml2assoc() function, you are reinventing the SimpleXML wheel.<br>When parsing massive XML documents using XMLReader, gather the data you need to perform an operation then perform it before skipping to the next node. Do not build massive data structures from a massive XML document, your server (and it's admins) will not like you.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111837">  
  <a class="name">
  <strong class="user"><em>kula_shakerz</em></strong></a><div class="date" title="2013-04-03 02:27"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111837">
<div class="phpcode"><code><span class="html">
Found this in the IXmlReader docs at msdn but it's also valid for XMLReader in PHP.<br><br>You should save the value of $isEmptyElement before processing attributes, or call moveToElement to make $isEmptyElement valid after processing attributes.<br><br>$isEmptyElement returns FALSE when XMLReader is positioned on an attribute node, even if attribute's parent element is empty.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100074">  
  <a class="name">
  <strong class="user"><em>jart (at) mail.ru</em></strong></a><div class="date" title="2010-09-23 06:59"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100074">
<div class="phpcode"><code><span class="html">
Guys, I hope this example will help<br>you can erase prints showing the process-<br>and it will be a piece of nice code.<br><br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">)<br>{ <br>&nbsp; &nbsp; print </span><span class="string">"&lt;ul&gt;"</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$tree </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; print(</span><span class="string">"I'm inside " </span><span class="keyword">. </span><span class="default">$name </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">"&lt;/ul&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$tree</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="string">"Adding " </span><span class="keyword">. </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attributes </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="string">"Adding attr " </span><span class="keyword">. </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">.</span><span class="string">" = " </span><span class="keyword">. </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value </span><span class="keyword">. </span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attributes</span><span class="keyword">[</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'attr'</span><span class="keyword">] = </span><span class="default">$attributes</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$childs </span><span class="keyword">= </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'childs'</span><span class="keyword">] = </span><span class="default">$childs</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="default">$node</span><span class="keyword">[</span><span class="string">'tag'</span><span class="keyword">] . </span><span class="string">" added &lt;br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tree</span><span class="keyword">[] = </span><span class="default">$node</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'text'</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tree</span><span class="keyword">[] = </span><span class="default">$node</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">"text added = " </span><span class="keyword">. </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'text'</span><span class="keyword">] . </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; print </span><span class="string">"returning " </span><span class="keyword">. </span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">) . </span><span class="string">" childs&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; print </span><span class="string">"&lt;/ul&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$tree</span><span class="keyword">; <br>}<br><br>echo </span><span class="string">"&lt;PRE&gt;"</span><span class="keyword">;<br><br></span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">(); <br></span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="string">'test.xml'</span><span class="keyword">); <br></span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="string">"root"</span><span class="keyword">); <br></span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$assoc</span><span class="keyword">);<br>echo </span><span class="string">"&lt;/PRE&gt;"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>It reads this xml:<br><br>&lt;test&gt;<br>&nbsp; &nbsp; &lt;hallo volume="loud"&gt; me &lt;br/&gt; lala &lt;/hallo&gt;<br>&nbsp; &nbsp; &lt;hallo&gt; me &lt;/hallo&gt;<br>&lt;/test&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81148">  
  <a class="name">
  <strong class="user"><em>itari</em></strong></a><div class="date" title="2008-02-15 08:30"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81148">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">,</span><span class="default">$seq</span><span class="keyword">,</span><span class="default">$path</span><span class="keyword">) {<br>global </span><span class="default">$oldpath</span><span class="keyword">;<br>&nbsp; &nbsp; if (!</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">())<br>&nbsp; &nbsp; &nbsp; return;<br>&nbsp; &nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">!= </span><span class="default">15</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; print </span><span class="string">'&lt;br/&gt;'</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">depth</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; print </span><span class="string">'-'</span><span class="keyword">.</span><span class="default">$seq</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; print </span><span class="string">'&nbsp; '</span><span class="keyword">.</span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.(</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">==</span><span class="default">3</span><span class="keyword">?</span><span class="string">'text() = '</span><span class="keyword">:</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; print </span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) { <br>&nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">' [hasAttributes: '</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) print </span><span class="string">'@'</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">.</span><span class="string">' = '</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">']'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oldpath</span><span class="keyword">=</span><span class="default">$path</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path</span><span class="keyword">.=</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$node</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; </span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">,</span><span class="default">$seq</span><span class="keyword">,</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; else </span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">,</span><span class="default">$seq</span><span class="keyword">,</span><span class="default">$oldpath</span><span class="keyword">); <br>}<br><br></span><span class="default">$source </span><span class="keyword">= </span><span class="string">"&lt;tag1&gt;this&lt;tag2 id='4' name='foo'&gt;is&lt;/tag2&gt;a&lt;tag2 id='5'&gt;common&lt;/tag2&gt;record&lt;/tag1&gt;"</span><span class="keyword">;<br></span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();<br></span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">XML</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">);<br>print </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">).</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br></span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Output:<br><br>&lt;tag1&gt;this&lt;tag2 id='4' name='foo'&gt;is&lt;/tag2&gt;a&lt;tag2 id='5'&gt;common&lt;/tag2&gt;record&lt;/tag1&gt;<br><br>0-0 /tag1<br>1-1 /tag1/text() = this<br>1-2 /tag1/tag2 [hasAttributes: @id = 4 @name = foo ]<br>2-3 /tag1/text() = is<br>1-4 /text() = a<br>1-5 /tag2 [hasAttributes: @id = 5 ]<br>2-6 /text() = common<br>1-7 /text() = record</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61929">  
  <a class="name">
  <strong class="user"><em>orion at ftf-hq dot dk</em></strong></a><div class="date" title="2006-02-15 04:50"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61929">
<div class="phpcode"><code><span class="html">
Some more documentation (i.e. examples) would be nice :-)<br><br>This is how I read some mysql parameters in an xml file:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $xml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="string">"config.xml"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">setParserProperty</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">); </span><span class="comment">// This seems a little unclear to me - but it worked :)<br><br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">"mysql_host"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$conf</span><span class="keyword">[</span><span class="string">"mysql_host"</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">"mysql_username"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$conf</span><span class="keyword">[</span><span class="string">"mysql_user"</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">"mysql_password"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$conf</span><span class="keyword">[</span><span class="string">"mysql_pass"</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">"mysql_database"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$conf</span><span class="keyword">[</span><span class="string">"mysql_db"</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>The XML file used:<br>&lt;?xml version='1.0'?&gt;<br>&lt;MySQL_INIT&gt;<br>&nbsp;&nbsp; &lt;mysql_host&gt;localhost&lt;/mysql_host&gt;<br>&nbsp;&nbsp; &lt;mysql_database&gt;db_database&lt;/mysql_database&gt;<br>&nbsp;&nbsp; &lt;mysql_username&gt;root&lt;/mysql_username&gt;<br>&nbsp;&nbsp; &lt;mysql_password&gt;password&lt;/mysql_password&gt;<br>&lt;/MySQL_INIT&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81852">  
  <a class="name">
  <strong class="user"><em>desk_ocean at msn dot com</em></strong></a><div class="date" title="2008-03-16 10:03"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81852">
<div class="phpcode"><code><span class="html">
make some modify from Sergey Aikinkulov's note
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(&amp;</span><span class="default">$xml</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">) break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT </span><span class="keyword">and !</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'atr'</span><span class="keyword">][</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'val'</span><span class="keyword">] = </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'atr'</span><span class="keyword">][</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">][</span><span class="string">'val'</span><span class="keyword">] = </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">++;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">) </span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">; 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$assoc</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>add else if($xml-&gt;isEmptyElement)
<br>may be some xml has emptyelement</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88420">  
  <a class="name">
  <strong class="user"><em>PxL</em></strong></a><div class="date" title="2009-01-23 03:36"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88420">
<div class="phpcode"><code><span class="html">
A basic parser<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= array();<br>&nbsp; &nbsp; if (!</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'|\&lt;\s*?(\w+).*?\&gt;(.*)\&lt;\/\s*\\1.*?\&gt;|s'</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) return </span><span class="default">$xml</span><span class="keyword">;<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; else </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]] = </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br><br>&nbsp; &nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110127">  
  <a class="name">
  <strong class="user"><em>casella dot email at google dot mail dot com</em></strong></a><div class="date" title="2012-09-22 03:59"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110127">
<div class="phpcode"><code><span class="html">
To verify that all nodes are read without error/warning you can use this code:<br><span class="default">&lt;?php <br>$endofxml </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br></span><span class="default">$xml_url </span><span class="keyword">= </span><span class="string">"example.xml"</span><span class="keyword">;<br></span><span class="default">$reader </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();<br>if(!</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$xml_url</span><span class="keyword">)){ <br>&nbsp; &nbsp; print </span><span class="string">"Error to open XML: </span><span class="default">$xml_url</span><span class="string">\n"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; while (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$firstnode </span><span class="keyword">= (!isset(</span><span class="default">$firstnode</span><span class="keyword">)) ? </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">: </span><span class="default">$firstnode</span><span class="keyword">;<br></span><span class="comment">/* <br>DO SOMETHING<br>*/<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">nodeType </span><span class="keyword">== </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT </span><span class="keyword">&amp;&amp; </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">== </span><span class="default">$firstnode</span><span class="keyword">) {&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$endofxml </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br>if(</span><span class="default">$endofxml</span><span class="keyword">) {<br>&nbsp; &nbsp; print </span><span class="string">"no error found"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; print </span><span class="string">"error found"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>This code is useful to trap $reader-&gt;read() error/warning.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108000">  
  <a class="name">
  <strong class="user"><em>lee8oi at gmail dot com</em></strong></a><div class="date" title="2012-03-21 01:54"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108000">
<div class="phpcode"><code><span class="html">
Sometimes you have an unusual URL that doesn't actually point to an xml file but still returns xml as output (Like the Battlefield Heroes generated syndication urls). Using get_file_contents(url) you can retrieve the xml data from these urls and pass it as a variable for processing as an XML String. <br><br>Unfortunately simpleXML or xml DOM cannot process all xml strings. Some have error boxes added to the end of them (such as Battlefield Heroes syndicated news). These boxes cause an end of file sort of error and closes out the script. XMLReader grabs data from these strings without error.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100347">  
  <a class="name">
  <strong class="user"><em>japos dot trash at googlemail dot com</em></strong></a><div class="date" title="2010-10-09 02:17"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100347">
<div class="phpcode"><code><span class="html">
Take care about how to use XMLReader::$isElementEmpty. I don't know if it is a bug or not, but $isElementEmpty is set for the current context and NOT just for the element. If you move your cursor to an attribute, $isElementEmpty will ALWAYS be false.<br><br><span class="default">&lt;?php<br> $xml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();<br> </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">XML</span><span class="keyword">(</span><span class="string">'&lt;tag attr="value" /&gt;'</span><span class="keyword">);<br> </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();<br> </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">);<br> </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">();<br> </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>will output<br><br>(bool) true<br>(bool) false<br><br>So be sure to store $isEmptyElement before moving the cursor.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88264">  
  <a class="name">
  <strong class="user"><em>boukeversteegh at gmail dot com</em></strong></a><div class="date" title="2009-01-18 02:06"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88264">
<div class="phpcode"><code><span class="html">
XML to ASSOCIATIVE ARRAY
<br>
<br>Improved algorithm based on Sergey Aikinkulov's. The problem was that it would overwrite nodes if they had the same tag name. Because of that &lt;a&gt;&lt;b/&gt;&lt;b/&gt;&lt;a&gt; would be read as if &lt;a&gt;&lt;b/&gt;&lt;a/&gt;. This algorithm handles it better and outputs an easy to understand array:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$tree </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br>&nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">())
<br>&nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">: return </span><span class="default">$tree</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= array(</span><span class="string">'tag' </span><span class="keyword">=&gt; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">, </span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">())
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node</span><span class="keyword">[</span><span class="string">'attributes'</span><span class="keyword">][</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tree</span><span class="keyword">[] = </span><span class="default">$node</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">CDATA</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tree </span><span class="keyword">.= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$tree</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>Usage:
<br>
<br>myxml.xml:
<br>------
<br>&lt;PERSON&gt;
<br>&nbsp; &nbsp; &lt;NAME&gt;John&lt;/NAME&gt;
<br>&nbsp; &nbsp; &lt;PHONE type="home"&gt;555-555-555&lt;/PHONE&gt;
<br>&lt;/PERSON&gt;
<br>----
<br>
<br>&lt;?
<br>&nbsp; &nbsp; $xml = new XMLReader();
<br>&nbsp; &nbsp; $xml-&gt;open('myxml.xml');
<br>&nbsp; &nbsp; $assoc = xml2assoc($xml);
<br>&nbsp; &nbsp; $xml-&gt;close();
<br>&nbsp; &nbsp; print_r($assoc);
<br>?&gt;
<br>
<br>Outputs:
<br>Array
<br>(
<br>&nbsp; &nbsp; [0] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tag] =&gt; PERSON
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [value] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tag] =&gt; NAME
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [value] =&gt; John
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tag] =&gt; PHONE
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [value] =&gt; 555-555-555
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [attributes] =&gt; Array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [type] =&gt; home
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; )
<br>
<br>)
<br>
<br>For reasons that have to do with recursion, it returns an array with the ROOT xml node as the first childNode, rather than to return only the ROOT node.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88070">  
  <a class="name">
  <strong class="user"><em>andrei_antal at yahoo dot com</em></strong></a><div class="date" title="2009-01-08 08:25"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88070">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="comment">//Pull certain elements 
<br> </span><span class="default">$reader </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();
<br>&nbsp; </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$xmlfile</span><span class="keyword">);
<br>while (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {
<br> switch (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">) {
<br>&nbsp;&nbsp; case (</span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">):
<br>
<br>if (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">== </span><span class="string">"Code"</span><span class="keyword">)
<br>&nbsp; &nbsp;&nbsp; {
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$code</span><span class="string">\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; break;
<br>&nbsp; &nbsp;&nbsp; }
<br>
<br> if (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">== </span><span class="string">"Name"</span><span class="keyword">)
<br>&nbsp; &nbsp;&nbsp; {
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$customername </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">value </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$name</span><span class="string">\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; break;
<br>&nbsp; &nbsp;&nbsp; }
<br>
<br> if (</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">name </span><span class="keyword">== </span><span class="string">"Camp"</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$camp </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$reader</span><span class="keyword">-&gt;</span><span class="default">getAttribute</span><span class="keyword">(</span><span class="string">"ID"</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"</span><span class="default">$camp</span><span class="string">\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; }
<br>&nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87288">  
  <a class="name">
  <strong class="user"><em>godseth at o2 dot pl</em></strong></a><div class="date" title="2008-11-28 02:34"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87288">
<div class="phpcode"><code><span class="html">
Thanks rein_baarsma33 AT hotmail DOT com for bugfixes. 
<br>
<br>This is my new child of XML parsing method&nbsp; based on my and yours modification. 
<br>
<br>XML2ASSOC Is a complete solution for parsing ordinary XML
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * XML2Assoc Class to creating 
<br> * PHP Assoc Array from XML File
<br> * 
<br> * @author godseth (AT) o2.pl &amp; rein_baarsma33 (AT) hotmail.com (Bugfixes in parseXml Method)
<br> * @uses XMLReader
<br> *
<br> */
<br>
<br></span><span class="keyword">class </span><span class="default">Xml2Assoc </span><span class="keyword">{
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Optimization Enabled / Disabled
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @var bool
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$bOptimize </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Method for loading XML Data from String
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param string $sXml
<br>&nbsp; &nbsp;&nbsp; * @param bool $bOptimize
<br>&nbsp; &nbsp;&nbsp; */
<br>
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">parseString</span><span class="keyword">( </span><span class="default">$sXml </span><span class="keyword">, </span><span class="default">$bOptimize </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oXml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this </span><span class="keyword">-&gt; </span><span class="default">bOptimize </span><span class="keyword">= (bool) </span><span class="default">$bOptimize</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; try {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Set String Containing XML data
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">XML</span><span class="keyword">(</span><span class="default">$sXml</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Parse Xml and return result
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXml</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; } catch (</span><span class="default">Exception $e</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Method for loading Xml Data from file
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param string $sXmlFilePath
<br>&nbsp; &nbsp;&nbsp; * @param bool $bOptimize
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">parseFile</span><span class="keyword">( </span><span class="default">$sXmlFilePath </span><span class="keyword">, </span><span class="default">$bOptimize </span><span class="keyword">= </span><span class="default">false </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oXml </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this </span><span class="keyword">-&gt; </span><span class="default">bOptimize </span><span class="keyword">= (bool) </span><span class="default">$bOptimize</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; try {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Open XML file
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">open</span><span class="keyword">(</span><span class="default">$sXmlFilePath</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// // Parse Xml and return result
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXml</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; } catch (</span><span class="default">Exception $e</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$e</span><span class="keyword">-&gt;</span><span class="default">getMessage</span><span class="keyword">(). </span><span class="string">' | Try open file: '</span><span class="keyword">.</span><span class="default">$sXmlFilePath</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * XML Parser
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param XMLReader $oXml
<br>&nbsp; &nbsp;&nbsp; * @return array
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected function </span><span class="default">parseXml</span><span class="keyword">( </span><span class="default">XMLReader $oXml </span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$iDc </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">:
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">bOptimize</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">optXml</span><span class="keyword">(</span><span class="default">$aAssocXML</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$aAssocXML</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">:
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!isset(</span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]))
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$temp </span><span class="keyword">as </span><span class="default">$sKey</span><span class="keyword">=&gt;</span><span class="default">$sValue</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][</span><span class="default">$sKey</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$temp</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mOldVar </span><span class="keyword">= </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = array(</span><span class="default">$mOldVar</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parseXML</span><span class="keyword">(</span><span class="default">$oXml</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mElement </span><span class="keyword">=&amp; </span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aAssocXML</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">]) - </span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mElement</span><span class="keyword">[</span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">CDATA</span><span class="keyword">:
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$aAssocXML</span><span class="keyword">[++</span><span class="default">$iDc</span><span class="keyword">] = </span><span class="default">$oXml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$aAssocXML</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Method to optimize assoc tree.
<br>&nbsp; &nbsp;&nbsp; * ( Deleting 0 index when element
<br>&nbsp; &nbsp;&nbsp; *&nbsp; have one attribute / value )
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param array $mData
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">optXml</span><span class="keyword">(&amp;</span><span class="default">$mData</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mData</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$mData</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$mData</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mData </span><span class="keyword">= </span><span class="default">$mData</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$mData</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$mData </span><span class="keyword">as &amp;</span><span class="default">$aSub</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">optXml</span><span class="keyword">(</span><span class="default">$aSub</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$mData </span><span class="keyword">as &amp;</span><span class="default">$aSub</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">optXml</span><span class="keyword">(</span><span class="default">$aSub</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>}
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>[EDIT BY danbrown AT php DOT net:&nbsp; Fixes were also provided by "Alex" and (qdog AT qview DOT org) in user notes on this page (since removed).]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83929">  
  <a class="name">
  <strong class="user"><em>Sergey Aikinkulov</em></strong></a><div class="date" title="2008-06-19 03:51"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83929">
<div class="phpcode"><code><span class="html">
Next version xml2assoc with some improve fixes:<br> - no doubled data<br> - no buffer arrays<br><br><span class="default">&lt;?php<br></span><span class="comment">/*<br>&nbsp; &nbsp; Read XML structure to associative array<br>&nbsp; &nbsp; --<br>&nbsp; &nbsp; Using:<br>&nbsp; &nbsp; $xml = new XMLReader();<br>&nbsp; &nbsp; $xml-&gt;open([XML file]);<br>&nbsp; &nbsp; $assoc = xml2assoc($xml);<br>&nbsp; &nbsp; $xml-&gt;close();<br>*/<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$assoc </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()){<br>&nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">: return </span><span class="default">$assoc</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][] = array(</span><span class="string">'value' </span><span class="keyword">=&gt; </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$el </span><span class="keyword">=&amp; </span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">][</span><span class="default">count</span><span class="keyword">(</span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">]) - </span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">()) </span><span class="default">$el</span><span class="keyword">[</span><span class="string">'attributes'</span><span class="keyword">][</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">CDATA</span><span class="keyword">: </span><span class="default">$assoc </span><span class="keyword">.= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">$assoc</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110165">  
  <a class="name">
  <strong class="user"><em>Mike De Smet</em></strong></a><div class="date" title="2012-09-25 04:35"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110165">
<div class="phpcode"><code><span class="html">
For those of you getting xml files that do not contain duplicate elements (in the same element), the following converter converts to arrays with key/value mapping (thus overwriting duplicate elements!):
<br>
<br>Note this is untested with attributes although I built in support.
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, array &amp;</span><span class="default">$target </span><span class="keyword">= array()) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">END_ELEMENT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$target</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes </span><span class="keyword">? array() : </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">isEmptyElement</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">xml2assoc</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">hasAttributes</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">moveToNextAttribute</span><span class="keyword">())
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$target</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">][</span><span class="string">'@'</span><span class="keyword">.</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">] = </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">TEXT</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">XMLReader</span><span class="keyword">::</span><span class="default">CDATA</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$target </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$target</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93842">  
  <a class="name">
  <strong class="user"><em>jnettles at inccrra dot org</em></strong></a><div class="date" title="2009-10-02 09:51"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93842">
<div class="phpcode"><code><span class="html">
Just in case someone is confused, if you're wanting to simply pass a string of XML instead of an entire file, you would do this.<br><br><span class="default">&lt;?php<br>$foo </span><span class="keyword">= new </span><span class="default">XMLReader</span><span class="keyword">();<br></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">xml</span><span class="keyword">(</span><span class="default">$STRING</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>.... where $STRING holds your XML. You cannot pass it like $foo = $STRING or $foo-&gt;xml = $STRING.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/class.xmlreader.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:52:56 GMT -->


</body></html>