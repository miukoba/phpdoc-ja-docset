<html><!-- Mirrored from php.net/manual/en/function.xml-set-object.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:04:36 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>xml_set_object</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.xml-set-object.html">
 <link rel="shorturl" href="http://php.net/xml-set-object">
 <link rel="alternate" href="http://php.net/xml-set-object" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.xml.html">
 <link rel="prev" href="function.xml-set-notation-decl-handler.html">
 <link rel="next" href="function.xml-set-processing-instruction-handler.html">

 <link rel="alternate" href="function.xml-set-object.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.xml-set-object.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.xml-set-object.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.xml-set-object.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.xml-set-object.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.xml-set-object.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.xml-set-object.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.xml-set-object.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.xml-set-object.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.xml-set-object.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.xml-set-object.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xml.html">XML Parser</a></li>      <li><a href="ref.xml.html">XML Parser Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.xml-set-object" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">xml_set_object</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">xml_set_object</span> â€” <span class="dc-title">Use XML Parser within an object</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.xml-set-object-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>xml_set_object</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$parser</code></span>
   , <span class="methodparam"><span class="type">object</span> <code class="parameter reference">&amp;$object</code></span>
   )</div>

  <p class="para rdfs-comment">
   This function allows to use <code class="parameter">parser</code> inside
   <code class="parameter">object</code>. All callback functions could be set with
   <span class="function"><a href="function.xml-set-element-handler.html" class="function">xml_set_element_handler()</a></span> etc and assumed to be
   methods of <code class="parameter">object</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.xml-set-object-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">parser</code></dt>

     <dd>

      <p class="para">
       A reference to the XML parser to use inside the object.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">object</code></dt>

     <dd>

      <p class="para">
       The object where to use the XML parser.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.xml-set-object-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.xml-set-object-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5621">
    <p><strong>Example #1 <span class="function"><strong>xml_set_object()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">xml&nbsp;&nbsp;</span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$parser</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">xml</span><span style="color: #007700">()&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parser&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xml_parser_create</span><span style="color: #007700">();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_element_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tag_open"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"tag_close"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_set_character_data_handler</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"cdata"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$data</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">xml_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">tag_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tag</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tag</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attributes</span><span style="color: #007700">);&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">cdata</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cdata</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$cdata</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">tag_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tag</span><span style="color: #007700">)&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$parser</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$tag</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>}&nbsp;</span><span style="color: #FF8000">//&nbsp;end&nbsp;of&nbsp;class&nbsp;xml<br><br></span><span style="color: #0000BB">$xml_parser&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">xml</span><span style="color: #007700">();<br></span><span style="color: #0000BB">$xml_parser</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"&lt;A&nbsp;ID='hallo'&gt;PHP&lt;/A&gt;"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="58999">  
  <a class="name">
  <strong class="user"><em>wake dot shinigami at gmail dot com</em></strong></a><div class="date" title="2005-11-23 08:28"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58999">
<div class="phpcode"><code><span class="html">
I finally managed to get xml_set_object() to work, after much documentation searching.&nbsp; As the solution I found has been hinted at, the focus has been wrong.<br><br>There have been many problems getting class contained XML parsers to make changes to the members of an instance.&nbsp; This is because, from what I'm guessing, the functions are using a either a new annonymous instance of the class or an uninstanced version of the class.<br><br>What we want to make sure it does it that the parser is accessing its handlers as member methods of a particular instance of a class.&nbsp; This can be done using the array method for passing a callback, setting the object as a reference to this instance.&nbsp; This way, you know that the parser is going to call the function properly.<br><br>Ex:<br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Parser </span><span class="keyword">{<br><br> private </span><span class="default">$parser</span><span class="keyword">;<br> private </span><span class="default">$data</span><span class="keyword">;<br><br> public function </span><span class="default">__construct</span><span class="keyword">() {<br>&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br>&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br> }<br><br> private function </span><span class="default">ParseElementStart</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">, </span><span class="default">$attrs</span><span class="keyword">) {<br>&nbsp; </span><span class="comment">// Code<br> </span><span class="keyword">}<br> private function </span><span class="default">ParseElementEnd</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">) {<br>&nbsp; </span><span class="comment">// Code<br> </span><span class="keyword">}<br><br> public function </span><span class="default">Parse</span><span class="keyword">(</span><span class="default">$XMLdata</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser </span><span class="keyword">= </span><span class="default">xml_parser_create</span><span class="keyword">();<br>&nbsp; </span><span class="default">xml_set_object</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">);<br>&nbsp; </span><span class="default">xml_set_element_handler</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(&amp;</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'ParseElementStart'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(&amp;</span><span class="default">$this</span><span class="keyword">, </span><span class="string">'ParseElementEnd'</span><span class="keyword">));<br>&nbsp; </span><span class="default">xml_parse</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser</span><span class="keyword">, </span><span class="default">$XMLdata</span><span class="keyword">);<br>&nbsp; </span><span class="default">xml_parser_free</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">parser</span><span class="keyword">);<br> }<br>}<br></span><span class="default">?&gt;<br></span><br>With this, when you call the Parse method, the data in that instance can be modified.&nbsp; I'm not sure if xml_set_object becomes unneccissary when using the array callbacks, but I leave it in just to make sure that the xml_parse function knows it's in the object.<br><br>As above, I'd recommend for memory sake, that the XML parser be created, used, and freed all in the same function, to ensure that everything is cleaned up correctly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46601">  
  <a class="name">
  <strong class="user"><em>bettmenn at gmx dot de</em></strong></a><div class="date" title="2004-10-16 02:03"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46601">
<div class="phpcode"><code><span class="html">
Adding to 'lmfe at mega dot ist dot utl dot pt' contribution below, I have to say that this behaviour is very usual for PHP if MemberVars of an Object arent initialized from the constructor.<br>What worked best for me so far was something like this:<br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{<br>&nbsp; var </span><span class="default">$bar<br>&nbsp; </span><span class="comment">// the constructor<br>&nbsp; </span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">() {<br>&nbsp; &nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">);&nbsp; </span><span class="comment">// with every instanciation, the variable is cleared for the object<br>&nbsp; </span><span class="keyword">}<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46107">  
  <a class="name">
  <strong class="user"><em>lmfe at mega dot ist dot utl dot pt</em></strong></a><div class="date" title="2004-09-29 10:51"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46107">
<div class="phpcode"><code><span class="html">
Using PHP 4.3.0, I got this strange behaviour:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">xml&nbsp; </span><span class="keyword">{<br><br>&nbsp; &nbsp;&nbsp; </span><span class="comment">/* (as specified in the documentation above) */<br><br></span><span class="keyword">} </span><span class="comment">// end of class xml<br><br>/* This code works */<br></span><span class="default">$xml_parser </span><span class="keyword">= new </span><span class="default">xml</span><span class="keyword">();<br></span><span class="default">$xml_parser</span><span class="keyword">-&gt;</span><span class="default">parse</span><span class="keyword">(</span><span class="string">"&lt;A ID='hallo'&gt;PHP&lt;/A&gt;"</span><span class="keyword">);<br><br></span><span class="comment">/* This code works */<br></span><span class="default">$xml_parser2 </span><span class="keyword">= new </span><span class="default">xml</span><span class="keyword">();<br></span><span class="default">$xml_parser2</span><span class="keyword">-&gt;</span><span class="default">parse</span><span class="keyword">(</span><span class="string">"&lt;A ID='hallo2'&gt;PHP2&lt;/A&gt;"</span><span class="keyword">);<br><br></span><span class="comment">/* This code DON'T work */<br></span><span class="default">$xml_parser </span><span class="keyword">= new </span><span class="default">xml</span><span class="keyword">();<br></span><span class="default">$xml_parser</span><span class="keyword">-&gt;</span><span class="default">parse</span><span class="keyword">(</span><span class="string">"&lt;A ID='hallo3'&gt;PHP3&lt;/A&gt;"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>In the third block of code, php complains it can't find the handlers it needs.<br>It seems this problem only happens if the variable is used more than once.<br>Calling xml_parser_free doesn't help</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44737">  
  <a class="name">
  <strong class="user"><em>hwheinzen at t-online dot de</em></strong></a><div class="date" title="2004-08-14 03:38"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44737">
<div class="phpcode"><code><span class="html">
(Adding to zitan's note)<br>It seems easy enough to provide output functions for callback handler classes too.<br><br>Example:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">CallBack </span><span class="keyword">{<br>&nbsp; &nbsp; var </span><span class="default">$name </span><span class="keyword">= </span><span class="string">'Callback'</span><span class="keyword">;<br>&nbsp; &nbsp; var </span><span class="default">$info </span><span class="keyword">= </span><span class="string">'Information!'</span><span class="keyword">;<br>&nbsp; &nbsp; function </span><span class="default">toString</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">.</span><span class="string">': '</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">info</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br>class </span><span class="default">Main </span><span class="keyword">{<br>&nbsp; &nbsp; var </span><span class="default">$name </span><span class="keyword">= </span><span class="string">'Main'</span><span class="keyword">;<br>&nbsp; &nbsp; var </span><span class="default">$callBackObject</span><span class="keyword">;<br>&nbsp; &nbsp; function </span><span class="default">setCallBack</span><span class="keyword">(&amp;</span><span class="default">$cBIn</span><span class="keyword">) { </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callBackObject </span><span class="keyword">= </span><span class="default">$cBIn</span><span class="keyword">; }<br>&nbsp; &nbsp; function </span><span class="default">toString</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">.</span><span class="string">': '</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callBackObject</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$cb </span><span class="keyword">= &amp; new </span><span class="default">CallBack</span><span class="keyword">;<br></span><span class="default">$m </span><span class="keyword">= &amp; new </span><span class="default">Main</span><span class="keyword">;<br></span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">setCallBack</span><span class="keyword">(&amp;</span><span class="default">$cb</span><span class="keyword">);<br>echo </span><span class="default">$cb</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">();<br>echo </span><span class="default">$m</span><span class="keyword">-&gt;</span><span class="default">toString</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>So, after collecting information during the parse operation within the callback handler class, e.g. in tag_close(), retrieving them is possible.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35465">  
  <a class="name">
  <strong class="user"><em>zitan at mediasculpt dot net</em></strong></a><div class="date" title="2003-09-01 09:05"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom35465">
<div class="phpcode"><code><span class="html">
Just a note about creating abstract "call back handlers" as mentioned in some of the other notes.&nbsp; In this case I recommend extending the base XML class and overwritting the handler methods.&nbsp; The reason I wanted to do this, is that if you have a separate callback method class it causes problems, for example if you want to collect information out of the XML file and store it in an array.&nbsp; You can get around it with global variables, but I prefer to use them only when required ;)<br><br>Example:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">xml_output </span><span class="keyword">extends </span><span class="default">xml</span><span class="keyword">{<br><br>&nbsp; var </span><span class="default">$output </span><span class="keyword">= array();<br><br>&nbsp;&nbsp; function </span><span class="default">xml_output</span><span class="keyword">(){<br>&nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xml</span><span class="keyword">();<br>&nbsp;&nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">//overwrite base methods<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">tag_open</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">, </span><span class="default">$tag</span><span class="keyword">, </span><span class="default">$attributes</span><span class="keyword">)<br>&nbsp; &nbsp; { <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">, </span><span class="string">"&lt;</span><span class="default">$tag</span><span class="string">, attributes&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">cdata</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">, </span><span class="default">$cdata</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">, </span><span class="string">"</span><span class="default">$cdata</span><span class="string">"</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">tag_close</span><span class="keyword">(</span><span class="default">$parser</span><span class="keyword">, </span><span class="default">$tag</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="keyword">, </span><span class="string">"&lt;/</span><span class="default">$tag</span><span class="string">&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>}<br><br></span><span class="default">$xml_parser </span><span class="keyword">= &amp; new </span><span class="default">xml_output</span><span class="keyword">();<br></span><span class="default">$xml_parser</span><span class="keyword">-&gt;</span><span class="default">parse</span><span class="keyword">(</span><span class="string">"&lt;A ID='hallo'&gt;PHP&lt;/A&gt;"</span><span class="keyword">);<br>echo(</span><span class="string">"</span><span class="default">$xml_parser</span><span class="keyword">-&gt;</span><span class="default">output</span><span class="string">"</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="26776">  
  <a class="name">
  <strong class="user"><em>sbeam at syxyz dot net</em></strong></a><div class="date" title="2002-11-12 09:34"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom26776">
<div class="phpcode"><code><span class="html">
passing the object as a call-time ref (&amp;$this) as in the example will create a warning in php 4.1+. Pass xml_set_object($xp,$this); instead. This does not seem to break anything - but I dont know for sure.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24037">  
  <a class="name">
  <strong class="user"><em>chiefgeek at ecodedesign.com</em></strong></a><div class="date" title="2002-08-04 10:37"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom24037">
<div class="phpcode"><code><span class="html">
Just adding a little note about my above written example.&nbsp; It needs some improvements.<br><br>Because PHP passes by VALUE by default, when you pass an array like this:<br>array($callback_handler, 'handler_method')<br>PHP makes a copy of the callback_handler object and uses the handler_method in the copy.<br><br>This is not an ideal situation for many reasons...which I will not get into here...but you should have an idea by now.<br><br>The best way to fix this is to change a few things. In the function declaration change the parameter from $callback_handler to &amp;$callback_handler. So now your declaration should look like this<br><br>function set_callback_handler(&amp;$callback_handler)<br>{<br>&nbsp; ...<br>}<br><br>Now each time you reference $callback_handler change it to &amp;$callback_handler.&nbsp; For example:<br><br>xml_set_element_handler(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;xml_parser,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(&amp;$callback_handler, 'start_element'),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(&amp;$callback_handler, 'close_Element' ));<br><br>This ensures that PHP will always use the same object.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24011">  
  <a class="name">
  <strong class="user"><em>chiefgeek at ecodedesign.com</em></strong></a><div class="date" title="2002-08-03 08:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom24011">
<div class="phpcode"><code><span class="html">
xml_set_object is great, if you want to hard code your start_element, end_element, etc functions within your xml class.<br><br>But what if you want to increase the modularity of your application?<br><br>Solution, create one generic XMLParser class that handles everything *except* the callback funtions.&nbsp; Then create an abstract XMLCallbackHandler class which you can extend to provide any customization you want.<br><br>So how do you tell the php's xml_parser that you want to use this other class to handle the callback functions.<br><br>xml_set_object?&nbsp; This only works if the functions are *within* the object you called this method from.<br><br>The solution lies in the xml_set_element_handler() function.<br>Take a look at this sample source...<br><br>class XMLParser<br>{<br><br>&nbsp; ...<br><br>&nbsp; function set_callback_handler($callback_handler)<br>&nbsp; {<br>&nbsp; &nbsp; // Assign the startElement endElement functions<br>&nbsp; &nbsp; xml_set_element_handler(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;xml_parser,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array($callback_handler, 'start_element'),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array($callback_handler, 'close_Element' ));<br><br>&nbsp; &nbsp; /* By passing an array with this ($object, 'function_name') structure<br>&nbsp; &nbsp; &nbsp;&nbsp; to the 2nd and 3rd parameters.&nbsp; We are able to tell the parser to<br>&nbsp; &nbsp; &nbsp;&nbsp; look in another object for these callback functions.<br>&nbsp; &nbsp; */<br><br>&nbsp; &nbsp; // Assign the character data function<br>&nbsp; &nbsp; xml_set_character_data_handler(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;xml_parser,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array($callback_handler, 'character_data'));<br>&nbsp; &nbsp; }<br>}<br><br>class myCallBackHandler<br>{<br>&nbsp; function start_element(...)<br>&nbsp; {<br>&nbsp; &nbsp; //code goes here<br>&nbsp; }<br><br>&nbsp; function end_element(...)<br>&nbsp; {<br>&nbsp; &nbsp; //code goes here<br>&nbsp; }<br><br>&nbsp; function character_data(...)<br>&nbsp; {<br>&nbsp; &nbsp; //code goes here<br>&nbsp; }<br>}<br><br>Now all thats left to do is use these classes..<br><br>$parser = new XMLParser();<br>$parser-&gt;set_callback_handler(new myCallbackHandler());</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20683">  
  <a class="name">
  <strong class="user"><em>dfoesch at cs dot nmsu dot edu</em></strong></a><div class="date" title="2002-04-12 05:38"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20683">
<div class="phpcode"><code><span class="html">
English explaination of why you do: $xml = &amp; new xml();<br><br>Ok, when PHP executes "new xml()" it creates an anonymous variable (one that you can't reference with any name) which it then runs the constructor function on.&nbsp; Ok, now once that's done, it then assigns by VALUE in the example above.&nbsp; This means that that lovely pointer to your parser is pointing to the anonymous instance of your class, and not the used instance of your class... thus making a "shadow" of all your variables, where assignments inside the parser access different variables than outside the parser.&nbsp; What PHP _SHOULD_ be doing (similar to C++) is have this statement execute such that the assignment is done by REFERENCE, so that you assign the new name to the class that actually got constructed, and not just a copy of the class that you constructed.<br><br>If they did it right, this code wouldn't be broken.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19064">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-02-14 11:10"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19064">
<div class="phpcode"><code><span class="html">
Call-time pass-by-reference has been deprecated, so the example is buggy as was already mentionned. However since 4.04 (I think) "new" can return objects by reference. So the clean way to have both the parser initialised in the constructor, and to save the result in your object is to do <br><br>$xml_parser = &amp; new xml();<br><br>see <a rel="nofollow" target="_blank">http://www.php.net/manual/en/language.oop.newref.php</a><br><br>Ivan</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15075">  
  <a class="name">
  <strong class="user"><em>pete dot nelson at serverSXPYAZMsolved dot com</em></strong></a><div class="date" title="2001-08-27 10:15"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom15075">
<div class="phpcode"><code><span class="html">
&lt;p&gt;in reply to jon9mm's question, I have found the same problem (function 'startElement' does not exist).&nbsp; I finally found the way around this, by re-reading this doc for xml_set_object.&nbsp; You HAVE to use the xml_set_object($this-&gt;parser, &amp;$this) within your parser function.&lt;/p&gt; &lt;p&gt;When that function is called, your object temporarily becomes the parser object and shares scope (so it can see 'startElement', etc).&nbsp;&nbsp; Once that function is done, the xml_set_object(...) call goes out of scope, and your object is no longer bound to the parser.&nbsp; So the simplist solution is to call xml_set_object(...), do any parsing, and then call xml_parser_free(...) all within the same function.&lt;/p&gt;
<br>&lt;p&gt;And remember, don't call xml_set_object(...) in your object's constructor - your object will be forever bound to the parser object and you'll loose all access to your object's member functions.&lt;/p&gt;
<br>&lt;p&gt;This is all explained in the examples above, but it took me reading it a couple of times to grok how it all works.&lt;/p&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12893">  
  <a class="name">
  <strong class="user"><em>nick at category4 dot com</em></strong></a><div class="date" title="2001-05-14 01:45"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom12893">
<div class="phpcode"><code><span class="html">
If you're using the XML parser within an object, be careful not to accidentally call any methods that don't exist within the object. Instead of complaining that the missing method doesn't exist, PHP will say it's not able to find the handler routines, even if you've indicated them correctly. (PHP version 4.0.5 on FreeBSD).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="10006">  
  <a class="name">
  <strong class="user"><em>williams at cse dot unl dot edu</em></strong></a><div class="date" title="2000-12-06 12:42"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom10006">
<div class="phpcode"><code><span class="html">
If xml_set_object is not called in the constructor of an object, the values that the parser modifies will be saved. Else, the values do not seem to be saved as stated by "i_sofer" above.
<br>--- Start Example Code ---
<br>class foo {
<br>var xmlparser;
<br>function foo() { \\the constructor
<br>$this-&gt;xmlparser=xmlparser_create();
<br>}
<br>function parse() {
<br>xml_set_object($this-&gt;xmlparser,&amp;$this);
<br>\\also include data handler
<br>\\and element handlers here
<br>}
<br>}
<br>--- End Example Code ---</span>
</code></div>
  </div>
 </div>
  <div class="note" id="9678">  
  <a class="name">
  <strong class="user"><em>i_sofer at yahoo dot com</em></strong></a><div class="date" title="2000-11-18 04:15"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom9678">
<div class="phpcode"><code><span class="html">
Using xml parser in objects seem to have a problem that values modified(even of the object itself) get lost as soon as parsing ends...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="7916">  
  <a class="name">
  <strong class="user"><em>malcontent at msgto dot com</em></strong></a><div class="date" title="2000-08-20 12:11"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom7916">
<div class="phpcode"><code><span class="html">
The example will generate a warning unless allow_call_time_pass_reference is set to true in your INI file. It also will not accept a call by value.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="5162">  
  <a class="name">
  <strong class="user"><em>robert at webmotion dot com</em></strong></a><div class="date" title="2000-04-18 10:58"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom5162">
<div class="phpcode"><code><span class="html">
While true that there is no automatic destructor for PHP class objects, it is quite simple to create a method called destroy and perform the destruction manually. In the example above it may not be necessary to free the xml parser immediately... it would appear from the example that the object is re-useable.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.xml-set-object.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:04:37 GMT -->


</body></html>