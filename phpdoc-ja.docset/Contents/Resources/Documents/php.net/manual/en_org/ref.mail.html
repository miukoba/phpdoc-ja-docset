<html><!-- Mirrored from php.net/manual/en/ref.mail.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:48:00 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Mail Functions</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.mail.html">
 <link rel="shorturl" href="http://php.net/mail">
 <link rel="alternate" href="http://php.net/mail" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.mail.html">
 <link rel="prev" href="mail.constants.html">
 <link rel="next" href="function.ezmlm-hash.html">

 <link rel="alternate" href="ref.mail.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/ref.mail.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/ref.mail.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/ref.mail.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/ref.mail.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/ref.mail.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/ref.mail.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/ref.mail.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/ref.mail.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/ref.mail.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/ref.mail.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.mail.html">Mail Related Extensions</a></li>      <li><a href="book.mail.html">Mail</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="ref.mail" class="reference">
  <h1 class="title">Mail Functions</h1>

















 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.ezmlm-hash.html">ezmlm_hash</a> — Calculate the hash value needed by EZMLM</li><li><a href="function.mail.html">mail</a> — Send mail</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="77499">  
  <a class="name">
  <strong class="user"><em>webmaster at weethet dot nl</em></strong></a><div class="date" title="2007-08-31 07:35"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77499">
<div class="phpcode"><code><span class="html">
As mentioned earlier, for Windows users there is a fake sendmail option. A bit more detailed description how to do this is:<br><br>If you have a test server in use running Windows and some kind of WAMP combo (XXAMP, WAMP Server, etc) then you'll notice that the PHP sendmail command (mail()) does not work. Windows simply does not provide the sendmail statement ...<br><br>There is a simple trick to get this to work though;<br><br>1) Download (or use the attached file) sendmail.zip from <a rel="nofollow" target="_blank">http://glob.com.au/sendmail/</a><br><br>2) Unzip this in a folder on your c: drive (preferably use a simple path, for example c:\wamp\sendmail -- long filenames could cause problems)<br><br>3) Edit your PHP.INI file (note: WAMP users should access their php.ini file from the WAMP menu). Go to the [mail function] section and modify it as such:<br><br>[mail function]<br>; For Win32 only.<br>;SMTP =<br><br>; For Win32 only.<br>;sendmail_from =<br><br>; For Unix only.&nbsp; You may supply arguments as well (default: "sendmail -t -i").<br>sendmail_path = "C:\wamp\sendmail\sendmail.exe -t"<br><br>; Force the addition of the specified parameters to be passed as extra parameters<br>; to the sendmail binary. These parameters will always replace the value of<br>; the 5th parameter to mail(), even in safe mode.<br>;mail.force_extra_paramaters =<br><br>.. and save the changes.<br><br>4) Open the sendmail.ini and modify the settings to:<br><br>[sendmail]<br><br>; you must change mail.mydomain.com to your smtp server,<br>; or to IIS's "pickup" directory.&nbsp; (generally C:\Inetpub\mailroot\Pickup)<br>; emails delivered via IIS's pickup directory cause sendmail to<br>; run quicker, but you won't get error messages back to the calling<br>; application.<br><br>smtp_server=mail.yourdomain.com<br><br>; smtp port (normally 25)<br><br>smtp_port=25<br><br>; the default domain for this server will be read from the registry<br>; this will be appended to email addresses when one isn't provided<br>; if you want to override the value in the registry, uncomment and modify<br><br>default_domain=yourdomain.com<br><br>; log smtp errors to error.log (defaults to same directory as sendmail.exe)<br>; uncomment to enable logging<br>; error_logfile=sendmail_error.log<br><br>; create debug log as debug.log (defaults to same directory as sendmail.exe)<br>; uncomment to enable debugging<br>; debug_logfile=sendmail_debug.log<br><br>; if your smtp server requires authentication, modify the following two lines<br><br>;auth_username=<br>;auth_password=<br><br>; if your smtp server uses pop3 before smtp authentication, modify the<br>; following three lines<br><br>pop3_server=mail.yourdomain.com<br>pop3_username=you@yourdomain.com<br>pop3_password=mysecretpassword<br><br>; to force the sender to always be the following email address, uncomment and<br>; populate with a valid email address.&nbsp; this will only affect the "MAIL FROM"<br>; command, it won't modify the "From: " header of the message content<br><br>force_sender=you@yourdomain.com<br><br>; sendmail will use your hostname and your default_domain in the ehlo/helo<br>; smtp greeting.&nbsp; you can manually set the ehlo/helo name if required<br><br>hostname=<br><br>The optional error and debug logging is recommended when trying this the first time, so you have a clue what goes wrong in case it doesn't work.<br>Force_sender is also optional, but recommended to avoid confusion on the server end.<br>Obviously mail.yourdomain.com, you@yourdomain.com, and mysecretpassword should be the relevant info for your SMTP server.<br>Now restart the WAMP services (mainly Apache so PHP re-reads it's config).<br><br>Now you're good to go and use the PHP mail() statement as if you're a Unix user ...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61644">  
  <a class="name">
  <strong class="user"><em>jcwebb at dicoe dot com</em></strong></a><div class="date" title="2006-02-08 02:16"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61644">
<div class="phpcode"><code><span class="html">
Corrupted Attachments ???
<br>I spent many hours with corrupted attachments (of all types of files) - The answer: a blank line is needed after $msg.=$file \r\n \r\n [incredible but true].
<br>Heres some useful code for sending an attachment, and display html OR text depending on the users email-reader.
<br>
<br>i work with many different systems, so...
<br>
<br><span class="default">&lt;?php </span><span class="comment"># Is the OS Windows or Mac or Linux
<br></span><span class="keyword">if (</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">PHP_OS</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)==</span><span class="string">'WIN'</span><span class="keyword">)) {
<br>&nbsp; </span><span class="default">$eol</span><span class="keyword">=</span><span class="string">"\r\n"</span><span class="keyword">;
<br>} elseif (</span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">PHP_OS</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)==</span><span class="string">'MAC'</span><span class="keyword">)) {
<br>&nbsp; </span><span class="default">$eol</span><span class="keyword">=</span><span class="string">"\r"</span><span class="keyword">; 
<br>} else {
<br>&nbsp; </span><span class="default">$eol</span><span class="keyword">=</span><span class="string">"\n"</span><span class="keyword">; 
<br>} </span><span class="default">?&gt;
<br></span>
<br><span class="default">&lt;?php
<br></span><span class="comment"># File for Attachment
<br></span><span class="default">$f_name</span><span class="keyword">=</span><span class="string">"../../letters/"</span><span class="keyword">.</span><span class="default">$letter</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// use relative path OR ELSE big headaches. $letter is my file for attaching.
<br></span><span class="default">$handle</span><span class="keyword">=</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$f_name</span><span class="keyword">, </span><span class="string">'rb'</span><span class="keyword">);
<br></span><span class="default">$f_contents</span><span class="keyword">=</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$f_name</span><span class="keyword">));
<br></span><span class="default">$f_contents</span><span class="keyword">=</span><span class="default">chunk_split</span><span class="keyword">(</span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$f_contents</span><span class="keyword">));&nbsp; &nbsp; </span><span class="comment">//Encode The Data For Transition using base64_encode();
<br></span><span class="default">$f_type</span><span class="keyword">=</span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$f_name</span><span class="keyword">);
<br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);
<br></span><span class="comment"># To Email Address
<br></span><span class="default">$emailaddress</span><span class="keyword">=</span><span class="string">"user@example.com"</span><span class="keyword">;
<br></span><span class="comment"># Message Subject
<br></span><span class="default">$emailsubject</span><span class="keyword">=</span><span class="string">"Heres An Email with a PDF"</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y/m/d H:i:s"</span><span class="keyword">);
<br></span><span class="comment"># Message Body
<br></span><span class="default">ob_start</span><span class="keyword">();
<br>&nbsp; require(</span><span class="string">"emailbody.php"</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">// i made a simple &amp; pretty page for showing in the email
<br></span><span class="default">$body</span><span class="keyword">=</span><span class="default">ob_get_contents</span><span class="keyword">(); </span><span class="default">ob_end_clean</span><span class="keyword">();
<br>
<br></span><span class="comment"># Common Headers
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">'From: Jonny &lt;jon@example.com&gt;'</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">'Reply-To: Jonny &lt;jon@example.com&gt;'</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">; 
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">'Return-Path: Jonny &lt;jon@example.com&gt;'</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// these two to set reply address
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"Message-ID:&lt;"</span><span class="keyword">.</span><span class="default">$now</span><span class="keyword">.</span><span class="string">" TheSystem@"</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SERVER_NAME'</span><span class="keyword">].</span><span class="string">"&gt;"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"X-Mailer: PHP v"</span><span class="keyword">.</span><span class="default">phpversion</span><span class="keyword">().</span><span class="default">$eol</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// These two to help avoid spam-filters
<br># Boundry for marking the split &amp; Multitype Headers
<br></span><span class="default">$mime_boundary</span><span class="keyword">=</span><span class="default">md5</span><span class="keyword">(</span><span class="default">time</span><span class="keyword">());
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">'MIME-Version: 1.0'</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">; 
<br></span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"Content-Type: multipart/related; boundary=\""</span><span class="keyword">.</span><span class="default">$mime_boundary</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">; 
<br></span><span class="default">$msg </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>
<br></span><span class="comment"># Attachment
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$mime_boundary</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Type: application/pdf; name=\""</span><span class="keyword">.</span><span class="default">$letter</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// sometimes i have to send MS Word, use 'msword' instead of 'pdf'
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Transfer-Encoding: base64"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Disposition: attachment; filename=\""</span><span class="keyword">.</span><span class="default">$letter</span><span class="keyword">.</span><span class="string">"\""</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">; </span><span class="comment">// !! This line needs TWO end of lines !! IMPORTANT !!
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="default">$f_contents</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="comment"># Setup for text OR html
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Type: multipart/alternative"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">; 
<br>
<br></span><span class="comment"># Text Version
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$mime_boundary</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Type: text/plain; charset=iso-8859-1"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Transfer-Encoding: 8bit"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"This is a multi-part message in MIME format."</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"If you are reading this, please update your email-reading-software."</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"+ + Text Only Email from Genius Jon + +"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br>
<br></span><span class="comment"># HTML Version
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$mime_boundary</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Type: text/html; charset=iso-8859-1"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"Content-Transfer-Encoding: 8bit"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="default">$body</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;
<br>
<br></span><span class="comment"># Finished
<br></span><span class="default">$msg </span><span class="keyword">.= </span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$mime_boundary</span><span class="keyword">.</span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">.</span><span class="default">$eol</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// finish with two eol's for better security. see Injection.
<br>
<br># SEND THE EMAIL
<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="default">sendmail_from</span><span class="keyword">,</span><span class="string">'from@example.com'</span><span class="keyword">);&nbsp; </span><span class="comment">// the INI lines are to force the From Address to be used !
<br>&nbsp; </span><span class="default">mail</span><span class="keyword">(</span><span class="default">$emailaddress</span><span class="keyword">, </span><span class="default">$emailsubject</span><span class="keyword">, </span><span class="default">$msg</span><span class="keyword">, </span><span class="default">$headers</span><span class="keyword">); 
<br></span><span class="default">ini_restore</span><span class="keyword">(</span><span class="default">sendmail_from</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>
<br>I hope this helps.
<br>Jon Webb [Madrid&amp;London]
<br>
<br>[EDITOR thiago NOTE: Code has a fix from o.straesser AT gmx DOT de]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41595">  
  <a class="name">
  <strong class="user"><em>josh at sdfahrenheit dot com</em></strong></a><div class="date" title="2004-04-15 07:52"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41595">
<div class="phpcode"><code><span class="html">
For anyone having problems with attached files coming through garbled, make sure you have magic_quotes_runtime set to Off in your php.ini - it adds funky escape chars to your attached data and garbles the attachment.<br><br>This was giving me all kinds of grief.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61296">  
  <a class="name">
  <strong class="user"><em>lawcd at ntlworld dot com</em></strong></a><div class="date" title="2006-01-30 09:38"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61296">
<div class="phpcode"><code><span class="html">
For those of you with the exim, if its not sending mail with the -i option and you cant easily change this, you might want to check out the imap_mail() function which works almost exactly the same and doesnt use exim, most web hosts provide this. If you using your own server then php needs to be compiled with imap libraries etc.<br><br>See <a rel="nofollow" target="_blank">http://uk2.php.net/manual/en/function.imap-mail.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="62861">  
  <a class="name">
  <strong class="user"><em>martin dot felis at gmx dot de</em></strong></a><div class="date" title="2006-03-10 07:03"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62861">
<div class="phpcode"><code><span class="html">
If using a chroot environment and you don't want to have a full mailer in it, mini-sendmail (can be found at <a rel="nofollow" target="_blank">http://www.acme.com/software/mini_sendmail/</a>) is very useful. It is just a small binary that sends mails over your local mta over port 25.<br><br>Martin</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59752">  
  <a class="name">
  <strong class="user"><em>aweather88 at gmail dot com</em></strong></a><div class="date" title="2005-12-14 02:45"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59752">
<div class="phpcode"><code><span class="html">
I spent hours searching the web trying to figure out why I was getting a "WARNING: mail(): SMTP server response: 501 5.5.4 Invalid Address " every time I was using the mail() function on my server (Win2K3,IIS 6.0,PHP4.4.1).&nbsp; I knew everything was setup properly for SMTP based on other non IIS 6.0 configurations.<br><br>Turns out that the IIS 6.0 SMTP service does not like formatting of the "From" field in mail headers.&nbsp; For instance:<br><span class="default">&lt;?PHP<br>&nbsp;&nbsp; </span><span class="comment">//This line DOES NOT send&nbsp; mail message correctly<br>&nbsp;&nbsp; </span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"From: \""</span><span class="keyword">.</span><span class="default">$fromname</span><span class="keyword">.</span><span class="string">"\" &lt;"</span><span class="keyword">.</span><span class="default">$fromaddress</span><span class="keyword">.</span><span class="string">"&gt;\n"</span><span class="keyword">;<br></span><span class="default">?&gt;</span> <br>However this works:<br><span class="default">&lt;?PHP<br>&nbsp;&nbsp; </span><span class="comment">//This line sends mail message correctly<br>&nbsp;&nbsp; </span><span class="default">$headers </span><span class="keyword">.= </span><span class="string">"From: \""</span><span class="keyword">.</span><span class="default">$fromaddress</span><span class="keyword">.</span><span class="string">"\"\n"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>The fix is in Microsoft Article ID 291828 ( <a rel="nofollow" target="_blank">http://support.microsoft.com/?id=291828</a> ).&nbsp; Even though the "bug" workaround is for IIS 6.0 on Exchange 2003 communicating with a UNIX server, THIS SOLVES THE PROBLEM.&nbsp; Just skip down to the last section for Exchange 2003 and follow the instructions to modify the IIS 6 MetaBase with the MetaBase Explorer found in the IIS 6 Resource Kit.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62027">  
  <a class="name">
  <strong class="user"><em>derernst at gmx dot ch</em></strong></a><div class="date" title="2006-02-17 08:43"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62027">
<div class="phpcode"><code><span class="html">
Suggestion for methods checking form inputs for e-mail injection attempts. <br><br>Any inputs expected from single-line text fields can just be refused if they contain a newline character. The second function tries to minimize matches on non-evil inputs by matching suspect strings only if preceded by a newline character. (Anyway, if this is considered to be safe, it will of course do it for single-line inputs, too.)<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/** <br>* Check single-line inputs: <br>* Returns false if text contains newline character&nbsp; <br>*/ <br></span><span class="keyword">function </span><span class="default">has_no_newlines</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) <br>{ <br>&nbsp; &nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/(%0A|%0D|\\n+|\\r+)/i"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">;<br>} <br><br></span><span class="comment">/** <br>* Check multi-line inputs:<br>* Returns false if text contains newline followed by <br>* email-header specific string<br>*/ <br></span><span class="keyword">function </span><span class="default">has_no_emailheaders</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) <br>{ <br>&nbsp; &nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/(%0A|%0D|\\n+|\\r+)(content-type:|to:|cc:|bcc:)/i"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">;<br>} <br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71065">  
  <a class="name">
  <strong class="user"><em>anselm at netuxo dot co dot uk</em></strong></a><div class="date" title="2006-11-10 02:31"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71065">
<div class="phpcode"><code><span class="html">
In case you don't want to, or can't, configure sendmail for your server, a good alternative is esmtp - it's an smtp mailer with minimum configuration that can be used as a sendmail drop-in : <a rel="nofollow" target="_blank">http://esmtp.sourceforge.net/</a></span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/ref.mail.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:48:01 GMT -->


</body></html>