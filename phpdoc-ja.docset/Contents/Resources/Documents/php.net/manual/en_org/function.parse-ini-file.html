<html><!-- Mirrored from php.net/manual/en/function.parse-ini-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:46 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>parse_ini_file</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.parse-ini-file.html">
 <link rel="shorturl" href="http://php.net/parse-ini-file">
 <link rel="alternate" href="http://php.net/parse-ini-file" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.filesystem.html">
 <link rel="prev" href="function.move-uploaded-file.html">
 <link rel="next" href="function.parse-ini-string.html">

 <link rel="alternate" href="function.parse-ini-file.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.parse-ini-file.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.parse-ini-file.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.parse-ini-file.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.parse-ini-file.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.parse-ini-file.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.parse-ini-file.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.parse-ini-file.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.parse-ini-file.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.parse-ini-file.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.parse-ini-file.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.file.html">File System Related Extensions</a></li>      <li><a href="book.filesystem.html">Filesystem</a></li>      <li><a href="ref.filesystem.html">Filesystem Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.parse-ini-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">parse_ini_file</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">parse_ini_file</span> â€” <span class="dc-title">Parse a configuration file</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.parse-ini-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>parse_ini_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$process_sections</code><span class="initializer"> = false</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$scanner_mode</code><span class="initializer"> = INI_SCANNER_NORMAL</span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>parse_ini_file()</strong></span> loads in the
   ini file specified in <code class="parameter">filename</code>,
   and returns the settings in it in an associative array.
  </p>
  <p class="para">
   The structure of the ini file is the same as the <var class="filename">php.ini</var>'s.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.parse-ini-file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       The filename of the ini file being parsed.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">process_sections</code></dt>

     <dd>

      <p class="para">
       By setting the <code class="parameter">process_sections</code>
       parameter to <strong><code>TRUE</code></strong>, you get a multidimensional array, with
       the section names and settings included. The default
       for <code class="parameter">process_sections</code> is <strong><code>FALSE</code></strong>      
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">scanner_mode</code></dt>

     <dd>

      <p class="para">
       Can either be <strong><code>INI_SCANNER_NORMAL</code></strong> (default) or 
       <strong><code>INI_SCANNER_RAW</code></strong>. If <strong><code>INI_SCANNER_RAW</code></strong> 
       is supplied, then option values will not be parsed.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.parse-ini-file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The settings are returned as an associative <span class="type"><a href="language.types.array.html" class="type array">array</a></span> on success,
   and <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 
 <div class="refsect1 changelog" id="refsect1-function.parse-ini-file-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
         Added optional <code class="parameter">scanner_mode</code> parameter.
         Single quotes may now be used around variable assignments.
         Hash marks (<em>#</em>) may no longer be used as comments
         and will throw a deprecation warning if used.
       </td>
      </tr>

      <tr>
       <td>5.2.7</td>
       <td>
        On syntax error this function will return <strong><code>FALSE</code></strong> rather than an empty
        array.
       </td>
      </tr>

      <tr>
       <td>5.2.4</td>
       <td>
        Keys and section names consisting of numbers are now evaluated as PHP
        <a href="language.types.integer.html" class="link">integers</a> thus numbers
        starting by 0 are evaluated as octals and numbers starting by 0x are
        evaluated as hexadecimals.
       </td>
      </tr>

      <tr>
       <td>5.0.0</td>
       <td>
        Values enclosed in double quotes can contain new lines.
       </td>
      </tr>

      <tr>
       <td>4.2.1</td>
       <td>
        This function is now affected by <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe mode</a>
        and <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a>.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.parse-ini-file-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2508">
    <p><strong>Example #1 Contents of <var class="filename">sample.ini</var></strong></p>
    <div class="example-contents">
<div class="cdata"><pre>; This is a sample configuration file
; Comments start with ';', as in php.ini

[first_section]
one = 1
five = 5
animal = BIRD

[second_section]
path = "/usr/local/bin"
URL = "http://www.example.com/~username"

[third_section]
phpversion[] = "5.0"
phpversion[] = "5.1"
phpversion[] = "5.2"
phpversion[] = "5.3"
</pre></div>
    </div>

   </div>
   <div class="example" id="example-2509">
    <p><strong>Example #2 <span class="function"><strong>parse_ini_file()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     <a href="language.constants.html" class="link">Constants</a> may also be parsed
     in the ini file so if you define a constant as an ini value before
     running <span class="function"><strong>parse_ini_file()</strong></span>, it will be integrated into
     the results.  Only ini values are evaluated.  For example:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>define</span><span style="color: #007700">(</span><span style="color: #DD0000">'BIRD'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Dodo&nbsp;bird'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Parse&nbsp;without&nbsp;sections<br></span><span style="color: #0000BB">$ini_array&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #DD0000">"sample.ini"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$ini_array</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Parse&nbsp;with&nbsp;sections<br></span><span style="color: #0000BB">$ini_array&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #DD0000">"sample.ini"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$ini_array</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Array
(
    [one] =&gt; 1
    [five] =&gt; 5
    [animal] =&gt; Dodo bird
    [path] =&gt; /usr/local/bin
    [URL] =&gt; http://www.example.com/~username
    [phpversion] =&gt; Array
        (
            [0] =&gt; 5.0
            [1] =&gt; 5.1
            [2] =&gt; 5.2
            [3] =&gt; 5.3
        )

)
Array
(
    [first_section] =&gt; Array
        (
            [one] =&gt; 1
            [five] =&gt; 5
            [animal] =&gt; Dodo bird
        )

    [second_section] =&gt; Array
        (
            [path] =&gt; /usr/local/bin
            [URL] =&gt; http://www.example.com/~username
        )

    [third_section] =&gt; Array
        (
            [phpversion] =&gt; Array
                (
                    [0] =&gt; 5.0
                    [1] =&gt; 5.1
                    [2] =&gt; 5.2
                    [3] =&gt; 5.3
                )

        )

)
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-2510">
    <p><strong>Example #3 <span class="function"><strong>parse_ini_file()</strong></span> parsing a php.ini file</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;A&nbsp;simple&nbsp;function&nbsp;used&nbsp;for&nbsp;comparing&nbsp;the&nbsp;results&nbsp;below<br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">yesno</span><span style="color: #007700">(</span><span style="color: #0000BB">$expression</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;return(</span><span style="color: #0000BB">$expression&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #DD0000">'Yes'&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #DD0000">'No'</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Get&nbsp;the&nbsp;path&nbsp;to&nbsp;php.ini&nbsp;using&nbsp;the&nbsp;php_ini_loaded_file()&nbsp;<br>//&nbsp;function&nbsp;available&nbsp;as&nbsp;of&nbsp;PHP&nbsp;5.2.4<br></span><span style="color: #0000BB">$ini_path&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">php_ini_loaded_file</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Parse&nbsp;php.ini<br></span><span style="color: #0000BB">$ini&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$ini_path</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Print&nbsp;and&nbsp;compare&nbsp;the&nbsp;values,&nbsp;note&nbsp;that&nbsp;using&nbsp;get_cfg_var()<br>//&nbsp;will&nbsp;give&nbsp;the&nbsp;same&nbsp;results&nbsp;for&nbsp;parsed&nbsp;and&nbsp;loaded&nbsp;here<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'(parsed)&nbsp;magic_quotes_gpc&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">yesno</span><span style="color: #007700">(</span><span style="color: #0000BB">$ini</span><span style="color: #007700">[</span><span style="color: #DD0000">'magic_quotes_gpc'</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">'(loaded)&nbsp;magic_quotes_gpc&nbsp;=&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">yesno</span><span style="color: #007700">(</span><span style="color: #0000BB">get_cfg_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'magic_quotes_gpc'</span><span style="color: #007700">))&nbsp;.&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>(parsed) magic_quotes_gpc = Yes
(loaded) magic_quotes_gpc = Yes
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.parse-ini-file-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    This function has nothing to do with the
    <var class="filename">php.ini</var> file. It is already processed by
    the time you run your script. This function can be used to
    read in your own application's configuration files.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    If a value in the ini file contains any non-alphanumeric
    characters it needs to be enclosed in double-quotes (").
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    There are reserved words which must not be used as keys for
    ini files.  These include: null, yes, no, true, false, on, off, none.
    Values null, off, no and false result in "".
    Values on, yes and true result in "1".
    Characters <em>?{}|&amp;~![()^"</em> must not be used anywhere in
    the key and have a special meaning in the value.
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Entries without an equal sign are ignored. For example, "foo"
    is ignored whereas "bar =" is parsed and added with an empty
    value. For example, MySQL has a "no-auto-rehash" setting 
    in <var class="filename">my.cnf</var> that does not take a value, so
    it is ignored.
   </p>
  <p></p></blockquote>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.parse-ini-file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.parse-ini-string.html" class="function" rel="rdfs-seeAlso">parse_ini_string()</a> - Parse a configuration string</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="20204">  
  <a class="name">
  <strong class="user"><em>bob at kludgebox dot com</em></strong></a><div class="date" title="2002-03-26 10:27"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20204">
<div class="phpcode"><code><span class="html">
And for the extra-paranoid like myself, add a rule into your httpd.conf file so that *.ini (or *.inc) in my case can't be sent to a browser:<br><br>&lt;Files *.inc&gt;&nbsp; <br>&nbsp; &nbsp; Order deny,allow<br>&nbsp; &nbsp; Deny from all<br>&lt;/Files&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99474">  
  <a class="name">
  <strong class="user"><em>pd at frozen-bits dot de</em></strong></a><div class="date" title="2010-08-19 02:21"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99474">
<div class="phpcode"><code><span class="html">
I use the following syntax to secure my config.ini.php file:<br><br>;<span class="default">&lt;?php<br></span><span class="keyword">;die(); </span><span class="comment">// For further security<br></span><span class="keyword">;</span><span class="comment">/*<br><br>[category]<br>name="value"<br><br>;*/<br><br></span><span class="keyword">;</span><span class="default">?&gt;<br></span><br>Works like a charm and is both: A valid PHP File and a valid ini-File ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99036">  
  <a class="name">
  <strong class="user"><em>geggert at web dot de</em></strong></a><div class="date" title="2010-07-23 06:44"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99036">
<div class="phpcode"><code><span class="html">
As quick an dirty way to gain the security of that *.ini.php-files you may alternatively use this as first line:<br><br>; <span class="default">&lt;?php </span><span class="keyword">exit(); __halt_compiler();<br></span><span class="comment">// the closing tag is just to end up the syntax highlighting ...<br>// leave these comments and the closing tag away in your ini.php-file!<br></span><span class="default">?&gt;<br></span><br>You can use parse_ini_file() in the normal way and any criminal stranger will only see a ";" then ...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31958">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2003-05-10 04:05"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31958">
<div class="phpcode"><code><span class="html">
If your configuration file holds any sensitive information (such as database login details), remember NOT to place it within your document root folder! A common mistake is to replace config.inc.php files, which are formatted in PHP:<br><span class="default">&lt;?php<br>$database</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">] = </span><span class="string">'localhost'</span><span class="keyword">;<br></span><span class="comment">// etc...<br></span><span class="default">?&gt;<br></span><br>With config.ini files which are written in plain text:<br>[database]<br>host = localhost<br><br>The file config.ini can be read by anyone who knows where it's located, if it's under your document root folder. Remember to place it above!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90624">  
  <a class="name">
  <strong class="user"><em>jeremygiberson at gmail dot com</em></strong></a><div class="date" title="2009-04-30 04:01"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90624">
<div class="phpcode"><code><span class="html">
Here is a quick parse_ini_file wrapper to add extend support to save typing and redundancy.<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Parses INI file adding extends functionality via ":base" postfix on namespace.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param string $filename<br>&nbsp; &nbsp;&nbsp; * @return array<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">parse_ini_file_extended</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$p_ini </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$config </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$p_ini </span><span class="keyword">as </span><span class="default">$namespace </span><span class="keyword">=&gt; </span><span class="default">$properties</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$extends</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$namespace</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$extends </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$extends</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// create namespace if necessary<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$config</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">])) </span><span class="default">$config</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// inherit base namespace<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(isset(</span><span class="default">$p_ini</span><span class="keyword">[</span><span class="default">$extends</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$p_ini</span><span class="keyword">[</span><span class="default">$extends</span><span class="keyword">] as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$config</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">][</span><span class="default">$prop</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// overwrite / set current namespace values<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$properties </span><span class="keyword">as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$config</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">][</span><span class="default">$prop</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$config</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>Treats this ini:<br><span class="default">&lt;?php <br></span><span class="comment">/*<br>[base]<br>host=localhost<br>user=testuser<br>pass=testpass<br>database=default<br><br>[users:base]<br>database=users<br><br>[archive : base]<br>database=archive<br>*/<br></span><span class="default">?&gt;<br></span>As if it were like this:<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>[base]<br>host=localhost<br>user=testuser<br>pass=testpass<br>database=default<br><br>[users:base]<br>host=localhost<br>user=testuser<br>pass=testpass<br>database=users<br><br>[archive : base]<br>host=localhost<br>user=testuser<br>pass=testpass<br>database=archive<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87605">  
  <a class="name">
  <strong class="user"><em>pBakhuis at googles mail dot com (gmail)</em></strong></a><div class="date" title="2008-12-12 08:42"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87605">
<div class="phpcode"><code><span class="html">
To those who were like me looking if this could be used to create an array out of commandline output I offer you the function below (I used it to parse mplayer output).<br><br>If you want it behave exactly the same as parse_ini_file you'll obviously have to add some code to feed the different sections to this one. Hope it's of help to someone!<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * The return is very similar to that of parse_ini_file, but this works off files<br> * <br> * Below is an example of what it does, where the first<br> * value is what you'd normally want to do, and the second and third things that might<br> * happen and in case it does it's good to know what is going on.<br> * <br> * $anArray = array( 'default=theValue', 'setting=', 'something=value=value' );<br> * explodeExplode( '=', $anArray );<br> * <br> * the return will be <br> * array( 'default' =&gt; 'theValue', 'setting' =&gt; '', 'something' =&gt; 'value=value' );<br> * <br> * So the oddities here are, text after the second $string occurence dissapearing<br> * and empty values resulting in an empty string.<br> * <br> * @return $returnArray array array( 'setting' =&gt; 'value' )<br> * @param $string Object<br> * @param $array Object<br> */<br></span><span class="keyword">function </span><span class="default">explodeExplode</span><span class="keyword">( </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$array </span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$returnArray </span><span class="keyword">= array();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$arrayValue </span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmpArray </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">( </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$arrayValue </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$tmpArray </span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnArray</span><span class="keyword">[</span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$tmpArray </span><span class="keyword">) == </span><span class="default">2 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnArray</span><span class="keyword">[</span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$tmpArray </span><span class="keyword">) &gt; </span><span class="default">2 </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$implodeBack </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$firstLoop&nbsp; &nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$tmpArray </span><span class="keyword">as </span><span class="default">$tmpValue </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$firstLoop </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$firstLoop </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$implodeBack</span><span class="keyword">[] = </span><span class="default">$tmpValue</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$implodeBack </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnArray</span><span class="keyword">[</span><span class="default">$tmpArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">implode</span><span class="keyword">( </span><span class="string">'='</span><span class="keyword">, </span><span class="default">$implodeBack </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$returnArray</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70041">  
  <a class="name">
  <strong class="user"><em>judas dot iscariote at gmail dot com</em></strong></a><div class="date" title="2006-10-01 12:26"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70041">
<div class="phpcode"><code><span class="html">
If you are looking for an OOP way to parse ini files, take a look at Marcus Boerger's&nbsp; IniGroups&nbsp; class available here : <br><br><a rel="nofollow" target="_blank">http://www.php.net/~helly/php/ext/spl/classIniGroups.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="75983">  
  <a class="name">
  <strong class="user"><em>Adam</em></strong></a><div class="date" title="2007-06-25 10:45"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75983">
<div class="phpcode"><code><span class="html">
Arrays can be defined in the ini file by adding '[]' at the end of a key name. For example:<br><br>value1 = 17<br>value2 = 13<br><br>value3[] = a<br>value3[] = b<br>value3[] = c<br><br>Will return:<br>Array<br>(<br>&nbsp; &nbsp; [value1] =&gt; 17<br>&nbsp; &nbsp; [value2] =&gt; 13<br>&nbsp; &nbsp; [value3] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; a<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; b<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] =&gt; c<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36476">  
  <a class="name">
  <strong class="user"><em>rus dot grafx at usa dot net</em></strong></a><div class="date" title="2003-10-10 06:15"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36476">
<div class="phpcode"><code><span class="html">
Instead of using parse_ini_file() function I would recommend to use PEAR's Config package which is MUCH more flexible (assuming that you don't mind using PEAR and OOP). Have a closer look at <a rel="nofollow" target="_blank">http://pear.php.net/package/Config</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="94414">  
  <a class="name">
  <strong class="user"><em>freamer89 at gmail dot com</em></strong></a><div class="date" title="2009-11-03 08:38"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94414">
<div class="phpcode"><code><span class="html">
Didn`t find the one,which suits my needs,so Here`s a small and easy write ini from array function... Maybe you`ll find it handy.<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">write_php_ini</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">[] = </span><span class="string">"[</span><span class="default">$key</span><span class="string">]"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$val </span><span class="keyword">as </span><span class="default">$skey </span><span class="keyword">=&gt; </span><span class="default">$sval</span><span class="keyword">) </span><span class="default">$res</span><span class="keyword">[] = </span><span class="string">"</span><span class="default">$skey</span><span class="string"> = "</span><span class="keyword">.(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$sval</span><span class="keyword">) ? </span><span class="default">$sval </span><span class="keyword">: </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$sval</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$res</span><span class="keyword">[] = </span><span class="string">"</span><span class="default">$key</span><span class="string"> = "</span><span class="keyword">.(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) ? </span><span class="default">$val </span><span class="keyword">: </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">safefilerewrite</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="default">$res</span><span class="keyword">));<br>}<br></span><span class="comment">//////<br></span><span class="keyword">function </span><span class="default">safefilerewrite</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">, </span><span class="default">$dataToSave</span><span class="keyword">)<br>{&nbsp; &nbsp; if (</span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; do<br>&nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$canWrite </span><span class="keyword">= </span><span class="default">flock</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">LOCK_EX</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If lock not obtained sleep for 0 - 100 milliseconds, to avoid collision and CPU load<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">$canWrite</span><span class="keyword">) </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">round</span><span class="keyword">(</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">100</span><span class="keyword">)*</span><span class="default">1000</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; } while ((!</span><span class="default">$canWrite</span><span class="keyword">)and((</span><span class="default">microtime</span><span class="keyword">()-</span><span class="default">$startTime</span><span class="keyword">) &lt; </span><span class="default">1000</span><span class="keyword">));<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//file was locked so now we can store information<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$canWrite</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$dataToSave</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">flock</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">LOCK_UN</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84348">  
  <a class="name">
  <strong class="user"><em>juampii_4 at hotmail dot com</em></strong></a><div class="date" title="2008-07-09 08:24"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84348">
<div class="phpcode"><code><span class="html">
class.parseini.php<br><span class="default">&lt;?php<br></span><span class="comment">##By juan pablo tosso<br></span><span class="keyword">class </span><span class="default">Parser<br></span><span class="keyword">{<br><br>&nbsp; &nbsp; public function </span><span class="default">printini</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$sector</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file</span><span class="keyword">=</span><span class="default">$file</span><span class="keyword">.</span><span class="string">".ini"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$is</span><span class="keyword">=array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$is</span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$is</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$is</span><span class="keyword">) &amp;&amp; </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$is</span><span class="keyword">[</span><span class="default">$sector</span><span class="keyword">][</span><span class="default">$var</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">"error"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>}<br><br></span><span class="default">?&gt;<br></span><br>Ini.ini:<br>[test]<br>foo=bar<br><br>[test2]<br>foo1=bar1<br>foo2=bar2<br>foo bar=something else<br><br>just in another file write:<br><br>include("class.parseini.php");<br>$new= new Parser();<br>echo $new-&gt;printini("ini", "test2", "foo1");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112453">  
  <a class="name">
  <strong class="user"><em>grant at rootcentral dot org</em></strong></a><div class="date" title="2013-06-18 07:46"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112453">
<div class="phpcode"><code><span class="html">
Somewhere between versions 5.2.5 and 5.3.24, the parsing of unquoted multiword values (e.g. values with embedded spaces) changed.<br><br>In 5.3.24, a multiword value where one of the words is a reserved word (null, yes, no, true, false, on, off, none) will cause the function to return an error.<br><br>Adding double quotation marks around the value string will solve the problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108384">  
  <a class="name">
  <strong class="user"><em>Johannes Schmidt</em></strong></a><div class="date" title="2012-04-21 07:11"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108384">
<div class="phpcode"><code><span class="html">
#If you want to replace a Setting in the ini, use this code:<br>/// bool SetCMSSettings(string $Setting, string $replace, string $INI_PATH)<br>/// $Setting = The Setting, which you want to replace<br>/// $replace = the new value<br><br>public function SetCMSSettings($Setting, $replace, $INI_PATH)<br>&nbsp; &nbsp; &nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ini = fopen($INI_PATH,"w+");&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $i = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while($Content = fgets($ini)) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(preg_match("/".$Setting."/", $Content)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fwrite($ini, $Setting."=".$replace);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $i = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fwrite($ini, $Content);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // If, the setting wasnt replaced.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($i == 0) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fwrite($ini, $Setting."=".$replace);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>fclose($ini);<br>&nbsp; &nbsp; &nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100046">  
  <a class="name">
  <strong class="user"><em>Rolf</em></strong></a><div class="date" title="2010-09-21 02:27"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100046">
<div class="phpcode"><code><span class="html">
As of PHP 5.3, you can escape a double quote like this:<br><br>description = "an \" example"<br><br>But strangely, this fails when you try to escape two consecutive double quotes:<br><br>description = "no \"\" good"<br><br>Unless there is something between them (in this example, there is a space character):<br><br>description = "this is \" \" ok"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86410">  
  <a class="name">
  <strong class="user"><em>Bill Brown - macnimble.com</em></strong></a><div class="date" title="2008-10-16 07:47"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86410">
<div class="phpcode"><code><span class="html">
Working on a project for a client recently, I needed a way to set a default configuration INI file, but also wanted to allow the client to override the settings through the use of a custom INI file.<br><br>I thought array_merge or array_merge_recursive would do the trick for me, but it fails to override settings in the way that I wanted. I wrote my own function to do what I wanted. It's nothing spectacular, but thought I'd post it here in case it saved someone else some time.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">ini_merge </span><span class="keyword">(</span><span class="default">$config_ini</span><span class="keyword">, </span><span class="default">$custom_ini</span><span class="keyword">) {<br>&nbsp; foreach (</span><span class="default">$custom_ini </span><span class="keyword">AS </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">):<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)):<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$config_ini</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">ini_merge</span><span class="keyword">(</span><span class="default">$config_ini</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$custom_ini</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br>&nbsp; &nbsp; else:<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$config_ini</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; endif;<br>&nbsp; endforeach;<br>&nbsp; return </span><span class="default">$config_ini</span><span class="keyword">;<br>};<br></span><span class="default">$CONFIG_INI </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'../config.ini'</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">$CUSTOM_INI </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'ini/custom.ini'</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">$INI </span><span class="keyword">= </span><span class="default">ini_merge</span><span class="keyword">(</span><span class="default">$CONFIG_INI</span><span class="keyword">, </span><span class="default">$CUSTOM_INI</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This allowed me to put the default INI file above the web root with information that requires extra security (database connection info, etc.) and a writable INI file within the structure of the site without affecting the default settings of the default config.ini file.<br><br>Anyway, hope it helps.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78815">  
  <a class="name">
  <strong class="user"><em>goulven.ch AT gmail DOT com</em></strong></a><div class="date" title="2007-10-29 06:33"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78815">
<div class="phpcode"><code><span class="html">
Warning: parse_ini_files cannot cope with values containing the equal sign (=).<br><br>The following function supports sections, comments, arrays, and key-value pairs outside of any section.<br>Beware that similar keys will overwrite one another (unless in different sections).<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parse_ini </span><span class="keyword">( </span><span class="default">$filepath </span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">( </span><span class="default">$filepath </span><span class="keyword">);<br>&nbsp; &nbsp; if ( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$ini </span><span class="keyword">) == </span><span class="default">0 </span><span class="keyword">) { return array(); }<br>&nbsp; &nbsp; </span><span class="default">$sections </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$values </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$globals </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; foreach( </span><span class="default">$ini </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">$line </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Comments<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">$line </span><span class="keyword">== </span><span class="string">'' </span><span class="keyword">|| </span><span class="default">$line</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">';' </span><span class="keyword">) { continue; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Sections<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">$line</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'[' </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sections</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$line</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, -</span><span class="default">1 </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Key-value pair<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">list( </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">( </span><span class="string">'='</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">$key </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$i </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Array values<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$line</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) == </span><span class="string">'[]' </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$globals</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$globals</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Array values<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$line</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">) == </span><span class="string">'[]' </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">][ </span><span class="default">$key </span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">][ </span><span class="default">$key </span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; for( </span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">$i</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++ ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[ </span><span class="default">$sections</span><span class="keyword">[ </span><span class="default">$j </span><span class="keyword">] ] = </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$j </span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$result </span><span class="keyword">+ </span><span class="default">$globals</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Example usage:<br><span class="default">&lt;?php<br>$stores </span><span class="keyword">= </span><span class="default">parse_ini</span><span class="keyword">(</span><span class="string">'stores.ini'</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$stores </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>An example ini file:<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>;Commented line start with ';'<br>global_value1 = a string value<br>global_value1 = another string value<br><br>; empty lines are discarded<br>[Section1]<br>key = value<br>; whitespace around keys and values is discarded too<br>otherkey=other value<br>otherkey=yet another value<br>; this key-value pair will overwrite the former.<br>*/<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76082">  
  <a class="name">
  <strong class="user"><em>yarco dot w at gmail dot com</em></strong></a><div class="date" title="2007-06-29 01:46"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76082">
<div class="phpcode"><code><span class="html">
parse_ini_file can't deal with const which cancate a string. For example, if test.ini file is<br><br>classPath = ROOT/lib<br><br>If you:<br><span class="default">&lt;?php<br>define</span><span class="keyword">(</span><span class="string">'ROOT'</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">));<br><br></span><span class="default">$buf </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'test.ini'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>const ROOT would't be parsed.<br><br>But my version could work find.<br><br><span class="default">&lt;?php<br></span><span class="comment">// array parse_ini_file ( string $filename [, bool $process_sections] )<br></span><span class="keyword">function </span><span class="default">parse_ini</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$process_sections </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br>{<br>&nbsp; function </span><span class="default">replace_process</span><span class="keyword">(&amp; </span><span class="default">$item</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$consts</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$consts</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$consts</span><span class="keyword">), </span><span class="default">$item</span><span class="keyword">);<br>&nbsp; }<br><br>&nbsp; </span><span class="default">$buf </span><span class="keyword">= </span><span class="default">get_defined_constants</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">); </span><span class="comment">// PHP version &gt; 5.0<br>&nbsp; </span><span class="default">$consts </span><span class="keyword">= </span><span class="default">$buf</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">];<br>&nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$process_sections</span><span class="keyword">);<br><br>&nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">, </span><span class="string">'replace_process'</span><span class="keyword">, </span><span class="default">$consts</span><span class="keyword">);<br>&nbsp; return </span><span class="default">$ini</span><span class="keyword">;<br>}<br><br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'ROOT'</span><span class="keyword">, </span><span class="string">'/test'</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">parse_ini</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/test.ini'</span><span class="keyword">));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112543">  
  <a class="name">
  <strong class="user"><em>josephbiesek at msn dot com</em></strong></a><div class="date" title="2013-06-27 04:33"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112543">
<div class="phpcode"><code><span class="html">
Set an simple ini file to defined constants <br><br>$config = parse_ini_file('main.ini');<br><br>foreach($config as $key =&gt; $value) {<br>&nbsp; &nbsp; define($key, $value);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99868">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2010-09-11 09:42"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99868">
<div class="phpcode"><code><span class="html">
a ini lexer with regexp:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">@</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: text/plain'</span><span class="keyword">);<br><br></span><span class="default">$myini </span><span class="keyword">= &lt;&lt;&lt;EOT<br></span><span class="string">[examples]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a section<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a comment line<br>1 = intkey&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a int key<br>nullvalue = null&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is NULL<br>truebool = true&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is boolean (TRUE)<br>falsebool = false&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is boolean (FALSE)<br>intvalue = -1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is a integer (-1)<br>floatvalue = +1.4E-3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a float (0.0014)<br>stringvalue = Hello World&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is a unquoted string<br>quoted = "Hello World"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a quoted string<br>apostrophed = 'Hello World'&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is a apostrophed string<br>quoted escaped = "it work's \"fine\"!"&nbsp; &nbsp; &nbsp; ; this is a quoted string with escaped quotes<br>apostrophed escaped = 'it work\'s "fine"!'&nbsp; ; this is a apostrophed string with escaped apostrophes<br><br>&nbsp; &nbsp; [[valid special cases]]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this is a section with square brackets and whitespaces at the beginning<br>quoted multiline = "line1<br>line2<br>line3"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a quoted multiline string<br>apostrophed multiline = "line1<br>line2<br>line3"&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this is a apostrophed multiline string<br>&nbsp; &nbsp;&nbsp; spaces before key = is ok&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this line has whitespaces at the beginning<br>no val =&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this setting has no key<br>= no key&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this setting has no value<br>=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this setting has no key and no value<br><br>[bad cases]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; you should never do that but it works<br>notgood = unquoted"string&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this value has a single quote<br>notgood2 = unapostrophed'string&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ; this value has a single apostrophe<br>bad = "unclosed quotes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this value has unclosed quotes<br>bad2 = 'unclosed apostrophes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; this value has unclosed apostrophes<br><br>[invalid<br>section]<br>invalid setting<br></span><span class="keyword">EOT;<br><br>function </span><span class="default">get_tokens_from_ini_lexer</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$verbose </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$regexp </span><span class="keyword">= </span><span class="string">'/<br>&nbsp; &nbsp; (?&lt;=^|\r\n|\r|\n)<br>&nbsp; &nbsp; (?P&lt;line&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; (?:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?(?![\t\x20]*;)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;left_space&gt;[\t\x20]*)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \[(?P&lt;section&gt;[^;\r\n]+)\]<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;setting&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;key&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [^=;\r\n]+?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;left_equal_space&gt;[\t\x20]*)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;equal_sign&gt;=)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;right_equal_space&gt;[\t\x20]*)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;val&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \x22(?P&lt;quoted&gt;.*?)(?&lt;!\x5C)\x22<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \x27(?P&lt;apostrophed&gt;.*?)(?&lt;!\x5C)\x27<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;null&gt;null)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;bool&gt;true|false)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;int&gt;[+-]?(?:[1-9]\d{0,18}|0))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;float&gt;(?:[+-]?(?:[1-9]\d*|0))\.\d+(?:E[+-]\d+)?)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;string&gt;[^;\r\n]+?)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;right_space&gt;[\t\x20]*)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;comment_seperator&gt;;)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;comment_space&gt;[\t\x20]*)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;comment&gt;[^\r\n]+?)?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )?<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; |<br>&nbsp; &nbsp; &nbsp; &nbsp; (?P&lt;error&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [^\r\n]+?<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; )<br>&nbsp; &nbsp; (?=\r\n|\r|\n|$)(?P&lt;crlf&gt;\r\n|\r|\n)?<br>&nbsp; &nbsp; |<br>&nbsp; &nbsp; (?&lt;=\r\n|\r|\n)(?P&lt;emptyline&gt;\r\n|\r|\n)<br>&nbsp; &nbsp; /xsi'</span><span class="keyword">;<br><br>&nbsp; &nbsp; if(!@</span><span class="default">is_int</span><span class="keyword">(</span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$regexp</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">$tokens</span><span class="keyword">, </span><span class="default">PREG_SET_ORDER</span><span class="keyword">)))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// parse error<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$tokens </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$token</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$verbose</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'line'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'crlf'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'setting'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'equal_sign'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'val'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'left_space'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'left_equal_space'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'right_equal_space'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'right_space'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'comment_seperator'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'comment_space'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$token </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!@</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) || !@</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br>&nbsp; &nbsp; &nbsp; &nbsp; };<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return(</span><span class="default">$tokens</span><span class="keyword">);<br>&nbsp; &nbsp; };<br>};<br><br></span><span class="default">$verbose </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_tokens_from_ini_lexer</span><span class="keyword">(</span><span class="default">$myini</span><span class="keyword">, </span><span class="default">$verbose</span><span class="keyword">));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95747">  
  <a class="name">
  <strong class="user"><em>Mauro Gabriel Titimoli</em></strong></a><div class="date" title="2010-01-19 03:14"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95747">
<div class="phpcode"><code><span class="html">
I have recently finished an implementacion of a multiple configuration type class.<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Configuration </span><span class="keyword">{<br>&nbsp; &nbsp; const </span><span class="default">AUTO </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; const </span><span class="default">JSON </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; const </span><span class="default">PHP_INI </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;<br>&nbsp; &nbsp; const </span><span class="default">XML </span><span class="keyword">= </span><span class="default">16</span><span class="keyword">;<br><br>&nbsp; &nbsp; static private </span><span class="default">$CONF_EXT_RELATION </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'json' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="comment">// JSON<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'ini' </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">,&nbsp; </span><span class="comment">// PHP_INI<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'xml' </span><span class="keyword">=&gt; </span><span class="default">16&nbsp; </span><span class="comment">// XML<br>&nbsp; &nbsp; </span><span class="keyword">);<br><br>&nbsp; &nbsp; static private </span><span class="default">$instances</span><span class="keyword">;<br><br>&nbsp; &nbsp; private </span><span class="default">$data</span><span class="keyword">;<br><br>&nbsp; &nbsp; static public function </span><span class="default">objectToArray</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">))?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) :<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$obj</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = ((</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) || (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)))?<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">objectToArray</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) :<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; private function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$type </span><span class="keyword">= </span><span class="default">Configuration</span><span class="keyword">::</span><span class="default">AUTO</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$type </span><span class="keyword">== </span><span class="default">self</span><span class="keyword">::</span><span class="default">AUTO</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">$CONF_EXT_RELATION</span><span class="keyword">[</span><span class="default">pathinfo</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">PATHINFO_EXTENSION</span><span class="keyword">)];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; switch(</span><span class="default">$type</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">self</span><span class="keyword">::</span><span class="default">JSON</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">), </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">self</span><span class="keyword">::</span><span class="default">PHP_INI</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="default">self</span><span class="keyword">::</span><span class="default">XML</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data </span><span class="keyword">= </span><span class="default">self</span><span class="keyword">::</span><span class="default">objectToArray</span><span class="keyword">(</span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; static public function &amp; </span><span class="default">getInstance</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$type </span><span class="keyword">= </span><span class="default">Configuration</span><span class="keyword">::</span><span class="default">AUTO</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(! isset(</span><span class="default">self</span><span class="keyword">::</span><span class="default">$instances</span><span class="keyword">[</span><span class="default">$file</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instances</span><span class="keyword">[</span><span class="default">$file</span><span class="keyword">] = new </span><span class="default">Configuration</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">$instances</span><span class="keyword">[</span><span class="default">$file</span><span class="keyword">];<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public function </span><span class="default">__get</span><span class="keyword">(</span><span class="default">$section</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">)) &amp;&amp;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$section</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">[</span><span class="default">$section</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public function </span><span class="default">getAvailableSections</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">data</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$configuration </span><span class="keyword">= </span><span class="default">Configuration</span><span class="keyword">::</span><span class="default">getInstance</span><span class="keyword">(</span><span class="comment">/*configuration filename*/</span><span class="keyword">);<br>foreach(</span><span class="default">$configuration</span><span class="keyword">-&gt;</span><span class="default">getAvailableSections</span><span class="keyword">() as </span><span class="default">$pos </span><span class="keyword">=&gt; </span><span class="default">$sectionName</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$sectionName</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$configuration</span><span class="keyword">-&gt;{</span><span class="default">$sectionName</span><span class="keyword">});<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70847">  
  <a class="name">
  <strong class="user"><em>Justin Hall</em></strong></a><div class="date" title="2006-10-31 11:46"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70847">
<div class="phpcode"><code><span class="html">
This is a simple (but slightly hackish) way of avoiding the character limitations (in values):<br><br><span class="default">&lt;?php<br>define</span><span class="keyword">(</span><span class="string">'QUOTE'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">);<br></span><span class="default">$test </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'test.ini'</span><span class="keyword">);<br><br>echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>contents of test.ini:<br><br>park yesterday = "I (walked) | {to} " QUOTE"the"QUOTE " park yesterday &amp; saw ~three~ dogs!"<br><br>output:<br><br><span class="default">&lt;?php<br></span><span class="keyword">Array<br>(<br>&nbsp; &nbsp; [</span><span class="default">park yesterday</span><span class="keyword">] =&gt; </span><span class="default">I </span><span class="keyword">(</span><span class="default">walked</span><span class="keyword">) | {</span><span class="default">to</span><span class="keyword">} </span><span class="string">"the" </span><span class="default">park yesterday </span><span class="keyword">&amp; </span><span class="default">saw </span><span class="keyword">~</span><span class="default">three</span><span class="keyword">~ </span><span class="default">dogs</span><span class="keyword">!<br>)<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54737">  
  <a class="name">
  <strong class="user"><em>dimk at pisem dot net</em></strong></a><div class="date" title="2005-07-13 09:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54737">
<div class="phpcode"><code><span class="html">
Class to access ini values at format "section_name.property", for example $myconf-&gt;get("system.name") returns a property "name" in section "system":
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">Settings </span><span class="keyword">{
<br>
<br>var </span><span class="default">$properties </span><span class="keyword">= array();
<br>
<br>&nbsp; &nbsp; function </span><span class="default">Settings</span><span class="keyword">() {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">properties </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">_SETTINGS_FILE</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; function </span><span class="default">get</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$section_name</span><span class="keyword">, </span><span class="default">$property</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$section </span><span class="keyword">=&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">properties</span><span class="keyword">[</span><span class="default">$section_name</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$property</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$section </span><span class="keyword">=&amp; </span><span class="default">$properties</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$section</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$section</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$section</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43457">  
  <a class="name">
  <strong class="user"><em>php at isaacschlueter dot com</em></strong></a><div class="date" title="2004-06-21 11:47"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43457">
<div class="phpcode"><code><span class="html">
Even better than putting the <span class="default">&lt;?php at the head of the file is to </span><span class="keyword">do </span><span class="default">something like this</span><span class="keyword">:<br><br>--</span><span class="default">config</span><span class="keyword">.</span><span class="default">ini</span><span class="keyword">.</span><span class="default">php</span><span class="keyword">--<br>; &lt;?</span><span class="default">php </span><span class="keyword">die( </span><span class="string">'Please do not access this page directly.' </span><span class="keyword">); </span><span class="default">?&gt;<br></span>; This is the settings page, do not modify the above line.<br>setting = value<br>...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114842">  
  <a class="name">
  <strong class="user"><em>Rekam</em></strong></a><div class="date" title="2014-04-13 09:59"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114842">
<div class="phpcode"><code><span class="html">
You may want, in some very special cases, to parse multi-dimensional array with N levels in your ini file. Something like setting[data][config][debug] = true will result in an error (expected "=").<br><br>Here's a little function to match this, using dots (customizable).<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parse_ini_file_multi</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$process_sections </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$scanner_mode </span><span class="keyword">= </span><span class="default">INI_SCANNER_NORMAL</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$explode_str </span><span class="keyword">= </span><span class="string">'.'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$escape_char </span><span class="keyword">= </span><span class="string">"'"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">// load ini file the normal way<br>&nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$process_sections</span><span class="keyword">, </span><span class="default">$scanner_mode</span><span class="keyword">);<br>&nbsp; &nbsp; if (!</span><span class="default">$process_sections</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= array(</span><span class="default">$data</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$section_key </span><span class="keyword">=&gt; </span><span class="default">$section</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// loop inside the section<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$section </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$explode_str</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) !== </span><span class="default">$escape_char</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// key has a dot. Explode on it, then parse each subkeys<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // and set value at the right place thanks to references<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sub_keys </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$explode_str</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subs </span><span class="keyword">=&amp; </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$section_key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$sub_keys </span><span class="keyword">as </span><span class="default">$sub_key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$subs</span><span class="keyword">[</span><span class="default">$sub_key</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subs</span><span class="keyword">[</span><span class="default">$sub_key</span><span class="keyword">] = [];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subs </span><span class="keyword">=&amp; </span><span class="default">$subs</span><span class="keyword">[</span><span class="default">$sub_key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// set the value at the right place<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subs </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// unset the dotted key, we don't need it anymore<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">unset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$section_key</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// we have escaped the key, so we keep dots as they are<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_key </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$escape_char</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$section_key</span><span class="keyword">][</span><span class="default">$new_key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$data</span><span class="keyword">[</span><span class="default">$section_key</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (!</span><span class="default">$process_sections</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">$data</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$data</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>The following file:<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>[normal]<br>foo = bar<br>; use quotes to keep your key as it is<br>'foo.with.dots' = true<br><br>[array]<br>foo[] = 1<br>foo[] = 2<br><br>[dictionary]<br>foo[debug] = false<br>foo[path] = /some/path<br><br>[multi]<br>foo.data.config.debug = true<br>foo.data.password = 123456<br>*/<br></span><span class="default">?&gt;<br></span><br>will result in:<br><span class="default">&lt;?php<br>parse_ini_file_multi</span><span class="keyword">(</span><span class="string">'file.ini'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br>Array<br>(<br>&nbsp; &nbsp; [</span><span class="default">normal</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">foo</span><span class="keyword">] =&gt; </span><span class="default">bar<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">foo</span><span class="keyword">.</span><span class="default">with</span><span class="keyword">.</span><span class="default">dots</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; [array] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">foo</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; [</span><span class="default">dictionary</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">foo</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">debug</span><span class="keyword">] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">path</span><span class="keyword">] =&gt; /</span><span class="default">some</span><span class="keyword">/</span><span class="default">path<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; [</span><span class="default">multi</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">foo</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">data</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">config</span><span class="keyword">] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">debug</span><span class="keyword">] =&gt; </span><span class="default">1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">password</span><span class="keyword">] =&gt; </span><span class="default">123456<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>)<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114823">  
  <a class="name">
  <strong class="user"><em>mgcummings at yahoo dot SPAMNO dot com</em></strong></a><div class="date" title="2014-04-10 02:48"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114823">
<div class="phpcode"><code><span class="html">
Not mentioned in docs about constants but 'magic' constants do NOT work. So for example:<br><br>// __DIR__ = /my/web/site/app<br>log_file = __DIR__"/app.log"<br><br>Gives you just "__DIR__/app.log" with NO replacement.<br><br>Make sense it should NOT work as there would be question if it should be set to path of PHP file making the call or the path of the 'ini' file. Though the last might be useful the first generally would NOT be if you parse the file several different places in your code etc.<br><br>Tested in PHP 5.4.26</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37293">  
  <a class="name">
  <strong class="user"><em>waikeatNOSPAM at archerlogic dot com</em></strong></a><div class="date" title="2003-11-09 06:37"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37293">
<div class="phpcode"><code><span class="html">
I found that this function will not work on remote files.
<br>I tried 
<br>
<br>$someArray = parse_ini_file("<a rel="nofollow" target="_blank">http://www.example.com/setting.ini</a>");
<br>
<br>and it reports
<br>
<br>Cannot Open '<a rel="nofollow" target="_blank">http://www.example.com/setting.ini</a>' for reading ...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112737">  
  <a class="name">
  <strong class="user"><em>yicktan</em></strong></a><div class="date" title="2013-07-18 01:45"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112737">
<div class="phpcode"><code><span class="html">
This combo works best for me.<br><br><span class="default">&lt;?php<br><br>$inifile </span><span class="keyword">= </span><span class="string">"config.php"</span><span class="keyword">;<br></span><span class="default">$inivalue </span><span class="keyword">= </span><span class="default">get_parse_ini</span><span class="keyword">(</span><span class="default">$inifile</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$inivalue</span><span class="keyword">);<br></span><span class="default">$inivalue</span><span class="keyword">[</span><span class="string">'config'</span><span class="keyword">][</span><span class="string">'length'</span><span class="keyword">]=</span><span class="default">6</span><span class="keyword">;<br></span><span class="default">put_ini_file</span><span class="keyword">(</span><span class="string">"config.php"</span><span class="keyword">, </span><span class="default">$inivalue</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">);<br><br>function </span><span class="default">get_parse_ini</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br>{<br><br>&nbsp; &nbsp; </span><span class="comment">// if cannot open file, return false<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// to hold the categories, and within them the entries<br>&nbsp; &nbsp; </span><span class="default">$cats </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$ini </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (@</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\[(.+)\]/'</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (@</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(.+)=(.+)/'</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cats</span><span class="keyword">[</span><span class="default">$last</span><span class="keyword">][</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$cats</span><span class="keyword">;<br><br>}<br><br>function </span><span class="default">put_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br>&nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br>&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">).</span><span class="string">"[</span><span class="default">$k</span><span class="string">]\r\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">put_ini_file</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }else<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">).</span><span class="string">"</span><span class="default">$k</span><span class="string"> = </span><span class="default">$v</span><span class="string">\r\n"</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; <br>&nbsp; </span><span class="default">$phpstr </span><span class="keyword">= </span><span class="string">"&lt;?PHP\r\n/*\r\n"</span><span class="keyword">.</span><span class="default">$str</span><span class="keyword">.</span><span class="string">"*/\r\n?&gt;"</span><span class="keyword">;<br>&nbsp; <br> if(</span><span class="default">$file</span><span class="keyword">)<br>&nbsp; &nbsp; return </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">$phpstr</span><span class="keyword">);<br>&nbsp; else<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>here is the config.php file<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>;Commented line start with ';'<br>[config]<br>admin = root<br>pass = pass<br>email = social@facebook.com<br>length = 4<br>block = 4<br>seperation = -<br>*/<br></span><span class="default">?&gt;<br></span><br>Test it out yourself</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112510">  
  <a class="name">
  <strong class="user"><em>michel</em></strong></a><div class="date" title="2013-06-24 11:41"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112510">
<div class="phpcode"><code><span class="html">
note configuration files should be stored outside you www-root/htdocs folder</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111459">  
  <a class="name">
  <strong class="user"><em>simon dot riget at gmail dot com</em></strong></a><div class="date" title="2013-02-21 07:23"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111459">
<div class="phpcode"><code><span class="html">
.ini files or JSON file format as it is also known as, are very useful format to store stuff in. Especially large arrays. <br><br>Strangely enough there is this nice function to read the file, but no function to write it.<br><br>So here is one.<br><br>Use it as:&nbsp; put_ini_file(string $file, array $array)<br><br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">put_ini_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br>&nbsp; </span><span class="default">$str</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">;<br>&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">).</span><span class="string">"[</span><span class="default">$k</span><span class="string">]"</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">put_ini_file</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }else<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">.=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">).</span><span class="string">"</span><span class="default">$k</span><span class="string"> = </span><span class="default">$v</span><span class="string">"</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">; <br>&nbsp; }<br> if(</span><span class="default">$file</span><span class="keyword">)<br>&nbsp; &nbsp; return </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; else<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="27264">  
  <a class="name">
  <strong class="user"><em>fbeyer at clickhand dot de</em></strong></a><div class="date" title="2002-11-29 09:37"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom27264">
<div class="phpcode"><code><span class="html">
Besides the features mentioned above (eg. core constants, booleans), you can also access user-defined constants in ini files! This is handy if you want to create a bit-field, for example:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// Define pizza toppings
<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PIZZA_HAM'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">1</span><span class="keyword">);
<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PIZZA_PINEAPPLE'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="default">2</span><span class="keyword">);
<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PIZZA_ONION'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">4</span><span class="keyword">);
<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PIZZA_MOZARELLA'</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="default">8</span><span class="keyword">);
<br></span><span class="default">define</span><span class="keyword">(</span><span class="string">'PIZZA_GARLIC'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">16</span><span class="keyword">);
<br>
<br></span><span class="comment">// Read predefined pizzas
<br></span><span class="default">$pizzas </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'pizzas.ini'</span><span class="keyword">);
<br>
<br>if (</span><span class="default">$pizzas</span><span class="keyword">[</span><span class="default">$user_pizza</span><span class="keyword">] &amp; </span><span class="default">PIZZA_ONION</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="comment">// Add onions to the pizza
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>[pizzas]
<br>
<br>; Define pizzas
<br>hawaii = PIZZA_HAM | PIZZA_PINEAPPLE
<br>stinky = PIZZA_ONION | PIZZA_GARLIC</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108656">  
  <a class="name">
  <strong class="user"><em>julien dot moquet at interieur dot gouv dot fr</em></strong></a><div class="date" title="2012-05-15 10:08"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108656">
<div class="phpcode"><code><span class="html">
In order to set a " in ini files, you may follow that trick :<br><br>The yourfilename.ini file :<br><br>[yoursectionhere]<br>somevalue = "This "QUOTE"string"QUOTE" has quotes"<br><br>The PHP code :<br><br><span class="default">&lt;?php<br>define</span><span class="keyword">(</span><span class="string">'QUOTE'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">);<br><br></span><span class="default">$aInifile </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'yourfilename.ini'</span><span class="keyword">, </span><span class="string">'yoursectionhere'</span><span class="keyword">);<br>echo </span><span class="string">'test : ' </span><span class="keyword">. </span><span class="default">$aInifile</span><span class="keyword">[</span><span class="string">'yoursectionhere'</span><span class="keyword">][</span><span class="string">'somevalue'</span><span class="keyword">];<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108531">  
  <a class="name">
  <strong class="user"><em>miguelgilmartinez at gmail dot com</em></strong></a><div class="date" title="2012-05-04 07:55"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108531">
<div class="phpcode"><code><span class="html">
This function won't work if you try to parse a file with an extension which is not ".ini". It won't work if your filename is config.cfg, for instance. In this case, it will return array(0)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105426">  
  <a class="name">
  <strong class="user"><em>jerikojerk</em></strong></a><div class="date" title="2011-08-16 02:51"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105426">
<div class="phpcode"><code><span class="html">
Please note that despite the changelog telling nothing about it, the parse_ini_file() changed <br>-&gt; the way it interprets the simple quote (not accepted on my 5.1 php)<br>-&gt; array index. PHP 5.3 accepts the following but not php 5.1<br><br>[section]<br>param["index"]='value'<br>param["other index"]='other value'</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102266">  
  <a class="name">
  <strong class="user"><em>Alex - webitoria.com</em></strong></a><div class="date" title="2011-02-04 03:56"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102266">
<div class="phpcode"><code><span class="html">
Constants in ini files are not expanded if they are concatenated with strings quoted with single quotes, they must be in double quotes only to make constants expanded.<br><br>Example:<br><br>define ('APP_PATH', '/some/path');<br><br>mypath = APP_PATH '/config'<br>// Constant won't be expanded: [mypath] =&gt; APP_PATH '/config'<br><br>mypath = APP_PATH "/config"<br>// Constant will be expanded: [mypath] =&gt; /some/path/config<br><br>Note "." between constant and following string is not used.<br><br>Since Zend_Config_Ini is built on parse_ini_file, it inherits this behaviour.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99943">  
  <a class="name">
  <strong class="user"><em>uramihsayibok, gmail, com</em></strong></a><div class="date" title="2010-09-16 01:10"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99943">
<div class="phpcode"><code><span class="html">
Undocumented feature!<br><br>Using ${...} as a value will look to<br>1) an INI setting, or<br>2) an environment variable<br><br>For example,<br><br><span class="default">&lt;?php<br><br>print_r</span><span class="keyword">(</span><span class="default">parse_ini_string</span><span class="keyword">(</span><span class="string">'<br>php_ext_dir = ${extension_dir}<br>operating_system = ${OS}<br>'</span><span class="keyword">));<br><br></span><span class="default">?&gt;<br></span><br>Array<br>(<br>&nbsp; &nbsp; [php_ext_dir] =&gt; ./ext/<br>&nbsp; &nbsp; [operating_system] =&gt; Windows_NT<br>)<br><br>Present in PHP 5.3.2, likely in 5.x, maybe even earlier too.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98438">  
  <a class="name">
  <strong class="user"><em>forcestudios.square7.de</em></strong></a><div class="date" title="2010-06-15 12:46"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98438">
<div class="phpcode"><code><span class="html">
Tip: you cannot parse an ini-file with this safer structure:<br><br><span class="default">&lt;?php </span><span class="keyword">exit();<br></span><span class="default">$data</span><span class="keyword">=</span><span class="string">"<br><br>[section_one]<br>test = abc<br><br>[section_two]<br>and_so=on<br><br>"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>(strangers are not able to see this file because php closed the file previously by executing exit();)<br><br>But here is a very simple code to prevent this:<br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">class </span><span class="default">iniParser</span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; private </span><span class="default">$IniFile</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; private </span><span class="default">$SafeFile</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; private </span><span class="default">$ParseClasses</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; public </span><span class="default">$KeysWithoutSections</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; public </span><span class="default">$KeysWithSections</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$FileName</span><span class="keyword">, </span><span class="default">$SafeFile </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">IniFile </span><span class="keyword">= </span><span class="default">$FileName</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SafeFile </span><span class="keyword">= </span><span class="default">$SafeFile</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; public function </span><span class="default">parseIni</span><span class="keyword">(</span><span class="default">$SaveInClass </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$FileHandle </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">IniFile</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CountLines </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$FileHandle</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$NKeys </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SafeFile </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Counter </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CountLines </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ( </span><span class="default">$Counter </span><span class="keyword">&lt; </span><span class="default">$CountLines </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurLine </span><span class="keyword">= </span><span class="default">$FileHandle</span><span class="keyword">[</span><span class="default">$Counter</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurLineSplit </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$CurLine</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurKey </span><span class="keyword">= </span><span class="default">$CurLineSplit</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurValue </span><span class="keyword">= </span><span class="default">$CurLineSplit</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$SaveInClass </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Keys</span><span class="keyword">[</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$CurKey</span><span class="keyword">)] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$CurValue</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$NKeys</span><span class="keyword">[</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$CurKey</span><span class="keyword">)] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$CurValue</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Counter</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">$SaveInClass </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">KeysWithoutSections</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$NKeys</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; public function </span><span class="default">parseIniWithSections</span><span class="keyword">(</span><span class="default">$SaveInClass </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$FileHandle </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">IniFile</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CountLines </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$FileHandle</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$LastSection </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$NKeys </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SafeFile </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CountLines </span><span class="keyword">-= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Counter </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ( </span><span class="default">$Counter </span><span class="keyword">&lt; </span><span class="default">$CountLines </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurLine </span><span class="keyword">= </span><span class="default">$FileHandle</span><span class="keyword">[</span><span class="default">$Counter</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$CurLine</span><span class="keyword">, </span><span class="string">"["</span><span class="keyword">) == </span><span class="default">1 </span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$LastSection </span><span class="keyword">= </span><span class="default">$CurLine</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Explosion </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$CurLine</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurKey </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$Explosion</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$CurValue </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$Explosion</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$SaveInClass </span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">KeysWithSections</span><span class="keyword">[</span><span class="default">$LastSection</span><span class="keyword">][</span><span class="default">$CurKey</span><span class="keyword">] = </span><span class="default">$CurValue</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$NKeys</span><span class="keyword">[</span><span class="default">$LastSection</span><span class="keyword">][</span><span class="default">$CurKey</span><span class="keyword">] = </span><span class="default">$CurValue</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$SaveInClass </span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">KeysWithSections</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$NKeys</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; };<br><br></span><span class="default">?&gt;<br></span><br>To use this class just try this script here:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">include </span><span class="string">"iniparser.php" </span><span class="comment">// class above<br><br></span><span class="default">$SafeIniParser </span><span class="keyword">= new </span><span class="default">iniParser</span><span class="keyword">(</span><span class="string">"test.php"</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">); </span><span class="comment">// file: test.php, safefile.<br><br></span><span class="default">$Keys </span><span class="keyword">= </span><span class="default">$SafeIniParser</span><span class="keyword">-&gt;</span><span class="default">parseIniWithSections</span><span class="keyword">(</span><span class="default">false</span><span class="keyword">);<br><br>echo </span><span class="default">$Keys</span><span class="keyword">[</span><span class="string">"section_one"</span><span class="keyword">][</span><span class="string">"test"</span><span class="keyword">];<br><br></span><span class="default">?&gt;<br></span><br>i used this file:<br><span class="default">&lt;?php </span><span class="keyword">exit();<br></span><span class="default">$data</span><span class="keyword">=</span><span class="string">"<br><br>[section_one]<br>test = abc<br><br>[section_two]<br>and_so=on<br><br>"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93807">  
  <a class="name">
  <strong class="user"><em>prometheus</em></strong></a><div class="date" title="2009-09-30 09:32"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93807">
<div class="phpcode"><code><span class="html">
I made a small test to check differencies between parse_ini_file and json_decode and I surprised a little bit.<br><br>Here are my test files...<br>parseini-test.ini:<br>[global]<br>a = 1<br>b = 2<br>c = "Lorem Ipsum"<br>d = "Dolor Sit Amet"<br>e = 3.14<br><br>jsondecode-test.json:<br>{<br>&nbsp; &nbsp; "a": 1,<br>&nbsp; &nbsp; "b": 2,<br>&nbsp; &nbsp; "c": "Lorem Ipsum",<br>&nbsp; &nbsp; "d": "Dolor Sit Amet",<br>&nbsp; &nbsp; "e": 3.14<br>}<br><br>And source codes are...<br>parseini.php:<br><span class="default">&lt;?php<br><br>$s </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br></span><span class="default">$a </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'./parseini-test.ini'</span><span class="keyword">);<br>unset(</span><span class="default">$a</span><span class="keyword">);<br>}<br></span><span class="default">$e </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>echo </span><span class="default">$e</span><span class="keyword">-</span><span class="default">$s</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>jsondecode.php:<br><span class="default">&lt;?php<br><br>$s </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">100000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br></span><span class="default">$a </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'./jsondecode-test.json'</span><span class="keyword">), </span><span class="default">TRUE</span><span class="keyword">);<br>unset(</span><span class="default">$a</span><span class="keyword">);<br>}<br></span><span class="default">$e </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>echo </span><span class="default">$e</span><span class="keyword">-</span><span class="default">$s</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>These tests ran for three times (the third result is near to average in my experiences):<br>- parseini.php: 3.24759721756<br>- jsondecode.php: 3.289290905<br><br>My conclusion:<br>I`m going to use the json_decode() for reading config files because no significant difference in running time between parse_ini_file() and json_decode() + file_get_contents() but JSON is a more powerful format for storing well typed (parse_ini_file parses 3.14 as string, json_decode as float) and well structured configuration settings. As a note: json_decode is sensitive for associative keys` quotation, use quotes at all time in keys` names.<br><br>Test ran on PHP 5.2.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93148">  
  <a class="name">
  <strong class="user"><em>flacroix897 at hotmail dot com</em></strong></a><div class="date" title="2009-08-25 10:23"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93148">
<div class="phpcode"><code><span class="html">
Make sure you use double-quotes when using spaces in a value as of 5.3.<br><br>Consider the following INI file:<br><br>&nbsp;&nbsp; key = tested on php5<br><br>with the following code:<br><br>&nbsp;&nbsp; $res = parse_ini_file('myini.ini');<br>&nbsp;&nbsp; var_dump($res);<br><br>In 5.2, this will give you:<br><br>&nbsp;&nbsp; array(1) {<br>&nbsp; &nbsp;&nbsp; ["key"]=&gt;<br>&nbsp; &nbsp;&nbsp; string(14) "tested on php5"<br>&nbsp;&nbsp; }<br><br>In 5.3, this will give you:<br><br>&nbsp;&nbsp; Warning: syntax error, unexpected BOOL_TRUE in Unknown on line 1 in test.php on line 3<br>&nbsp;&nbsp; bool(false)<br><br>This is because the 'on' word is a reserved keyword for boolean TRUE. The documentation now states that a string that contains any non-alphanumeric character should be enclosed in double-quotes (a space is not alphanumeric).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91629">  
  <a class="name">
  <strong class="user"><em>joe at u13 dot net</em></strong></a><div class="date" title="2009-06-20 12:46"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91629">
<div class="phpcode"><code><span class="html">
I'm not sure why, but for some reason php's ini functions always leave out entries for me. <br><br>To solve this problem, I wrote my own ini parsing function, intended to be a replacement for parse_ini_file('file.ini', true);<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">new_parse_ini</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">)<br>{<br><br>&nbsp; &nbsp; </span><span class="comment">// if cannot open file, return false<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$ini </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">// to hold the categories, and within them the entries<br>&nbsp; &nbsp; </span><span class="default">$cats </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$ini </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (@</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\[(.+)\]/'</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (@</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(.+)=(.+)/'</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cats</span><span class="keyword">[</span><span class="default">$last</span><span class="keyword">][</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]] = </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$cats</span><span class="keyword">;<br><br>}<br><br></span><span class="default">?&gt;<br></span><br>The usage follows the Example #2 on <a rel="nofollow" target="_blank">http://us3.php.net/manual/en/function.parse-ini-file.php</a> , except without the second parameter being 'true'.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89867">  
  <a class="name">
  <strong class="user"><em>prikkeldraad at gmail dot com</em></strong></a><div class="date" title="2009-03-26 06:15"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89867">
<div class="phpcode"><code><span class="html">
When PHP dies without any warning or message when parsing the ini-file, check the values of the file. All non alphanumeric values need to be quoted.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84886">  
  <a class="name">
  <strong class="user"><em>david dot dyess at gmail dot com</em></strong></a><div class="date" title="2008-08-04 12:12"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84886">
<div class="phpcode"><code><span class="html">
Here is another way to group values in the ini:
<br>
<br>my.ini:
<br>
<br>[singles]
<br>test = a test
<br>test2 = another test
<br>test3 = this is a test too
<br>
<br>[multiples]
<br>tests[] = a test
<br>tests[] = another test
<br>tests[] = this is a test too
<br>
<br>my.php:
<br>
<br><span class="default">&lt;?php $init </span><span class="keyword">= </span><span class="default">parse_ini_file</span><span class="keyword">(</span><span class="string">'my.ini'</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>The same as:
<br>
<br><span class="default">&lt;?php
<br>$init</span><span class="keyword">[</span><span class="string">'test'</span><span class="keyword">] = </span><span class="string">'a test'</span><span class="keyword">;
<br></span><span class="default">$init</span><span class="keyword">[</span><span class="string">'test2'</span><span class="keyword">] = </span><span class="string">'another test'</span><span class="keyword">;
<br></span><span class="default">$init</span><span class="keyword">[</span><span class="string">'test3'</span><span class="keyword">] = </span><span class="string">'this is a test too'</span><span class="keyword">;
<br></span><span class="default">$init</span><span class="keyword">[</span><span class="string">'tests'</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">] = </span><span class="string">'a test'</span><span class="keyword">;
<br></span><span class="default">$init</span><span class="keyword">[</span><span class="string">'tests'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'another test'</span><span class="keyword">;
<br></span><span class="default">$init</span><span class="keyword">[</span><span class="string">'tests'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'this is a test too'</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>This works with the bool set to true also, can be useful with loops. Works with the bool set to true as well.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78723">  
  <a class="name">
  <strong class="user"><em>www.onphp5.com</em></strong></a><div class="date" title="2007-10-24 01:26"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78723">
<div class="phpcode"><code><span class="html">
Looks like in PHP 5.3.0 special characters like \n are extrapolated into real newlines. Gotta use \\n.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78221">  
  <a class="name">
  <strong class="user"><em>arnapou</em></strong></a><div class="date" title="2007-10-03 06:51"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78221">
<div class="phpcode"><code><span class="html">
I didn't find a simple ini class so I wrote that class to read and write ini files.<br>I hope it could help you.<br><br>Read file : $ini = INI::read('myfile.ini');<br>Write file : INI::write('myfile.ini', $ini);<br><br>Features : <br>- support [] syntax for arrays<br>- support . in keys like bar.foo.something = value<br>- true and false string are automatically converted in booleans<br>- integers strings are automatically converted in integers<br>- keys are sorted when writing<br>- constants are replaced but they should be written in the ini file between braces : {MYCONSTANT}<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">INI </span><span class="keyword">{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; WRITE<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">write</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$ini</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">.= </span><span class="string">'['</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">"]\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">.= </span><span class="default">INI</span><span class="keyword">::</span><span class="default">write_get_string</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="string">''</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">file_put_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; write get string<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">write_get_string</span><span class="keyword">(&amp; </span><span class="default">$ini</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$ini </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">.= </span><span class="default">INI</span><span class="keyword">::</span><span class="default">write_get_string</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">.= </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">' = '</span><span class="keyword">.</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">"\\\n"</span><span class="keyword">, </span><span class="default">INI</span><span class="keyword">::</span><span class="default">set_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)).</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; manage keys<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">set_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) { return </span><span class="string">'true'</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) { return </span><span class="string">'false'</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; READ<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">read</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ini </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lines </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$section </span><span class="keyword">= </span><span class="string">'default'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$multi </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) !== </span><span class="string">';'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^\[(.*)\]/'</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$section </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">$multi </span><span class="keyword">=== </span><span class="string">'' </span><span class="keyword">&amp;&amp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^([a-z0-9_.\[\]-]+)\s*=\s*(.*)$/i'</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) !== </span><span class="string">"\\"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INI</span><span class="keyword">::</span><span class="default">manage_keys</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$section</span><span class="keyword">], </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$multi </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$multi </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">$multi </span><span class="keyword">!== </span><span class="string">''</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">) === </span><span class="string">"\\"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$multi </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INI</span><span class="keyword">::</span><span class="default">manage_keys</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$section</span><span class="keyword">], </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$multi</span><span class="keyword">.</span><span class="default">$line</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$multi </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$buf </span><span class="keyword">= </span><span class="default">get_defined_constants</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$consts </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$buf</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$consts</span><span class="keyword">[</span><span class="string">'{'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'}'</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">, array(</span><span class="string">'INI'</span><span class="keyword">, </span><span class="string">'replace_consts'</span><span class="keyword">), </span><span class="default">$consts</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ini</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; manage keys<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">get_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^-?[0-9]$/i'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">)) { return </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); } <br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) === </span><span class="string">'true'</span><span class="keyword">) { return </span><span class="default">true</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) === </span><span class="string">'false'</span><span class="keyword">) { return </span><span class="default">false</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^"(.*)"$/i'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) { return </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^\'(.*)\'$/i'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) { return </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; manage keys<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">get_key</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0-9]$/i'</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">)) { return </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">); }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; manage keys<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">manage_keys</span><span class="keyword">(&amp; </span><span class="default">$ini</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^([a-z0-9_-]+)\.(.*)$/i'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">INI</span><span class="keyword">::</span><span class="default">manage_keys</span><span class="keyword">(</span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]], </span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^([a-z0-9_-]+)\[(.*)\]$/i'</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] !== </span><span class="string">''</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]][</span><span class="default">INI</span><span class="keyword">::</span><span class="default">get_key</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])] = </span><span class="default">INI</span><span class="keyword">::</span><span class="default">get_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ini</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]][] = </span><span class="default">INI</span><span class="keyword">::</span><span class="default">get_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ini</span><span class="keyword">[</span><span class="default">INI</span><span class="keyword">::</span><span class="default">get_key</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)] = </span><span class="default">INI</span><span class="keyword">::</span><span class="default">get_value</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; *&nbsp; replace utility<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">static function </span><span class="default">replace_consts</span><span class="keyword">(&amp; </span><span class="default">$item</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$consts</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$consts</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75356">  
  <a class="name">
  <strong class="user"><em>Mildred</em></strong></a><div class="date" title="2007-05-25 12:42"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75356">
<div class="phpcode"><code><span class="html">
I wrote few functions to work with ini files.<br><br>The function make_ini_file($array, &amp;$errors)<br>The function read_ini($file)<br>The function prepare_ini($array, $maxdepth=NULL)<br><br>The function prepare_ini($array, $maxdepth=NULL)<br>This function will take an array as returned by the function read_ini() and will return an array as needed by the function make_ini_file() so that you can write extanded ini files easily.<br>If maxdepth is not given (or if maxdepth is NULL), this function will try to create sections so the keys in the sections do not have dots. if maxdepth is given, it will create sections with $maxdepth members in them (or less if it is not possible). It won't use the special key name "."<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">prepare_ini</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$res </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">prepare_ini__1</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$res</span><span class="keyword">;<br>}<br><br>function </span><span class="default">prepare_ini__1</span><span class="keyword">(<br>&nbsp; &nbsp; &amp;</span><span class="default">$res</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$prefix1</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">, </span><span class="default">$prefix2</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$self</span><span class="keyword">=</span><span class="string">'prepare_ini__1'</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$maxdepth</span><span class="keyword">) or </span><span class="default">$depth </span><span class="keyword">&lt; </span><span class="default">$maxdepth</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newprefix </span><span class="keyword">= </span><span class="default">$prefix1 </span><span class="keyword">? </span><span class="string">"</span><span class="default">$prefix1</span><span class="string">.</span><span class="default">$key</span><span class="string">" </span><span class="keyword">: </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$self</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">, </span><span class="default">$newprefix</span><span class="keyword">, </span><span class="default">$prefix2</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newprefix </span><span class="keyword">= </span><span class="default">$prefix2 </span><span class="keyword">? </span><span class="string">"</span><span class="default">$prefix1</span><span class="string">.</span><span class="default">$key</span><span class="string">" </span><span class="keyword">: </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$self</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">, </span><span class="default">$prefix1</span><span class="keyword">, </span><span class="default">$newprefix</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newprefix </span><span class="keyword">= </span><span class="default">$prefix2 </span><span class="keyword">? </span><span class="string">"</span><span class="default">$prefix2</span><span class="string">.</span><span class="default">$key</span><span class="string">" </span><span class="keyword">: </span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!isset(</span><span class="default">$res</span><span class="keyword">[</span><span class="default">$prefix1</span><span class="keyword">])) </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$prefix1</span><span class="keyword">] = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">[</span><span class="default">$prefix1</span><span class="keyword">][</span><span class="default">$newprefix</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">// kate: indent-width 4; tab-width 8; space-indent on;<br>// kate: replace-tabs off; remove-trailing-space on;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74152">  
  <a class="name">
  <strong class="user"><em>mark at hostcobalt dot com</em></strong></a><div class="date" title="2007-03-27 12:39"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74152">
<div class="phpcode"><code><span class="html">
or to prevent the file being viewed you can just use a .htaccess file and add this line<br><br>&lt;files *.ini&gt;<br>order deny,allow<br>deny from all<br>&lt;/files&gt;<br><br>i use a similar thing to prevent my config files being accessed</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71188">  
  <a class="name">
  <strong class="user"><em>ant at loadtrax dot com</em></strong></a><div class="date" title="2006-11-15 09:09"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71188">
<div class="phpcode"><code><span class="html">
A number of posts mention using pear::Config as a replacement for this function. Note however that internally it uses parse_ini_file to read the ini file, so it suffers from the same limitations.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61960">  
  <a class="name">
  <strong class="user"><em>nbraczek at bsds dot de</em></strong></a><div class="date" title="2006-02-15 04:29"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61960">
<div class="phpcode"><code><span class="html">
Beside the mentioned reserved words 'null', 'yes', 'no', 'true', and 'false', also 'none' seems to be a reserved word. Parsing an ini file stops at a key named 'none'.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61875">  
  <a class="name">
  <strong class="user"><em>mauder[remove] at [remove]gmail[remove] dot com</em></strong></a><div class="date" title="2006-02-14 04:31"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61875">
<div class="phpcode"><code><span class="html">
Be careful if you put any .ini file in your readable directories, if somebody would know the name (e.g. if your application is widely used), the webserver might return it as plain text.<br><br>For example : your database username and password could be exposed, if it is stored in that file !<br><br>To prevent this from happening :<br>- give the file .php extension :&nbsp; "my.ini.php"<br>- put ';&lt;?php' (without quotes and without X between X and php) on first line <br>- put ';?&gt;' on last line<br><br>The server would run the ini file as being PHP-code, but will do nothing due to bad syntax, preventing the content from being exosed.<br>On the other hand, it is still a valid .ini file...<br><br>HTH !</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57075">  
  <a class="name">
  <strong class="user"><em></em></strong></a><div class="date" title="2005-09-22 01:53"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57075">
<div class="phpcode"><code><span class="html">
I wrote a replacement function with following changes:<br>-It allows quotes and double quotes.<br>-It detects wether your .ini file has sections or not.<br>-It will read until eof in any case, even if a line contains errors.<br><br>I know it can be improved a lot, so feel free to work on it and, please, notify me if you do.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parse_ini_file_quotes_safe</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">)<br>{<br> </span><span class="default">$r</span><span class="keyword">=</span><span class="default">$null</span><span class="keyword">;<br> </span><span class="default">$sec</span><span class="keyword">=</span><span class="default">$null</span><span class="keyword">;<br> </span><span class="default">$f</span><span class="keyword">=@</span><span class="default">file</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);<br> for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;@</span><span class="default">count</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++)<br> {<br>&nbsp; </span><span class="default">$newsec</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; </span><span class="default">$w</span><span class="keyword">=@</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; if (</span><span class="default">$w</span><span class="keyword">)<br>&nbsp; {<br>&nbsp;&nbsp; if ((!</span><span class="default">$r</span><span class="keyword">) or (</span><span class="default">$sec</span><span class="keyword">))<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; if ((@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)==</span><span class="string">"["</span><span class="keyword">) and (@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">))==</span><span class="string">"]"</span><span class="keyword">) {</span><span class="default">$sec</span><span class="keyword">=@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,@</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">)-</span><span class="default">2</span><span class="keyword">);</span><span class="default">$newsec</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;}<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; if (!</span><span class="default">$newsec</span><span class="keyword">)<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$w</span><span class="keyword">=@</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">);</span><span class="default">$k</span><span class="keyword">=@</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);unset(</span><span class="default">$w</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$v</span><span class="keyword">=@</span><span class="default">trim</span><span class="keyword">(@</span><span class="default">implode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">));<br>&nbsp; &nbsp; if ((@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)==</span><span class="string">"\""</span><span class="keyword">) and (@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)==</span><span class="string">"\""</span><span class="keyword">)) {</span><span class="default">$v</span><span class="keyword">=@</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,@</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)-</span><span class="default">2</span><span class="keyword">);}<br>&nbsp; &nbsp; if (</span><span class="default">$sec</span><span class="keyword">) {</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$sec</span><span class="keyword">][</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;} else {</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;}<br>&nbsp;&nbsp; }<br>&nbsp; }<br> }<br> return </span><span class="default">$r</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54140">  
  <a class="name">
  <strong class="user"><em>dreamscape</em></strong></a><div class="date" title="2005-06-24 09:10"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54140">
<div class="phpcode"><code><span class="html">
I handy function to allow values with new lines if you are PHP4, is the following:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">prepareIniNl</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\r\n|\n|\r)/"</span><span class="keyword">, </span><span class="string">"\\n"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Now, when writing your INI file, parse the value through the function and it will turn for example:<br><br>Value line 1<br>Value line 2<br><br>Into literally:<br><br>Value line 1\nValue line 2<br><br>Which is stored as a single line in the INI file.&nbsp; And when you read the INI file back into PHP, the \n will be parsed and you're value will be back to:<br><br>Value line 1<br>Value line 2</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44115">  
  <a class="name">
  <strong class="user"><em>hfuecks at phppatterns dot com</em></strong></a><div class="date" title="2004-07-15 08:20"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44115">
<div class="phpcode"><code><span class="html">
parse_ini_file seems to have changed it's signature between PHP 4.3.x and PHP 5.0.0 (can't find any relevant changelog / cvs entries referring to this).<br><br>In PHP 4.3.x and below return value was a boolean FALSE if the ini file could not be found. With PHP 5.0.0 the return value is an empty array if the file is not found.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33249">  
  <a class="name">
  <strong class="user"><em>dshearin at excite dot com</em></strong></a><div class="date" title="2003-06-19 08:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33249">
<div class="phpcode"><code><span class="html">
I found another pitfall to watch out for. The key (to the left of the equal sign) can't be the same as one of the predefined values, like yes, no, on, off, etc. I was working on a script that read in an ini file that matched the country codes of top level domains to the full name of the country. I kept getting a parse error everytime it got to the entry for Norway ("no"). I fixed the problem by sticking a dot in front of each of the country codes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28261">  
  <a class="name">
  <strong class="user"><em>kieran dot huggins at rogers dot com</em></strong></a><div class="date" title="2003-01-07 10:24"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28261">
<div class="phpcode"><code><span class="html">
Just a quick note for all those running into trouble escaping double quotes:<br><br>I got around this by "base64_encode()"-ing my content on the way in to the ini file, and "base64_decode()"-ing on the way out.<br><br>Because base64 uses the "=" sign, you will have to encapsulate the entire value in double quotes so the line looks like this:<br><br>&nbsp; &nbsp; varname = "TmlhZ2FyYSBGYWxscywgT04="<br><br>When base64'd, your strings will retain all \n, \t...etc...&nbsp; URL's retain everything perfectly :-)<br><br>I hope some of you find this useful!<br><br>Cheers, Kieran</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.parse-ini-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:47 GMT -->


</body></html>