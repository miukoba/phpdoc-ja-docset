<html><!-- Mirrored from php.net/manual/en/ref.xslt.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:01 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>XSLT (PHP 4) Functions</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.xslt.html">
 <link rel="shorturl" href="http://php.net/xslt">
 <link rel="alternate" href="http://php.net/xslt" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.xslt.html">
 <link rel="prev" href="xslt.constants.html">
 <link rel="next" href="function.xslt-backend-info.html">

 <link rel="alternate" href="ref.xslt.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/ref.xslt.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/ref.xslt.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/ref.xslt.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/ref.xslt.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/ref.xslt.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/ref.xslt.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/ref.xslt.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/ref.xslt.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/ref.xslt.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/ref.xslt.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xslt.html">XSLT (PHP 4)</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="ref.xslt" class="reference">
 <h1 class="title">XSLT (PHP 4) Functions</h1>

 



















































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.xslt-backend-info.html">xslt_backend_info</a> — Returns the information on the compilation settings of the backend</li><li><a href="function.xslt-backend-name.html">xslt_backend_name</a> — Returns the name of the backend</li><li><a href="function.xslt-backend-version.html">xslt_backend_version</a> — Returns the version number of Sablotron</li><li><a href="function.xslt-create.html">xslt_create</a> — Create a new XSLT processor</li><li><a href="function.xslt-errno.html">xslt_errno</a> — Returns an error number</li><li><a href="function.xslt-error.html">xslt_error</a> — Returns an error string</li><li><a href="function.xslt-free.html">xslt_free</a> — Free XSLT processor</li><li><a href="function.xslt-getopt.html">xslt_getopt</a> — Get options on a given xsl processor</li><li><a href="function.xslt-process.html">xslt_process</a> — Perform an XSLT transformation</li><li><a href="function.xslt-set-base.html">xslt_set_base</a> — Set the base URI for all XSLT transformations</li><li><a href="function.xslt-set-encoding.html">xslt_set_encoding</a> — Set the encoding for the parsing of XML documents</li><li><a href="function.xslt-set-error-handler.html">xslt_set_error_handler</a> — Set an error handler for a XSLT processor</li><li><a href="function.xslt-set-log.html">xslt_set_log</a> — Set the log file to write log messages to</li><li><a href="function.xslt-set-object.html">xslt_set_object</a> — Sets the object in which to resolve callback functions</li><li><a href="function.xslt-set-sax-handler.html">xslt_set_sax_handler</a> — Set SAX handlers for a XSLT processor</li><li><a href="function.xslt-set-sax-handlers.html">xslt_set_sax_handlers</a> — Set the SAX handlers to be called when the XML document gets processed</li><li><a href="function.xslt-set-scheme-handler.html">xslt_set_scheme_handler</a> — Set Scheme handlers for a XSLT processor</li><li><a href="function.xslt-set-scheme-handlers.html">xslt_set_scheme_handlers</a> — Set the scheme handlers for the XSLT processor</li><li><a href="function.xslt-setopt.html">xslt_setopt</a> — Set options on a given XSLT processor</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="104802">  
  <a class="name">
  <strong class="user"><em>hentaidream at gmx dot de</em></strong></a><div class="date" title="2011-07-07 11:09"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104802">
<div class="phpcode"><code><span class="html">
How to make a XSLT Side with function <br><br>&lt;code&gt; <br>&lt;xsl:output method="xhtml"/&gt;<br>&nbsp; &lt;xsl:template match="/"&gt;<br>&nbsp; &nbsp; &lt;html&gt;<br>&nbsp; &nbsp; &nbsp; &lt;head&gt;&lt;title&gt;Ausgabe&lt;/title&gt;&lt;/head&gt;<br>&nbsp; &nbsp; &nbsp; &lt;body&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:apply-templates select="aktien/aktie"&gt;&lt;/xsl:apply-templates&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/body&gt;<br>&nbsp; &nbsp; &lt;/html&gt;<br>&nbsp; <br>&nbsp; &lt;/xsl:template&gt;<br>&nbsp; <br>&nbsp; &lt;xsl:template match="aktie"&gt;<br>&nbsp; &nbsp;&nbsp; &lt;xsl:if test="@isin"&gt;<br>&nbsp; &nbsp; &nbsp;&nbsp; &lt;xsl:value-of select="name" /&gt;<br>&nbsp; &nbsp; &nbsp;&nbsp; &lt;xsl:value-of select="fn:format-number(fn:sum(kurse/kurs/ausgabepreis) div fn:count(kurse/kurs), '##.00')" /&gt;&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp;&nbsp; &lt;/xsl:if&gt;&nbsp; <br>&nbsp; &lt;/xsl:template&gt;<br><br>&lt;/xsl:stylesheet&gt;<br>&lt;/code&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83399">  
  <a class="name">
  <strong class="user"><em>Jeroen</em></strong></a><div class="date" title="2008-05-23 11:51"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83399">
<div class="phpcode"><code><span class="html">
In addition to the contibution of "tom at kornack dot com" about converting an Apple plist (iPhoto or iTunes library or other) into a more general XML format, I have tried to simplify his xsl file a little further:<br><br>&lt;?xml version="1.0"?&gt;<br>&lt;xsl:transform xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>" version="1.0"&gt;<br>&lt;xsl:output method="xml" indent="no"/&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&lt;!-- XSL file based on example on php.net by tom@kornack.com --&gt;<br><br>&lt;xsl:template match="dict"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &lt;xsl:for-each select="key"&gt;<br>&nbsp; &nbsp; &lt;xsl:variable name="n1" select="translate(.,' ','_')"/&gt;<br>&nbsp; &nbsp; &lt;xsl:variable name="pName"&gt;&lt;xsl:choose&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &lt;xsl:when test="string(number($n1))='NaN'"&gt;&nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select="$n1"/&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &lt;xsl:otherwise&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select="concat('_',$n1,'_')"/&gt;&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &lt;/xsl:otherwise&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &lt;/xsl:choose&gt;&lt;/xsl:variable&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &lt;xsl:element name="{$pName}"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &lt;xsl:apply-templates select="following-sibling::*[1]"/&gt;<br>&nbsp; &nbsp; &lt;/xsl:element&gt;<br>&nbsp; &lt;/xsl:for-each&gt;<br>&lt;/xsl:template&gt;<br><br>&lt;xsl:template match="array"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &lt;xsl:for-each select="*"&gt;&lt;xsl:element name="item"&gt;&nbsp;&nbsp; <br>&nbsp; &nbsp; &lt;xsl:attribute name="nr"&gt;&lt;xsl:number/&gt;&lt;/xsl:attribute&gt;<br>&nbsp; &nbsp; &lt;xsl:apply-templates select="."/&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &lt;/xsl:element&gt;&lt;/xsl:for-each&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&lt;/xsl:template&gt;<br><br>&lt;xsl:template match="string|integer|real|date|data"&gt;&nbsp;&nbsp; <br>&nbsp; &lt;xsl:value-of select="."/&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&lt;/xsl:template&gt;<br><br>&lt;xsl:template match="true|false"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &lt;xsl:value-of select="name()"/&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&lt;/xsl:template&gt;<br><br>&lt;xsl:template match="text()|@*"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&lt;/xsl:template&gt;<br><br>&lt;/xsl:transform&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76392">  
  <a class="name">
  <strong class="user"><em>nicolas_rainardNOSPAM at yahoo dot fr</em></strong></a><div class="date" title="2007-07-12 10:27"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76392">
<div class="phpcode"><code><span class="html">
The XSLTProcessor, when transforming a document, always resolves entities.<br>To avoid this (if you want to keep HTML entitities by ex.), you have two solutions:<br><br>- if you have full control over the input document, you can encapsulate every text element which contains entities in a CDATA section.<br><br>- the previous solution is the smarter and the less computing intensive, but it is not always possible. In other cases, what you can do is to replace every occurence of '&amp;' (entity mark) by something which will be considered as normal text by the parser (let's say '[AMP]' by ex) in the input document before the transformation. After the transformation, you can get these entitites back in the output document by reversing the previous operation.<br><br><span class="default">&lt;?php<br><br>$xml </span><span class="keyword">= </span><span class="default">$input_dom</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="string">'[AMP]'</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">$input_dom</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br><br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">$xsl</span><span class="keyword">-&gt;</span><span class="default">transformToXML</span><span class="keyword">(</span><span class="default">$input_dom</span><span class="keyword">);<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'[AMP]'</span><span class="keyword">, </span><span class="string">'&amp;'</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">$output_dom</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Warning : this second method "escapes" ALL entities, even those you wouldn't want to be escaped. This is a raw explanation, fine-tune it to your own situation.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71900">  
  <a class="name">
  <strong class="user"><em>armencho at gmail dot com</em></strong></a><div class="date" title="2006-12-21 07:34"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71900">
<div class="phpcode"><code><span class="html">
I believe the xslt_process and its URI resolving behaviour, including the xslt_set_base function are violating the XSLT specification which states:<br><br>&lt;blockquote&gt;<br><br>3.2 Base URI<br><br>Every node also has an associated URI called its base URI, which is used for resolving attribute values that represent relative URIs into absolute URIs. If an element or processing instruction occurs in an external entity, the base URI of that element or processing instruction is the URI of the external entity; otherwise, the base URI is the base URI of the document. The base URI of the document node is the URI of the document entity. The base URI for a text node, a comment node, an attribute node or a namespace node is the base URI of the parent of the node.<br><br>&lt;/blockquote&gt;<br><br>This implies that if stylesheet file A contains a &lt;xsl:import href="../B.xsl" /&gt; and stylesheet file B contains a &lt;xsl:import href="../C.xsl" /&gt;, given that all physical paths are valid, no matter which base you set up for the XSLT extension (with xslt_set_base) the processor WILL FAIL. Simply because it uses a single base path for all its processing regardless of the context (importing file) which includes/imports. This is a violation of the above part of the specification quoted above.<br><br>And it makes it very difficult to program XSLT with PHP.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68669">  
  <a class="name">
  <strong class="user"><em>Roman</em></strong></a><div class="date" title="2006-08-06 03:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68669">
<div class="phpcode"><code><span class="html">
bat at flurf, you said that Sablotron implements XSLT 1.1, but according to its makers, "Sablotron is ...implementing XSLT 1.0, DOM Level2 and XPath 1.0" [<a rel="nofollow" target="_blank">http://www.gingerall.org/sablotron.html]</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="63666">  
  <a class="name">
  <strong class="user"><em>bat at flurf dot net</em></strong></a><div class="date" title="2006-03-27 04:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63666">
<div class="phpcode"><code><span class="html">
maurits says that libxslt should be preferred over Sablotron, but I disagree.&nbsp; libxslt only implements a fraction of the capabilities of Sablotron; in particular, this doesn't work in libxslt:<br><br>&nbsp; &nbsp; &lt;xsl:variable name="x"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;a&gt;One&lt;/a&gt;<br>&nbsp; &nbsp; &nbsp; &lt;a&gt;Two&lt;/a&gt;<br>&nbsp; &nbsp; &nbsp; &lt;a&gt;Three&lt;/a&gt;<br>&nbsp; &nbsp; &lt;/xsl:variable&gt;<br><br>&nbsp; &nbsp; &lt;xsl:for-each select="$x/a"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;xsl:value-of select="."/&gt;<br>&nbsp; &nbsp; &lt;/xsl:for-each&gt;<br><br>In Sablotron, which implements XSLT 1.1, this works fine.&nbsp; In libxslt's version, XSLT 1.0, a variable is a "result tree fragment", not a nodeset, and you are arbitrarily not allowed to do as much with it.<br><br>Further, Sablotron allows callbacks via the document() function (see information on xslt_set_scheme_handler()) and appears to give /slightly/ more informative error messages -- they identify the line number in the XSLT file at least.<br><br>In general, I can't recommend libxslt, which appears very underpowered.&nbsp; Sablotron is considerably more impressive.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61479">  
  <a class="name">
  <strong class="user"><em>gabriel a-t bumpt do-t net</em></strong></a><div class="date" title="2006-02-04 02:50"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61479">
<div class="phpcode"><code><span class="html">
If you need to transform an XML document that specifies the URL of its own prefered stylesheet (using the processing instruction &lt;?xml-stylesheet href="xyz.xsl"?&gt;, you can start by parsing the XML data to retrieve that URL, and then call the xslt_process function using the specified stylesheet :<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/* A small class for stylesheet URL extraction from an XML */<br><br></span><span class="keyword">class </span><span class="default">XMLStylesheet<br></span><span class="keyword">{<br>&nbsp; &nbsp; var </span><span class="default">$hParser</span><span class="keyword">;<br>&nbsp; &nbsp; var </span><span class="default">$xml</span><span class="keyword">;<br>&nbsp; &nbsp; var </span><span class="default">$stylesheet</span><span class="keyword">;<br><br>&nbsp; &nbsp; function </span><span class="default">XMLStylesheet</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hParser </span><span class="keyword">= </span><span class="default">xml_parser_create</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">xml_set_object</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hParser</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">xml_set_processing_instruction_handler</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hParser</span><span class="keyword">, </span><span class="string">'fnProcessingInstruction'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xml </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">xml_parse</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hParser</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xml</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">xml_parser_free</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">hParser</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">getStylesheet</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stylesheet</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function </span><span class="default">fnProcessingInstruction</span><span class="keyword">(</span><span class="default">$hParser</span><span class="keyword">, </span><span class="default">$target</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$target </span><span class="keyword">== </span><span class="string">'xml-stylesheet'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'href="([^"]+)"'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">stylesheet </span><span class="keyword">= </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">/* Now, instanciate an object of this class, given the filename of our XML data */<br></span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">XMLStylesheet</span><span class="keyword">(</span><span class="string">'my_data.xml'</span><span class="keyword">);<br><br></span><span class="comment">/* And finally, retrieve the URL of the stylesheet specified in the XML data. */<br></span><span class="default">$xsl_url </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getStylesheet</span><span class="keyword">());<br><br></span><span class="comment">/* Now you can xslt_process as usual. */<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59398">  
  <a class="name">
  <strong class="user"><em>maurits at example dot com</em></strong></a><div class="date" title="2005-12-05 03:47"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59398">
<div class="phpcode"><code><span class="html">
I tried to get Sablotron runnning on a Windows XP - Apache 2 -PHP5 System which is my developement system. I have Sablotron running on a life Linux server. After spending lots of&nbsp; effort I gave up on Sablotron on Windows.<br><br>Then I found out that there is Libxslt, and it is allready working! <br><br>I am missing a hint on this page, that Sablotron is not really recommended any more and that people should start to migrate their code to Libxslt.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53850">  
  <a class="name">
  <strong class="user"><em>Jon Dawson</em></strong></a><div class="date" title="2005-06-15 01:23"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53850">
<div class="phpcode"><code><span class="html">
Getting XSLT running under Red Hat/Plesk 7.5<br><br>The PHP installation on my VPS came with '--enable-xslt=shared' '--with-xslt-sablot' '--with-sablot-js=/usr' in the config line. However could not get any transformations to run. Finally got there following these steps:<br><br>1. ran 'yum install php-xslt'<br>2. This installed 'xslt.so' to usr/lib/php4 and other dependencies.<br>3. Add 'dl('xslt.so');' to the top of your php files you want to perform a translation in. e.g.<br><br>dl('xslt.so');<br>// Allocate a new XSLT processor<br>$xh = xslt_create();<br>// Process the document, returning the result into the $result variable<br>$result = xslt_process($xh, 'test.xml', 'test.xsl');<br>// Output to browser<br>echo $result;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51875">  
  <a class="name">
  <strong class="user"><em>Pete Silvester</em></strong></a><div class="date" title="2005-04-13 08:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51875">
<div class="phpcode"><code><span class="html">
When installing on debian using apt/binaries, after installing php4-xslt and sablotron, you may have to add this line to /etc/php4/apache/php.ini :<br><br>extension=xslt.so</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45180">  
  <a class="name">
  <strong class="user"><em>arossato at istitutocolli dot org</em></strong></a><div class="date" title="2004-08-28 01:12"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom45180">
<div class="phpcode"><code><span class="html">
It is possible to create the xslt extension as a shared object module statically linked with salbot and expat (I needed it for a project hosted in sourceforge where the sablot library is available).<br>Compile the module as usual: <br>cd ext/xslt<br>phpize<br>./configure --enable-module=so --enable-xslt=shared --with-xslt-sablot --with-expat<br>make<br><br>Then create a statically linked module:<br>gcc -Wl,-Bstatic -shared&nbsp; xslt.lo sablot.lo&nbsp; -o xslt.so&nbsp; /usr/local/lib/libsablot.a /usr/local/lib/libexpat.a --static-libgcc<br><br>change /usr/local/lib/libsablot.a and /usr/local/lib/libexpat.a according to the right path on your system.<br><br>You're done!<br>My xslt.so is 5.2M...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45066">  
  <a class="name">
  <strong class="user"><em>tom at kornack dot com</em></strong></a><div class="date" title="2004-08-24 03:09"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom45066">
<div class="phpcode"><code><span class="html">
If you're wrangling with a plist in Mac OS X: here a bit of code to convert the plist into xml using xslt and then accessing it using simplexml. This was modified from <a rel="nofollow" target="_blank">http://www.xmldatabases.org/WK/blog/1086?t=item</a> . Please do post improvements. This has been tested against iPhoto's AlbumData as well as iTunes' data. Enjoy!<br><br><span class="default">&lt;?php <br>$xsl </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(); <br></span><span class="default">$xsl</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="string">"plistConvert.xsl"</span><span class="keyword">); <br></span><span class="default">$inputdom </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(); <br></span><span class="default">$inputdom</span><span class="keyword">-&gt;</span><span class="default">load</span><span class="keyword">(</span><span class="string">"iTunes Music Library.xml"</span><span class="keyword">); <br></span><span class="default">$proc </span><span class="keyword">= new </span><span class="default">XsltProcessor</span><span class="keyword">(); <br></span><span class="default">$proc</span><span class="keyword">-&gt;</span><span class="default">registerPhpFunctions</span><span class="keyword">(); <br></span><span class="default">$xsl </span><span class="keyword">= </span><span class="default">$proc</span><span class="keyword">-&gt;</span><span class="default">importStylesheet</span><span class="keyword">(</span><span class="default">$xsl</span><span class="keyword">); <br></span><span class="default">$newdom </span><span class="keyword">= </span><span class="default">$proc</span><span class="keyword">-&gt;</span><span class="default">transformToDoc</span><span class="keyword">(</span><span class="default">$inputdom</span><span class="keyword">); <br></span><span class="default">$sxe </span><span class="keyword">= </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$newdom</span><span class="keyword">);<br>print(</span><span class="string">'&lt;pre&gt;'</span><span class="keyword">);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$sxe</span><span class="keyword">-&gt;</span><span class="default">dict</span><span class="keyword">);<br>print(</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Here's the plistConvert.sxl file:<br><br>&lt;?xml version='1.0'?&gt;<br>&lt;xsl:stylesheet xmlns:xsl&nbsp; ="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>" version="1.0"&gt;<br>&lt;xsl:output method="xml" indent="yes"/&gt;<br><br>&lt;xsl:template match="/plist"&gt;<br>&nbsp; &lt;propertylist&gt;<br>&nbsp; &nbsp; &lt;xsl:apply-templates/&gt;<br>&nbsp; &lt;/propertylist&gt;<br>&lt;/xsl:template&gt;<br><br>&lt;xsl:template match="dict"&gt;<br>&nbsp; &lt;dict&gt;<br>&nbsp; &nbsp; &lt;xsl:for-each select="key"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;xsl:variable name='n1' select='translate(., " ", "_")'/&gt;<br>&nbsp; &nbsp; &nbsp; &lt;xsl:variable name='pName'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:choose&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- Need to do this because number tags like &lt;0&gt; are not valid?! --&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='contains("0123456789", substring($n1, 1, 1))'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='concat("number_", $n1)'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:otherwise&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='$n1'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:otherwise&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:choose&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/xsl:variable&gt;<br><br>&nbsp; &nbsp; &nbsp; &lt;xsl:element name="{$pName}"&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:for-each select='following-sibling::*[1]'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:choose&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "dict"'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:apply-templates select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "array"'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:attribute name="array"&gt;collection&lt;/xsl:attribute&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:apply-templates/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "string"'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "integer"'&gt;<br>&lt;!--&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:attribute name="type"&gt;integer&lt;/xsl:attribute&gt; --&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "date"'&gt;<br>&lt;!--&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:attribute name="type"&gt;date&lt;/xsl:attribute&gt; --&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "true"'&gt;True&lt;/xsl:when&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "false"'&gt;False&lt;/xsl:when&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "real"'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:when test='name() = "data"'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:value-of select='.'/&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:when&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:otherwise&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;xsl:message&gt;pListConverter: &lt;xsl:value-of select='name()'/&gt; not implemented!<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:message&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:otherwise&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:choose&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/xsl:for-each&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/xsl:element&gt;<br>&nbsp; &nbsp; &lt;/xsl:for-each&gt;<br>&nbsp; &lt;/dict&gt;<br>&lt;/xsl:template&gt;<br><br>&lt;!-- don't pass text thru --&gt;<br>&lt;xsl:template match="text()|@*"&gt;<br>&lt;/xsl:template&gt;<br><br>&lt;/xsl:stylesheet&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37468">  
  <a class="name">
  <strong class="user"><em>will at NOSPAM dot wdp dot ndo dot co dot uk</em></strong></a><div class="date" title="2003-11-16 02:09"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37468">
<div class="phpcode"><code><span class="html">
As an update to the previous advice about the undefined references problem when installing PHP with Sablotron, PHP 4.3.4 has a new EXTRA_LDFLAGS_PROGRAM line added to the Makefile. Make sure to add -lstdc++ to this line as well as the EXTRA_LDFLAGS line.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32815">  
  <a class="name">
  <strong class="user"><em>crtn at users dot sourceforge dot net</em></strong></a><div class="date" title="2003-06-07 09:41"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32815">
<div class="phpcode"><code><span class="html">
Another way to get around the EXPAT-SABLOTRON problems (seg faults) is supposedly to recompile apache with:<br>--disable-rule=EXPAT</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32424">  
  <a class="name">
  <strong class="user"><em>d dot brotherstone at pobox dot com</em></strong></a><div class="date" title="2003-05-27 09:14"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32424">
<div class="phpcode"><code><span class="html">
If you get problems with undefined references to gxx_s type stuff, UPDATE LIBTOOL!&nbsp; I found 1.4.1 worked for some configurations, 1.4.3 worked for almost none, but 1.5 worked for every combination of Sablotron/gettext/sybase/zlib/postgres --with options I tried.&nbsp; <br><br>Make sure you follow the advice of adding -lstdc++ to EXTRA_LD_FLAGS in Makefile after you've run ./configure, and BEFORE you've run make (if you issue make, you'll need to do a make clean before you make again, after changing the Makefile, or it still won't work reliably).<br><br>Cheers, Dave.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32012">  
  <a class="name">
  <strong class="user"><em>DrTebi at NOSPAM dot yahoo dot NOSPAM dot com</em></strong></a><div class="date" title="2003-05-12 09:37"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32012">
<div class="phpcode"><code><span class="html">
I would like to add that there is no problem to install PHP with Sablotron on a Gentoo Linux system (<a rel="nofollow" target="_blank">http://www.gentoo.org</a>).<br><br>Just make sure you emerged the expat and sablotron packages like so:<br><br>emerge expat<br>emerge sablotron<br><br>After this, there should be no linking problem or whatsoever:<br><br>./configure --with-xslt --with-sablotron<br>make<br><br>and you should be set ;-)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30511">  
  <a class="name">
  <strong class="user"><em>ohlesbeauxjours at yahoo dot fr</em></strong></a><div class="date" title="2003-03-20 12:18"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30511">
<div class="phpcode"><code><span class="html">
In reply to Jaron, who needed to evaluate PHP code inside the stylesheet, look at a post I sent about xslt_set_scheme_handlers().<br>Scheme handlers are very useful, since they allow the XSLT engine and PHP to fully interact (they will communicate through XML strings).<br><br>With xslt_set_scheme_handlers(), you can give the XSLT engine an advanced access to the file system (or even to the other I/O interfaces), and perform various tasks (checking the existence of a file, creating new files "on the fly", deleting, etc...)<br>... all that in only one stylesheet :)<br><br>baptiste</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25977">  
  <a class="name">
  <strong class="user"><em>aargh at 44rgh dot net</em></strong></a><div class="date" title="2002-10-14 03:47"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25977">
<div class="phpcode"><code><span class="html">
Compilation on RedHat 7.0 PHP-4.1.2-7.0.4.<br>Compilation failed when providing --enable-xslt --with-xslt-sablot --with-sablot-js.<br>Problem was that an additonal flag needed to be specified or the build would fail complaining that js-libs ... could not be found.<br><br>LIBS="-lttf -lpng -ljpeg -lz -lnsl -ljs"; export LIBS<br><br>The additional flag "-ljs" needed to be set.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25550">  
  <a class="name">
  <strong class="user"><em>jw at shapers dot nl</em></strong></a><div class="date" title="2002-09-27 08:09"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25550">
<div class="phpcode"><code><span class="html">
In addition to "tk dot lists at fastmail dot fm"'s comment on Windows dependencies: You'll also need iconv.dll in your SYSTEM32 folder. At least, that's what I needed to get it working on my PHP4.2.3-Win install.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25293">  
  <a class="name">
  <strong class="user"><em>gbarattoKILLSPAMMERS at superb dot net</em></strong></a><div class="date" title="2002-09-18 10:55"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25293">
<div class="phpcode"><code><span class="html">
Regarding the `__gxx_personality_v0' problem described by dennisNOSPAM@infoleak.com, you have to use LDFLAGS=-lstdc++&nbsp; as well before configuring php (and not apache) when compiling php as a shared object.<br><br>Thank you Dennis</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24841">  
  <a class="name">
  <strong class="user"><em>matthias-at-mlienau.de</em></strong></a><div class="date" title="2002-08-29 05:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom24841">
<div class="phpcode"><code><span class="html">
For those guys who mess up with compiling the current Sablotron 0.95 sources from gingerall.com:<br><br>Here is a patch which corrects a typo.<br>Or - go to src/engine/domprovider.cpp and change "voiD" to "void" in line 558 and compile again...<br><br>*** domprovider.cpp.diff&nbsp; &nbsp; &nbsp; &nbsp; Thu Aug 29 23:32:59 2002<br>--- domprovider.cpp&nbsp; &nbsp;&nbsp; Thu Aug 29 23:32:14 2002<br>***************<br>*** 555,561 ****<br>&nbsp; &nbsp; if (external) cdelete(external);<br>&nbsp; }<br>&nbsp; <br>! void DOMProviderUniversal::setExtProvider(DOMHandler *domh, voiD *data)<br>&nbsp; {<br>&nbsp; &nbsp; if (external) cdelete(external);<br>&nbsp; &nbsp; if (domh)<br>--- 555,561 ----<br>&nbsp; &nbsp; if (external) cdelete(external);<br>&nbsp; }<br>&nbsp; <br>! void DOMProviderUniversal::setExtProvider(DOMHandler *domh, void *data)<br>&nbsp; {<br>&nbsp; &nbsp; if (external) cdelete(external);<br>&nbsp; &nbsp; if (domh)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21679">  
  <a class="name">
  <strong class="user"><em>dennisNOSPAM at infoleak dot com</em></strong></a><div class="date" title="2002-05-22 09:23"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21679">
<div class="phpcode"><code><span class="html">
Building Sablotron on Solaris with.<br>gcc 3.0.3 and native linker<br>libtool (sunfreeware)<br>apache 1.3.24<br>php-4.2.1<br>sablotron-0.90<br>expat-1.95.2<br><br>When configuring Apache you might experience this error..<br><br>libsablot.so: undefined reference to `operator new[](unsigned)'<br>libsablot.so: undefined reference to `__cxa_call_unexpected'<br>libsablot.so: undefined reference to `vtable for __cxxabiv1::__si_class_type_info'<br>libsablot.so: undefined reference to `operator delete(void*)'<br>libsablot.so: undefined reference to `__gxx_personality_v0'<br>libsablot.so: undefined reference to `vtable for __cxxabiv1::__class_type_info'<br>libsablot.so: undefined reference to `operator delete[](void*)'<br>libsablot.so: undefined reference to `vtable for __cxxabiv1::__vmi_class_type_info'<br>libsablot.so: undefined reference to `operator new(unsigned)'<br><br>To cure it make sure that during the configure stage you feed configure LDFLAGS variable like so.<br><br>LDFLAGS=' -lstdc++' ./configure<br><br>Otherwise Apache's compiler sanity check will balk.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18122">  
  <a class="name">
  <strong class="user"><em>ken1138 at altavista dot com</em></strong></a><div class="date" title="2002-01-11 02:15"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18122">
<div class="phpcode"><code><span class="html">
The XSLT functions may experience conflicts with Apache in some configurations, causing random segfaults in httpd.&nbsp; Apache has included a 'lite' version of expat in their recent distributions, which can cause conflicts with expat.&nbsp; Apache1.3.22 solves the problem by configuring itself to use the expat you have installed, instead of the built-in. If you compiled Apache before you installed expat, make sure you upgrade and/or recompile your Apache server with the same version of expat that PHP and Sablotron are using.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18071">  
  <a class="name">
  <strong class="user"><em>Jaron dot Schaeffer at jayweb dot de</em></strong></a><div class="date" title="2002-01-09 01:25"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18071">
<div class="phpcode"><code><span class="html">
I extended the example of Daniel Unterberger even more. I had the problem to evaluate PHP code within my xml data files (e.g. to output database results) and after that apply a xsl stylesheet to the generated data. <br><br>When I tried Daniel's solution I found it quite useful but noticed that you can't "print out" from your PHP Code. You're bound to annoying return()-Statements, wich makes it impossible to loop outputs or concatenate strings and then return them. If you try to do so, you will notice that a statement like <br>...<br>&lt;php:eval&gt;<br>&nbsp; for($i=0; $i&lt;10; $i++) <br>&nbsp; &nbsp; echo "This is number ".$i;<br>&lt;/php:eval&gt;<br>...<br><br>will result in PHP to do the output right in the moment when the eval()-Statement is run.<br><br>Things do, at least, work fine if you keep it simple:<br><br>...<br>&lt;php:eval&gt;<br>&nbsp; return("Hello World!");<br>&lt;/php:eval&gt;<br>...<br><br>I tried to fix that and came to a solution. The following code is just a snippet from my XSLT-class. The uppercase letters are constants defined in a header file. (e.g. define('PHP_EVAL_START_TAG', '&lt;php:eval&gt;');<br><br>...<br> function xmlString() {<br><br>&nbsp; &nbsp; $fd = fopen($this-&gt;xmlFileLocation, 'r');<br>&nbsp; &nbsp; $xmlString = fread($fd, filesize($this-&gt;xmlFileLocation));<br>&nbsp; &nbsp; fclose($fd);<br><br>&nbsp; &nbsp; if($this-&gt;contentType == DYNAMIC_CONTENT) {<br><br>&nbsp; &nbsp; &nbsp; while(!(strpos($xmlString, PHP_EVAL_START_TAG) === false)) {<br><br>&nbsp; &nbsp; $startPos = strpos($xmlString, PHP_EVAL_START_TAG);<br>&nbsp; &nbsp; $endPos&nbsp;&nbsp; = strpos($xmlString, PHP_EVAL_END_TAG);<br><br>&nbsp; &nbsp; ob_start();<br>&nbsp; &nbsp; eval(substr($xmlString, $startPos + strlen(PHP_EVAL_START_TAG), $endPos - $startPos - strlen(PHP_EVAL_START_TAG)));<br>&nbsp; &nbsp; $evaluatedString = ob_get_contents();<br>&nbsp; &nbsp; ob_end_clean();<br><br>&nbsp; &nbsp; $xmlString = <br>&nbsp; &nbsp; &nbsp;&nbsp; substr($xmlString, 0, $startPos).$evaluatedString.substr($xmlString, $endPos + 11);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return($xmlString);<br>&nbsp; }<br>...<br><br>Jaron.Schaeffer@jayweb.de</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15094">  
  <a class="name">
  <strong class="user"><em>sandro_zic at web dot de</em></strong></a><div class="date" title="2001-08-27 06:57"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom15094">
<div class="phpcode"><code><span class="html">
[Editor's note: moved this note here where it belongs - jmcastagnetto@php.net]
<br>
<br>This shows how you can use the XSLT functions to add dynamic content to the result tree, i.e. how to hand over parameters to the XSL stylesheet and write to Sablotron's document buffer.
<br>
<br>First we assign the value of the parameter to an array in PHP:
<br>-----------------------------------------
<br>$xslt_params["test"] = "Run-time parameter.";
<br>-----------------------------------------
<br>
<br>The parameter is envoced in XSL by
<br>-----------------------------------------
<br>&lt;h1&gt;Value of run-time parameter:&lt;/h1&gt;
<br>&lt;b&gt;&lt;xsl:value-of select="$test" /&gt;&lt;/b&gt;
<br>&lt;hr/&gt;
<br>-----------------------------------------
<br>
<br>Don't forget to define the parameter at the beginning of your stylesheet:
<br>-----------------------------------------
<br>&lt;xsl:param name="test"/&gt;
<br>-----------------------------------------
<br>
<br>
<br>How can we add dynamic content from a database to the XSLT output? In Sablotron, this is done using the document buffer function.
<br>
<br>Retrieve a table's content, store it in a XML structure assigned to an array in PHP:
<br>-----------------------------------------
<br>$xslt_args["buffer1"] = 
<br>"
<br>&lt;TestBuffer&gt;
<br>&nbsp; &nbsp; &lt;Message&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;Content&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; This is message 1 of buffer 1.
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/Content&gt;
<br>&nbsp; &nbsp; &lt;/Message&gt;
<br>&nbsp; &nbsp; &lt;Message&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;Content&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; This is message 2 of buffer 1.
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/Content&gt;
<br>&nbsp; &nbsp; &lt;/Message&gt;
<br>&lt;/TestBuffer&gt;
<br>";
<br>-----------------------------------------
<br>
<br>This is how you add the buffer to the result tree in your XSL document:
<br>-----------------------------------------
<br>&lt;h1&gt;Dynamic content from document buffer 1:&lt;/h1&gt;
<br>&lt;xsl:for-each select="document('arg:/buffer1')/TestBuffer/Message"&gt;
<br>&nbsp; &nbsp; &lt;b&gt;&lt;xsl:value-of select="Content" /&gt;&lt;/b&gt;&lt;br/&gt;
<br>&lt;/xsl:for-each&gt;
<br>&lt;hr/&gt;&nbsp; &nbsp; 
<br>-----------------------------------------
<br>
<br>
<br>To get the whole thing running, following functions have to be executed:
<br>-----------------------------------------
<br>$processor = xslt_create();
<br>xslt_run ($processor, "file://".$DOCUMENT_ROOT.$xsl_file, "file://".$DOCUMENT_ROOT.$xml_file, "arg:/_result", $xslt_params, $xslt_args);
<br>$result = xslt_fetch_result ($processor); 
<br>echo $result;
<br>-----------------------------------------
<br>
<br>
<br>The complete XSL file looks like this:
<br>-----------------------------------------
<br>&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
<br>&lt;xsl:stylesheet xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>" version="1.0"&gt;
<br>&lt;xsl:output method="html" version="1.0" standalone="yes" indent="yes" /&gt;
<br>
<br>&lt;!-- define parameter --&gt;
<br>&lt;xsl:param name="test"/&gt;
<br>
<br>&lt;xsl:template match="/"&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>
<br>&lt;!-- run-time parameter --&gt;
<br>&lt;h1&gt;Value of run-time parameter:&lt;/h1&gt;
<br>&lt;b&gt;&lt;xsl:value-of select="$test" /&gt;&lt;/b&gt;
<br>&lt;hr/&gt;
<br>
<br>&lt;!-- dynamic content --&gt;
<br>&lt;h1&gt;Dynamic content from document buffer 1:&lt;/h1&gt;
<br>&lt;xsl:for-each select="document('arg:/buffer1')/TestBuffer/Message"&gt;
<br>&nbsp; &nbsp; &lt;b&gt;&lt;xsl:value-of select="Content" /&gt;&lt;/b&gt;&lt;br/&gt;
<br>&lt;/xsl:for-each&gt;
<br>&lt;hr/&gt;&nbsp; &nbsp; 
<br>
<br>&lt;/xsl:template&gt;
<br>
<br>&lt;/xsl:stylesheet&gt;
<br>-----------------------------------------</span>
</code></div>
  </div>
 </div>
  <div class="note" id="13369">  
  <a class="name">
  <strong class="user"><em>d dot u at mail dot com</em></strong></a><div class="date" title="2001-06-13 12:19"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13369">
<div class="phpcode"><code><span class="html">
... addition to last message
<br>
<br>sorry shanx (miss-spelled).
<br>having a full example you must call it like in the shanx-example. Hint dont use echo inside of &lt;php:eval&gt; but return, because it is only string concatenation.
<br>
<br>&lt;code&gt;
<br><span class="default">&lt;?php
<br></span><span class="comment">##&nbsp; require "xslt.inc.php";
<br>
<br></span><span class="default">$xslt </span><span class="keyword">= new </span><span class="default">xsltTransform</span><span class="keyword">(</span><span class="string">"life.xsl"</span><span class="keyword">, </span><span class="string">"life.xml"</span><span class="keyword">);
<br>print (</span><span class="default">$xslt</span><span class="keyword">-&gt;</span><span class="default">applyTransformation</span><span class="keyword">());
<br>
<br></span><span class="default">?&gt;
<br></span>&lt;/code&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="13366">  
  <a class="name">
  <strong class="user"><em>d dot u at mail dot com</em></strong></a><div class="date" title="2001-06-13 11:43"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13366">
<div class="phpcode"><code><span class="html">
I extended the example of shanks (very helpful for me tnx), so you can call php inside your xslt file, I had the problem to pass url-parameters and did not understand how to solve it, so I use php. 
<br>
<br>&lt;code&gt;
<br><span class="default">&lt;?php
<br>
<br></span><span class="comment">/**
<br> *
<br> * A class to transform XML through XSLT using PHP4 Sablotron extension
<br> *
<br> */
<br>
<br> #######################################################################
<br> ## file extended by Daniel Unterberger (d.u@mail.com)
<br> ## changes: some&nbsp; php:eval's added
<br>
<br></span><span class="keyword">class </span><span class="default">xsltTransform
<br></span><span class="keyword">{
<br>
<br>&nbsp; &nbsp; var </span><span class="default">$xsl_file</span><span class="keyword">;
<br>&nbsp; &nbsp; var </span><span class="default">$xml_file</span><span class="keyword">;
<br>&nbsp; &nbsp; var </span><span class="default">$fileName</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Constructor to the xsl_transform ticket
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param $xsl_file The XSLT file containing the transformation info
<br>&nbsp; &nbsp;&nbsp; * @param $xml_file The XML file containing the actual data
<br>&nbsp; &nbsp;&nbsp; * @see readFile()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">xsltTransform</span><span class="keyword">(</span><span class="default">$xsl_file </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$xml_file </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xsl_string </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">readFile</span><span class="keyword">(</span><span class="default">$xsl_file</span><span class="keyword">,</span><span class="string">'php:eval'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xml_string </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">readFile</span><span class="keyword">(</span><span class="default">$xml_file</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Function to read through the file
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; * @param $fileName Which file to read?
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">readFile</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">,</span><span class="default">$php_eval</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// get contents of a file into a string
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fd </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">( </span><span class="default">$fileName</span><span class="keyword">, </span><span class="string">"r" </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">( </span><span class="default">$fd</span><span class="keyword">, </span><span class="default">filesize</span><span class="keyword">( </span><span class="default">$fileName </span><span class="keyword">) );
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">( </span><span class="default">$fd </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">##################################################
<br>&nbsp; &nbsp; &nbsp; &nbsp; ## extension by Daniel Unterberger (d.u@mail.com)
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while ( </span><span class="default">$php_eval </span><span class="keyword">and ( </span><span class="default">$pos_start</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">,</span><span class="string">'&lt;php:eval&gt;'</span><span class="keyword">) ))
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos_end</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">,</span><span class="string">'&lt;/php:eval&gt;'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$content</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$pos_start</span><span class="keyword">).
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval( </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">,</span><span class="default">$pos_start</span><span class="keyword">+</span><span class="default">10</span><span class="keyword">,</span><span class="default">$pos_end</span><span class="keyword">-</span><span class="default">$pos_start</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">) ).
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$content</span><span class="keyword">,</span><span class="default">$pos_end</span><span class="keyword">+</span><span class="default">11</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">"debug"</span><span class="keyword">]==</span><span class="string">"ON"</span><span class="keyword">) print </span><span class="string">"&lt;xmp&gt;</span><span class="default">$content</span><span class="string">&lt;/xmp&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">## see xslt-file for debuggin if you call page.php?debug=ON (remove on life-server)
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; ###################################################
<br>&nbsp; &nbsp; &nbsp; &nbsp; ## end extension
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$content</span><span class="keyword">;
<br>
<br>
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Function to apply the actual transformation
<br>&nbsp; &nbsp;&nbsp; *
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">applyTransformation</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">result </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">msg </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xsl_string</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">xml_string</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">msg</span><span class="keyword">) print (</span><span class="string">"Transformation failed."</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>
<br></span><span class="comment">// End of class, do not remove
<br></span><span class="keyword">}
<br>
<br>
<br>
<br></span><span class="default">?&gt;
<br></span>&lt;/code&gt;
<br>
<br>in the xslt you can call it now with
<br>
<br>...
<br>&lt;tag&gt;&lt;php:eval&gt; return $GLOBALS["filter"]; /* all php allowed */ &lt;/php:eval&gt;&lt;/tag&gt;
<br>...
<br>
<br>-------------------------------
<br>hope this gives new inspiration
<br>(d.u)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12668">  
  <a class="name">
  <strong class="user"><em>maximo at migliari dot com</em></strong></a><div class="date" title="2001-04-27 09:31"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom12668">
<div class="phpcode"><code><span class="html">
COMPILING AND INSTALLING SABLOTRON AND EXPAT FOR PHP ON A FREEBSD iServer
<br>
<br>0) Prepare your virtual server environment.&nbsp; Telnet to your iserver and type:
<br>&nbsp; &nbsp; mkdir -p ~/usr/local/apache/1.3/bin
<br>&nbsp; &nbsp; ln /usr/bin/make ~/usr/bin/make
<br>&nbsp; &nbsp; ln /usr/local/apache/1.3/bin/apxs ~/usr/local/apache/1.3/bin/apxs
<br>&nbsp; &nbsp; ln /usr/local/apache/1.3/bin/httpd ~/usr/local/apache/1.3/bin/httpd
<br>
<br>1) download the following files:
<br>&nbsp; &nbsp; expat-1.95.tar.gz - <a rel="nofollow" target="_blank">http://expat.sourceforge.com</a>
<br>&nbsp; &nbsp; Sablot-0.52.tar.gz - <a rel="nofollow" target="_blank">http://www.gingerall.com</a>
<br>&nbsp; &nbsp; php4-latest.tar.gz - <a rel="nofollow" target="_blank">http://snaps.php.net</a>
<br>
<br>2) copy these files to ~/usr/local
<br>
<br>3) expand all these files uing tar -xvzf
<br>
<br>4) go into expat directory and type:
<br>&nbsp; &nbsp; ./configure --prefix=/usr/home/your_iserver_login_name/usr/local
<br>&nbsp; &nbsp; make
<br>&nbsp; &nbsp; make install
<br>&nbsp; &nbsp; 
<br>&nbsp;&nbsp; the files will be installed under ~/usr/local/lib and ~/usr/local/include
<br>
<br>5) set the following environment variables:
<br>&nbsp; &nbsp; setenv LD_LIBRARY_PATH /usr/home/your_iserver_login_name/usr/local/lib
<br>&nbsp; &nbsp; setenv LD_RUN_PATH /usr/home/your_iserver_login_name/usr/local/
<br>&nbsp; &nbsp; setenv CPLUS_INCLUDE_PATH /usr/home/your_iserver_login_name/usr/local/include
<br>&nbsp; &nbsp; setenv LIBRARY_PATH /usr/home/your_iserver_login_name/usr/local/lib
<br>
<br>6) go into the Sablotron directory and type:
<br>&nbsp; &nbsp; ./configure --prefix=/usr/home/your_iserver_login_name/usr/local
<br>&nbsp; &nbsp; make
<br>&nbsp; &nbsp; make install
<br>
<br>7) go into the php directory and type:
<br>&nbsp; &nbsp; ./configure --with-apxs=/usr/local/apache/1.3/bin/apxs \
<br>&nbsp; &nbsp; --disable-debug \
<br>&nbsp; &nbsp; --enable-trans-sid \
<br>&nbsp; &nbsp; --enable-versioning \
<br>&nbsp; &nbsp; --enable-ftp \
<br>&nbsp; &nbsp; --with-mysql=/usr/home/your_iserver_login_name/usr/local/mysql \
<br>&nbsp; &nbsp; --with-xml \
<br>&nbsp; &nbsp; --enable-magic-quotes \
<br>&nbsp; &nbsp; --enable-track-vars \
<br>&nbsp; &nbsp; --enable-sablot-errors-descriptive \
<br>&nbsp; &nbsp; --with-sablot=/usr/home/your_iserver_login_name/usr/local \
<br>&nbsp; &nbsp; --with-expat=/usr/home/your_iserver_login_name/usr/local
<br>
<br>&nbsp; &nbsp; then 
<br>
<br>&nbsp; &nbsp; make
<br>&nbsp; &nbsp; and
<br>&nbsp; &nbsp; make install
<br>
<br>the final command - make install - should give an error about not being able to install pear.
<br>This is normal, as pear tries to copy itself outside of your virtual server space.&nbsp; Since pear
<br>is not an essential part of PHP - you can ignore this. (maybe there is a command for ./configure
<br>in php that allows us to specify the directory in which pear will be installed?
<br>
<br>8) final steps:
<br>&nbsp;&nbsp; go to ~/usr/local/etc/httpd/conf
<br>&nbsp;&nbsp; edit httpd.conf
<br>&nbsp;&nbsp; comment out the LoadModule directive for the previous php .so module.
<br>&nbsp;&nbsp; not that you should see the new module you just compile already inserted in the httpd.conf as
<br>&nbsp;&nbsp; the last line of all LoadModule directives. (it should be called libphp4.so
<br>
<br>&nbsp;&nbsp; now just go back to the command prompt after you have edited httpd.conf and type:
<br>&nbsp;&nbsp; restart_apache
<br>
<br>&nbsp;&nbsp; now go to your httpd document root (usually htdocs), and create a php file with the following
<br>&nbsp;&nbsp; code in it:
<br>
<br>&nbsp;&nbsp; <span class="default">&lt;?php
<br>&nbsp; &nbsp;&nbsp; phpinfo</span><span class="keyword">();
<br>&nbsp;&nbsp; </span><span class="default">?&gt;
<br></span>
<br>&nbsp;&nbsp; load the file in your browser, and you should see that everything has been installed properly :)</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/ref.xslt.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:01 GMT -->


</body></html>