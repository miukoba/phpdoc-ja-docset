<html><!-- Mirrored from php.net/manual/en/function.system.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:03 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>system</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.system.html">
 <link rel="shorturl" href="http://php.net/system">
 <link rel="alternate" href="http://php.net/system" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.exec.html">
 <link rel="prev" href="function.shell-exec.html">
 <link rel="next" href="book.pthreads.html">

 <link rel="alternate" href="function.system.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.system.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.system.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.system.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.system.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.system.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.system.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.system.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.system.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.system.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.system.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.process.html">Process Control Extensions</a></li>      <li><a href="book.exec.html">Program execution</a></li>      <li><a href="ref.exec.html">Program execution Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.system" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">system</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">system</span> â€” <span class="dc-title">Execute an external program and display the output</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.system-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>system</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$command</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&amp;$return_var</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>system()</strong></span> is just like the C version of the
   function in that it executes the given
   <code class="parameter">command</code> and outputs the result.
  </p>
  <p class="para">
   The <span class="function"><strong>system()</strong></span> call also tries to automatically
   flush the web server's output buffer after each line of output if
   PHP is running as a server module.
  </p>
  <p class="para">
   If you need to execute a command and have all the data from the
   command passed directly back without any interference, use the
   <span class="function"><a href="function.passthru.html" class="function">passthru()</a></span> function.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.system-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">command</code></dt>

     <dd>

      <p class="para">
       The command that will be executed.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return_var</code></dt>

     <dd>

      <p class="para">
       If the <code class="parameter">return_var</code> argument is present, then the
       return status of the executed command will be written to this
       variable.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.system-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the last line of the command output on success, and <strong><code>FALSE</code></strong>
   on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.system-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-3777">
    <p><strong>Example #1 <span class="function"><strong>system()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'&lt;pre&gt;'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Outputs&nbsp;all&nbsp;the&nbsp;result&nbsp;of&nbsp;shellcommand&nbsp;"ls",&nbsp;and&nbsp;returns<br>//&nbsp;the&nbsp;last&nbsp;output&nbsp;line&nbsp;into&nbsp;$last_line.&nbsp;Stores&nbsp;the&nbsp;return&nbsp;value<br>//&nbsp;of&nbsp;the&nbsp;shell&nbsp;command&nbsp;in&nbsp;$retval.<br></span><span style="color: #0000BB">$last_line&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">system</span><span style="color: #007700">(</span><span style="color: #DD0000">'ls'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$retval</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Printing&nbsp;additional&nbsp;info<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'<br>&lt;/pre&gt;<br>&lt;hr&nbsp;/&gt;Last&nbsp;line&nbsp;of&nbsp;the&nbsp;output:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$last_line&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'<br>&lt;hr&nbsp;/&gt;Return&nbsp;value:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$retval</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.system-notes">
  <h3 class="title">Notes</h3>
  <div class="warning"><strong class="warning">Warning</strong><p class="para">When allowing user-supplied data to be
passed to this function, use
<span class="function"><a href="function.escapeshellarg.html" class="function">escapeshellarg()</a></span> or <span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span>
to ensure that users cannot trick the system into executing arbitrary
commands.</p></div>
  <blockquote class="note"><p><strong class="note">Note</strong>: </p><p class="para">If a program is started with this function,
in order for it to continue running in the background, the output of the
program must be redirected to a file or another output stream. Failing to do so
will cause PHP to hang until the execution of the program ends.</p><p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">When
<a href="features.safe-mode.html" class="link">safe mode</a> is enabled, you can only
execute files within the <a href="ini.sect.safe-mode.html#ini.safe-mode-exec-dir" class="link">safe_mode_exec_dir</a>.
For practical reasons, it is currently not allowed to have <em>..</em>
components in the path to the executable.</span></p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">With <a href="features.safe-mode.html" class="link">safe mode</a> enabled,
the command string is escaped with <span class="function"><a href="function.escapeshellcmd.html" class="function">escapeshellcmd()</a></span>. Thus,
<em>echo y | echo x</em> becomes <em>echo y \| echo x</em>.</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.system-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.exec.html" class="function" rel="rdfs-seeAlso">exec()</a> - Execute an external program</span></li>
    <li class="member"><span class="function"><a href="function.passthru.html" class="function" rel="rdfs-seeAlso">passthru()</a> - Execute an external program and display raw output</span></li>
    <li class="member"><span class="function"><a href="function.popen.html" class="function" rel="rdfs-seeAlso">popen()</a> - Opens process file pointer</span></li>
    <li class="member"><span class="function"><a href="function.escapeshellcmd.html" class="function" rel="rdfs-seeAlso">escapeshellcmd()</a> - Escape shell metacharacters</span></li>
    <li class="member"><span class="function"><a href="function.pcntl-exec.html" class="function" rel="rdfs-seeAlso">pcntl_exec()</a> - Executes specified program in current process space</span></li>
    <li class="member"><a href="language.operators.execution.html" class="link">backtick operator</a></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="108713">  
  <a class="name">
  <strong class="user"><em>no at mail dot com</em></strong></a><div class="date" title="2012-05-19 10:06"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108713">
<div class="phpcode"><code><span class="html">
This is for WINDOWS users. I am running apache and I have been trying for hours now to capture the output of a command. <br><br>I'd tried everything that is written here and then continued searching online with no luck at all. The output of the command was never captured. All I got was an empty array.<br><br>Finally, I found a comment in a blog by a certain amazing guy that solved my problems. <br><br>Adding the string ' 2&gt;&amp;1' to the command name finally returned the output!! This works in exec() as well as system() in PHP since it uses stream redirection to redirect the output to the correct place!<br><br>system("yourCommandName 2&gt;&amp;1",$output) ;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40454">  
  <a class="name">
  <strong class="user"><em>mortoray at ecircle-ag dot com</em></strong></a><div class="date" title="2004-03-04 03:55"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40454">
<div class="phpcode"><code><span class="html">
Do not use "system" if you use the "php.ini" option:<br>&nbsp; &nbsp; zlib.output_compression = On<br><br>Doing so will result in the browser receiving garbage (I'm guessing the headers/buffers get confused).<br><br>Use passthru in this case, it appears to work as intended.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94929">  
  <a class="name">
  <strong class="user"><em>kexianin at diyism dot com</em></strong></a><div class="date" title="2009-12-02 11:41"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94929">
<div class="phpcode"><code><span class="html">
If you can't see any output or error from system(), shell_exec() etc, you could try this:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">my_exec</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, </span><span class="default">$input</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {</span><span class="default">$proc</span><span class="keyword">=</span><span class="default">proc_open</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">, array(</span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">=&gt;array(</span><span class="string">'pipe'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">)), </span><span class="default">$pipes</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$input</span><span class="keyword">);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$stdout</span><span class="keyword">=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$stderr</span><span class="keyword">=</span><span class="default">stream_get_contents</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);</span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$pipes</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rtn</span><span class="keyword">=</span><span class="default">proc_close</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return array(</span><span class="string">'stdout'</span><span class="keyword">=&gt;</span><span class="default">$stdout</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'stderr'</span><span class="keyword">=&gt;</span><span class="default">$stderr</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'return'</span><span class="keyword">=&gt;</span><span class="default">$rtn
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br></span><span class="default">var_export</span><span class="keyword">(</span><span class="default">my_exec</span><span class="keyword">(</span><span class="string">'echo -e $(&lt;/dev/stdin) | wc -l'</span><span class="keyword">, </span><span class="string">'h\\nel\\nlo'</span><span class="keyword">));
<br></span><span class="default">?&gt;
<br></span>
<br>For example, "echo shell_exec('ls');" will get nothing output,
<br>"my_exec('ls');" will get "sh: ls: command not found",
<br>"my_exec('/bin/ls');" will maybe get "sh: /bin/ls: Permission denied",
<br>and the permission may be caused by selinux.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82411">  
  <a class="name">
  <strong class="user"><em>vlad dot sharanhovich at gmail dot com</em></strong></a><div class="date" title="2008-04-09 12:33"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82411">
<div class="phpcode"><code><span class="html">
The double quote problem on Windows platform discussed earlier here in comments still present in PHP 5.2.5. You can't execute system($command) if $command contains more than 2 " chars. system('"echo" A'); works, while system('"echo" "A"'); does not. Search comment, that was a solution posted to overhaul this issue via temporary .bat file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37089">  
  <a class="name">
  <strong class="user"><em>tomlubbock at hotmail dot com</em></strong></a><div class="date" title="2003-11-02 06:07"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37089">
<div class="phpcode"><code><span class="html">
If you need to run root-level commands, such as to reboot a service, the utility 'sudo' will let you handle linux permissions. In our example we use 'sudo' to allow apache temporary root access to restart a service. We can then use:<br><br>system("sudo service dhcpd restart")<br><br>You also need to examine the /etc/sudoers file to specify what permissions to grant. Hope this helps someone!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39969">  
  <a class="name">
  <strong class="user"><em>djem at shadrinsk dot net</em></strong></a><div class="date" title="2004-02-17 05:04"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39969">
<div class="phpcode"><code><span class="html">
BUGFIX for the mysystem() function, posted by n-jones.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">syscall</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">){<br>&nbsp; &nbsp; if (</span><span class="default">$proc </span><span class="keyword">= </span><span class="default">popen</span><span class="keyword">(</span><span class="string">"(</span><span class="default">$command</span><span class="string">)2&gt;&amp;1"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">)) </span><span class="default">$result </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">pclose</span><span class="keyword">(</span><span class="default">$proc</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>Hello from Russia! :)<br>djem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24031">  
  <a class="name">
  <strong class="user"><em>n-jones at fredesign dot net</em></strong></a><div class="date" title="2002-08-04 03:08"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom24031">
<div class="phpcode"><code><span class="html">
To have system output from both the STDERR and STDOUT, I've modified the function posted above by lowery@craiglowery.com<br><br>function mysystem($command) {<br>&nbsp; if (!($p=popen("($command)2&gt;&amp;1","r"))) { <br>&nbsp; &nbsp; return 126;<br>&nbsp; }<br><br>&nbsp; while (!feof($p)) {<br>&nbsp; &nbsp; $line=fgets($p,1000);<br>&nbsp; &nbsp; $out .= $line;<br>&nbsp; }<br>&nbsp; pclose($p);<br>&nbsp; return $out; <br>}<br><br>Now you can use mysystem() like;<br><br>$var = "cat ".$file;<br>echo mysystem($var);<br><br>$catfile = mysystem($var);<br><br>if (ereg("text", $catfile)) {<br>&nbsp; //stuff here;<br>}<br><br>N.Jones</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58423">  
  <a class="name">
  <strong class="user"><em>cho at stunt growth dot com</em></strong></a><div class="date" title="2005-11-03 01:20"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58423">
<div class="phpcode"><code><span class="html">
Note to the persons who suggested using backticks for gathering a return value from scripts via system().<br><br>Using Backticks is generally frowned upon for security sake.&nbsp; They can be exploited more easily.<br><br>Instead, why not use the exec() function with a return parameter specified as an array type.&nbsp; This will allow you to take the full string returned from your script (for example rsync) and return each line in an array.<br><br>like so:<br>$result = array();<br>exec( $cmd, &amp;$result);<br>foreach ( $result as $v )<br>{<br>// parse, or do cool stuff<br>}<br><br>Hope this alternative brings you merriment.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40110">  
  <a class="name">
  <strong class="user"><em>tr4nc3 at msn dot com</em></strong></a><div class="date" title="2004-02-22 02:42"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40110">
<div class="phpcode"><code><span class="html">
I almost gave up trying to get Windows XP w/ Apache 2 to use either system(), or exec() to run a batch file.<br><br>If the batch file was this...<br><br>echo test &gt; test.txt<br><br>it would work fine, creating test.txt...<br><br>but if the batch file was..<br><br>iexplore.exe "<a rel="nofollow" target="_blank">http://www.ibm.com</a>"<br><br>I would get nothing. After hours and hours of messing around with this I figured it must be some type of permission problem. (dugh!)<br><br>Long story a little shorter.. You have to give Apache permission to "interact with the desktop".<br><br>Here's how...<br><br>Start&gt;Run&gt;services.msc<br>Right click "Apache...", select properties.<br>Click on the "LOG ON" tab<br>Check the box "Allow this service to interact with desktop"<br>Click OK<br>Restart Apache<br><br>Works great!<br>:D<br><br>HOPE THIS HELPS SOMEONE!<br>Too bad I didn't find a post like this before I figured it out myself. (I could have been working on something.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15159">  
  <a class="name">
  <strong class="user"><em>ryan at seattleone dot com</em></strong></a><div class="date" title="2001-08-29 05:36"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15159">
<div class="phpcode"><code><span class="html">
I was trying to use the system command, and I couldnt get it to work, then it occured to me, send the stderr to a file to see what is really happening.
<br>
<br>system( $command . " &amp;&gt; /tmp/error " );</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90662">  
  <a class="name">
  <strong class="user"><em>grytolle at gmail dot com</em></strong></a><div class="date" title="2009-05-03 07:38"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90662">
<div class="phpcode"><code><span class="html">
A more direct approach:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">runAsynchronously</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$WshShell </span><span class="keyword">= new </span><span class="default">COM</span><span class="keyword">(</span><span class="string">"WScript.Shell"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$oExec </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">Run</span><span class="keyword">(</span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">), </span><span class="default">7</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);
<br>&nbsp; &nbsp; unset(</span><span class="default">$WshShell</span><span class="keyword">,</span><span class="default">$oExec</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21427">  
  <a class="name">
  <strong class="user"><em>roger at proproject dot com</em></strong></a><div class="date" title="2002-05-12 10:35"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21427">
<div class="phpcode"><code><span class="html">
For your in-house pages, I recommend redirecting stderr to stdout so you'll know if something goes wrong.&nbsp; Here's a real-life example:<br><br>system("/mysql_reboot 2&gt;&amp;1");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83930">  
  <a class="name">
  <strong class="user"><em>al at aj8 dot org</em></strong></a><div class="date" title="2008-06-19 04:54"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83930">
<div class="phpcode"><code><span class="html">
In response to willytk at gmail dot com, 10-Sep-2007 01:39<br><br>If imagemagick / convert from eps or pdf is not working because the gs executable is not in the apache path, you can compile imagemagick with&nbsp; --with-frozenpaths<br><br>This makes imagemagick store the full path to the gs executable. The error I was getting before was<br>"sh: gs: command not found"<br>when convert was called with "-debug All"<br><br>Cheers<br>Alastair Battrick</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52273">  
  <a class="name">
  <strong class="user"><em>phil at pjhayward.net</em></strong></a><div class="date" title="2005-04-26 01:37"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52273">
<div class="phpcode"><code><span class="html">
On Windows XP, (possibly others)<br><br>If you are getting the unable to fork error, make sure the internet guest user has permission to read and execute the \Windows\System32\cmd.exe file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40581">  
  <a class="name">
  <strong class="user"><em>beetung at yahoo dot com</em></strong></a><div class="date" title="2004-03-08 01:34"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40581">
<div class="phpcode"><code><span class="html">
Under Linux<br>exec() doesnt follow symbolic link when interpret by httpd...<br><br>I have my /home/www/cgi-bin --&gt; soft linked to a samba mounted directory under /mnt/Downloads/www.site.com/cgi-bin<br><br>exec("/home/www/cgi-bin/runProg $a $b");<br><br>works ok when I execute the script using &gt; php myscript.php but fails to show the output when run via the web browser.<br><br>When I give it the exact full path without the symbolic link<br><br>exec("/mnt/Downloads/www.site.com/cgi-bin/runProg $a $b");<br><br>everything works perfectly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19230">  
  <a class="name">
  <strong class="user"><em>tk at taponet dot de</em></strong></a><div class="date" title="2002-02-20 07:17"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19230">
<div class="phpcode"><code><span class="html">
Beware:
<br>if (! system($cmd)) {
<br>&nbsp; print "error";
<br>}
<br>
<br>does not work!
<br>Use
<br>if (system($cmd) === false) {
<br>...}
<br>
<br>instead!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74173">  
  <a class="name">
  <strong class="user"><em>peter at randomnity dot com</em></strong></a><div class="date" title="2007-03-28 09:09"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74173">
<div class="phpcode"><code><span class="html">
Just a note to dan at thecsl dot org<br><br>0 and FALSE are _NOT_ the same.<br>You can check for false like so:<br><br><span class="default">&lt;?php<br></span><span class="keyword">if(</span><span class="default">$return_val </span><span class="keyword">=== </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="comment">// ....<br></span><span class="keyword">} else if (</span><span class="default">$return_val </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="comment">// ...<br></span><span class="keyword">}<br></span><span class="comment">// Continue...<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55627">  
  <a class="name">
  <strong class="user"><em>vdweij at hotmail dot com</em></strong></a><div class="date" title="2005-08-09 02:41"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55627">
<div class="phpcode"><code><span class="html">
It is possible to only capture the error stream (STERR). Here it goes...<br><br>(some_command par1 par2 &gt; /dev/null) 3&gt;&amp;1 1&gt;&amp;2 2&gt;&amp;3<br><br>-First STDOUT is redirected to /dev/null.<br>-By using parenthesis it is possible to gain control over STERR and STOUT again.<br>-Then switch STERR with STOUT. <br><br>The switch is using the standard variable switch method -- 3 variables (buckets) are required to swap 2 variables with each other. (you have 2 variables and you need to switch the contents - you must bring in a 3rd temporary variable to hold the contents of one value so you can properly swap them).<br><br>This link gave me this information:<br><a rel="nofollow" target="_blank">http://www.cpqlinux.com/redirect.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="48010">  
  <a class="name">
  <strong class="user"><em>Shai Coleman</em></strong></a><div class="date" title="2004-12-08 04:11"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48010">
<div class="phpcode"><code><span class="html">
The easiest way to run a process in the background under Windows, is to use system() with the bgrun.exe utility, available from <a rel="nofollow" target="_blank">http://www.jukkis.net/bgrun/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="45390">  
  <a class="name">
  <strong class="user"><em>srawlinNOSPAM at magma dot ca</em></strong></a><div class="date" title="2004-09-04 01:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45390">
<div class="phpcode"><code><span class="html">
If you are running PHP in a chroot environment then the system (and passthru) function needs /bin/sh to be located in the chroot as well.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42567">  
  <a class="name">
  <strong class="user"><em>eric_REMOVE at movementmovement_REMOVE dot com</em></strong></a><div class="date" title="2004-05-21 12:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42567">
<div class="phpcode"><code><span class="html">
It's important to note that if you are running a series of system() commands in a loop, you need to include the second argument in order for them to run synchonously.<br><br>ie)<br><br>// this will execute process.php asynchronously; not waiting for completion before executing the next one.<br>$array = array('apple', 'banana', 'pear');<br>foreach($array as $i)<br>{<br>system("php process.php \"fruit=$i\"");<br>}<br><br>// this will execute process.php 3 times, waiting for the prior command to complete before starting a new one<br>$array = array('apple', 'banana', 'pear');<br>foreach($array as $i)<br>{<br>system("php process.php \"fruit=$i\"", $status);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37835">  
  <a class="name">
  <strong class="user"><em>diogaogv at icqmail dot com</em></strong></a><div class="date" title="2003-11-28 04:57"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37835">
<div class="phpcode"><code><span class="html">
a really useful use for import(); while running the server at ur own machine is taking a screenshot of you desktop and showing it to the guest !!!<br><br>&lt;?<br>echo system("/usr/X11R6/bin/import -window root -display localhost:0 /mnt/d/Desenvolvimento/Desenvolvimento\ WWW/import/cache/imagem.jpg -quality 30" ." 2&gt;&amp;1");<br>?&gt;<br>&lt;img src="cache/imagem.jpg"&gt;<br><br>remember to set chmod 777 to your directory (called "cache" on my code). also do "xhost +" or you r gonna get a xlib error saying that it could not connect to x server at localhost...<br><br>the code is still too simple. i've just done it. e.g. you can improve a real cache system avoying more than one screenshot in a minute while...<br><br>that is it! hope u enjoy it ( rofl... =DDD ) ...<br><br>diogo86</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35842">  
  <a class="name">
  <strong class="user"><em>morris_hirsch at hotmail dot com</em></strong></a><div class="date" title="2003-09-16 02:49"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom35842">
<div class="phpcode"><code><span class="html">
another reason to use shell_exec instead of system is when the result is multiple lines such as grep or ls <br><br><span class="default">&lt;?php<br><br></span><span class="comment">// this correctly sets answer string to all lines found<br>//$answer = shell_exec ("grep 'set of color names' *.php ");<br>//echo "answer = $answer";<br><br>// this passes all lines to output (they&nbsp; show on page)<br>// and sets answer string to the final line<br> </span><span class="default">$sys </span><span class="keyword">= </span><span class="default">system </span><span class="keyword">(</span><span class="string">"grep 'set of color names' *.php "</span><span class="keyword">);<br> echo </span><span class="string">"sys =((</span><span class="default">$sys</span><span class="string">))"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>here is view/source resulting from system call<br><br>setprefs.php:// The standard set of color names is:<br>setprefs.php:// Most browsers accept a wider set of color names<br>silly.php:&nbsp; //$answer = shell_exec ("grep 'set of color names' *.php ");<br>silly.php: $sys = system ("grep 'set of color names' *.php ");<br>sys =((silly.php: $sys = system ("grep 'set of color names' *.php ");))<br><br>and here is view source from using shell_exec instead<br><br>answer = setprefs.php:// The standard set of color names is:<br>setprefs.php:// Most browsers accept a wider set of color names<br>silly.php:&nbsp; $answer = shell_exec ("grep 'set of color names' *.php ");<br>silly.php:// $sys = system ("grep 'set of color names' *.php ");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35297">  
  <a class="name">
  <strong class="user"><em>Jim Belton</em></strong></a><div class="date" title="2003-08-26 01:58"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom35297">
<div class="phpcode"><code><span class="html">
To run a full screen program from a PHP CLI script, redirect input from and output to /dev/tty.&nbsp; For example:<br><br>system("timeconfig &gt; /dev/tty &lt; /dev/tty");<br><br>System will wait for the program to finish before continuing.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33617">  
  <a class="name">
  <strong class="user"><em>chris at karakas-online dot de</em></strong></a><div class="date" title="2003-07-01 06:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33617">
<div class="phpcode"><code><span class="html">
If your PHP installation permits execution of commands through system() (e.g. you are not running in safe mode, or, if you are, safe_mode_exec_dir contains all the commands you need), you can trigger a backup of your MySQL database, just by pointing your browser to the following script:<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="comment">// Enter your MySQL access data&nbsp; <br>&nbsp; </span><span class="default">$host</span><span class="keyword">= </span><span class="string">'dbhost'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; </span><span class="default">$user</span><span class="keyword">= </span><span class="string">'dbuser'</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; </span><span class="default">$pass</span><span class="keyword">= </span><span class="string">'dbpassword'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$db</span><span class="keyword">=&nbsp;&nbsp; </span><span class="string">'db'</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$backupdir </span><span class="keyword">= </span><span class="string">'backups'</span><span class="keyword">;&nbsp;&nbsp; <br><br>&nbsp; </span><span class="comment">// Compute day, month, year, hour and min.<br>&nbsp; </span><span class="default">$today </span><span class="keyword">= </span><span class="default">getdate</span><span class="keyword">();<br>&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">mday</span><span class="keyword">];<br>&nbsp; if (</span><span class="default">$day </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$day</span><span class="string">"</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">mon</span><span class="keyword">];<br>&nbsp; if (</span><span class="default">$month </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$month </span><span class="keyword">= </span><span class="string">"0</span><span class="default">$month</span><span class="string">"</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; </span><span class="default">$year </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">year</span><span class="keyword">];<br>&nbsp; </span><span class="default">$hour </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">hours</span><span class="keyword">];<br>&nbsp; </span><span class="default">$min </span><span class="keyword">= </span><span class="default">$today</span><span class="keyword">[</span><span class="default">minutes</span><span class="keyword">];<br>&nbsp; </span><span class="default">$sec </span><span class="keyword">= </span><span class="string">"00"</span><span class="keyword">;<br><br>&nbsp; </span><span class="comment">// Execute mysqldump command.<br>&nbsp; // It will produce a file named $db-$year$month$day-$hour$min.gz <br>&nbsp; // under $DOCUMENT_ROOT/$backupdir<br>&nbsp; </span><span class="default">system</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">( <br>&nbsp; &nbsp; </span><span class="string">'mysqldump --opt -h %s -u %s -p%s %s | gzip &gt; %s/%s/%s-%s%s%s-%s%s.gz'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$host</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$user</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$pass</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$db</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">),<br>&nbsp; &nbsp; </span><span class="default">$backupdir</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$db</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$year</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$month</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$day</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$hour</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="default">$min<br>&nbsp; </span><span class="keyword">));&nbsp; <br>&nbsp; echo </span><span class="string">'+DONE'</span><span class="keyword">;&nbsp; <br></span><span class="default">?&gt;</span> <br><br>If you are not allowed cron access on the web server, you can set up your own cron job to periodically call the above script. If you don't have cron, or a similar functionality on your system, you can still modify the above script to inform the browser to reget the file every xxx hours. A poor man's cron, so to say ;-)<br><br>Of course, the $backupdir should at least be protected with a .htaccess file.<br><br>And of course, you are not going to backup a really large database this way, if your PHP has some timeout set (as is usually the case with web hosters).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30193">  
  <a class="name">
  <strong class="user"><em>d dot kraft at szo dot de</em></strong></a><div class="date" title="2003-03-10 02:18"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30193">
<div class="phpcode"><code><span class="html">
For PHP running inside a Webserver:<br><br>When calling a process via<br>system("your_process &amp;");<br>to make it running in background, note that this process is killed when the webserver is restarted.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28519">  
  <a class="name">
  <strong class="user"><em>user at unknown dot com</em></strong></a><div class="date" title="2003-01-15 02:07"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28519">
<div class="phpcode"><code><span class="html">
a simple way to include a beep on the server-side whenever a page in viewed.<br>**contents of 'beeping' page**<br>require ("beep.php")<br><br>**contents of beep.php**<br><span class="default">&lt;?php<br>system </span><span class="keyword">(</span><span class="string">"/home/site/exe/beep.executable"</span><span class="keyword">);<br></span><span class="comment">// on windows system ("c:\beep.exe");<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="23532">  
  <a class="name">
  <strong class="user"><em>a dot paul at bernardlabs dot com</em></strong></a><div class="date" title="2002-07-21 04:42"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom23532">
<div class="phpcode"><code><span class="html">
Well system is a pretty interesting and useful function.<br><br>This might have been already pointed out by predessors but anyways, for anyone looking to execute command line queries from php or scripts in general, this function does the trick.<br><br>However while using the command, you have to always think in terms of the command you are using as the function and the parameters as the arguments.<br><br>So say I want to do a 'ls -ls' on /home/sites/sitexyz/www/$username<br><br>I could do a <br><br>system("ls -la \"/home/sites/sitexyz/www/$username\" ");<br><br>Its important to think of this as passing&nbsp; &nbsp; &nbsp; /home/sites/sitexyz/www/$username&nbsp; &nbsp;&nbsp; as an argument to the function ls -la .<br><br>Similarly, you could do a <br><br>system("cp -r \"/home/sites/sitexyz/www/$username\"&nbsp; \"/home/sites/sitexyz/www/$username2\" ");<br><br>But you then need to use 'chmod -R 777 to the directory you want to copy it to, which can be done by a&nbsp; <br><br>system("chmod -R 777&nbsp;&nbsp; \"/home/sites/sitexyz/www/$username2\" ");<br><br>Now you can execute all the terminal commans via the php, however do realise the security concerns of using the same, especially when the operation is going to preceeded by some user input, so, you need to make sure you filter the inputs, or better not allow user intervention.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="6347">  
  <a class="name">
  <strong class="user"><em>digitalturbulence at softhome dot net</em></strong></a><div class="date" title="2000-07-09 12:04"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom6347">
<div class="phpcode"><code><span class="html">
If the command printf("%s",system($cmd)); doesn't work, check the httpd.error_log file in your /var/log directory. At my home, the system command can just load binary files in the directory /usr/lib/apache/bin
<br>Stephan.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="973">  
  <a class="name">
  <strong class="user"><em>ccurtis at aet-usa dot com</em></strong></a><div class="date" title="1999-06-14 11:07"><strong>15 years ago</strong></div>
  <div class="text" id="Hcom973">
<div class="phpcode"><code><span class="html">
If no headers have been printed, calling the system() function will flush the headers to the client and insert a newline; no further headers or cookies will be transferred to the browser.&nbsp; In version 3.0.7, you will not be warned that the Header() function failed, but will be warned if trying to set a cookie.&nbsp; If you want to continue to send headers after the function call, use exec() instead.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112910">  
  <a class="name">
  <strong class="user"><em>Vinicius Monteiro</em></strong></a><div class="date" title="2013-08-06 02:58"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112910">
<div class="phpcode"><code><span class="html">
I have a way to get the return of system, using ob_start() and ob_get_contents(). Ex.:<br><br>ob_start();<br><br>system("echo I'll catch the buffer");<br><br>$return = ob_get_contents();<br><br>ob_end_clean();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90664">  
  <a class="name">
  <strong class="user"><em>grytolle at gmail dot com</em></strong></a><div class="date" title="2009-05-03 10:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90664">
<div class="phpcode"><code><span class="html">
This is a work-around that makes the program run in it's own directory instead of the script's.
<br>
<br>example usage:
<br><span class="default">&lt;?php runAsynchronously</span><span class="keyword">(</span><span class="string">"c:\games\jazz2\jazz2.exe"</span><span class="keyword">,</span><span class="string">"-connect 1.2.3.4"</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">runAsynchronously</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="default">$arguments</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$WshShell </span><span class="keyword">= new </span><span class="default">COM</span><span class="keyword">(</span><span class="string">"WScript.Shell"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">CreateShortcut</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">TargetPath </span><span class="keyword">= </span><span class="default">$path</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">Arguments </span><span class="keyword">= </span><span class="default">$arguments</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">WorkingDirectory </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">WindowStyle </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$oShellLink</span><span class="keyword">-&gt;</span><span class="default">Save</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">$oExec </span><span class="keyword">= </span><span class="default">$WshShell</span><span class="keyword">-&gt;</span><span class="default">Run</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);
<br>&nbsp; &nbsp; unset(</span><span class="default">$WshShell</span><span class="keyword">,</span><span class="default">$oShellLink</span><span class="keyword">,</span><span class="default">$oExec</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="string">"temp.lnk"</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84945">  
  <a class="name">
  <strong class="user"><em>dukeman at seagate dot com</em></strong></a><div class="date" title="2008-08-06 01:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84945">
<div class="phpcode"><code><span class="html">
For novices remember that the executable has to be in a directory the server is serving or only local host will be able to access it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83572">  
  <a class="name">
  <strong class="user"><em>Daniel Morris (danielxmorris.com)</em></strong></a><div class="date" title="2008-06-02 06:34"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83572">
<div class="phpcode"><code><span class="html">
How to produce a system beep with PHP.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">beep </span><span class="keyword">(</span><span class="default">$int_beeps </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$int_beeps</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++): </span><span class="default">$string_beeps </span><span class="keyword">.= </span><span class="string">"\x07"</span><span class="keyword">; endfor;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isset (</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SERVER_PROTOCOL'</span><span class="keyword">]) ? </span><span class="default">false </span><span class="keyword">: print </span><span class="default">$string_beeps</span><span class="keyword">; <br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>This will not do anything when running through a browser, if running through a shell it will produce an audible beep $int_beeps times.&nbsp; This should work on Windows, Unix, etc.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80550">  
  <a class="name">
  <strong class="user"><em>Dennis</em></strong></a><div class="date" title="2008-01-21 07:37"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80550">
<div class="phpcode"><code><span class="html">
If you are writing CLI scripts in PHP and call external programs which produce some kind of progress bar you should really use passthru()&nbsp; for the output of the external program to go to the terminal immediately.<br>Such progress bar are usually done by outputing the string with "\r" at the end, and contain no "\n". system() and friends look for "\n" before flushing the buffer. As a result, you see nothing during the lengthy operation and suddenly you get the 100% reading, because all output was buffered and quickly replayed into the terminal when the final "\n" has been seen.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77715">  
  <a class="name">
  <strong class="user"><em>willytk at gmail dot com</em></strong></a><div class="date" title="2007-09-10 05:39"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77715">
<div class="phpcode"><code><span class="html">
If you're having problems with getting imagemagick/convert to work with ghostscript because the gs executable isn't in the apache PATH, do the following:<br><br>To create a thumb of the first pdf page:<br><br><span class="default">&lt;?php<br>$command</span><span class="keyword">= </span><span class="string">'export PATH=$PATH:/sw/bin; convert "files/example.pdf[0]" -thumbnail 150x150 "files/thumbs/example.png"'</span><span class="keyword">;<br><br></span><span class="default">$lastline </span><span class="keyword">= </span><span class="default">system</span><span class="keyword">(</span><span class="default">$command</span><span class="keyword">,</span><span class="default">$return</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Thanks entropy.ch and phpaladin!<br><br>Regards,<br><br>Willy T. Koch<br>Oslo, Norway</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75883">  
  <a class="name">
  <strong class="user"><em>eis</em></strong></a><div class="date" title="2007-06-20 02:11"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75883">
<div class="phpcode"><code><span class="html">
It should be noted, too, that "unable to fork" error in Windows also occurs if you try to send a command that's too long for cmd.exe to process.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73737">  
  <a class="name">
  <strong class="user"><em>norman_ss at hotmail dot com</em></strong></a><div class="date" title="2007-03-08 03:43"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73737">
<div class="phpcode"><code><span class="html">
thanks to tr4nc3,<br><br>I'm trying to, from the explorer, run an access's macro and this example give me the solution:<br><br>You can execute a .bat file with the especifications that give us tr4nc3.<br>After, in this .bat file, you can execute msacces.exe and pass /x parameter with the name of the macro. like this:<br><br>"c:\windows\system32\cmd.exe /c &lt;path or the msaccess.exe&gt;" &lt;path of the .mdb file&gt; /x &lt;name of the macro&gt;"<br><br>At the end of the .bat file you have to put "exit" and the thread will end.<br><br>Thanks to tr4nc3!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="66795">  
  <a class="name">
  <strong class="user"><em>dan at thecsl dot org</em></strong></a><div class="date" title="2006-05-29 08:45"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom66795">
<div class="phpcode"><code><span class="html">
You probably want to check your system calls for errors. The convention is to return 0&nbsp; for "no error" which is the same as FALSE which can be confusing. You need to do something like:<br><br><span class="default">&lt;?php<br>&nbsp; $cmd </span><span class="keyword">= </span><span class="string">"/usr/bin/pngtopnm </span><span class="default">$png_file</span><span class="string"> &gt; </span><span class="default">$pnm_file</span><span class="string">"</span><span class="keyword">;<br>&nbsp; </span><span class="default">system</span><span class="keyword">(</span><span class="default">$cmd</span><span class="keyword">,</span><span class="default">$return_value</span><span class="keyword">);<br>&nbsp; (</span><span class="default">$return_value </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) or die(</span><span class="string">"returned an error: </span><span class="default">$cmd</span><span class="string">"</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60836">  
  <a class="name">
  <strong class="user"><em>matt-php at cdsportland dot com</em></strong></a><div class="date" title="2006-01-17 09:15"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60836">
<div class="phpcode"><code><span class="html">
If using Windows with IIS and you're having problems with the system() and related commands, I found the easiest way to solve it was to modify the Authentication Method for the file (or directory) that uses the call and change the anonymous access user from the default (IUSR_IMAGE) to a user with enough permissions to execute the commands in the system call.&nbsp; This way, there is no need to give execute permissions to IUSR_IMAGE on cmd.exe (which opens up a security risk system-wide) or copy cmd.exe into your php directory (per the suggestions of others).&nbsp; Hope this helps someone!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52770">  
  <a class="name">
  <strong class="user"><em>Stuart Prescott</em></strong></a><div class="date" title="2005-05-11 10:14"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52770">
<div class="phpcode"><code><span class="html">
Note that for stderr redirection, you have to use double quotes (") not single quotes (') for the 2&gt;&amp;1 part at least.<br><br>&lt;?<br>//e.g. the this will NOT do what you expect:<br>exec('mysqldump -h localhost ...... 2&gt;&amp;1', $output);<br><br>//but this will:<br>exec("mysqldump -h localhost ...... 2&gt;&amp;1", $output);<br>?&gt;<br><br>*sigh*<br><br>(Sounds like a PHP bug to me..., or at least buggy docs!)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52195">  
  <a class="name">
  <strong class="user"><em>admin at nabeelakhtar dot net</em></strong></a><div class="date" title="2005-04-23 07:13"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52195">
<div class="phpcode"><code><span class="html">
Windows XP (IIS) users: (Unable to fork Problem)<br><br>If you receive something like:<br>Warning:&nbsp; passthru() [function.passthru]: Unable to fork [dir] in c:\Inetpub\wwwroot\ping.php on line X<br><br>1. Copy CMD.EXE file from the Windows\System32\ folder to your PHP directory (c:\PHP\).<br><br>This should fix the problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45961">  
  <a class="name">
  <strong class="user"><em>roga at yoopee dot de</em></strong></a><div class="date" title="2004-09-24 09:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45961">
<div class="phpcode"><code><span class="html">
In combination with Zend Optimizer and Windows 2K/XP some programs may not run with system(), exec(), etc.<br><br>I tried to use a small tool for ejecting the cd tray and it did just nothing. Disabling Zend Optimizer solved it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35649">  
  <a class="name">
  <strong class="user"><em>lc at _REMOVE__THIS_lc dot yi dot org</em></strong></a><div class="date" title="2003-09-09 05:24"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom35649">
<div class="phpcode"><code><span class="html">
Re: cpmorris at hotmail dot com and WINNT.<br><br>I just spent some time learning to use the php system function.&nbsp; I managed to get long file names to work for me.&nbsp; It seems you need to take the same approach that batch files, WSH, and most other programming languages do under WinNT/2K/XP.&nbsp; Putting double quotes around the Path+Filename seems to work.&nbsp; So, something like this should have worked for you:<br><br>"c:\program files\apache group\apache2\bin\htpasswd"<br><br>Note that if you have parameters, they go OUTSIDE of the last quote.&nbsp; Oh, and don't forget to escape the slashes and quotes!&nbsp; <br><br>I don't know what htpasswd's params are, but let us pretend:<br><br>$cmd="\"c:\\program files\\apache group\\apache2\\bin\\htpasswd\" username password";<br>$str=system($cmd);<br><br>Hope this helps someone!<br><br>Leonard<br>http:\\www.lc.yi.org</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30053">  
  <a class="name">
  <strong class="user"><em>cnoelker at softpearls dot de</em></strong></a><div class="date" title="2003-03-05 06:13"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30053">
<div class="phpcode"><code><span class="html">
Hi,<br>some tips for using a system()-call for batch files on a windows computer:<br>* Write the path to the executable with double back-slashes, like so:<br>&nbsp;&nbsp; C:\\path\\to\\prog.exe<br>* If you are refering to other pathes, e.g. as a parameter, one back-slash works fine.<br>* Do not use SET for declaring parameters - this does not work! Example:<br>&nbsp;&nbsp; SET PATH="C:\path\to\lib"<br>&nbsp;&nbsp; echo path is %PATH%<br>This works fine when started from the comand line, but when called from PHP, the variable is just empty.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20207">  
  <a class="name">
  <strong class="user"><em>james at jsrobertson dot net</em></strong></a><div class="date" title="2002-03-26 11:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20207">
<div class="phpcode"><code><span class="html">
I've found a very useful technique for the system function. Say if you want to create a page of quotes and you have /usr/games/fortune available. Instead of spending time creating a database and populating it with thousands of quotes, you can just use:<br><br><span class="default">&lt;?php<br>system</span><span class="keyword">(</span><span class="string">'/usr/games/fortune'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>likewise if you want to list the files in your directory, say for example, Mp3's?<br><br><span class="default">&lt;?php<br>system</span><span class="keyword">(</span><span class="string">'ls /home/mp3 -l'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>basically<br><br><span class="default">&lt;?php<br>system</span><span class="keyword">(</span><span class="string">'any_command'</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="6978">  
  <a class="name">
  <strong class="user"><em>nospam at php dot net</em></strong></a><div class="date" title="2000-07-24 05:57"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom6978">
<div class="phpcode"><code><span class="html">
If you are trying to parse a CGI script to your webserver which needs arguments, take a look to the virtual() function .. it took me long before i found out it existed...
<br>It's used like this:
<br><span class="default">&lt;?php
<br>virtual</span><span class="keyword">(</span><span class="string">"/cgi-bin/lastuser.cgi?argument"</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>And that works excellent now for me</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102395">  
  <a class="name">
  <strong class="user"><em>daveloop</em></strong></a><div class="date" title="2011-02-11 07:32"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102395">
<div class="phpcode"><code><span class="html">
I was trying to get the server-side to beep in windows 7.&nbsp; I finally found something that would work without creating my own EXE.<br><br>Create a batch file with at the CMD prompt type:<br> <br>&nbsp;&nbsp; echo @echo (Alt-7)&gt;beep.bat<br><br>Then execute it in PHP with:<br><br>&nbsp;&nbsp; exec ('start /MIN c:\your_path_here\beep.bat');<br><br>NOTE: The only drawback I can find is that a cmd.exe does visually flash on the system (which is why I used the /MIN to ensure it only goes to the taskbar).&nbsp; Not really sure why I don't like that, but it was a side effect that I wasn't looking for.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76561">  
  <a class="name">
  <strong class="user"><em>timgolding_10 at hotmail dot com</em></strong></a><div class="date" title="2007-07-20 07:19"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76561">
<div class="phpcode"><code><span class="html">
An example of using the system to call the file command on a linux server. This script detects whether a user posted file is a jpeg, gif or png<br><br><span class="default">&lt;?PHP<br><br>$accepted_types</span><span class="keyword">=array(</span><span class="string">"JPEG" </span><span class="keyword">, </span><span class="string">"GIF"</span><span class="keyword">, </span><span class="string">"PNG"</span><span class="keyword">); <br><br>&nbsp; &nbsp; </span><span class="comment">// The temporary filename of the file in which the uploaded file was stored on the server. <br></span><span class="keyword">if(!empty(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"uploadedfile"</span><span class="keyword">]))<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$uploaddir </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">].</span><span class="string">"/images/"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$uploaddir</span><span class="keyword">.=</span><span class="default">basename</span><span class="keyword">( </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);<br>&nbsp;&nbsp; <br> </span><span class="comment">//verfiy file using linux FILE command <br> </span><span class="default">$last_line </span><span class="keyword">= </span><span class="default">system</span><span class="keyword">(</span><span class="string">'file '</span><span class="keyword">.</span><span class="default">escapeshellarg</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">]), </span><span class="default">$retval</span><span class="keyword">);<br><br> </span><span class="comment">//get the file extension returned through magic database<br> </span><span class="default">$splitvals</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' image data' </span><span class="keyword">,&nbsp; </span><span class="default">$last_line</span><span class="keyword">);<br> </span><span class="default">$vals</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$splitvals</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br> </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]=</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">, </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]); <br><br> if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$accepted_types</span><span class="keyword">))<br> {<br>&nbsp; &nbsp; echo </span><span class="default">$vals</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">' was accepted &lt;br /&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$uploaddir</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Copy the file to some permanent location<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"uploadedfile"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">], </span><span class="default">$uploaddir</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$uploaddir</span><span class="keyword">.</span><span class="string">" was uploaded! &lt;br /&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"There was a problem when uploding the new file, please contact admin about this."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else echo </span><span class="string">'This file already exists in DB please rename file before uploading'</span><span class="keyword">;<br>}<br>}else echo </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'uploadedfile'</span><span class="keyword">][</span><span class="string">'error'</span><span class="keyword">].</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74012">  
  <a class="name">
  <strong class="user"><em>jordan314 at mailinator dot com</em></strong></a><div class="date" title="2007-03-20 12:44"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74012">
<div class="phpcode"><code><span class="html">
z1a7n8g, your system logging to file function was really useful, but had two errors:<br>$line=fgets($fPtr,filesize("yourfile.php");<br>that line needs a second closing ')'<br>and:<br>while ($line)<br>returns true until your script runs out of memory. Those two lines can be combined:<br>while($line=fgets($fPtr,filesize("yourfile.php")));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20062">  
  <a class="name">
  <strong class="user"><em>z1a7n8g at / at a&lt;o&lt;l dot c&lt;o&lt;m</em></strong></a><div class="date" title="2002-03-20 08:22"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20062">
<div class="phpcode"><code><span class="html">
I am currently using a form driven administration<br>page to start an ftp server remotely from a web page in FreeBSD 4.5 using PHP 4.1.2 &amp; apache 1.3.23. (Sorry guys, no CVS!!)<br>This code will emulate a CLI command from your browser (anywhere!!) and execute it if your PHP module/binary has the correct permissions...<br>&lt;code&gt;&lt;pre&gt;<br>//your front end<br>&lt;form ..your form stuff here...&gt;<br>&lt;input type="text" name=command&gt;<br>&lt;your additional form stuff&gt;<br>///the gutz<br>&lt;? <br> $arg=explode( " ", $command, 4 )<br>&nbsp; &nbsp;&nbsp; if ($arg[0] = "system")<br>&nbsp; &nbsp; &nbsp;&nbsp; { <br> system($arg[1] . " " . $arg[2] . " " . $arg[3]..etc);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }?&gt;<br>&lt;/code&gt;&lt;/pre&gt;<br>This works, however it is simple and lacks any error output.<br>try:<br>&lt;pre&gt;&lt;code&gt;<br> &lt;?system(command &gt; /path/to/yourfile.php);<br>&nbsp; &nbsp;&nbsp; $fPtr=@fopen("yourfile.php",r);<br>&nbsp; &nbsp;&nbsp; $line=fgets($fPtr,filesize("yourfile.php");<br>&nbsp; &nbsp; &nbsp; &nbsp; while ($line)<br>&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $formatted_line=ereg_replace("your favorite newline semantic","&lt;BR&gt;",$line);<br>&nbsp; &nbsp; &nbsp; &nbsp; print $formatted_line;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br><br> ?&gt;<br>&lt;/pre&gt;&lt;/code&gt;<br>Keep in mind the SECURITY implications with the use of this and like scripts. You've been warned.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.system.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:04 GMT -->


</body></html>