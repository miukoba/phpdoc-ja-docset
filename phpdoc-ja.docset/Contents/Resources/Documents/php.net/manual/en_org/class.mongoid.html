<html><!-- Mirrored from php.net/manual/en/class.mongoid.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:59:30 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>MongoId</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="class.mongoid.html">
 <link rel="shorturl" href="http://php.net/mongoid">
 <link rel="alternate" href="http://php.net/mongoid" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="mongo.types.html">
 <link rel="prev" href="mongo.types.html">
 <link rel="next" href="mongoid.construct.html">

 <link rel="alternate" href="class.mongoid.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/class.mongoid.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/class.mongoid.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/class.mongoid.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/class.mongoid.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/class.mongoid.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/class.mongoid.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/class.mongoid.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/class.mongoid.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/class.mongoid.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/class.mongoid.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="book.mongo.html">Mongo</a></li>      <li><a href="mongo.types.html">Types</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="class.mongoid" class="reference">

 <h1 class="title">The MongoId class</h1>
 

 <div class="partintro"><p class="verinfo">(PECL mongo &gt;=0.8.0)</p>


  <div class="section" id="mongoid.intro">
   <h2 class="title">Introduction</h2>
   <p class="para">
    A unique identifier created for database objects.  If an object is inserted
    into the database without an _id field, an _id field will be added to it
    with a <strong class="classname">MongoId</strong> instance as its value.  If the data 
    has a naturally occuring unique field (e.g. username or timestamp) it is
    fine to use this as the _id field instead, and it will not be replaced with 
    a <strong class="classname">MongoId</strong>.
   </p>
   <p class="para">
    Instances of the <strong class="classname">MongoId</strong> class fulfill the role that 
    autoincrementing does in a relational database: to provide a unique key if 
    the data does not natually have one. Autoincrementing does not work well 
    with a sharded database, as it is difficult to determine the next number in
    the sequence. This class fulfills the constraints of quickly generating a
    value that is unique across shards.
   </p>
   <p class="para">
    Each MongoId is 12 bytes (making its string form 24 hexadecimal characters).
    The first four bytes are a timestamp, the next three are a hash of the
    client machine's hostname, the next two are the two least significant bytes
    of the process id running the script, and the last three bytes are an
    incrementing value.
   </p>
   <p class="para">
    <strong class="classname">MongoId</strong>s are serializable/unserializable.  Their
    serialized form is similar to their string form:
    </p><div class="example-contents screen">
<div class="cdata"><pre>C:7:"MongoId":24:{4af9f23d8ead0e1d32000000}
</pre></div>
    </div>
   <p></p>
  </div>


  <div class="section" id="mongoid.synopsis">
   <h2 class="title">Class synopsis</h2>


   <div class="classsynopsis">
    <div class="ooclass"></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">MongoId</strong>
     </span>
     {</div>


    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">string</span>
      <var class="varname"><a href="class.mongoid.html#mongoid.props.id">$<var class="varname">$id</var></a></var>
     <span class="initializer"> = <strong><code>NULL</code></strong></span>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Methods */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><a href="mongoid.construct.html" class="methodname">__construct</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$id</code><span class="initializer"> = <strong><code>NULL</code></strong></span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">string</span> <span class="methodname"><a href="mongoid.gethostname.html" class="methodname">getHostname</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="mongoid.getinc.html" class="methodname">getInc</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="mongoid.getpid.html" class="methodname">getPID</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">int</span> <span class="methodname"><a href="mongoid.gettimestamp.html" class="methodname">getTimestamp</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">bool</span> <span class="methodname"><a href="mongoid.isvalid.html" class="methodname">isValid</a></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">MongoId</span> <span class="methodname"><a href="mongoid.set-state.html" class="methodname">__set_state</a></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$props</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="mongoid.tostring.html" class="methodname">__toString</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>


  </div>

  <div class="section">
   <h2 class="title">Fields</h2>
   <dl>

    
     <a class="dashAnchor" name="//apple_ref/Property/%24id"></a><dt id="mongoid.props.id"><var class="varname"><var class="varname">$id</var></var></dt>

     <dd>

      <span class="simpara">
       This field contains the string representation of this object.
      </span>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
        <span class="simpara">
          The property name begins with a <em>$</em> character. It may
          be accessed using
          <a href="language.types.string.html#language.types.string.parsing.complex" class="link">complex variable
          parsed syntax</a> (e.g. <em>$mongoId-&gt;{'$id'}</em>).
        </span>
      </p></blockquote>
     </dd>

    
   </dl>

  </div>

  <div class="section">
   <h2 class="title">See Also</h2>
   <p class="para">
    MongoDB core docs on <a href="http://docs.mongodb.org/manual/reference/object-id/" class="link external">»&nbsp;ObjectIds</a>.
   </p>
  </div>
 </div>

 

























































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="mongoid.construct.html">MongoId::__construct</a> — Creates a new id</li><li><a href="mongoid.gethostname.html">MongoId::getHostname</a> — Gets the hostname being used for this machine's ids</li><li><a href="mongoid.getinc.html">MongoId::getInc</a> — Gets the incremented value to create this id</li><li><a href="mongoid.getpid.html">MongoId::getPID</a> — Gets the process ID</li><li><a href="mongoid.gettimestamp.html">MongoId::getTimestamp</a> — Gets the number of seconds since the epoch that this id was created</li><li><a href="mongoid.isvalid.html">MongoId::isValid</a> — Check if a value is a valid ObjectId</li><li><a href="mongoid.set-state.html">MongoId::__set_state</a> — Create a dummy MongoId</li><li><a href="mongoid.tostring.html">MongoId::__toString</a> — Returns a hexidecimal representation of this id</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="110338">  
  <a class="name">
  <strong class="user"><em>rmarscher</em></strong></a><div class="date" title="2012-10-12 03:11"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110338">
<div class="phpcode"><code><span class="html">
You can also cast the id to a string rather than access the $id property to get a string representation of the MongoId.<br><br><span class="default">&lt;?php<br>$stringId </span><span class="keyword">= (string) </span><span class="default">$mongoId</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112639">  
  <a class="name">
  <strong class="user"><em>Lionel</em></strong></a><div class="date" title="2013-07-08 01:51"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112639">
<div class="phpcode"><code><span class="html">
Just to be careful with the strict comparison. Object inequalities holds.<br><br><span class="default">&lt;?php<br><br>$m1 </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">'51b14c2de8e185801f000006'</span><span class="keyword">);<br></span><span class="default">$m2 </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">'51b14c2de8e185801f000006'</span><span class="keyword">);<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m1 </span><span class="keyword">=== </span><span class="default">$m2</span><span class="keyword">); </span><span class="comment">//gives you boolean false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m1 </span><span class="keyword">== </span><span class="default">$m2</span><span class="keyword">); </span><span class="comment">//gives you boolean true<br><br></span><span class="default">$m3 </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">'51b14c2de8e185801f000006'</span><span class="keyword">);<br></span><span class="default">$m4 </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">'51b14c2de8e185801f000007'</span><span class="keyword">);<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m3 </span><span class="keyword">=== </span><span class="default">$m4</span><span class="keyword">); </span><span class="comment">//gives you boolean false<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$m3 </span><span class="keyword">== </span><span class="default">$m4</span><span class="keyword">); </span><span class="comment">//gives you boolean false<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104850">  
  <a class="name">
  <strong class="user"><em>alex dot turpin at gmail dot com</em></strong></a><div class="date" title="2011-07-11 09:15"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104850">
<div class="phpcode"><code><span class="html">
If you need to get the actual ID string, and you try the usual way, PHP will whine because it starts with a dollar sign and it thinks it's a variable. Instead, use this notation:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $mongoid</span><span class="keyword">-&gt;{</span><span class="string">'$id'</span><span class="keyword">} </span><span class="comment">//Get the $id property of a MongoId object<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112598">  
  <a class="name">
  <strong class="user"><em>georgedot dont spam me gmail caom</em></strong></a><div class="date" title="2013-07-03 07:29"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112598">
<div class="phpcode"><code><span class="html">
Due to Recent changes. <br><br>* [PHP-554] - MongoId should not get constructed when passing in an invalid ID.<br><br>Constructor will throw an exception when passing invalid ID.<br><br><span class="default">&lt;?php<br><br>$_id </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(); </span><span class="comment">//Generates new ID<br></span><span class="default">$_id </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">); </span><span class="comment">//Generates new ID<br><br></span><span class="default">$_id </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">"invalid id"</span><span class="keyword">); </span><span class="comment">//throws MongoException<br><br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br></span><span class="comment">//Revert to old behaviour<br></span><span class="default">$_id </span><span class="keyword">= </span><span class="string">"invalid id"</span><span class="keyword">;<br>try {<br>&nbsp; &nbsp; </span><span class="default">$_id </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="default">$_id</span><span class="keyword">);<br>} catch (</span><span class="default">MongoException $ex</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$_id </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">();<br>}<br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br></span><span class="comment">//Nifty hack<br></span><span class="keyword">class </span><span class="default">SafeMongoId </span><span class="keyword">extends </span><span class="default">MongoId </span><span class="keyword">{<br><br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; try {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } catch (</span><span class="default">MongoException $ex</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110765">  
  <a class="name">
  <strong class="user"><em>Ryan S</em></strong></a><div class="date" title="2012-12-05 05:46"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110765">
<div class="phpcode"><code><span class="html">
it is important to note that<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">array(</span><span class="string">"_id" </span><span class="keyword">=&gt; new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="string">"50cf7d2841d41f4f35000000"</span><span class="keyword">))<br></span><span class="comment">//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ≠<br>&nbsp; &nbsp; </span><span class="keyword">array(</span><span class="string">"_id" </span><span class="keyword">=&gt; array(</span><span class="string">"</span><span class="default">$id</span><span class="string">" </span><span class="keyword">=&gt; </span><span class="string">"50cf7d2841d41f4f35000000"</span><span class="keyword">))<br></span><span class="default">?&gt;<br></span><br>This issue can arrise when using json_encode() and json_decode(). If not paying close enough attention one can assume due to the encoded value of the object that it is just this simple:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $item </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">myCollection</span><span class="keyword">-&gt;</span><span class="default">findOne</span><span class="keyword">();<br>&nbsp; &nbsp; print </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// {"_id": {"$id": "50cf7d2841d41f4f35000000"}}<br>&nbsp; &nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">myCollection</span><span class="keyword">-&gt;</span><span class="default">findOne</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="comment">// $item is empty aka not found<br></span><span class="default">?&gt;<br></span><br>Simple solution to handle these situations:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">class </span><span class="default">MongoId2 </span><span class="keyword">extends </span><span class="default">MongoId </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$id </span><span class="keyword">= (object) </span><span class="default">$id</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$id</span><span class="keyword">-&gt;{</span><span class="string">'$id'</span><span class="keyword">})) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$id</span><span class="keyword">-&gt;{</span><span class="string">'$id'</span><span class="keyword">};<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100386">  
  <a class="name">
  <strong class="user"><em>sararschreiber  at  gmail dot com</em></strong></a><div class="date" title="2010-10-12 12:23"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100386">
<div class="phpcode"><code><span class="html">
this is useful for querying for an object by id, given the id's hex:
<br>
<br><span class="default">&lt;?php
<br>$userid </span><span class="keyword">= </span><span class="string">'4cb4ab6d7addf98506010000'</span><span class="keyword">;
<br>
<br></span><span class="default">$theObjId </span><span class="keyword">= new </span><span class="default">MongoId</span><span class="keyword">(</span><span class="default">$userid</span><span class="keyword">);
<br>
<br></span><span class="default">$connection </span><span class="keyword">= new </span><span class="default">Mongo</span><span class="keyword">();
<br></span><span class="default">$db </span><span class="keyword">= </span><span class="default">$connection</span><span class="keyword">-&gt;</span><span class="default">thedb</span><span class="keyword">-&gt;</span><span class="default">users</span><span class="keyword">;
<br>
<br></span><span class="comment">// this will return our matching entry.
<br></span><span class="default">$item </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">findOne</span><span class="keyword">(array(</span><span class="string">"_id" </span><span class="keyword">=&gt; </span><span class="default">$theObjId</span><span class="keyword">));
<br>
<br></span><span class="default">$connection</span><span class="keyword">-&gt;</span><span class="default">close</span><span class="keyword">();
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/class.mongoid.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:59:30 GMT -->


</body></html>