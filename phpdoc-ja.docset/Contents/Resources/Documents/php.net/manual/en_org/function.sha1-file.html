<html><!-- Mirrored from php.net/manual/en/function.sha1-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:25 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>sha1_file</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.sha1-file.html">
 <link rel="shorturl" href="http://php.net/sha1-file">
 <link rel="alternate" href="http://php.net/sha1-file" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.setlocale.html">
 <link rel="next" href="function.sha1.html">

 <link rel="alternate" href="function.sha1-file.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.sha1-file.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.sha1-file.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.sha1-file.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.sha1-file.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.sha1-file.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.sha1-file.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.sha1-file.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.sha1-file.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.sha1-file.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.sha1-file.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.sha1-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sha1_file</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">sha1_file</span> — <span class="dc-title">Calculate the sha1 hash of a file</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.sha1-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>sha1_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$raw_output</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="simpara">
   Calculates the sha1 hash of the file specified by
   <code class="parameter">filename</code> using the
   <a href="http://www.faqs.org/rfcs/rfc3174" class="link external">»&nbsp;US Secure Hash Algorithm 1</a>,
   and returns that hash. The hash is a 40-character hexadecimal number.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sha1-file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       The filename of the file to hash.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">raw_output</code></dt>

     <dd>

      <p class="para">
       When <strong><code>TRUE</code></strong>, returns the digest in raw binary format with a length of
       20.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.sha1-file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a string on success, <strong><code>FALSE</code></strong> otherwise.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.sha1-file-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4977">
    <p><strong>Example #1 <span class="function"><strong>sha1_file()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">foreach(</span><span style="color: #0000BB">glob</span><span style="color: #007700">(</span><span style="color: #DD0000">'/home/Kalle/myproject/*.php'</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$ent</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;if(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">$ent</span><span style="color: #007700">))<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$ent&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">'&nbsp;(SHA1:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">sha1_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$ent</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">')'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.sha1-file-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.1.0</td>
       <td>
        Changed the function to use the streams API. It means that you can use
        it with wrappers, like <em>sha1_file('http://example.com/..')</em>
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sha1-file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.sha1.html" class="function" rel="rdfs-seeAlso">sha1()</a> - Calculate the sha1 hash of a string</span></li>
    <li class="member"><span class="function"><a href="function.md5-file.html" class="function" rel="rdfs-seeAlso">md5_file()</a> - Calculates the md5 hash of a given file</span></li>
    <li class="member"><span class="function"><a href="function.crc32.html" class="function" rel="rdfs-seeAlso">crc32()</a> - Calculates the crc32 polynomial of a string</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="104748">  
  <a class="name">
  <strong class="user"><em>xijque at gmail dot com</em></strong></a><div class="date" title="2011-07-05 07:13"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104748">
<div class="phpcode"><code><span class="html">
Just for the record - <br><br>As some have pointed out, you have two ways to generate the hash of a file:<br>Method 1 [this function]: sha1_file($file)<br>Method 2: sha1(file_get_contents($file))<br><br>It's important to realize that these two methods are NOT the same thing. If they were, I seriously doubt this function would exist.<br><br>The key difference, as far as I can tell, is how the file's contents are loaded. The second method loads the entirety of $file into memory before passing it to sha1($str). Method two, however, loads the contents of $file as they are needed to create the hash.<br><br>If you can guarantee that you'll only ever have to hash relatively small files, this difference means very little. If you have larger ones, though, loading the entirety of file into memory is a bad idea: best case, you slow down your server as it tries to handle the request; worse case, you run out of memory and don't get your hash at all.<br><br>Just try to keep this in mind if you decide to load the file's contents yourself, in lieu of using this function. On my system, I was able to use this function to generate the hash of a 2.6GB file in 22 seconds, whereas I could not with the second method, due to an out-of-memory error (which took 185 seconds).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68651">  
  <a class="name">
  <strong class="user"><em>admin at cmsrevolution dot com</em></strong></a><div class="date" title="2006-08-04 08:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68651">
<div class="phpcode"><code><span class="html">
checking the sha1 of the file. ideal for download scripts making sure the file the user is downloading is not currupt<br>by checking the sha1 key<br><br><span class="default">&lt;?php<br>$filename </span><span class="keyword">= </span><span class="string">'./Path/To/Your/File.zip'</span><span class="keyword">;<br><br>if (</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) {<br>echo</span><span class="string">"i see the file"</span><span class="keyword">;<br>} else {<br>echo </span><span class="string">"recheck the link file maybe broken"</span><span class="keyword">;<br>}<br></span><span class="default">$file </span><span class="keyword">= </span><span class="default">sha1_file</span><span class="keyword">(</span><span class="string">'./Path/To/Your/File.zip'</span><span class="keyword">);<br><br>echo</span><span class="string">"&lt;br&gt;is file hash valid?"</span><span class="keyword">;<br>echo</span><span class="string">"hash = add the hash here&lt;br&gt;"</span><span class="keyword">;<br>echo</span><span class="string">"hash of file :"</span><span class="keyword">;<br>print(</span><span class="default">$file</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87183">  
  <a class="name">
  <strong class="user"><em>vista_ at live dot se</em></strong></a><div class="date" title="2008-11-23 04:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87183">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'sha1_file'</span><span class="keyword">))<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; function </span><span class="default">sha1_file</span><span class="keyword">(</span><span class="default">$file </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) || !</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'File is null or does not exists'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">sha1</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; }<br></span><span class="default">?&gt;<br></span><br>Remember, it's important to write a corret url like this:<br>/home/snackzon/public_html/php/sha1.php</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61741">  
  <a class="name">
  <strong class="user"><em>gubatron at gmail dot com</em></strong></a><div class="date" title="2006-02-10 07:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61741">
<div class="phpcode"><code><span class="html">
P2P programs like LimeWire utilize sha1 to identify files. However they do it in base32. Here's an utility class if you want to write a Gnutella client in PHP5<br><br>/**<br>Utility base32 SHA1 class for PHP5<br>Copyright (C) 2006&nbsp; Karl Magdsick (original author for Python)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Angel Leon (ported to PHP5)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Lime Wire LLC<br><br>This program is free software; you can redistribute it and/or<br>modify it under the terms of the GNU General Public License<br>as published by the Free Software Foundation; either version 2<br>of the License, or (at your option) any later version.<br><br>This program is distributed in the hope that it will be useful,<br>but WITHOUT ANY WARRANTY; without even the implied warranty of<br>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the<br>GNU General Public License for more details.<br><br>You should have received a copy of the GNU General Public License<br>along with this program; if not, write to the Free Software<br>Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA&nbsp; 02110-1301, USA.<br>*/<br>class SHA1 {<br>&nbsp; static $BASE32_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567';<br><br>&nbsp; /** Given a file it creates a magnetmix */<br>&nbsp; static function fileSHA1($file) {<br>&nbsp; &nbsp; $raw = sha1_file($file,true);<br>&nbsp; &nbsp; return SHA1::base32encode($raw);<br>&nbsp; } //fileSHA1<br><br>&nbsp; /** Takes raw input and converts it to base32 */<br>&nbsp; static function base32encode($input) {<br>&nbsp; &nbsp; $output = '';<br>&nbsp; &nbsp; $position = 0;<br>&nbsp; &nbsp; $storedData = 0;<br>&nbsp; &nbsp; $storedBitCount = 0;<br>&nbsp; &nbsp; $index = 0;<br><br>&nbsp; &nbsp; while ($index &lt; strlen($input)) {<br>&nbsp; &nbsp; &nbsp; $storedData &lt;&lt;= 8;<br>&nbsp; &nbsp; &nbsp; $storedData += ord($input[$index]);<br>&nbsp; &nbsp; &nbsp; $storedBitCount += 8;<br>&nbsp; &nbsp; &nbsp; $index += 1;<br><br>&nbsp; &nbsp; &nbsp; //take as much data as possible out of storedData<br>&nbsp; &nbsp; &nbsp; while ($storedBitCount &gt;= 5) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $storedBitCount -= 5;<br>&nbsp; &nbsp; &nbsp; &nbsp; $output .= SHA1::$BASE32_ALPHABET[$storedData &gt;&gt; $storedBitCount];<br>&nbsp; &nbsp; &nbsp; &nbsp; $storedData &amp;= ((1 &lt;&lt; $storedBitCount) - 1);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } //while<br><br>&nbsp; &nbsp; //deal with leftover data<br>&nbsp; &nbsp; if ($storedBitCount &gt; 0) {<br>&nbsp; &nbsp; &nbsp; $storedData &lt;&lt;= (5-$storedBitCount);<br>&nbsp; &nbsp; &nbsp; $output .= SHA1::$BASE32_ALPHABET[$storedData];<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return $output;<br>&nbsp; } //base32encode<br><br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77635">  
  <a class="name">
  <strong class="user"><em>schiros at invisihosting dot com</em></strong></a><div class="date" title="2007-09-06 07:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77635">
<div class="phpcode"><code><span class="html">
If you've got a script that allows user file upload, and you want to prevent multiple uploads of the same file:<br><br>&nbsp; &nbsp; &lt;?<br>&nbsp; &nbsp; &nbsp; &nbsp; session_start();<br>&nbsp; &nbsp; &nbsp; &nbsp; $isDuplicate = false;<br>&nbsp; &nbsp; &nbsp; &nbsp; if(isset($_FILES["filename"]["tmp_name"]) &amp;&amp; file_exists($_FILES["filename"]["tmp_name"])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $fileHash = sha1_file($_FILES["filename"]["tmp_name"]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!isset($_SESSION["check_filelist"])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $_SESSION["check_filelist"] = array($fileHash);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(in_array($fileHash,$_SESSION["check_filelist"])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $isDuplicate = true;&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $_SESSION["check_filelist"][] = $fileHash;&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($isDuplicate) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "You've already uploaded that file";&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // do some stuff&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; ?&gt;</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.sha1-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:25 GMT -->


</body></html>