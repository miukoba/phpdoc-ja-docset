<html><!-- Mirrored from php.net/manual/en/function.sleep.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:30 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>sleep</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.sleep.html">
 <link rel="shorturl" href="http://php.net/sleep">
 <link rel="alternate" href="http://php.net/sleep" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.misc.html">
 <link rel="prev" href="function.show-source.html">
 <link rel="next" href="function.sys-getloadavg.html">

 <link rel="alternate" href="function.sleep.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.sleep.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.sleep.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.sleep.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.sleep.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.sleep.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.sleep.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.sleep.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.sleep.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.sleep.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.sleep.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.other.html">Other Basic Extensions</a></li>      <li><a href="book.misc.html">Misc.</a></li>      <li><a href="ref.misc.html">Misc. Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.sleep" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sleep</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">sleep</span> â€” <span class="dc-title">Delay execution</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.sleep-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>sleep</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$seconds</code></span>
   )</div>

  <p class="simpara">
   Delays the program execution for the given number of
   <code class="parameter">seconds</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.sleep-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">seconds</code></dt>

     <dd>

      <p class="para">
       Halt time in seconds.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.sleep-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns zero on success, or <strong><code>FALSE</code></strong> on error.
  </p>
  <p class="para">
   If the call was interrupted by a signal, <span class="function"><strong>sleep()</strong></span> returns
   a non-zero value. On Windows, this value will always be
   <em>192</em> (the value of the
   <strong><code>WAIT_IO_COMPLETION</code></strong> constant within the Windows API).
   On other platforms, the return value will be the number of seconds left to
   sleep.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.sleep-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   If the specified number of <code class="parameter">seconds</code> is negative,
   this function will generate a <strong><code>E_WARNING</code></strong>.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.sleep-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.4</td>
       <td>
        Before PHP 5.3.4, on Windows, <span class="function"><strong>sleep()</strong></span> always
        returns <strong><code>NULL</code></strong> when sleep has occurred, regardless of whether the
        sleep was interrupted or not.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.sleep-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-3908">
    <p><strong>Example #1 <span class="function"><strong>sleep()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;current&nbsp;time<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'h:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;sleep&nbsp;for&nbsp;10&nbsp;seconds<br></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;wake&nbsp;up&nbsp;!<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'h:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     This example will output (after 10 seconds)
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>05:31:23
05:31:33
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.sleep-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.usleep.html" class="function" rel="rdfs-seeAlso">usleep()</a> - Delay execution in microseconds</span></li>
    <li class="member"><span class="function"><a href="function.time-nanosleep.html" class="function" rel="rdfs-seeAlso">time_nanosleep()</a> - Delay for a number of seconds and nanoseconds</span></li>
    <li class="member"><span class="function"><a href="function.time-sleep-until.html" class="function" rel="rdfs-seeAlso">time_sleep_until()</a> - Make the script sleep until the specified time</span></li>
    <li class="member"><span class="function"><a href="function.set-time-limit.html" class="function" rel="rdfs-seeAlso">set_time_limit()</a> - Limits the maximum execution time</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="114841">  
  <a class="name">
  <strong class="user"><em>ash b</em></strong></a><div class="date" title="2014-04-13 09:56"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114841">
<div class="phpcode"><code><span class="html">
re: "mitigating the chances of a full bruit force attack by a limit of 30 lookups a minute."<br><br>Not really - the attacker could do 100 requests. Each request might take 2 seconds but it doesn't stop the number of requests done. You need to stop processing more than one request every 2 seconds rather than delay it by 2 seconds on each execution.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54587">  
  <a class="name">
  <strong class="user"><em>linus at flowingcreativity dot net</em></strong></a><div class="date" title="2005-07-08 08:07"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54587">
<div class="phpcode"><code><span class="html">
This may seem obvious, but I thought I would save someone from something that just confused me: you cannot use sleep() to sleep for fractions of a second. This:<br><br><span class="default">&lt;?php sleep</span><span class="keyword">(</span><span class="default">0.25</span><span class="keyword">) </span><span class="default">?&gt;<br></span><br>will not work as expected. The 0.25 is cast to an integer, so this is equivalent to sleep(0). To sleep for a quarter of a second, use:<br><br><span class="default">&lt;?php usleep</span><span class="keyword">(</span><span class="default">250000</span><span class="keyword">) </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105903">  
  <a class="name">
  <strong class="user"><em>barlow at fhtsolutions dot com</em></strong></a><div class="date" title="2011-09-24 06:33"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105903">
<div class="phpcode"><code><span class="html">
You should put sleep into both the pass and fail branches, since an attacker can check whether the response is slow and use that as an indicator - cutting down the delay time. But a delay in both branches eliminates this possibility.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105149">  
  <a class="name">
  <strong class="user"><em>code {@} ashleyhunt [dot] co [dot] uk</em></strong></a><div class="date" title="2011-07-30 06:31"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105149">
<div class="phpcode"><code><span class="html">
A really simple, but effective way of majorly slowing down bruit force attacks on wrong password attempts.<br><br>In my example below, if the end-user gets the password correct, they get to log in at full speed, as expected. For every incorrect password attempt, the users response is delayed by 2 seconds each time; mitigating the chances of a full bruit force attack by a limit of 30 lookups a minute.<br><br>I hope this very simple approach will help make your web applications that little bit more secure.<br><br>Ashley<br><br><span class="default">&lt;?php<br></span><span class="keyword">public function </span><span class="default">handle_login</span><span class="keyword">() {<br>&nbsp; &nbsp; if(</span><span class="default">$uid </span><span class="keyword">= </span><span class="default">user</span><span class="keyword">::</span><span class="default">check_password</span><span class="keyword">(</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'email'</span><span class="keyword">], </span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'password'</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">authenticate_user</span><span class="keyword">(</span><span class="default">$uid</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// delay failed output by 2 seconds<br>&nbsp; &nbsp; &nbsp; &nbsp; // to prevent bruit force attacks<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">login_failed</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114588">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2014-03-10 06:35"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114588">
<div class="phpcode"><code><span class="html">
If you are having issues with sleep() and usleep() not responding as you feel they should, take a look at session_write_close()<br><br>as noted by anonymous on comments;<br>"If the ajax function doesn't do session_write_close(), then your outer page will appear to hang, and opening other pages in new tabs will also stall."</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88801">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-02-08 12:32"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88801">
<div class="phpcode"><code><span class="html">
This will allow you to use negative values or valuer below 1 second.
<br>
<br><span class="default">&lt;?php slaap</span><span class="keyword">(</span><span class="default">0.5</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">slaap</span><span class="keyword">(</span><span class="default">$seconds</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$seconds </span><span class="keyword">= </span><span class="default">abs</span><span class="keyword">(</span><span class="default">$seconds</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$seconds </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">):
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">$seconds</span><span class="keyword">*</span><span class="default">1000000</span><span class="keyword">);
<br>&nbsp; &nbsp; else:
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">$seconds</span><span class="keyword">);
<br>&nbsp; &nbsp; endif;&nbsp; &nbsp; 
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33732">  
  <a class="name">
  <strong class="user"><em>MPHH</em></strong></a><div class="date" title="2003-07-05 12:33"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33732">
<div class="phpcode"><code><span class="html">
Note: The set_time_limit() function and the configuration directive max_execution_time only affect the execution time of the script itself. Any time spent on activity that happens outside the execution of the script such as system calls using system(), the sleep() function, database queries, etc. is not included when determining the maximum time that the script has been running.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113292">  
  <a class="name">
  <strong class="user"><em>LVT</em></strong></a><div class="date" title="2013-09-22 04:13"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113292">
<div class="phpcode"><code><span class="html">
Another reason for not to abuse sleep( ) is that along with the maximum of 30 sql connections, a shared hosting environment usually limits the number of processes to 20, if your website has many users online and you put sleep( ) everywhere in the code, your server will throw a 508 error (resource limit reached) and will stop serving your website.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="8054">  
  <a class="name">
  <strong class="user"><em>hartmut at six dot de</em></strong></a><div class="date" title="2000-08-25 06:38"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom8054">
<div class="phpcode"><code><span class="html">
it is a bad idea to use sleep() for delayed output effects as
<br>
<br>1) you have to flush() output before you sleep
<br>
<br>2) depending on your setup flush() will not work all the way to the browser as the web server might apply buffering of its own or the browser might not render output it thinks not to be complete
<br>
<br>netscape for example will only display complete lines and will not show table parts until the &lt;/table&gt; tag arrived
<br>
<br>so use sleep if you have to wait&nbsp; for events and don't want to burn&nbsp; to much cycles, but don't use it for silly delayed output effects!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99445">  
  <a class="name">
  <strong class="user"><em>soulhunter1987 at post dot ru</em></strong></a><div class="date" title="2010-08-18 12:49"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99445">
<div class="phpcode"><code><span class="html">
Since sleep() can be interrupted by signals i've made a function which can also be interrupted, but will continue sleeping after the signal arrived (and possibly was handled by callback). It's very useful when you write daemons and need sleep() function to work as long as you 'ordered', but have an ability to accept signals during sleeping.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">my_sleep</span><span class="keyword">(</span><span class="default">$seconds</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">$seconds</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; @</span><span class="default">time_sleep_until</span><span class="keyword">(</span><span class="default">$start </span><span class="keyword">+ </span><span class="default">$i</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97809">  
  <a class="name">
  <strong class="user"><em>toddjt78 at msn dot com</em></strong></a><div class="date" title="2010-05-09 07:39"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97809">
<div class="phpcode"><code><span class="html">
Simple function to report the microtime since last called or the microtime since first called.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">stopWatch</span><span class="keyword">(</span><span class="default">$total </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">,</span><span class="default">$reset </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){
<br>&nbsp; &nbsp; global </span><span class="default">$first_called</span><span class="keyword">;
<br>&nbsp; &nbsp; global </span><span class="default">$last_called</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$now_time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$last_called </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_called </span><span class="keyword">= </span><span class="default">$now_time</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$first_called </span><span class="keyword">= </span><span class="default">$now_time</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if (</span><span class="default">$total</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$time_diff </span><span class="keyword">= </span><span class="default">$now_time </span><span class="keyword">- </span><span class="default">$first_called</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$time_diff </span><span class="keyword">= </span><span class="default">$now_time </span><span class="keyword">- </span><span class="default">$last_called</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if (</span><span class="default">$reset</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_called </span><span class="keyword">= </span><span class="default">$now_time</span><span class="keyword">;
<br>&nbsp; &nbsp; return </span><span class="default">$time_diff</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>$reset&nbsp; - if true, resets the last_called value to now
<br>$total - if true, returns the time since first called otherwise returns the time since last called</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81890">  
  <a class="name">
  <strong class="user"><em>marpetr at gmail dot com</em></strong></a><div class="date" title="2008-03-17 11:41"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81890">
<div class="phpcode"><code><span class="html">
Very useful to prevent password brute forcing! Simply add few seconds timeout to login script and the probability to guess the password decreases a lot!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96592">  
  <a class="name">
  <strong class="user"><em>jimmy at powerzone dot dk</em></strong></a><div class="date" title="2010-03-06 08:26"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96592">
<div class="phpcode"><code><span class="html">
Notice that sleep() delays execution for the current session, not just the script. Consider the following sample, where two computers invoke the same script from a browser, which doesn't do anything but sleep.
<br>
<br>PC 1 [started 14:00:00]: script.php?sleep=10 // Will stop after 10 secs
<br>PC 1 [started 14:00:03]: script.php?sleep=0 // Will stop after 7 secs
<br>
<br>PC 2 [started 14:00:05]: script.php?sleep=0 // Will stop immediately
<br>
<br><a rel="nofollow" target="_blank">http://php.net/session_write_close</a> may be used to address this problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113227">  
  <a class="name">
  <strong class="user"><em>LVT</em></strong></a><div class="date" title="2013-09-15 10:12"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113227">
<div class="phpcode"><code><span class="html">
Always close your SQL connection and free the memory before using sleep( ) or you will be needlessly holding a SQL connection for [xx] seconds, remember that a shared hosting environment only allows max 30 SQL connections at the same time.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85353">  
  <a class="name">
  <strong class="user"><em>webseos at gmail dot com</em></strong></a><div class="date" title="2008-08-26 09:29"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85353">
<div class="phpcode"><code><span class="html">
This is a critical thing to use time delay function as sleep() Because a beginner can find that this is not working and he/she will see that all output appearing at a time.<br><br>A good way to implement this is by using the function -&nbsp; ob_implicit_flush() then you don't need to use flush() function explicitly.<br><br>A sample code :<br><span class="default">&lt;?php<br>ob_implicit_flush</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">5</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>{<br></span><span class="default">$dis</span><span class="keyword">=&lt;&lt;&lt;DIS<br></span><span class="string">&lt;div style="width:200px; background-color:lime;border:1px; text-align:center;text-decoration:blink;"&gt;<br></span><span class="default">$i</span><span class="string"><br>&lt;/div&gt;<br></span><span class="keyword">DIS;<br>echo </span><span class="default">$dis</span><span class="keyword">;<br><br></span><span class="default">sleep</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);<br></span><span class="comment">//flush();<br></span><span class="keyword">}</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94533">  
  <a class="name">
  <strong class="user"><em>f dot schima at ccgmbh dot de</em></strong></a><div class="date" title="2009-11-10 06:48"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94533">
<div class="phpcode"><code><span class="html">
Remember that sleep() means "Let PHP time to do some other stuff".<br>That means that sleep() can be interrupted by signals. That is important if you work with pcntl_signal() and friends.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110378">  
  <a class="name">
  <strong class="user"><em>joshmeister at gmail dot com</em></strong></a><div class="date" title="2012-10-16 10:51"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110378">
<div class="phpcode"><code><span class="html">
Here is a simplified way to flush output to browser before completing sleep cycle.&nbsp; Note the buffer must be "filled" with 4096 characters (bytes?) for ob_flush() to work before sleep() occurs.<br><span class="default">&lt;?php <br> ob_implicit_flush</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br> </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br> echo </span><span class="string">"see this immediately.&lt;br&gt;"</span><span class="keyword">;<br> echo </span><span class="default">$buffer</span><span class="keyword">;<br> </span><span class="default">ob_flush</span><span class="keyword">();<br> </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">);<br> echo </span><span class="string">"some time has passed"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95164">  
  <a class="name">
  <strong class="user"><em>mohd at Bahrain dot Bz</em></strong></a><div class="date" title="2009-12-16 01:12"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95164">
<div class="phpcode"><code><span class="html">
I hope this code will help somebody to solve the problem of not being able to flush or output the buffer to the browser (I use IE7).<br>It may work for you with just [ echo str_repeat(".", 4096); ] and without even using ob_... and flush.<br><br><span class="default">&lt;?php<br>ob_start</span><span class="keyword">();<br><br></span><span class="default">ob_implicit_flush</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="comment">//[ OR ] echo "..."; ob_flush(); flush();<br><br></span><span class="default">set_time_limit</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br><br>function </span><span class="default">sleep_echo</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$secs </span><span class="keyword">= (int) </span><span class="default">$secs</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">//echo $buffer."\r\n&lt;br /&gt;\r\n";<br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$secs</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">"H:i:s"</span><span class="keyword">, </span><span class="default">time</span><span class="keyword">()).</span><span class="string">" ("</span><span class="keyword">.(</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">).</span><span class="string">")"</span><span class="keyword">.</span><span class="string">"\r\n&lt;br /&gt;\r\n"</span><span class="keyword">.</span><span class="default">$buffer</span><span class="keyword">.</span><span class="string">"\r\n&lt;br /&gt;\r\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ob_flush</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//usleep(1000000);<br>&nbsp; &nbsp; </span><span class="keyword">}<br>}<br><br></span><span class="default">sleep_echo</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">);<br><br></span><span class="default">ob_end_flush</span><span class="keyword">();<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.sleep.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:30 GMT -->


</body></html>