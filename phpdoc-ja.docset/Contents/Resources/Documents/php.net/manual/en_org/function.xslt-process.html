<html><!-- Mirrored from php.net/manual/en/function.xslt-process.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:57:11 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>xslt_process</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.xslt-process.html">
 <link rel="shorturl" href="http://php.net/xslt-process">
 <link rel="alternate" href="http://php.net/xslt-process" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.xslt.html">
 <link rel="prev" href="function.xslt-getopt.html">
 <link rel="next" href="function.xslt-set-base.html">

 <link rel="alternate" href="function.xslt-process.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.xslt-process.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.xslt-process.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.xslt-process.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.xslt-process.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.xslt-process.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.xslt-process.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.xslt-process.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.xslt-process.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.xslt-process.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.xslt-process.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.xslt.html">XSLT (PHP 4)</a></li>      <li><a href="ref.xslt.html">XSLT (PHP 4) Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.xslt-process" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">xslt_process</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.3)</p><p class="refpurpose"><span class="refname">xslt_process</span> — <span class="dc-title">Perform an <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> transformation</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.xslt-process-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>xslt_process</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$xh</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$xmlcontainer</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$xslcontainer</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$resultcontainer</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$arguments</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$parameters</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   The <span class="function"><strong>xslt_process()</strong></span> function is the crux of the <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym>
   extension.  It allows you to perform an <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> transformation using
   almost any type of input source - the containers.  This is accomplished
   through the use of argument buffers -- a concept taken from the <span class="productname">Sablotron</span>
   <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> processor (currently the only <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> processor this extension supports).
   The input containers default to a filename 'containing' the document to be
   processed. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.xslt-process-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt>
<code class="parameter">
xh</code></dt>
<dd>
<p class="para">The <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> processor
link identifier, created with <span class="function"><a href="function.xslt-create.html" class="function">xslt_create()</a></span>.</p></dd>


    
     <dt>
<code class="parameter">xmlcontainer</code></dt>

     <dd>

      <p class="para">
       Path to <acronym title="eXtensible Markup Language">XML</acronym> file or placeholder for the
       <acronym title="eXtensible Markup Language">XML</acronym> argument.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">xslcontainer</code></dt>

     <dd>

      <p class="para">
       Path to <acronym>XSL</acronym> file or placeholder for the
       <acronym title="eXtensible Markup Language">XML</acronym> argument.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">resultcontainer</code></dt>

     <dd>

      <p class="para">
       The result container defaults to a filename for the transformed
       document. If the result container is not specified - i.e. <strong><code>NULL</code></strong>
       - than the result is returned.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">arguments</code></dt>

     <dd>

      <p class="para">
       Instead of files as the <acronym title="eXtensible Markup Language">XML</acronym> and <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> arguments to the <span class="function"><strong>xslt_process()</strong></span>
       function, you can specify "argument place holders" which are then substituted by values
       given in the <code class="parameter">arguments</code> array.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">parameters</code></dt>

     <dd>

      <p class="para">
       An array for any top-level parameters that will be passed to the XSLT
       document.  These parameters can then be accessed within your XSL files
       using the <em>&lt;xsl:param name="parameter_name"&gt;</em>
       instruction. The parameters must be UTF-8 encoded and their values will be
       interpreted as strings by the <span class="productname">Sablotron</span> processor.
       In other words - you cannot pass <em>node-sets</em> as parameters to
       the <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> document.
      </p>
     </dd>

    
   </dl>

  <p></p>
  <p class="para">
   Containers can also be set via the <code class="parameter">arguments</code>
   array (see below).
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.xslt-process-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure. If the result container is not specified - i.e.
   <strong><code>NULL</code></strong> - than the result is returned.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.xslt-process-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.0.6</td>
       <td>
        This function no longer takes XML strings in
        <code class="parameter">xmlcontainer</code> or 
        <code class="parameter">xslcontainer</code>. Passing a string containing XML
        to either of these parameters will result in a segmentation fault in
        Sablotron versions up to and including version 0.95.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.xslt-process-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   The simplest type of transformation with the
   <span class="function"><strong>xslt_process()</strong></span> function is the transformation of an
   <acronym title="eXtensible Markup Language">XML</acronym> file with an <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> file, placing the result
   in a third file containing the new <acronym title="eXtensible Markup Language">XML</acronym> (or HTML) document.  Doing
   this with <span class="productname">Sablotron</span> is really quite easy...
  </p>
  <div class="example" id="example-5637">
   <p><strong>Example #1 Using the <span class="function"><strong>xslt_process()</strong></span> to transform an <acronym title="eXtensible Markup Language">XML</acronym>
   file and a <acronym>XSL</acronym> file to a new <acronym title="eXtensible Markup Language">XML</acronym> file</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Allocate&nbsp;a&nbsp;new&nbsp;XSLT&nbsp;processor<br></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Process&nbsp;the&nbsp;document<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'result.xml'</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;result.xml"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">",&nbsp;result.xml&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">'result.xml'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;result.xml&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
   While this functionality is great, many times, especially in a web environment, you want to
   be able to print out your results directly.  Therefore, if you omit the third argument to
   the <span class="function"><strong>xslt_process()</strong></span> function (or provide a NULL value for the argument), it
   will automatically return the value of the <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> transformation, instead of writing it to a
   file...
  </p>
  <p class="para">
   </p><div class="example" id="example-5638">
   <p><strong>Example #2 Using the <span class="function"><strong>xslt_process()</strong></span> to transform an <acronym title="eXtensible Markup Language">XML</acronym> file
   and a <acronym>XSL</acronym> file to a variable containing the resulting XML data</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Allocate&nbsp;a&nbsp;new&nbsp;XSLT&nbsp;processor<br></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Process&nbsp;the&nbsp;document,&nbsp;returning&nbsp;the&nbsp;result&nbsp;into&nbsp;the&nbsp;$result&nbsp;variable<br></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xsl'</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;the&nbsp;\$result"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;variable,&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   The above two cases are the two simplest cases there are when it comes to XSLT transformation
   and I'd dare say that they are the most common cases, however, sometimes you get your <acronym title="eXtensible Markup Language">XML</acronym> and
   <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> code from external sources, such as a database or a socket.  In these cases you'll have
   the <acronym title="eXtensible Markup Language">XML</acronym> and/or <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> data in a variable -- and in production applications the overhead of dumping
   these to file may be too much.  This is where <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym>'s "argument" syntax, comes to the
   rescue.  Instead of files as the <acronym title="eXtensible Markup Language">XML</acronym> and <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> arguments to the <span class="function"><strong>xslt_process()</strong></span>
   function, you can specify "argument place holders" which are then substituted by values
   given in the arguments array (5th parameter to the <span class="function"><strong>xslt_process()</strong></span> function).
   The following is an example of processing <acronym title="eXtensible Markup Language">XML</acronym> and <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> into a result variable without the use
   of files at all.
  </p>
  <p class="para">
   </p><div class="example" id="example-5639">
   <p><strong>Example #3 Using the <span class="function"><strong>xslt_process()</strong></span> to transform a variable containing <acronym title="eXtensible Markup Language">XML</acronym> data
   and a variable containing <acronym>XSL</acronym> data into a variable containing the resulting <acronym title="eXtensible Markup Language">XML</acronym> data</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;$xml&nbsp;and&nbsp;$xsl&nbsp;contain&nbsp;the&nbsp;XML&nbsp;and&nbsp;XSL&nbsp;data<br><br></span><span style="color: #0000BB">$arguments&nbsp;</span><span style="color: #007700">=&nbsp;array(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xml'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xsl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xsl<br></span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Allocate&nbsp;a&nbsp;new&nbsp;XSLT&nbsp;processor<br></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Process&nbsp;the&nbsp;document<br></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arguments</span><span style="color: #007700">);<br>if&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;the&nbsp;\$result"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;variable,&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-5640">
    <p><strong>Example #4 Passing PHP variables to XSL files</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;XML&nbsp;string<br></span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;?xml&nbsp;version="1.0"?&gt;<br>&lt;para&gt;<br>&nbsp;change&nbsp;me<br>&lt;/para&gt;'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;XSL&nbsp;string<br></span><span style="color: #0000BB">$xsl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'<br>&lt;xsl:stylesheet&nbsp;version="1.0"&nbsp;xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;<br>&lt;xsl:output&nbsp;method="html"&nbsp;encoding="ISO-8859-1"&nbsp;indent="no"<br>&nbsp;omit-xml-declaration="yes"&nbsp;&nbsp;media-type="text/html"/&gt;<br>&nbsp;&lt;xsl:param&nbsp;name="myvar"/&gt;<br>&nbsp;&lt;xsl:param&nbsp;name="mynode"/&gt;<br>&nbsp;&lt;xsl:template&nbsp;match="/"&gt;<br>My&nbsp;PHP&nbsp;variable&nbsp;:&nbsp;&lt;xsl:value-of&nbsp;select="$myvar"/&gt;&lt;br&nbsp;/&gt;<br>My&nbsp;node&nbsp;set&nbsp;:&nbsp;&lt;xsl:value-of&nbsp;select="$mynode"/&gt;<br>&nbsp;&lt;/xsl:template&gt;<br>&lt;/xsl:stylesheet&gt;'</span><span style="color: #007700">;<br><br><br></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;the&nbsp;second&nbsp;parameter&nbsp;will&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;a&nbsp;string<br></span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(<br>&nbsp;&nbsp;</span><span style="color: #DD0000">'myvar'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,<br>&nbsp;&nbsp;</span><span style="color: #DD0000">'mynode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;foo&gt;bar&lt;/foo&gt;'<br></span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$arguments&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(<br>&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xml'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">,<br>&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xsl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xsl<br></span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arguments</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>My PHP variable : test&lt;br&gt;
My node set : &amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;
</pre></div>
    </div>
   </div>
  <p></p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.xslt-process-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: </p><p class="para">Please note that
<em>file://</em> is needed in front of the path when using Windows.
</p><p></p></blockquote>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="76063">  
  <a class="name">
  <strong class="user"><em>anonymous</em></strong></a><div class="date" title="2007-06-28 08:05"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76063">
<div class="phpcode"><code><span class="html">
It is possible that the xslt_process call can expose information about Apache's installation location if null values are passed to the signature.<br><br>for example:<br><span class="default">&lt;?php<br>$xslt </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br>echo </span><span class="default">$result</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>The error you will recieve is:<br>Warning:&nbsp; Sablotron error on line none: cannot open file 'C:\Program Files\Apache Group\Apache2/' in C:\webroot\htdocs\projects\www\sales\test.php on line 4<br><br>Although trying to read a 'null' XML file and 'null' XSL stylesheet are rather silly, consider an attacker tries to upload an arbitrary file and execute it with similar code.<br><br>the user may then gain enough information to attack your site.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68924">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-08-16 04:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68924">
<div class="phpcode"><code><span class="html">
To let xslt_process() work correctly, you have to set xslt_set_base()<br>Here is my example code (Tested on: Windows 2000/XAMPP 1.4.15/PHP 4.4.0/Sablotron 1.0.2):<br><br><span class="default">&lt;?php<br>$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br></span><span class="default">$filebase </span><span class="keyword">= </span><span class="string">'file://' </span><span class="keyword">. </span><span class="default">getcwd </span><span class="keyword">() . </span><span class="string">'/test/'</span><span class="keyword">;<br></span><span class="default">xslt_set_base</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="default">$filebase</span><span class="keyword">);<br>&nbsp; &nbsp; <br></span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'document.xml'</span><span class="keyword">;<br></span><span class="default">$xsl </span><span class="keyword">= </span><span class="string">'document.xsl'</span><span class="keyword">;<br></span><span class="default">$resultdoc </span><span class="keyword">= </span><span class="string">'result.html'</span><span class="keyword">;<br>&nbsp; &nbsp; <br></span><span class="default">$parameters </span><span class="keyword">= array(</span><span class="string">'mynode' </span><span class="keyword">=&gt; </span><span class="string">'&lt;foo&gt;bar&lt;/foo&gt;'</span><span class="keyword">,</span><span class="string">'sample' </span><span class="keyword">=&gt; </span><span class="string">'A sample value'</span><span class="keyword">);<br><br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$xsl</span><span class="keyword">,</span><span class="default">$resultdoc</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">$parameters</span><span class="keyword">);<br>if (!</span><span class="default">$result</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; die(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"Cannot process XSLT document [%d]: %s"</span><span class="keyword">,</span><span class="default">xslt_errno</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">), </span><span class="default">xslt_error</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">)));<br>}<br>echo </span><span class="string">"Result: "</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br></span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br></span><span class="default">?&gt;</span>&lt;a href="test/<span class="default">&lt;?=$resultdoc?&gt;</span>"&gt;The result document&lt;/a&gt;&lt;?<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63936">  
  <a class="name">
  <strong class="user"><em>ken at guest dot ie</em></strong></a><div class="date" title="2006-04-04 04:46"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63936">
<div class="phpcode"><code><span class="html">
After experiencing an ”xml declaration not at start of external entity” error with XML recieved from a remote server. The server now sends response headers back and these were getting in the way.<br><br>This fixed it:<br><br>$fp = fsockopen($queryhost, 80);<br>if($fp) {<br>&nbsp; &nbsp; fputs($fp, $header);<br>&nbsp; &nbsp; while(!feof($fp)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $xml .= fgets($fp, 128);<br>&nbsp; &nbsp; }<br>}<br>fclose($fp);<br><br>//ensure string starts with the XML declaration.<br>$xml = substr($xml, strpos($xml, “&lt;?xml”) );<br><br>$xsltproc = xslt_create();<br>$result = xslt_process($xsltproc,‘arg:/_xml’, $xsltfile, NULL, array(‘/_xml’ =&gt; $xml));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54605">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-07-08 03:35"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54605">
<div class="phpcode"><code><span class="html">
just to let you know an an apostrophe �&nbsp; can generate a&nbsp; "not well-formed (invalid token)" error message. I spent a couple of hours to find it, until i found another user with similar problem:<br><a rel="nofollow" target="_blank">http://www.feedforall.com/forum/viewtopic.php?t=116&amp;view=next</a><br>lets hope that hosting providers will soon adopt php5</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51447">  
  <a class="name">
  <strong class="user"><em>csarven at gmail dot com</em></strong></a><div class="date" title="2005-03-30 07:17"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51447">
<div class="phpcode"><code><span class="html">
I found using the output buffer to be efficient, when dealing with php scripts, with xml data.<br><br>&lt;?<br>$xh = xslt_create();<br><br>ob_start();<br>include('main.php');&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //main.php contains php and xml <br>$xml_file = ob_get_contents();<br>ob_end_clean();<br><br>$arguments = array('/_xml' =&gt; $xml_file);<br><br>$result = xslt_process($xh, 'arg:/_xml', 'index.xsl', NULL, $arguments);<br><br>if (!$result) echo 'XSLT processing error: ' .xslt_error($xh) ;<br>else echo $result;<br><br>xslt_free($xh);<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44494">  
  <a class="name">
  <strong class="user"><em>ppekaar at hotmail dot com</em></strong></a><div class="date" title="2004-08-07 05:19"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44494">
<div class="phpcode"><code><span class="html">
In response to "twa at carlbro dot dk" above I have finally solved how to combine two XML sources and one XSL stylesheet.&nbsp; The above comment was nearly right,<br><br>for the php<br><br><span class="default">&lt;?php<br><br>xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br></span><span class="default">xslt_set_base</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="string">"file://c:\inetpub\wwwroot\yourwebsite\");<br><br></span><span class="default">$arguments</span><span class="string"> = array('/_xml' =&gt; </span><span class="default">$xmlSingle</span><span class="string">, '/_xsl'=&gt;</span><span class="default">$xsl</span><span class="string">, '/xml2'=&gt;</span><span class="default">$xml_rates</span><span class="string">);<br></span><span class="default">$xslResult</span><span class="string"> = xslt_process(</span><span class="default">$xh</span><span class="string">, 'arg:/_xml', 'single_availability_filter.xsl', NULL, </span><span class="default">$arguments</span><span class="string">,</span><span class="default">$parameters</span><span class="string">);<br><br>?&gt;<br><br>Please note that I have put in a blank variable "</span><span class="keyword">/</span><span class="default">_xsl </span><span class="keyword">=&gt; </span><span class="default">$xsl</span><span class="string">", the actuall XSL file is listed directly in the xslt_process fucntion.<br><br>Note that we have a third XML data source which is called xml2 and is set a value </span><span class="default">$xml_rates</span><span class="string">.&nbsp; In your XSL stylesheet you can now call this XML data via the following line<br><br>&lt;xsl:variable name="</span><span class="default">filter_rates</span><span class="string">" select="</span><span class="default">document</span><span class="keyword">(</span><span class="string">'arg:/xml2'</span><span class="keyword">)/</span><span class="default">RackRates</span><span class="string">"/&gt;<br><br>the missing link was putting in the the arg:/<br><br>Also please note that I am using xslt_set_base which set the base filepath for all your XSL documents. <br><br>Hope this helps.&nbsp; <br>Phelim</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42465">  
  <a class="name">
  <strong class="user"><em>Justin Ramos</em></strong></a><div class="date" title="2004-05-17 06:24"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42465">
<div class="phpcode"><code><span class="html">
The xslt_ functions no longer work in PHP/5.0; the XSLT extension has been removed. To apply an XSL transformation to an XML document, you must use DomDocument (from DOM) and XsltProcessor (from XSL):<br><br>&lt;?<br>$xml = new DomDocument();<br>$xml-&gt;load('foo.xml');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>$xsl = new DomDocument;<br>$xsl-&gt;load('foo.xsl');<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>$proc = new xsltprocessor();<br>$proc-&gt;importStyleSheet($xsl);<br>echo($proc-&gt;transformToXML($xml));<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39701">  
  <a class="name">
  <strong class="user"><em>ajenks at paradise dot net dot nz</em></strong></a><div class="date" title="2004-02-07 10:00"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39701">
<div class="phpcode"><code><span class="html">
By combining some of the user added notes and some experimentation, here's how I finally got the query string broken down and passed in as top-level parameters:<br><br>With a little more effort, this could be turned into a completely generic transform script - i.e. by adding query parms for the xml and xsl files also and excluding them from the $params array (though this lat bit may not be necessary).<br><br>Thanks to all those other users whose tips make up most of this solution!<br><br><span class="default">&lt;?php<br><br></span><span class="comment">// Process query string to $params array<br><br></span><span class="default">$vars </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]);<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br> </span><span class="default">$var </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br> </span><span class="default">$params</span><span class="keyword">[</span><span class="default">$var</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$var</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>}<br><br></span><span class="comment">// Fire up the engine<br><br></span><span class="default">$xslt </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'test.xml'</span><span class="keyword">;<br></span><span class="default">$xsl </span><span class="keyword">= </span><span class="string">'test.xsl'</span><span class="keyword">;<br><br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xsl</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, array(), </span><span class="default">$params</span><span class="keyword">);<br>if (</span><span class="default">$result</span><span class="keyword">) {<br>&nbsp;&nbsp; echo </span><span class="default">$result</span><span class="keyword">;<br>}<br>else {<br>&nbsp;&nbsp; print </span><span class="string">"Error:" </span><span class="keyword">. </span><span class="default">xslt_errno</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">);<br>}<br><br></span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39285">  
  <a class="name">
  <strong class="user"><em>greg _at_ rhythmicdesign _dot_ com</em></strong></a><div class="date" title="2004-01-22 08:45"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39285">
<div class="phpcode"><code><span class="html">
Figuring out the syntax to get parameters in was difficult but this works for me:<br><br>// Allows user to pass argument from URL as script.php?foo=VALUE<br><br>$xml = file_get_contents ('n.xml') ;<br>$xsl = file_get_contents ('n.xsl') ;<br><br> // Perform the transformation <br>$args = array (<br>&nbsp; &nbsp; &nbsp; &nbsp; '/_xml'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $xml, <br>&nbsp; &nbsp; &nbsp; &nbsp; '/_xsl'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $xsl<br>);<br>$params = array (<br>&nbsp; &nbsp; &nbsp; &nbsp; 'foo'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $foo<br>) ;<br><br> $html = xslt_process($xsltproc, 'arg:/_xml', 'arg:/_xsl', NULL, $args, $params); <br><br>then in the XSL FILE:<br>--------------------------<br>&lt;xsl:param name="foo"/&gt;<br><br>&lt;xsl:template match="/"&gt;<br>&nbsp; &nbsp; &lt;root&gt;<br>&nbsp; &nbsp; &lt;test&gt;&lt;xsl:value-of select="$foo"/&gt;&lt;/test&gt;<br>&nbsp; &nbsp; &lt;xsl:apply-templates/&gt;&lt;/root&gt;<br><br>&lt;/xsl:template&gt;<br><br>Note: the param definition and the '$' dollar sign</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32897">  
  <a class="name">
  <strong class="user"><em>ohlesbeauxjours at yahoo dot fr</em></strong></a><div class="date" title="2003-06-10 05:57"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32897">
<div class="phpcode"><code><span class="html">
Thanks, Martin !<br><br>As a matter of fact, your way of doing is probably more logical than mine :)<br>The point is that scheme handler strangely adds a slash to your URI , if it doesn't start by any slash.<br><br>So if you call : document('http:www.url.com',page/@url)<br>...then $rest gets /www.url.com<br><br>But if you call : document('<a rel="nofollow" target="_blank">http://www.url.com</a>',page/@url)<br>...then $rest gets //www.url.com<br><br>Another approach could consist in enclosing the scheme "http" in the XML attribute : &lt;page url="<a rel="nofollow" target="_blank">http://www.w3.org/TR/REC-xml</a>"&gt;<br>and simply doing a : $file = fopen("http:".$rest,"r");<br><br>It all depends on the context...<br><br>See also :<br><a rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sablot2003/msg00598.html</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="32435">  
  <a class="name">
  <strong class="user"><em>martin_a_thomas at yahoo dot com</em></strong></a><div class="date" title="2003-05-27 04:06"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32435">
<div class="phpcode"><code><span class="html">
I had a little trouble making the http scheme handler work until I removed the line with the strip function and then changed the fopen <br>from '<a rel="nofollow" target="_blank">http://</a>' to 'http:' - <br><br>$file = fopen("http:".$rest,"r");<br><br>Regards // Martin</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30921">  
  <a class="name">
  <strong class="user"><em>ohlesbeauxjours at yahoo dot fr</em></strong></a><div class="date" title="2003-04-03 06:14"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30921">
<div class="phpcode"><code><span class="html">
The XSLT document() function can only open local files.<br>But thanks to the Sablotron handlers, you can easely write an http-handler (or even ftp- !!).<br><br>This sample opens a particular XHTML page on the W3C, and will parse it to get the TITLE tag content.<br>The interesting point, here, is that the url to open (www.w3.org/TR/REC-xml) is defined... inside an XML&nbsp; document :)<br><br>// XML content :<br>$xml='&lt;?xml version="1.0"?&gt;<br>&nbsp; &nbsp; &lt;page url="www.w3.org/TR/REC-xml"&gt;W3C Recommendation page&lt;/page&gt;';<br><br>// XSL content :<br>$xsl='&lt;?xml version="1.0"?&gt;<br>&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br>&lt;xsl:output method="html" encoding="ISO-8859-1" indent="no" omit-xml-declaration="yes" standalone="yes" media-type="text/html"/&gt;<br>&lt;xsl:template match="/"&gt;<br>&nbsp; &nbsp; The title is : &lt;xsl:value-of select="document(concat(\'http:\',page/@url))/html/head/title"/&gt;<br>&lt;/xsl:template&gt;<br>&lt;/xsl:stylesheet&gt;';<br><br>// TRANSFORMATION :<br>function handGetAll($processor,$scheme,$rest) {<br> $rest=substr($rest,1);<br> switch($scheme) {<br>&nbsp; &nbsp; &nbsp; &nbsp; case 'http':<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $file = fopen("<a rel="nofollow" target="_blank">http://</a>".$rest,"r");<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(!feof($file))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c .= fgets($file, 1024);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fclose($file);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $c;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; }<br>}<br><br>$xh = xslt_create();<br>xslt_set_scheme_handlers($xh,array("get_all" =&gt; "handGetAll"));<br>echo xslt_process($xh,'arg:/_xml', 'arg:/_xsl',NULL,array("/_xml"=&gt;$xml,"/_xsl"=&gt;$xsl)); <br>xslt_free($xh);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28484">  
  <a class="name">
  <strong class="user"><em>twa at carlbro dot dk</em></strong></a><div class="date" title="2003-01-14 10:12"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28484">
<div class="phpcode"><code><span class="html">
Hi... I'm back with the result :)<br><br>After a good discussion on the official Sablotron / PHP mailing list I found out how to fix the problem I had with PHP 4.3.0. So now I will just summarize it here. The full discussion can be found online on this address:<br><a rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sab-php/msg00252.html</a><br><br>The problem is actually an error in my code (huh? I thought I wrote error-free code). In my XSLT file I use the document() method provided by Sablotron. In my previous example I use this syntax:<br>&nbsp; document('foobar')<br>The real syntax is actually:<br>&nbsp; document('arg:/foobar')<br>The reason why this worked in previous versions of PHP was due to an error in the Sablotron lib (anyway so I think).<br><br>Another thing that I would like to share is the syntax of the 2nd, 3rd and 5th argument in the xslt_process() method. In the official examples on this page the names "_xml" and "_xsl" is used. But according to the Sablotron people any name can be used. And if you are wondering if you need the preceding "/" or not - then Lenar L�hmus from the sab-php mailing list told me it would be wise to use it. Normally it works either way, but it is always the best thing to use the slash. For the full discussion on this subject see the other thread at:<br><a rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sab-php/msg00260.html</a><br><br>/watson</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28444">  
  <a class="name">
  <strong class="user"><em>twa at carlbro dot dk</em></strong></a><div class="date" title="2003-01-13 01:13"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28444">
<div class="phpcode"><code><span class="html">
It seems to be undocumented how to get the XSL parser to use two XML files at the same time to produce the output. It is possible though. Here is how it's done with the XML data in a variable:<br><br>First you need to change the 5th argument.<br>$xh = xslt_create();<br>$args = array('/_xml'=&gt;$xml1, '/_xsl'=&gt;$xsl, 'xml2'=&gt;$xml2);<br>$result = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $args);<br><br>Inside the XSLT document you then need to do this:<br>&lt;xsl:template match="/"&gt;<br>&nbsp; &lt;root&gt;<br>&nbsp; &nbsp; &lt;foo&gt;<br>&nbsp; &nbsp; &nbsp; &lt;xsl:value-of select="/foo" /&gt;<br>&nbsp; &nbsp; &lt;/foo&gt;<br>&nbsp; &nbsp; &lt;bar&gt;<br>&nbsp; &nbsp; &nbsp; &lt;xsl:value-of select="document('xml2')/bar" /&gt;<br>&nbsp; &nbsp; &lt;/bar&gt;<br>&nbsp; &lt;/root&gt;<br>&lt;/xsl:template&gt;<br><br>This creates a XML result containing a root node called "root" containing two nodes. One called "foo" with the content of the root node in $xml1 and one called "bar" with the content of the root node in $xml2.<br><br>In the $args array I don't know if it is best to write "'xml2'=&gt;$xml2" or "'/xml2'=&gt;$xml2". Both work. I think it has something to do with the level of the argument (/level1/level2/level3). Maybe this site reveals the true syntax:<br><a rel="nofollow" target="_blank">http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029</a><br><br>I don't know if there is another - more elegant way - to do this. But I can't find any documentation on it.<br><br>For the moment I can't get this to work in PHP 4.3.0/Windows because there seems to be a problem with the Sablotron that is shipped with this version (I have not tried the UNIX version though). I think a new version of the sablot.dll will fix this problem. But for the moment I can't seem to get PHP to work with this new version. If anyone knows how to do this then please send me a mail. I'll post anything that I find out.<br><br>/watson</span>
</code></div>
  </div>
 </div>
  <div class="note" id="28183">  
  <a class="name">
  <strong class="user"><em>geiryork at start dot no</em></strong></a><div class="date" title="2003-01-04 07:43"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom28183">
<div class="phpcode"><code><span class="html">
An important detail if you want to use the last argument to include parameters to the template:<br><span class="default">&lt;?PHP<br>xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="string">'foo.xml'</span><span class="keyword">, </span><span class="string">'foo.xslt'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, array(), array(</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'FOO'</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>In the xsl file:<br>&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br><br>&lt;xsl:param name="foo"/&gt;<br>&lt;xsl:template match="/"&gt;<br>&lt;xsl:value-of select="foo"/&gt;<br>.........<br><br>Note the &lt;xsl:param name="foo"/&gt; is specified *outside* the template tag, but can be referenced inside it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="26746">  
  <a class="name">
  <strong class="user"><em>sanj at wiredesign dot com</em></strong></a><div class="date" title="2002-11-11 11:34"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom26746">
<div class="phpcode"><code><span class="html">
Okay, now this is a neat function once you play around with it<br>bit...we're basically using it in two ways...one to preview data <br>from a mysql database, and the other to actually publish the <br>output to a .htm file. The following example shows us grabbing <br>data from the database and then using the xslt_process() function<br> to combine this data file a .xsl file residing on the server...<br><br><span class="default">&lt;?php<br></span><span class="keyword">include(</span><span class="string">"../../includes/connect_to_db.inc"</span><span class="keyword">); <br><br></span><span class="default">$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from mytbl where mytbl_id=1"</span><span class="keyword">);<br><br></span><span class="default">$mydata </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br><br></span><span class="default">$xmlString&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0"?&gt;&lt;data&gt;'</span><span class="keyword">;<br></span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">'&lt;mytbl_id&gt;'</span><span class="keyword">.</span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_id"</span><span class="keyword">].</span><span class="string">'&lt;/mytbl_id&gt;'</span><span class="keyword">;<br></span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;mytbl_title&gt;"</span><span class="keyword">.</span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_title"</span><span class="keyword">].</span><span class="string">"&lt;/mytbl_title&gt;"</span><span class="keyword">;<br></span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;mytbl_filename&gt;"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_filename"</span><span class="keyword">].</span><span class="string">"&lt;/mytbl_filename&gt;"</span><span class="keyword">;<br></span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;/data&gt;"</span><span class="keyword">;<br><br></span><span class="comment">//create instance of xslt parser<br></span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br><br></span><span class="comment">//store xmlString in an array using a key '/_xml'<br></span><span class="default">$arguments </span><span class="keyword">= array(</span><span class="string">'/_xml' </span><span class="keyword">=&gt; </span><span class="default">$xmlString</span><span class="keyword">);<br><br></span><span class="comment">//to write data to a file<br></span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'style.xsl'</span><span class="keyword">, </span><span class="string">'result.htm'</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">);<br><br></span><span class="comment">//to view in brower<br></span><span class="keyword">echo(</span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'style.xsl'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">));<br><br></span><span class="default">?&gt;<br></span><br>The above function works well, although you can't seem to view<br> the resulting htm document in the browser and write to a file at<br> the same time...instead you have to call the function twice, once<br> to write data to a file and once to display data in a browser.<br><br>-----------------------<br>here's a simple style.xsl file that works with this example...<br><br>&lt;?xml version="1.0"?&gt;<br>&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br>&lt;xsl:template match="/"&gt;<br>&nbsp; &nbsp; &lt;html&gt;<br>&nbsp; &nbsp; &lt;head&gt;<br>&nbsp; &nbsp; &lt;/head&gt;<br>&nbsp; &nbsp; &lt;body&gt;<br>&nbsp; &nbsp; &lt;h1&gt;Here's my data!&lt;/h1&gt;<br>&nbsp; &nbsp; &lt;xsl:value-of select="data/mytbl_title" /&gt;&lt;br /&gt;<br>&nbsp; &nbsp; &lt;xsl:value-of select="data/mytbl_filename" /&gt;&lt;br /&gt;<br>&nbsp; &nbsp; &lt;/body&gt;<br>&nbsp; &nbsp; &lt;/html&gt;<br>&lt;/xsl:template&gt;<br>&lt;/xsl:stylesheet&gt;<br><br>enjoy!<br><br>Sanj Maghera</span>
</code></div>
  </div>
 </div>
  <div class="note" id="26733">  
  <a class="name">
  <strong class="user"><em>tom at hubalek dot net</em></strong></a><div class="date" title="2002-11-11 03:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom26733">
<div class="phpcode"><code><span class="html">
Hi,<br><br>keep in mind that fifth parameter of function xsl_process() is __arguments__ and sixth is __xsl parameters__. I spent a lot of time learning difference between arguments and parameters ;-)<br><br>Tom</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25621">  
  <a class="name">
  <strong class="user"><em>jordigasulla at yahoo dot com</em></strong></a><div class="date" title="2002-09-30 02:28"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25621">
<div class="phpcode"><code><span class="html">
The output of the XSLT process doesn't have to be necessarily HTML. If you receive a lot of data in the XML and want to distribute it along all your page, you can convert all your page to XHTML or force the output to be PHP code and then eval()uated. For instance, your XSL document (part of it) could look like:<br><br>&lt;xsl:text disable-output-escaping="yes"&gt;$networth=&lt;/xsl:text&gt;&lt;xsl:value-of select="networth" /&gt;&lt;xsl:text disable-output-escaping="yes"&gt;;&lt;/xsl:text&gt;<br><br>and your PHP code could look like:<br><br>$result = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $arguments);<br>if ($result) {<br>&nbsp; eval(addslashes($result));<br><br>that way, you can use the variable $networth in wherever you want inside your PHP file, like:<br><br>&lt;? print $networth; ?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="23941">  
  <a class="name">
  <strong class="user"><em>dragan at iskrassoderwas dot de</em></strong></a><div class="date" title="2002-08-01 05:09"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom23941">
<div class="phpcode"><code><span class="html">
Your input into xslt-process can of course be of external-php-script-nature. This way, you can use PHP scripts that output XML code to make up the transformation:<br><br>// Transforming "Dynamic XML" through static XSL<br><span class="default">&lt;?php<br></span><span class="comment">// Gonna contain PHP-XML output<br></span><span class="default">$arguments </span><span class="keyword">= array(<br>&nbsp; &nbsp;&nbsp; </span><span class="string">'/_xml' </span><span class="keyword">=&gt; </span><span class="default">$xml</span><span class="keyword">,<br>);<br><br></span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br><br></span><span class="comment">// Read plain PHP-XML output<br></span><span class="default">$xmlData </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://somehost/xmloutputtingscript.php</a>"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br><br></span><span class="comment">// Stack up output into one String<br></span><span class="keyword">while (</span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets </span><span class="keyword">(</span><span class="default">$xmlData</span><span class="keyword">))<br>&nbsp; </span><span class="default">$xml </span><span class="keyword">.= </span><span class="default">$line</span><span class="keyword">;<br><br></span><span class="comment">// Process the document<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'mystylesheet.xsl'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">); <br><br></span><span class="comment">// Print out your transformed document<br></span><span class="keyword">echo </span><span class="default">$result</span><span class="keyword">;<br><br></span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="23013">  
  <a class="name">
  <strong class="user"><em>j dot metzger at steptown dot com</em></strong></a><div class="date" title="2002-07-06 02:12"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom23013">
<div class="phpcode"><code><span class="html">
This in example on using variables from php in xsl-stylesheets (Sablotron 0.95)<br><br>with:<br><br>&lt;xsl:param name="foo" /&gt;<br><br>and how to pass the param from php to Sablotron<br>(I'm using Sablotron 0.95) <br><br>The php-wrapper to Sablotron has changed somewhat in 4.0.6, so I'm using the new (experimental) syntax.<br><br>Maybe this could change again in the future<br><br>I use 4.2.1 which is compiled with:<br>'./configure' '--with-mysql' '--with-apxs' '--enable-xslt' '--with-xslt-sablot=/usr/local/lib' '--with-expat-dir=/usr' '--with-dom' '--with-zlib-dir=/usr'<br><br>When you want to use a param passed to the xslt_process you have to put it in the top level of the xslt-script, otherwice it won't work (means: before defining any template)<br>Afterwards you can use the passed param with <br><br>&lt;xsl:value-of select="$yourparamname" /&gt;<br><br>in the template.<br><br>example:<br><br>====&gt; xsl-stylesheet &lt;====<br><br>&lt;?xml version="1.0"?&gt;<br><br>&lt;xsl:stylesheet version="1.0"<br>xmlns:xsl="<a rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br><br>&lt;xsl:output method="html" version="1.0" encoding="UTF-8" indent="no" omit-xml-declaration="yes" doctype-public="-//W3C/DTD XHTML 1.0 Transitional//EN" doctype-system="<br><a rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>" standalone="yes" media-type="text/html" /&gt;<br><br>&lt;xsl:param name="tpsession" /&gt;<br><br>&lt;xsl:template match="/root/output"&gt;<br>&nbsp;&nbsp; this is the template stuff. and this is the param <br><br>&lt;xsl:value-of select="$tpsession" /&gt;<br><br>&lt;/xsl:template&gt;<br><br>&lt;/xsl:stylesheet&gt;<br><br>====&gt; end of xsl - stylesheet &lt;====<br><br>o.k. -&gt; to call the xslt_parser (Sablotron 0.95 in my case) with params do this:<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/* php script */<br><br></span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br></span><span class="default">$arg </span><span class="keyword">= array(&nbsp; &nbsp; </span><span class="string">'/_xml'&nbsp;&nbsp; </span><span class="keyword">=&gt;</span><span class="default">$t_xmlString</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/_xsl'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$t_xslString </span><span class="keyword">);<br></span><span class="default">$param </span><span class="keyword">= array(</span><span class="string">'tpsession' </span><span class="keyword">= </span><span class="default">session_name</span><span class="keyword">().</span><span class="string">"="</span><span class="keyword">.</span><span class="default">session_id</span><span class="keyword">());<br>&nbsp; &nbsp; &nbsp;&nbsp; <br></span><span class="default">$result </span><span class="keyword">= @</span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'arg:/_xsl'</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">$arg</span><span class="keyword">,</span><span class="default">$param</span><span class="keyword">);<br>if(!</span><span class="default">$result</span><span class="keyword">){<br>print </span><span class="default">xslt_error</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br>}<br>else<br>print </span><span class="default">$result</span><span class="keyword">;<br></span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br><br></span><span class="comment">/* end of php-script */<br><br></span><span class="default">?&gt;<br></span><br>That's it -&gt; have fun</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22196">  
  <a class="name">
  <strong class="user"><em>tkearns at fastmail dot fm</em></strong></a><div class="date" title="2002-06-10 09:18"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22196">
<div class="phpcode"><code><span class="html">
For those of you wondering what the hell is up with the very strange format for refering to in-memory data, see<br><a rel="nofollow" target="_blank">http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029</a><br><br>normally you pass a file name (or URI) using the 'file:' syntax. The 'arg:' syntax introduced by sablotron does not refer to a file system path, it refers to an ARGument - and of course, arguments are in-memory. In the case of PHP, the argument reference is an index to the array in parameter 5 of the xslt_process() function. I think the forward slash is just to maintain the convention of path notation.<br><br>Someone with more knowledge on the topic could probably provide a more concise definition. If so, it would be nice to have it included as part of the standard documentation set.<br><br>Some wrapper functions would make things easier still.<br><br>Here's a wrapper I wrote.<br><br>function XtDataWithFile($xmlData, $uriXSLT) {<br>&nbsp; &nbsp; $args = array ( '/_xml' =&gt; $xmlData );<br>&nbsp; &nbsp; $xp = xslt_create();<br>&nbsp; &nbsp; $out = xslt_process($xp, 'arg:/_xml', $uriXSLT, NULL, $args);<br>&nbsp; &nbsp; xslt_free($xp);<br>&nbsp; &nbsp; return $out;<br>}<br><br>of course you could do XtFileWithData() can XtDataWithData()</span>
</code></div>
  </div>
 </div>
  <div class="note" id="22010">  
  <a class="name">
  <strong class="user"><em>msopacua at idg dot nl</em></strong></a><div class="date" title="2002-06-03 04:00"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom22010">
<div class="phpcode"><code><span class="html">
Took me a while to figure this one out, but no matter what your stylesheet encoding and xml encoding says - argument values, need to be UTF-8.<br><br>Version 4.2.1 and sablot 0.90.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21181">  
  <a class="name">
  <strong class="user"><em>tim at zero-interactive dot com</em></strong></a><div class="date" title="2002-05-02 01:11"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21181">
<div class="phpcode"><code><span class="html">
[Editors note: this is basic URI syntax. Any URI, is specified as: &lt;protocol&gt;:location. Any resource, that can point to a network, needs '//' to indicate it's "network awareness". F.E.: <a rel="nofollow" target="_blank">ftp://,</a> <a rel="nofollow" target="_blank">http://</a> and yes - file://.]
<br>
<br>For those of you wanting to know how to fix the annoying bug telling you that an econding type of '' is unacceptable ....
<br>
<br>Win2K, PHP 4.2.0
<br>
<br>When processing files, you need to prefix each filename with "file://" or else you will get the above mentioned error.&nbsp; Then you just need to set the encoding in your xslt file to get it to work.
<br>
<br>You must use this prefix with your xml, xsl and output files if you are using all three like I am.
<br>
<br>Happy hunting!!!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20846">  
  <a class="name">
  <strong class="user"><em>patrice dot lazareff at lbb dot fr dot invalid</em></strong></a><div class="date" title="2002-04-18 06:04"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20846">
<div class="phpcode"><code><span class="html">
This function's syntax has changed since PHP 4.0.x, here is a quick workaround for those who use a same script with various versions.<br>Note that in order to work with PHP 4.0.x, the commented part must not be directly within the code (or a parse error will occur).<br>This is why I commented it out here and call this bit of code via an include.<br><br>// PHP 4.0.6/4.1.x difference<br>$minor = explode(".",phpversion());<br>if($minor[1] &gt;= 1) // PHP 4.1.x -- preferred<br>{<br>&nbsp; &nbsp; include("php412_XSLT.php");<br><br>/* here is the included code<br>$arguments = array(<br>'/_xml' =&gt; $final_xml,<br>'/_xsl' =&gt; $xsl_content<br>);<br><br>$html_out = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $arguments);<br><br>end of included code */<br><br>} else // PHP 4.0.6 -- works okay<br>&nbsp; &nbsp; xslt_process($xsl_content, $final_xml,$html_out);<br><br>echo $html_out;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19890">  
  <a class="name">
  <strong class="user"><em>theseer at php dot net</em></strong></a><div class="date" title="2002-03-14 07:22"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19890">
<div class="phpcode"><code><span class="html">
Note that this extension changed quite heavily in the latest releases. The documentation and howtos on the web may not match your version of php !<br><br>To verify your extension, check the configure information<br><br> ( <span class="default">&lt;?php phpinfo</span><span class="keyword">(); </span><span class="default">?&gt;</span> )<br><br> for either<br><br>&nbsp; &nbsp; &nbsp; --with-sablot&nbsp; ( old ) <br> or<br>&nbsp; &nbsp; --enable-xslt --with-xslt-sablot (new).<br><br>Most ( all?) web documents i found describe the use of the old extension, which also changed in the process of development. <br><br>This extension is marked experimental for a reason ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="19191">  
  <a class="name">
  <strong class="user"><em>lennart at rsd-online dot dk</em></strong></a><div class="date" title="2002-02-19 08:14"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19191">
<div class="phpcode"><code><span class="html">
Relative paths using xsl:include<br><br>i addition to francis's note above you can set the base path with the xslt_set_base function like this on windows like this.<br><br>xslt_set_base('file://c:/path to xslt files/')<br><br>from you xsl file use the<br>&lt;xsl:include href="file.xls"&gt;<br><br>If you wish to have full access to all files in you site only specify the root path and then use<br>&lt;xsl:include href="somepath/file.xls"&gt;<br><br>God speed.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18990">  
  <a class="name">
  <strong class="user"><em>francisf at videotron dot ca</em></strong></a><div class="date" title="2002-02-12 04:00"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18990">
<div class="phpcode"><code><span class="html">
Just because that I have look around and see other look around without any solution, so for prosperity, I give somethings that surely a lot of people know but a lot don't too.<br><br>OK, if you want to do xsl:include in your xsl file that will be parsed by your php page with xslt and sablot installed,<br><br>you have to put that in your xsl page (on a linux machine): <br>&lt;xsl:include&nbsp; href="file:///pathtomyxslfile/xy.xsl"&gt;<br><br>yes you do have 3 "///", the 2 first are used by sablotron and the third one is used for your path as: /pathtomyxslfile/xy.xsl<br><br>It was in the sablotron doc, well part of it.<br><br>Tested on:<br>php 4.1.0 <br>Apache/1.3.22 <br>sablot 0.80 <br><br>Thanks you and take care.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18594">  
  <a class="name">
  <strong class="user"><em>chris_coupal at hotmail dot com</em></strong></a><div class="date" title="2002-01-28 06:06"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18594">
<div class="phpcode"><code><span class="html">
If you are getting the data from a database and creating the XML data stream for transformation, you can add the parameters for the stylesheet into the XML data. Once in the data, you can reference them from the XSL stylesheet directly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="18292">  
  <a class="name">
  <strong class="user"><em>ascii_NO_SPAM_ at _NO_SPAM_microcore dot dk</em></strong></a><div class="date" title="2002-01-17 09:42"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom18292">
<div class="phpcode"><code><span class="html">
I noticed a slight difference in html output when upgrading to php4.1.1 on Windows.<br><br>I found the garbled output to be caused by [indent="yes"] in &lt;xsl:output /&gt; and simply changed it to [indent="no"].</span>
</code></div>
  </div>
 </div>
  <div class="note" id="17995">  
  <a class="name">
  <strong class="user"><em>Bill Humphries &lt;whump at mac dot com&gt;</em></strong></a><div class="date" title="2002-01-06 04:48"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom17995">
<div class="phpcode"><code><span class="html">
It appears that the xslt_process function does not like to have NULLs passed into it for the Argument and Parameter arrays. However, you can pass it an empty Argument array (modulo any typos):<br><br>$xh = xslt_create();<br>$args = array();<br>$params = array( 'foo' =&gt; 'bar' );<br>$result = xslt_process($xh,<br>'source.xml','source.xsl',NULL,<br>$args,$params);<br>if ($result)<br>{<br> print $result;<br>} else {<br> print "Error: ".xslt_error($xh);<br>}<br><br>That way you don't have to worry about providing methods for reading files into the argument array.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.xslt-process.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:57:12 GMT -->


</body></html>