<html><!-- Mirrored from php.net/manual/en/function.header.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:21 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>header</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.header.html">
 <link rel="shorturl" href="http://php.net/header">
 <link rel="alternate" href="http://php.net/header" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.network.html">
 <link rel="prev" href="function.header-remove.html">
 <link rel="next" href="function.headers-list.html">

 <link rel="alternate" href="function.header.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.header.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.header.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.header.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.header.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.header.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.header.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.header.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.header.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.header.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.header.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.network.html">Network</a></li>      <li><a href="ref.network.html">Network Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.header" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">header</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">header</span> — <span class="dc-title">Send a raw HTTP header</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.header-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>header</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$replace</code><span class="initializer"> = true</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$http_response_code</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>header()</strong></span> is used to send a raw <acronym title="Hypertext Transfer Protocol">HTTP</acronym>
   header. See the <a href="http://www.faqs.org/rfcs/rfc2616" class="link external">»&nbsp;HTTP/1.1 specification</a>
   for more information on <acronym title="Hypertext Transfer Protocol">HTTP</acronym> headers.
  </p>
  <p class="para">
   Remember that <span class="function"><strong>header()</strong></span> must be called before any
   actual output is sent, either by normal HTML tags, blank lines in a
   file, or from PHP. It is a very common error to read code with
   <span class="function"><a href="function.include.html" class="function">include</a></span>, or <span class="function"><a href="function.require.html" class="function">require</a></span>, 
   functions, or another file access function, and have spaces or empty
   lines that are output before <span class="function"><strong>header()</strong></span> is called.
   The same problem exists when using a single PHP/HTML file.
   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
&lt;html&gt;<br><span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&nbsp;This&nbsp;will&nbsp;give&nbsp;an&nbsp;error.&nbsp;Note&nbsp;the&nbsp;output<br>&nbsp;*&nbsp;above,&nbsp;which&nbsp;is&nbsp;before&nbsp;the&nbsp;header()&nbsp;call&nbsp;*/<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Location:&nbsp;http://www.example.com/'</span><span style="color: #007700">);<br>exit;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.header-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       The header string.
      </p>
      <p class="para">
       There are two special-case header calls.  The first is a header
       that starts with the string "<em>HTTP/</em>" (case is not
       significant), which will be used to figure out the HTTP status
       code to send. For example, if you have configured Apache to
       use a PHP script to handle requests for missing files (using
       the <em>ErrorDocument</em> directive), you may want to
       make sure that your script generates the proper status code.
      </p>
      <p class="para">
       </p><div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>header</span><span style="color: #007700">(</span><span style="color: #DD0000">"HTTP/1.0&nbsp;404&nbsp;Not&nbsp;Found"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      <p></p>
      <p class="para">
       The second special case is the "Location:" header.  Not only does
       it send this header back to the browser, but it also returns a
       <em>REDIRECT</em> (302) status code to the browser
       unless the <em>201</em> or
       a <em>3xx</em> status code has already been set.
      </p>
      <p class="para">
       </p><div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Location:&nbsp;http://www.example.com/"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">/*&nbsp;Redirect&nbsp;browser&nbsp;*/<br><br>/*&nbsp;Make&nbsp;sure&nbsp;that&nbsp;code&nbsp;below&nbsp;does&nbsp;not&nbsp;get&nbsp;executed&nbsp;when&nbsp;we&nbsp;redirect.&nbsp;*/<br></span><span style="color: #007700">exit;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      <p></p>
     </dd>

    
    
     <dt>
<code class="parameter">replace</code></dt>

     <dd>

      <p class="para">
       The optional <code class="parameter">replace</code> parameter indicates
       whether the header should replace a previous similar header, or
       add a second header of the same type.  By default it will replace,
       but if you pass in <strong><code>FALSE</code></strong> as the second argument you can force
       multiple headers of the same type.  For example:
      </p>
      <p class="para">
       </p><div class="informalexample">
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;Negotiate'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'WWW-Authenticate:&nbsp;NTLM'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      <p></p>
     </dd>

    
    
     <dt>
<code class="parameter">http_response_code</code></dt>

     <dd>

      <p class="para">
       Forces the HTTP response code to the specified value. Note that this 
       parameter only has an effect if the <code class="parameter">string</code> is 
       not empty.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.header-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   No value is returned.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.header-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.1.2</td>
       <td>
        This function now prevents more than one header to be sent at once as
        a protection against header injection attacks.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.header-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4597">
    <p><strong>Example #1 Download dialog</strong></p>
    <div class="example-contents"><p>
     If you want the user to be prompted to save the data you are
     sending, such as a generated PDF file, you can use the <a href="http://www.faqs.org/rfcs/rfc2183" class="link external">»&nbsp;Content-Disposition</a> header to
     supply a recommended filename and force the browser to display the
     save dialog.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;We'll&nbsp;be&nbsp;outputting&nbsp;a&nbsp;PDF<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;application/pdf'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;It&nbsp;will&nbsp;be&nbsp;called&nbsp;downloaded.pdf<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Disposition:&nbsp;attachment;&nbsp;filename="downloaded.pdf"'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;The&nbsp;PDF&nbsp;source&nbsp;is&nbsp;in&nbsp;original.pdf<br></span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">'original.pdf'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4598">
    <p><strong>Example #2 Caching directives</strong></p>
    <div class="example-contents"><p>
     PHP scripts often generate dynamic content that must not be cached
     by the client browser or any proxy caches between the server and the
     client browser. Many proxies and clients can be forced to disable
     caching with:
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Cache-Control:&nbsp;no-cache,&nbsp;must-revalidate"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;HTTP/1.1<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Expires:&nbsp;Sat,&nbsp;26&nbsp;Jul&nbsp;1997&nbsp;05:00:00&nbsp;GMT"</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;Date&nbsp;in&nbsp;the&nbsp;past<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     </p><blockquote class="note"><p><strong class="note">Note</strong>: 
      </p><p class="para">
       You may find that your pages aren't cached even if you don't
       output all of the headers above. There are a number of options
       that users may be able to set for their browser that change its
       default caching behavior. By sending the headers above, you should
       override any settings that may otherwise cause the output of your
       script to be cached.
      </p>
      <p class="para">
       Additionally, <span class="function"><a href="function.session-cache-limiter.html" class="function">session_cache_limiter()</a></span> and
       the <em>session.cache_limiter</em> configuration
       setting can be used to automatically generate the correct
       caching-related headers when sessions are being used.
      </p>
     <p></p></blockquote>
    <p></p></div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.header-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Headers will only be accessible and output when a SAPI that supports them
    is in use.
   </p>
  <p></p></blockquote>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    You can use output buffering to get around this problem,
    with the overhead of all of your output to the browser being buffered
    in the server until you send it. You can do this by calling
    <span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> and <span class="function"><a href="function.ob-end-flush.html" class="function">ob_end_flush()</a></span>
    in your script, or setting the <em>output_buffering</em>
    configuration directive on in your <var class="filename">php.ini</var> or
    server configuration files.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    The HTTP status header line will always be the first sent
    to the client, regardless of the actual <span class="function"><strong>header()</strong></span>
    call being the first or not. The status may be overridden
    by calling <span class="function"><strong>header()</strong></span> with a new status line
    at any time unless the HTTP headers have already been sent.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    There is a bug in Microsoft Internet Explorer 4.01 that prevents
    this from working. There is no workaround. There is also a bug
    in Microsoft Internet Explorer 5.5 that interferes with this,
    which can be resolved by upgrading to Service Pack 2 or later.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    If <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe mode</a> is enabled the
    uid of the script is added to the <em>realm</em> part
    of the <em>WWW-Authenticate</em> header if you set
    this header (used for HTTP Authentication).
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    HTTP/1.1 requires an absolute <acronym title="Uniform Resource Identifier">URI</acronym> as argument to
    <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30" class="link external">»&nbsp;Location:</a>
    including the scheme, hostname and absolute path, but
    some clients accept relative URIs. You can usually use
    <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['HTTP_HOST']</a></var></var>,
    <var class="varname"><var class="varname"><a href="reserved.variables.server.html" class="classname">$_SERVER['PHP_SELF']</a></var></var>
    and <span class="function"><a href="function.dirname.html" class="function">dirname()</a></span> to make an absolute URI from a
    relative one yourself:
    </p><div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&nbsp;Redirect&nbsp;to&nbsp;a&nbsp;different&nbsp;page&nbsp;in&nbsp;the&nbsp;current&nbsp;directory&nbsp;that&nbsp;was&nbsp;requested&nbsp;*/<br></span><span style="color: #0000BB">$host&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'HTTP_HOST'</span><span style="color: #007700">];<br></span><span style="color: #0000BB">$uri&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">rtrim</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'PHP_SELF'</span><span style="color: #007700">]),&nbsp;</span><span style="color: #DD0000">'/\\'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$extra&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'mypage.php'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Location:&nbsp;http://</span><span style="color: #0000BB">$host$uri</span><span style="color: #DD0000">/</span><span style="color: #0000BB">$extra</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br>exit;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p></p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Session ID is not passed with Location header even if <a href="session.configuration.html#ini.session.use-trans-sid" class="link">session.use_trans_sid</a> is
    enabled. It must by passed manually using <strong><code>SID</code></strong>
    constant.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.header-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.headers-sent.html" class="function" rel="rdfs-seeAlso">headers_sent()</a> - Checks if or where headers have been sent</span></li>
    <li class="member"><span class="function"><a href="function.setcookie.html" class="function" rel="rdfs-seeAlso">setcookie()</a> - Send a cookie</span></li>
    <li class="member"><span class="function"><a href="function.http-response-code.html" class="function" rel="rdfs-seeAlso">http_response_code()</a> - Get or Set the HTTP response code</span></li>
    <li class="member">
     The section on <a href="features.http-auth.html" class="link">HTTP
     authentication</a>
    </li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="92305">  
  <a class="name">
  <strong class="user"><em>mjt at jpeto dot net</em></strong></a><div class="date" title="2009-07-17 11:01"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92305">
<div class="phpcode"><code><span class="html">
I strongly recommend, that you use
<br>
<br>header($_SERVER["SERVER_PROTOCOL"]." 404 Not Found");
<br>
<br>instead of 
<br>
<br>header("HTTP/1.1 404 Not Found");
<br>
<br>I had big troubles with an Apache/2.0.59 (Unix) answering in HTTP/1.0 while I (accidentially) added a "HTTP/1.1 200 Ok" - Header.
<br>
<br>Most of the pages were displayed correct, but on some of them apache added weird content to it:
<br>
<br>A 4-digits HexCode on top of the page (before any output of my php script), seems to be some kind of checksum, because it changes from page to page and browser to browser. (same code for same page and browser)
<br>
<br>"0" at the bottom of the page (after the complete output of my php script) 
<br>
<br>It took me quite a while to find out about the wrong protocol in the HTTP-header.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87449">  
  <a class="name">
  <strong class="user"><em>bebertjean at yahoo dot fr</em></strong></a><div class="date" title="2008-12-05 05:46"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87449">
<div class="phpcode"><code><span class="html">
If using the 'header' function for the downloading of files, especially if you're passing the filename as a variable, remember to surround the filename with double quotes, otherwise you'll have problems in Firefox as soon as there's a space in the filename.<br><br>So instead of typing:<br><br><span class="default">&lt;?php<br>&nbsp; header</span><span class="keyword">(</span><span class="string">"Content-Disposition: attachment; filename=" </span><span class="keyword">. </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>you should type:<br><br><span class="default">&lt;?php<br>&nbsp; header</span><span class="keyword">(</span><span class="string">"Content-Disposition: attachment; filename=\"" </span><span class="keyword">. </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) . </span><span class="string">"\""</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>If you don't do this then when the user clicks on the link for a file named "Example file with spaces.txt", then Firefox's Save As dialog box will give it the name "Example", and it will have no extension.<br><br>See the page called "Filenames_with_spaces_are_truncated_upon_download" at <br><a rel="nofollow" target="_blank">http://kb.mozillazine.org/</a> for more information. (Sorry, the site won't let me post such a long link...)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78470">  
  <a class="name">
  <strong class="user"><em>Dylan at WeDefy dot com</em></strong></a><div class="date" title="2007-10-13 08:17"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78470">
<div class="phpcode"><code><span class="html">
A quick way to make redirects permanent or temporary is to make use of the $http_response_code parameter in header().<br><br><span class="default">&lt;?php<br></span><span class="comment">// 301 Moved Permanently<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: /foo.php"</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">301</span><span class="keyword">);<br><br></span><span class="comment">// 302 Found<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: /foo.php"</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">302</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: /foo.php"</span><span class="keyword">);<br><br></span><span class="comment">// 303 See Other<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: /foo.php"</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">303</span><span class="keyword">);<br><br></span><span class="comment">// 307 Temporary Redirect<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: /foo.php"</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">,</span><span class="default">307</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>The HTTP status code changes the way browsers and robots handle redirects, so if you are using header(Location:) it's a good idea to set the status code at the same time.&nbsp; Browsers typically re-request a 307 page every time, cache a 302 page for the session, and cache a 301 page for longer, or even indefinitely.&nbsp; Search engines typically transfer "page rank" to the new location for 301 redirects, but not for 302, 303 or 307. If the status code is not specified, header('Location:') defaults to 302.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108766">  
  <a class="name">
  <strong class="user"><em>ben at indietorrent dot org</em></strong></a><div class="date" title="2012-05-23 05:34"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108766">
<div class="phpcode"><code><span class="html">
Be aware that sending binary files to the user-agent (browser) over an encrypted connection (SSL/TLS) will fail in IE (Internet Explorer) versions 5, 6, 7, and 8 if any of the following headers is included:<br><br>Cache-control:no-store<br>Cache-control:no-cache<br><br>See: <a rel="nofollow" target="_blank">http://support.microsoft.com/kb/323308</a><br><br>Workaround: do not send those headers.<br><br>Also, be aware that IE versions 5, 6, 7, and 8 double-compress already-compressed files and do not reverse the process correctly, so ZIP files and similar are corrupted on download.<br><br>Workaround: disable compression (beyond text/html) for these particular versions of IE, e.g., using Apache's "BrowserMatch" directive. The following example disables compression in all versions of IE:<br><br>BrowserMatch ".*MSIE.*" gzip-only-text/html</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61903">  
  <a class="name">
  <strong class="user"><em>mandor at mandor dot net</em></strong></a><div class="date" title="2006-02-14 05:14"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61903">
<div class="phpcode"><code><span class="html">
When using PHP to output an image, it won't be cached by the client so if you don't want them to download the image each time they reload the page, you will need to emulate part of the HTTP protocol.<br><br>Here's how:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="comment">// Test image.<br>&nbsp; &nbsp; </span><span class="default">$fn </span><span class="keyword">= </span><span class="string">'/test/foo.png'</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">// Getting headers sent by the client.<br>&nbsp; &nbsp; </span><span class="default">$headers </span><span class="keyword">= </span><span class="default">apache_request_headers</span><span class="keyword">(); <br><br>&nbsp; &nbsp; </span><span class="comment">// Checking if the client is validating his cache and if it is current.<br>&nbsp; &nbsp; </span><span class="keyword">if (isset(</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'If-Modified-Since'</span><span class="keyword">]) &amp;&amp; (</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$headers</span><span class="keyword">[</span><span class="string">'If-Modified-Since'</span><span class="keyword">]) == </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Client's cache IS current, so we just respond '304 Not Modified'.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Last-Modified: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s'</span><span class="keyword">, </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">)).</span><span class="string">' GMT'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">304</span><span class="keyword">);<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Image not cached or cache outdated, we respond '200 OK' and output the image.<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Last-Modified: '</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">'D, d M Y H:i:s'</span><span class="keyword">, </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">)).</span><span class="string">' GMT'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Length: '</span><span class="keyword">.</span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: image/png'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$fn</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>That way foo.png will be properly cached by the client and you'll save bandwith. :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97114">  
  <a class="name">
  <strong class="user"><em>Marcel G</em></strong></a><div class="date" title="2010-04-01 06:37"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97114">
<div class="phpcode"><code><span class="html">
Several times this one is asked on the net but an answer could not be found in the docs on php.net ...
<br>
<br>If you want to redirect an user and tell him he will be redirected, e. g. "You will be redirected in about 5 secs. If not, click here." you cannot use header( 'Location: ...' ) as you can't sent any output before the headers are sent.
<br>
<br>So, either you have to use the HTML meta refresh thingy or you use the following:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; header</span><span class="keyword">( </span><span class="string">"refresh:5;url=wherever.php" </span><span class="keyword">);
<br>&nbsp; echo </span><span class="string">'You\'ll be redirected in about 5 secs. If not, click &lt;a href="wherever.php"&gt;here&lt;/a&gt;.'</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>Hth someone</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32569">  
  <a class="name">
  <strong class="user"><em>bMindful at fleetingiamge dot org</em></strong></a><div class="date" title="2003-05-31 03:08"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32569">
<div class="phpcode"><code><span class="html">
If you haven't used, HTTP Response 204 can be very convenient. 204 tells the server to immediately termiante this request. This is helpful if you want a javascript (or similar) client-side function to execute a server-side function without refreshing or changing the current webpage. Great for updating database, setting global variables, etc.
<br>
<br>&nbsp; &nbsp;&nbsp; header("status: 204");&nbsp; (or the other call)
<br>&nbsp; &nbsp;&nbsp; header("HTTP/1.0 204 No Response");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85254">  
  <a class="name">
  <strong class="user"><em>shutout2730 at yahoo dot com</em></strong></a><div class="date" title="2008-08-21 11:57"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85254">
<div class="phpcode"><code><span class="html">
It is important to note that headers are actually sent when the first byte is output to the browser. If you are replacing headers in your scripts, this means that the placement of echo/print statements and output buffers may actually impact which headers are sent. In the case of redirects, if you forget to terminate your script after sending the header, adding a buffer or sending a character may change which page your users are sent to.<br><br>This redirects to 2.html since the second header replaces the first.<br><br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">"location: 1.html"</span><span class="keyword">); <br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"location: 2.html"</span><span class="keyword">); </span><span class="comment">//replaces 1.html<br></span><span class="default">?&gt;<br></span><br>This redirects to 1.html since the header is sent as soon as the echo happens. You also won't see any "headers already sent" errors because the browser follows the redirect before it can display the error.<br><br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">"location: 1.html"</span><span class="keyword">);<br>echo </span><span class="string">"send data"</span><span class="keyword">; <br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"location: 2.html"</span><span class="keyword">); </span><span class="comment">//1.html already sent <br></span><span class="default">?&gt;<br></span><br>Wrapping the previous example in an output buffer actually changes the behavior of the script! This is because headers aren't sent until the output buffer is flushed.<br><br><span class="default">&lt;?php<br>ob_start</span><span class="keyword">();<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"location: 1.html"</span><span class="keyword">); <br>echo </span><span class="string">"send data"</span><span class="keyword">; <br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"location: 2.html"</span><span class="keyword">); </span><span class="comment">//replaces 1.html<br></span><span class="default">ob_end_flush</span><span class="keyword">(); </span><span class="comment">//now the headers are sent<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94114">  
  <a class="name">
  <strong class="user"><em>scott at lucentminds dot com</em></strong></a><div class="date" title="2009-10-16 04:42"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94114">
<div class="phpcode"><code><span class="html">
If you want to remove a header and keep it from being sent as part of the header response, just provide nothing as the header value after the header name. For example...<br><br>PHP, by default, always returns the following header:<br><br>"Content-Type: text/html"<br><br>Which your entire header response will look like<br><br>HTTP/1.1 200 OK<br>Server: Apache/2.2.11 (Unix)<br>X-Powered-By: PHP/5.2.8<br>Date: Fri, 16 Oct 2009 23:05:07 GMT<br>Content-Type: text/html; charset=UTF-8<br>Connection: close<br><br>If you call the header name with no value like so...<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; header</span><span class="keyword">( </span><span class="string">'Content-Type:' </span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Your headers now look like this:<br><br>HTTP/1.1 200 OK<br>Server: Apache/2.2.11 (Unix)<br>X-Powered-By: PHP/5.2.8<br>Date: Fri, 16 Oct 2009 23:05:07 GMT<br>Connection: close</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86554">  
  <a class="name">
  <strong class="user"><em>mzheng[no-spam-thx] at ariba dot com</em></strong></a><div class="date" title="2008-10-23 08:50"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86554">
<div class="phpcode"><code><span class="html">
For large files (100+ MBs), I found that it is essential to flush the file content ASAP, otherwise the download dialog doesn't show until a long time or never. <br><br><span class="default">&lt;?php<br>header</span><span class="keyword">(</span><span class="string">"Content-Disposition: attachment; filename=" </span><span class="keyword">. </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">));&nbsp; &nbsp; <br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: application/force-download"</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: application/octet-stream"</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: application/download"</span><span class="keyword">);<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Description: File Transfer"</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">));<br></span><span class="default">flush</span><span class="keyword">(); </span><span class="comment">// this doesn't really matter.<br><br></span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">); <br>while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; echo </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">65536</span><span class="keyword">); <br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">(); </span><span class="comment">// this is essential for large downloads<br></span><span class="keyword">}&nbsp; <br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">); <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76758">  
  <a class="name">
  <strong class="user"><em>Kal</em></strong></a><div class="date" title="2007-07-29 01:07"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76758">
<div class="phpcode"><code><span class="html">
I spent a long time trying to determine why Internet Explorer 7 wasn't prompting the user to save a download based on the filename specified on a "'Content-Disposition: attachment; filename=..." header line.<br><br>I eventually determined that my Apache installation was adding an additional header: "Vary: Host", which was throwing IE - as per <a rel="nofollow" target="_blank">http://support.microsoft.com/kb/824847</a><br><br>I found manually setting the Vary header from within PHP as follows header('Vary: User-Agent'); allowed IE to behave as intended.<br><br>Hope this saves someone else some time,<br><br>- Kal</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75507">  
  <a class="name">
  <strong class="user"><em>nobileelpirata at hotmail dot com</em></strong></a><div class="date" title="2007-06-02 03:04"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75507">
<div class="phpcode"><code><span class="html">
This is the Headers to force a browser to use fresh content (no caching) in HTTP/1.0 and HTTP/1.1:
<br>
<br><span class="default">&lt;?PHP
<br>header</span><span class="keyword">( </span><span class="string">'Expires: Sat, 26 Jul 1997 05:00:00 GMT' </span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">( </span><span class="string">'Last-Modified: ' </span><span class="keyword">. </span><span class="default">gmdate</span><span class="keyword">( </span><span class="string">'D, d M Y H:i:s' </span><span class="keyword">) . </span><span class="string">' GMT' </span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">( </span><span class="string">'Cache-Control: no-store, no-cache, must-revalidate' </span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">( </span><span class="string">'Cache-Control: post-check=0, pre-check=0'</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">( </span><span class="string">'Pragma: no-cache' </span><span class="keyword">);
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37645">  
  <a class="name">
  <strong class="user"><em>jp at webgraphe dot com</em></strong></a><div class="date" title="2003-11-21 03:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37645">
<div class="phpcode"><code><span class="html">
A call to session_write_close() before the statement
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; header</span><span class="keyword">(</span><span class="string">"Location: URL"</span><span class="keyword">);
<br>&nbsp; &nbsp; exit();
<br></span><span class="default">?&gt;
<br></span>
<br>is recommended if you want to be sure the session is updated before proceeding to the redirection.
<br>
<br>We encountered a situation where the script accessed by the redirection wasn't loading the session correctly because the precedent script hadn't the time to update it (we used a database handler).
<br>
<br>JP.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99190">  
  <a class="name">
  <strong class="user"><em>Cody G.</em></strong></a><div class="date" title="2010-08-01 09:53"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom99190">
<div class="phpcode"><code><span class="html">
After lots of research and testing, I'd like to share my findings about my problems with Internet Explorer and file downloads.<br><br>&nbsp; Take a look at this code, which replicates the normal download of a Javascript:<br><br><span class="default">&lt;?php<br> </span><span class="keyword">if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"HTTP_USER_AGENT"</span><span class="keyword">],</span><span class="string">"MSIE"</span><span class="keyword">)==</span><span class="default">false</span><span class="keyword">) {<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: text/javascript"</span><span class="keyword">);<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: inline; filename=\"download.js\""</span><span class="keyword">);<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: "</span><span class="keyword">.</span><span class="default">filesize</span><span class="keyword">(</span><span class="string">"my-file.js"</span><span class="keyword">));<br> } else {<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: application/force-download"</span><span class="keyword">);<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Disposition: attachment; filename=\"download.js\""</span><span class="keyword">);<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: "</span><span class="keyword">.</span><span class="default">filesize</span><span class="keyword">(</span><span class="string">"my-file.js"</span><span class="keyword">));<br> }<br> </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Expires: Fri, 01 Jan 2010 05:00:00 GMT"</span><span class="keyword">);<br> if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"HTTP_USER_AGENT"</span><span class="keyword">],</span><span class="string">"MSIE"</span><span class="keyword">)==</span><span class="default">false</span><span class="keyword">) {<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Cache-Control: no-cache"</span><span class="keyword">);<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Pragma: no-cache"</span><span class="keyword">);<br> }<br> include(</span><span class="string">"my-file.js"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Now let me explain:<br><br>&nbsp; I start out by checking for IE, then if not IE, I set Content-type (case-sensitive) to JS and set Content-Disposition (every header is case-sensitive from now on) to inline, because most browsers outside of IE like to display JS inline. (User may change settings). The Content-Length header is required by some browsers to activate download box. Then, if it is IE, the "application/force-download" Content-type is sometimes required to show the download box. Use this if you don't want your PDF to display in the browser (in IE). I use it here to make sure the box opens. Anyway, I set the Content-Disposition to attachment because I already know that the box will appear. Then I have the Content-Length again.<br><br>&nbsp; Now, here's my big point. I have the Cache-Control and Pragma headers sent only if not IE. THESE HEADERS WILL PREVENT DOWNLOAD ON IE!!! Only use the Expires header, after all, it will require the file to be downloaded again the next time. This is not a bug! IE stores downloads in the Temporary Internet Files folder until the download is complete. I know this because once I downloaded a huge file to My Documents, but the Download Dialog box put it in the Temp folder and moved it at the end. Just think about it. If IE requires the file to be downloaded to the Temp folder, setting the Cache-Control and Pragma headers will cause an error!<br><br>I hope this saves someone some time!<br>~Cody G.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85146">  
  <a class="name">
  <strong class="user"><em>sk89q</em></strong></a><div class="date" title="2008-08-16 11:41"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85146">
<div class="phpcode"><code><span class="html">
You can use HTTP's etags and last modified dates to ensure that you're not sending the browser data it already has cached.
<br>
<br><span class="default">&lt;?php
<br>$last_modified_time </span><span class="keyword">= </span><span class="default">filemtime</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br></span><span class="default">$etag </span><span class="keyword">= </span><span class="default">md5_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br>
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Last-Modified: "</span><span class="keyword">.</span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"D, d M Y H:i:s"</span><span class="keyword">, </span><span class="default">$last_modified_time</span><span class="keyword">).</span><span class="string">" GMT"</span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Etag: </span><span class="default">$etag</span><span class="string">"</span><span class="keyword">);
<br>
<br>if (@</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_IF_MODIFIED_SINCE'</span><span class="keyword">]) == </span><span class="default">$last_modified_time </span><span class="keyword">||
<br>&nbsp; &nbsp; </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_IF_NONE_MATCH'</span><span class="keyword">]) == </span><span class="default">$etag</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"HTTP/1.1 304 Not Modified"</span><span class="keyword">);
<br>&nbsp; &nbsp; exit;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96017">  
  <a class="name">
  <strong class="user"><em>Refugnic</em></strong></a><div class="date" title="2010-02-03 05:43"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96017">
<div class="phpcode"><code><span class="html">
My files are in a compressed state (bz2). When the user clicks the link, I want them to get the uncompressed version of the file.<br><br>After decompressing the file, I ran into the problem, that the download dialog would always pop up, even when I told the dialog to 'Always perform this operation with this file type'.<br><br>As I found out, the problem was in the header directive 'Content-Disposition', namely the 'attachment' directive.<br><br>If you want your browser to simulate a plain link to a file, either change 'attachment' to 'inline' or omit it alltogether and you'll be fine.<br><br>This took me a while to figure out and I hope it will help someone else out there, who runs into the same problem.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92620">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-07-31 08:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92620">
<div class="phpcode"><code><span class="html">
I just want to add, becuase I see here lots of wrong formated headers.
<br>
<br>1. All used headers have first letters uppercase, so you MUST follow this. For example:
<br>
<br>Location, not location
<br>Content-Type, not content-type, nor CONTENT-TYPE
<br>
<br>2. Then there MUST be colon and space, like
<br>
<br>good: header("Content-Type: text/plain");
<br>wrong: header("Content-Type:text/plain");
<br>
<br>3. Location header MUST be absolute uri with scheme, domain, port, path, etc.
<br>
<br>good: header("Location: <a rel="nofollow" target="_blank">http://www.example.com/something.php?a=1</a>");
<br>
<br>4. Relative URIs are NOT allowed
<br>
<br>wrong:&nbsp; Location: /something.php?a=1
<br>wrong:&nbsp; Location: ?a=1
<br>
<br>It will make proxy server and http clients happier.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87348">  
  <a class="name">
  <strong class="user"><em>jamie</em></strong></a><div class="date" title="2008-12-01 07:57"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87348">
<div class="phpcode"><code><span class="html">
The encoding of a file is discovered by the Content-Type, either in the HTML meta tag or as part of the HTTP header. Thus, the server and browser does not need - nor expect - a Unicode file to begin with a BOM mark. BOMs can confuse *nix systems too. More info at <a rel="nofollow" target="_blank">http://unicode.org/faq/utf_bom.html#bom1</a><br><br>On another note: Safari can display CMYK images (at least the OS X version, because it uses the services of QuickTime)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114979">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2014-05-08 04:57"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114979">
<div class="phpcode"><code><span class="html">
This is a simple function that you can use in many places if you need redirections:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">redirect</span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">){<br>if(!empty(</span><span class="default">$link</span><span class="keyword">))<br>&nbsp; &nbsp; if(!</span><span class="default">headers_sent</span><span class="keyword">())<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Location: '</span><span class="keyword">.</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$link</span><span class="keyword">);<br>&nbsp; &nbsp; else die(</span><span class="string">'ERROR: Header data not send! Redirecting page is impossible! Contact System Administrator!'</span><span class="keyword">);<br>else return </span><span class="default">false</span><span class="keyword">;<br>}<br><br></span><span class="comment">// EXAMPLE:<br></span><span class="default">redirect</span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://www.php.net</a>"</span><span class="keyword">)<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95864">  
  <a class="name">
  <strong class="user"><em>this dot person at joaocunha dot eti dot br</em></strong></a><div class="date" title="2010-01-26 10:39"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95864">
<div class="phpcode"><code><span class="html">
AVOID ZERO BYTE ORDER MARK!<br><br>Header MUST be sent before EVERYTHING in the page. Even a single space will break your script. In my case, there was BOM setted in the encoding, so I opened the file with notepad++ and set the encoding to UTF-8 (no BOM) and voila, everything is working great now.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102009">  
  <a class="name">
  <strong class="user"><em>cedric at gn dot apc dot org</em></strong></a><div class="date" title="2011-01-22 11:47"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102009">
<div class="phpcode"><code><span class="html">
Setting a Location header "returns a REDIRECT (302) status code to the browser unless the 201 or a 3xx status code has already been set".&nbsp; If you are sending a response to a POST request, you might want to look at RFC 2616 sections 10.3.3 and 10.3.4.&nbsp;&nbsp; It is suggested that if you want the browser to immediately GET the resource in the Location header in this circumstance, you should use a 303 status code not the 302 (with the same link as hypertext in the body for very old browsers).&nbsp; This may have (rare) consequences as mentioned in bug 42969.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94118">  
  <a class="name">
  <strong class="user"><em>dev at omikrosys dot com</em></strong></a><div class="date" title="2009-10-16 10:45"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94118">
<div class="phpcode"><code><span class="html">
Just to inform you all, do not get confused between Content-Transfer-Encoding and Content-Encoding<br><br>Content-Transfer-Encoding specifies the encoding used to transfer the data within the HTTP protocol, like raw binary or base64. (binary is more compact than base64. base64 having 33% overhead).<br>Eg Use:- header('Content-Transfer-Encoding: binary');<br><br>Content-Encoding is used to apply things like gzip compression to the content/data.<br>Eg Use:- header('Content-Encoding: gzip');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89452">  
  <a class="name">
  <strong class="user"><em>Jamesb</em></strong></a><div class="date" title="2009-03-08 05:25"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89452">
<div class="phpcode"><code><span class="html">
Here is a php script I wrote to stream a file and crypt it with a xor operation on the bytes and with a key :
<br>
<br>The encryption works very good but the speed is decrease by 2, it is now 520KiB/s. The user is now asked for a md5 password (instead of keeping it in the code directly). There is some part in French because it's my native language so modify it as you want.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// Stream files and encrypt the data on-the-fly
<br>
<br>// Settings
<br>// -- File to stream
<br></span><span class="default">$file </span><span class="keyword">= </span><span class="string">"FILE_out"</span><span class="keyword">;
<br></span><span class="comment">// -- Reading buffer
<br></span><span class="default">$bufferlength </span><span class="keyword">= </span><span class="default">3840</span><span class="keyword">;
<br></span><span class="comment">// -- Key in hex
<br>//$keychar = "9cdfb439c7876e703e307864c9167a15";
<br>
<br>// Function: Convertion hex key in a string into binary
<br></span><span class="keyword">function </span><span class="default">hex2bin</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">) {
<br>&nbsp; &nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">)) return </span><span class="default">null</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();
<br>&nbsp; &nbsp; for (</span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; (</span><span class="default">$a</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">)&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">); </span><span class="default">$a</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ta </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">*</span><span class="default">$a</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tb </span><span class="keyword">= </span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$h</span><span class="keyword">[(</span><span class="default">2</span><span class="keyword">*</span><span class="default">$a</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$a</span><span class="keyword">] = (int) ((</span><span class="default">$ta </span><span class="keyword">&lt;&lt; </span><span class="default">4</span><span class="keyword">) + </span><span class="default">$tb</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">// Function to send the auth headers
<br></span><span class="keyword">function </span><span class="default">askPassword</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">=</span><span class="string">"Enter the password"</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'WWW-Authenticate: Basic realm="'</span><span class="keyword">. </span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) .</span><span class="string">'"'</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'HTTP/1.0 401 Unauthorized'</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">1</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">// Key is asked at the first start
<br></span><span class="keyword">if (!isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_AUTH_PW'</span><span class="keyword">])) {
<br>&nbsp; &nbsp; </span><span class="default">askPassword</span><span class="keyword">();
<br>&nbsp; &nbsp; echo </span><span class="string">"Une clé est nécessaire !&lt;br /&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; exit;
<br>}
<br></span><span class="comment">// Get the key in hex
<br></span><span class="default">$keychar </span><span class="keyword">= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_AUTH_PW'</span><span class="keyword">];
<br>
<br></span><span class="comment">// Convert key and set the size of the key
<br></span><span class="default">$key </span><span class="keyword">= </span><span class="default">hex2bin</span><span class="keyword">(</span><span class="default">$keychar</span><span class="keyword">);
<br></span><span class="default">$keylength </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);
<br></span><span class="comment">// Teste si la clé est valide en hex
<br></span><span class="keyword">if (</span><span class="default">$key </span><span class="keyword">== </span><span class="string">"" </span><span class="keyword">|| </span><span class="default">$keylength </span><span class="keyword">&lt;= </span><span class="default">4</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">askPassword</span><span class="keyword">(</span><span class="string">"Clé incorrecte !"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">//echo "Clé incorrecte !&lt;br /&gt;";
<br>&nbsp; &nbsp; </span><span class="keyword">exit();
<br>}
<br></span><span class="comment">// Teste si la clé est de longueur d'une puissance de 2
<br></span><span class="keyword">if ( (</span><span class="default">$keylength</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">) != </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">askPassword</span><span class="keyword">(</span><span class="string">"Clé de longueur incorrecte (multiple de 2 uniquement)"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">//echo "Clé de longueur incorrecte (puissance de 2 uniquement)&lt;br /&gt;";
<br>&nbsp; &nbsp; </span><span class="keyword">exit();
<br>}
<br>
<br></span><span class="comment">// Headers
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Type: application/octet-stream; "</span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Transfer-Encoding: binary"</span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-Length: " </span><span class="keyword">. </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) .</span><span class="string">"; "</span><span class="keyword">);
<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"filename=\""</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">.</span><span class="string">"\"; "</span><span class="keyword">);
<br></span><span class="default">flush</span><span class="keyword">(); </span><span class="comment">// this doesn't really matter.
<br>
<br>// Opening the file in read-only
<br></span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);
<br>while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">))
<br>{
<br>&nbsp; &nbsp; </span><span class="comment">// Read a buffer size of the file
<br>&nbsp; &nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$bufferlength</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$bufferlength</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// The key is read in loop to crypt the whole file
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$i</span><span class="keyword">%</span><span class="default">$keylength </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Apply a xor operation between the key and the file to crypt
<br>&nbsp; &nbsp; &nbsp; &nbsp; // This operation eats a lots of CPU time (Stream at 1MiB/s on my server; Intel E2180)
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">pack</span><span class="keyword">(</span><span class="string">"C"</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bufferE </span><span class="keyword">= ( </span><span class="default">$buffer</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]^</span><span class="default">$tmp</span><span class="keyword">); </span><span class="comment">// &lt;==== Le fameux XOR
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; /*
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;br /&gt;key[".$j."]: ";
<br>&nbsp; &nbsp; &nbsp; &nbsp; var_dump($tmp);
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;br /&gt;buffer[".$i."]: ";
<br>&nbsp; &nbsp; &nbsp; &nbsp; var_dump($buffer[$i]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;br /&gt;bufferE: ";
<br>&nbsp; &nbsp; &nbsp; &nbsp; var_dump($bufferE);
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;br /&gt;";
<br>&nbsp; &nbsp; &nbsp; &nbsp; //*/
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; // Send the encrypted data
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">$bufferE</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Clean the memory
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$bufferE </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$j</span><span class="keyword">++;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="default">$buffer </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">(); </span><span class="comment">// this is essential for large downloads
<br>&nbsp; &nbsp; /*
<br>&nbsp; &nbsp; fclose($fp);
<br>&nbsp; &nbsp; exit();
<br>&nbsp; &nbsp; //*/
<br></span><span class="keyword">}
<br></span><span class="comment">// Close the file and it's finished
<br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.header.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:23 GMT -->


</body></html>