<html><!-- Mirrored from php.net/manual/en/ref.classobj.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:51:48 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Classes/Object Functions</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="ref.classobj.html">
 <link rel="shorturl" href="http://php.net/classobj">
 <link rel="alternate" href="http://php.net/classobj" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="book.classobj.html">
 <link rel="prev" href="classobj.examples.html">
 <link rel="next" href="function.autoload.html">

 <link rel="alternate" href="ref.classobj.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/ref.classobj.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/ref.classobj.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/ref.classobj.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/ref.classobj.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/ref.classobj.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/ref.classobj.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/ref.classobj.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/ref.classobj.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/ref.classobj.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/ref.classobj.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></li>      <li><a href="book.classobj.html">Classes/Objects</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="ref.classobj" class="reference">
 <h1 class="title">Classes/Object Functions</h1>

 




























































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.autoload.html">__autoload</a> — Attempt to load undefined class</li><li><a href="function.call-user-method-array.html">call_user_method_array</a> — Call a user method given with an array of parameters [deprecated]</li><li><a href="function.call-user-method.html">call_user_method</a> — Call a user method on an specific object [deprecated]</li><li><a href="function.class-alias.html">class_alias</a> — Creates an alias for a class</li><li><a href="function.class-exists.html">class_exists</a> — Checks if the class has been defined</li><li><a href="function.get-called-class.html">get_called_class</a> — the "Late Static Binding" class name</li><li><a href="function.get-class-methods.html">get_class_methods</a> — Gets the class methods' names</li><li><a href="function.get-class-vars.html">get_class_vars</a> — Get the default properties of the class</li><li><a href="function.get-class.html">get_class</a> — Returns the name of the class of an object</li><li><a href="function.get-declared-classes.html">get_declared_classes</a> — Returns an array with the name of the defined classes</li><li><a href="function.get-declared-interfaces.html">get_declared_interfaces</a> — Returns an array of all declared interfaces</li><li><a href="function.get-declared-traits.html">get_declared_traits</a> — Returns an array of all declared traits</li><li><a href="function.get-object-vars.html">get_object_vars</a> — Gets the properties of the given object</li><li><a href="function.get-parent-class.html">get_parent_class</a> — Retrieves the parent class name for object or class</li><li><a href="function.interface-exists.html">interface_exists</a> — Checks if the interface has been defined</li><li><a href="function.is-a.html">is_a</a> — Checks if the object is of this class or has this class as one of its parents</li><li><a href="function.is-subclass-of.html">is_subclass_of</a> — Checks if the object has this class as one of its parents</li><li><a href="function.method-exists.html">method_exists</a> — Checks if the class method exists</li><li><a href="function.property-exists.html">property_exists</a> — Checks if the object or class has a property</li><li><a href="function.trait-exists.html">trait_exists</a> — Checks if the trait exists</li></ul>
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="57759">  
  <a class="name">
  <strong class="user"><em>pascal dot poncet at netconsult dot com</em></strong></a><div class="date" title="2005-10-13 07:21"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57759">
<div class="phpcode"><code><span class="html">
Subject: using "sql_calc_found_rows" in a MySQL query while exploiting result in a PHP db class object.<br><br>Hello,<br><br>There is a nice function in MySQL that allows to know how many records would have been returned if no "where" clause were set : SQL_CALC_FOUND_ROWS.<br><br>If you have create a db object to collect the returned lines, you will be a little perplex when trying to call the result of this function.<br><br>Why ?<br>Simply because the returned field's name is "found_rows()" and obviously it's not possible to call something like :<br><br><span class="default">&lt;?php $result</span><span class="keyword">-&gt;</span><span class="default">found_rows</span><span class="keyword">() </span><span class="default">?&gt;<br></span><br>...as it will try to acces a method, not a property !<br><br>Then, the only way to get the right result seems to be the use of a class function, like :<br><br><span class="default">&lt;?php<br>&nbsp; $db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"select found_rows()"</span><span class="keyword">);<br>&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">current</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">)));<br></span><span class="default">?&gt;<br></span><br>Of course, if somebody found an other way to solve it, like a special syntax (see the one used with curled arrays in a string), I'm really open to discuss.<br><br>Good luck,<br>Pascal</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42769">  
  <a class="name">
  <strong class="user"><em>HOC</em></strong></a><div class="date" title="2004-05-28 09:40"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42769">
<div class="phpcode"><code><span class="html">
to pillepop2003<br><br>Why do u want to know the classname of an non-existant object?<br><br>The only possible explanation for this question seems to me u want to know the class before u instantiate the object. Well, this is of no use since u always instantiate a class of ur choice. <br><br>When the class is instantiated into an object u can find the class of the object by means of get_class(). This is all u need. In case of inheritance u can use get_class($this) to get the class of the instantiated object. Now u can differentiate according to which class the object belongs to.<br><br>e.g.:<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">A</span><span class="keyword">{<br>&nbsp;&nbsp; function </span><span class="default">A</span><span class="keyword">(){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$class_of_this </span><span class="keyword">= </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">'Object is an instance of class '</span><span class="keyword">.</span><span class="default">$class_of_this</span><span class="keyword">.</span><span class="string">' which is the '</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; if(</span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$class_of_this</span><span class="keyword">,</span><span class="string">'A'</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'parent-class'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; else if(</span><span class="default">strcmp</span><span class="keyword">(</span><span class="default">$class_of_this</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'child-class'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">".\n"</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>}<br><br>class </span><span class="default">B </span><span class="keyword">extends </span><span class="default">A</span><span class="keyword">{<br>&nbsp;&nbsp; function </span><span class="default">B</span><span class="keyword">(){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">A</span><span class="keyword">();<br>&nbsp;&nbsp; }<br>}<br><br></span><span class="default">$object1 </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br></span><span class="default">$object2 </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>When u run this code-snippet the output will be:<br><br>Object is an instance of class A which is the parent-class.<br>Object is an instance of class B which is the child-class.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="35349">  
  <a class="name">
  <strong class="user"><em>ar at 5mm de</em></strong></a><div class="date" title="2003-08-28 07:59"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom35349">
<div class="phpcode"><code><span class="html">
I missed some kind of function to dynamicly override or extend an Object:<br><br>-----------------------------------------<br>function &amp;extendObj(&amp;$obj, $code) {<br>&nbsp; &nbsp; static $num = 0;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $classname = get_class($obj);<br>&nbsp; &nbsp; $newclass = $classname.$num; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; eval('class '.$newclass.' extends '.$classname.' { '.$code.' }');<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $newobj = new $newclass();<br><br>&nbsp; &nbsp; $vars = get_class_vars($classname);<br>&nbsp; &nbsp; foreach($vars AS $key=&gt;$value) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $newobj-&gt;$key = &amp;$obj-&gt;$key;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return $newobj;<br>}<br>-----------------------------------------<br><br>This creates a new class which extends the old one by the given code parameter, instanciates it and copy all vars from the old obj to the new one.<br><br>-----------------------------------------<br>class testA {<br>&nbsp; &nbsp; var $prop = 'a';<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function funcA($val) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;prop = $val;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function value() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return $this-&gt;prop;<br>&nbsp; &nbsp; } <br>}<br><br>$obj = new testA();<br><br>$newobj = &amp;extendObj(&amp;$obj, 'function addX() { $this-&gt;prop .= "x"; }');<br><br>$newobj-&gt;funcA('abc');<br>$newobj-&gt;addX();<br>echo $newobj-&gt;value();<br>-----------------------------------------<br><br>Results in 'abcx'. You can use the function multiple times and also with class variables. Be carefull, even if $newobj is just a copy of $obj, $obj-&gt;value() will return 'abcx', too, because of the &amp; operator: $newobj-&gt;$key = &amp;$obj-&gt;$key;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33809">  
  <a class="name">
  <strong class="user"><em>zidsu at hotmail dot com</em></strong></a><div class="date" title="2003-07-08 05:24"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33809">
<div class="phpcode"><code><span class="html">
FYI: if you want to split your class into manageble chunks, what means different files for you, you can put you functoins into includes, and make include() have a return value. Like this:<br><br>class Some_class {<br>&nbsp; var $value = 3;<br>&nbsp; function add_value ($input_param) {<br>&nbsp; &nbsp; return include ("path/some_file.php");<br>&nbsp; }<br>}<br><br>And your included file:<br><br>$input_param += $this-&gt;value;<br>return $input_param;<br><br>Then your function call will be:<br><br>$instance = new Some_class ();<br>$instance-&gt;add_value (3);<br><br>And this will return<br>6<br>hopefully :P<br><br>Keep in mind though, that the scope in the included file will be identical to the scope the function 'add_value' has.<br>And if you want to return the outcome, you should also have a return statement made in your include as well.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="11810">  
  <a class="name">
  <strong class="user"><em>gateschris at yahoo dot com</em></strong></a><div class="date" title="2001-03-08 01:59"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom11810">
<div class="phpcode"><code><span class="html">
[Editor's note: If you are trying to do overriding, then you can just interrogate (perhaps in the method itself) about what class (get_class()) the object belongs to, or if it is a subclass of a particular root class.
<br>
<br>You can alway refer to the parent overriden method, see the "Classes and Objects" page of the manual and comments/editor's notes therein.]
<br>
<br>There is no function to determine if a member belongs to a base class or current class eg:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">foo </span><span class="keyword">{
<br> function </span><span class="default">foo </span><span class="keyword">() { }
<br> function </span><span class="default">a </span><span class="keyword">() { }
<br>}
<br>
<br>class </span><span class="default">bar </span><span class="keyword">extends </span><span class="default">foo </span><span class="keyword">{
<br> function </span><span class="default">bar </span><span class="keyword">() { }
<br> function </span><span class="default">a </span><span class="keyword">() { }
<br>}
<br>
<br></span><span class="default">lala </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();
<br></span><span class="default">?&gt;
<br></span>------------------
<br>how do we find programmatically if member a now belongs to class Bar or Foo.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79941">  
  <a class="name">
  <strong class="user"><em>ahigerd at timeips dot com</em></strong></a><div class="date" title="2007-12-20 07:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79941">
<div class="phpcode"><code><span class="html">
To access an object member with an illegal character in the name, use this syntax:<br><br>$obj-&gt;{'illegal-property:name()'}<br><br>This is particularly relevant with the dynamically-generated classes used by, for instance, database objects and the SoapClient class.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43363">  
  <a class="name">
  <strong class="user"><em>ettinger at consultant dot com</em></strong></a><div class="date" title="2004-06-18 04:59"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43363">
<div class="phpcode"><code><span class="html">
Re: Looking for an uninstantiated class<br><br># Loads data from a table into a class object<br>class LFPDataFactory extends LFPObject {<br>&nbsp; &nbsp; &nbsp; &nbsp; var $object;<br>&nbsp; &nbsp; &nbsp; &nbsp; var $class;<br>&nbsp; &nbsp; &nbsp; &nbsp; var $table;<br>&nbsp; &nbsp; &nbsp; &nbsp; function LFPDataFactory($args) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;unpackArgs($args); // assigns locals from $args<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (in_array(strtolower($this-&gt;class), get_declared_classes())) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $this-&gt;object = new $this-&gt;class;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // assemble the columns in the table...<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // select their values and put them in our new object...<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else { trigger_error("Class ".$this-&gt;class." not found", E_USER_ERROR); }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>}<br>$r = new LFPDataFactory("class=LFPLayout,table=layout");<br>$new_obj = $r-&gt;object; // this is a LFPLayout object.<br>print_r($new_obj);<br><br>This class looks to see if the class exists, then instantiates it -- a declared class is not the same as an instantiated class. As long as LFPLayout exists somewhere in the scripts, get_declared_classes() will find it. Remember strtolower on compare, however.<br><br>Why would I do this? Because I have my class layouts the same as their respective tables; the factory then selects the data (making sure that the variables match) and plugs in the data. (I've left out the actual code to do the selection/insertion).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50524">  
  <a class="name">
  <strong class="user"><em>http://sc.tri-bit.com/ StoneCypher</em></strong></a><div class="date" title="2005-03-02 10:25"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50524">
<div class="phpcode"><code><span class="html">
to covertka at muohio dot edu and pillepop2003 at yahoo dot de:<br><br>There's a much easier solution to getting a class' name for working with a factory function.&nbsp; Let's assume you're doing something like this:<br><br><span class="default">&lt;?php<br><br>&nbsp; </span><span class="keyword">function </span><span class="default">FactoryFunction</span><span class="keyword">(</span><span class="default">$whatever</span><span class="keyword">, </span><span class="default">$instancedata</span><span class="keyword">) {<br><br>&nbsp; &nbsp; switch (</span><span class="default">$whatever</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; case </span><span class="string">'stuff'&nbsp; &nbsp; &nbsp; </span><span class="keyword">: return new </span><span class="default">Stuff</span><span class="keyword">(</span><span class="default">$instancedata</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; case </span><span class="string">'otherstuff' </span><span class="keyword">: return new </span><span class="default">Otherstuff</span><span class="keyword">(</span><span class="default">$instancedata</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>Now, consider the named parameter idiom and remember that PHP uses hashes for everything; as a result make the following changes:<br><br><span class="default">&lt;?php<br><br>&nbsp; </span><span class="keyword">function </span><span class="default">FactoryFunction</span><span class="keyword">(</span><span class="default">$whatever</span><span class="keyword">, </span><span class="default">$instancedata</span><span class="keyword">) {<br><br>&nbsp; &nbsp; switch (</span><span class="default">$whatever</span><span class="keyword">) {<br><br>&nbsp; &nbsp; &nbsp; case </span><span class="string">'stuff'&nbsp; &nbsp; &nbsp; </span><span class="keyword">: return array(</span><span class="string">'typeis'</span><span class="keyword">=&gt;</span><span class="string">'stuff'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; </span><span class="string">'instance'</span><span class="keyword">=&gt;new </span><span class="default">Stuff</span><span class="keyword">(</span><span class="default">$instancedata</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; case </span><span class="string">'otherstuff' </span><span class="keyword">: return array(</span><span class="string">'typeis'</span><span class="keyword">=&gt;</span><span class="string">'otherstuff'</span><span class="keyword">, </span><span class="string">'instance'</span><span class="keyword">=&gt;new </span><span class="default">Otherstuff</span><span class="keyword">(</span><span class="default">$instancedata</span><span class="keyword">));<br><br>&nbsp; &nbsp; }<br><br>&nbsp; }<br><br></span><span class="default">?&gt;<br></span><br>Nice 'n simple.&nbsp; It seems that what the original poster wanted was something like C++ static data members; unfortunately as PHP4 has no static variables at all, there would need to be significant language change to support static-like behavior.&nbsp; If you move to PHP5, the static keyword solves your problem cleanly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48641">  
  <a class="name">
  <strong class="user"><em>covertka at muohio dot edu</em></strong></a><div class="date" title="2005-01-02 05:27"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48641">
<div class="phpcode"><code><span class="html">
To pillepop2003 at yahoo dot de:<br><br>I have the same issue.&nbsp; I have a base class that manages database tasks for a number of child classes.&nbsp; One of the functions in the base class is a find() method that returns instances of the child classes.&nbsp; Since find() is usually called as a static method, it needs to know the name of the child class.&nbsp; As you've found, this appears to be impossible to get in an easy fashion.<br><br>The only way I've found to get the child class name is to use the debug_traceback() function.&nbsp; This requires me to have a find() method in every child class, but it does work.<br><br>Here's an example:<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">require_once(</span><span class="string">"Application.php"</span><span class="keyword">);<br><br>&nbsp; class </span><span class="default">parentClass </span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">find</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$className </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; foreach (</span><span class="default">debug_backtrace</span><span class="keyword">() as </span><span class="default">$bt</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$bt</span><span class="keyword">[</span><span class="string">'function'</span><span class="keyword">] == </span><span class="default">__FUNCTION__</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$className </span><span class="keyword">= </span><span class="default">$bt</span><span class="keyword">[</span><span class="string">'class'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; </span><span class="comment">// here should be some code to find the proper id, let's assume it was id 1<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$id </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; return new </span><span class="default">$className</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; <br>&nbsp; class </span><span class="default">foo </span><span class="keyword">extends </span><span class="default">parentClass </span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">id</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; function </span><span class="default">find</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; <br>&nbsp; class </span><span class="default">bar </span><span class="keyword">extends </span><span class="default">parentClass </span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$id</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">id </span><span class="keyword">= </span><span class="default">id</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">find</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; <br>&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">foo</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">();<br>&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Type for \$a: %s&lt;br/&gt;\n"</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br>&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">bar</span><span class="keyword">::</span><span class="default">find</span><span class="keyword">();<br>&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">"Type for \$b: %s&lt;br/&gt;\n"</span><span class="keyword">, </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44388">  
  <a class="name">
  <strong class="user"><em>iparanoid at gmx dot de</em></strong></a><div class="date" title="2004-08-04 11:17"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44388">
<div class="phpcode"><code><span class="html">
To pillepop2003 at yahoo dot de:<br><br>It seems to me if there really is no nice way to get the class name in an un-instanciated class, there is a workaround in PHP5 though using static/class variables.<br><br>Example: <br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">myFoo <br></span><span class="keyword">{<br>&nbsp; &nbsp; static </span><span class="default">$__ClassName </span><span class="keyword">= </span><span class="default">__CLASS__</span><span class="keyword">;<br><br>&nbsp; &nbsp; static function </span><span class="default">getClassName</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">myFoo</span><span class="keyword">::</span><span class="default">$__ClassName</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>};<br><br>class </span><span class="default">myFooExtended </span><span class="keyword">extends </span><span class="default">myFoo<br></span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">__construct</span><span class="keyword">() <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">myFooExtended</span><span class="keyword">::</span><span class="default">$__ClassName </span><span class="keyword">= </span><span class="default">__CLASS__</span><span class="keyword">;<br>&nbsp; &nbsp; };<br>};<br><br></span><span class="default">?&gt;<br></span><br>However, you'll need to have at least instanciated an object of the class myFooExtended before calling getClassName or introduce some other initialization (the class variable will need to be set at some point to __CLASS__ in the sub-class).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43837">  
  <a class="name">
  <strong class="user"><em>greg at doutromundo dot com</em></strong></a><div class="date" title="2004-07-05 07:58"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43837">
<div class="phpcode"><code><span class="html">
As programmers, you're probably more organized than me, but, I do try and maintain some order in my classes and codes and separate them in "packages" as in java.<br>This helped me keep them organized but caused havok when trying to use them, so what I did was to create a class that handles the loading of classes (which I instanciate in all pages) along with my error handling class all bundled up. This way, I can load my classes with a command similar to <br>$baseClass-&gt;loadClass("package","className"[,"constructor"]);<br><br>the function responsible for this has some checking to see if they are loaded and stuff like that...<br><br>function loadClass($packageName,$className,$constructor=""){<br>&nbsp; // if you dont have a constructor declare any function inside<br>&nbsp; // the class<br>&nbsp; if ($constructor==""){<br>&nbsp; &nbsp; $constructor=$className;<br>&nbsp; }<br>&nbsp; if(!is_callable(array($className,$constructor))){<br>&nbsp; &nbsp; if (defined("CLASS_DIR")){<br>&nbsp; &nbsp; &nbsp; $pkg = CLASS_DIR.$packageName."/";<br>&nbsp; &nbsp; &nbsp; &nbsp; if (is_dir($pkg)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // we have a directory with the package name<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $cls = $pkg.$className.".class.php";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_file($cls)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // we have a file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include_once($cls);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die("Class &lt;b&gt;$className&lt;/b&gt; could not be found in package &lt;b&gt;$packageName&lt;/b&gt; , please check your instalation");<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; die("Package &lt;b&gt;$packageName&lt;/b&gt; could not be found, please check your instalation");<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br>Just remember to define CLASS_DIR as the physical path for the directories where you packages are...<br><br>Hope this comes in handy...<br><br>Here's an example of a diretory strucutre...<br>/var/www/classes/&nbsp;&nbsp; &lt;- this would be CLASS_DIR<br>in there I have:<br>package1/<br>&nbsp; &nbsp;&nbsp; name.class.php<br>&nbsp; &nbsp;&nbsp; name2.class.php<br>....<br><br>The loadClass would look like: loadClass("package1","name"); <br><br>Cute and easy</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25372">  
  <a class="name">
  <strong class="user"><em>asommer*at*as-media.com</em></strong></a><div class="date" title="2002-09-20 02:52"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25372">
<div class="phpcode"><code><span class="html">
Something I found out just now that comes in very handy for my current project:<br><br>it is possible to have a class override itself in any method ( including the constructor ) like this:<br><br>class a {<br><br>..function ha ( ) {<br>....if ( $some_expr ) {<br>......$this = new b;<br>......return $this-&gt;ha ( );<br>....}<br>....return $something;<br>..}<br><br>}<br><br>in this case assuming that class b is already defined and also has the method ha ( )<br><br>note that the code after the statement to override itself is still executed but now applies to the new class<br><br>i did not find any information about this behaviour anywhere, so i have no clue wether this is supposed to be like this and if it might change... but it opens a few possibilities in flexible scripting!!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25215">  
  <a class="name">
  <strong class="user"><em>einhverfr at not-this-host dot hotmail dot com</em></strong></a><div class="date" title="2002-09-14 12:35"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25215">
<div class="phpcode"><code><span class="html">
You may find it helpful in complex projects to have namespaces for your classes, and arrange these in a hierarchical manner.&nbsp;&nbsp; A simple way to do this is to use the filesystem to order your hierarchies and then define a function like this:<br><br>function use_namespace($namespace){<br><br>require_once("namespaces/$namespace.obj.php");<br><br>}<br><br>(lack of indentation due to HTML UI for this page)<br>This requires that all your object libraries end in .obj.php (which I use) but you can modfy it to suit your needs.&nbsp; To call it you could, for exmaple call:<br><br>use_namespace("example");<br>or if foo is part of example you can call:<br>use_namespace("example/foo");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="24491">  
  <a class="name">
  <strong class="user"><em>justin at quadmyre dot com</em></strong></a><div class="date" title="2002-08-19 09:38"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom24491">
<div class="phpcode"><code><span class="html">
If you want to be able to call an instance of a class from within another class, all you need to do is store a reference to the external class as a property of the local class (can use the constructor to pass this to the class), then call the external method like this:<br><br>$this-&gt;classref-&gt;memberfunction($vars);<br><br>or if the double '-&gt;' is too freaky for you, how about:<br><br>$ref=&amp;$this-&gt;classref;<br>$ref-&gt;memberfunction($vars);<br><br>This is handy if you write something like a general SQL class that you want member functions in other classes to be able to use, but want to keep namespaces separate. Hope that helps someone.<br><br>Justin<br><br>Example:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">class1 </span><span class="keyword">{<br>&nbsp; &nbsp; function </span><span class="default">test</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$var </span><span class="keyword">+ </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br>class </span><span class="default">class2</span><span class="keyword">{<br>&nbsp; &nbsp; var </span><span class="default">$ref_to_class</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">; </span><span class="comment"># to be pointer to other class<br><br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">class1</span><span class="keyword">(&amp;</span><span class="default">$ref</span><span class="keyword">){ </span><span class="comment">#constructor<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ref_to_class</span><span class="keyword">=</span><span class="default">$ref</span><span class="keyword">; </span><span class="comment">#save ref to other class as property of this class<br>&nbsp; &nbsp; </span><span class="keyword">}<br><br>&nbsp; &nbsp; function </span><span class="default">test2</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$val </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ref_to_class</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">); </span><span class="comment">#call other class using ref<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$obj1</span><span class="keyword">=new </span><span class="default">class1</span><span class="keyword">;<br></span><span class="comment"># obj1 is instantiated.<br></span><span class="default">$obj2</span><span class="keyword">=new </span><span class="default">class2</span><span class="keyword">(</span><span class="default">$obj1</span><span class="keyword">);<br></span><span class="comment"># pass ref to obj1 when instantiating obj2<br><br></span><span class="default">$var</span><span class="keyword">=</span><span class="default">5</span><span class="keyword">;<br></span><span class="default">$result</span><span class="keyword">=</span><span class="default">obj2</span><span class="keyword">-&gt;</span><span class="default">test2</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br></span><span class="comment"># call method in obj2, which calls method in obj1<br></span><span class="keyword">echo (</span><span class="default">$result</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55423">  
  <a class="name">
  <strong class="user"><em>ia [AT] zoznam [DOT] sk</em></strong></a><div class="date" title="2005-08-02 10:55"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55423">
<div class="phpcode"><code><span class="html">
as for zabmilenko's solution:
<br>wouldn't it be better to create it this way?
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">// The base class for all db classes
<br></span><span class="keyword">class </span><span class="default">DB </span><span class="keyword">{
<br> protected </span><span class="default">$connectId</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">// Class for MySQL, which extends base class
<br></span><span class="keyword">class </span><span class="default">MySQL </span><span class="keyword">extends </span><span class="default">DB </span><span class="keyword">{
<br> function </span><span class="default">connect </span><span class="keyword">() {
<br>&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connectId </span><span class="keyword">= </span><span class="default">mysql_connect </span><span class="keyword">(...); 
<br> }
<br>}
<br>
<br></span><span class="comment">// Class for PostgreSQL, which extends base class
<br></span><span class="keyword">class </span><span class="default">pgSQL </span><span class="keyword">extends </span><span class="default">DB </span><span class="keyword">{
<br> function </span><span class="default">connect </span><span class="keyword">() {
<br>&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">connectId </span><span class="keyword">= </span><span class="default">pg_connect </span><span class="keyword">(...); 
<br> }
<br>}
<br>
<br></span><span class="comment">// and then call constructor like this:
<br></span><span class="default">$dbName </span><span class="keyword">= </span><span class="string">"MySQL"</span><span class="keyword">;
<br></span><span class="default">$db </span><span class="keyword">= new </span><span class="default">$dbName </span><span class="keyword">( ... );
<br></span><span class="comment">// ... which creates an object of class MySQL
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101697">  
  <a class="name">
  <strong class="user"><em>Skydev</em></strong></a><div class="date" title="2011-01-05 11:40"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101697">
<div class="phpcode"><code><span class="html">
A small function that allows finding all references to the object. Written in 3 minutes and may be buggy (for ex pass object as reference in some places?)<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">find_ref_obj</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">,</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">],</span><span class="default">true</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">][]=</span><span class="default">$obj</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach ((array)</span><span class="default">$obj </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$v </span><span class="keyword">=== </span><span class="default">$object</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[] = </span><span class="default">$path </span><span class="keyword">. </span><span class="string">"-&gt;</span><span class="default">$k</span><span class="string">"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_obj</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$path </span><span class="keyword">. </span><span class="string">"-&gt;</span><span class="default">$k</span><span class="string">"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_arr</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$path </span><span class="keyword">. </span><span class="string">"-&gt;</span><span class="default">$k</span><span class="string">"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (empty(</span><span class="default">$r</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;<br>}<br>function </span><span class="default">find_ref_arr</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">],</span><span class="default">true</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">][]=</span><span class="default">$arr</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br>&nbsp; &nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$v </span><span class="keyword">=== </span><span class="default">$object</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[] = </span><span class="default">$path </span><span class="keyword">. </span><span class="string">"['</span><span class="default">$k</span><span class="string">']"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_obj</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$path </span><span class="keyword">. </span><span class="string">"['</span><span class="default">$k</span><span class="string">']"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_arr</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$path </span><span class="keyword">. </span><span class="string">"['</span><span class="default">$k</span><span class="string">']"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (empty(</span><span class="default">$r</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;<br>}<br>function </span><span class="default">find_references</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">]=array();<br>&nbsp; &nbsp; foreach (</span><span class="default">$GLOBALS </span><span class="keyword">as </span><span class="default">$n </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) <br>&nbsp; &nbsp; if (</span><span class="default">$n</span><span class="keyword">!=</span><span class="string">'__REF_CHECKED'</span><span class="keyword">)<br>&nbsp; &nbsp; if (</span><span class="default">$n</span><span class="keyword">!=</span><span class="string">'GLOBALS'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$v </span><span class="keyword">=== </span><span class="default">$object</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[]=</span><span class="default">$n</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_obj</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$n</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">find_ref_arr</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$n</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$t</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$t</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }&nbsp; &nbsp; <br>&nbsp; &nbsp; unset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="string">'__REF_CHECKED'</span><span class="keyword">]);<br>&nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">;<br>}<br><br>function </span><span class="default">find_refs</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">,</span><span class="default">find_references</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98694">  
  <a class="name">
  <strong class="user"><em>Dennis</em></strong></a><div class="date" title="2010-07-01 04:04"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98694">
<div class="phpcode"><code><span class="html">
We have an array with many objects in a style like<br><br><span class="default">&lt;?php<br><br>$step </span><span class="keyword">= new </span><span class="default">StepModel</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// if the StepModel id is "1"<br></span><span class="default">$demand </span><span class="keyword">= </span><span class="default">$step</span><span class="keyword">-&gt;</span><span class="default">getDemand</span><span class="keyword">(); </span><span class="comment">// returns DemandModel<br></span><span class="default">$step2 </span><span class="keyword">= </span><span class="default">$demand</span><span class="keyword">-&gt;</span><span class="default">getCustomer</span><span class="keyword">(); </span><span class="comment">// returns StepModel<br></span><span class="default">$demand2 </span><span class="keyword">= </span><span class="default">$step2</span><span class="keyword">-&gt;</span><span class="default">getDemand</span><span class="keyword">(); </span><span class="comment">// returns DemandModel<br><br>// [ ... ]<br><br></span><span class="default">?&gt;<br></span><br>$step and $step2 can be the same objects. So we have an recursive array. Now we need to know if $step == $step2 or $step === $step2. In other words: We need to know the php internal resource ids.<br><br>Because there is no function in php api, we made the following function.<br><br>Be careful: In our case, all objects have as first attribute ["id":protected]. If your objects are different from this, you need to edit $pattern.<br><br>Warning: function is very slow and should only be called if it's necessary for debugging reasons:<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * returns resource- and object-ids of all objects in an array<br> * <br> * @param array $array<br> * @return array<br> */<br></span><span class="keyword">function </span><span class="default">getObjectInformation</span><span class="keyword">(Array </span><span class="default">$array</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// start output-buffering<br>&nbsp; &nbsp; </span><span class="default">ob_start</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// create an var_dump of $array<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// save the dump in var $dump<br>&nbsp; &nbsp; </span><span class="default">$dump </span><span class="keyword">= </span><span class="default">ob_get_contents</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// clean the output-buffer<br>&nbsp; &nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// delete white-spaces<br>&nbsp; &nbsp; </span><span class="default">$dump </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$dump</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// define the regex-pattern<br>&nbsp; &nbsp; // in our case, all objects look like this:<br>&nbsp; &nbsp; //<br>&nbsp; &nbsp; // object(ClassName)#1(1){<br>&nbsp; &nbsp; // ["id":protected]=&gt;<br>&nbsp; &nbsp; // string(1)"1"<br>&nbsp; &nbsp; </span><span class="default">$pattern&nbsp; </span><span class="keyword">= </span><span class="string">'/object\(([a-zA-Z0-9]+)\)#([0-9]+)\([0-9]+\){\\n'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">.= </span><span class="string">'\["id":protected\]=&gt;\\n'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">.= </span><span class="string">'string\([0-9]+\)"([v]?[0-9]+)"/im'</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// search for all matches<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$dump</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// sort all mathes by class name, object id and then resource id<br>&nbsp; &nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_STRING</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">], </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">SORT_ASC</span><span class="keyword">, </span><span class="default">SORT_NUMERIC</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// cache the last match<br>&nbsp; &nbsp; </span><span class="default">$lastMatch </span><span class="keyword">= array();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// the return value<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// loop through the matches<br>&nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i </span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check if the current match was not visited before<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$lastMatch</span><span class="keyword">) ||<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] ||<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] ||<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">] != </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// save the match in return value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">, array(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// save match in last match cache<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastMatch</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// return all matches<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$return</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>I know, it's not that elegant but I hope it's useful for a few people.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54194">  
  <a class="name">
  <strong class="user"><em>zabmilenko at hotmail dot com</em></strong></a><div class="date" title="2005-06-27 12:08"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54194">
<div class="phpcode"><code><span class="html">
((PHP5))<br><br>I wanted to dynamically choose an extender for a class.&nbsp; This took awhile of playing with it but I came up with a solution.&nbsp; Note that I can't verify how safe it is, but it appears to work for me.&nbsp; Perhaps someone else can shed light on the details:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{ var </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"Class A\n"</span><span class="keyword">; }<br>class </span><span class="default">B </span><span class="keyword">{ var </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"Class B\n"</span><span class="keyword">; }<br><br></span><span class="comment">// Uncomment which extender you want.&nbsp; You can use variables as well.<br>// define('__EXTENDER__', 'A');<br>&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">'__EXTENDER__'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);<br><br></span><span class="comment">// Use eval to create a wrapper class.<br></span><span class="keyword">eval(</span><span class="string">'class EXTENDER extends '</span><span class="keyword">. </span><span class="default">__EXTENDER__ </span><span class="keyword">. </span><span class="string">' { }'</span><span class="keyword">);<br><br>class </span><span class="default">C </span><span class="keyword">extends </span><span class="default">EXTENDER<br></span><span class="keyword">{<br>&nbsp; function </span><span class="default">__construct</span><span class="keyword">()<br>&nbsp; {<br>&nbsp; &nbsp;&nbsp; echo </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">value</span><span class="keyword">;<br>&nbsp; }<br>}<br><br></span><span class="default">$t </span><span class="keyword">= new </span><span class="default">C</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>Outputs:&nbsp;&nbsp; Class B<br><br>Practical application:&nbsp; I have a database abstraction system that has individual classes for mysql, pgsql, et al.&nbsp; I want to be able to create a global db class that extends one of the individual db classes depending on the application configuration.<br><br>I know that there are probably much better ways of doing this but I haven't reached that level when it comes to classes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50578">  
  <a class="name">
  <strong class="user"><em>cjones</em></strong></a><div class="date" title="2005-03-03 01:27"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50578">
<div class="phpcode"><code><span class="html">
If anyone is interested in looking for a way to dynamically load existing objects into a class, here is what I found very useful.<br><br>//---------------------------------------------------------<br>// Dynamically load External Objects into a class<br><br>&nbsp; function objRef ( &amp;$obj ) {&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; eval("\$this-&gt;obj_".get_class($obj)." = \$obj;"); <br>&nbsp; }<br>//---------------------------------------------------------<br>// Reference by using: $this-&gt;obj_[object Name]-&gt;[var|f{}]<br><br>Example:<br><br>class date {&nbsp; function date ( ) { $this-&gt;date = "March 3rd"; } }<br>class time {&nbsp; function time ( ) { $this-&gt;time = "12:30pm"; } }<br><br>class show {<br>&nbsp; &nbsp; function objRef ( &amp;$obj ){<br>&nbsp; &nbsp; &nbsp; &nbsp; eval("\$this-&gt;obj_".get_class($obj)." = \$obj;");<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; function test ( $var ){<br>&nbsp; &nbsp; &nbsp;&nbsp; echo "$var".$this-&gt;obj_date-&gt;date." @ ".$this-&gt;obj_time-&gt;time;<br>&nbsp;&nbsp; }<br>}<br><br>$date = new date;<br>$time = new time;<br>$show = new show;<br>&nbsp; &nbsp; $show-&gt;objRef($date);<br>&nbsp; &nbsp; $show-&gt;objRef($time);<br>&nbsp; &nbsp; $show-&gt;test("Time Now =&gt; ");<br><br>// Output: Time Now =&gt; March 3rd @ 12:30pm<br><br>I found the prefix 'obj_' before the class name useful because it helped me to automatically identify external object references when scanning through my scripts. You can omit this if you want. Hope this helps someone.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/ref.classobj.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:51:49 GMT -->


</body></html>