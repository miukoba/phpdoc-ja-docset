<html><!-- Mirrored from php.net/manual/en/regexp.reference.assertions.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:07:26 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Assertions</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="regexp.reference.assertions.html">
 <link rel="shorturl" href="regexp.reference.assertions.html">
 <link rel="alternate" href="regexp.reference.assertions.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="reference.pcre.pattern.syntax.html">
 <link rel="prev" href="regexp.reference.back-references.html">
 <link rel="next" href="regexp.reference.onlyonce.html">

 <link rel="alternate" href="regexp.reference.assertions.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/regexp.reference.assertions.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/regexp.reference.assertions.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/regexp.reference.assertions.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/regexp.reference.assertions.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/regexp.reference.assertions.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/regexp.reference.assertions.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/regexp.reference.assertions.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/regexp.reference.assertions.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/regexp.reference.assertions.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/regexp.reference.assertions.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.pcre.html">PCRE</a></li>      <li><a href="pcre.pattern.html">PCRE Patterns</a></li>      <li><a href="reference.pcre.pattern.syntax.html">PCRE regex syntax</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="regexp.reference.assertions" class="section">
  <h2 class="title">Assertions</h2>
  <p class="para">
   An assertion is  a  test  on  the  characters  following  or
   preceding  the current matching point that does not actually
   consume any characters. The simple assertions coded  as  \b,
   \B,  \A,  \Z,  \z, ^ and $ are described above. More complicated
   assertions are coded as  subpatterns.  There  are  two
   kinds:  those that <em class="emphasis">look ahead</em> of the current position in the
   subject string, and those that <em class="emphasis">look behind</em> it.
  </p>
  <p class="para">
   An assertion subpattern is matched in the normal way, except
   that  it  does not cause the current matching position to be
   changed. <em class="emphasis">Lookahead</em> assertions start with  (?=  for  positive
   assertions and (?! for negative assertions. For example,
   
   <em>\w+(?=;)</em>
   
   matches a word followed by a semicolon, but does not include
   the semicolon in the match, and
   
   <em>foo(?!bar)</em>
   
   matches any occurrence of "foo"  that  is  not  followed  by
   "bar". Note that the apparently similar pattern
   
   <em>(?!foo)bar</em>
   
   does not find an occurrence of "bar"  that  is  preceded  by
   something other than "foo"; it finds any occurrence of "bar"
   whatsoever, because the assertion  (?!foo)  is  always  <strong><code>TRUE</code></strong>
   when  the  next  three  characters  are  "bar". A lookbehind
   assertion is needed to achieve this effect.
  </p>
  <p class="para">
   <em class="emphasis">Lookbehind</em> assertions start with (?&lt;=  for  positive  assertions
   and (?&lt;! for negative assertions. For example,
   
   <em>(?&lt;!foo)bar</em>
   
   does find an occurrence of "bar" that  is  not  preceded  by
   "foo". The contents of a lookbehind assertion are restricted
   such that all the strings  it  matches  must  have  a  fixed
   length.  However, if there are several alternatives, they do
   not all have to have the same fixed length. Thus
   
   <em>(?&lt;=bullock|donkey)</em>
   
   is permitted, but
   
   <em>(?&lt;!dogs?|cats?)</em>
   
   causes an error at compile time. Branches  that  match  different
   length strings are permitted only at the top level of
   a lookbehind assertion. This is an extension  compared  with
   Perl  5.005,  which  requires all branches to match the same
   length of string. An assertion such as
   
   <em>(?&lt;=ab(c|de))</em>
   
   is not permitted, because its single  top-level  branch  can
   match two different lengths, but it is acceptable if rewritten
   to use two top-level branches:
   
   <em>(?&lt;=abc|abde)</em>
   
   The implementation of lookbehind  assertions  is,  for  each
   alternative,  to  temporarily move the current position back
   by the fixed width and then  try  to  match.  If  there  are
   insufficient  characters  before  the  current position, the
   match is deemed to fail.  Lookbehinds  in  conjunction  with
   once-only  subpatterns can be particularly useful for matching
   at the ends of strings; an example is given at  the  end
   of the section on once-only subpatterns.
  </p>
  <p class="para">
   Several assertions (of any sort) may  occur  in  succession.
   For example,
   
   <em>(?&lt;=\d{3})(?&lt;!999)foo</em>
   
   matches "foo" preceded by three digits that are  not  "999".
   Notice  that each of the assertions is applied independently
   at the same point in the subject string. First  there  is  a
   check  that  the  previous  three characters are all digits,
   then there is a check that the same three characters are not
   "999".   This  pattern  does not match "foo" preceded by six
   characters, the first of which are digits and the last three
   of  which  are  not  "999".  For  example,  it doesn't match
   "123abcfoo". A pattern to do that is
   
   <em>(?&lt;=\d{3}...)(?&lt;!999)foo</em>
  </p>
  <p class="para">
   This time the first assertion looks  at  the  preceding  six
   characters,  checking  that  the first three are digits, and
   then the second assertion checks that  the  preceding  three
   characters are not "999".
  </p>
  <p class="para">
   Assertions can be nested in any combination. For example,
   
   <em>(?&lt;=(?&lt;!foo)bar)baz</em>
   
   matches an occurrence of "baz" that  is  preceded  by  "bar"
   which in turn is not preceded by "foo", while
   
   <em>(?&lt;=\d{3}...(?&lt;!999))foo</em>
   
   is another pattern which matches  "foo"  preceded  by  three
   digits and any three characters that are not "999".
  </p>
  <p class="para">
   Assertion subpatterns are not capturing subpatterns, and may
   not  be  repeated,  because  it makes no sense to assert the
   same thing several times. If any kind of assertion  contains
   capturing  subpatterns  within it, these are counted for the
   purposes of numbering the capturing subpatterns in the whole
   pattern.   However,  substring capturing is carried out only
   for positive assertions, because it does not make sense  for
   negative assertions.
  </p>
  <p class="para">
   Assertions count towards the maximum  of  200  parenthesized
   subpatterns.
  </p>
 </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="112300">  
  <a class="name">
  <strong class="user"><em>daevid at daevid dot com</em></strong></a><div class="date" title="2013-05-29 09:02"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112300">
<div class="phpcode"><code><span class="html">
removes // comments but NOT the stuff after <a rel="nofollow" target="_blank">http://</a><br><br>$sBlob = preg_replace("@\s*(?&lt;!:)//.*?$@m",'',$sBlob);<br><br>Although, as Sean Greenslade pointed out, it will fail in this EDGE case since the comments are within quotes, but who does that anyways?<br><br>"Lol slashes // are // fun";</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/regexp.reference.assertions.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:07:27 GMT -->


</body></html>