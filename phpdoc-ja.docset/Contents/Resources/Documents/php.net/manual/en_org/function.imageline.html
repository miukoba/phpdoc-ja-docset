<html><!-- Mirrored from php.net/manual/en/function.imageline.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:55 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>imageline</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.imageline.html">
 <link rel="shorturl" href="http://php.net/imageline">
 <link rel="alternate" href="http://php.net/imageline" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.image.html">
 <link rel="prev" href="function.imagelayereffect.html">
 <link rel="next" href="function.imageloadfont.html">

 <link rel="alternate" href="function.imageline.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.imageline.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.imageline.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.imageline.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.imageline.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.imageline.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.imageline.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.imageline.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.imageline.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.imageline.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.imageline.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.utilspec.image.html">Image Processing and Generation</a></li>      <li><a href="book.image.html">GD</a></li>      <li><a href="ref.image.html">GD and Image Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.imageline" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">imageline</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">imageline</span> â€” <span class="dc-title">Draw a line</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.imageline-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>imageline</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$image</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$x1</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$y1</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$x2</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$y2</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$color</code></span>
   )</div>

  <p class="para rdfs-comment">
   Draws a line between the two given points.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.imageline-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    <dt>
<code class="parameter">
image</code></dt>
<dd>
<p class="para">An image resource, returned by one of the image creation functions,
such as <span class="function"><a href="function.imagecreatetruecolor.html" class="function">imagecreatetruecolor()</a></span>.</p></dd>

    
     <dt>
<code class="parameter">x1</code></dt>

     <dd>

      <p class="para">
       x-coordinate for first point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">y1</code></dt>

     <dd>

      <p class="para">
       y-coordinate for first point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">x2</code></dt>

     <dd>

      <p class="para">
       x-coordinate for second point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">y2</code></dt>

     <dd>

      <p class="para">
       y-coordinate for second point.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">color</code></dt>

     <dd>

      <p class="para">
       The line color. A color identifier created with 
       <span class="function"><a href="function.imagecolorallocate.html" class="function">imagecolorallocate()</a></span>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.imageline-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.imageline-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-3353">
    <p><strong>Example #1 Drawing a thick line</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">imagelinethick</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;this&nbsp;way&nbsp;it&nbsp;works&nbsp;well&nbsp;only&nbsp;for&nbsp;orthogonal&nbsp;lines<br>&nbsp;&nbsp;&nbsp;&nbsp;imagesetthickness($image,&nbsp;$thick);<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;imageline($image,&nbsp;$x1,&nbsp;$y1,&nbsp;$x2,&nbsp;$y2,&nbsp;$color);<br>&nbsp;&nbsp;&nbsp;&nbsp;*/<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imageline</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$thick&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">||&nbsp;</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imagefilledrectangle</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">min</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;-&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$x2</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">max</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$y2</span><span style="color: #007700">)&nbsp;+&nbsp;</span><span style="color: #0000BB">$t</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&nbsp;(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$y1</span><span style="color: #007700">)&nbsp;/&nbsp;(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">-&nbsp;</span><span style="color: #0000BB">$x1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//y&nbsp;=&nbsp;kx&nbsp;+&nbsp;q<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">sqrt</span><span style="color: #007700">(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">pow</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$points&nbsp;</span><span style="color: #007700">=&nbsp;array(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y1&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$x2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">-</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">$y2&nbsp;</span><span style="color: #007700">+&nbsp;(</span><span style="color: #0000BB">1</span><span style="color: #007700">+</span><span style="color: #0000BB">$k</span><span style="color: #007700">)*</span><span style="color: #0000BB">$a</span><span style="color: #007700">),<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">imagefilledpolygon</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$points</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">imagepolygon</span><span style="color: #007700">(</span><span style="color: #0000BB">$image</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$points</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.imageline-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.imagecreatetruecolor.html" class="function" rel="rdfs-seeAlso">imagecreatetruecolor()</a> - Create a new true color image</span></li>
    <li class="member"><span class="function"><a href="function.imagecolorallocate.html" class="function" rel="rdfs-seeAlso">imagecolorallocate()</a> - Allocate a color for an image</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="19403">  
  <a class="name">
  <strong class="user"><em>kramesch_NOSPAM_ at _nospam_idsolutions dot at</em></strong></a><div class="date" title="2002-02-26 01:44"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom19403">
<div class="phpcode"><code><span class="html">
Here is a simple code to draw a line with an arbitrary stroke. The parameter aStroke is treated as a cyclic boolean array where true equals "set a point"<br>e.g. $aDotStroke = array(true,false);<br><br>function ImageStrokeLine($im,$x1,$y1,$x2,$y2,$farbe, $aStroke)<br>&nbsp; {<br>&nbsp; &nbsp; $deltax = abs($x2 - $x1);&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; $deltay = abs($y2 - $y1);&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; $x = $x1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; $y = $y1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if ($x2 &gt;= $x1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $xinc1 = 1;<br>&nbsp; &nbsp; &nbsp; $xinc2 = 1;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $xinc1 = -1;<br>&nbsp; &nbsp; &nbsp; $xinc2 = -1;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if ($y2 &gt;= $y1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $yinc1 = 1;<br>&nbsp; &nbsp; &nbsp; $yinc2 = 1;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $yinc1 = -1;<br>&nbsp; &nbsp; &nbsp; $yinc2 = -1;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if ($deltax &gt;= $deltay)&nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $xinc1 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; $yinc2 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; $den = $deltax;<br>&nbsp; &nbsp; &nbsp; $num = $deltax / 2;<br>&nbsp; &nbsp; &nbsp; $numadd = $deltay;<br>&nbsp; &nbsp; &nbsp; $numpixels = $deltax; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; $xinc2 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; $yinc1 = 0;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; $den = $deltay;<br>&nbsp; &nbsp; &nbsp; $num = $deltay / 2;<br>&nbsp; &nbsp; &nbsp; $numadd = $deltax;<br>&nbsp; &nbsp; &nbsp; $numpixels = $deltay; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; for ($curpixel = 0; $curpixel &lt;= $numpixels; $curpixel++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; if ($iStrokeCount &gt;= count($aStroke))<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $iStrokeCount = 0;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; if ($aStroke[$iStrokeCount++]) <br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; ImageSetPixel($im,$x, $y,$farbe);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; $num += $numadd;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; if ($num &gt;= $den)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $num -= $den;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $x += $xinc1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $y += $yinc1;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; $x += $xinc2;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; $y += $yinc2;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; }<br>&nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107923">  
  <a class="name">
  <strong class="user"><em>Nils</em></strong></a><div class="date" title="2012-03-15 12:57"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107923">
<div class="phpcode"><code><span class="html">
A quick function using imageline that I wrote so i could specify a starting point, angle and length of vector.<br><br>Thought other people might find this useful.<br><br><span class="default">&lt;?php<br>$size </span><span class="keyword">= </span><span class="default">600</span><span class="keyword">;<br></span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">);<br><br></span><span class="default">$white </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br></span><span class="default">$black </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br><br></span><span class="default">imagefilledrectangle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$white</span><span class="keyword">);<br><br>function </span><span class="default">Vector</span><span class="keyword">(</span><span class="default">$palette</span><span class="keyword">,</span><span class="default">$startx</span><span class="keyword">,</span><span class="default">$starty</span><span class="keyword">,</span><span class="default">$angle</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$colour</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$angle </span><span class="keyword">= </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$endx </span><span class="keyword">= </span><span class="default">$startx</span><span class="keyword">+</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">)*</span><span class="default">$length</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$endy </span><span class="keyword">= </span><span class="default">$starty</span><span class="keyword">-</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">)*</span><span class="default">$length</span><span class="keyword">;<br>&nbsp; &nbsp; return(</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$palette</span><span class="keyword">,</span><span class="default">$startx</span><span class="keyword">,</span><span class="default">$starty</span><span class="keyword">,</span><span class="default">$endx</span><span class="keyword">,</span><span class="default">$endy</span><span class="keyword">,</span><span class="default">$colour</span><span class="keyword">));<br>}<br><br></span><span class="default">Vector</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">,</span><span class="default">200</span><span class="keyword">,</span><span class="default">$black</span><span class="keyword">);<br><br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>For this script angles work in a anti-clockwise direction (modify + and - in function to change start of 0 degrees and also direction of angle calculated)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105038">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2011-07-24 09:44"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105038">
<div class="phpcode"><code><span class="html">
The most bold-line-functions i found have problems with lines in a certian direction (they draw smaller lines with some angles). To do a real bold line just use this function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">imageBoldLine</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">, </span><span class="default">$BoldNess</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">, </span><span class="default">$func</span><span class="keyword">=</span><span class="string">'imageLine'</span><span class="keyword">) 
<br>{
<br> </span><span class="default">$center </span><span class="keyword">= </span><span class="default">round</span><span class="keyword">(</span><span class="default">$BoldNess</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">);
<br> for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$BoldNess</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)
<br> {&nbsp; 
<br>&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">$center</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">; if(</span><span class="default">$a</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){</span><span class="default">$a </span><span class="keyword">-= </span><span class="default">$a</span><span class="keyword">;}
<br>&nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">$BoldNess</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">++)
<br>&nbsp; {
<br>&nbsp;&nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$center</span><span class="keyword">-</span><span class="default">$j</span><span class="keyword">; if(</span><span class="default">$b</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">){</span><span class="default">$b </span><span class="keyword">-= </span><span class="default">$b</span><span class="keyword">;}
<br>&nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">*</span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">*</span><span class="default">$b</span><span class="keyword">);
<br>&nbsp;&nbsp; if(</span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="default">$BoldNess</span><span class="keyword">)
<br>&nbsp;&nbsp; {
<br>&nbsp; &nbsp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">$j</span><span class="keyword">, </span><span class="default">$x2 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">+</span><span class="default">$j</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">);
<br>&nbsp;&nbsp; }
<br>&nbsp; }
<br> }&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94624">  
  <a class="name">
  <strong class="user"><em>sbm007 at gmail dot com</em></strong></a><div class="date" title="2009-11-15 03:17"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94624">
<div class="phpcode"><code><span class="html">
Here is a analog clock representation of the system time along with digits for hours and little dots for minutes/seconds:<br><br><span class="default">&lt;?php<br>$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">450</span><span class="keyword">, </span><span class="default">450</span><span class="keyword">);<br><br></span><span class="default">$white </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br></span><span class="default">$red </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br></span><span class="default">$black </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br></span><span class="default">$grey </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">, </span><span class="default">211</span><span class="keyword">);<br><br></span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$white</span><span class="keyword">);<br></span><span class="default">imagearc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br></span><span class="default">imagefilledarc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">, </span><span class="default">IMG_ARC_PIE</span><span class="keyword">);<br><br>for (</span><span class="default">$zz </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$zz </span><span class="keyword">&lt; </span><span class="default">60</span><span class="keyword">; </span><span class="default">$zz</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][] = </span><span class="default">175 </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$zz</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][] = </span><span class="default">175 </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$zz</span><span class="keyword">-</span><span class="default">10</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br>}<br><br>for (</span><span class="default">$zz </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$zz </span><span class="keyword">&lt; </span><span class="default">60</span><span class="keyword">; </span><span class="default">$zz</span><span class="keyword">++) {<br>&nbsp; &nbsp; if (</span><span class="default">$zz </span><span class="keyword">% </span><span class="default">5 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">] - </span><span class="default">4</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">] - </span><span class="default">6</span><span class="keyword">, (</span><span class="default">$zz</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagefilledarc</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'x'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">], </span><span class="default">$digitCoords</span><span class="keyword">[</span><span class="string">'y'</span><span class="keyword">][</span><span class="default">$zz</span><span class="keyword">], </span><span class="default">3</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$grey</span><span class="keyword">, </span><span class="default">IMG_ARC_PIE</span><span class="keyword">);<br>}<br><br></span><span class="default">$seconds </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">);<br></span><span class="default">$minutes </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">) + (</span><span class="default">$seconds</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);<br></span><span class="default">$hours </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h'</span><span class="keyword">) + (</span><span class="default">$minutes</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">);<br><br></span><span class="default">$r_sec </span><span class="keyword">= </span><span class="default">175</span><span class="keyword">;<br></span><span class="default">$r_min </span><span class="keyword">= </span><span class="default">175</span><span class="keyword">;<br></span><span class="default">$r_hr </span><span class="keyword">= </span><span class="default">125</span><span class="keyword">;<br><br></span><span class="default">$x_sec </span><span class="keyword">= </span><span class="default">$r_sec </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$seconds</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br></span><span class="default">$y_sec </span><span class="keyword">= </span><span class="default">$r_sec </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$seconds</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br><br></span><span class="default">$x_min </span><span class="keyword">= </span><span class="default">$r_min </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$minutes</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br></span><span class="default">$y_min </span><span class="keyword">= </span><span class="default">$r_min </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$minutes</span><span class="keyword">-</span><span class="default">15</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br><br></span><span class="default">$x_hr </span><span class="keyword">= </span><span class="default">$r_hr </span><span class="keyword">* </span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$hours</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">12</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br></span><span class="default">$y_hr </span><span class="keyword">= </span><span class="default">$r_hr </span><span class="keyword">* </span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">((</span><span class="default">$hours</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">) * (</span><span class="default">360</span><span class="keyword">/</span><span class="default">12</span><span class="keyword">))) + </span><span class="default">224</span><span class="keyword">;<br><br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_sec</span><span class="keyword">, </span><span class="default">$y_sec</span><span class="keyword">, </span><span class="default">$red</span><span class="keyword">);<br></span><span class="default">imagesetthickness</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_min</span><span class="keyword">, </span><span class="default">$y_min</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br></span><span class="default">imagesetthickness</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">, </span><span class="default">$x_hr</span><span class="keyword">, </span><span class="default">$y_hr</span><span class="keyword">, </span><span class="default">$black</span><span class="keyword">);<br><br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br><br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92168">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-07-12 01:16"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92168">
<div class="phpcode"><code><span class="html">
Here's another way of modifying likavcan's code to display filled arrows. This makes use of imagefilledpolygon(...) instead of recursive function calls.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">arrow</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength</span><span class="keyword">, </span><span class="default">$awidth</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$distance </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">pow</span><span class="keyword">(</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) + </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br><br>&nbsp; &nbsp; </span><span class="default">$dx </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ (</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dy </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ (</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$awidth </span><span class="keyword">/ </span><span class="default">$alength</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$x2o </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$dx</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$y2o </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dx</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$y3 </span><span class="keyword">= </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dy</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$x4 </span><span class="keyword">= </span><span class="default">$dx </span><span class="keyword">- </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$y4 </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$dx</span><span class="keyword">, </span><span class="default">$dy</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">imagefilledpolygon</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, array(</span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">), </span><span class="default">3</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89971">  
  <a class="name">
  <strong class="user"><em>ca dot ddy at gmx dot de</em></strong></a><div class="date" title="2009-03-31 05:17"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89971">
<div class="phpcode"><code><span class="html">
I've modified the Arrow function of likavcan.
<br>
<br>This arrowFunction draws the arrow filled :
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">arrow</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength</span><span class="keyword">, </span><span class="default">$awidth</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; if( </span><span class="default">$alength </span><span class="keyword">&gt; </span><span class="default">1 </span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">arrow</span><span class="keyword">( </span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$alength </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$awidth </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">, </span><span class="default">$color </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; </span><span class="default">$distance </span><span class="keyword">= </span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">pow</span><span class="keyword">(</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">) + </span><span class="default">pow</span><span class="keyword">(</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));
<br>
<br>&nbsp; &nbsp; </span><span class="default">$dx </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ (</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$dy </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ (</span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">) * </span><span class="default">$alength </span><span class="keyword">/ </span><span class="default">$distance</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">$awidth </span><span class="keyword">/ </span><span class="default">$alength</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$x2o </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$dx</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$y2o </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$y2</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dx</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$y3 </span><span class="keyword">= </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k </span><span class="keyword">+ </span><span class="default">$dy</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$x4 </span><span class="keyword">= </span><span class="default">$dx </span><span class="keyword">- </span><span class="default">$y2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$y4 </span><span class="keyword">= </span><span class="default">$dy </span><span class="keyword">- </span><span class="default">$x2o </span><span class="keyword">* </span><span class="default">$k</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$dx</span><span class="keyword">, </span><span class="default">$dy</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y3</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x4</span><span class="keyword">, </span><span class="default">$y4</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);
<br>
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87496">  
  <a class="name">
  <strong class="user"><em>keksnicoh</em></strong></a><div class="date" title="2008-12-07 12:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87496">
<div class="phpcode"><code><span class="html">
Little function I made to draw faaaaat lines...<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * imageBoldLine function<br> * this function allows you to draw faaaat lines.<br> *<br> * To keep the function a bit more flexible, it's possible to change the function which draw the lines<br> * @param resource $resource<br> * @param int $x1<br> * @param int $y1<br> * @param int $x2<br> * @param int $y2<br> * @param int $Color<br> * @param int $BoldNess (1 = thin, 2=bold, 1000 = extreme fat)<br> * @param string $func Functionname. Notice that the function must got the same signature.<br> * @return void<br> * @author Nicolas 'keksnicoh' Heimann &lt;www.salamipla.net&gt;<br> * @date nov08<br> * &lt;code&gt;&lt;?php<br> * imageBoldLine($res, 0, 0, 100, 100, $col, 5);<br> * ?&gt;&lt;/code&gt;<br> */<br></span><span class="keyword">function </span><span class="default">imageBoldLine</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">, </span><span class="default">$BoldNess</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">, </span><span class="default">$func</span><span class="keyword">=</span><span class="string">'imageLine'</span><span class="keyword">) <br>{<br>&nbsp; &nbsp; </span><span class="default">$x1 </span><span class="keyword">-= (</span><span class="default">$buf</span><span class="keyword">=</span><span class="default">ceil</span><span class="keyword">((</span><span class="default">$BoldNess</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">) /</span><span class="default">2</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$x2 </span><span class="keyword">-= </span><span class="default">$buf</span><span class="keyword">;<br>&nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$BoldNess</span><span class="keyword">;++</span><span class="default">$i</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$func</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$x1 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2 </span><span class="keyword">+</span><span class="default">$i</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$Color</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80816">  
  <a class="name">
  <strong class="user"><em>huirong dot jin at gmail dot com</em></strong></a><div class="date" title="2008-02-01 08:10"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80816">
<div class="phpcode"><code><span class="html">
An example to draw Lissajous Curve (<a rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Lissajous_curve</a>):<br>x = a1 * cos(t/T1);<br>y = a2 * sin(t/T2);<br><br>You can easily modify the codes to create your own oscilloscope application!<br><br><span class="default">&lt;?php<br>header </span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br><br></span><span class="default">$T1 </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">;<br></span><span class="default">$T2 </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;<br><br></span><span class="default">$myImage </span><span class="keyword">= @</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">640</span><span class="keyword">, </span><span class="default">480</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; or die(</span><span class="string">"Cannot Initialize new GD image stream"</span><span class="keyword">);<br></span><span class="default">$text_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br></span><span class="default">$poly_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">124</span><span class="keyword">, </span><span class="default">120</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br><br></span><span class="comment">//calculate x-value and y-value point by point<br></span><span class="default">$points </span><span class="keyword">= array();<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">1000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//define curve's function<br>&nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">310</span><span class="keyword">*</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">/</span><span class="default">$T1</span><span class="keyword">); </span><span class="comment">//define x-value<br>&nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">230</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">/</span><span class="default">$T2</span><span class="keyword">);</span><span class="comment">//define y-value<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; //move the coordinate, append a point's x-value and y-value<br>&nbsp; &nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">320</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">; </span><span class="comment">//x-value<br>&nbsp; &nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">240</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">;&nbsp; </span><span class="comment">//y-value<br></span><span class="keyword">}<br><br></span><span class="comment">//count points<br></span><span class="default">$totalPoints </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$points</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br><br></span><span class="comment">//drawing title<br></span><span class="default">$title </span><span class="keyword">= </span><span class="string">"Final Plot (</span><span class="default">$totalPoints</span><span class="string"> points)"</span><span class="keyword">;<br></span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="default">$title</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br><br></span><span class="comment">/** drawing points one by one, notice if there <br> * are 10 points, we need to draw 9 lines: <br> * 1) point 0 to 1; <br> * 2) point 1 to 2;<br> * ...<br> * ...<br> * 9) point 8 to 9; <br> */<br></span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$totalPoints</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>&nbsp; &nbsp; </span><span class="default">imageLine</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$poly_color</span><span class="keyword">);&nbsp; &nbsp; <br>}<br><br></span><span class="comment">//finalizing<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80797">  
  <a class="name">
  <strong class="user"><em>huirong dot jin at gmail dot com</em></strong></a><div class="date" title="2008-01-31 01:57"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80797">
<div class="phpcode"><code><span class="html">
An example to draw Amplitude Modulation curve: y = c * sin (x/a) * sin (x/b) . You can easily modify the codes to create your own oscilloscope application!<br><br><span class="default">&lt;?php<br>header </span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">$myImage </span><span class="keyword">= @</span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">640</span><span class="keyword">, </span><span class="default">480</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; or die(</span><span class="string">"Cannot Initialize new GD image stream"</span><span class="keyword">);<br></span><span class="default">$text_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br></span><span class="default">$poly_color </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">124</span><span class="keyword">, </span><span class="default">120</span><span class="keyword">, </span><span class="default">224</span><span class="keyword">);<br><br></span><span class="comment">//calculate x-value and y-value point by point<br></span><span class="default">$points </span><span class="keyword">= array();<br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">640</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//define curve's function<br>&nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">; </span><span class="comment">//define x-value, which is $i itself <br>&nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">150</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">/</span><span class="default">80</span><span class="keyword">)*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">/</span><span class="default">5</span><span class="keyword">);</span><span class="comment">//define y-value<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; //append a point's x-value and y-value<br>&nbsp; &nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">$x</span><span class="keyword">; </span><span class="comment">//x-value<br>&nbsp; &nbsp; </span><span class="default">$points</span><span class="keyword">[] = </span><span class="default">240</span><span class="keyword">-</span><span class="default">$y</span><span class="keyword">;&nbsp; </span><span class="comment">//y-value<br></span><span class="keyword">}<br><br></span><span class="comment">//count points<br></span><span class="default">$totalPoints </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$points</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br><br></span><span class="comment">//drawing title<br></span><span class="default">$title </span><span class="keyword">= </span><span class="string">"Final Plot (</span><span class="default">$totalPoints</span><span class="string"> points)"</span><span class="keyword">;<br></span><span class="default">imagestring</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">,&nbsp; </span><span class="default">$title</span><span class="keyword">, </span><span class="default">$text_color</span><span class="keyword">);<br><br></span><span class="comment">/** drawing points one by one, notice if there <br> * are 10 points, we need to draw 9 lines: <br> * 1) point 0 to 1; <br> * 2) point 1 to 2;<br> * ...<br> * ...<br> * 9) point 8 to 9; <br> */<br></span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$totalPoints</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>&nbsp; &nbsp; </span><span class="default">imageLine</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">, </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$points</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$poly_color</span><span class="keyword">);&nbsp; &nbsp; <br>}<br><br></span><span class="comment">//finalizing<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$myImage</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74856">  
  <a class="name">
  <strong class="user"><em>admin at xpmail dot net</em></strong></a><div class="date" title="2007-04-30 05:45"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74856">
<div class="phpcode"><code><span class="html">
example of a Simple grid...<br>bool imagegrid ( resource $image, int $width, int $Height, int $size, mixed $color )<br><br><span class="default">&lt;?php<br>Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">$Width</span><span class="keyword">=</span><span class="default">450</span><span class="keyword">;<br></span><span class="default">$Height</span><span class="keyword">=</span><span class="default">450</span><span class="keyword">;<br><br></span><span class="default">$img </span><span class="keyword">= </span><span class="default">ImageCreateTrueColor</span><span class="keyword">(</span><span class="default">$Width</span><span class="keyword">, </span><span class="default">$Height</span><span class="keyword">);<br><br></span><span class="default">$bg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br></span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$bg</span><span class="keyword">);<br><br></span><span class="default">$grid </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">225</span><span class="keyword">, </span><span class="default">245</span><span class="keyword">, </span><span class="default">249</span><span class="keyword">);<br><br></span><span class="default">imagesetstyle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, array(</span><span class="default">$bg</span><span class="keyword">, </span><span class="default">$grid</span><span class="keyword">));<br></span><span class="default">imagegrid</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$Width</span><span class="keyword">, </span><span class="default">$Height</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">, </span><span class="default">IMG_COLOR_STYLED</span><span class="keyword">);<br></span><span class="comment">//makegrid($img, $Width, $Height, 10, $grid);<br><br></span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br><br>function </span><span class="default">imagegrid</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$h</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; for(</span><span class="default">$iw</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$iw</span><span class="keyword">&lt;</span><span class="default">$w</span><span class="keyword">/</span><span class="default">$s</span><span class="keyword">; </span><span class="default">$iw</span><span class="keyword">++){</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$iw</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$iw</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);}<br>&nbsp; &nbsp; for(</span><span class="default">$ih</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$ih</span><span class="keyword">&lt;</span><span class="default">$h</span><span class="keyword">/</span><span class="default">$s</span><span class="keyword">; </span><span class="default">$ih</span><span class="keyword">++){</span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$ih</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$w</span><span class="keyword">, </span><span class="default">$ih</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$color</span><span class="keyword">);}<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74779">  
  <a class="name">
  <strong class="user"><em>Jonathan W.</em></strong></a><div class="date" title="2007-04-27 01:15"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74779">
<div class="phpcode"><code><span class="html">
I've modified the previous entry for drawing on a polar coordinate system to better represent angles based on a 360Âº whole circle bearing.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">imagepolarline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$length</span><span class="keyword">,</span><span class="default">$angle</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">sin</span><span class="keyword">( </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">) ) * </span><span class="default">$length</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">cos</span><span class="keyword">( </span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$angle</span><span class="keyword">+</span><span class="default">180</span><span class="keyword">) ) * </span><span class="default">$length</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$x2</span><span class="keyword">,</span><span class="default">$y2</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62606">  
  <a class="name">
  <strong class="user"><em>pb_2001 at haefft dot de</em></strong></a><div class="date" title="2006-03-04 02:41"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62606">
<div class="phpcode"><code><span class="html">
This is a function to make a dotted line. It accepts (it actually requires) 7 parameters and returns 1 if everything went OK and 0 if there was a problem.<br><br>int imagelinedotted ( resource im, int x1, int y1, int x2, int y2, int dist, int col )<br><br>imagelinedotted() draws a line from x1, y1 to x2, y2 (top left is 0, 0) in image im of colour col where dist defines the distance (measured in pixels) between one dot and another.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">imagelinedotted </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$dist</span><span class="keyword">, </span><span class="default">$col</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$transp </span><span class="keyword">= </span><span class="default">imagecolortransparent </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$style </span><span class="keyword">= array (</span><span class="default">$col</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$dist</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$style</span><span class="keyword">, </span><span class="default">$transp</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Generate style array - loop needed for customisable distance between the dots<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">imagesetstyle </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$style</span><span class="keyword">);<br>&nbsp; &nbsp; return (integer) </span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">IMG_COLOR_STYLED</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">imagesetstyle </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, array(</span><span class="default">$col</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Reset style - just in case...<br></span><span class="keyword">}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61301">  
  <a class="name">
  <strong class="user"><em>fatpratmatt at gmail dot com</em></strong></a><div class="date" title="2006-01-30 11:43"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61301">
<div class="phpcode"><code><span class="html">
Here is a function which draws lines that cross at a specific point [It may need some tweaking]:<br><br><span class="default">&lt;?php<br></span><span class="comment">// Image Cross by Matt Evans<br>// $im - image resource<br>// $x - x coordinate where the lines should cross<br>// $y - y coordinate where the lines should cross<br>// $size - the length of each line<br>// $colour - the colour of the cross<br><br></span><span class="keyword">function </span><span class="default">imagecross</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$size </span><span class="keyword">= </span><span class="default">5</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">) {<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">);<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">+</span><span class="default">$size</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">-</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$colour</span><span class="keyword">);<br>}<br><br></span><span class="comment">// Example<br></span><span class="default">imagecross</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">$crosscolour</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58010">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-10-21 07:30"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58010">
<div class="phpcode"><code><span class="html">
imageline coordinate variables are documented as int ,&nbsp; a value in decimal format will be truncated.<br><br>This may be useful when, for example, applying a non-integer scaling factor in generating an image.<br><br>Care should be taken to ensure this does not create significant errors that affect the quality of the image. For example :<br><br><span class="default">&lt;?php<br>$x</span><span class="keyword">=</span><span class="default">0.00000000001</span><span class="keyword">;</span><span class="default">$y</span><span class="keyword">=</span><span class="default">100</span><span class="keyword">;<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">+</span><span class="default">$x</span><span class="keyword">);<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">-</span><span class="default">$x</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>the first line will be straight , the second will have a step. Use round() where appropriate.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56565">  
  <a class="name">
  <strong class="user"><em>meid at gmx dot at</em></strong></a><div class="date" title="2005-09-07 10:39"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56565">
<div class="phpcode"><code><span class="html">
Some simple code to draw lines with specific thickness using "imagefilledpolygon". Useful if your gdlib does not support "imagesetthickness". <br><br>&lt;?<br>function dickelinie($img,$start_x,$start_y,$end_x,$end_y,$color,$thickness) <br>{<br>&nbsp; &nbsp; $angle=(atan2(($start_y - $end_y),($end_x - $start_x))); <br><br>&nbsp; &nbsp; $dist_x=$thickness*(sin($angle));<br>&nbsp; &nbsp; $dist_y=$thickness*(cos($angle));<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $p1x=ceil(($start_x + $dist_x));<br>&nbsp; &nbsp; $p1y=ceil(($start_y + $dist_y));<br>&nbsp; &nbsp; $p2x=ceil(($end_x + $dist_x));<br>&nbsp; &nbsp; $p2y=ceil(($end_y + $dist_y));<br>&nbsp; &nbsp; $p3x=ceil(($end_x - $dist_x));<br>&nbsp; &nbsp; $p3y=ceil(($end_y - $dist_y));<br>&nbsp; &nbsp; $p4x=ceil(($start_x - $dist_x));<br>&nbsp; &nbsp; $p4y=ceil(($start_y - $dist_y));<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $array=array(0=&gt;$p1x,$p1y,$p2x,$p2y,$p3x,$p3y,$p4x,$p4y);<br>&nbsp; &nbsp; imagefilledpolygon ( $img, $array, (count($array)/2), $color );<br>}<br>// Example:<br>header ("Content-type: image/jpeg");<br>$img = ImageCreate (210, 210) or die("Cannot Initialize new GD image stream ");<br>$backgroundcolor = ImageColorAllocate ($img, 255, 255, 255);<br>$orange = ImageColorAllocate($img, 252, 102, 4);<br>dickelinie($img, 10, 10, 10, 200,$orange,2);<br>dickelinie($img, 10, 200, 200, 10,$orange,2);&nbsp; &nbsp; <br>dickelinie($img, 200, 10, 200, 200,$orange,2);<br>imagejpeg($img);&nbsp;&nbsp; <br>ImageDestroy($img);<br><br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56524">  
  <a class="name">
  <strong class="user"><em>d [AT] sprid [DOT] de</em></strong></a><div class="date" title="2005-09-06 03:12"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56524">
<div class="phpcode"><code><span class="html">
Here my function do clear all problems. With this, you can draw firstly smooth lines (basic code adapted from code_couturier at graffiti dot net, with some performance changes). The special is, you can define the alpha-value of the line (0 = normal smooth line, 127 = fully transparent). Change whatever you want to make it better, but post your results ;) <br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * function imageSmoothAlphaLine() - version 1.0<br> * Draws a smooth line with alpha-functionality<br> *<br> * @param&nbsp;&nbsp; ident&nbsp; &nbsp; the image to draw on<br> * @param&nbsp;&nbsp; integer&nbsp; x1<br> * @param&nbsp;&nbsp; integer&nbsp; y1<br> * @param&nbsp;&nbsp; integer&nbsp; x2<br> * @param&nbsp;&nbsp; integer&nbsp; y2<br> * @param&nbsp;&nbsp; integer&nbsp; red (0 to 255)<br> * @param&nbsp;&nbsp; integer&nbsp; green (0 to 255)<br> * @param&nbsp;&nbsp; integer&nbsp; blue (0 to 255)<br> * @param&nbsp;&nbsp; integer&nbsp; alpha (0 to 127)<br> *<br> * @access&nbsp; public<br> *<br> * @author&nbsp; DASPRiD &lt;d@sprid.de&gt;<br> */<br></span><span class="keyword">function </span><span class="default">imageSmoothAlphaLine </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$r</span><span class="keyword">, </span><span class="default">$g</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$alpha</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; </span><span class="default">$icr </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br>&nbsp; </span><span class="default">$icg </span><span class="keyword">= </span><span class="default">$g</span><span class="keyword">;<br>&nbsp; </span><span class="default">$icb </span><span class="keyword">= </span><span class="default">$b</span><span class="keyword">;<br>&nbsp; </span><span class="default">$dcol </span><span class="keyword">= </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$icr</span><span class="keyword">, </span><span class="default">$icg</span><span class="keyword">, </span><span class="default">$icb</span><span class="keyword">, </span><span class="default">$alpha</span><span class="keyword">);<br>&nbsp; <br>&nbsp; if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">$y2 </span><span class="keyword">|| </span><span class="default">$x1 </span><span class="keyword">== </span><span class="default">$x2</span><span class="keyword">) <br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$dcol</span><span class="keyword">);<br>&nbsp; else {<br>&nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= (</span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1</span><span class="keyword">) / (</span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$x1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$m </span><span class="keyword">* </span><span class="default">$x1</span><span class="keyword">;<br><br>&nbsp; &nbsp; if (</span><span class="default">abs </span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">) &lt;</span><span class="default">2</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$endx </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; while (</span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$endx</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">* </span><span class="default">$x </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ya </span><span class="keyword">= (</span><span class="default">$y </span><span class="keyword">== </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) ? </span><span class="default">1</span><span class="keyword">: </span><span class="default">$y </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$yb </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">) - </span><span class="default">$y</span><span class="keyword">;<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$ya </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$yb</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">), </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$yb </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$ya</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">min</span><span class="keyword">(</span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$endy </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; while (</span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">$endy</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x </span><span class="keyword">= (</span><span class="default">$y </span><span class="keyword">- </span><span class="default">$b</span><span class="keyword">) / </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xa </span><span class="keyword">= (</span><span class="default">$x </span><span class="keyword">== </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) ? </span><span class="default">1</span><span class="keyword">: </span><span class="default">$x </span><span class="keyword">- </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$xb </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">) - </span><span class="default">$x</span><span class="keyword">;<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">, </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$xa </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$xb</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trgb </span><span class="keyword">= </span><span class="default">ImageColorAt</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcr </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">16</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcg </span><span class="keyword">= (</span><span class="default">$trgb </span><span class="keyword">&gt;&gt; </span><span class="default">8</span><span class="keyword">) &amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tcb </span><span class="keyword">= </span><span class="default">$trgb </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imagesetpixel </span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">), </span><span class="default">$y</span><span class="keyword">, </span><span class="default">imagecolorallocatealpha</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, (</span><span class="default">$tcr </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icr </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), (</span><span class="default">$tcg </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icg </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), (</span><span class="default">$tcb </span><span class="keyword">* </span><span class="default">$xb </span><span class="keyword">+ </span><span class="default">$icb </span><span class="keyword">* </span><span class="default">$xa</span><span class="keyword">), </span><span class="default">$alpha</span><span class="keyword">));<br>&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y </span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; }<br>} </span><span class="comment">// end of 'imageSmoothAlphaLine()' function<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52464">  
  <a class="name">
  <strong class="user"><em>Tyron</em></strong></a><div class="date" title="2005-05-02 11:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52464">
<div class="phpcode"><code><span class="html">
// Here's a function for drawing a rotated gradient Rectangle (based on a previous note)<br><br>// Create An Image 255x255<br>$img = ImageCreateTrueColor(255, 255);<br><br>GradientRect($img,50,50,80,80,30);<br><br>ImagePng($img,"test.png");<br>ImageDestroy($img);<br>echo "&lt;br&gt;&lt;img src=\"test.png\"&gt;";<br><br>function GradientRect($img, $x1, $y1, $x2, $y2, $wdt) {<br>&nbsp; $alpha = atan2($y2-$y1,$x2-$x1);<br>&nbsp; $real_wdt = $wdt*sin($alpha);<br>&nbsp; $real_hgt = $wdt*cos($alpha);<br>&nbsp; echo "real wdt:".$real_wdt;<br>&nbsp; echo "&lt;br&gt;real hgt:".$real_hgt;<br>&nbsp; echo "&lt;br&gt;angle: ".($angle*180/pi());<br>&nbsp; $plotD = 0;<br>&nbsp; $i=0; <br><br>&nbsp; $dy = $real_hgt/$wdt;<br>&nbsp; $dx = $real_wdt/$wdt;<br>&nbsp; $drgb= 256/$wdt;<br>&nbsp; while($i++ &lt; $wdt) {<br>&nbsp; &nbsp; // Draw a line and move it down and make it lighter to get the gradient effect<br>&nbsp; &nbsp; ImageLine($img, $x1-$i*$dx, $y1+$i*$dy, $x2-$i*$dx, $y2+$i*$dy, ImageColorAllocate($img, $i*$drgb, 0, 0));<br>&nbsp; &nbsp; ImageLine($img, $x1-$i*$dx+1, $y1+$i*$dy, $x2-$i*$dx+1, $y2+$i*$dy, ImageColorAllocate($img, $i*$drgb, 0, 0));<br><br>&nbsp; }<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52184">  
  <a class="name">
  <strong class="user"><em>ajreading at classixshop dot com</em></strong></a><div class="date" title="2005-04-23 07:28"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52184">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="comment">// An easy bit of code showing how you can use the ImageLine() function to create gradients<br><br>// Create An Image 255x255<br></span><span class="default">$img </span><span class="keyword">= </span><span class="default">ImageCreateTrueColor</span><span class="keyword">(</span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);<br><br></span><span class="default">$plotD </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>while(</span><span class="default">$plotD </span><span class="keyword">&lt; </span><span class="default">256</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// Draw a line and move it down and make it lighter to get the gradient effect<br>&nbsp; &nbsp; </span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$plotD </span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">, </span><span class="default">$plotD</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$plotD</span><span class="keyword">++;<br>}<br></span><span class="default">Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">ImagePng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49429">  
  <a class="name">
  <strong class="user"><em>eviloverlord at gmail dot com</em></strong></a><div class="date" title="2005-01-27 07:50"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49429">
<div class="phpcode"><code><span class="html">
This code is used to draw a board of hexagons (for games, classes, etc.)<br><br><span class="default">&lt;?php<br></span><span class="comment">//Draws a hexagonal board<br><br>// User-defined values<br></span><span class="default">$maxTiles </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The number of tiles at the center (widest part) of the board<br></span><span class="default">$minTiles </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The number of tiles at the edges of the board<br></span><span class="default">$side </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The length of the sides of the tiles in pixels<br></span><span class="default">$bgColor </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The background color in RGB format<br></span><span class="default">$fgColor </span><span class="keyword">= array(</span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">);</span><span class="comment">//The foreground color in RGB format<br><br>//Calculated values<br></span><span class="default">$widthInTiles </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">$maxTiles</span><span class="keyword">, </span><span class="default">$minTiles</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//In our example: 7, 6, 5, 4<br></span><span class="default">$rowsInTiles </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$widthInTiles</span><span class="keyword">)*</span><span class="default">2</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the total number of rows on our board<br></span><span class="default">$xSide </span><span class="keyword">= </span><span class="default">$side</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">60</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the length of the x-part of the angled sides<br></span><span class="default">$ySide </span><span class="keyword">= </span><span class="default">$side</span><span class="keyword">*</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//the length of the y-part of the angled sides<br></span><span class="default">$boardWidth </span><span class="keyword">= </span><span class="default">$xSide</span><span class="keyword">*</span><span class="default">$widthInTiles</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//The entire width of the board<br></span><span class="default">$boardHeight </span><span class="keyword">= </span><span class="default">$rowsInTiles</span><span class="keyword">*(</span><span class="default">$side </span><span class="keyword">+ </span><span class="default">$ySide</span><span class="keyword">) + </span><span class="default">$ySide</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//The entire height of the board<br><br>// create a blank image and allocate the foreground, background colors<br></span><span class="default">$image </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$boardWidth</span><span class="keyword">, </span><span class="default">$boardHeight</span><span class="keyword">);<br></span><span class="default">$bg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$bgColor</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br></span><span class="default">$fg </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="default">$fgColor</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]);<br><br></span><span class="comment">// draw the board<br></span><span class="default">$row </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>foreach(</span><span class="default">$widthInTiles </span><span class="keyword">as </span><span class="default">$tiles</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$tiles</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">*</span><span class="default">$xSide </span><span class="keyword">+ </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$xSide</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">$boardHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y1Dif </span><span class="keyword">= (</span><span class="default">$side</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">) + </span><span class="default">$row</span><span class="keyword">*(</span><span class="default">$side</span><span class="keyword">+</span><span class="default">$ySide</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$xSide</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">$y1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$y2Dif </span><span class="keyword">= </span><span class="default">$ySide</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$xSide</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$tiles</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,&nbsp; </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$y2Dif</span><span class="keyword">, </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y1Dif </span><span class="keyword">+ </span><span class="default">$side</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y1Dif </span><span class="keyword">- </span><span class="default">$side</span><span class="keyword">, </span><span class="default">$fg</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$row</span><span class="keyword">++;<br>}<br><br></span><span class="comment">// output the picture<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42984">  
  <a class="name">
  <strong class="user"><em>likavcan at NOSPAN sturak nospan dot sk</em></strong></a><div class="date" title="2004-06-05 03:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42984">
<div class="phpcode"><code><span class="html">
This function draws arrow.<br><br>function arrow($im, $x1, $y1, $x2, $y2, $alength, $awidth, $color) {<br><br>&nbsp; &nbsp; $distance = sqrt(pow($x1 - $x2, 2) + pow($y1 - $y2, 2));<br><br>&nbsp; &nbsp; $dx = $x2 + ($x1 - $x2) * $alength / $distance;<br>&nbsp; &nbsp; $dy = $y2 + ($y1 - $y2) * $alength / $distance;<br><br>&nbsp; &nbsp; $k = $awidth / $alength;<br><br>&nbsp; &nbsp; $x2o = $x2 - $dx;<br>&nbsp; &nbsp; $y2o = $dy - $y2;<br><br>&nbsp; &nbsp; $x3 = $y2o * $k + $dx;<br>&nbsp; &nbsp; $y3 = $x2o * $k + $dy;<br><br>&nbsp; &nbsp; $x4 = $dx - $y2o * $k;<br>&nbsp; &nbsp; $y4 = $dy - $x2o * $k;<br><br>&nbsp; &nbsp; imageline($im, $x1, $y1, $dx, $dy, $color);<br>&nbsp; &nbsp; imageline($im, $x3, $y3, $x4, $y4, $color);<br>&nbsp; &nbsp; imageline($im, $x3, $y3, $x2, $y2, $color);<br>&nbsp; &nbsp; imageline($im, $x2, $y2, $x4, $y4, $color);<br><br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42596">  
  <a class="name">
  <strong class="user"><em>Lionel Van Bemten</em></strong></a><div class="date" title="2004-05-22 03:41"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42596">
<div class="phpcode"><code><span class="html">
here is a code to draw a "degraded" ... :<br>&lt;?<br>header("Content-type : image/jpeg");<br><br>$image = @ImageCreate(200, 100)<br>&nbsp; or die ("Erreur de crï¿½ation de l'image");<br><br>$lignes_colorees = 1;<br>$couleur_fond = ImageColorAllocate($image, 255, 255, 255);<br><br>$rouge_depart = 100;<br>$vert_depart = 255;<br>$bleu_depart = 0;<br><br>$rouge_fin = 0;<br>$vert_fin = 100;<br>$bleu_fin = 0;<br><br>$lignes = 100; //nb de lignes de l'image<br><br>$vert_diff = $vert_fin - $vert_depart;<br>$vert1 = $vert_diff / $lignes;<br><br>$bleu_diff = $bleu_fin - $bleu_depart;<br>$bleu1 = $bleu_diff / $lignes;<br><br>$rouge_diff = $rouge_fin - $rouge_depart;<br>$rouge1 = $rouge_diff / $lignes;<br><br>while ($lignes_colorees &lt;= 100)<br>{<br>&nbsp; &nbsp; $rouge2 = $lignes_colorees * $rouge1;&nbsp; &nbsp; $rouge3 = $rouge_depart + $rouge2;<br>&nbsp; &nbsp; $rouge = round($rouge3);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $vert2 = $lignes_colorees * $vert1;<br>&nbsp; &nbsp; $vert3 = $vert_depart + $vert2;<br>&nbsp; &nbsp; $vert = round($vert2);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $bleu2 = $lignes_colorees * $bleu1;<br>&nbsp; &nbsp; $bleu3 = $bleu_depart + $bleu2;<br>&nbsp; &nbsp; $bleu = round($bleu2);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $y1 = $lignes_colorees;<br>&nbsp; &nbsp; $y2 = $lignes_colorees;<br>&nbsp; &nbsp; $x1 = 1;&nbsp; &nbsp; $x2 = 200;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $couleur = ImageColorAllocate($image, $rouge, $vert, $bleu);<br>&nbsp; &nbsp; //dessine la ligne<br>&nbsp; &nbsp; ImageLine($image, $x1, $y1, $x2, $y2, $couleur);&nbsp; &nbsp; $lignes_colorees ++;<br>}<br><br>//dessine l'image<br>ImageJpeg($image);<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42390">  
  <a class="name">
  <strong class="user"><em>ruturaj_v at yahoo dot com</em></strong></a><div class="date" title="2004-05-14 08:48"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42390">
<div class="phpcode"><code><span class="html">
here is a function that helps you create arrows...<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">get_arrowheads </span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$arrhead</span><span class="keyword">, </span><span class="default">$arrang</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$debug </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">"INFINITE"</span><span class="keyword">, </span><span class="string">'INFINITE'</span><span class="keyword">);<br>&nbsp; &nbsp; if ((</span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$x1</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$slope </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$slope </span><span class="keyword">= </span><span class="default">INFINITE</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$slope </span><span class="keyword">= -(</span><span class="default">$y2</span><span class="keyword">-</span><span class="default">$y1</span><span class="keyword">)/(</span><span class="default">$x2</span><span class="keyword">-</span><span class="default">$x1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">//$slope = number_format($slope, 2, '.','');<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$slope </span><span class="keyword">== </span><span class="string">'INFINITE'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ang </span><span class="keyword">= </span><span class="default">90</span><span class="keyword">;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ang </span><span class="keyword">= </span><span class="default">atan </span><span class="keyword">(</span><span class="default">$slope</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ang </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">* </span><span class="default">180</span><span class="keyword">)/</span><span class="default">pi</span><span class="keyword">();<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">//$ang = number_format($ang, 2, '.', '');<br>&nbsp; &nbsp; //echo ($ang);<br>&nbsp; &nbsp; //exit;<br><br>&nbsp; &nbsp; //convert the angle<br>&nbsp; &nbsp; </span><span class="default">$arrang1 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">- </span><span class="default">$arrang</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$arrangdeg1 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">- </span><span class="default">$arrang</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">//echo ($arrang1);exit;<br>&nbsp; &nbsp; </span><span class="default">$arrang1 </span><span class="keyword">= (</span><span class="default">$arrang1</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">())/</span><span class="default">180</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="default">$arrang2 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">+ </span><span class="default">$arrang</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$arrangdeg2 </span><span class="keyword">= (</span><span class="default">$ang </span><span class="keyword">+ </span><span class="default">$arrang</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$arrang2 </span><span class="keyword">= (</span><span class="default">$arrang2</span><span class="keyword">*</span><span class="default">pi</span><span class="keyword">())/</span><span class="default">180</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//echo ($arrang1);<br><br>&nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$arrang1</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$arrang1</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">$arrang2</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br>&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= (</span><span class="default">floor</span><span class="keyword">(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">$arrang2</span><span class="keyword">)*</span><span class="default">$arrhead</span><span class="keyword">));<br>&nbsp; &nbsp; if (</span><span class="default">$debug</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"Values of arx1.. before add/sub&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"</span><span class="default">$arx1</span><span class="string">,</span><span class="default">$ary1</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$arx2</span><span class="string">,</span><span class="default">$ary2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$ang</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$ang </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$ang </span><span class="keyword">&lt; </span><span class="default">90</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$ang</span><span class="keyword">==</span><span class="default">90</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">$ang </span><span class="keyword">&gt; -</span><span class="default">90 </span><span class="keyword">&amp;&amp; </span><span class="default">$ang </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ((</span><span class="default">$x2 </span><span class="keyword">&gt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&gt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">- </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">+ </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif ((</span><span class="default">$x2 </span><span class="keyword">&lt; </span><span class="default">$x1</span><span class="keyword">) &amp;&amp; (</span><span class="default">$y2 </span><span class="keyword">&lt; </span><span class="default">$y1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx1 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx1</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary1 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arx2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">$arx2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="default">$ary2 </span><span class="keyword">= </span><span class="default">$y2 </span><span class="keyword">- </span><span class="default">$ary2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (</span><span class="default">$debug</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"Angle of line is ("</span><span class="keyword">.</span><span class="default">$ang</span><span class="keyword">*</span><span class="default">180</span><span class="keyword">/</span><span class="default">pi</span><span class="keyword">().</span><span class="string">")&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"Angle of line1 is </span><span class="default">$arrangdeg1</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"Angle of line2 is </span><span class="default">$arrangdeg2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"</span><span class="default">$arx1</span><span class="string">,</span><span class="default">$ary1</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$x2</span><span class="string">,</span><span class="default">$y2</span><span class="string">&lt;/br&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; echo (</span><span class="string">"</span><span class="default">$arx2</span><span class="string">,</span><span class="default">$ary2</span><span class="string">&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><span class="default">$x2</span><span class="string">,</span><span class="default">$y2</span><span class="string">"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; exit;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$array_arrows </span><span class="keyword">= array (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'x1' </span><span class="keyword">=&gt;</span><span class="default">$arx1</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'y1' </span><span class="keyword">=&gt; </span><span class="default">$ary1</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'x2' </span><span class="keyword">=&gt; </span><span class="default">$arx2</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'y2' </span><span class="keyword">=&gt; </span><span class="default">$ary2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$array_arrows</span><span class="keyword">;<br><br>}<br><br></span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">; </span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">;<br></span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">400</span><span class="keyword">; </span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">;<br></span><span class="default">$arrhead </span><span class="keyword">= </span><span class="default">15</span><span class="keyword">; </span><span class="comment">//10px<br></span><span class="default">$arrang </span><span class="keyword">= </span><span class="default">10</span><span class="keyword">; </span><span class="comment">//10 deg<br><br></span><span class="default">$ar_arrws </span><span class="keyword">= </span><span class="default">get_arrowheads </span><span class="keyword">(</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$arrhead</span><span class="keyword">, </span><span class="default">$arrang</span><span class="keyword">);<br><br></span><span class="default">$im&nbsp; </span><span class="keyword">= </span><span class="default">imagecreate </span><span class="keyword">(</span><span class="default">400</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">); <br></span><span class="default">$w&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">); <br></span><span class="default">$red </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">255</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">); <br><br></span><span class="comment">//creates the base line<br></span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$green</span><span class="keyword">);<br></span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x1</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$red</span><span class="keyword">);<br></span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'x1'</span><span class="keyword">], </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'y1'</span><span class="keyword">], </span><span class="default">$green</span><span class="keyword">);<br></span><span class="default">imageline </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">$x2</span><span class="keyword">, </span><span class="default">$y2</span><span class="keyword">, </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'x2'</span><span class="keyword">], </span><span class="default">$ar_arrws</span><span class="keyword">[</span><span class="string">'y2'</span><span class="keyword">], </span><span class="default">$green</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41550">  
  <a class="name">
  <strong class="user"><em>yl at sota dot ch</em></strong></a><div class="date" title="2004-04-14 09:44"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41550">
<div class="phpcode"><code><span class="html">
Simple function to create border for jpg-images:<br><br>function createImageBorder($imgName){<br><br>&nbsp; &nbsp;&nbsp; $img&nbsp; &nbsp;&nbsp; =&nbsp; substr($imgName, 0, -4); // remove fileExtension<br>&nbsp; &nbsp;&nbsp; $ext&nbsp; &nbsp;&nbsp; = ".jpg";<br>&nbsp; &nbsp;&nbsp; $quality = 95;<br>&nbsp; &nbsp;&nbsp; $borderColor = 255;&nbsp; // 255 = white<br>&nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; /*<br>&nbsp; &nbsp;&nbsp; a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; b<br>&nbsp; &nbsp;&nbsp; +-------------------------+<br>&nbsp; &nbsp;&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp;&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMAGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp;&nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp;&nbsp; +-------------------------+<br>&nbsp; &nbsp;&nbsp; c&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; d&nbsp;&nbsp; <br>&nbsp; &nbsp; */<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; $scr_img = imagecreatefromjpeg($img.$ext);<br>&nbsp; &nbsp; $width&nbsp;&nbsp; = imagesx($scr_img);<br>&nbsp; &nbsp; $height&nbsp; = imagesy($scr_img);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; // line a - b<br>&nbsp; &nbsp; &nbsp; &nbsp; $abX&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $abY&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $abX1 = $width;<br>&nbsp; &nbsp; &nbsp; &nbsp; $abY1 = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; // line a - c<br>&nbsp; &nbsp; &nbsp; &nbsp; $acX&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $acY&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $acX1 = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $acY1 = $height;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; // line b - d<br>&nbsp; &nbsp; &nbsp; &nbsp; $bdX&nbsp; = $width-1;<br>&nbsp; &nbsp; &nbsp; &nbsp; $bdY&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $bdX1 = $width-1;<br>&nbsp; &nbsp; &nbsp; &nbsp; $bdY1 = $height;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; // line c - d<br>&nbsp; &nbsp; &nbsp; &nbsp; $cdX&nbsp; = 0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $cdY&nbsp; = $height-1;<br>&nbsp; &nbsp; &nbsp; &nbsp; $cdX1 = $width;<br>&nbsp; &nbsp; &nbsp; &nbsp; $cdY1 = $height-1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp;&nbsp; // DRAW LINES&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; imageline($scr_img,$abX,$abY,$abX1,$abY1,$borderColor);<br>&nbsp; &nbsp; &nbsp; &nbsp; imageline($scr_img,$acX,$acY,$acX1,$acY1,$borderColor);<br>&nbsp; &nbsp; &nbsp; &nbsp; imageline($scr_img,$bdX,$bdY,$bdX1,$bdY1,$borderColor);<br>&nbsp; &nbsp; &nbsp; &nbsp; imageline($scr_img,$cdX,$cdY,$cdX1,$cdY1,$borderColor);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; // create copy from image&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; imagejpeg($scr_img, $img."_border.jpg", $quality);<br>&nbsp; &nbsp; &nbsp; &nbsp; imagedestroy($scr_img); <br>&nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; createImageBorder("myfile.jpg");</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39895">  
  <a class="name">
  <strong class="user"><em>XxXoldsaltXxX at hotmail dot com</em></strong></a><div class="date" title="2004-02-14 10:50"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39895">
<div class="phpcode"><code><span class="html">
Script to draw a grid of lines, which make the entire side of the picture look like a quarter circle.. very cool :)<br><span class="default">&lt;?php<br>$img_disp </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">1000</span><span class="keyword">,</span><span class="default">1000</span><span class="keyword">);<br></span><span class="default">$backcolor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br></span><span class="default">imagefill</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$backcolor</span><span class="keyword">);<br></span><span class="default">$textcolor </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br></span><span class="default">$x1 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br></span><span class="default">$y2 </span><span class="keyword">= </span><span class="default">1000</span><span class="keyword">;<br>for(;;){<br></span><span class="default">$y1 </span><span class="keyword">= </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">20</span><span class="keyword">;<br></span><span class="default">$x2 </span><span class="keyword">= </span><span class="default">$x2 </span><span class="keyword">+ </span><span class="default">20</span><span class="keyword">;<br></span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">,</span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$x2</span><span class="keyword">,</span><span class="default">$y2</span><span class="keyword">,</span><span class="default">$textcolor</span><span class="keyword">);<br>if (</span><span class="default">$y1 </span><span class="keyword">== </span><span class="default">1000</span><span class="keyword">){<br>break;<br>}<br>}<br></span><span class="default">header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">); </span><span class="comment">// Draw the image<br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img_disp</span><span class="keyword">); </span><span class="comment">// Delete the image from the server's memory<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="38742">  
  <a class="name">
  <strong class="user"><em>mueller at inf dot ufsc dot br</em></strong></a><div class="date" title="2004-01-05 12:26"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom38742">
<div class="phpcode"><code><span class="html">
an algorithm to draw a bezier spline<br><br><span class="default">&lt;?php<br><br>$segmentos </span><span class="keyword">=</span><span class="default">30</span><span class="keyword">;<br></span><span class="default">$x</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">80</span><span class="keyword">,</span><span class="default">30</span><span class="keyword">);<br></span><span class="default">$y</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">40</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">);<br><br>function </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">,</span><span class="default">$steps</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$t </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">/ </span><span class="default">$steps</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$t </span><span class="keyword">* </span><span class="default">$t</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$fd </span><span class="keyword">= </span><span class="default">3 </span><span class="keyword">* (</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) * </span><span class="default">$t</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fdd_per_2</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">*(</span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]-</span><span class="default">2</span><span class="keyword">*</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$p</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])*</span><span class="default">$temp</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fddd_per_2</span><span class="keyword">=</span><span class="default">3</span><span class="keyword">*(</span><span class="default">3</span><span class="keyword">*(</span><span class="default">$p</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$p</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])+</span><span class="default">$p</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]-</span><span class="default">$p</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])*</span><span class="default">$temp</span><span class="keyword">*</span><span class="default">$t</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fddd </span><span class="keyword">= </span><span class="default">$fddd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fdd </span><span class="keyword">= </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fdd_per_2</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$fddd_per_6 </span><span class="keyword">= </span><span class="default">$fddd_per_2 </span><span class="keyword">* (</span><span class="default">1.0 </span><span class="keyword">/ </span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; for (</span><span class="default">$loop</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$loop</span><span class="keyword">&lt;</span><span class="default">$steps</span><span class="keyword">; </span><span class="default">$loop</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">,</span><span class="default">$f</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">$f </span><span class="keyword">+ </span><span class="default">$fd </span><span class="keyword">+ </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_6</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fd </span><span class="keyword">= </span><span class="default">$fd </span><span class="keyword">+ </span><span class="default">$fdd </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fdd </span><span class="keyword">= </span><span class="default">$fdd </span><span class="keyword">+ </span><span class="default">$fddd</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fdd_per_2 </span><span class="keyword">= </span><span class="default">$fdd_per_2 </span><span class="keyword">+ </span><span class="default">$fddd_per_2</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br>}<br><br></span><span class="default">$by </span><span class="keyword">= </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$segmentos</span><span class="keyword">);<br></span><span class="default">$bx </span><span class="keyword">= </span><span class="default">bezier</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$segmentos</span><span class="keyword">);<br></span><span class="default">header </span><span class="keyword">(</span><span class="string">"Content-type: image/jpeg"</span><span class="keyword">);<br></span><span class="default">$tam </span><span class="keyword">= </span><span class="default">200</span><span class="keyword">;<br></span><span class="default">$im </span><span class="keyword">= </span><span class="default">imagecreate</span><span class="keyword">(</span><span class="default">$tam</span><span class="keyword">,</span><span class="default">$tam</span><span class="keyword">);<br></span><span class="default">$background_color </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">, </span><span class="default">200</span><span class="keyword">);<br></span><span class="default">$tc </span><span class="keyword">= </span><span class="default">imagecolorallocate </span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">, </span><span class="default">233</span><span class="keyword">, </span><span class="default">14</span><span class="keyword">, </span><span class="default">91</span><span class="keyword">);<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$segmentos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">,</span><span class="default">$bx</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$tam</span><span class="keyword">-</span><span class="default">$by</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$bx</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$tam</span><span class="keyword">-</span><span class="default">$by</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">],</span><span class="default">$tc</span><span class="keyword">);<br></span><span class="default">imagejpeg</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">); <br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$im</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36667">  
  <a class="name">
  <strong class="user"><em>code_couturier at graffiti dot net</em></strong></a><div class="date" title="2003-10-17 11:56"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36667">
<div class="phpcode"><code><span class="html">
# antialiased draw_line function 1.1 (faster) <br><br># here is a drawLine() posted by nanobot at chipx86 dot com <br># on php.net and enhanced/optimized by myself :) <br><br># here are some changes i made: <br># 1. changed for true-color images (no index_var used) <br># 2. changed rgb extraction to logical shift <br># 3. reducing function call's<br><br>function drawQSLine ($image,$x1,$y1,$x2,$y2,$r,$g,$b) {<br>$icr=$r;<br>$icg=$g;<br>$icb=$b;<br> $dcol = ImageColorAllocate ($image,$icr,$icg,$icb);<br> if ($y1 == $y2) imageline ($image,$x1,$y1,$x2,$y1,$dcol);<br> else if ($x1 == $x2) {&nbsp; <br>&nbsp;&nbsp; imageline ($image,$x1,$y1,$x1,$y2,$dcol); <br> } else {<br> $m = ($y2 - $y1) / ($x2 - $x1);<br> $b = $y1 - $m * $x1;<br><br> if (abs ($m) &lt;2) {<br><br> $x = min ($x1,$x2);<br> $endx = max ($x1,$x2)+1;<br><br> while ($x &lt; $endx) {<br> $y=$m * $x + $b;<br> $y == floor ($y) ? $ya = 1 : $ya = $y - floor ($y);<br> $yb = ceil ($y) - $y;<br> <br> $trgb = ImageColorAt($image,$x,floor($y));<br> $tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br> $tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br> $tcb = $trgb &amp; 0xFF;<br> imagesetpixel ($image,$x,floor ($y),imagecolorallocate ($image,($tcr * $ya + $icr * $yb),<br>($tcg * $ya + $icg * $yb),<br>($tcb * $ya + $icb * $yb)));<br><br> $trgb = ImageColorAt($image,$x,ceil($y));<br> $tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br> $tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br> $tcb = $trgb &amp; 0xFF;<br> imagesetpixel ($image,$x,ceil ($y),imagecolorallocate ($image,($tcr * $yb + $icr * $ya),<br>($tcg * $yb + $icg * $ya), <br>($tcb * $yb + $icb * $ya)));<br><br> $x ++;<br> } # while_x_end<br> } # if_end<br> else { # else_abs_end<br><br> $y = min ($y1,$y2);<br> $endy = max ($y1,$y2)+1;<br><br> while ($y &lt; $endy) {<br> $x=($y - $b) / $m;<br> $x == floor ($x) ? $xa = 1 : $xa = $x - floor ($x);<br> $xb = ceil ($x) - $x;<br><br> $trgb = ImageColorAt($image,floor($x),$y);<br> $tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br> $tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br> $tcb = $trgb &amp; 0xFF;<br> imagesetpixel ($image,floor ($x),$y,imagecolorallocate ($image,($tcr * $xa + $icr * $xb),<br>($tcg * $xa + $icg * $xb),<br>($tcb * $xa + $icb * $xb)));<br><br> $trgb = ImageColorAt($image,ceil($x),$y);<br> $tcr = ($trgb &gt;&gt; 16) &amp; 0xFF;<br> $tcg = ($trgb &gt;&gt; 8) &amp; 0xFF;<br> $tcb = $trgb &amp; 0xFF;<br> imagesetpixel ($image,ceil ($x),$y,imagecolorallocate ($image, ($tcr * $xb + $icr * $xa),<br>($tcg * $xb + $icg * $xa),<br>($tcb * $xb + $icb * $xa)));<br><br> $y ++;<br> }# while_y_end<br> }# else_abs_end<br> }# else_y=y_x=x_end <br>}# drawOSLine_end</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36236">  
  <a class="name">
  <strong class="user"><em>code_couturier at graffiti dot net</em></strong></a><div class="date" title="2003-10-01 09:33"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36236">
<div class="phpcode"><code><span class="html">
# antialiased lines with true-type-fonts !?
<br># yip, it works - not very good - but faster
<br># (below 3 sec) than other routines (~7 sec)
<br># i saw here.
<br>
<br># the antialiased effect is minimal and only 
<br># at the top of the line - but, as better as
<br># nothing ;)
<br>
<br># here is a drawLine routine from Logan Gunthorpe 
<br># (logang at deltatee dot com) posted by nanobot at chipx86 dot com
<br># on php.net and enhanced/optimized by myself :)
<br>
<br>function drawSoftLine ($image, $x1, $y1, $x2, $y2, $r,$g,$b) {
<br>
<br>$fontfile="arial.ttf"; # the font for the dot
<br>$str="ï¿½" ; # the point_char for the dot
<br>$size=12; # the point for the dot_size
<br>
<br> $color = ImageColorAllocate ($image, $r,$g,$b);
<br>
<br> if ($x2 == $x1) {
<br> $tmp = $x1; $x1 = $y1; $y1 = $tmp;
<br> $tmp = $x2; $x2 = $y2; $y2 = $tmp;
<br> $swapx = true;
<br> }
<br>
<br> $m = (float)(( $y2 - $y1 ) / ( $x2 - $x1 ));
<br> $b = (float)($y1 - $m*$x1);
<br>
<br> $strx = min ( $x1 , $x2 );
<br> $endx = max ( $x1 , $x2 );
<br> $x=(int)0;
<br>
<br># the original loop was based on one for_loop
<br># with the if_swap inside. to speed up this loop
<br># i double it, to keep off the permanent if_call's. 
<br>
<br>if (!$swapx) {
<br> for ($x = $strx; $x &lt;= $endx; $x++) { 
<br>&nbsp;&nbsp; $y = (int)($m*$x + $b);&nbsp; 
<br>&nbsp;&nbsp; imagettftext($image, $size, 0, $x, $y, 
<br>&nbsp;&nbsp; $color, $fontfile,$str);
<br> }
<br>} else {
<br> for ($x = $strx; $x &lt;= $endx; $x++) { 
<br>&nbsp;&nbsp; $y = (int)($m*$x + $b);&nbsp; 
<br>&nbsp;&nbsp; imagettftext($image, $size, 0, $y, $x, 
<br>&nbsp;&nbsp; $color, $fontfile,$str);
<br>&nbsp; }
<br>}
<br>
<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="33122">  
  <a class="name">
  <strong class="user"><em>nanobot at chipx86 dot com</em></strong></a><div class="date" title="2003-06-17 05:28"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom33122">
<div class="phpcode"><code><span class="html">
Here is a function for making antialiased lines:<br><br> function imagesmoothline ( $image , $x1 , $y1 , $x2 , $y2 , $color )<br> {<br>&nbsp; $colors = imagecolorsforindex ( $image , $color );<br>&nbsp; if ( $x1 == $x2 )<br>&nbsp; {<br>&nbsp;&nbsp; imageline ( $image , $x1 , $y1 , $x2 , $y2 , $color ); // Vertical line<br>&nbsp; }<br>&nbsp; else<br>&nbsp; {<br>&nbsp;&nbsp; $m = ( $y2 - $y1 ) / ( $x2 - $x1 );<br>&nbsp;&nbsp; $b = $y1 - $m * $x1;<br>&nbsp;&nbsp; if ( abs ( $m ) &lt;= 1 )<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; $x = min ( $x1 , $x2 );<br>&nbsp; &nbsp; $endx = max ( $x1 , $x2 );<br>&nbsp; &nbsp; while ( $x &lt;= $endx )<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp;&nbsp; $y = $m * $x + $b;<br>&nbsp; &nbsp;&nbsp; $y == floor ( $y ) ? $ya = 1 : $ya = $y - floor ( $y );<br>&nbsp; &nbsp;&nbsp; $yb = ceil ( $y ) - $y;<br>&nbsp; &nbsp;&nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , $x , floor ( $y ) ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors['red'] = $tempcolors['red'] * $ya + $colors['red'] * $yb;<br>&nbsp; &nbsp;&nbsp; $tempcolors['green'] = $tempcolors['green'] * $ya + $colors['green'] * $yb;<br>&nbsp; &nbsp;&nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $ya + $colors['blue'] * $yb;<br>&nbsp; &nbsp;&nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br>&nbsp; &nbsp;&nbsp; imagesetpixel ( $image , $x , floor ( $y ) , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , $x , ceil ( $y ) ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors['red'] = $tempcolors['red'] * $yb + $colors['red'] * $ya;<br>&nbsp; &nbsp; &nbsp; $tempcolors['green'] = $tempcolors['green'] * $yb + $colors['green'] * $ya;<br>&nbsp; &nbsp;&nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $yb + $colors['blue'] * $ya;<br>&nbsp; &nbsp;&nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br>&nbsp; &nbsp;&nbsp; imagesetpixel ( $image , $x , ceil ( $y ) , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br>&nbsp; &nbsp;&nbsp; $x ++;<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; else<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; $y = min ( $y1 , $y2 );<br>&nbsp; &nbsp; $endy = max ( $y1 , $y2 );<br>&nbsp; &nbsp; while ( $y &lt;= $endy )<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp;&nbsp; $x = ( $y - $b ) / $m;<br>&nbsp; &nbsp;&nbsp; $x == floor ( $x ) ? $xa = 1 : $xa = $x - floor ( $x );<br>&nbsp; &nbsp;&nbsp; $xb = ceil ( $x ) - $x;<br>&nbsp; &nbsp;&nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , floor ( $x ) , $y ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors['red'] = $tempcolors['red'] * $xa + $colors['red'] * $xb;<br>&nbsp; &nbsp;&nbsp; $tempcolors['green'] = $tempcolors['green'] * $xa + $colors['green'] * $xb;<br>&nbsp; &nbsp;&nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $xa + $colors['blue'] * $xb;<br>&nbsp; &nbsp;&nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br>&nbsp; &nbsp;&nbsp; imagesetpixel ( $image , floor ( $x ) , $y , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors = imagecolorsforindex ( $image , imagecolorat ( $image , ceil ( $x ) , $y ) );<br>&nbsp; &nbsp;&nbsp; $tempcolors['red'] = $tempcolors['red'] * $xb + $colors['red'] * $xa;<br>&nbsp; &nbsp;&nbsp; $tempcolors['green'] = $tempcolors['green'] * $xb + $colors['green'] * $xa;<br>&nbsp; &nbsp;&nbsp; $tempcolors['blue'] = $tempcolors['blue'] * $xb + $colors['blue'] * $xa;<br>&nbsp; &nbsp;&nbsp; if ( imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) == -1 ) imagecolorallocate ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] );<br>&nbsp; &nbsp;&nbsp; imagesetpixel ( $image , ceil ( $x ) , $y , imagecolorexact ( $image , $tempcolors['red'] , $tempcolors['green'] , $tempcolors['blue'] ) );<br>&nbsp; &nbsp;&nbsp; $y ++;<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp; }<br> }<br><br>EDITOR: My previous code contained bugs. Please use this one instead.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="9345">  
  <a class="name">
  <strong class="user"><em>darren at php4hosting dot com</em></strong></a><div class="date" title="2000-10-28 10:48"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom9345">
<div class="phpcode"><code><span class="html">
It does work (With a bit of editing)
<br>save the following as graph.php (You dont need any directorys)
<br>
<br><span class="default">&lt;?php 
<br>Header</span><span class="keyword">(</span><span class="string">"Content-type: image/png"</span><span class="keyword">);
<br></span><span class="default">$picWidth</span><span class="keyword">=</span><span class="default">360</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">; 
<br></span><span class="default">$picHeight</span><span class="keyword">=</span><span class="default">200</span><span class="keyword">; 
<br></span><span class="default">$pic</span><span class="keyword">=</span><span class="default">ImageCreate</span><span class="keyword">(</span><span class="default">$picWidth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">); 
<br></span><span class="default">$cWhite</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">); 
<br></span><span class="default">ImageFilledRectangle</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picWidth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$cWhite</span><span class="keyword">); 
<br></span><span class="default">$cRed</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">); 
<br></span><span class="default">$cBlue</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">); 
<br></span><span class="default">$curX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; 
<br></span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$picHeight</span><span class="keyword">; 
<br>for(</span><span class="default">$pt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">&lt;</span><span class="default">$picWidth</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">++){ 
<br></span><span class="default">$newX</span><span class="keyword">=</span><span class="default">$curX</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; 
<br></span><span class="default">$newY</span><span class="keyword">=(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)+(</span><span class="default">cos</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$newX</span><span class="keyword">))*(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)); 
<br></span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">$curX</span><span class="keyword">,</span><span class="default">$curY</span><span class="keyword">,</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">,</span><span class="default">$cRed</span><span class="keyword">); 
<br></span><span class="default">$curX</span><span class="keyword">=</span><span class="default">$newX</span><span class="keyword">; 
<br></span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$newY</span><span class="keyword">; 
<br>} 
<br></span><span class="default">$curX</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; 
<br></span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">; 
<br>for(</span><span class="default">$pt</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">&lt;</span><span class="default">$picWidth</span><span class="keyword">;</span><span class="default">$pt</span><span class="keyword">++){ 
<br></span><span class="default">$newX</span><span class="keyword">=</span><span class="default">$curX</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">; 
<br></span><span class="default">$newY</span><span class="keyword">=(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)+(</span><span class="default">sin</span><span class="keyword">(</span><span class="default">deg2rad</span><span class="keyword">(</span><span class="default">$newX</span><span class="keyword">))*(</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">)); 
<br></span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">$curX</span><span class="keyword">,</span><span class="default">$curY</span><span class="keyword">,</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">,</span><span class="default">$cBlue</span><span class="keyword">); 
<br></span><span class="default">$curX</span><span class="keyword">=</span><span class="default">$newX</span><span class="keyword">; 
<br></span><span class="default">$curY</span><span class="keyword">=</span><span class="default">$newY</span><span class="keyword">; 
<br>} 
<br></span><span class="default">$cBlack</span><span class="keyword">=</span><span class="default">ImageColorAllocate</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">); 
<br></span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">,</span><span class="default">$cBlack</span><span class="keyword">); 
<br></span><span class="default">ImageLine</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$picWidth</span><span class="keyword">,</span><span class="default">$picHeight</span><span class="keyword">/</span><span class="default">2</span><span class="keyword">,</span><span class="default">$cBlack</span><span class="keyword">); 
<br></span><span class="default">ImagePNG</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">); 
<br></span><span class="default">ImageDestroy</span><span class="keyword">(</span><span class="default">$pic</span><span class="keyword">); 
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98192">  
  <a class="name">
  <strong class="user"><em>allenn at hot dot ee</em></strong></a><div class="date" title="2010-05-31 02:55"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98192">
<div class="phpcode"><code><span class="html">
Function drawing of a line by a brush uses midpoint circle algorithm..., if dullness I agree to remove :))) <br><br><span class="default">&lt;?php<br></span><span class="comment">//function drawLine(resource$image,int $x0,int $y0,int $x1,int $y1,int $lineWidth,int $color)<br></span><span class="keyword">function </span><span class="default">drawLine</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">;<br>&nbsp; </span><span class="default">$ddF_x</span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; </span><span class="default">$ddF_y </span><span class="keyword">= -</span><span class="default">2 </span><span class="keyword">* </span><span class="default">$radius</span><span class="keyword">;<br>&nbsp; </span><span class="default">$x</span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$radius</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y0</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$radius</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br><br>&nbsp; while(</span><span class="default">$x</span><span class="keyword">&lt; </span><span class="default">$y</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; if(</span><span class="default">$f </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$y</span><span class="keyword">--;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$ddF_y </span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">+= </span><span class="default">$ddF_y</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;<br>&nbsp; &nbsp; </span><span class="default">$ddF_x</span><span class="keyword">+= </span><span class="default">2</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">+= </span><span class="default">$ddF_x</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1</span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">+ </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">imageline</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$x0 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y0 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$x1 </span><span class="keyword">- </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$y1 </span><span class="keyword">- </span><span class="default">$x</span><span class="keyword">,</span><span class="default">$color</span><span class="keyword">);<br><br>&nbsp; }<br>}<br></span><span class="default">header </span><span class="keyword">(</span><span class="string">'Content-type: image/png'</span><span class="keyword">);<br></span><span class="default">$img </span><span class="keyword">= </span><span class="default">imagecreatetruecolor</span><span class="keyword">(</span><span class="default">600</span><span class="keyword">,</span><span class="default">600</span><span class="keyword">);<br></span><span class="default">$col </span><span class="keyword">= </span><span class="default">imagecolorallocate</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">255</span><span class="keyword">,</span><span class="default">252</span><span class="keyword">);<br></span><span class="comment">//use the function<br></span><span class="default">rasterCircle</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">50</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">,</span><span class="default">540</span><span class="keyword">,</span><span class="default">540</span><span class="keyword">,</span><span class="default">40</span><span class="keyword">,</span><span class="default">$col</span><span class="keyword">);<br></span><span class="default">imagepng</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">imagedestroy</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.imageline.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:56 GMT -->


</body></html>