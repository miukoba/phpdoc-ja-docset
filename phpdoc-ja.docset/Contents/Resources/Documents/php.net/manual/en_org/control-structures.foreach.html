<html><!-- Mirrored from php.net/manual/en/control-structures.foreach.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:27:44 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>foreach</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="control-structures.foreach.html">
 <link rel="shorturl" href="http://php.net/foreach">
 <link rel="alternate" href="http://php.net/foreach" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="language.control-structures.html">
 <link rel="prev" href="control-structures.for.html">
 <link rel="next" href="control-structures.break.html">

 <link rel="alternate" href="control-structures.foreach.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/control-structures.foreach.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/control-structures.foreach.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/control-structures.foreach.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/control-structures.foreach.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/control-structures.foreach.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/control-structures.foreach.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/control-structures.foreach.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/control-structures.foreach.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/control-structures.foreach.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/control-structures.foreach.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="langref.html">Language Reference</a></li>      <li><a href="language.control-structures.html">Control Structures</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="control-structures.foreach" class="sect1">
 <h2 class="title"><em>foreach</em></h2>
 <p class="verinfo">(PHP 4, PHP 5)</p>
 <p class="para">
  The <em>foreach</em> construct provides an easy way to
  iterate over arrays. <em>foreach</em> works only on arrays
  and objects, and will issue an error when you try to use it on a variable
  with a different data type or an uninitialized variable. There are two
  syntaxes:
  </p><div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>foreach (array_expression as $value)
    statement
foreach (array_expression as $key =&gt; $value)
    statement
</pre></div>
   </div>

  </div>
 <p></p>
 <p class="simpara">
  The first form loops over the array given by
  <em>array_expression</em>. On each iteration, the value of
  the current element is assigned to <em>$value</em> and
  the internal array pointer is advanced by one (so on the next
  iteration, you'll be looking at the next element).
 </p>
 <p class="simpara">
  The second form will additionally assign the current element's key to
  the <em>$key</em> variable on each iteration.
 </p>
 <p class="simpara">
  It is possible to
  <a href="language.oop5.iterations.html" class="link">customize object iteration</a>.
 </p>
 <p class="para">
  </p><blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    When <em>foreach</em> first starts executing, the
    internal array pointer is automatically reset to the first element
    of the array. This means that you do not need to call
    <span class="function"><a href="function.reset.html" class="function">reset()</a></span> before a <em>foreach</em>
    loop.
   </p>
   <p class="para">
    As <em>foreach</em> relies on the internal array pointer, changing it
    within the loop may lead to unexpected behavior.
   </p>
  <p></p></blockquote>
 <p></p>
 <p class="para">
  In order to be able to directly modify array elements within the loop precede
 <em>$value</em> with &amp;. In that case the value will be assigned by
 <a href="language.references.html" class="link">reference</a>.
  </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br>foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>}<br></span><span style="color: #FF8000">//&nbsp;$arr&nbsp;is&nbsp;now&nbsp;array(2,&nbsp;4,&nbsp;6,&nbsp;8)<br></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$value</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;break&nbsp;the&nbsp;reference&nbsp;with&nbsp;the&nbsp;last&nbsp;element<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 <p></p>
 <p class="para">
  Referencing <em>$value</em> is only possible if the iterated array can be 
  referenced (i.e. if it is a variable). The following code won't work:
  </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">)&nbsp;as&nbsp;&amp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 <p></p>
 <div class="warning"><strong class="warning">Warning</strong>
  <p class="para">
   Reference of a <em>$value</em> and the last array element
   remain even after the <em>foreach</em> loop. It is recommended
   to destroy it by <span class="function"><a href="function.unset.html" class="function">unset()</a></span>.
  </p>
 </div>
 <p class="para">
  </p><blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    <em>foreach</em> does not support the ability to
    suppress error messages using '@'.
   </p>
  <p></p></blockquote>
 <p></p>
 <p class="para">
  You may have noticed that the following are functionally
  identical:
  </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br>while&nbsp;(list(,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>}<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 <p></p>
 <p class="para">
  The following are also functionally identical:
  </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$arr&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"one"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"two"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"three"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">reset</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">);<br>while&nbsp;(list(</span><span style="color: #0000BB">$key</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">each</span><span style="color: #007700">(</span><span style="color: #0000BB">$arr</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>}<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Key:&nbsp;</span><span style="color: #0000BB">$key</span><span style="color: #DD0000">;&nbsp;Value:&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 <p></p>
 <p class="para">
  Some more examples to demonstrate usage:
  </p><div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;1:&nbsp;value&nbsp;only&nbsp;*/<br><br></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Current&nbsp;value&nbsp;of&nbsp;\$a:&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;2:&nbsp;value&nbsp;(with&nbsp;its&nbsp;manual&nbsp;access&nbsp;notation&nbsp;printed&nbsp;for&nbsp;illustration)&nbsp;*/<br><br></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">17</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">/*&nbsp;for&nbsp;illustrative&nbsp;purposes&nbsp;only&nbsp;*/<br><br></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br>}<br><br></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;3:&nbsp;key&nbsp;and&nbsp;value&nbsp;*/<br><br></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array(<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"one"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"two"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"three"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"seventeen"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">17<br></span><span style="color: #007700">);<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$k</span><span style="color: #DD0000">]&nbsp;=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;4:&nbsp;multi-dimensional&nbsp;arrays&nbsp;*/<br></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;array();<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"a"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"y"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"z"</span><span style="color: #007700">;<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v1</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$v1&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$v2</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br></span><span style="color: #FF8000">/*&nbsp;foreach&nbsp;example&nbsp;5:&nbsp;dynamic&nbsp;arrays&nbsp;*/<br><br></span><span style="color: #007700">foreach&nbsp;(array(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 <p></p>

 <div class="sect2" id="control-structures.foreach.list">
  <h3 class="title">Unpacking nested arrays with list()</h3>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0)</p>

  <p class="para">
   PHP 5.5 added the ability to iterate over an array of arrays and unpack the
   nested array into loop variables by providing a <span class="function"><a href="function.list.html" class="function">list()</a></span>
   as the value.
  </p>

  <p class="para">
   For example:

   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br>];<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$a&nbsp;contains&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;the&nbsp;nested&nbsp;array,<br>&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;and&nbsp;$b&nbsp;contains&nbsp;the&nbsp;second&nbsp;element.<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A:&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">;&nbsp;B:&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">The above example will output:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>A: 1; B: 2
A: 3; B: 4
</pre></div>
    </div>
   </div>
  <p></p>

  <p class="para">
   You can provide fewer elements in the <span class="function"><a href="function.list.html" class="function">list()</a></span> than there
   are in the nested array, in which case the leftover array values will be
   ignored:

   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br>];<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;there&nbsp;is&nbsp;no&nbsp;$b&nbsp;here.<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">The above example will output:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>1
3
</pre></div>
    </div>
   </div>
  <p></p>

  <p class="para">
   A notice will be generated if there aren't enough array elements to fill
   the <span class="function"><a href="function.list.html" class="function">list()</a></span>:

   </p><div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$array&nbsp;</span><span style="color: #007700">=&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">],<br>&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">],<br>];<br><br>foreach&nbsp;(</span><span style="color: #0000BB">$array&nbsp;</span><span style="color: #007700">as&nbsp;list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A:&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">;&nbsp;B:&nbsp;</span><span style="color: #0000BB">$b</span><span style="color: #DD0000">;&nbsp;C:&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <p class="para">The above example will output:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
Notice: Undefined offset: 2 in example.php on line 7
A: 1; B: 2; C: 

Notice: Undefined offset: 2 in example.php on line 7
A: 3; B: 4; C: 
</pre></div>
    </div>
   </div>
  <p></p>
 </div>
</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="82511">  
  <a class="name">
  <strong class="user"><em>adam dot sindelar at gmail dot com</em></strong></a><div class="date" title="2008-04-14 06:45"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82511">
<div class="phpcode"><code><span class="html">
You can also use the alternative syntax for the foreach cycle:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">):
<br>&nbsp; </span><span class="comment">#do something
<br></span><span class="keyword">endforeach;
<br></span><span class="default">?&gt;
<br></span>
<br>Just thought it worth mentioning.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111688">  
  <a class="name">
  <strong class="user"><em>php at darkain dot com</em></strong></a><div class="date" title="2013-03-16 09:56"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111688">
<div class="phpcode"><code><span class="html">
"Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset()."<br><br>I cannot stress this point of the documentation enough! Here is a simple example of exactly why this must be done:<br><br><span class="default">&lt;?php<br>$arr1 </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">);<br></span><span class="default">$arr2 </span><span class="keyword">= array(</span><span class="string">"x" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="string">"y" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">"z" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">);<br><br>foreach (</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$val</span><span class="keyword">) {}<br>foreach (</span><span class="default">$arr2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {}<br><br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>The output is:<br>array(3) { ["a"]=&gt; int(1) ["b"]=&gt; int(2) ["c"]=&gt; &amp;int(6) }<br>array(3) { ["x"]=&gt; int(4) ["y"]=&gt; int(5) ["z"]=&gt; int(6) }<br><br>Notice how the last index in $arr1 is now the value from the last index in $arr2!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88578">  
  <a class="name">
  <strong class="user"><em>tedivm at tedivm dot com</em></strong></a><div class="date" title="2009-01-29 02:44"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88578">
<div class="phpcode"><code><span class="html">
foreach and the while/list/each methods are not completely identical, and there are occasions where one way is beneficial over the other.
<br>
<br><span class="default">&lt;?php
<br>$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);
<br>
<br>foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);
<br>&nbsp; &nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>Output:
<br>1 2 3 4 5 6 7 8 9 
<br>
<br><span class="default">&lt;?php
<br>$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);
<br>
<br>while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))
<br>{
<br>&nbsp; &nbsp; unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]);
<br>&nbsp; &nbsp; echo </span><span class="default">$value </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>Output:
<br>1 3 5 7 9
<br>
<br>
<br>[EDIT BY danbrown AT php DOT net: Contains a typofix by (scissor AT phplabs DOT pl) on 30-JAN-2009.]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114880">  
  <a class="name">
  <strong class="user"><em>nehuen</em></strong></a><div class="date" title="2014-04-20 03:27"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114880">
<div class="phpcode"><code><span class="html">
foreach by reference internally deleted and created a new reference in each iteration, so it is not possible to directly use this value as a variable parameter values​​, look at the following example where the problem is observed and a possible solution:<br><br><span class="default">&lt;?php<br> </span><span class="keyword">class </span><span class="default">test<br> </span><span class="keyword">{<br>&nbsp; &nbsp; private </span><span class="default">$a </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; private </span><span class="default">$r </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; public function </span><span class="default">show</span><span class="keyword">(&amp;</span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">r </span><span class="keyword">= &amp;</span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">r</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; public function </span><span class="default">reset</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;&nbsp; &nbsp; <br>&nbsp; &nbsp; }<br> }<br> <br> </span><span class="default">$t </span><span class="keyword">= new </span><span class="default">test</span><span class="keyword">();<br> <br> </span><span class="default">$a </span><span class="keyword">= array(array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">),array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">),array(</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">));<br> foreach(</span><span class="default">$a </span><span class="keyword">as &amp;</span><span class="default">$p</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(</span><span class="default">$p</span><span class="keyword">);<br>&nbsp; &nbsp; <br> </span><span class="comment">/* Output obtain:<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 1<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 2<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 1<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 2<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 1<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 2<br> */<br>&nbsp; <br>&nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">reset</span><span class="keyword">();<br>&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$p</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= &amp;</span><span class="default">$p</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$t</span><span class="keyword">-&gt;</span><span class="default">show</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; <br> </span><span class="comment">/* Output obtain:<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 1<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 2<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 3<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 4<br>&nbsp; &nbsp; array (size=2)<br>&nbsp; &nbsp; &nbsp; 0 =&gt; int 5<br>&nbsp; &nbsp; &nbsp; 1 =&gt; int 6<br> */</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99909">  
  <a class="name">
  <strong class="user"><em>Oleg englishman at bigmir dot net</em></strong></a><div class="date" title="2010-09-14 07:12"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99909">
<div class="phpcode"><code><span class="html">
For those who'd like to traverse an array including just added elements (within this very foreach), here's a workaround:
<br>
<br><span class="default">&lt;?php
<br>$values </span><span class="keyword">= array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">);
<br>while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">)) {
<br>&nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$key</span><span class="string"> =&gt; </span><span class="default">$value</span><span class="string"> \r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">3</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] = </span><span class="string">'d'</span><span class="keyword">; 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$values</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] = </span><span class="string">'e'</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>the code above will output:
<br>
<br>1 =&gt; a
<br>2 =&gt; b
<br>3 =&gt; c
<br>4 =&gt; d
<br>5 =&gt; e</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114759">  
  <a class="name">
  <strong class="user"><em>Alastair Hole</em></strong></a><div class="date" title="2014-04-02 09:52"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114759">
<div class="phpcode"><code><span class="html">
What happened to this note:<br>"Unless the array is referenced, foreach operates on a copy of the specified array and not the array itself. foreach has some side effects on the array pointer. Don't rely on the array pointer during or after the foreach without resetting it."<br><br>Is this no longer the case?<br>It seems only to remain in the Serbian documentation: <a rel="nofollow" target="_blank">http://php.net/manual/sr/control-structures.foreach.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="109698">  
  <a class="name">
  <strong class="user"><em>dtowell</em></strong></a><div class="date" title="2012-08-11 12:44"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109698">
<div class="phpcode"><code><span class="html">
References created by foreach hang around past their best-used-by date. For example, the following:<br><br><span class="default">&lt;?php<br>$a </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br>foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$n</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br>foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$n</span><span class="keyword">) </span><span class="comment">// notice NO reference here!<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$n</span><span class="string">\n"</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>will result in:<br><br>ABE<br>BEN<br>BEN<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; ABE<br>&nbsp; &nbsp; [1] =&gt; BEN<br>&nbsp; &nbsp; [2] =&gt; BEN<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106971">  
  <a class="name">
  <strong class="user"><em>nobody at nobody dot com</em></strong></a><div class="date" title="2011-12-22 01:11"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106971">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br>$d3 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;array(</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">));<br>foreach(</span><span class="default">$d3</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] as &amp;</span><span class="default">$v4</span><span class="keyword">){}<br>foreach(</span><span class="default">$d3 </span><span class="keyword">as </span><span class="default">$v4</span><span class="keyword">){}<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d3</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>will get something look like this:<br>array(1) {<br>&nbsp; ["a"]=&gt;<br>&nbsp; array(1) {<br>&nbsp; &nbsp; ["b"]=&gt;<br>&nbsp; &nbsp; &amp;array(1) {<br>&nbsp; &nbsp; &nbsp; ["b"]=&gt;<br>&nbsp; &nbsp; &nbsp; *RECURSION*<br>&nbsp; &nbsp; }<br>&nbsp; }<br>}<br>then you try to walk some data with this array.<br>the script run out of memory and connect reset by peer<br><br>the document says:<br>Warning<br>Reference of a $value and the last array element remain even after the foreach loop. It is recommended to destroy it by unset().<br><br>so what I learn is that NEVER ignore """Warning""" in document....</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104060">  
  <a class="name">
  <strong class="user"><em>billardmchl at aol dot com</em></strong></a><div class="date" title="2011-05-20 01:20"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104060">
<div class="phpcode"><code><span class="html">
This function find well the words, add well adds a () around short words, but the 
<br>array at the end of th function is the same as at the beginning.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">isole_mots</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$chaine </span><span class="keyword">= </span><span class="string">"le petit chat est fou"</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$mots </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">'/[!,-.;?:()[ ]/'</span><span class="keyword">, </span><span class="default">$chaine</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);
<br>&nbsp; &nbsp; foreach (</span><span class="default">$mots </span><span class="keyword">as </span><span class="default">$mot</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$mot</span><span class="keyword">) &lt;= </span><span class="default">3</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mot </span><span class="keyword">= </span><span class="string">"("</span><span class="keyword">.</span><span class="default">$mot</span><span class="keyword">.</span><span class="string">")"</span><span class="keyword">;
<br>&nbsp; &nbsp; print </span><span class="string">" inside foreach </span><span class="default">$mot</span><span class="string"> &lt;br&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>print </span><span class="string">"after foreach array mots"</span><span class="keyword">;&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$mots</span><span class="keyword">);
<br>&nbsp; &nbsp; die();
<br>&nbsp; &nbsp; return </span><span class="default">$mots</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>inside foreach (le)
<br>inside foreach petit
<br>inside foreach chat
<br>inside foreach (est)
<br>inside foreach (fou)
<br>after foreach array motsArray ( [0] =&gt; le [1] =&gt; petit [2] =&gt; chat [3] =&gt; est [4] =&gt; fou )</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115207">  
  <a class="name">
  <strong class="user"><em>liam666 at donnelly-house dot net</em></strong></a><div class="date" title="2014-06-12 01:12"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115207">
<div class="phpcode"><code><span class="html">
This is a decent, simple, and easy way to reference other values of an associative array when using foreach. (effective "next", "prev", etc.)<br>The only care that needs to be taken is if the array is HUGE in size, so you don't run into memory use problems. (and potential speed issues)<br><br>This example uses the 'primary' array, $aPublishSeq, which is ksort-ed to put the array in order according to the associative keys. The array is then copied using a foreach loop to make a duplicate array where the key and value order correspond to the first array, but the keys are sequential numeric starting at zero.<br><br>ksort ($aPublishSeq, SORT_STRING);&nbsp; &nbsp;&nbsp; // put them all in the right order keeping array keys<br>foreach ($aPublishSeq as $aValue)<br>&nbsp;&nbsp; $aPublishIdx[] = $aValue;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // duplicate array using corresponding sequential numeric keys<br><br>Now, in the usage foreach loop, an index variable is used to keep in sync with the associative array.<br><br>$PubIdx = -1;&nbsp; &nbsp;&nbsp; // start at -1 to start at 0 below<br><br>foreach ($aPublishSeq as $sKey =&gt; $sValue) {<br><br>&nbsp; &nbsp; &nbsp; ++$PubIdx;&nbsp; &nbsp;&nbsp; // index into $aPublishIdx array of corresponding element in $aPublishSeq array (for "next" element check, etc.)<br><br>&nbsp;&nbsp; echo $aPublishIdx[$PubIdx&nbsp; - 1]&nbsp; &nbsp;&nbsp; // previous array value<br>&nbsp;&nbsp; echo $aPublishIdx[$PubIdx]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // current array value<br>&nbsp;&nbsp; echo $aPublishIdx[$PubIdx&nbsp; + 1]&nbsp; &nbsp;&nbsp; // next array value<br><br>....<br><br>It's simple, but it works, and without much muss or fuss.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112590">  
  <a class="name">
  <strong class="user"><em>Delian Krustev</em></strong></a><div class="date" title="2013-07-02 01:43"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112590">
<div class="phpcode"><code><span class="html">
I want to add some inline comments to dtowell's piece of code about the iteration by reference:<br><br><span class="default">&lt;?php<br><br>$a </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br><br>foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$n</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br><br></span><span class="comment"># At the end of this cycle the variable $n refers to the same memory as $a[2]<br># So when the second "foreach" assigns a value to $n :<br><br></span><span class="keyword">foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$n</span><span class="keyword">) </span><span class="comment">// notice NO reference here!<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$n</span><span class="string">\n"</span><span class="keyword">;<br><br></span><span class="comment"># it is also modifying $a[2] .<br># So on the three repetitions of the second "foreach" the array will look like:<br># 1. ('abe','ben','abe') - assigned the value of the first element to the last element<br># 2. ('abe','ben','ben') - assigned the value of the second element to the last element<br># 3. ('abe','ben','ben') - assigned the value of the third element to itself<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113098">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-08-29 08:21"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113098">
<div class="phpcode"><code><span class="html">
[quote]<br>I want to add some inline comments to dtowell's piece of code about the iteration by reference:<br><br><span class="default">&lt;?php<br><br>$a </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br><br>foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;&amp;</span><span class="default">$n</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">);<br><br></span><span class="comment"># At the end of this cycle the variable $n refers to the same memory as $a[2]<br># So when the second "foreach" assigns a value to $n :<br><br></span><span class="keyword">foreach (</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$n</span><span class="keyword">) </span><span class="comment">// notice NO reference here!<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"</span><span class="default">$n</span><span class="string">\n"</span><span class="keyword">;<br><br></span><span class="comment"># it is also modifying $a[2] .<br># So on the three repetitions of the second "foreach" the array will look like:<br># 1. ('abe','ben','abe') - assigned the value of the first element to the last element<br># 2. ('abe','ben','ben') - assigned the value of the second element to the last element<br># 3. ('abe','ben','ben') - assigned the value of the third element to itself<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>[/quote]<br><br>To resolve this problem - should always use unset after foreach:<br><span class="default">&lt;?php<br><br>$array </span><span class="keyword">= array(</span><span class="string">'abe'</span><span class="keyword">,</span><span class="string">'ben'</span><span class="keyword">,</span><span class="string">'cam'</span><span class="keyword">);<br><br>foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;&amp;</span><span class="default">$val </span><span class="keyword">) {}<br>unset(</span><span class="default">$key</span><span class="keyword">); unset(</span><span class="default">$val</span><span class="keyword">);<br>foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$val </span><span class="keyword">) {}<br>unset(</span><span class="default">$key</span><span class="keyword">); unset(</span><span class="default">$val</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114346">  
  <a class="name">
  <strong class="user"><em>mvaqasuddin at gmail dot com</em></strong></a><div class="date" title="2014-02-11 02:56"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom114346">
<div class="phpcode"><code><span class="html">
more control over foreach you can use these code for zebra stripping in table class or other.<br><br>foreach ( $data as $key =&gt; $row ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $class = fmod( $key,2 ) ? 'even' : 'odd';<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;tr class = "'.$class.'" &gt;';<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ( $row as $cell ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;td&gt;$cell&lt;/td&gt;";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "&lt;/tr&gt;";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76133">  
  <a class="name">
  <strong class="user"><em>Luke at chaoticlogic dot net</em></strong></a><div class="date" title="2007-07-02 01:08"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76133">
<div class="phpcode"><code><span class="html">
Alright, I had a little error. I had one foreach() declaration, and then another foreach() declaration.<br><br>They went:<br><span class="default">&lt;?php<br></span><span class="comment">//$connections is an array of Socket resources<br></span><span class="keyword">foreach (</span><span class="default">$connections </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">//the code here is impertinent <br><br></span><span class="keyword">}<br><br></span><span class="comment">//$users is an associative array<br></span><span class="keyword">foreach (</span><span class="default">$users </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">//the code here is impertinent <br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>Alright, now, what error was produced as a result of this?<br>This one:<br>"Warning: Cannot use scalar value as array in filename.php on line 69."<br><br>I then realized something; the reason for this came from the fact that I used $key, and $value for both of them in the exact same way.<br><br>As a response to this, I've developed two ways to fix this:<br><span class="default">&lt;?php<br></span><span class="comment">//add this to the end of every foreach() you use<br></span><span class="keyword">unset(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)<br></span><span class="default">?&gt;<br></span><br>OR<br><br>Simply use different variables for each one.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111825">  
  <a class="name">
  <strong class="user"><em>Ashus</em></strong></a><div class="date" title="2013-04-02 01:25"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111825">
<div class="phpcode"><code><span class="html">
If you wondered how to create a list of all possible combinations of variable amount of arrays (multiple foreach), you might use this:<br><br><span class="default">&lt;?php<br><br>$a</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = array(</span><span class="string">'a1'</span><span class="keyword">,</span><span class="string">'a2'</span><span class="keyword">);<br></span><span class="default">$a</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = array(</span><span class="string">'b1'</span><span class="keyword">,</span><span class="string">'b2'</span><span class="keyword">,</span><span class="string">'b3'</span><span class="keyword">);<br></span><span class="default">$a</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = array(</span><span class="string">'c1'</span><span class="keyword">,</span><span class="string">'c2'</span><span class="keyword">);<br><br>function </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; foreach (</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] as </span><span class="default">$v</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">$s</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$s</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>echo </span><span class="default">getAllCombinations</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>the result:<br><br>a1b1c1<br>a1b1c2<br>a1b2c1<br>a1b2c2<br>a1b3c1<br>a1b3c2<br>a2b1c1<br>a2b1c2<br>a2b2c1<br>a2b2c2<br>a2b3c1<br>a2b3c2</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107533">  
  <a class="name">
  <strong class="user"><em>Voitcus at wp dot pl</em></strong></a><div class="date" title="2012-02-15 08:55"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107533">
<div class="phpcode"><code><span class="html">
You can even iterate through "dynamic" arrays that do not physically exist, but are objects that implement Iterator interface. They don't need to be stored in memory when foreach starts.<br><br>Consider the array that contains some values (I called it $allValues in the example below) and we want to have only some of them (eg. the ones that are dividable by 2). I create an object that would serve as dynamic array, that means it would "dynamically update" its values together with $allValues. The main advantage is that I store only one array, and it's the only array I serialize.<br><br>An object of MyIter class will not contain any values itself:<br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">MyIter </span><span class="keyword">implements </span><span class="default">Iterator </span><span class="keyword">{ </span><span class="comment">// you can implement ArrayAccess and Countable interfaces too, this will make class MyIter behave like a "real" array<br>&nbsp; </span><span class="keyword">private </span><span class="default">$position </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// an internal position of the current element<br>&nbsp; // please note that $position has nothing common with $allValues!<br><br>&nbsp; </span><span class="keyword">private function </span><span class="default">getTable</span><span class="keyword">(){ </span><span class="comment">// prepare a temporary "static" table of all objects in the class<br>&nbsp; &nbsp; </span><span class="keyword">global </span><span class="default">$allValues</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">=array(); </span><span class="comment">// temporary variable<br>&nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$allValues </span><span class="keyword">as </span><span class="default">$obj</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; if(</span><span class="default">$obj </span><span class="keyword">% </span><span class="default">2 </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) </span><span class="comment">// check if the value is even<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[]=</span><span class="default">$obj</span><span class="keyword">; </span><span class="comment">// if yes, I want it<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; }&nbsp; &nbsp; <br><br>&nbsp; </span><span class="comment">// the all below declared methods are public and belong to the Iterator interface<br>&nbsp; </span><span class="keyword">function </span><span class="default">rewind</span><span class="keyword">() { </span><span class="comment">// a method to start iterating<br>&nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// just move to the beginning<br>&nbsp; </span><span class="keyword">}<br><br>&nbsp; function </span><span class="default">current</span><span class="keyword">() { </span><span class="comment">// retrieves the current element<br>&nbsp; &nbsp; </span><span class="default">$table</span><span class="keyword">=</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getTable</span><span class="keyword">(); </span><span class="comment">// let us prepare a table<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$table</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">]; </span><span class="comment">// and return the current element<br>&nbsp; </span><span class="keyword">}<br><br>&nbsp; function </span><span class="default">key</span><span class="keyword">() { </span><span class="comment">// retrieves the current element's key<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">; </span><span class="comment">// this is used by foreach(... as $key=&gt;$value), not important here<br>&nbsp; </span><span class="keyword">}<br><br>&nbsp; function </span><span class="default">next</span><span class="keyword">() { </span><span class="comment">// move to next element<br>&nbsp; &nbsp; </span><span class="keyword">++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">;<br>&nbsp; }<br><br>&nbsp; function </span><span class="default">valid</span><span class="keyword">() { </span><span class="comment">// check if the current element is valid (ie. if it exists)<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">position</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getTable</span><span class="keyword">());<br>&nbsp; }<br>} </span><span class="comment">// end of class<br><br>// now prepare the array of 12 elements<br></span><span class="default">$allValues</span><span class="keyword">=array(</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">);<br><br></span><span class="comment">//we would like to have a dynamic array of all even values<br></span><span class="default">$iterator</span><span class="keyword">=new </span><span class="default">MyIter</span><span class="keyword">();<br><br>foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br>&nbsp; echo </span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>This will result in:<br>0<br>2<br>4<br>6<br>8<br>10<br><br>(You may also like to see what var_dump($iterator) produces).<br><br>Another great advantage is that you can modify the main table "on-the-fly" and it has its impact. Let us modify the last foreach loop:<br><span class="default">&lt;?php<br></span><span class="comment">// ...all above shall stay as it was<br></span><span class="keyword">foreach(</span><span class="default">$iterator </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br>&nbsp; echo </span><span class="default">$value</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br>&nbsp; if(</span><span class="default">$value</span><span class="keyword">==</span><span class="default">6</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$allValues</span><span class="keyword">=array(</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="string">"I modified source array!&lt;br /&gt;"</span><span class="keyword">;<br>&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span>This produces now:<br>0<br>2<br>4<br>6<br>I modified source array!<br><br>However, if you feel it is rather a catastrophic disadvantage (maybe for example, it shows the values 0, 4, and 6 which were removed when we reached 6), and wish to have a "static" array that will iterate even in modified objects, just call getTable() in rewind() method and save it in temporary (private perhaps) field. In my example getTable() is called every iteration, and it calls another foreach through $allValues, which together might be time-consuming. Consider what you need.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71854">  
  <a class="name">
  <strong class="user"><em>simplex</em></strong></a><div class="date" title="2006-12-19 12:12"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71854">
<div class="phpcode"><code><span class="html">
"As of PHP 5, you can easily modify array's elements by preceding $value with &amp;. This will assign reference instead of copying the value."<br><br>There are cases where array_walk or array_map are inadequate (conditional required) or you're just too lazy to write a function and pass values to it for use with array_map...<br><br>My solution to foreach for php 4 and 5 to modify values of an array directly:<br><br><span class="default">&lt;?php<br><br>$testarr </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="string">"d" </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">);<br><br></span><span class="default">$testarr_keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br></span><span class="default">$testarr_values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br><br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$testarr</span><span class="keyword">[</span><span class="default">$testarr_keys</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]] = </span><span class="default">$testarr_values</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] * </span><span class="default">2</span><span class="keyword">;<br>}<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$testarr</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114728">  
  <a class="name">
  <strong class="user"><em>sainthyoga2003 at gmail dot com</em></strong></a><div class="date" title="2014-03-29 11:14"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114728">
<div class="phpcode"><code><span class="html">
Note that prior to PHP 5.5 you will get a T_LIST parse error for:<br><span class="default">&lt;?php<br></span><span class="keyword">foreach(</span><span class="default">$list </span><span class="keyword">as list(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)) {...<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31455">  
  <a class="name">
  <strong class="user"><em>php at electricsurfer dot com</em></strong></a><div class="date" title="2003-04-22 01:33"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31455">
<div class="phpcode"><code><span class="html">
[Ed Note:&nbsp; You can also use array_keys() so that you don't have to have the $value_copy variable --alindeman at php.net]
<br>
<br>I use the following to modify the original values of the array:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value_copy</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">=&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];
<br>&nbsp; &nbsp;&nbsp; </span><span class="comment">// ...
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'New Value'</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/control-structures.foreach.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:27:45 GMT -->


</body></html>