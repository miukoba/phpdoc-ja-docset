<html><!-- Mirrored from php.net/manual/en/function.wddx-deserialize.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:56:28 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>wddx_deserialize</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.wddx-deserialize.html">
 <link rel="shorturl" href="http://php.net/wddx-deserialize">
 <link rel="alternate" href="http://php.net/wddx-deserialize" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.wddx.html">
 <link rel="prev" href="function.wddx-add-vars.html">
 <link rel="next" href="function.wddx-packet-end.html">

 <link rel="alternate" href="function.wddx-deserialize.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.wddx-deserialize.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.wddx-deserialize.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.wddx-deserialize.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.wddx-deserialize.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.wddx-deserialize.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.wddx-deserialize.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.wddx-deserialize.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.wddx-deserialize.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.wddx-deserialize.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.wddx-deserialize.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.wddx.html">WDDX</a></li>      <li><a href="ref.wddx.html">WDDX Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.wddx-deserialize" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">wddx_deserialize</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">wddx_deserialize</span> — <span class="dc-title">Unserializes a WDDX packet</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.wddx-deserialize-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>wddx_deserialize</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$packet</code></span>
   )</div>

  <p class="para rdfs-comment">
   Unserializes a WDDX <code class="parameter">packet</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.wddx-deserialize-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">packet</code></dt>

     <dd>

      <p class="para">
       A WDDX packet, as a string or stream.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.wddx-deserialize-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the deserialized value which can be a string, a number or an
   array. Note that structures are deserialized into associative arrays.
  </p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="88897">  
  <a class="name">
  <strong class="user"><em>Magnus Deininger, dma05 at web dot de</em></strong></a><div class="date" title="2009-02-12 05:57"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88897">
<div class="phpcode"><code><span class="html">
When writing your wddx file manually with an UTF-8 aware editor and saving it in utf-8, if your data gets its special characters mysteriously scrambled, try to add an xml header that marks the output as iso-8859-1, like this one:<br><br>&lt;?xml version="1.1" encoding="iso-8859-1" ?&gt;<br><br>This makes the wddx decode function treat the input as iso-8859-1, so it will not try to treat it as utf-8 and do an implicit decode to iso-8859-1. You will then have read all string data in the wddx packet in their original utf-8 encoding, so that 'echo' and other output functions will produce the intended result if you have set the output encoding to utf-8.<br><br>(Bugs reports on this behaviour seem to be treated as bogus, so it would seem in order to point out this incorrect and highly confusing side-effect.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87291">  
  <a class="name">
  <strong class="user"><em>dormilich at netscape dot net</em></strong></a><div class="date" title="2008-11-28 05:13"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87291">
<div class="phpcode"><code><span class="html">
When deserializing objects make sure you have the class definition loaded. wddx_deserialize() doesn't call the class itself, so you will receive a fatal error.<br>Nevertheless you can look for the class manually and delegate it to __autoload().<br><br><span class="default">&lt;?php<br></span><span class="comment">// $wddx_string needs to be valid XML to be loaded by SimpleXML.<br>// class_exists() will call the __autoload() function. if you don't&nbsp; <br>// want to use __autoloload(), use require_once()<br><br></span><span class="keyword">function </span><span class="default">loadClassesFromWDDX</span><span class="keyword">(</span><span class="default">$wddx_string</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$wddx_string</span><span class="keyword">);<br><br>&nbsp; &nbsp; foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="string">'//var'</span><span class="keyword">) as </span><span class="default">$var</span><span class="keyword">) <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$var</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] == </span><span class="string">'php_class_name'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">class_exists</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">-&gt;</span><span class="default">string</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Class '" . </span><span class="default">$var</span><span class="keyword">-&gt;</span><span class="default">string</span><span class="string"> . "'not available.'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// trigger_error('Class '" . $var-&gt;string . "'not available.', E_USER_ERROR);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60963">  
  <a class="name">
  <strong class="user"><em>dave at codexweb dot co dot za</em></strong></a><div class="date" title="2006-01-21 04:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60963">
<div class="phpcode"><code><span class="html">
Here's a handy wddx_deserialize clone I wrote a while back. It uses PHP5 SimpleXML and recursion to do pretty much the same task as wddx_deserialize. Hope it comes in handy for someone.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'wddx_deserialize'</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Clone implementation of wddx_deserialize<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$xmlpacket</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$xmlpacket </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty(</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">struct</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struct </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="string">"struct/var"</span><span class="keyword">) as </span><span class="default">$var</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty(</span><span class="default">$var</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= (string) </span><span class="default">$var</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struct</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$struct</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (!empty(</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">array</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="string">"array/*"</span><span class="keyword">) as </span><span class="default">$var</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (!empty(</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">string</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (string) </span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">string</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if (!empty(</span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">number</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (int) </span><span class="default">$xmlpacket</span><span class="keyword">-&gt;</span><span class="default">number</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">((string) </span><span class="default">$xmlpacket</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (int) </span><span class="default">$xmlpacket</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (string) </span><span class="default">$xmlpacket</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sxe </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xmlpacket</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$datanode </span><span class="keyword">= </span><span class="default">$sxe</span><span class="keyword">-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="string">"/wddxPacket[@version='1.0']/data"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$datanode</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59021">  
  <a class="name">
  <strong class="user"><em>php dot net at werner-ott dot de</em></strong></a><div class="date" title="2005-11-24 12:20"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59021">
<div class="phpcode"><code><span class="html">
On migrating wddx_deserialize() from PHP 4.x to PHP 5.1 (5.1.0RC6):<br><br>While<br><br>&nbsp; $buffer = wddx_serialize_vars($some_array);<br>&nbsp; $some_array = wddx_deserialize($buffer);<br><br>worked fine with PHP 4.x, the deserialization failed with PHP 5.1. In the above example $some_array will just be an empty string under 5.1<br><br>While wddx_serialize_vars() seems to behave identical in 4.x and 5.1, wddx_deserialize() does NOT.<br><br>Prepending XML encoding information to the buffer turned out to be at least a workaround. So, the following works with PHP 5.1:<br><br>&nbsp; $buffer = wddx_serialize_vars($some_array);<br>&nbsp; $buffer = '&lt;?xml version="1.0"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; encoding="ISO-8859-1"?&gt;'.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $buffer;<br>&nbsp; $some_array = wddx_deserialize($buffer);<br><br>NB: It may well be, that the behavioural difference between 4.x and 5.1 described above can only be observed if the array contains certain characters, i.e. german Umlaute (������). So this workaround may not be necessary in each and every case.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47549">  
  <a class="name">
  <strong class="user"><em>mail_fidel at yahoo dot com</em></strong></a><div class="date" title="2004-11-19 12:11"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom47549">
<div class="phpcode"><code><span class="html">
To properly deserialize a wddx file it was to be utf8_encoded.<br><br>The following code will NOT work (PHP5.0.2 FreeBSD):<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $data </span><span class="keyword">= </span><span class="default">wddx_serialize_value</span><span class="keyword">(array(</span><span class="string">"xyz���"</span><span class="keyword">,</span><span class="string">"abcd"</span><span class="keyword">));<br>&nbsp;&nbsp; print </span><span class="default">$data</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">));<br><br></span><span class="default">?&gt;<br></span><br>Even thought the serialization is done right, the deserialization will not work unless you encode the text using utf8.<br><br>This code WILL work:<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $data </span><span class="keyword">= </span><span class="default">wddx_serialize_value</span><span class="keyword">(array(</span><span class="default">utf8_encode</span><span class="keyword">(</span><span class="string">"xyz���"</span><span class="keyword">),</span><span class="string">"abcd"</span><span class="keyword">));<br>&nbsp;&nbsp; print </span><span class="default">$data</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42505">  
  <a class="name">
  <strong class="user"><em>xavier at c-est-simple dot com</em></strong></a><div class="date" title="2004-05-19 04:09"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42505">
<div class="phpcode"><code><span class="html">
JavaScript/PHP interroperability:<br><br>If you want to exchange wddx packets between a JavaScript application using the JS wddx library from openwddx (<a rel="nofollow" target="_blank">http://www.openwddx.org/downloads/</a>), and a PHP script using wddx functions, be aware that the encoding of the classes of objects serialized in the wddx packet is not made the same way in both implementations.<br><br>The JS lib uses a 'type' attribute in the 'struct' tab and gives it the name of the class of the object serialized in the 'struct' element, while PHP uses a 'php_class_name' tag within the 'struct'.<br>NB : to get the type attribute with JS serialisation, you need to set the 'wddxSerializationType' member in your classes<br><br>Example with an object of class 'exemple' containing 2 members _attr1 and _attr2.<br>(NB : in french, 'example' is spelled 'exemple', okay ? :-)<br><br>JS serialization :<br>&lt;wddxPacket version='1.0'&gt;<br> &lt;header/&gt;<br> &lt;data&gt;<br>&nbsp; &lt;struct type="exemple"&gt;<br>&nbsp;&nbsp; &lt;var name='_attr1'&gt;<br>&nbsp; &nbsp; &lt;string&gt;foo&lt;/string&gt;<br>&nbsp;&nbsp; &lt;/var&gt;<br>&nbsp;&nbsp; &lt;var name='_attr2'&gt;<br>&nbsp; &nbsp; &lt;string&gt;bar&lt;/string&gt;<br>&nbsp;&nbsp; &lt;/var&gt;<br>&nbsp; &lt;/struct&gt;<br> &lt;/data&gt;<br>&lt;/wddxPacket&gt;<br><br>php serialization:<br>&lt;wddxPacket version='1.0'&gt;<br> &lt;header/&gt;<br> &lt;data&gt;<br>&nbsp; &lt;struct&gt;<br>&nbsp;&nbsp; &lt;var name='php_class_name'&gt;<br>&nbsp; &nbsp; &lt;string&gt;exemple&lt;/string&gt;<br>&nbsp;&nbsp; &lt;/var&gt;<br>&nbsp;&nbsp; &lt;var name='_attr1'&gt;<br>&nbsp; &nbsp; &lt;string&gt;foo&lt;/string&gt;<br>&nbsp;&nbsp; &lt;/var&gt;<br>&nbsp;&nbsp; &lt;var name='_attr2'&gt;<br>&nbsp; &nbsp; &lt;string&gt;bar&lt;/string&gt;<br>&nbsp;&nbsp; &lt;/var&gt;<br>&nbsp; &lt;/struct&gt;<br> &lt;/data&gt;<br>&lt;/wddxPacket&gt;<br><br>I like the JS approach better.<br>So if you need the compatibility, the workaround is quite simple:<br>- add a 'php_class_name' member in your JS objects, giving it the name of the class for value, and the JS generated packet will be correctly deserialized with PHP in classed objects.<br><br>- use a regexp on a PHP generated packet to add the 'type' attribute so that the JS deserialization instanciates objects of the right class:<br>&nbsp; &nbsp; &nbsp; $pat = "/&lt;struct&gt;&lt;var name='php_class_name'&gt;&lt;string&gt;(\w+)&lt;\/string&gt;/" ;<br>&nbsp; &nbsp; &nbsp; $rep = "&lt;struct type='\$1'&gt;&lt;var name='php_class_name'&gt;&lt;string&gt;\$1&lt;/string&gt;" ;<br>&nbsp; &nbsp; &nbsp; $serialised = preg_replace($pat, $rep, $serialised );<br>NB : this only works because the 'php_class_name' tag is just next to the 'struct' tag.<br>Who knows if this is going to be true in future releases... ?<br><br>This way, you can exchange JS and PHP objects (provided you define your JS and PHP classes the same way) smoothly...<br><br>It's worth saying that both implementations, as well as my interroperability workaround, handle correctly objects with members that are also objects.<br><br>NB : NB means Nota Bene.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="42478">  
  <a class="name">
  <strong class="user"><em>xavier at c-est-simple.com</em></strong></a><div class="date" title="2004-05-18 10:19"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom42478">
<div class="phpcode"><code><span class="html">
Beware, although the deserialized objects are instanciated class objects (if the php_class_name tag is amongst the children of the struct tag and its text content is the name of a loaded class), the constructor of the class has not been called at all.<br>You can use the members and call the methods of the object all right, but any initialisation action that the constructor might be in charge of is missing.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="15443">  
  <a class="name">
  <strong class="user"><em>php at mike2k dot com</em></strong></a><div class="date" title="2001-09-10 06:06"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom15443">
<div class="phpcode"><code><span class="html">
if you have WDDX data coming from a third party source and it isnt being parsed correctly in your php, try translating their WDDX. we have a third party sending us WDDX from cold fusion, and it uses a &lt;recordset&gt; element, which PHP seems to ignore (looking around the web we found some other people having trouble) so the (hopefully temporary) solution we found was to translate the WDDX midstream and then we were able to parse it:
<br>
<br>$url = "<a rel="nofollow" target="_blank">http://somedomain.com/blah.wddx</a>";
<br>$fp = fopen($url,"r");
<br>$page = fread($fp,10000);
<br>fclose($fp);
<br>$page = str_replace("&lt;recordset","&lt;struct",$page);
<br>$page = str_replace("&lt;/recordset","&lt;/struct",$page);
<br>$page = str_replace("&lt;field","&lt;var",$page);
<br>$page = str_replace("&lt;/field","&lt;/var",$page);
<br>$values = wddx_deserialize($page);
<br>while(list($key,$val) = each($values)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; print "$key =&gt; $val&lt;BR&gt;";
<br>}
<br>
<br>this works for us. it's a hack, and hopefully php will support this in the future or something.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="9078">  
  <a class="name">
  <strong class="user"><em>medvitz at medvitz dot net</em></strong></a><div class="date" title="2000-10-14 05:29"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom9078">
<div class="phpcode"><code><span class="html">
You can also serialize instantiated class objects with the wddx functions.&nbsp; 
<br>ie.
<br>
<br><span class="default">&lt;?php
<br>$packet_id </span><span class="keyword">= </span><span class="default">wddx_packet_start</span><span class="keyword">(</span><span class="string">"PHP"</span><span class="keyword">); 
<br></span><span class="default">wddx_add_vars</span><span class="keyword">(</span><span class="default">$packet_id</span><span class="keyword">, </span><span class="string">"objvar"</span><span class="keyword">); 
<br></span><span class="default">$packet </span><span class="keyword">= </span><span class="default">wddx_packet_end</span><span class="keyword">(</span><span class="default">$packet_id</span><span class="keyword">); 
<br>
<br></span><span class="default">$a </span><span class="keyword">=&nbsp; </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$packet</span><span class="keyword">);
<br></span><span class="default">$obj </span><span class="keyword">= </span><span class="default">$a</span><span class="keyword">[</span><span class="default">objvar</span><span class="keyword">]; 
<br></span><span class="default">?&gt;
<br></span>
<br>now $obj is a useable object, that looks like the original.
<br>
<br>Note that with this method, you need to know what the variable name of the original object was.&nbsp; You can use one of the array functions to get the object in the event that the original object's variable name was unknown.
<br>
<br>
<br>*** only verified on linux with 4.0.2</span>
</code></div>
  </div>
 </div>
  <div class="note" id="1973">  
  <a class="name">
  <strong class="user"><em>djm at web dot us dot uu dot net</em></strong></a><div class="date" title="1999-10-18 09:58"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom1973">
<div class="phpcode"><code><span class="html">
The packet string you pass to this function doesn't have to be sanitized first; it searches for a WDDX packet within the string.&nbsp; So the string can contain HTML markup and random text outside of the packet, and that is all ignored.
<br>This means you can get a packet from another web page like this:
<br><span class="default">&lt;?php
<br>$fhandle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://myserver.com/packet.php</a>"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);
<br>if (</span><span class="default">$fhandle</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$page </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fhandle</span><span class="keyword">,</span><span class="default">10000</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fhandle</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">wddx_deserialize</span><span class="keyword">(</span><span class="default">$page</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">"pi is:&lt;br&gt;" </span><span class="keyword">. </span><span class="default">$value</span><span class="keyword">[</span><span class="string">"pi"</span><span class="keyword">] . </span><span class="string">"&lt;p&gt;\n"</span><span class="keyword">;
<br>} else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; print </span><span class="string">"could not get packet.php&lt;p&gt;"</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90013">  
  <a class="name">
  <strong class="user"><em>valer underscore crisan at yahoo</em></strong></a><div class="date" title="2009-04-01 02:03"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90013">
<div class="phpcode"><code><span class="html">
In PHP 5.2.9, we noticed that wddx serialize and deserialize seems to use UTF-8 encoding for XML input and the output data. There are some posts below that talk about fixing the input XML data so deserialize would work fine on special chars in ISO-8859-1 encoding, but none of the posts talks about the output encoding.<br><br>Consider this test:<br>$text = "Jür";<br>$packet = wddx_serialize_value($text);<br>$header = '&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;';<br>$newText = wddx_deserialize($header . $packet);<br>echo "WDDX Packet: $packet\n";<br>echo "Deserialized Object: $newText\n";<br><br>The output is:<br><br>WDDX Packet: &lt;wddxPacket version='1.0'&gt;&lt;header/&gt;&lt;data&gt;&lt;string&gt;Jür&lt;/string&gt;&lt;/data&gt;&lt;/wddxPacket&gt;<br>Deserialized Object: JÃ¼r<br><br>The deserialized string is not in ISO-8859-1 encoding. It is in UTF-8 encoding. So we need to run utf8_decode() on the deserialized data to convert it back to ISO-8859-1 encoding which is what our application expects.<br><br>Hope this helps.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.wddx-deserialize.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:56:28 GMT -->


</body></html>