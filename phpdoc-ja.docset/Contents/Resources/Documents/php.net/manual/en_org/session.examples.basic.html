<html><!-- Mirrored from php.net/manual/en/session.examples.basic.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:41 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Basic usage</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="session.examples.basic.html">
 <link rel="shorturl" href="session.examples.basic.html">
 <link rel="alternate" href="session.examples.basic.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="session.examples.html">
 <link rel="prev" href="session.examples.html">
 <link rel="next" href="session.idpassing.html">

 <link rel="alternate" href="session.examples.basic.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/session.examples.basic.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/session.examples.basic.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/session.examples.basic.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/session.examples.basic.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/session.examples.basic.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/session.examples.basic.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/session.examples.basic.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/session.examples.basic.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/session.examples.basic.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/session.examples.basic.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.session.html">Session Extensions</a></li>      <li><a href="book.session.html">Sessions</a></li>      <li><a href="session.examples.html">Examples</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="session.examples.basic" class="section">
  <h2 class="title">Basic usage</h2>
   <p class="para">
    Sessions are a simple way to store data for individual users against a unique session ID.
    This can be used to persist state information between page requests.  Session IDs are normally
    sent to the browser via session cookies and the ID is used to retrieve existing session data.
    The absence of an ID or session cookie lets PHP know to create a new session, and generate a new
    session ID.
   </p>
   <p class="para">
    Sessions follow a simple workflow.  When a session is started, PHP will either retrieve an
    existing session using the ID passed (usually from a session cookie) or if no session is passed
    it will create a new session.  PHP will populate the <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> superglobal
    with any session data after the session has started.  When PHP shuts down, it will automatically
    take the contents of the <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> superglobal, serialize it, and send it
    for storage using the session save handler.
   </p>
   <p class="para">
    By default, PHP uses the internal <code class="parameter">files</code> save handler which
    is set by <a href="session.configuration.html#ini.session.save-handler" class="link">session.save_handler</a>.
    This saves session data on the server at the location specified by the
    <a href="session.configuration.html#ini.session.save-path" class="link">session.save_path</a> configuration directive.
   </p>
   <p class="para">
    Sessions can be started manually using the <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> function.
    If the <a href="session.configuration.html#ini.session.auto-start" class="link">session.auto_start</a> directive is set
    to <code class="parameter">1</code>, a session will automatically start on request startup.
   </p>
   <p class="para">
    Sessions normally shutdown automatically when PHP is finished executing a script, but can be
    manually shutdown using the <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span> function.
   </p>
  <p class="para">
   </p><div class="example" id="example-4878">
    <p><strong>Example #1 
     Registering a variable with <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>.
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>session_start</span><span style="color: #007700">();<br>if&nbsp;(!isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]))&nbsp;{<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]++;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-4879">
    <p><strong>Example #2 
     Unregistering a variable with <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>.
    </strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>session_start</span><span style="color: #007700">();<br>unset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="caution"><strong class="caution">Caution</strong>
    <p class="para">
     Do NOT unset the whole <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> with
     <em>unset($_SESSION)</em> as this will disable the
     registering of session variables through the
     <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> superglobal.
    </p>
   </div>
  <p></p>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    You can't use references in session variables as there is no feasible way
    to restore a reference to another variable.
   </p>
  </div>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    register_globals will overwrite variables in the global scope whose names are shared with session variables. Please see <a href="security.globals.html" class="link">Using Register Globals</a> for details.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    File based sessions (the default in PHP) lock the session file once a
    session is opened via <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> or implicitly via
    <a href="session.configuration.html#ini.session.auto-start" class="link">session.auto_start</a>. Once
    locked, no other script can access the same session file until it has been
    closed by the first script terminating or calling
    <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span>.
   </p>
   <p class="para">
    This is most likely to be an issue on Web sites that use AJAX heavily and
    have multiple concurrent requests. The easiest way to deal with it is to
    call <span class="function"><a href="function.session-write-close.html" class="function">session_write_close()</a></span> as soon as any required
    changes to the session have been made, preferably early in the script.
    Alternatively, a different session backend that does support concurrency
    could be used.
   </p>
  <p></p></blockquote>
 </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="111200">  
  <a class="name">
  <strong class="user"><em>AlexFBP</em></strong></a><div class="date" title="2013-01-25 04:50"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111200">
<div class="phpcode"><code><span class="html">
Regardless, if you need to set the header 'Location:' before closing the session; explicitly close the php script with "exit()" or "die()" functions. Remember that when a php script ends, the session automatically are going to be closed.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113315">  
  <a class="name">
  <strong class="user"><em>guy at syntheticwebapps dot com</em></strong></a><div class="date" title="2013-09-25 04:01"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113315">
<div class="phpcode"><code><span class="html">
Despite the warning about not being able to use references inside the session space, I've done it in the past and apparently completely successfully. That is, I can do something like this:<br><br><span class="default">&lt;?php<br>session_start</span><span class="keyword">();<br>if (!</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'favorite'</span><span class="keyword">]) {<br>&nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'cow'</span><span class="keyword">] = </span><span class="string">"Elsie"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'favorite'</span><span class="keyword">] =&amp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'cow'</span><span class="keyword">];<br>&nbsp; &nbsp; echo </span><span class="string">"We set cow = '</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">cow</span><span class="keyword">]</span><span class="string">' and favorite =&amp; cow (</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">favorite</span><span class="keyword">]</span><span class="string">).&lt;br/&gt;Reload the page to see if both change when one changes later.&lt;br/&gt;"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"Having re-entered the session after initial settings were made: cow = </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">cow</span><span class="keyword">]</span><span class="string"> and favorite = </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">favorite</span><span class="keyword">]</span><span class="string">.&lt;br/&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'cow'</span><span class="keyword">] = </span><span class="string">"Bessie"</span><span class="keyword">;<br>&nbsp; &nbsp; echo </span><span class="string">"We reassigned cow = </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">cow</span><span class="keyword">]</span><span class="string"> and our restored reference variable favorite = </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="default">favorite</span><span class="keyword">]</span><span class="string">&lt;br/&gt;Note the presence of the &amp;s in the var_dump below.&lt;pre&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="string">"&lt;/pre&gt;&lt;br/&gt;If you reload, the test will begin again."</span><span class="keyword">;<br>&nbsp; &nbsp; unset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'cow'</span><span class="keyword">], </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'favorite'</span><span class="keyword">]);<br>&nbsp; &nbsp; </span><span class="default">session_destroy</span><span class="keyword">();<br>}<br></span><span class="default">?&gt;<br></span>yields the following after the second request: <br><br>Having re-entered the session after initial settings were made: cow = Elsie and favorite = Elsie.<br>We reassigned cow = Bessie and our restored reference variable favorite = Bessie<br>Note the presence of the &amp;s in the var_dump below.<br>array(2) {<br>&nbsp; ["cow"]=&gt;<br>&nbsp; &amp;string(6) "Bessie"<br>&nbsp; ["favorite"]=&gt;<br>&nbsp; &amp;string(6) "Bessie"<br>}<br>If you reload, the test will begin again.<br><br>I've found this ability very useful and storage efficient in the session data.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109981">  
  <a class="name">
  <strong class="user"><em>jpleveille at webgraphe dot com</em></strong></a><div class="date" title="2012-09-07 06:06"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom109981">
<div class="phpcode"><code><span class="html">
As mentioned in the documentation, using session_write_close() shuts down the session. It is particularly useful if you want to use header('Location: SOMEURL'); to a URL within the same scope of the current script, that will load the session. Why?<br><br>When you use this header directive, the browser is requested to redirect the user to the given URL. If that URL is in the scope of the script where header() is called (let's say, same URL), the requested URL "COULD" load the session BEFORE it has actually been shut down in the previous script, and you might end up with the session from the previous request, reverting all modifications to session in the the last script.<br><br><span class="default">&lt;?php<br>session_start</span><span class="keyword">();<br><br>if (!isset(</span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'hello'</span><span class="keyword">]))<br>{<br>&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'hello'</span><span class="keyword">] = </span><span class="string">'world'</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">session_write_close</span><span class="keyword">();<br>&nbsp; </span><span class="comment">// session is now closed, it's safe to redirect<br>&nbsp; // if not closed, $_SESSION['hello'] may not be set properly<br>&nbsp; // when loading the page again<br>&nbsp; // (in this very case, calls to this script could loop for a while)<br>&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Location: ' </span><span class="keyword">. </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114023">  
  <a class="name">
  <strong class="user"><em>eddie at onefoldmedia dot com</em></strong></a><div class="date" title="2014-01-02 05:20"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114023">
<div class="phpcode"><code><span class="html">
If a session is not saving and you have verified that session_start() is being called, then double check capitalization. $_session can store variables but will not be treated like a session or cause an error.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/session.examples.basic.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:41 GMT -->


</body></html>