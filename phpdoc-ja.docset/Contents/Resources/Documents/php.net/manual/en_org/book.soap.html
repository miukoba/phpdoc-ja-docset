<html><!-- Mirrored from php.net/manual/en/book.soap.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:43:02 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>SOAP</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="book.soap.html">
 <link rel="shorturl" href="http://php.net/soap">
 <link rel="alternate" href="http://php.net/soap" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="refs.webservice.html">
 <link rel="prev" href="sca-soapproxy.createdataobject.html">
 <link rel="next" href="intro.soap.html">

 <link rel="alternate" href="book.soap.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/book.soap.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/book.soap.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/book.soap.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/book.soap.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/book.soap.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/book.soap.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/book.soap.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/book.soap.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/book.soap.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/book.soap.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.webservice.html">Web Services</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="book.soap" class="book">
 
 <h1 class="title">SOAP</h1>
 

 

 







 







 
 








 






 






 






 






 






 








<ul class="chunklist chunklist_book"><li><a href="intro.soap.html">Introduction</a></li><li><a href="soap.setup.html">Installing/Configuring</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="soap.requirements.html">Requirements</a></li><li><a href="soap.installation.html">Installation</a></li><li><a href="soap.configuration.html">Runtime Configuration</a></li><li><a href="soap.resources.html">Resource Types</a></li></ul></li><li><a href="soap.constants.html">Predefined Constants</a></li><li><a href="ref.soap.html">SOAP Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.is-soap-fault.html">is_soap_fault</a> — Checks if a SOAP call has failed</li><li><a href="function.use-soap-error-handler.html">use_soap_error_handler</a> — Set whether to use the SOAP error handler</li></ul></li><li><a href="class.soapclient.html">SoapClient</a> — The SoapClient class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapclient.call.html">SoapClient::__call</a> — Calls a SOAP function (deprecated)</li><li><a href="soapclient.construct.html">SoapClient::__construct</a> — SoapClient constructor</li><li><a href="soapclient.dorequest.html">SoapClient::__doRequest</a> — Performs a SOAP request</li><li><a href="soapclient.getfunctions.html">SoapClient::__getFunctions</a> — Returns list of available SOAP functions</li><li><a href="soapclient.getlastrequest.html">SoapClient::__getLastRequest</a> — Returns last SOAP request</li><li><a href="soapclient.getlastrequestheaders.html">SoapClient::__getLastRequestHeaders</a> — Returns the SOAP headers from the last request</li><li><a href="soapclient.getlastresponse.html">SoapClient::__getLastResponse</a> — Returns last SOAP response</li><li><a href="soapclient.getlastresponseheaders.html">SoapClient::__getLastResponseHeaders</a> — Returns the SOAP headers from the last response</li><li><a href="soapclient.gettypes.html">SoapClient::__getTypes</a> — Returns a list of SOAP types</li><li><a href="soapclient.setcookie.html">SoapClient::__setCookie</a> — The __setCookie purpose</li><li><a href="soapclient.setlocation.html">SoapClient::__setLocation</a> — Sets the location of the Web service to use</li><li><a href="soapclient.setsoapheaders.html">SoapClient::__setSoapHeaders</a> — Sets SOAP headers for subsequent calls</li><li><a href="soapclient.soapcall.html">SoapClient::__soapCall</a> — Calls a SOAP function</li><li><a href="soapclient.soapclient.html">SoapClient::SoapClient</a> — SoapClient constructor</li></ul></li><li><a href="class.soapserver.html">SoapServer</a> — The SoapServer class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapserver.addfunction.html">SoapServer::addFunction</a> — Adds one or more functions to handle SOAP requests</li><li><a href="soapserver.addsoapheader.html">SoapServer::addSoapHeader</a> — Add a SOAP header to the response</li><li><a href="soapserver.construct.html">SoapServer::__construct</a> — SoapServer constructor</li><li><a href="soapserver.fault.html">SoapServer::fault</a> — Issue SoapServer fault indicating an error</li><li><a href="soapserver.getfunctions.html">SoapServer::getFunctions</a> — Returns list of defined functions</li><li><a href="soapserver.handle.html">SoapServer::handle</a> — Handles a SOAP request</li><li><a href="soapserver.setclass.html">SoapServer::setClass</a> — Sets the class which handles SOAP requests</li><li><a href="soapserver.setobject.html">SoapServer::setObject</a> — Sets the object which will be used to handle SOAP requests</li><li><a href="soapserver.setpersistence.html">SoapServer::setPersistence</a> — Sets SoapServer persistence mode</li><li><a href="soapserver.soapserver.html">SoapServer::SoapServer</a> — SoapServer constructor</li></ul></li><li><a href="class.soapfault.html">SoapFault</a> — The SoapFault class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapfault.construct.html">SoapFault::__construct</a> — SoapFault constructor</li><li><a href="soapfault.soapfault.html">SoapFault::SoapFault</a> — SoapFault constructor</li><li><a href="soapfault.tostring.html">SoapFault::__toString</a> — Obtain a string representation of a SoapFault</li></ul></li><li><a href="class.soapheader.html">SoapHeader</a> — The SoapHeader class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapheader.construct.html">SoapHeader::__construct</a> — SoapHeader constructor</li><li><a href="soapheader.soapheader.html">SoapHeader::SoapHeader</a> — SoapHeader constructor</li></ul></li><li><a href="class.soapparam.html">SoapParam</a> — The SoapParam class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapparam.construct.html">SoapParam::__construct</a> — SoapParam constructor</li><li><a href="soapparam.soapparam.html">SoapParam::SoapParam</a> — SoapParam constructor</li></ul></li><li><a href="class.soapvar.html">SoapVar</a> — The SoapVar class<ul class="chunklist chunklist_book chunklist_children"><li><a href="soapvar.construct.html">SoapVar::__construct</a> — SoapVar constructor</li><li><a href="soapvar.soapvar.html">SoapVar::SoapVar</a> — SoapVar constructor</li></ul></li></ul></div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="83489">  
  <a class="name">
  <strong class="user"><em>aeg at mallxs dot nl</em></strong></a><div class="date" title="2008-05-28 05:19"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83489">
<div class="phpcode"><code><span class="html">
SoapFault exception: [SOAP-ENV:Client] looks like we got no XML document<br><br>This error can have to reasons:<br>1: Your server script has some hidden output like spaces before or afher <span class="default">&lt;?php </span><span class="keyword">... </span><span class="default">?&gt;</span> or echoing some text<br>2: You have a bug in your server script;<br>&nbsp; &nbsp; resulting in a error message output<br><br>Test your server script by calling it direct&nbsp; from the browser.<br>The result should be a clean output like :<br><br>−&lt;SOAP-ENV:Envelope&gt;<br>−&lt;SOAP-ENV:Body&gt;<br>−&lt;SOAP-ENV:Fault&gt;<br>&nbsp; &lt;faultcode&gt;SOAP-ENV:Server&lt;/faultcode&gt;<br>&nbsp; &lt;faultstring&gt;Bad Request. Can't find HTTP_RAW_POST_DATA&lt;/faultstring&gt;<br>&lt;/SOAP-ENV:Fault&gt;<br>&lt;/SOAP-ENV:Body&gt;<br>&lt;/SOAP-ENV:Envelope&gt;<br><br>This tell's you there was a request but without data; This is OK<br>Now if you get the error when calling with your soap client;<br>remember that your server now will call other functions in the server.php script because it now has some data to process</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93888">  
  <a class="name">
  <strong class="user"><em>moazzam at moazzam-khan dot com</em></strong></a><div class="date" title="2009-10-05 09:37"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93888">
<div class="phpcode"><code><span class="html">
If anyone is trying to use this for accessing Sabre's web services, it won't work. Sabre checks the request header "Content-Type" to see if it is "text/xml" . If it is not text/xml then it sends an error back. <br><br>You will need to create a socket connection and use that to send the request over.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96033">  
  <a class="name">
  <strong class="user"><em>stephenlansell at gmail dot com</em></strong></a><div class="date" title="2010-02-03 07:19"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96033">
<div class="phpcode"><code><span class="html">
Here is an example of a php client talking to a asmx server:
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; $soapClient </span><span class="keyword">= new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"https://soapserver.example.com/blahblah.asmx?wsdl"</span><span class="keyword">); 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Prepare SoapHeader parameters
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sh_param </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'Username'&nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; </span><span class="string">'username'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'Password'&nbsp; &nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; </span><span class="string">'password'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$headers </span><span class="keyword">= new </span><span class="default">SoapHeader</span><span class="keyword">(</span><span class="string">'<a rel="nofollow" target="_blank">http://soapserver.example.com/webservices</a>'</span><span class="keyword">, </span><span class="string">'UserCredentials'</span><span class="keyword">, </span><span class="default">$sh_param</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Prepare Soap Client
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$soapClient</span><span class="keyword">-&gt;</span><span class="default">__setSoapHeaders</span><span class="keyword">(array(</span><span class="default">$headers</span><span class="keyword">));
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Setup the RemoteFunction parameters
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ap_param </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'amount'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt;&nbsp; &nbsp; </span><span class="default">$irow</span><span class="keyword">[</span><span class="string">'total_price'</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Call RemoteFunction ()
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$error </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; try {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">$soapClient</span><span class="keyword">-&gt;</span><span class="default">__call</span><span class="keyword">(</span><span class="string">"RemoteFunction"</span><span class="keyword">, array(</span><span class="default">$ap_param</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; } catch (</span><span class="default">SoapFault $fault</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$error </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print(</span><span class="string">"
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert('Sorry, blah returned the following ERROR: "</span><span class="keyword">.</span><span class="default">$fault</span><span class="keyword">-&gt;</span><span class="default">faultcode</span><span class="keyword">.</span><span class="string">"-"</span><span class="keyword">.</span><span class="default">$fault</span><span class="keyword">-&gt;</span><span class="default">faultstring</span><span class="keyword">.</span><span class="string">". We will now take you back to our home page.');
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; window.location = 'main.php';
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$error </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$auth_num </span><span class="keyword">= </span><span class="default">$info</span><span class="keyword">-&gt;</span><span class="default">RemoteFunctionResult</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$auth_num </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ....
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Setup the OtherRemoteFunction() parameters
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$at_param </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'amount'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$irow</span><span class="keyword">[</span><span class="string">'total_price'</span><span class="keyword">],
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'description'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$description</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Call OtherRemoteFunction()
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trans </span><span class="keyword">= </span><span class="default">$soapClient</span><span class="keyword">-&gt;</span><span class="default">__call</span><span class="keyword">(</span><span class="string">"OtherRemoteFunction"</span><span class="keyword">, array(</span><span class="default">$at_param</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$trans_result </span><span class="keyword">= </span><span class="default">$trans</span><span class="keyword">-&gt;</span><span class="default">OtherRemoteFunctionResult</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ....
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Record the transaction error in the database
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Kill the link to Soap
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">unset(</span><span class="default">$soapClient</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }&nbsp; &nbsp; 
<br>}
<br>&nbsp; &nbsp; 
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86503">  
  <a class="name">
  <strong class="user"><em>Ryan</em></strong></a><div class="date" title="2008-10-22 06:21"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86503">
<div class="phpcode"><code><span class="html">
If you are having an issue where SOAP cannot find the functions that are actually there if you view the wsdl file, it's because PHP is caching the wsdl file (for a day at a time). To turn this off, have this line on every script that uses SOAP: ini_set("soap.wsdl_cache_enabled", "0"); to disable the caching feature.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88692">  
  <a class="name">
  <strong class="user"><em>jeff at jeffrodriguez dot com</em></strong></a><div class="date" title="2009-02-03 01:37"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88692">
<div class="phpcode"><code><span class="html">
Named parameters are actually super easy once you know how to do it. No need to bother with SoapParam or SoapVar for the most part.<br><br>The code:<br><span class="default">&lt;?php<br>$ws</span><span class="keyword">-&gt;</span><span class="default">getAsset</span><span class="keyword">(array(<br>&nbsp; </span><span class="string">'assetId' </span><span class="keyword">=&gt; </span><span class="default">5967<br></span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Generates the following SOAP body: (formatted for readability)<br>&lt;SOAP-ENV:Body&gt;<br>&nbsp; &lt;ns1:getAsset&gt;<br>&nbsp; &nbsp; &lt;assetId&gt;5967&lt;/assetId&gt;<br>&nbsp; &lt;/ns1:getAsset&gt;<br>&lt;/SOAP-ENV:Body&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108646">  
  <a class="name">
  <strong class="user"><em>rafinskipg at gmail dot com</em></strong></a><div class="date" title="2012-05-14 02:54"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108646">
<div class="phpcode"><code><span class="html">
Support for MTOM addign this code to your project:<br><br><span class="default">&lt;?php <br></span><span class="keyword">class </span><span class="default">MySoapClient </span><span class="keyword">extends </span><span class="default">SoapClient<br></span><span class="keyword">{<br>&nbsp; &nbsp; public function </span><span class="default">__doRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">, </span><span class="default">$action</span><span class="keyword">, </span><span class="default">$version</span><span class="keyword">, </span><span class="default">$one_way </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$response </span><span class="keyword">= </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__doRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">, </span><span class="default">$action</span><span class="keyword">, </span><span class="default">$version</span><span class="keyword">, </span><span class="default">$one_way</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// parse $response, extract the multipart messages and so on<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; //this part removes stuff<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$start</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">,</span><span class="string">'&lt;?xml'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$end</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$response_string</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$response</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return(</span><span class="default">$response_string</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">?&gt;<br></span><br>Then you can do this <br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">new </span><span class="default">MySoapClient</span><span class="keyword">(</span><span class="default">$wsdl_url</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83409">  
  <a class="name">
  <strong class="user"><em>nodkz at mail dot ru</em></strong></a><div class="date" title="2008-05-24 02:25"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83409">
<div class="phpcode"><code><span class="html">
PROBLEM (with SOAP extension under PHP5) of transferring object, that contains objects or array of objects. Nested object would not transfer.<br><br>SOLUTION:<br>This class was developed by trial and error by me. So this 23 lines of code for most developers writing under PHP5 solves fate of using SOAP extension.<br><br><span class="default">&lt;?php<br></span><span class="comment">/*<br>According to specific of organization process of SOAP class in PHP5, we must wrap up complex objects in SoapVar class. Otherwise objects would not be encoded properly and could not be loaded on remote SOAP handler.<br><br>Function "getAsSoap" call for encoding object for transmission. After encoding it can be properly transmitted.<br>*/<br></span><span class="keyword">abstract class </span><span class="default">SOAPable </span><span class="keyword">{<br>&nbsp; &nbsp; public function </span><span class="default">getAsSOAP</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$this </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;&amp;</span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">prepareSOAPrecursive</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; private function </span><span class="default">prepareSOAPrecursive</span><span class="keyword">(&amp;</span><span class="default">$element</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$element </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;&amp;</span><span class="default">$val</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">prepareSOAPrecursive</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element</span><span class="keyword">=new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">,</span><span class="default">SOAP_ENC_ARRAY</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }elseif(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$element </span><span class="keyword">instanceof </span><span class="default">SOAPable</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element</span><span class="keyword">-&gt;</span><span class="default">getAsSOAP</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element</span><span class="keyword">=new </span><span class="default">SoapVar</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">,</span><span class="default">SOAP_ENC_OBJECT</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">// ------------------------------------------<br>//&nbsp; ABSTRACT EXAMPLE<br>// ------------------------------------------<br><br></span><span class="keyword">class </span><span class="default">PersonList </span><span class="keyword">extends </span><span class="default">SOAPable </span><span class="keyword">{<br>&nbsp; protected </span><span class="default">$ArrayOfPerson</span><span class="keyword">; </span><span class="comment">// variable MUST be protected or public!<br></span><span class="keyword">}<br><br>class </span><span class="default">Person </span><span class="keyword">extends </span><span class="default">SOAPable </span><span class="keyword">{<br>&nbsp;&nbsp; </span><span class="comment">//any data<br></span><span class="keyword">} <br><br></span><span class="default">$client</span><span class="keyword">=new </span><span class="default">SoapClient</span><span class="keyword">(</span><span class="string">"test.wsdl"</span><span class="keyword">, array( </span><span class="string">'soap_version'</span><span class="keyword">=&gt;</span><span class="default">SOAP_1_2</span><span class="keyword">, </span><span class="string">'trace'</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">'classmap' </span><span class="keyword">=&gt; array(</span><span class="string">'Person' </span><span class="keyword">=&gt; </span><span class="string">"Person"</span><span class="keyword">, </span><span class="string">'PersonList' </span><span class="keyword">=&gt; </span><span class="string">"PersonList"</span><span class="keyword">)&nbsp; ));<br><br></span><span class="default">$PersonList</span><span class="keyword">=new </span><span class="default">PersonList</span><span class="keyword">;<br><br></span><span class="comment">// some actions<br><br></span><span class="default">$PersonList</span><span class="keyword">-&gt;</span><span class="default">getAsSOAP</span><span class="keyword">();<br><br></span><span class="default">$client</span><span class="keyword">-&gt;</span><span class="default">someMethod</span><span class="keyword">(</span><span class="default">$PersonList</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>So every class, which will transfer via SOAP, must be extends from class SOAPable.&nbsp; <br>As you can see, in code above, function prepareSOAPrecursive search another nested objects in parent object or in arrays, and if does it, tries call function getAsSOAP() for preparation of nested objects, after that simply wrap up via SoapVar class.<br><br>So in code before transmitting simply call $obj-&gt;getAsSOAP()</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90379">  
  <a class="name">
  <strong class="user"><em>Raphal Gertz</em></strong></a><div class="date" title="2009-04-18 09:50"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90379">
<div class="phpcode"><code><span class="html">
Juste a note to avoid wasting time on php-soap protocol and format support.<br><br>Until php 5.2.9 (at least) the soap extension is only capable of understanding wsdl 1.0 and 1.1 format.<br><br>The wsdl 2.0, a W3C recommendation since june 2007, ISN'T supported in php soap extension.<br>(the soap/php_sdl.c source code don't handle wsdl2.0 format)<br><br>The wsdl 2.0 is juste the 1.2 version renamed because it has substantial differences from WSDL 1.1.<br><br>The differences between the two format may not be invisible if you don't care a lot.<br><br>The wsdl 1.0 format structure (see <a rel="nofollow" target="_blank">http://www.w3.org/TR/wsdl</a>) :<br>&lt;definitions ...&gt;<br>&nbsp; &nbsp; &lt;types ...&gt;<br>&nbsp; &nbsp; &lt;/types&gt;<br>&nbsp; &nbsp; &lt;message ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;part ...&gt;<br>&nbsp; &nbsp; &lt;/message&gt;<br>&nbsp; &nbsp; &lt;portType ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;operation ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;output ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/operation&gt;<br>&nbsp; &nbsp; &lt;/portType&gt;<br>&nbsp; &nbsp; &lt;binding ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;operation ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;output ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/operation&gt;<br>&nbsp; &nbsp; &lt;/binding&gt;<br>&nbsp; &nbsp; &lt;service ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;port ...&gt;<br>&nbsp; &nbsp; &lt;/service&gt;<br>&lt;/definitions&gt;<br><br>And the wsdl 2.0 format structure (see <a rel="nofollow" target="_blank">http://www.w3.org/TR/wsdl20/</a>) :<br>&lt;description ...&gt;<br>&nbsp; &nbsp; &lt;types ...&gt;<br>&nbsp; &nbsp; &lt;/types&gt;<br>&nbsp; &nbsp; &lt;interface ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;operation ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;output ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/operation&gt;<br>&nbsp; &nbsp; &lt;/interface&gt;<br>&nbsp; &nbsp; &lt;binding ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;operation ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;output ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fault ... /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/operation&gt;<br>&nbsp; &nbsp; &lt;/binding&gt;<br>&nbsp; &nbsp; &lt;service ...&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;endpoint ...&gt;<br>&nbsp; &nbsp; &lt;/service&gt;<br>&lt;/description&gt;<br><br>The typical error message if you provide a wsdl 2.0 format file :<br>PHP Fatal error:&nbsp; SOAP-ERROR: Parsing WSDL: Couldn't find &lt;definitions&gt; in 'wsdl/example.wsdl' in /path/client.php on line 9</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84977">  
  <a class="name">
  <strong class="user"><em>ivan dot cubillas at xeridia dot com</em></strong></a><div class="date" title="2008-08-08 01:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84977">
<div class="phpcode"><code><span class="html">
The problem with the PHP WebService Client<br><br>We've a JAVA WebService Server which could have attached documents. When the PHP Client send the dates, the Server take it correctly, but when <br>the server return it to the PHP Client, the client reply always that is not a XML valid document.<br><br>The problem could be than the JAVA Server adds (to this type of XML binary files)&nbsp; the documentType head: xml+xop and the clean doesn't understand<br>this head as a XML document.<br><br>There is some possibility to solve this problem in the PHP Client without doing changes in the JAVA Server?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106732">  
  <a class="name">
  <strong class="user"><em>dennis at pleasedontspam dot clansman dot nl</em></strong></a><div class="date" title="2011-12-02 03:53"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106732">
<div class="phpcode"><code><span class="html">
When you receive the soapfault message: "looks like we got no XML document" it might be that you're talking to a server that supports MTOM (<a rel="nofollow" target="_blank">http://www.w3.org/TR/soap12-mtom/</a>). <br><br>MTOM is, as of yet (5.3.6), not supported by the SoapClient.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96345">  
  <a class="name">
  <strong class="user"><em>vishal dot thakkar at exateam dot com</em></strong></a><div class="date" title="2010-02-22 06:19"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96345">
<div class="phpcode"><code><span class="html">
I was trying to figure out for days and days to make SOAP server return an associative array and NOT an object ....<br><br>To get an array (not object) in the SOAP response, just serialize the array before returning it to the clent..<br><br>hope it helps...<br>Thanks.....<br>Vishal Thakkar.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86521">  
  <a class="name">
  <strong class="user"><em>beau dot scott at gmail dot com</em></strong></a><div class="date" title="2008-10-22 03:34"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86521">
<div class="phpcode"><code><span class="html">
If you've been trying to send null to a service that considers empty property tags as empty strings rather than null, here's an extending class that fixes this using xsi:nil:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">class </span><span class="default">XSoapClient </span><span class="keyword">extends </span><span class="default">SoapClient
<br></span><span class="keyword">{
<br>&nbsp; &nbsp; const </span><span class="default">XSI_NS </span><span class="keyword">= </span><span class="string">"<a rel="nofollow" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>"</span><span class="keyword">;
<br>&nbsp; &nbsp; const </span><span class="default">_NULL_ </span><span class="keyword">= </span><span class="string">"xxx_replacedduetobrokephpsoapclient_xxx"</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; protected </span><span class="default">$mustParseNulls </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; public function </span><span class="default">__doRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">, </span><span class="default">$action</span><span class="keyword">, </span><span class="default">$version</span><span class="keyword">, </span><span class="default">$one_way </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mustParseNulls</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mustParseNulls </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$request </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;ns1:(\w+)&gt;'</span><span class="keyword">.</span><span class="default">self</span><span class="keyword">::</span><span class="default">_NULL_</span><span class="keyword">.</span><span class="string">'&lt;\/ns1:\\1&gt;/'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;ns1:$1 xsi:nil="true"/&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$request</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$request </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;SOAP-ENV:Envelope )/'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'\\1 xmlns:xsi="'</span><span class="keyword">.</span><span class="default">self</span><span class="keyword">::</span><span class="default">XSI_NS</span><span class="keyword">.</span><span class="string">'" '</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$request</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__doRequest</span><span class="keyword">(</span><span class="default">$request</span><span class="keyword">, </span><span class="default">$location</span><span class="keyword">, </span><span class="default">$action</span><span class="keyword">, </span><span class="default">$version</span><span class="keyword">, </span><span class="default">$one_way</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$params </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$v </span><span class="keyword">=== </span><span class="default">null</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">mustParseNulls </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$params</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">self</span><span class="keyword">::</span><span class="default">_NULL_</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">parent</span><span class="keyword">::</span><span class="default">__call</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, </span><span class="default">$params</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100453">  
  <a class="name">
  <strong class="user"><em>mariamr at gmail dot com</em></strong></a><div class="date" title="2010-10-16 06:38"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100453">
<div class="phpcode"><code><span class="html">
“SOAP-ERROR: Parsing WSDL: Couldn’t find in ‘PATH/TO/YOUR/WSDL’”
<br>
<br>This error occurs because some versions of PHP SOAP client&nbsp; do not send the user name and password that you pass as the options input parameter of the SoapClient constructor&nbsp; . Yu need to pass the credentials in the web service URL like this:
<br>$soapClient =new SoapClient(“<a rel="nofollow" target="_blank">http://user:password@example.com/blahblah.wsdl”</a>);</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/book.soap.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:43:06 GMT -->


</body></html>