<html><!-- Mirrored from php.net/manual/en/book.simplexml.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:43:41 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>SimpleXML</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="book.simplexml.html">
 <link rel="shorturl" href="http://php.net/simplexml">
 <link rel="alternate" href="http://php.net/simplexml" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="refs.xml.html">
 <link rel="prev" href="sdo-das-xml-document.setxmlversion.html">
 <link rel="next" href="intro.simplexml.html">

 <link rel="alternate" href="book.simplexml.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/book.simplexml.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/book.simplexml.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/book.simplexml.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/book.simplexml.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/book.simplexml.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/book.simplexml.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/book.simplexml.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/book.simplexml.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/book.simplexml.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/book.simplexml.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="book.simplexml" class="book">
 
 <h1 class="title">SimpleXML</h1>
 
 
 
 
 
 







 







 







 


 


 






 








<ul class="chunklist chunklist_book"><li><a href="intro.simplexml.html">Introduction</a></li><li><a href="simplexml.setup.html">Installing/Configuring</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexml.requirements.html">Requirements</a></li><li><a href="simplexml.installation.html">Installation</a></li><li><a href="simplexml.configuration.html">Runtime Configuration</a></li><li><a href="simplexml.resources.html">Resource Types</a></li></ul></li><li><a href="simplexml.constants.html">Predefined Constants</a></li><li><a href="simplexml.examples.html">Examples</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexml.examples-basic.html">Basic SimpleXML usage</a></li><li><a href="simplexml.examples-errors.html">Dealing with XML errors</a></li></ul></li><li><a href="class.simplexmlelement.html">SimpleXMLElement</a> — The SimpleXMLElement class<ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexmlelement.addattribute.html">SimpleXMLElement::addAttribute</a> — Adds an attribute to the SimpleXML element</li><li><a href="simplexmlelement.addchild.html">SimpleXMLElement::addChild</a> — Adds a child element to the XML node</li><li><a href="simplexmlelement.asxml.html">SimpleXMLElement::asXML</a> — Return a well-formed XML string based on SimpleXML element</li><li><a href="simplexmlelement.attributes.html">SimpleXMLElement::attributes</a> — Identifies an element's attributes</li><li><a href="simplexmlelement.children.html">SimpleXMLElement::children</a> — Finds children of given node</li><li><a href="simplexmlelement.construct.html">SimpleXMLElement::__construct</a> — Creates a new SimpleXMLElement object</li><li><a href="simplexmlelement.count.html">SimpleXMLElement::count</a> — Counts the children of an element</li><li><a href="simplexmlelement.getdocnamespaces.html">SimpleXMLElement::getDocNamespaces</a> — Returns namespaces declared in document</li><li><a href="simplexmlelement.getname.html">SimpleXMLElement::getName</a> — Gets the name of the XML element</li><li><a href="simplexmlelement.getnamespaces.html">SimpleXMLElement::getNamespaces</a> — Returns namespaces used in document</li><li><a href="simplexmlelement.registerxpathnamespace.html">SimpleXMLElement::registerXPathNamespace</a> — Creates a prefix/ns context for the next XPath query</li><li><a href="simplexmlelement.savexml.html">SimpleXMLElement::saveXML</a> — Alias of SimpleXMLElement::asXML</li><li><a href="simplexmlelement.tostring.html">SimpleXMLElement::__toString</a> — Returns the string content</li><li><a href="simplexmlelement.xpath.html">SimpleXMLElement::xpath</a> — Runs XPath query on XML data</li></ul></li><li><a href="class.simplexmliterator.html">SimpleXMLIterator</a> — The SimpleXMLIterator class<ul class="chunklist chunklist_book chunklist_children"><li><a href="simplexmliterator.current.html">SimpleXMLIterator::current</a> — Returns the current element</li><li><a href="simplexmliterator.getchildren.html">SimpleXMLIterator::getChildren</a> — Returns the sub-elements of the current element</li><li><a href="simplexmliterator.haschildren.html">SimpleXMLIterator::hasChildren</a> — Checks whether the current element has sub elements.</li><li><a href="simplexmliterator.key.html">SimpleXMLIterator::key</a> — Return current key</li><li><a href="simplexmliterator.next.html">SimpleXMLIterator::next</a> — Move to next element</li><li><a href="simplexmliterator.rewind.html">SimpleXMLIterator::rewind</a> — Rewind to the first element</li><li><a href="simplexmliterator.valid.html">SimpleXMLIterator::valid</a> — Check whether the current element is valid</li></ul></li><li><a href="ref.simplexml.html">SimpleXML Functions</a><ul class="chunklist chunklist_book chunklist_children"><li><a href="function.simplexml-import-dom.html">simplexml_import_dom</a> — Get a SimpleXMLElement object from a DOM node.</li><li><a href="function.simplexml-load-file.html">simplexml_load_file</a> — Interprets an XML file into an object</li><li><a href="function.simplexml-load-string.html">simplexml_load_string</a> — Interprets a string of XML into an object</li></ul></li></ul></div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="105330">  
  <a class="name">
  <strong class="user"><em>soloman at textgrid dot com</em></strong></a><div class="date" title="2011-08-09 05:06"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105330">
<div class="phpcode"><code><span class="html">
Three line xml2array:<br><br><span class="default">&lt;?php<br><br>$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xmlstring</span><span class="keyword">);<br></span><span class="default">$json </span><span class="keyword">= </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">$array </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">$json</span><span class="keyword">,</span><span class="default">TRUE</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>Ta da!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113348">  
  <a class="name">
  <strong class="user"><em>dkrnl at yandex dot ru</em></strong></a><div class="date" title="2013-09-30 02:57"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113348">
<div class="phpcode"><code><span class="html">
Wrapper XMLReader class, for simple SAX-reading huge xml:<br>https://github.com/dkrnl/SimpleXMLReader<br><br>Usage example: <a rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader/blob/master/examples/example1.php</a><br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Simple XML Reader<br> *<br> * @license Public Domain<br> * @author Dmitry Pyatkov(aka dkrnl) &lt;dkrnl@yandex.ru&gt;<br> * @url <a rel="nofollow" target="_blank">http://github.com/dkrnl/SimpleXMLReader</a><br> */<br></span><span class="keyword">class </span><span class="default">SimpleXMLReader </span><span class="keyword">extends </span><span class="default">XMLReader<br></span><span class="keyword">{<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Callbacks<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @var array<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$callback </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Add node callback<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string&nbsp;&nbsp; $name<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; callback $callback<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; integer&nbsp; $nodeType<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLReader<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">registerCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$callback</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Already exists parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$callback</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Remove node callback<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string&nbsp; $name<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; integer $nodeType<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLReader<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">unRegisterCallback</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$nodeType </span><span class="keyword">= </span><span class="default">XMLREADER</span><span class="keyword">::</span><span class="default">ELEMENT</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Unknow parser callback </span><span class="default">$name</span><span class="string">(</span><span class="default">$nodeType</span><span class="string">)."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$nodeType</span><span class="keyword">][</span><span class="default">$name</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Run parser<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @return void<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">parse</span><span class="keyword">()<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (empty(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Empty parser callback."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$continue </span><span class="keyword">&amp;&amp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$continue </span><span class="keyword">= </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">callback</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nodeType</span><span class="keyword">][</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">name</span><span class="keyword">], </span><span class="default">$this</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Run XPath query on current node<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $path<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return array(SimpleXMLElement)<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandXpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">xpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to string<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandString</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">)-&gt;</span><span class="default">asXML</span><span class="keyword">();<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $className<br>&nbsp; &nbsp;&nbsp; * @return SimpleXMLElement<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandSimpleXml</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="default">$className </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, </span><span class="default">$className</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Expand current node to DomDocument<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $version<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string $encoding<br>&nbsp; &nbsp;&nbsp; * @return DomDocument<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">expandDomDocument</span><span class="keyword">(</span><span class="default">$version </span><span class="keyword">= </span><span class="string">"1.0"</span><span class="keyword">, </span><span class="default">$encoding </span><span class="keyword">= </span><span class="string">"UTF-8"</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">expand</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document </span><span class="keyword">= new </span><span class="default">DomDocument</span><span class="keyword">(</span><span class="default">$version</span><span class="keyword">, </span><span class="default">$encoding</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$document</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$document</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110958">  
  <a class="name">
  <strong class="user"><em>whyme</em></strong></a><div class="date" title="2012-12-28 09:55"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110958">
<div class="phpcode"><code><span class="html">
Simple means simple.&nbsp; If you know the structure and just want the value of a tag:
<br>
<br><span class="default">&lt;?php
<br>$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$xmlfile</span><span class="keyword">);
<br>print </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">City</span><span class="keyword">-&gt;</span><span class="default">Street</span><span class="keyword">-&gt;</span><span class="default">Address</span><span class="keyword">-&gt;</span><span class="default">HouseColor</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>Warning, numbers can come out as strings, empty elements like &lt;HouseColor&gt;&lt;/HouseColor&gt; come out as array(0)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100981">  
  <a class="name">
  <strong class="user"><em>kristof at viewranger dot com</em></strong></a><div class="date" title="2010-11-18 05:14"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100981">
<div class="phpcode"><code><span class="html">
If you tried to load an XML file with this, but the CDATA parts were not loaded for some reason, is because you should do it this way:<br><br>$xml = simplexml_load_file($this-&gt;filename, 'SimpleXMLElement', LIBXML_NOCDATA);<br><br>This converts CDATA to String in the returning object.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109154">  
  <a class="name">
  <strong class="user"><em>Laurent Vervisch</em></strong></a><div class="date" title="2012-06-24 10:57"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109154">
<div class="phpcode"><code><span class="html">
Here is an example of an easy mapping between xml and classes defined by user.<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">XmlClass </span><span class="keyword">extends </span><span class="default">SimpleXMLElement<br></span><span class="keyword">{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Returns this object as an instance of the given class.<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">asInstanceOf</span><span class="keyword">(</span><span class="default">$class_name</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// should check that class_name is valid<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">dom_import_simplexml</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">), </span><span class="default">$class_name</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, array </span><span class="default">$arguments</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"magic __call called for method </span><span class="default">$name</span><span class="string"> on instance of "</span><span class="keyword">.</span><span class="default">get_class</span><span class="keyword">().</span><span class="string">"\n"</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class could be mapped according $this-&gt;getName()<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$class_name </span><span class="keyword">= </span><span class="string">'Test'</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$instance </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">asInstanceOf</span><span class="keyword">(</span><span class="default">$class_name</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(array(</span><span class="default">$instance</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">), </span><span class="default">$arguments</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br>class </span><span class="default">Test </span><span class="keyword">extends </span><span class="default">XmlClass<br></span><span class="keyword">{<br>&nbsp; &nbsp; public function </span><span class="default">setValue</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;{</span><span class="default">0</span><span class="keyword">} = </span><span class="default">$string</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">XmlClass</span><span class="keyword">(</span><span class="string">'&lt;example&gt;&lt;test/&gt;&lt;/example&gt;'</span><span class="keyword">);<br></span><span class="default">$test </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">-&gt;</span><span class="default">asInstanceOf</span><span class="keyword">(</span><span class="string">'Test'</span><span class="keyword">);<br>echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br>echo </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">), </span><span class="string">"\n"</span><span class="keyword">;<br><br></span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="string">'value set directly by instance of Test'</span><span class="keyword">);<br>echo (string)</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br>echo (string)</span><span class="default">$test</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br><br></span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">-&gt;</span><span class="default">setValue</span><span class="keyword">(</span><span class="string">'value set by instance of XmlClass and magic __call'</span><span class="keyword">);<br>echo (string)</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">test</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br>echo (string)</span><span class="default">$test</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>XmlClass<br>Test<br>value set directly by instance of Test<br>value set directly by instance of Test<br>magic __call called for method setValue on instance of XmlClass<br>value set by instance of XmlClass and magic __call<br>value set by instance of XmlClass and magic __call</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84135">  
  <a class="name">
  <strong class="user"><em>aalaap at gmail dot com</em></strong></a><div class="date" title="2008-06-30 06:58"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84135">
<div class="phpcode"><code><span class="html">
Here are two quick and dirty functions that use SimpleXML to detect if a feed xml is RSS or ATOM:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">is_rss</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {
<br>&nbsp; &nbsp; @</span><span class="default">$feed </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br>
<br>function </span><span class="default">is_atom</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {
<br>&nbsp; &nbsp; @</span><span class="default">$feed </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">entry</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>The functions take in the full text feed (retrieved via cURL, for example) and return a true or a false based on the result.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99729">  
  <a class="name">
  <strong class="user"><em>sherwinterunez at yahoo dot com</em></strong></a><div class="date" title="2010-09-01 11:15"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99729">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br><br></span><span class="comment">// Sherwin R. Terunez<br>//<br>// This is my own version of XML Object to Array<br>// <br><br></span><span class="keyword">function </span><span class="default">amstore_xmlobj2array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$level</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$items </span><span class="keyword">= array();<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if(!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) return </span><span class="default">$items</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$child </span><span class="keyword">= (array)</span><span class="default">$obj</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$child </span><span class="keyword">as </span><span class="default">$aa</span><span class="keyword">=&gt;</span><span class="default">$bb</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$bb </span><span class="keyword">as </span><span class="default">$ee</span><span class="keyword">=&gt;</span><span class="default">$ff</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$ff</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">][</span><span class="default">$ee</span><span class="keyword">] = </span><span class="default">$ff</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$ff</span><span class="keyword">)==</span><span class="string">'SimpleXMLElement'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">][</span><span class="default">$ee</span><span class="keyword">] = </span><span class="default">amstore_xmlobj2array</span><span class="keyword">(</span><span class="default">$ff</span><span class="keyword">,</span><span class="default">$level</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">] = </span><span class="default">$bb</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)==</span><span class="string">'SimpleXMLElement'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">] = </span><span class="default">amstore_xmlobj2array</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">,</span><span class="default">$level</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } else<br>&nbsp; &nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$child </span><span class="keyword">as </span><span class="default">$aa</span><span class="keyword">=&gt;</span><span class="default">$bb</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)&amp;&amp;!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">] = </span><span class="default">$bb</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$aa</span><span class="keyword">] = </span><span class="default">amstore_xmlobj2array</span><span class="keyword">(</span><span class="default">$bb</span><span class="keyword">,</span><span class="default">$level</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$bb </span><span class="keyword">as </span><span class="default">$cc</span><span class="keyword">=&gt;</span><span class="default">$dd</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$dd</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">()][</span><span class="default">$cc</span><span class="keyword">] = </span><span class="default">$dd</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$dd</span><span class="keyword">)==</span><span class="string">'SimpleXMLElement'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">()][</span><span class="default">$cc</span><span class="keyword">] = </span><span class="default">amstore_xmlobj2array</span><span class="keyword">(</span><span class="default">$dd</span><span class="keyword">,</span><span class="default">$level</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$items</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113485">  
  <a class="name">
  <strong class="user"><em>maikel at yuluma dot com</em></strong></a><div class="date" title="2013-10-17 09:02"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113485">
<div class="phpcode"><code><span class="html">
In reply to&nbsp; soloman at textgrid dot com,<br><br>2 line XML2Array:<br><br>$xml = simplexml_load_string($file);<br>$array = (array)$xml;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108039">  
  <a class="name">
  <strong class="user"><em>thedoc8786 at gmail dot com</em></strong></a><div class="date" title="2012-03-23 07:42"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108039">
<div class="phpcode"><code><span class="html">
FAIL! This function works better than the one I posted below:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">), </span><span class="default">TRUE</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; foreach ( </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( empty(</span><span class="default">$value</span><span class="keyword">) ) </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ) </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; }</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101063">  
  <a class="name">
  <strong class="user"><em>philipp at strazny dot com</em></strong></a><div class="date" title="2010-11-23 05:33"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101063">
<div class="phpcode"><code><span class="html">
Here's a quick way to dump the nodeValues from SimpleXML into an array using the path to each nodeValue as key. The paths are compatible with e.g. DOMXPath. I use this when I need to update values externally (i.e. in code that doesn't know about the underlying xml). Then I use DOMXPath to find the node containing the original value and update it.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, &amp;</span><span class="default">$return</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">, </span><span class="default">$root</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$children </span><span class="keyword">= array();
<br>&nbsp; &nbsp; if (</span><span class="default">$xml </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$root</span><span class="keyword">){ </span><span class="comment">// we're at root
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">.= </span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if ( </span><span class="default">count</span><span class="keyword">(</span><span class="default">$children</span><span class="keyword">) == </span><span class="default">0 </span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$path</span><span class="keyword">] = (string)</span><span class="default">$xml</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="default">$seen</span><span class="keyword">=array();
<br>&nbsp; &nbsp; foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$childname </span><span class="keyword">= (</span><span class="default">$child </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement</span><span class="keyword">)?</span><span class="default">$child</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">():</span><span class="default">$child</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( !isset(</span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">])){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">]++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$return</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$child</span><span class="keyword">.</span><span class="string">'['</span><span class="keyword">.</span><span class="default">$seen</span><span class="keyword">[</span><span class="default">$childname</span><span class="keyword">].</span><span class="string">']'</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>} 
<br></span><span class="default">?&gt;
<br></span>
<br>Use like this:
<br>
<br><span class="default">&lt;?php
<br>$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(...</span><span class="default">some xml string</span><span class="keyword">...);
<br></span><span class="default">$xmlarray </span><span class="keyword">= array(); </span><span class="comment">// this will hold the flattened data
<br></span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xmlarray</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>You can also pull multiple files in one array:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach(</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">){
<br>&nbsp; &nbsp; </span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">XMLToArrayFlat</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xmlarray</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>The respective filename/path is thus prefixed to each key.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101949">  
  <a class="name">
  <strong class="user"><em>phil at dier dot us</em></strong></a><div class="date" title="2011-01-19 11:37"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101949">
<div class="phpcode"><code><span class="html">
Here's a function I came up with to convert an associative array to XML.&nbsp; Works for multidimensional arrays as well.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">assocArrayToXML</span><span class="keyword">(</span><span class="default">$root_element_name</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="string">"&lt;?xml version=\"1.0\"?&gt;&lt;</span><span class="keyword">{</span><span class="default">$root_element_name</span><span class="keyword">}</span><span class="string">&gt;&lt;/</span><span class="keyword">{</span><span class="default">$root_element_name</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$f </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$f,$c,$a'</span><span class="keyword">,</span><span class="string">'
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($a as $k=&gt;$v) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_array($v)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ch=$c-&gt;addChild($k);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $f($f,$ch,$v);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $c-&gt;addChild($k,$v);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }'</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$f</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$ar</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105697">  
  <a class="name">
  <strong class="user"><em>xananax at yelostudio dot com</em></strong></a><div class="date" title="2011-09-07 06:25"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105697">
<div class="phpcode"><code><span class="html">
None of the XML2Array functions that I found satisfied me completely; Their results did not always fit the project I was working on, and I found none that would account for repeating XML elements (such as
<br>&lt;fields&gt;&lt;field/&gt;&lt;field/&gt;&lt;field/&gt;&lt;/fields&gt;)
<br>So I rolled out my own; hope it helps someone.
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * Converts a simpleXML element into an array. Preserves attributes.&lt;br/&gt;
<br> * You can choose to get your elements either flattened, or stored in a custom
<br> * index that you define.&lt;br/&gt;
<br> * For example, for a given element
<br> * &lt;code&gt;
<br> * &lt;field name="someName" type="someType"/&gt;
<br> * &lt;/code&gt;
<br> * &lt;br&gt;
<br> * if you choose to flatten attributes, you would get:
<br> * &lt;code&gt;
<br> * $array['field']['name'] = 'someName';
<br> * $array['field']['type'] = 'someType';
<br> * &lt;/code&gt;
<br> * If you choose not to flatten, you get:
<br> * &lt;code&gt;
<br> * $array['field']['@attributes']['name'] = 'someName';
<br> * &lt;/code&gt;
<br> * &lt;br&gt;__________________________________________________________&lt;br&gt;
<br> * Repeating fields are stored in indexed arrays. so for a markup such as:
<br> * &lt;code&gt;
<br> * &lt;parent&gt;
<br> *&nbsp; &nbsp;&nbsp; &lt;child&gt;a&lt;/child&gt;
<br> *&nbsp; &nbsp;&nbsp; &lt;child&gt;b&lt;/child&gt;
<br> *&nbsp; &nbsp;&nbsp; &lt;child&gt;c&lt;/child&gt;
<br> * ...
<br> * &lt;/code&gt;
<br> * you array would be:
<br> * &lt;code&gt;
<br> * $array['parent']['child'][0] = 'a';
<br> * $array['parent']['child'][1] = 'b';
<br> * ...And so on.
<br> * &lt;/code&gt;
<br> * @param simpleXMLElement&nbsp; &nbsp; $xml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the XML to convert
<br> * @param boolean|string&nbsp; &nbsp; $attributesKey&nbsp; &nbsp; if you pass TRUE, all values will be
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stored under an '@attributes' index.
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Note that you can also pass a string
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; to change the default index.&lt;br/&gt;
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults to null.
<br> * @param boolean|string&nbsp; &nbsp; $childrenKey&nbsp; &nbsp; if you pass TRUE, all values will be
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stored under an '@children' index.
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Note that you can also pass a string
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; to change the default index.&lt;br/&gt;
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults to null.
<br> * @param boolean|string&nbsp; &nbsp; $valueKey&nbsp; &nbsp; &nbsp; &nbsp; if you pass TRUE, all values will be
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; stored under an '@values' index. Note
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; that you can also pass a string to
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; change the default index.&lt;br/&gt;
<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; defaults to null.
<br> * @return array the resulting array.
<br> */
<br></span><span class="keyword">function </span><span class="default">simpleXMLToArray</span><span class="keyword">(</span><span class="default">SimpleXMLElement $xml</span><span class="keyword">,</span><span class="default">$attributesKey</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">,</span><span class="default">$childrenKey</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">,</span><span class="default">$valueKey</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">){
<br>
<br>&nbsp; &nbsp; if(</span><span class="default">$childrenKey </span><span class="keyword">&amp;&amp; !</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$childrenKey</span><span class="keyword">)){</span><span class="default">$childrenKey </span><span class="keyword">= </span><span class="string">'@children'</span><span class="keyword">;}
<br>&nbsp; &nbsp; if(</span><span class="default">$attributesKey </span><span class="keyword">&amp;&amp; !</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$attributesKey</span><span class="keyword">)){</span><span class="default">$attributesKey </span><span class="keyword">= </span><span class="string">'@attributes'</span><span class="keyword">;}
<br>&nbsp; &nbsp; if(</span><span class="default">$valueKey </span><span class="keyword">&amp;&amp; !</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$valueKey</span><span class="keyword">)){</span><span class="default">$valueKey </span><span class="keyword">= </span><span class="string">'@values'</span><span class="keyword">;}
<br>
<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= array();
<br>&nbsp; &nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">$_value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$xml</span><span class="keyword">);
<br>&nbsp; &nbsp; if(!</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">)){</span><span class="default">$_value </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;};
<br>
<br>&nbsp; &nbsp; if(</span><span class="default">$_value</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$valueKey</span><span class="keyword">){</span><span class="default">$return</span><span class="keyword">[</span><span class="default">$valueKey</span><span class="keyword">] = </span><span class="default">$_value</span><span class="keyword">;}
<br>&nbsp; &nbsp; &nbsp; &nbsp; else{</span><span class="default">$return </span><span class="keyword">= </span><span class="default">$_value</span><span class="keyword">;}
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="default">$children </span><span class="keyword">= array();
<br>&nbsp; &nbsp; </span><span class="default">$first </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; foreach(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$elementName </span><span class="keyword">=&gt; </span><span class="default">$child</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">simpleXMLToArray</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">,</span><span class="default">$attributesKey</span><span class="keyword">, </span><span class="default">$childrenKey</span><span class="keyword">,</span><span class="default">$valueKey</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">])){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">])){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$first</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">][] = </span><span class="default">$temp</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$first</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">] = array(</span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">],</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else{
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$elementName</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if(</span><span class="default">$children</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$childrenKey</span><span class="keyword">){</span><span class="default">$return</span><span class="keyword">[</span><span class="default">$childrenKey</span><span class="keyword">] = </span><span class="default">$children</span><span class="keyword">;}
<br>&nbsp; &nbsp; &nbsp; &nbsp; else{</span><span class="default">$return </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">,</span><span class="default">$children</span><span class="keyword">);}
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="default">$attributes </span><span class="keyword">= array();
<br>&nbsp; &nbsp; foreach(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$name</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attributes</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; if(</span><span class="default">$attributes</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$attributesKey</span><span class="keyword">){</span><span class="default">$return</span><span class="keyword">[</span><span class="default">$attributesKey</span><span class="keyword">] = </span><span class="default">$attributes</span><span class="keyword">;}
<br>&nbsp; &nbsp; &nbsp; &nbsp; else{</span><span class="default">$return </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">, </span><span class="default">$attributes</span><span class="keyword">);}
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97355">  
  <a class="name">
  <strong class="user"><em>michael dot allen at emp dot shentel dot com</em></strong></a><div class="date" title="2010-04-15 11:06"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97355">
<div class="phpcode"><code><span class="html">
Here is a very robust SimpleXML parser.&nbsp; Can be used to load files, strings, or DOM into SimpleXML, or can be used to perform the reverse when handed SimpleXML.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * XMLParser Class File<br> *<br> * This class loads an XML document into a SimpleXMLElement that can<br> * be processed by the calling application.&nbsp; This accepts xml strings,<br> * files, and DOM objects.&nbsp; It can also perform the reverse, converting<br> * an SimpleXMLElement back into a string, file, or DOM object.<br> */<br></span><span class="keyword">class </span><span class="default">XMLParser </span><span class="keyword">{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * While parsing, parse the supplied XML document.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * Sets up a SimpleXMLElement object based on success of parsing<br>&nbsp; &nbsp;&nbsp; * the XML document file.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param string $doc the xml document location path<br>&nbsp; &nbsp;&nbsp; * @return object<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">loadFile</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$doc</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception </span><span class="keyword">(</span><span class="string">"Unable to load the xml file " </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"using: \"</span><span class="default">$doc</span><span class="string">\""</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * While parsing, parse the supplied XML string.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * Sets up a SimpleXMLElement object based on success of parsing<br>&nbsp; &nbsp;&nbsp; * the XML string.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param string $string the xml document string<br>&nbsp; &nbsp;&nbsp; * @return object<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">loadString</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$string</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception </span><span class="keyword">(</span><span class="string">"Unable to load the xml string " </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"using: \"</span><span class="default">$string</span><span class="string">\""</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * While parsing, parse the supplied XML DOM node.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * Sets up a SimpleXMLElement object based on success of parsing<br>&nbsp; &nbsp;&nbsp; * the XML DOM node.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param object $dom the xml DOM node<br>&nbsp; &nbsp;&nbsp; * @return object<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">loadDOM</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$dom</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_import_dom</span><span class="keyword">(</span><span class="default">$dom</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception </span><span class="keyword">(</span><span class="string">"Unable to load the xml DOM node " </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"using: \"</span><span class="default">$dom</span><span class="string">\""</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * While parsing, parse the SimpleXMLElement.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * Sets up a XML file, string, or DOM object based on success of<br>&nbsp; &nbsp;&nbsp; * parsing the XML DOM node.<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param object $path the xml document location path<br>&nbsp; &nbsp;&nbsp; * @param string $type the return type (string, file, dom)<br>&nbsp; &nbsp;&nbsp; * @param object $simplexml the simple xml element<br>&nbsp; &nbsp;&nbsp; * @return mixed<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">loadSXML</span><span class="keyword">(</span><span class="default">$simplexml</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$simplexml</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$type</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">$type</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'string'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$simplexml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'file'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$path</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$simplexml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception </span><span class="keyword">(</span><span class="string">"Unable to create the XML file. Path is missing or" </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"is invalid: \"</span><span class="default">$path</span><span class="string">\""</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'dom'</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">dom_import_simplexml</span><span class="keyword">(</span><span class="default">$simplexml</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception </span><span class="keyword">(</span><span class="string">"Unable to load the simple XML element " </span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"using: \"</span><span class="default">$simplexml</span><span class="string">\""</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96263">  
  <a class="name">
  <strong class="user"><em>emmanuel</em></strong></a><div class="date" title="2010-02-17 10:21"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96263">
<div class="phpcode"><code><span class="html">
dynamic sql in php using xml:
<br>
<br>test.xml:
<br>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<br>&lt;sql&gt;
<br>&nbsp; &nbsp; &lt;statement&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; SELECT * FROM USERS
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;call criteria="byId"&gt;WHERE id = %d&lt;/call&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;call criteria="byUsername"&gt;WHERE username = "%s"&lt;/call&gt;;
<br>&nbsp; &nbsp; &lt;/statement&gt;
<br>&lt;/sql&gt;
<br>
<br>index.php:
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">callMe</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'byUsername' </span><span class="keyword">=&gt; </span><span class="string">'dynsql'</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if (isset(</span><span class="default">$search</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">sprintf</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">], </span><span class="default">$search</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="string">""</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">"test.xml"</span><span class="keyword">);
<br></span><span class="default">$string </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">statement</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br></span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="string">'/&lt;call criteria="(\w+)"&gt;(.*?)&lt;\/call&gt;/'</span><span class="keyword">, </span><span class="string">'callMe'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br></span><span class="default">$node </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">);
<br>echo </span><span class="default">$node</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>obviously, this example can be improved [in your own code.]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95762">  
  <a class="name">
  <strong class="user"><em>mahmutta at gmail dot com</em></strong></a><div class="date" title="2010-01-20 12:58"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95762">
<div class="phpcode"><code><span class="html">
while using simple xml and get double or float int value from xml object for using math operations (+ * - / ) some errors happens on the operation, this is because of simple xml returns everythings to objects. <br>exmple;<br><br><span class="default">&lt;?php<br><br>$name </span><span class="keyword">= </span><span class="string">"somestring"</span><span class="keyword">;<br></span><span class="default">$size </span><span class="keyword">= </span><span class="default">11.45</span><span class="keyword">;<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'<br>&lt;xml&gt;<br> &lt;name&gt;somestring&lt;/name&gt;<br> &lt;size&gt;11.45&lt;/size&gt;<br>&lt;/xml&gt;'</span><span class="keyword">;<br><br> <br></span><span class="default">$xmlget </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">)<br><br>echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// 20&nbsp; its false<br>// ($xml-&gt;size is an object (int)11 and&nbsp; (45) )<br><br>// this is true<br></span><span class="keyword">echo </span><span class="default">$size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// 22.90 <br></span><span class="keyword">echo (float)</span><span class="default">$size</span><span class="keyword">*</span><span class="default">2</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// 22.90 <br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94105">  
  <a class="name">
  <strong class="user"><em>antoine dot rabanes at gmail dot com</em></strong></a><div class="date" title="2009-10-16 07:22"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94105">
<div class="phpcode"><code><span class="html">
if for some reasons you need the string value instead of the simpleXML Object you can cast the return value as a string.
<br>
<br>exemple: 
<br>
<br><span class="default">&lt;?php
<br>$all_api_call </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br></span><span class="default">$all_api </span><span class="keyword">= array();
<br></span><span class="default">$all_api </span><span class="keyword">= </span><span class="default">$all_api_call</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">;
<br></span><span class="default">$list_all_api_name </span><span class="keyword">= array();
<br></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>foreach (</span><span class="default">$all_api</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">() as </span><span class="default">$funcky_function</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$string_tmp </span><span class="keyword">= (string )</span><span class="default">$funcky_function</span><span class="keyword">-&gt;</span><span class="default">function</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="default">$list_all_api_name</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">++] = </span><span class="default">$putain</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90554">  
  <a class="name">
  <strong class="user"><em>mail at kleineedv dot de</em></strong></a><div class="date" title="2009-04-28 12:37"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90554">
<div class="phpcode"><code><span class="html">
I had a problem with simplexml reading nodes from an xml file. It always return an SimpleXML-Object but not the text inside the node.
<br>
<br>Example:
<br>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<br>&lt;Test&gt;
<br>&nbsp; &nbsp; &lt;Id&gt;123&lt;/Id&gt;
<br>&lt;/Test&gt;
<br>
<br>Reading this xml into a variable called $xml and then doing the following
<br><span class="default">&lt;?php
<br>$myId </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Id</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>Did not return 123 in $myId, but instead I got a SimpleXMLElement Object.
<br>
<br>The solution is simple, when you know it. Use explicit string conversion.
<br><span class="default">&lt;?php
<br>$myId </span><span class="keyword">= (string)</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Id</span><span class="keyword">;
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88457">  
  <a class="name">
  <strong class="user"><em>oscargodson at gmail dot com</em></strong></a><div class="date" title="2009-01-25 03:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88457">
<div class="phpcode"><code><span class="html">
To add to what others have said, you can't directly put a $_GET or $_POST value into a variable then into an attribute using SimpleXML. You must first convert it to an integer.<br><br>This will NOT work<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; &nbsp; $page_id </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">page</span><span class="keyword">[</span><span class="default">$page_id</span><span class="keyword">]<br></span><span class="default">?&gt;<br></span><br>You will get something like:<br>Notice: Trying to get property of non-object in /Applications/MAMP/htdocs/mysite/index.php on line 10<br><br>However, this WILL work and is much simpler then using (string) or other methods.<br><span class="default">&lt;?php<br>&nbsp;&nbsp; $page_id </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">]);<br>&nbsp;&nbsp; echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">page</span><span class="keyword">[</span><span class="default">$page_id</span><span class="keyword">]<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87249">  
  <a class="name">
  <strong class="user"><em>bxt at die-optimisten dot net</em></strong></a><div class="date" title="2008-11-26 07:47"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87249">
<div class="phpcode"><code><span class="html">
Addition to QLeap's post: <br>SimpleXML will return a reference to an object containing the node value and you can't use references in session variables as there is no feasible way to restore a reference to another variable. <br><br>This won't work too:<br>$val=$this-&gt;xml-&gt;node-&gt;attributes()-&gt;name;<br>echo $array[$val]; // will cause a warning because of the wrong index type. <br><br>You have to convert/cast to a String first:<br>echo $array[(string)$val];<br><br>This will work as expected, because converting will call the __toString() method. Therefor echo works too:<br>echo $val; // will display the name</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87083">  
  <a class="name">
  <strong class="user"><em>QLeap</em></strong></a><div class="date" title="2008-11-18 02:27"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87083">
<div class="phpcode"><code><span class="html">
Storing SimpleXMLElement values in $_SESSION does not work. Saving the results as an object or individual elements of the object will result in the dreaded "Warning: session_start() [function.session-start]: Node no longer exists" error.<br><br>For example, this does not work:<br><br>&nbsp; &nbsp; $xml&nbsp; = new SimpleXMLElement($page);<br>&nbsp; &nbsp; $country&nbsp; = $xml-&gt;Response-&gt;Placemark-&gt;AddressDetails-&gt;Country-&gt;CountryNameCode;<br>&nbsp; &nbsp; $_SESSION['country'] = $country;<br><br>This will work:<br><br>&nbsp; &nbsp; $_SESSION['country'] = (string) $country;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85106">  
  <a class="name">
  <strong class="user"><em>charlie at blankcanvasstudios dot com</em></strong></a><div class="date" title="2008-08-14 11:21"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85106">
<div class="phpcode"><code><span class="html">
Optimizing aalaap at gmail dot com's php<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">is_rss</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {<br>&nbsp; &nbsp; @</span><span class="default">$feed </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);<br><br>&nbsp; &nbsp; return (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">)?</span><span class="default">true</span><span class="keyword">:</span><span class="default">false</span><span class="keyword">;<br>}<br><br>function </span><span class="default">is_atom</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">) {<br>&nbsp; &nbsp; @</span><span class="default">$feed </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="default">$feedxml</span><span class="keyword">);<br>&nbsp; &nbsp; (</span><span class="default">$feed</span><span class="keyword">-&gt;</span><span class="default">entry</span><span class="keyword">):</span><span class="default">true</span><span class="keyword">:</span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85674">  
  <a class="name">
  <strong class="user"><em>gwhitescarver at yahoo dot com</em></strong></a><div class="date" title="2008-09-11 01:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85674">
<div class="phpcode"><code><span class="html">
Moving some code from a PHP 5.2.6 / Windows environment to a 5.2.0 / Linux environment, I somehow lost access to a plain text node within a SimpleXML Object.&nbsp; On a var_dump of $xml_node, a [0] element was shown as the string '12'.&nbsp; However, $xml_node[0] was evaluating NULL in 5.2.0.&nbsp; You can see below the code change I made, pulling my data out of the raw XML with a regular expression.&nbsp; Hope this is useful to someone.<br><br>//In some versions of PHP it seems we cannot access the [0] element of a SimpleXML Object.&nbsp; Doesn't work in 5.2.0:<br>//$count = $xml_node[0];<br>//grab the raw XML:<br>$count = ($xml_node-&gt;asXML());<br>//pull out the number between the closing and opening brace of the xml:<br>$count = preg_replace('/.*&gt;(\d*)&lt;.*/', '$1', $count);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108035">  
  <a class="name">
  <strong class="user"><em>thedoc8786 at gmail dot com</em></strong></a><div class="date" title="2012-03-23 04:19"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108035">
<div class="phpcode"><code><span class="html">
I know it is over-done, but the following is a super-short example of a XML to Array conversion function (recursive):<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">SimpleXMLElement $xml</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= (array)</span><span class="default">$xml</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach ( </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">$value </span><span class="keyword">instanceof </span><span class="default">SimpleXMLElement </span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = empty(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">NULL </span><span class="keyword">: </span><span class="default">toArray</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>&nbsp; &nbsp; }</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108688">  
  <a class="name">
  <strong class="user"><em>xaviered at gmail dot com</em></strong></a><div class="date" title="2012-05-17 07:00"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108688">
<div class="phpcode"><code><span class="html">
Here is a recursive function that will convert a given SimpleXMLElement object into an array, preserving namespaces and attributes.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">xmlObjToArr</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$namespace </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getDocNamespaces</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$namespace</span><span class="keyword">[</span><span class="default">NULL</span><span class="keyword">] = </span><span class="default">NULL</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attributes </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">((string)</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">());
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$obj</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if( </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) &lt;= </span><span class="default">0 </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// get info for all namespaces
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$namespace </span><span class="keyword">as </span><span class="default">$ns</span><span class="keyword">=&gt;</span><span class="default">$nsUrl </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// atributes
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$objAttributes </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$objAttributes </span><span class="keyword">as </span><span class="default">$attributeName </span><span class="keyword">=&gt; </span><span class="default">$attributeValue </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attribName </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$attributeName</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attribVal </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">((string)</span><span class="default">$attributeValue</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty(</span><span class="default">$ns</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attribName </span><span class="keyword">= </span><span class="default">$ns </span><span class="keyword">. </span><span class="string">':' </span><span class="keyword">. </span><span class="default">$attribName</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$attributes</span><span class="keyword">[</span><span class="default">$attribName</span><span class="keyword">] = </span><span class="default">$attribVal</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// children
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$objChildren </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">children</span><span class="keyword">(</span><span class="default">$ns</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach( </span><span class="default">$objChildren </span><span class="keyword">as </span><span class="default">$childName</span><span class="keyword">=&gt;</span><span class="default">$child </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$childName </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">((string)</span><span class="default">$childName</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if( !empty(</span><span class="default">$ns</span><span class="keyword">) ) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$childName </span><span class="keyword">= </span><span class="default">$ns</span><span class="keyword">.</span><span class="string">':'</span><span class="keyword">.</span><span class="default">$childName</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$children</span><span class="keyword">[</span><span class="default">$childName</span><span class="keyword">][] = </span><span class="default">xmlObjToArr</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; return array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'name'</span><span class="keyword">=&gt;</span><span class="default">$name</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'text'</span><span class="keyword">=&gt;</span><span class="default">$text</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'attributes'</span><span class="keyword">=&gt;</span><span class="default">$attributes</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'children'</span><span class="keyword">=&gt;</span><span class="default">$children
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103816">  
  <a class="name">
  <strong class="user"><em>streaver91 at gmail dot com</em></strong></a><div class="date" title="2011-05-04 08:49"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103816">
<div class="phpcode"><code><span class="html">
The BIGGEST differece between an XML and a PHP array is that in an XML file, the name of elements can be the same even if they are siblings, eg. "&lt;pa&gt;&lt;ch /&gt;&lt;ch /&gt;&lt;ch /&gt;&lt;/pa&gt;", while in an PHP array, the key of which must be different.
<br>
<br>I think the array structure developed by svdmeer can fit for XML, and fits well.
<br>
<br>here is an example array converted from an xml file:
<br>array(
<br>"@tag"=&gt;"name",
<br>"@attr"=&gt;array(
<br>&nbsp; &nbsp; "id"=&gt;"1","class"=&gt;"2")
<br>"@text"=&gt;"some text",
<br>)
<br>
<br>or if it has childrens, that can be:
<br>
<br>array(
<br>"@tag"=&gt;"name",
<br>"@attr"=&gt;array(
<br>&nbsp; &nbsp; "id"=&gt;"1","class"=&gt;"2")
<br>"@items"=&gt;array(
<br>&nbsp; &nbsp; 0=&gt;array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; "@tag"=&gt;"name","@text"=&gt;"some text"
<br>&nbsp; &nbsp; )
<br>)
<br>
<br>Also, I wrote a function that can change that array back to XML.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">array2XML</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$root</span><span class="keyword">) {
<br></span><span class="default">$xml </span><span class="keyword">= new </span><span class="default">SimpleXMLElement</span><span class="keyword">(</span><span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;</span><span class="keyword">{</span><span class="default">$root</span><span class="keyword">}</span><span class="string">&gt;&lt;/</span><span class="keyword">{</span><span class="default">$root</span><span class="keyword">}</span><span class="string">&gt;"</span><span class="keyword">); 
<br></span><span class="default">$f </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$f,$c,$a'</span><span class="keyword">,</span><span class="string">' 
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach($a as $v) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($v["@text"])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ch = $c-&gt;addChild($v["@tag"],$v["@text"]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ch = $c-&gt;addChild($v["@tag"]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($v["@items"])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $f($f,$ch,$v["@items"]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset($v["@attr"])) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach($v["@attr"] as $attr =&gt; $val) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ch-&gt;addAttribute($attr,$val);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }'</span><span class="keyword">);
<br></span><span class="default">$f</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);
<br>return </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91494">  
  <a class="name">
  <strong class="user"><em>walter</em></strong></a><div class="date" title="2009-06-12 07:58"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91494">
<div class="phpcode"><code><span class="html">
Working fix for the infamous SimpleXML + memcache bug.
<br>
<br>Improves code at <a rel="nofollow" target="_blank">http://tinyurl.com/bmoon-simplexml</a> to actually work for arbitrary-depth structures.&nbsp; (Because neither the function nor the json_decode(json_encode($obj)) hack listed there worked for me.)
<br>
<br>There's probably some superfluous code in here that could be improved on -- but it works!
<br>
<br><span class="default">&lt;?php
<br> </span><span class="comment"># convert a structure that may include objects to a pure
<br> # array-based structure (that can be stored in memcache)
<br> #&nbsp; ... includes support for simplexml!
<br> # (nb: may have problems with infinite recursive structs)
<br> </span><span class="keyword">function </span><span class="default">enforce_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$array </span><span class="keyword">= (array)</span><span class="default">$obj</span><span class="keyword">;
<br>&nbsp; if(empty(</span><span class="default">$array</span><span class="keyword">)) {
<br>&nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; }
<br>&nbsp; else {
<br>&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; if(!</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br>&nbsp; &nbsp;&nbsp; if(</span><span class="default">is_a</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="string">'SimpleXMLElement'</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">memcache_objects_to_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$tmp</span><span class="keyword">;
<br>&nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp;&nbsp; else {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">enforce_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else {
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp;&nbsp; }
<br>&nbsp; }
<br>&nbsp; return </span><span class="default">$array</span><span class="keyword">;
<br> }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114201">  
  <a class="name">
  <strong class="user"><em>Tim Adam Perez</em></strong></a><div class="date" title="2014-01-23 08:22"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114201">
<div class="phpcode"><code><span class="html">
XML to Array in a single line:<br>$array = (array) simplexml_load_string($xml);<br><br>Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94940">  
  <a class="name">
  <strong class="user"><em>Danny from holland</em></strong></a><div class="date" title="2009-12-03 05:58"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94940">
<div class="phpcode"><code><span class="html">
I tested all the scripts ive found on this page but none of them wasnt working.<br><br>ive made an new script that will work and wont get any memory errors with big xml feeds<br><br><span class="default">&lt;?php<br></span><span class="keyword">print </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br><br></span><span class="default">$root </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$XML_URL</span><span class="keyword">);<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$root</span><span class="keyword">);<br><br></span><span class="default">$producten </span><span class="keyword">= array();<br><br>foreach (</span><span class="default">$data</span><span class="keyword">[</span><span class="string">'product'</span><span class="keyword">] as </span><span class="default">$keys </span><span class="keyword">=&gt; </span><span class="default">$values</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$producten</span><span class="keyword">[</span><span class="string">'product'</span><span class="keyword">][</span><span class="default">$keys</span><span class="keyword">] = </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">[</span><span class="string">'product'</span><span class="keyword">]);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach (</span><span class="default">$values </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$producten</span><span class="keyword">[</span><span class="string">'product'</span><span class="keyword">][</span><span class="default">$keys</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>}<br></span><span class="default">print_R</span><span class="keyword">(</span><span class="default">$producten</span><span class="keyword">);<br><br>print </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112533">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-06-26 04:23"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112533">
<div class="phpcode"><code><span class="html">
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt; <br>- &lt;Types xmlns="<a rel="nofollow" target="_blank">http://schemas.openxmlformats.org/package/2006/content-types</a>"&gt;<br>&nbsp; &lt;Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /&gt; <br>&nbsp; &lt;Default Extension="xml" ContentType="application/xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/document.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml" /&gt; <br>&nbsp; &lt;Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/settings.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/fontTable.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.fontTable+xml" /&gt; <br>&nbsp; &lt;Override PartName="/word/webSettings.xml" ContentType="application/vnd.openxmlformats-officedocument.wordprocessingml.webSettings+xml" /&gt; <br>&nbsp; &lt;Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" /&gt; <br>&nbsp; &lt;/Types&gt;</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/book.simplexml.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:43:44 GMT -->


</body></html>