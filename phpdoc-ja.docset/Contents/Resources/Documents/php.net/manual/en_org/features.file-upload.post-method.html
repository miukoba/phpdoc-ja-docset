<html><!-- Mirrored from php.net/manual/en/features.file-upload.post-method.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:10 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>POST method uploads</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="features.file-upload.post-method.html">
 <link rel="shorturl" href="http://php.net/file-upload.post-method">
 <link rel="alternate" href="http://php.net/file-upload.post-method" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="features.file-upload.html">
 <link rel="prev" href="features.file-upload.html">
 <link rel="next" href="features.file-upload.errors.html">

 <link rel="alternate" href="features.file-upload.post-method.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/features.file-upload.post-method.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/features.file-upload.post-method.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/features.file-upload.post-method.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/features.file-upload.post-method.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/features.file-upload.post-method.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/features.file-upload.post-method.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/features.file-upload.post-method.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/features.file-upload.post-method.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/features.file-upload.post-method.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/features.file-upload.post-method.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="features.html">Features</a></li>      <li><a href="features.file-upload.html">Handling file uploads</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="features.file-upload.post-method" class="sect1">
   <h2 class="title">POST method uploads</h2>
   <p class="simpara">
    This feature lets people upload both text and binary files. 
    With PHP's authentication and file manipulation functions,
    you have full control over who is allowed to upload and
    what is to be done with the file once it has been uploaded.
   </p>
   <p class="simpara">
    PHP is capable of receiving file uploads from any RFC-1867
    compliant browser.
   </p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    <strong>Related Configurations Note</strong><br>
    </p><p class="para">
     See also the <a href="ini.core.html#ini.file-uploads" class="link">file_uploads</a>, 
     <a href="ini.core.html#ini.upload-max-filesize" class="link">upload_max_filesize</a>,
     <a href="ini.core.html#ini.upload-tmp-dir" class="link">upload_tmp_dir</a>,
     <a href="ini.core.html#ini.post-max-size" class="link">post_max_size</a> and
     <a href="info.configuration.html#ini.max-input-time" class="link">max_input_time</a> directives 
     in <var class="filename">php.ini</var>
    </p>
   <p></p></blockquote>

   <p class="para">
    PHP also supports PUT-method file uploads as used by
    <span class="productname">Netscape Composer</span> and W3C's 
    <span class="productname">Amaya</span> clients.  See the <a href="features.file-upload.put-method.html" class="link">PUT Method
    Support</a> for more details.
   </p>

   <p class="para">
    </p><div class="example" id="example-375">
     <p><strong>Example #1 File Upload Form</strong></p>
     <div class="example-contents"><p>
      A file upload screen can be built by creating a special form which
      looks something like this:
     </p></div>
     <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;!-- The data encoding type, enctype, MUST be specified as below --&gt;
&lt;form enctype="multipart/form-data" action="__URL__" method="POST"&gt;
    &lt;!-- MAX_FILE_SIZE must precede the file input field --&gt;
    &lt;input type="hidden" name="MAX_FILE_SIZE" value="30000" /&gt;
    &lt;!-- Name of input element determines name in $_FILES array --&gt;
    Send this file: &lt;input name="userfile" type="file" /&gt;
    &lt;input type="submit" value="Send File" /&gt;
&lt;/form&gt;</pre>
</div>
     </div>

     <div class="example-contents"><p>
      The <em>__URL__</em> in the above example should be replaced,
      and point to a PHP file.
     </p></div>
     <div class="example-contents"><p>
      The <em>MAX_FILE_SIZE</em> hidden field (measured in bytes) must
      precede the file input field, and its value is the maximum filesize accepted by PHP.
      This form element should always be used as it saves users the trouble of
      waiting for a big file being transferred only to find that it was too
      large and the transfer failed.  Keep in mind: fooling this setting on the
      browser side is quite easy, so never rely on files with a greater size
      being blocked by this feature. It is merely a convenience feature for
      users on the client side of the application. The PHP settings (on the server
      side) for maximum-size, however, cannot be fooled.
     </p></div>
    </div>
   <p></p>

   <blockquote class="note"><p><strong class="note">Note</strong>: 
    </p><p class="para">
     Be sure your file upload form has attribute <em>enctype="multipart/form-data"</em>
     otherwise the file upload will not work.
    </p>
   <p></p></blockquote>

   <p class="para">
    The global <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES</a></var></var>
    exists as of PHP 4.1.0 (Use <var class="varname"><var class="varname">$HTTP_POST_FILES</var></var>
    instead if using an earlier version).
    These arrays will contain all the uploaded file information.
   </p>

   <p class="para">
    The contents of <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES</a></var></var>
    from the example form is as follows. Note that this assumes the use of 
    the file upload name <em class="emphasis">userfile</em>, as used in the example 
    script above. This can be any name.
    </p><dl>

     
      <dt>
<var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['name']</a></var></var></dt>

      <dd>

       <p class="para">
        The original name of the file on the client machine.
       </p>
      </dd>

     
     
      <dt>
<var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['type']</a></var></var></dt>

      <dd>

       <p class="para">
        The mime type of the file, if the browser provided this
        information.  An example would be
        <em>"image/gif"</em>. This mime type is however
        not checked on the PHP side and therefore don't take its value
        for granted.
       </p>
      </dd>

     
     
      <dt>
<var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['size']</a></var></var></dt>

      <dd>

       <p class="para">
        The size, in bytes, of the uploaded file.
       </p>
      </dd>

     
     
      <dt>
<var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['tmp_name']</a></var></var></dt>

      <dd>

       <p class="para">
        The temporary filename of the file in which the uploaded file
        was stored on the server.
       </p>
      </dd>

     
     
      <dt>
<var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['error']</a></var></var></dt>

      <dd>

       <p class="para">
        The <a href="features.file-upload.errors.html" class="link">error code</a>
        associated with this file upload. This element was added in PHP 4.2.0
       </p>
      </dd>

     
    </dl>

   <p></p>

   <p class="para">
    Files will, by default be stored in the server's default temporary
    directory, unless another location has been given with the <a href="ini.core.html#ini.upload-tmp-dir" class="link">upload_tmp_dir</a> directive in
    <var class="filename">php.ini</var>. The server's default directory can
    be changed by setting the environment variable
    <span class="envar">TMPDIR</span> in the environment in which PHP runs.
    Setting it using <span class="function"><a href="function.putenv.html" class="function">putenv()</a></span> from within a PHP
    script will not work. This environment variable can also be used
    to make sure that other operations are working on uploaded files,
    as well.
    </p><div class="example" id="example-376">
     <p><strong>Example #2 Validating file uploads</strong></p>
     <div class="example-contents"><p>
      See also the function entries for <span class="function"><a href="function.is-uploaded-file.html" class="function">is_uploaded_file()</a></span> 
      and <span class="function"><a href="function.move-uploaded-file.html" class="function">move_uploaded_file()</a></span> for further information. The
      following example will process the file upload that came from a form.
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;In&nbsp;PHP&nbsp;versions&nbsp;earlier&nbsp;than&nbsp;4.1.0,&nbsp;$HTTP_POST_FILES&nbsp;should&nbsp;be&nbsp;used&nbsp;instead<br>//&nbsp;of&nbsp;$_FILES.<br><br></span><span style="color: #0000BB">$uploaddir&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/var/www/uploads/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$uploadfile&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$uploaddir&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">basename</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'userfile'</span><span style="color: #007700">][</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]);<br><br>echo&nbsp;</span><span style="color: #DD0000">'&lt;pre&gt;'</span><span style="color: #007700">;<br>if&nbsp;(</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'userfile'</span><span style="color: #007700">][</span><span style="color: #DD0000">'tmp_name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$uploadfile</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"File&nbsp;is&nbsp;valid,&nbsp;and&nbsp;was&nbsp;successfully&nbsp;uploaded.\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Possible&nbsp;file&nbsp;upload&nbsp;attack!\n"</span><span style="color: #007700">;<br>}<br><br>echo&nbsp;</span><span style="color: #DD0000">'Here&nbsp;is&nbsp;some&nbsp;more&nbsp;debugging&nbsp;info:'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">);<br><br>print&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p></p>
   <p class="simpara">
    The PHP script which receives the uploaded file should implement
    whatever logic is necessary for determining what should be done
    with the uploaded file. You can, for example, use the
    <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['size']</a></var></var> variable
    to throw away any files that are either too small or too big.  You
    could use the
    <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['type']</a></var></var> variable
    to throw away any files that didn't match a certain type criteria, but
    use this only as first of a series of checks, because this value
    is completely under the control of the client and not checked on the PHP
    side.
    As of PHP 4.2.0, you could use <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['error']</a></var></var> 
    and plan your logic according to the <a href="features.file-upload.errors.html" class="link">error codes</a>.
    Whatever the logic, you should either delete the file from the
    temporary directory or move it elsewhere.
   </p>
   <p class="simpara">
    If no file is selected for upload in your form, PHP will return
    <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['size']</a></var></var> as 0, and
    <var class="varname"><var class="varname"><a href="reserved.variables.files.html" class="classname">$_FILES['userfile']['tmp_name']</a></var></var> as none.
   </p>
   <p class="simpara">
    The file will be deleted from the temporary directory at the end
    of the request if it has not been moved away or renamed.
   </p>
    <div class="example" id="example-377">
     <p><strong>Example #3 Uploading array of files</strong></p>
     <div class="example-contents"><p>
      PHP supports <a href="faq.html.html#faq.html.arrays" class="link">HTML array feature</a>
      even with files.
     </p></div>
     <div class="example-contents">
<div class="htmlcode"><pre class="htmlcode">&lt;form action="" method="post" enctype="multipart/form-data"&gt;
&lt;p&gt;Pictures:
&lt;input type="file" name="pictures[]" /&gt;
&lt;input type="file" name="pictures[]" /&gt;
&lt;input type="file" name="pictures[]" /&gt;
&lt;input type="submit" value="Send" /&gt;
&lt;/p&gt;
&lt;/form&gt;</pre>
</div>
     </div>

     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #007700">foreach&nbsp;(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"error"</span><span style="color: #007700">]&nbsp;as&nbsp;</span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$error</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">UPLOAD_ERR_OK</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tmp_name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"tmp_name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">"pictures"</span><span style="color: #007700">][</span><span style="color: #DD0000">"name"</span><span style="color: #007700">][</span><span style="color: #0000BB">$key</span><span style="color: #007700">];<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">move_uploaded_file</span><span style="color: #007700">(</span><span style="color: #0000BB">$tmp_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"data/</span><span style="color: #0000BB">$name</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   <p class="para">
    File upload progress bar can be implemented using <a href="session.upload-progress.html" class="link">Session Upload Progress</a>.
   </p>
  </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="91479">  
  <a class="name">
  <strong class="user"><em>daevid at daevid dot com</em></strong></a><div class="date" title="2009-06-11 02:35"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91479">
<div class="phpcode"><code><span class="html">
I think the way an array of attachments works is kind of cumbersome. Usually the PHP guys are right on the money, but this is just counter-intuitive. It should have been more like:<br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; facepalm.jpg<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [type] =&gt; image/jpeg<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tmp_name] =&gt; /tmp/phpn3FmFr<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [error] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [size] =&gt; 15476<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [1] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [type] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tmp_name] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [error] =&gt; 4<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [size] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>)<br><br>and not this<br>Array<br>(<br>&nbsp; &nbsp; [name] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; facepalm.jpg<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [type] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; image/jpeg<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [tmp_name] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; /tmp/phpn3FmFr<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; <br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [error] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 4<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [size] =&gt; Array<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [0] =&gt; 15476<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 0<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br>)<br><br>Anyways, here is a fuller example than the sparce one in the documentation above:<br><br><span class="default">&lt;?php<br></span><span class="keyword">foreach (</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"attachment"</span><span class="keyword">][</span><span class="string">"error"</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$error</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_name </span><span class="keyword">= </span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"attachment"</span><span class="keyword">][</span><span class="string">"tmp_name"</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$tmp_name</span><span class="keyword">) continue;<br><br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">"attachment"</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]);<br><br>&nbsp; &nbsp; if (</span><span class="default">$error </span><span class="keyword">== </span><span class="default">UPLOAD_ERR_OK</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( </span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$tmp_name</span><span class="keyword">, </span><span class="string">"/tmp/"</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">) )<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$uploaded_array</span><span class="keyword">[] .= </span><span class="string">"Uploaded file '"</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"'.&lt;br/&gt;\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$errormsg </span><span class="keyword">.= </span><span class="string">"Could not move uploaded file '"</span><span class="keyword">.</span><span class="default">$tmp_name</span><span class="keyword">.</span><span class="string">"' to '"</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"'&lt;br/&gt;\n"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else </span><span class="default">$errormsg </span><span class="keyword">.= </span><span class="string">"Upload error. ["</span><span class="keyword">.</span><span class="default">$error</span><span class="keyword">.</span><span class="string">"] on file '"</span><span class="keyword">.</span><span class="default">$name</span><span class="keyword">.</span><span class="string">"'&lt;br/&gt;\n"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89938">  
  <a class="name">
  <strong class="user"><em>eslindsey at gmail dot com</em></strong></a><div class="date" title="2009-03-29 11:09"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89938">
<div class="phpcode"><code><span class="html">
Also note that since MAX_FILE_SIZE hidden field is supplied by the browser doing the submitting, it is easily overridden from the clients' side.&nbsp; You should always perform your own examination and error checking of the file after it reaches you, instead of relying on information submitted by the client.&nbsp; This includes checks for file size (always check the length of the actual data versus the reported file size) as well as file type (the MIME type submitted by the browser can be inaccurate at best, and intentionally set to an incorrect value at worst).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94973">  
  <a class="name">
  <strong class="user"><em>michael</em></strong></a><div class="date" title="2009-12-05 09:19"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94973">
<div class="phpcode"><code><span class="html">
Just a little note, when I was trying to get this to work on my webserver I got error telling me the permissions were wrong, I checked and couldn't see anything wrong then I thought to try "./" for my upload directory instead of the full address which was something like "home/username/public_html/uploaddir". This will save it in the same directory as your script for the program above thats something like<br><br><span class="default">&lt;?php<br></span><span class="comment">// In PHP versions earlier than 4.1.0, $HTTP_POST_FILES should be used instead<br>// of $_FILES.<br><br></span><span class="default">$uploaddir </span><span class="keyword">= </span><span class="string">'./'</span><span class="keyword">;</span><span class="comment">//&lt;----This is all I changed<br></span><span class="default">$uploadfile </span><span class="keyword">= </span><span class="default">$uploaddir </span><span class="keyword">. </span><span class="default">basename</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'userfile'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]);<br><br>echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br>if (</span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'userfile'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], </span><span class="default">$uploadfile</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"File is valid, and was successfully uploaded.\n"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"Possible file upload attack!\n"</span><span class="keyword">;<br>}<br><br>echo </span><span class="string">'Here is some more debugging info:'</span><span class="keyword">;<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">);<br><br>print </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>I know something trivial but when your new to this, those kind of things elude you.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111561">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-03-04 06:05"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111561">
<div class="phpcode"><code><span class="html">
Normalizing $_FILES structure:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $files </span><span class="keyword">= [];<br>&nbsp; &nbsp; </span><span class="default">$fix </span><span class="keyword">= function (&amp;</span><span class="default">$files</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">, </span><span class="default">$prop</span><span class="keyword">) use (&amp;</span><span class="default">$fix</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$values </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fix</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$prop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$prop</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; };<br>&nbsp; &nbsp; foreach (</span><span class="default">$_FILES </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$props</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$props </span><span class="keyword">as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fix</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$prop</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">][</span><span class="default">$prop</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104349">  
  <a class="name">
  <strong class="user"><em>Age Bosma</em></strong></a><div class="date" title="2011-06-10 02:49"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104349">
<div class="phpcode"><code><span class="html">
"If no file is selected for upload in your form, PHP will return $_FILES['userfile']['size'] as 0, and $_FILES['userfile']['tmp_name'] as none."<br><br>Note that the situation above is the same when a file exceeding the MAX_FILE_SIZE hidden field is being uploaded. In this case $_FILES['userfile']['size'] is also set to 0, and $_FILES['userfile']['tmp_name'] is also empty. The difference would only be the error code.<br>Simply checking for these two conditions and assuming no file upload has been attempted is incorrect.<br><br>Instead, check if $_FILES['userfile']['name'] is set or not. If it is, a file upload has at least been attempted (a failed attempt or not). If it is not set, no attempt has been made.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89697">  
  <a class="name">
  <strong class="user"><em>claude dot pache at gmail dot com</em></strong></a><div class="date" title="2009-03-19 09:26"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89697">
<div class="phpcode"><code><span class="html">
Note that the MAX_FILE_SIZE hidden field is only used by the PHP script which receives the request, as an instruction to reject files larger than the given bound. This field has no significance for the browser, it does not provide a client-side check of the file-size, and it has nothing to do with web standards or browser features.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100187">  
  <a class="name">
  <strong class="user"><em>Mark</em></strong></a><div class="date" title="2010-09-29 04:12"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100187">
<div class="phpcode"><code><span class="html">
$_FILES will be empty if a user attempts to upload a file greater than post_max_size in your php.ini<br><br>post_max_size should be &gt;= upload_max_filesize in your php.ini.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105308">  
  <a class="name">
  <strong class="user"><em>gustavo at roskus dot com</em></strong></a><div class="date" title="2011-08-08 12:21"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105308">
<div class="phpcode"><code><span class="html">
Some hosting does not have permission to use the move_uploaded_file function should replace the copy function</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102213">  
  <a class="name">
  <strong class="user"><em>zingaburga at hotmail dot com</em></strong></a><div class="date" title="2011-02-02 07:09"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102213">
<div class="phpcode"><code><span class="html">
The documentation is a little unclear about the MAX_FILE_SIZE value sent in the form with multiple file input fields.&nbsp; The following is what I have found through testing - hopefully it may clarify it for others.<br><br>The MAX_FILE_SIZE is applied to each file (not the total size of all files) and to all file inputs which appear after it.&nbsp; This means that it can be overridden for different file fields.&nbsp; You can also disable it by sending no number, or sending 0 (probably anything that == '0' if you think about it).<br><br>Example:<br><br>&lt;form enctype="multipart/form-data" action="." method="POST"&gt;<br>&nbsp; &lt;!-- no maximum size for userfile0 --&gt;<br>&nbsp; &lt;input name="userfile0" type="file" /&gt;<br><br>&nbsp; &lt;input type="hidden" name="MAX_FILE_SIZE" value="1000" /&gt;<br>&nbsp; &lt;!-- maximum size for userfile1 is 1000 bytes --&gt;<br>&nbsp; &lt;input name="userfile1" type="file" /&gt;<br>&nbsp; &lt;!-- maximum size for userfile2 is 1000 bytes --&gt;<br>&nbsp; &lt;input name="userfile2" type="file" /&gt;<br><br>&nbsp; &lt;input type="hidden" name="MAX_FILE_SIZE" value="2000" /&gt;<br>&nbsp; &lt;!-- maximum size for userfile3 is 2000 bytes --&gt;<br>&nbsp; &lt;input name="userfile3" type="file" /&gt;<br><br>&nbsp; &lt;input type="hidden" name="MAX_FILE_SIZE" value="0" /&gt;<br>&nbsp; &lt;!-- no maximum size for userfile4 --&gt;<br>&nbsp; &lt;input name="userfile4" type="file" /&gt;<br>&lt;/form&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101761">  
  <a class="name">
  <strong class="user"><em>mail at markuszeller dot com</em></strong></a><div class="date" title="2011-01-10 12:34"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101761">
<div class="phpcode"><code><span class="html">
If you want to increase the upload size, it could make sense to allow it only to a specified directory and not in the php.ini for the whole domain or server. In my case it worked very well placing that into the .htaccess file like this:<br><br>php_value&nbsp; &nbsp; upload_max_filesize&nbsp; &nbsp; 100M<br>php_value&nbsp; &nbsp; post_max_size&nbsp; &nbsp; 101M<br><br>Remember, post_max_size must be bigger than the upload_max_filesize.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/features.file-upload.post-method.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:10 GMT -->


</body></html>