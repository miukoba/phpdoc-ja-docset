<html><!-- Mirrored from php.net/manual/en/security.cgi-bin.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:20:53 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Installed as CGI binary</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="security.cgi-bin.html">
 <link rel="shorturl" href="security.cgi-bin.html">
 <link rel="alternate" href="security.cgi-bin.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="security.html">
 <link rel="prev" href="security.general.html">
 <link rel="next" href="security.cgi-bin.attacks.html">

 <link rel="alternate" href="security.cgi-bin.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/security.cgi-bin.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/security.cgi-bin.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/security.cgi-bin.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/security.cgi-bin.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/security.cgi-bin.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/security.cgi-bin.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/security.cgi-bin.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/security.cgi-bin.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/security.cgi-bin.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/security.cgi-bin.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="security.html">Security</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="security.cgi-bin" class="chapter">
   <h1>Installed as CGI binary</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="security.cgi-bin.attacks.html">Possible attacks</a></li><li><a href="security.cgi-bin.default.html">Case 1: only public files served</a></li><li><a href="security.cgi-bin.force-redirect.html">Case 2: using cgi.force_redirect</a></li><li><a href="security.cgi-bin.doc-root.html">Case 3: setting doc_root or user_dir</a></li><li><a href="security.cgi-bin.shell.html">Case 4: PHP parser outside of web tree</a></li></ul>


   

   

   

   

   

  </div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="10714">  
  <a class="name">
  <strong class="user"><em>steeven at kali dot com dot cn</em></strong></a><div class="date" title="2001-01-18 01:54"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom10714">
<div class="phpcode"><code><span class="html">
suEXEC require CGI mode, and slow down the scripts. I did them like this:
<br>1. Install php as DSO mode. (for max speed and low secure)
<br>2. Make a seperate CGI install with --enable-force-cgi-redirect, place php to cgi-bin
<br>3 For more secure with suEXEC, choose one of the following method:
<br>3-1: Place a .htaccess file containing this to override main config:
<br>AddType application/x-httpd-wphp php
<br>Action application/x-httpd-wphp /cgi-bin/php
<br>&nbsp; All php files in subdirectory will be protected.
<br>3-2: add following in httpd.conf:
<br>AddType application/x-httpd-wphp sphp
<br>Action application/x-httpd-wphp /cgi-bin/php
<br>&nbsp; then each sensitive php file should be renamed to .sphp
<br>
<br>Add "php_value doc_root /home/user/html_docs" to each virtual host directive in httpd.conf</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12380">  
  <a class="name">
  <strong class="user"><em>michel dot jansens at ulb dot ac dot be</em></strong></a><div class="date" title="2001-04-09 10:21"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom12380">
<div class="phpcode"><code><span class="html">
If you want to use suexec and reference your php interpreter via #!/usr/local/bin/php,&nbsp; be shure to compile php WITHOUT&nbsp; --enable-force-cgi-redirect.
<br>
<br>This might seems obvious, but I spent 2 days on this :-(</span>
</code></div>
  </div>
 </div>
  <div class="note" id="5542">  
  <a class="name">
  <strong class="user"><em>kstone at trivergent dot net</em></strong></a><div class="date" title="2000-05-04 02:01"><strong>14 years ago</strong></div>
  <div class="text" id="Hcom5542">
<div class="phpcode"><code><span class="html">
Better yet, use binfmt_misc:&nbsp; (linux only)
<br>
<br>echo :php3:E::php3::/usr/bin/php: &gt; /proc/sys/fs/binfmt_misc/register
<br>
<br>Eliminates the need for the #! at the top of the file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30546">  
  <a class="name">
  <strong class="user"><em>pookey at pookey dot co dot uk</em></strong></a><div class="date" title="2003-03-21 10:29"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30546">
<div class="phpcode"><code><span class="html">
I have setup a guide to installing PHP with SuEXEC in such a way that shebangs (!#/usr/bin/php4) are not needed.&nbsp; Hope this is of some help to you.
<br>
<br><a rel="nofollow" target="_blank">http://www.pookey.co.uk/php-security.xml</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="35492">  
  <a class="name">
  <strong class="user"><em>geeky at geeky dot de</em></strong></a><div class="date" title="2003-09-02 07:32"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom35492">
<div class="phpcode"><code><span class="html">
a replacement for suexec is suphp (<a rel="nofollow" target="_blank">http://www.suphp.org</a>).<br><br>"suPHP is a tool for executing PHP scripts with the permissions of their owners. It consists of an Apache module (mod_suphp) and a setuid root binary (suphp) that is called by the Apache module to change the uid of the process executing the PHP interpreter." (from the website)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108524">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-05-03 09:06"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108524">
<div class="phpcode"><code><span class="html">
IMPORTANT INFORMATION<br><br>There was a serious vulnerability in certain CGI-based PHP setups that has gone unnoticed for at least 8 years.<br><br>For PHP this means that a request containing ?-s may dump the PHP source code for the page.<br><br>Make sure to update to current versions and/or use an .htaccess patch, both available here:<br><br>PHP 5.3.12 and PHP 5.4.2 Released:<br><a rel="nofollow" target="_blank">http://www.php.net/archive/2012.php#id2012-05-03-1</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="77041">  
  <a class="name">
  <strong class="user"><em>Craig Buchek</em></strong></a><div class="date" title="2007-08-12 09:33"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77041">
<div class="phpcode"><code><span class="html">
NOTE: Running PHP as a CGI program will change the value of $_SERVER['SCRIPT_NAME']. When running via the (normal) mod_PHP mechanism, it will be set to the name of (actually, path to) the PHP script that's running. When running via CGI, it will instead point to the path of the CGI binary.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60508">  
  <a class="name">
  <strong class="user"><em>phpD0TnetATmoritzHYPHONnaumannD0Tcom</em></strong></a><div class="date" title="2006-01-09 09:56"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60508">
<div class="phpcode"><code><span class="html">
One of the most common reasons why you get 'No input file specified' (AKA 'the second most useful error message in the world') is that you have set 'doc_root' (in php.ini) to a value which is to the 'DocumentRoot' defined in the apache configuration. <br><br>This is the same for other webservers. For example, on lighttpd, make sure the 'server.document-root' value is the same as what is defined as 'doc_root' in php.ini.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43998">  
  <a class="name">
  <strong class="user"><em>martelli at geoserve dot com dot br</em></strong></a><div class="date" title="2004-07-12 12:25"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43998">
<div class="phpcode"><code><span class="html">
PHP CGI with VirtualHosts.<br><br>This is what I found out while trying to get php to work as CGI with Apache VirtualHosts.<br><br>By enabling 'force-cgiredirects', you *must*:<br>1) set 'cgi.fix_pathinfo=1' in php.ini<br>2) leave doc_root commented out (php.ini also)<br><br>If you miss item 1, the apache logs will show 'unexpected T_STRING' in the php binary.<br>If you miss item 2, you'll only see 'No input file specified.', instead of the expected output.<br><br>You can then turn on the php support for a particular vhost by defining:<br><br>Action php-script /cgi-bin/php<br><br>inside the corresponding &lt;VirtualHost&gt; directive.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43197">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2004-06-13 08:26"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43197">
<div class="phpcode"><code><span class="html">
PHP works with Apache and suEXEC like this:<br>(Assuming that suEXEC ist allready installed and working)<br><br>Install PHP as CGI binary (e.g. in /usr/local/bin/php)<br>(compile with --enable-force-cgi-redirect)<br><br>Create a Link inside cgi-bin directory to make php-cgi accessable:<br>cd /usr/local/apache/cgi-bin<br>ln /usr/local/bin/php php<br><br>Edit your httpd.conf file:<br> AddHandler php4-script .php<br> Action php4-script /cgi-bin/php<br><br> &lt;VirtualHost 123.456.789.0:80&gt;<br>&nbsp; &nbsp; User exampleuser<br>&nbsp; &nbsp; Group examplegroup<br>&nbsp; &nbsp;&nbsp; ...<br>&nbsp;&nbsp; <br> &lt;/VirtualHost&gt;<br><br>Restart Apache<br><br>PHP-scripts are now called under the user-id of exampleuser and group-id of examplegroup.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25347">  
  <a class="name">
  <strong class="user"><em>ruben at puettmann dot net</em></strong></a><div class="date" title="2002-09-20 06:29"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25347">
<div class="phpcode"><code><span class="html">
To use php-cgi with suexec it will be nice that each virtual host has ist's own php.ini. This goes with : <br><br>SetEnv PHPRC /var/www/server/www.test.com/conf<br><br>But suexec will kill this enviromet cause It don't know that it is "save" so you must edit the suexec.c for compiling ....</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51182">  
  <a class="name">
  <strong class="user"><em>phil dot ross at gmail dot com</em></strong></a><div class="date" title="2005-03-22 03:56"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51182">
<div class="phpcode"><code><span class="html">
In response to grange at club-internet dot fr:<br><br>There are a couple of errors in the mod_rewrite directives given. I found that the following works:<br><br>RewriteEngine on<br>RewriteCond %{ENV:REDIRECT_STATUS} !200<br>RewriteRule ^cgi-bin/php.cgi - [F]<br><br>I removed the = from the RewriteCond and took out the leading / from the RewriteRule.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="12432">  
  <a class="name">
  <strong class="user"><em>yohgaki at hotmail dot com</em></strong></a><div class="date" title="2001-04-12 11:44"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom12432">
<div class="phpcode"><code><span class="html">
If you care about security, you are better of setting 
<br>
<br>register_globals = off
<br>enable_track_vars = on (Always on from PHP4.0.3)
<br>
<br>Default setting for variable order is 
<br>EGPCS 
<br>(ENV VARS/GET VARS/POST VARS/COOKIE VARS/SESSION VARS)
<br>
<br>Imagine if you are rely on ENV VAR but it was orver written with GET/POST/COOKIE vars?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49904">  
  <a class="name">
  <strong class="user"><em>kschroeder at mirageworks dot com</em></strong></a><div class="date" title="2005-02-11 07:23"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49904">
<div class="phpcode"><code><span class="html">
I have noticed that some people have noted that running PHP as a CGI program can run slowly compared with a compiled in module.&nbsp; Some have noted that they want to use FastCGI but are hesitant.&nbsp; I found that using the Apache 2's CGID module was a great way to speed up performance almost to the same level as an "so"-installed PHP module but you get the added benefit of running each virtual host under it's own user and group.&nbsp; <br><br>In my testing I got 44 pages per second using PHP as a module and I got roughly the same performance (within 5%) running PHP as a CGI program through CGID.<br><br>CGID is also really easy to set up.&nbsp; Just add --enable-cgid to your Apache configure command and you're good to go.&nbsp; Just set up PHP as a CGI normally.<br><br>I'm sure that there's extra RAM used for this method but RAM is as cheap as borscht anyways so it shouldn't be a major factor when trying to speed up PHP CGI.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="25577">  
  <a class="name">
  <strong class="user"><em>matled at gmx dot net</em></strong></a><div class="date" title="2002-09-28 03:53"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom25577">
<div class="phpcode"><code><span class="html">
If you are using php per cgi and have additionally mod_gzip enabled you have to disable mod_gzip for the php cgi binary to use --enable-cgi-redirect. mod_gzip sets the REDIRECT_STATUS always to 200 which makes it impossible for the php binary to know when it was called directly or when it was called by a redirect.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="29548">  
  <a class="name">
  <strong class="user"><em>goran_johansson at yahoo dot com</em></strong></a><div class="date" title="2003-02-17 06:53"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom29548">
<div class="phpcode"><code><span class="html">
A tip for Windows-users<br><br>Just a tip for you so do not do the same mistake as I did:<br>I just found out that PHP first seem to look in the php-directory for php.ini, and if that file does not exist, it looks in the Windows directory. <br>I renamed the file php.ini-dist to php.ini and copied it to my Windows directory, and then I modified the infamous "cgi.force_redirect = 0" in the php.ini file located in the Windows directory, to make it work. But it did not because it reads from the "original" php.ini - So when I deleted this php.ini things started working again</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/security.cgi-bin.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:20:53 GMT -->


</body></html>