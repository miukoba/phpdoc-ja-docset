<html><!-- Mirrored from php.net/manual/en/function.ftp-rawlist.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:25 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>ftp_rawlist</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.ftp-rawlist.html">
 <link rel="shorturl" href="http://php.net/ftp-rawlist">
 <link rel="alternate" href="http://php.net/ftp-rawlist" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.ftp.html">
 <link rel="prev" href="function.ftp-raw.html">
 <link rel="next" href="function.ftp-rename.html">

 <link rel="alternate" href="function.ftp-rawlist.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.ftp-rawlist.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.ftp-rawlist.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.ftp-rawlist.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.ftp-rawlist.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.ftp-rawlist.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.ftp-rawlist.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.ftp-rawlist.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.ftp-rawlist.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.ftp-rawlist.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.ftp-rawlist.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.ftp.html">FTP</a></li>      <li><a href="ref.ftp.html">FTP Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.ftp-rawlist" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_rawlist</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">ftp_rawlist</span> â€” <span class="dc-title">Returns a detailed list of files in the given directory</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-rawlist-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>ftp_rawlist</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$ftp_stream</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$directory</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$recursive</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ftp_rawlist()</strong></span> executes the FTP 
   <strong class="command">LIST</strong> command, and returns the result as an array.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-rawlist-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">ftp_stream</code></dt>

     <dd>

      <p class="para">
       The link identifier of the FTP connection.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">directory</code></dt>

     <dd>

      <p class="para">
       The directory path. May include arguments for the <strong class="command">LIST</strong>
       command.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">recursive</code></dt>

     <dd>

      <p class="para">
       If set to <strong><code>TRUE</code></strong>, the issued command will be <strong class="command">LIST -R</strong>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-rawlist-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array where each element corresponds to one line of text. Returns
   <strong><code>FALSE</code></strong> when passed <code class="parameter">directory</code> is invalid.
  </p>
  <p class="para">
   The output is not parsed in any way. The system type identifier returned by
   <span class="function"><a href="function.ftp-systype.html" class="function">ftp_systype()</a></span> can be used to determine how the results 
   should be interpreted.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.ftp-rawlist-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4417">
    <p><strong>Example #1 <span class="function"><strong>ftp_rawlist()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;set&nbsp;up&nbsp;basic&nbsp;connection<br></span><span style="color: #0000BB">$conn_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;login&nbsp;with&nbsp;username&nbsp;and&nbsp;password<br></span><span style="color: #0000BB">$login_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;get&nbsp;the&nbsp;file&nbsp;list&nbsp;for&nbsp;/<br></span><span style="color: #0000BB">$buff&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_rawlist</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;close&nbsp;the&nbsp;connection<br></span><span style="color: #0000BB">ftp_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;output&nbsp;the&nbsp;buffer<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$buff</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output
something similar to:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>array(3) {
  [0]=&gt;
  string(65) "drwxr-x---   3 vincent  vincent      4096 Jul 12 12:16 public_ftp"
  [1]=&gt;
  string(66) "drwxr-x---  15 vincent  vincent      4096 Nov  3 21:31 public_html"
  [2]=&gt;
  string(73) "lrwxrwxrwx   1 vincent  vincent        11 Jul 12 12:16 www -&gt; public_html"
}
</pre></div>
    </div>
   </div>
  <p></p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.ftp-rawlist-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ftp-nlist.html" class="function" rel="rdfs-seeAlso">ftp_nlist()</a> - Returns a list of files in the given directory</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="110803">  
  <a class="name">
  <strong class="user"><em>fredvanetten at tinqle dot com</em></strong></a><div class="date" title="2012-12-10 07:12"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110803">
<div class="phpcode"><code><span class="html">
Here's a simple function that'll parse the data returned by ftp_rawlist() into an associative array. I wrote it because some of the functions listed below are way to long, complex or won't work with file names that contain spaces.
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">listDetailed</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$directory </span><span class="keyword">= </span><span class="string">'.'</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$children </span><span class="keyword">= @</span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$resource</span><span class="keyword">, </span><span class="default">$directory</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items </span><span class="keyword">= array();
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$children </span><span class="keyword">as </span><span class="default">$child</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$chunks </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/\s+/"</span><span class="keyword">, </span><span class="default">$child</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$item</span><span class="keyword">[</span><span class="string">'rights'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'month'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">], </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">]) = </span><span class="default">$chunks</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$item</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">} === </span><span class="string">'d' </span><span class="keyword">? </span><span class="string">'directory' </span><span class="keyword">: </span><span class="string">'file'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$chunks</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$items</span><span class="keyword">[</span><span class="default">implode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$chunks</span><span class="keyword">)] = </span><span class="default">$item</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$items</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Throw exception or return false &lt; up to you
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101071">  
  <a class="name">
  <strong class="user"><em>Johnny Doe</em></strong></a><div class="date" title="2010-11-24 06:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101071">
<div class="phpcode"><code><span class="html">
In case anybody wants to get a detailed listing using the MLSD command over a passive connection, the following function might be helpful as a starting point for your own implementation:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">ftp_mlsd</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="default">$directory</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$ok </span><span class="keyword">= @</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="default">$directory</span><span class="keyword">);
<br>&nbsp; &nbsp; if (!</span><span class="default">$ok</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">ftp_raw</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">'PASV'</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/^227.*\(([0-9]+,[0-9]+,[0-9]+,[0-9]+),([0-9]+),([0-9]+)\)$/'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$matches</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$controlIP </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">','</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$controlPort </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">])*</span><span class="default">256</span><span class="keyword">+</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$socket </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$controlIP</span><span class="keyword">, </span><span class="default">$controlPort</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ftp_raw</span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">'MLSD'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">.= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$socket</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">) as </span><span class="default">$line</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$line</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file </span><span class="keyword">= array();
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">explode</span><span class="keyword">(</span><span class="string">';'</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">) as </span><span class="default">$property</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'='</span><span class="keyword">, </span><span class="default">$property</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$file</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$filename</span><span class="keyword">] = </span><span class="default">$file</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$files</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Please note that this function ignores the setting of ftp_pasv(). Making the function to work universally for both active and passive connections is left as an exercise to the reader ;-)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114633">  
  <a class="name">
  <strong class="user"><em>mediaboat at gmail dot com</em></strong></a><div class="date" title="2014-03-14 10:55"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114633">
<div class="phpcode"><code><span class="html">
All&nbsp; parse_rawlist Functions here have one Problem.<br><br>when a file starts with a space character like " robots.txt ", it will be ignored.<br><br>Rename, delete will fail...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86869">  
  <a class="name">
  <strong class="user"><em>www.bosssftp.com</em></strong></a><div class="date" title="2008-11-07 02:43"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86869">
<div class="phpcode"><code><span class="html">
Some FTP servers only allow you to get list of files under current working directory. So if you always get result as empty array (array(0){ }), try changing the cwd befor get the list:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">ftprawlist</span><span class="keyword">(</span><span class="default">$connid</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$connid</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">);
<br>&nbsp; return </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$connid</span><span class="keyword">, </span><span class="string">"-a"</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86780">  
  <a class="name">
  <strong class="user"><em>phpnet uschlaepfer ch</em></strong></a><div class="date" title="2008-11-03 08:56"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86780">
<div class="phpcode"><code><span class="html">
On my PC (XP and Apache installed) - ftp_rawlist (with Parameter true) does only print a folder list - no subfolders, no files.
<br>So i created this recursive function that writes all filenames (incl. paths) to a array. I tested it on Mac, Linux and Windows - it works (as long as you don't use folders with spaces...).
<br>If you need more information: feel free to set more split[x]-Options and write them to the $files-array.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment"># the directory where ftp_rawlist starts
<br></span><span class="default">$startdir </span><span class="keyword">= </span><span class="string">"example"</span><span class="keyword">;
<br>
<br></span><span class="comment"># optional Datatypefilter (leave blank if not needed)
<br></span><span class="default">$suffix&nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"gif,png,jpeg,pdf,php"</span><span class="keyword">;
<br></span><span class="comment"># ftp-login
<br></span><span class="default">$ftp_server </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br></span><span class="default">$ftp_user&nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br></span><span class="default">$ftp_pw&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br></span><span class="default">$ftp_mode&nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br></span><span class="default">$conn_id&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">$ftp_server</span><span class="keyword">);
<br></span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$ftp_user</span><span class="keyword">, </span><span class="default">$ftp_pw</span><span class="keyword">) OR die(</span><span class="string">"&lt;br&gt;ftp-login failed"</span><span class="keyword">);
<br></span><span class="default">ftp_pasv</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>
<br></span><span class="comment">#*********************************************************************
<br># create filelist (recursiv)
<br>#*********************************************************************
<br></span><span class="default">$files&nbsp; &nbsp; </span><span class="keyword">= array(); </span><span class="comment"># must be defined here
<br></span><span class="default">$files&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">raw_list</span><span class="keyword">(</span><span class="string">"</span><span class="default">$startdir</span><span class="string">"</span><span class="keyword">); 
<br>
<br></span><span class="comment">#*********************************************************************
<br># print result
<br>#*********************************************************************
<br></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);
<br>while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">):
<br>&nbsp; echo </span><span class="string">"</span><span class="default">$files</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]</span><span class="string">&lt;br&gt;"</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>endwhile;
<br></span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);
<br>
<br></span><span class="comment">#*********************************************************************
<br># rawlist in recursive form (without parameter true!!!)
<br>#*********************************************************************
<br></span><span class="keyword">function </span><span class="default">raw_list</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">)
<br>{
<br>Global </span><span class="default">$conn_id</span><span class="keyword">;
<br>Global </span><span class="default">$suffix</span><span class="keyword">;
<br>Global </span><span class="default">$files</span><span class="keyword">;
<br></span><span class="default">$suffixes </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">$suffix</span><span class="keyword">); 
<br></span><span class="default">$list&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">$folder</span><span class="keyword">);
<br></span><span class="default">$anzlist&nbsp; </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">); 
<br></span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>while (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$anzlist</span><span class="keyword">):
<br>&nbsp; </span><span class="default">$split&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/[\s]+/"</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">9</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$ItemName </span><span class="keyword">= </span><span class="default">$split</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];
<br>&nbsp; </span><span class="default">$endung&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">strrchr</span><span class="keyword">(</span><span class="default">$ItemName</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">));
<br>&nbsp; </span><span class="default">$path&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"</span><span class="default">$folder</span><span class="string">/</span><span class="default">$ItemName</span><span class="string">"</span><span class="keyword">;
<br>&nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) === </span><span class="string">"d" </span><span class="keyword">AND </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$ItemName</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">) != </span><span class="string">"."</span><span class="keyword">):
<br></span><span class="comment">#&nbsp; &nbsp; &nbsp; array_push($files, $path); # write directory in array if desired
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">raw_list</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);
<br>&nbsp; elseif (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$ItemName</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">) != </span><span class="string">"._" </span><span class="keyword">AND </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$endung</span><span class="keyword">,</span><span class="default">$suffixes</span><span class="keyword">)):
<br>&nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);
<br>&nbsp; endif;
<br>&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>endwhile;
<br>return </span><span class="default">$files</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Ueli, Zurich</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55936">  
  <a class="name">
  <strong class="user"><em>tig3r at poczta dot onet dot pl</em></strong></a><div class="date" title="2005-08-18 03:31"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55936">
<div class="phpcode"><code><span class="html">
Previous example (by davidknoll at o2 dot co dot uk) works well if ftp_systype() returned "UNIX", but sometimes I am experiencing "Windows_NT". Here is some improvement:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parsed_listing</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br>{<br>&nbsp;&nbsp; </span><span class="default">$conn </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">FTP_HOST</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="default">FTP_USER</span><span class="keyword">, </span><span class="default">FTP_PASS</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$systype </span><span class="keyword">= </span><span class="default">ftp_systype</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$list </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="string">"-a "</span><span class="keyword">.</span><span class="default">FTP_BASE</span><span class="keyword">.</span><span class="default">$path</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br>&nbsp;&nbsp; foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$current</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; switch (</span><span class="default">$systype</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"Windows_NT"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([0-9]{2})-([0-9]{2})-([0-9]{2}) +([0-9]{2}):([0-9]{2})(AM|PM) +([0-9]+|&lt;DIR&gt;) +(.+)"</span><span class="keyword">,</span><span class="default">$current</span><span class="keyword">,</span><span class="default">$split</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$split</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$split</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]&lt;</span><span class="default">70</span><span class="keyword">) { </span><span class="default">$split</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]+=</span><span class="default">2000</span><span class="keyword">; } else { </span><span class="default">$split</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]+=</span><span class="default">1900</span><span class="keyword">; } </span><span class="comment">// 4digit year fix<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'isdir'</span><span class="keyword">] = (</span><span class="default">$split</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">]==</span><span class="string">"&lt;DIR&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'month'</span><span class="keyword">] = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'day'</span><span class="keyword">] = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'time/year'</span><span class="keyword">] = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br><br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; case </span><span class="string">"UNIX"</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; default:<br><br></span><span class="comment">// etc.<br><br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">break;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; return </span><span class="default">$parsed</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54750">  
  <a class="name">
  <strong class="user"><em>davidknoll at o2 dot co dot uk</em></strong></a><div class="date" title="2005-07-14 04:00"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54750">
<div class="phpcode"><code><span class="html">
Well, this works for me:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">parsed_listing</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$conn </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">FTP_HOST</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="default">FTP_USER</span><span class="keyword">, </span><span class="default">FTP_PASS</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$list </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="string">"-a "</span><span class="keyword">.</span><span class="default">FTP_BASE</span><span class="keyword">.</span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$current</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$split </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"[ ]"</span><span class="keyword">, </span><span class="default">$current</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">, </span><span class="default">PREG_SPLIT_NO_EMPTY</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$split</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] != </span><span class="string">"total"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'isdir'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">} === </span><span class="string">"d"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'perms'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'number'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'owner'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'group'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'month'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'day'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'time/year'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsed</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$split</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$parsed</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114935">  
  <a class="name">
  <strong class="user"><em>admin at proxy-list dot org</em></strong></a><div class="date" title="2014-04-29 05:34"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114935">
<div class="phpcode"><code><span class="html">
Please pay attention that ftp_rawlist() function returns empty result if there is a folder with space. You must backslash it with addcslashes() function.<br><br>IMPORTANT: at the same time any other function like ftp_delete() or ftp_rmdir() in opposite, will not be able to delete file/folder if folder name with space will be backslashes <a rel="nofollow" target="_blank">http://proxy-list.org/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="97876">  
  <a class="name">
  <strong class="user"><em>shaun at shaunfreeman dot co dot uk</em></strong></a><div class="date" title="2010-05-13 04:02"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97876">
<div class="phpcode"><code><span class="html">
Get a listing of all files including hidden files except '.' or '..' use:
<br>
<br><span class="default">&lt;?php
<br>ftp_chdir</span><span class="keyword">(</span><span class="default">$connid</span><span class="keyword">, </span><span class="default">$dir</span><span class="keyword">);
<br></span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$connid</span><span class="keyword">, </span><span class="string">"-A"</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>This had me dancing in circles for some time!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97683">  
  <a class="name">
  <strong class="user"><em>John</em></strong></a><div class="date" title="2010-05-02 04:46"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97683">
<div class="phpcode"><code><span class="html">
There are a couple of php-related reasons given here for ftp_rawlist returning an empty result. However be aware that ZoneAlarm (and possibly other) firewalls can block responses without giving any visible clue so be sure to check that first.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94412">  
  <a class="name">
  <strong class="user"><em>nospam at advancedonsite dot com</em></strong></a><div class="date" title="2009-11-03 08:02"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94412">
<div class="phpcode"><code><span class="html">
ftp_rawlist kept returning empty file listing, it would work on some machines but not others, it turned out to be ftp_pasv command was needed.<br>Very frustrating</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91722">  
  <a class="name">
  <strong class="user"><em>ahmadmarafa at gmail dot com</em></strong></a><div class="date" title="2009-06-23 07:38"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91722">
<div class="phpcode"><code><span class="html">
this is function to check for dirs 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">ftp_isdir</span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if(</span><span class="default">ftp_chdir</span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ftp_cdup</span><span class="keyword">(</span><span class="default">$connect_id</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91120">  
  <a class="name">
  <strong class="user"><em>tmp at gmx dot de</em></strong></a><div class="date" title="2009-05-26 04:20"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91120">
<div class="phpcode"><code><span class="html">
To format the _recrusive_ result of this function I use this:<br><br><span class="default">&lt;?php<br>$conn_id </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="default">FTP_SERVER</span><span class="keyword">);<br><br></span><span class="default">$login_result </span><span class="keyword">= </span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="default">FTP_USR</span><span class="keyword">, </span><span class="default">FTP_PASS</span><span class="keyword">);<br><br></span><span class="default">$rawfiles </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br></span><span class="default">ftp_close</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">);<br><br></span><span class="comment">// here the magic begins!<br></span><span class="default">$structure </span><span class="keyword">= array();<br></span><span class="default">$arraypointer </span><span class="keyword">= &amp;</span><span class="default">$structure</span><span class="keyword">;<br>foreach (</span><span class="default">$rawfiles </span><span class="keyword">as </span><span class="default">$rawfile</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">$rawfile</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">'/'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$paths </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$rawfile</span><span class="keyword">)), </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arraypointer </span><span class="keyword">= &amp;</span><span class="default">$structure</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$paths </span><span class="keyword">as </span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$arraypointer </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$file</span><span class="keyword">[</span><span class="string">'text'</span><span class="keyword">] == </span><span class="default">$path</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arraypointer </span><span class="keyword">= &amp;</span><span class="default">$arraypointer</span><span class="keyword">[ </span><span class="default">$i </span><span class="keyword">][</span><span class="string">'children'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; } elseif(!empty(</span><span class="default">$rawfile</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$info </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/[\s]+/"</span><span class="keyword">, </span><span class="default">$rawfile</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arraypointer</span><span class="keyword">[] = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'text'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$info</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'isDir'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">$info</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">'d'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'size'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">byteconvert</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'chmod'&nbsp; </span><span class="keyword">=&gt; </span><span class="default">chmodnum</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'date'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$info</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">] . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$info</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">] . </span><span class="string">' ' </span><span class="keyword">. </span><span class="default">$info</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">]),<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'raw'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$info<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// the 'children' attribut is automatically added if the folder contains at least one file<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br><br></span><span class="comment">// in $structure is all the data<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$structure</span><span class="keyword">);<br><br></span><span class="comment">// little helper functions<br></span><span class="keyword">function </span><span class="default">byteconvert</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$symbol </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'KB'</span><span class="keyword">, </span><span class="string">'MB'</span><span class="keyword">, </span><span class="string">'GB'</span><span class="keyword">, </span><span class="string">'TB'</span><span class="keyword">, </span><span class="string">'PB'</span><span class="keyword">, </span><span class="string">'EB'</span><span class="keyword">, </span><span class="string">'ZB'</span><span class="keyword">, </span><span class="string">'YB'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">( </span><span class="default">log</span><span class="keyword">(</span><span class="default">$bytes</span><span class="keyword">) / </span><span class="default">log</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">) );<br>&nbsp; &nbsp; return </span><span class="default">sprintf</span><span class="keyword">( </span><span class="string">'%.2f ' </span><span class="keyword">. </span><span class="default">$symbol</span><span class="keyword">[ </span><span class="default">$exp </span><span class="keyword">], (</span><span class="default">$bytes </span><span class="keyword">/ </span><span class="default">pow</span><span class="keyword">(</span><span class="default">1024</span><span class="keyword">, </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">))) );<br>}<br><br>function </span><span class="default">chmodnum</span><span class="keyword">(</span><span class="default">$chmod</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$trans </span><span class="keyword">= array(</span><span class="string">'-' </span><span class="keyword">=&gt; </span><span class="string">'0'</span><span class="keyword">, </span><span class="string">'r' </span><span class="keyword">=&gt; </span><span class="string">'4'</span><span class="keyword">, </span><span class="string">'w' </span><span class="keyword">=&gt; </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'1'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$chmod </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$chmod</span><span class="keyword">, </span><span class="default">$trans</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$chmod</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">])) . </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) . </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]));<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89540">  
  <a class="name">
  <strong class="user"><em>francois frao_o</em></strong></a><div class="date" title="2009-03-12 10:47"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89540">
<div class="phpcode"><code><span class="html">
Why not using POSIX regex to do the job here ? A preg_replace returns the information in an associative array with the following keys:<br><br>&lt;rights&gt;<br>&lt;number&gt;<br>&lt;owner&gt;<br>&lt;group&gt;<br>&lt;file_size&gt;<br>&lt;mod_time&gt;<br>&lt;file&gt;<br>&lt;type&gt; * that's a bonus: it will tell you if the item is either a file or a directory<br><br>Code is shown below:<br><br>$list=@ftp_rawlist($con,$directory) ;<br><br>$items=array() ;<br><br>foreach($list as $_)<br>preg_replace(<br><br>'`^(.{10}+)(\s*)(\d{1})(\s*)(\d*|\w*)'.<br>'(\s*)(\d*|\w*)(\s*)(\d*)\s'.<br>'([a-zA-Z]{3}+)(\s*)([0-9]{1,2}+)'.<br>'(\s*)([0-9]{2}+):([0-9]{2}+)(\s*)(.*)$`Ue',<br><br>'$items[]=array(<br>"rights"=&gt;"$1", <br>"number"=&gt;"$3", <br>"owner"=&gt;"$5", "group"=&gt;"$7",<br>"file_size"=&gt;"$9",<br>"mod_time"=&gt;"$10 $12 $14:$15",<br>"file"=&gt;"$17",<br>"type"=&gt;print_r((preg_match("/^d/","$1"))?"dir":"file",1));',<br><br>$_) ; # :p</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82752">  
  <a class="name">
  <strong class="user"><em>paul maybe at squirrel mail org</em></strong></a><div class="date" title="2008-04-24 05:13"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82752">
<div class="phpcode"><code><span class="html">
Regarding converting permissions from symbolic notation to octal, note that Hazem dot Khaled at gmail dot com's chmodnum function produces INCORRECT results.&nbsp; The resutls are base-10 numbers that only LOOK like they are octal numbers.&nbsp; The function also ignores setuid, setgid and sticky bits, and will produce incorrect numbers if such a file is encountered.&nbsp; Instead, this brute-force code works.&nbsp; Maybe there is something more slick, but this isn't too CPU-intensive (note that it assumes you've error-checked that you indeed have a 10-character string!):<br><br>&nbsp; &nbsp; &nbsp; $permissions = 'drwxr-xr-x';&nbsp; // or whatever<br>&nbsp; &nbsp; &nbsp; $mode = 0;<br><br>&nbsp; &nbsp; &nbsp; if ($permissions[1] == 'r') $mode += 0400;<br>&nbsp; &nbsp; &nbsp; if ($permissions[2] == 'w') $mode += 0200;<br>&nbsp; &nbsp; &nbsp; if ($permissions[3] == 'x') $mode += 0100;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[3] == 's') $mode += 04100;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[3] == 'S') $mode += 04000;<br><br>&nbsp; &nbsp; &nbsp; if ($permissions[4] == 'r') $mode += 040;<br>&nbsp; &nbsp; &nbsp; if ($permissions[5] == 'w') $mode += 020;<br>&nbsp; &nbsp; &nbsp; if ($permissions[6] == 'x') $mode += 010;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[6] == 's') $mode += 02010;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[6] == 'S') $mode += 02000;<br><br>&nbsp; &nbsp; &nbsp; if ($permissions[7] == 'r') $mode += 04;<br>&nbsp; &nbsp; &nbsp; if ($permissions[8] == 'w') $mode += 02;<br>&nbsp; &nbsp; &nbsp; if ($permissions[9] == 'x') $mode += 01;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[9] == 't') $mode += 01001;<br>&nbsp; &nbsp; &nbsp; else if ($permissions[9] == 'T') $mode += 01000;<br><br>&nbsp; &nbsp; &nbsp; printf('Mode is %d decimal and %o octal', $mode, $mode);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80218">  
  <a class="name">
  <strong class="user"><em>weltvolk</em></strong></a><div class="date" title="2008-01-04 06:17"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80218">
<div class="phpcode"><code><span class="html">
With this handy function based on functions presented here you get the file list in alphabetical order with all directories on top:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">rawlist_dump</span><span class="keyword">() {<br>&nbsp; global </span><span class="default">$ftp_connect</span><span class="keyword">;<br>&nbsp; </span><span class="default">$ftp_rawlist </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$ftp_connect</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br>&nbsp; foreach (</span><span class="default">$ftp_rawlist </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$info </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$vinfo </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/[\s]+/"</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] !== </span><span class="string">"total"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'chmod'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'num'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'owner'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'month'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$info</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$vinfo</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$rawlist</span><span class="keyword">[</span><span class="default">$info</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]] = </span><span class="default">$info</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; </span><span class="default">$dir </span><span class="keyword">= array();<br>&nbsp; </span><span class="default">$file </span><span class="keyword">= array();<br>&nbsp; foreach (</span><span class="default">$rawlist </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">$v</span><span class="keyword">[</span><span class="string">'chmod'</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">"d"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$dir</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; } elseif (</span><span class="default">$v</span><span class="keyword">[</span><span class="string">'chmod'</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">} == </span><span class="string">"-"</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$file</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; foreach (</span><span class="default">$dir </span><span class="keyword">as </span><span class="default">$dirname </span><span class="keyword">=&gt; </span><span class="default">$dirinfo</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">"[ </span><span class="default">$dirname</span><span class="string"> ] " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'chmod'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'owner'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'month'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] . </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; foreach (</span><span class="default">$file </span><span class="keyword">as </span><span class="default">$filename </span><span class="keyword">=&gt; </span><span class="default">$fileinfo</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; echo </span><span class="string">"</span><span class="default">$filename</span><span class="string"> " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'chmod'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'owner'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] . </span><span class="string">" | " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] . </span><span class="string">" Byte | " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'month'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">] . </span><span class="string">" " </span><span class="keyword">. </span><span class="default">$fileinfo</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] . </span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>&nbsp; }<br>}<br></span><span class="default">rawlist_dump</span><span class="keyword">();<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71315">  
  <a class="name">
  <strong class="user"><em>Hazem dot Khaled at gmail dot com</em></strong></a><div class="date" title="2006-11-22 01:25"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71315">
<div class="phpcode"><code><span class="html">
that comment have 4 function<br>the 1st function "&lt;b&gt;get_files&lt;/b&gt;" get the list of files by the full bath "/www/ex/"<br>and return 3 arrays<br>dir = the directories in this directory with the time ,date ,more ...<br>linke = the links in this directory with the time ,date ,more ...<br>file = the files in this directory with the time ,date ,more ...<br><br>the 2nd function "chmodnum" convert from "drwxrwxrwx" to "777"<br>* i found it in php.net manual<br><br>the 3rd function "get_size" convert from the byte to MB or GB or TB<br><br>the 4th function "get_type" return if this file or directory or link<br><br>the functions<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">get_files</span><span class="keyword">(</span><span class="default">$path </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$path </span><span class="keyword">== </span><span class="string">'' </span><span class="keyword">&amp;&amp; !</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">])<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="string">'/'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$path </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$all_folders = ftp_nlist($this-&gt;conection, $_GET['path']);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">conection</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$folder</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"/[\s]+/"</span><span class="keyword">,</span><span class="default">$folder</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'perms'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'permsn'</span><span class="keyword">]= </span><span class="default">chmodnum</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">]= </span><span class="default">$current</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'owner'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">get_size</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'month'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'day'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">$current</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$current</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$struc['raw']&nbsp; &nbsp; = $folder;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">get_type</span><span class="keyword">(</span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'perms'</span><span class="keyword">]) == </span><span class="string">"folder"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$folders</span><span class="keyword">[] = </span><span class="default">$struc</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'..' </span><span class="keyword">&amp;&amp; </span><span class="default">get_type</span><span class="keyword">(</span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'perms'</span><span class="keyword">]) == </span><span class="string">"link"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$links</span><span class="keyword">[] = </span><span class="default">$struc</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$struc</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] != </span><span class="string">'..'</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[] = </span><span class="default">$struc</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return array(</span><span class="default">$folders</span><span class="keyword">,</span><span class="default">$links</span><span class="keyword">,</span><span class="default">$files</span><span class="keyword">);<br>&nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">chmodnum</span><span class="keyword">(</span><span class="default">$mode</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$realmode </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$legal </span><span class="keyword">=&nbsp; array(</span><span class="string">""</span><span class="keyword">,</span><span class="string">"w"</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">,</span><span class="string">"x"</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$attarray </span><span class="keyword">= </span><span class="default">preg_split</span><span class="keyword">(</span><span class="string">"//"</span><span class="keyword">,</span><span class="default">$mode</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$attarray</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$attarray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$legal</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$realmode </span><span class="keyword">.= </span><span class="default">$legal</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$realmode</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="string">'-'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$trans </span><span class="keyword">= array(</span><span class="string">'-'</span><span class="keyword">=&gt;</span><span class="string">'0'</span><span class="keyword">,</span><span class="string">'r'</span><span class="keyword">=&gt;</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'w'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'x'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mode </span><span class="keyword">= </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$mode</span><span class="keyword">,</span><span class="default">$trans</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newmode </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newmode </span><span class="keyword">.= </span><span class="default">$mode</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newmode </span><span class="keyword">.= </span><span class="default">$mode</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newmode </span><span class="keyword">.= </span><span class="default">$mode</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">]+</span><span class="default">$mode</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$newmode</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; function </span><span class="default">get_size</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$size </span><span class="keyword">&lt; </span><span class="default">1024</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">$size</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">).</span><span class="string">' Byte'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$size </span><span class="keyword">&lt; (</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">round</span><span class="keyword">((</span><span class="default">$size</span><span class="keyword">/</span><span class="default">1024</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">).</span><span class="string">' MB'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$size </span><span class="keyword">&lt; (</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">round</span><span class="keyword">(((</span><span class="default">$size</span><span class="keyword">/</span><span class="default">1024</span><span class="keyword">)/</span><span class="default">1024</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">).</span><span class="string">' GB'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$size </span><span class="keyword">&lt; (</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">*</span><span class="default">1024</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">round</span><span class="keyword">((((</span><span class="default">$size</span><span class="keyword">/</span><span class="default">1024</span><span class="keyword">)/</span><span class="default">1024</span><span class="keyword">)/</span><span class="default">1024</span><span class="keyword">),</span><span class="default">2</span><span class="keyword">).</span><span class="string">' TB'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp; function </span><span class="default">get_type</span><span class="keyword">(</span><span class="default">$perms</span><span class="keyword">)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$perms</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"d"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">'folder'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$perms</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"l"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">'link'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">'file'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp;&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70447">  
  <a class="name">
  <strong class="user"><em>ari at bs-inc dot com</em></strong></a><div class="date" title="2006-10-17 01:24"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70447">
<div class="phpcode"><code><span class="html">
This is a little cleaner:<br><br>function parse_rawlist( $array )<br>{<br>&nbsp; &nbsp; foreach($array as $curraw)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; $current = preg_split("/[\s]+/",$curraw,9);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['perms']&nbsp; = $current[0];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['number'] = $current[1];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['owner']&nbsp; = $current[2];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['group']&nbsp; = $current[3];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['size']&nbsp; = $current[4];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['month']&nbsp; = $current[5];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['day']&nbsp; &nbsp; = $current[6];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['time']&nbsp; = $current[7];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['year']&nbsp; = $current[8];<br>&nbsp; &nbsp; &nbsp; &nbsp; $struc['raw']&nbsp; = $curraw;<br>&nbsp; &nbsp; &nbsp; &nbsp; $structure[$struc['name']] = $struc;<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; return $structure;<br><br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69688">  
  <a class="name">
  <strong class="user"><em>kerbpm</em></strong></a><div class="date" title="2006-09-15 02:31"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69688">
<div class="phpcode"><code><span class="html">
Your code is ok, just replace $i = 0 instead of 1<br>Thank you<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">parse_rawlist</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) {<br><br>&nbsp;&nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++ ) {<br><br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'perms'</span><span class="keyword">]&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'owner'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'group'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">24</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">33</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'month'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">42</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'day'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">46</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'time'</span><span class="keyword">]&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">49</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">55</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">) - </span><span class="default">55</span><span class="keyword">);<br><br>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; return </span><span class="default">$structure</span><span class="keyword">;<br><br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69551">  
  <a class="name">
  <strong class="user"><em>MSpreij at GMail</em></strong></a><div class="date" title="2006-09-09 05:11"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69551">
<div class="phpcode"><code><span class="html">
The following was inspired by a few others here, ofcourse ;-)<br>Works for filenames with spaces (leading, trailing, consecutive and what not), formats the date a little taking year/time into account, leaves out items not in the $filetypes array below, and returns a nice nested assoc array:<br><br><span class="default">&lt;?php<br><br>$filetypes </span><span class="keyword">= array(</span><span class="string">'-'</span><span class="keyword">=&gt;</span><span class="string">'file'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">=&gt;</span><span class="string">'directory'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">=&gt;</span><span class="string">'link'</span><span class="keyword">);<br><br></span><span class="default">$c </span><span class="keyword">= </span><span class="default">ftp_connect</span><span class="keyword">(</span><span class="string">'localhost'</span><span class="keyword">);<br></span><span class="default">ftp_login</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="string">'jackcrow'</span><span class="keyword">, </span><span class="string">'banshee'</span><span class="keyword">);<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$c</span><span class="keyword">, </span><span class="string">'/users/jackcrow'</span><span class="keyword">);<br><br>foreach(</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">) {<br>&nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">) == </span><span class="string">'total'</span><span class="keyword">) continue; </span><span class="comment"># first line, skip it<br>&nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">. </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'([^\s]+)\s+'</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">) .</span><span class="string">'([^\s]+) (.*)/'</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">); </span><span class="comment"># Here be Dragons<br>&nbsp; &nbsp; </span><span class="keyword">list(</span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">$children</span><span class="keyword">, </span><span class="default">$owner</span><span class="keyword">, </span><span class="default">$group</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">, </span><span class="default">$name</span><span class="keyword">) = </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment"># if it's not a file, directory or link, I don't really care to know about it :-) comment out the next line if you do<br>&nbsp; &nbsp; </span><span class="keyword">if (! </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$filetypes</span><span class="keyword">))) continue;<br>&nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">$filetypes</span><span class="keyword">[</span><span class="default">$permissions</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]];<br>&nbsp; &nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'d/m/y H:i'</span><span class="keyword">, (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">, </span><span class="string">':'</span><span class="keyword">) ? </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">), </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$time</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">) : </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$month</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">) ) );<br>&nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = array(</span><span class="string">'type'</span><span class="keyword">=&gt;</span><span class="default">$type</span><span class="keyword">, </span><span class="string">'permissions'</span><span class="keyword">=&gt;</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">), </span><span class="string">'children'</span><span class="keyword">=&gt;</span><span class="default">$children</span><span class="keyword">, </span><span class="string">'owner'</span><span class="keyword">=&gt;</span><span class="default">$owner</span><span class="keyword">, </span><span class="string">'group'</span><span class="keyword">=&gt;</span><span class="default">$group</span><span class="keyword">, </span><span class="string">'size'</span><span class="keyword">=&gt;</span><span class="default">$size</span><span class="keyword">, </span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">$date</span><span class="keyword">);<br>}<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>(I'm using a pretty simple regex pattern (non-space-stuff, whitespace, non-space-stuff etc), but amazingly /it still works!/ K.I.S.S.! The time part in the pattern is done separately to make sure only 1 space is taken out before the filename, which might start with spaces for all you know)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59346">  
  <a class="name">
  <strong class="user"><em>admin at mikeholloway dot co dot uk</em></strong></a><div class="date" title="2005-12-03 02:38"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59346">
<div class="phpcode"><code><span class="html">
I was having problems picking up the directories on a mac using cjacobsen at pge dot cl's (11-Jan-05) solution. Slight ammendment to the regexp works for me:<br><br>ereg("([-dl][rwxstST-]+).* ?([0-9 ]* )?([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9])[ ]+(([0-9]{2}:[0-9]{2})|[0-9]{4}) (.+)", $file, $regs)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57217">  
  <a class="name">
  <strong class="user"><em>d dot lloyd at tnw dot tudelft dot nl</em></strong></a><div class="date" title="2005-09-27 06:22"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57217">
<div class="phpcode"><code><span class="html">
One comment regaring the method tig3r uses to determine the listing type.<br><br>Windows servers can return a listing in unix format if the ftp server has been told to use unix formatting. The only robust solution I have is to try both ereg commands once and see which one successfully returns an array.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52635">  
  <a class="name">
  <strong class="user"><em>nate at 8networks dot com</em></strong></a><div class="date" title="2005-05-07 12:41"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52635">
<div class="phpcode"><code><span class="html">
this snip fixes the date problem with the listing and sorts out the variables:<br><br>$filedata['access_permissions']<br>$filedata['link_count']<br>$filedata['uid']<br>$filedata['gid']<br>$filedata['size']<br>$filedata['mod_date_month']<br>$filedata['mod_date_day']<br>$filedata['mod_time']<br>$filedata['name']<br><br>list($filedata['access_permissions'], $filedata['link_count'], $filedata['uid'], $filedata['gid'], $filedata['size'], $filedata['mod_date_month'], $filedata['mod_date_day'], $filedata['mod_time'], $filedata['name']) = preg_split("/[\s,]+/", $value);<br><br>$filedata['type'] = $filedata['access_permissions']{0};<br><br>$filedata['access_permissions'] = substr($filedata['access_permissions'],1);<br><br>// now check the date to see if the last modifcation was this year or last.<br><br>if ( strrpos($filedata['mod_time'], ':') != 2 ) { $filedata['mod_date'] = $filedata['mod_date_month'] ." " . $filedata['mod_date_day'] . " " . $filedata['mod_time']; $filedata['mod_time'] = "00:00"; } else { $filedata['mod_date'] = $filedata['mod_date_month'] ." " . $filedata['mod_date_day'] . " " . date("Y"); }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52406">  
  <a class="name">
  <strong class="user"><em>john at nm-design dot com</em></strong></a><div class="date" title="2005-04-29 10:14"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52406">
<div class="phpcode"><code><span class="html">
I'm not a traditional programmer, so I often take a different approach then most programmers. Here's how I get file information from an FTP file list. It's very simple (which I like). Comments are welcome:<br><br>&nbsp; &nbsp; // make your FTP connection calls here, then ...&nbsp; &nbsp; <br>&nbsp; &nbsp; $contents = ftp_rawlist($ftp_id, ".");<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; echo '&lt;TABLE&gt;';<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; foreach ($contents as $key =&gt; $value) {<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $info = explode(" ", $value);<br>&nbsp; &nbsp; &nbsp; &nbsp; $clean = array();<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach ($info as $key =&gt; $value) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty($value)) { $clean[] = $value; }<br>&nbsp; &nbsp; &nbsp; &nbsp; } // end foreach loop 2<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if ( ($clean[8] != ".") AND ($clean[8] != "..") AND ($clean[8] != "html") AND ($clean[8] != "logs") AND ($clean[8] != "protected") AND ($clean[8] != "sys") ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;TR&gt;';<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "&lt;TD WIDTH=\"40%\"&gt;$clean[8]&lt;/TD&gt;"; // name of file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "&lt;TD WIDTH=\"20%\" ALIGN=\"CENTER\"&gt;$clean[5] $clean[6] $clean[7]&lt;/TD&gt;"; // date info<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // prep size<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $size = $clean[4]; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $size = $size / 1000; $size = ceil($size); if ($size &lt;= 0) { $size = 1; } <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($size &gt;= 1000) { $measure = "MB"; $size = $size /&nbsp; 1000; } else { $measure = "K"; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "&lt;TD WIDTH=\"20%\" ALIGN=\"CENTER\"&gt;$size $measure&lt;/TD&gt;"; // size<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;TD WIDTH="20%" ALIGN="CENTER" BGCOLOR="#FFFFE6" CLASS="bodyBold"&gt;'; print "&lt;A HREF=\"$PHP_SELF?Submit=DELETE&amp;file=$clean[8]\"&gt;"; echo 'DELETE&lt;/A&gt;&lt;/TD&gt;'; // link to delete file<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo '&lt;/TR&gt;';<br>&nbsp; &nbsp; &nbsp; &nbsp; } // end if<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; } // end foreach loop 1<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; echo '&lt;/TABLE&gt;';</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49628">  
  <a class="name">
  <strong class="user"><em>marc dot peterlongo at francetelecom dot com</em></strong></a><div class="date" title="2005-02-03 02:57"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49628">
<div class="phpcode"><code><span class="html">
When you try:<br><br>$path = "directory pathname with spaces";<br>$list = ftp_rawlist($conn_id,$path);<br><br>It doesn't work<br><br>but when you try:<br><br>$path = "directory pathname with spaces";<br>ftp_chdir($conn_id,$path);<br>$list = ftp_rawlist($conn_id,".");<br><br>It works</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48899">  
  <a class="name">
  <strong class="user"><em>cjacobsen at pge dot cl</em></strong></a><div class="date" title="2005-01-11 05:44"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48899">
<div class="phpcode"><code><span class="html">
Excelent expresion, but don't match SUID, SGUI and Sticky flags when 'x' is disabled. Fix it with [rwxstST-].<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">) {<br>&nbsp;&nbsp; foreach (</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-dl][rwxstST-]+).* ([0-9]*) ([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9])[ ]+(([0-9]{2}:[0-9]{2})|[0-9]{4}) (.+)"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= (int) </span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"-dl"</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'line'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$type</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'rights'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'date'</span><span class="keyword">] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">]));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_list</span><span class="keyword">[] = </span><span class="default">$tmp_array</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; return </span><span class="default">$dir_list</span><span class="keyword">;<br>}<br></span><span class="default">$buff </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">);<br></span><span class="default">$items </span><span class="keyword">= </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$buff</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48339">  
  <a class="name">
  <strong class="user"><em>greg at upsdn dot net</em></strong></a><div class="date" title="2004-12-19 11:58"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48339">
<div class="phpcode"><code><span class="html">
list all (including hidden files and dirs):<br><span class="default">&lt;?php<br>&nbsp; $contents </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$conn_id</span><span class="keyword">, </span><span class="string">"-al "</span><span class="keyword">.</span><span class="default">$dir_name</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>just as ftp command:<br>LIST al <br><br>"-aF " is equal to '-al', please refer to "ls --help"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47713">  
  <a class="name">
  <strong class="user"><em>greg at upsdn dot net</em></strong></a><div class="date" title="2004-11-25 10:55"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom47713">
<div class="phpcode"><code><span class="html">
The previous regular expression(by Jonathan Almarez,ergye at yahoo dot com and guru at virusas dot lt) is very good.But i found it does not&nbsp; take into account for directories(number&gt;9)<br><br>Change [0-9] to [0-9]*<br><br>The code below not only parses:<br>drwxrwxr-x&nbsp; &nbsp;&nbsp; 9 msik&nbsp; &nbsp;&nbsp; ia&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4096 Nov&nbsp; 5 14:19 Group3<br><br>It also parses:<br>drwxrwxr-x&nbsp;&nbsp; 19 msik&nbsp; &nbsp;&nbsp; ia&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4096 Nov&nbsp; 5 14:19 Group3<br>3 <br>drwxrwxr-x&nbsp;&nbsp; 119 msik&nbsp; &nbsp;&nbsp; ia&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4096 Nov&nbsp; 5 14:19 Group3<br>3 <br><br>0 = file<br>1 = directory<br>2 = simlink<br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">) {<br>&nbsp;&nbsp; foreach (</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-dl][rwxst-]+).* ([0-9]*) ([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9])[ ]+(([0-9]{2}:[0-9]{2})|[0-9]{4}) (.+)"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= (int) </span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"-dl"</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'line'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$type</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'rights'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'date'</span><span class="keyword">] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">]));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_list</span><span class="keyword">[] = </span><span class="default">$tmp_array</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; return </span><span class="default">$dir_list</span><span class="keyword">;<br>}<br></span><span class="default">$buff </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">);<br></span><span class="default">$items </span><span class="keyword">= </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$buff</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="47677">  
  <a class="name">
  <strong class="user"><em>Jonathan Almarez</em></strong></a><div class="date" title="2004-11-24 03:16"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom47677">
<div class="phpcode"><code><span class="html">
To make the latest correction to the parsing code:<br><br>"ergye at yahoo dot com" dosen't take into account for files or directories that are older than a year where instead of showing the time, it shows the year.<br><br>The code below not only parses:<br>drwxrwxr-x&nbsp;&nbsp; 2 503&nbsp; &nbsp; &nbsp; 503&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4096 Dec&nbsp; 3 12:12 CVAR<br><br>It also parses:<br>drwxrwxr-x&nbsp;&nbsp; 2 503&nbsp; &nbsp; &nbsp; 503&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4096 Dec&nbsp; 3&nbsp; 2003 CVAR<br><br>0 = file<br>1 = directory<br>2 = simlink<br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">) {<br>&nbsp;&nbsp; foreach (</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-dl][rwxst-]+).* ([0-9]) ([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9])[ ]+(([0-9]{2}:[0-9]{2})|[0-9]{4}) (.+)"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$type </span><span class="keyword">= (int) </span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"-dl"</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'line'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$type</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'rights'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'date'</span><span class="keyword">] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">]));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">9</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir_list</span><span class="keyword">[] = </span><span class="default">$tmp_array</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; return </span><span class="default">$dir_list</span><span class="keyword">;<br>}<br></span><span class="default">$buff </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">);<br></span><span class="default">$items </span><span class="keyword">= </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$buff</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46784">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2004-10-22 07:53"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46784">
<div class="phpcode"><code><span class="html">
Note that there is no standard for the format, therefore don't be suprised when parsing routines for this work perfectly on some servers, and fail horribly on some.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46127">  
  <a class="name">
  <strong class="user"><em>ergye at yahoo dot com</em></strong></a><div class="date" title="2004-09-29 09:52"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46127">
<div class="phpcode"><code><span class="html">
The previous regular expression is super, but does not take simlinks into account. Change [-d] to [-dl] and instead of indicating directories we should indicate the type of the items:<br><br>0 = file<br>1 = directory<br>2 = simlink<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">) {<br>&nbsp; &nbsp; foreach (</span><span class="default">$contents </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-dl][rwxst-]+).* ([0-9]) ([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9]) ([0-9]{2}:[0-9]{2}) (.+)"</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= (int) </span><span class="default">strpos</span><span class="keyword">(</span><span class="string">"-dl"</span><span class="keyword">, </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]{</span><span class="default">0</span><span class="keyword">});<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'line'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'type'</span><span class="keyword">] = </span><span class="default">$type</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'rights'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'user'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'group'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">5</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'date'</span><span class="keyword">] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m-d"</span><span class="keyword">,</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">6</span><span class="keyword">]));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'time'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">7</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tmp_array</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">8</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dir_list</span><span class="keyword">[] = </span><span class="default">$tmp_array</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$dir_list</span><span class="keyword">;<br>}<br><br></span><span class="default">$buff </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$cid</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">);<br></span><span class="default">$items </span><span class="keyword">= </span><span class="default">itemize_dir</span><span class="keyword">(</span><span class="default">$buff</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45359">  
  <a class="name">
  <strong class="user"><em>guru at virusas dot lt</em></strong></a><div class="date" title="2004-09-03 03:31"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45359">
<div class="phpcode"><code><span class="html">
Lets say only one of these scripts can accept filenames with spaces, but that script doesn't return all info that we may need, so i have modified a little bit one of my script and added some more regexp from here:<br><br>&lt;?<br><br>$buff = ftp_rawlist($cid,"/");<br>foreach ($buff as $file)<br>{<br>&nbsp; &nbsp; &nbsp; if(ereg("([-d][rwxst-]+).* ([0-9]) ([a-zA-Z0-9]+).* ([a-zA-Z0-9]+).* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9]) ([0-9]{2}:[0-9]{2}) (.+)",$file,$regs))<br>&nbsp; &nbsp; {&nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if(substr($regs[1],0,1)=="d") $isdir=1; else $isdir=0;<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['line']=$regs[0];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['isdir']=$isdir;<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['rights']=$regs[1];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['number']=$regs[2];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['user']=$regs[3];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['group']=$regs[4];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['size']=$regs[5];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['date']=date("m-d",strtotime($regs[6]));<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['time']=$regs[7];<br>&nbsp; &nbsp; &nbsp; &nbsp; $tmp_array['name']=$regs[8];<br>&nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; $dir_list[]=$tmp_array;<br>}<br><br>?&gt;<br><br>The result is smth like that:<br><br>&nbsp; 8 =&gt; <br>&nbsp; &nbsp; array<br>&nbsp; &nbsp; &nbsp; 'line' =&gt; '-rw-r--r--&nbsp;&nbsp; 1 guru&nbsp; &nbsp;&nbsp; users&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4 Sep&nbsp; 3 09:41 testas testas testas.txt'<br>&nbsp; &nbsp; &nbsp; 'isdir' =&gt; 0<br>&nbsp; &nbsp; &nbsp; 'rights' =&gt; '-rw-r--r--'<br>&nbsp; &nbsp; &nbsp; 'number' =&gt; '1'<br>&nbsp; &nbsp; &nbsp; 'user' =&gt; 'guru'<br>&nbsp; &nbsp; &nbsp; 'group' =&gt; 'users'<br>&nbsp; &nbsp; &nbsp; 'size' =&gt; '4'<br>&nbsp; &nbsp; &nbsp; 'date' =&gt; '09-03'<br>&nbsp; &nbsp; &nbsp; 'time' =&gt; '09:41'<br>&nbsp; &nbsp; &nbsp; 'name' =&gt; 'testas testas testas.txt'<br>&nbsp; 9 =&gt; <br>&nbsp; &nbsp; array<br>&nbsp; &nbsp; &nbsp; 'line' =&gt; 'drwxr-xr-x&nbsp;&nbsp; 3 guru&nbsp; &nbsp;&nbsp; users&nbsp; &nbsp; &nbsp; &nbsp; 4096 Aug 20 08:54 upload'<br>&nbsp; &nbsp; &nbsp; 'isdir' =&gt; 1<br>&nbsp; &nbsp; &nbsp; 'rights' =&gt; 'drwxr-xr-x'<br>&nbsp; &nbsp; &nbsp; 'number' =&gt; '3'<br>&nbsp; &nbsp; &nbsp; 'user' =&gt; 'guru'<br>&nbsp; &nbsp; &nbsp; 'group' =&gt; 'users'<br>&nbsp; &nbsp; &nbsp; 'size' =&gt; '4096'<br>&nbsp; &nbsp; &nbsp; 'date' =&gt; '08-20'<br>&nbsp; &nbsp; &nbsp; 'time' =&gt; '08:54'<br>&nbsp; &nbsp; &nbsp; 'name' =&gt; 'upload'<br><br>Home this will help someone</span>
</code></div>
  </div>
 </div>
  <div class="note" id="45309">  
  <a class="name">
  <strong class="user"><em>eros at speedy dot com dot ar</em></strong></a><div class="date" title="2004-09-01 02:06"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom45309">
<div class="phpcode"><code><span class="html">
NO, NO, NO.<br><br>The above examples are all wrong, the spaces given in array are not there "just because", its just a tabbed structure. In php we don't have structures like in c/cpp, but the following function will do the job.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">parse_rawlist</span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) {<br><br>&nbsp; &nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++ ) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'perms'</span><span class="keyword">]&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'number'</span><span class="keyword">] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'owner'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'group'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">24</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">]&nbsp;&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">33</span><span class="keyword">, </span><span class="default">8</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'month'</span><span class="keyword">]&nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">42</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'day'</span><span class="keyword">]&nbsp; &nbsp; = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">46</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'time'</span><span class="keyword">]&nbsp;&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">49</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$structure</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">]&nbsp;&nbsp; = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">, </span><span class="default">55</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">) - </span><span class="default">55</span><span class="keyword">);<br><br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$structure</span><span class="keyword">;<br><br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="44079">  
  <a class="name">
  <strong class="user"><em>soon7 at wanadoo dot fr</em></strong></a><div class="date" title="2004-07-14 02:17"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44079">
<div class="phpcode"><code><span class="html">
Hi all !<br>ther is a litlle mistake in the naivesong 's message .<br>Indeed , you stop to parse too early ...<br>I tried and fix it like this :<br>&lt;?<br>// getting the list<br>&nbsp; $list = ftp_rawlist ($ftp_stream, $ftp_directory);<br>&nbsp;&nbsp; $folders = array();<br>&nbsp;&nbsp; $files = array();<br>&nbsp;&nbsp; $links = array();<br>&nbsp;&nbsp; for ($i=0; $i&lt;count($list); $i++)<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; //----convert tabs to blanks<br>&nbsp; &nbsp; &nbsp; &nbsp; //----delete multiple blanks<br>// Here begin my modifications<br>list ($permissions, $list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($number, $list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($owner, $list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($group, $list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($size, $list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($timeMonth,$list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($timeDay,$list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; list ($timeTime,$list[$i]) = parsenext ($list[$i]);<br>&nbsp; &nbsp;&nbsp; $filename=$list[$i];<br>// by taking $filename in last position , it works even if there is some space in its name<br>//then we put it in the m array with the new things<br>//----ok, put all this into the related array<br>if ($filename != "." &amp;&amp; $filename != "..")<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp;&nbsp; $m = array();<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["name"] = $filename;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["link"] = $filelink;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["size"] = afficherPoidsFichier($size);<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["month"] = $timeMonth;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["day"] = $timeDay;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["time"] = $timeTime;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["owner"] = $owner;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["group"] = $group;<br>&nbsp; &nbsp; &nbsp;&nbsp; $m["permissions"] = $permissions;<br>&nbsp; &nbsp; &nbsp;&nbsp; if (substr($permissions, 0, 1) == "d")<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $folders[count($folders)] = $m;<br>&nbsp; &nbsp; &nbsp;&nbsp; else if (substr($permissions, 0, 1) == "l")<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $links[count($files)] = $m;<br>&nbsp; &nbsp; &nbsp;&nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $files[count($files)] = $m;<br>&nbsp; &nbsp;&nbsp; }<br>&nbsp;&nbsp; }<br>// you can sort $folders , $files , $links after if u want<br>// afficherPoidsFichier($size) is a little function i found in this site at filesize() , works good !<br>// Just give the good size<br>function afficherPoidsFichier($size) {<br>&nbsp; $sizes = Array('o', 'Ko', 'Mo', 'Go');<br>&nbsp; $ext = $sizes[0];<br>&nbsp; for ($i=1; (($i &lt; count($sizes)) &amp;&amp; ($size &gt;= 1024)); $i++) {<br>&nbsp;&nbsp; $size = $size / 1024;<br>&nbsp;&nbsp; $ext&nbsp; = $sizes[$i];<br>&nbsp; }<br>&nbsp; return round($size, 2).' '.$ext;<br>}<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40984">  
  <a class="name">
  <strong class="user"><em>naivesong at matiasmoreno dot com dot ar</em></strong></a><div class="date" title="2004-03-25 08:53"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40984">
<div class="phpcode"><code><span class="html">
I'm afraid I forgot the "parsenext" function in my previous note. Here it is:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">strpos </span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40976">  
  <a class="name">
  <strong class="user"><em>naivesong at matiasmoreno dot com dot ar</em></strong></a><div class="date" title="2004-03-24 10:41"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40976">
<div class="phpcode"><code><span class="html">
This script will properly handle FTP servers where the returned date/time differs from the generic mm-dd-YYYY hh:mm:ss format:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; $list </span><span class="keyword">= </span><span class="default">ftp_rawlist </span><span class="keyword">(</span><span class="default">$ftp_stream</span><span class="keyword">, </span><span class="default">$ftp_directory</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="default">$folders </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$files </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$links </span><span class="keyword">= array();<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----convert tabs to blanks<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">str_replace </span><span class="keyword">(</span><span class="string">"\t"</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----delete multiple blanks<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">while ((</span><span class="default">$k </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">"&nbsp; "</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">).</span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$k</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----split link reference from filename where available<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">if ((</span><span class="default">$k </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">" -&gt; "</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$filelink </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$k</span><span class="keyword">+</span><span class="default">4</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$filelink </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----parse filename<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$k </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">" "</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">$k</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">0</span><span class="keyword">, </span><span class="default">$k</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----parse the rest of info<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">list (</span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) = </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; list (</span><span class="default">$number</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) = </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; list (</span><span class="default">$owner</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) = </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; list (</span><span class="default">$group</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]) = </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; list (</span><span class="default">$size</span><span class="keyword">, </span><span class="default">$time</span><span class="keyword">) = </span><span class="default">parsenext </span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//----ok, put all this into the related array<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$filename </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$filename </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= array();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"name"</span><span class="keyword">] = </span><span class="default">$filename</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"link"</span><span class="keyword">] = </span><span class="default">$filelink</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"size"</span><span class="keyword">] = </span><span class="default">$size</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"time"</span><span class="keyword">] = </span><span class="default">$time</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"owner"</span><span class="keyword">] = </span><span class="default">$owner</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"group"</span><span class="keyword">] = </span><span class="default">$group</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">[</span><span class="string">"permissions"</span><span class="keyword">] = </span><span class="default">$permissions</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"d"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$folders</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">)] = </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else if (</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$permissions</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"l"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$links</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">)] = </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; else<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$files</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">)] = </span><span class="default">$m</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">sort </span><span class="keyword">(</span><span class="default">$folders</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">sort </span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">sort </span><span class="keyword">(</span><span class="default">$links</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>This script works fine on any raw list that complies with the following format:<br><br>permissions number owner group size time name [" -&gt; " link_to]<br><br>where time may have whatever format the FTP server wants. ;-)<br><br>It also returns folders, files and links in separated sorted lists (got this idea from the note of "postmaster at alishomepage dot com" in this help page).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39478">  
  <a class="name">
  <strong class="user"><em>josh at snaphat dot com</em></strong></a><div class="date" title="2004-01-29 07:23"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39478">
<div class="phpcode"><code><span class="html">
I fixed jmv AT jmvware DOT com's script:
<br><span class="default">&lt;?php
<br>
<br>$dirline</span><span class="keyword">=</span><span class="default">ereg_replace</span><span class="keyword">(</span><span class="string">" +"</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">);
<br></span><span class="default">$isdir</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;
<br>if (</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'^d'</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">)) </span><span class="default">$isdir</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;
<br>list(</span><span class="default">$permissions</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">,</span><span class="default">$owner</span><span class="keyword">,</span><span class="default">$group
<br></span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$month</span><span class="keyword">,</span><span class="default">$day</span><span class="keyword">,</span><span class="default">$year_time</span><span class="keyword">,</span><span class="default">$name</span><span class="keyword">)=</span><span class="default">split</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">); 
<br>
<br></span><span class="comment">//added the next lines:
<br></span><span class="default">$fix</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">);
<br></span><span class="default">$fixsize</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$fix</span><span class="keyword">);
<br> if(</span><span class="default">$fixsize </span><span class="keyword">&gt; </span><span class="default">8</span><span class="keyword">)
<br> {
<br>&nbsp; for(</span><span class="default">$start</span><span class="keyword">=</span><span class="default">9</span><span class="keyword">;</span><span class="default">$start</span><span class="keyword">&lt;</span><span class="default">$fixsize</span><span class="keyword">;</span><span class="default">$start</span><span class="keyword">++)
<br>&nbsp; {
<br>&nbsp;&nbsp; </span><span class="default">$name</span><span class="keyword">.=</span><span class="string">" " </span><span class="keyword">. </span><span class="default">$fix</span><span class="keyword">[</span><span class="default">$start</span><span class="keyword">];
<br>&nbsp; }
<br> }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="38759">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2004-01-06 03:40"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom38759">
<div class="phpcode"><code><span class="html">
If you write<br><span class="default">&lt;?php<br>rawlist </span><span class="keyword">(</span><span class="default">$ftp</span><span class="keyword">, </span><span class="string">"-a"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>The command will be "LIST -a", so the retuned list will also contain hidden files like ".htaccess".<br><br>In this case all files and folders of the current directory are contained.<br>To list another folder, you must change to it with "ftp_chdir".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="37075">  
  <a class="name">
  <strong class="user"><em>moonglobe3739  [  A  t  ]  hotmail .com</em></strong></a><div class="date" title="2003-11-01 04:16"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom37075">
<div class="phpcode"><code><span class="html">
hope this helps someone:<br><span class="default">&lt;?php<br>$list </span><span class="keyword">= </span><span class="default">ftp_rawlist</span><span class="keyword">(</span><span class="default">$ftp_stream</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">);<br></span><span class="default">$dirc </span><span class="keyword">= array();<br>foreach (</span><span class="default">$list </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; list(</span><span class="default">$perms</span><span class="keyword">,</span><span class="default">$owner</span><span class="keyword">,</span><span class="default">$group</span><span class="keyword">,</span><span class="default">$size</span><span class="keyword">,</span><span class="default">$mtime</span><span class="keyword">,</span><span class="default">$fname</span><span class="keyword">) = <br>&nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#^([bcdlsp-][rwxtTsS-]{9})\s+(?:[0-9]+)\s+'</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'([a-zA-Z]+)\s+([a-zA-Z]+)\s+([0-9]+)\s+'</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'([A-Z][a-z]+ [0-9]{1,2} [0-9]{4} [0-9]{2}:[0-9]{2}) (.*)$#'</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$dirc</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">][</span><span class="string">'permissions'</span><span class="keyword">] = </span><span class="default">$perms</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dirc</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">][</span><span class="string">'owner'</span><span class="keyword">]&nbsp; &nbsp; &nbsp;&nbsp; = </span><span class="default">$owner</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dirc</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">][</span><span class="string">'group'</span><span class="keyword">]&nbsp; &nbsp; &nbsp;&nbsp; = </span><span class="default">$group</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dirc</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">][</span><span class="string">'size'</span><span class="keyword">]&nbsp; &nbsp; &nbsp; &nbsp; = </span><span class="default">$size</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dirc</span><span class="keyword">[</span><span class="default">$fname</span><span class="keyword">][</span><span class="string">'modtime'</span><span class="keyword">]&nbsp; &nbsp;&nbsp; = </span><span class="default">$mtime</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36701">  
  <a class="name">
  <strong class="user"><em>postmaster at alishomepage dot com</em></strong></a><div class="date" title="2003-10-19 05:39"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36701">
<div class="phpcode"><code><span class="html">
Here we go for a 100% working code... :D<br><br>&lt;?<br><br>[code]<br><br>function cutspaces($str){<br>&nbsp; &nbsp; while(substr($str,0,1)==" "){$str=substr($str,1);}<br>&nbsp; &nbsp; return $str;}<br><br>[code]<br><br>$folders=array();<br>$files=array();<br>for($i=0;$i&lt;sizeof($list);$i++){<br>&nbsp; &nbsp; list($permissions,$next)=split(" ",$list[$i],2);<br>&nbsp; &nbsp; list($num,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($owner,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($group,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($size,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($month,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($day,$next)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; list($year_time,$filename)=split(" ",cutspaces($next),2);<br>&nbsp; &nbsp; if($filename!="." &amp;&amp; $filename!=".."){<br>&nbsp; &nbsp; &nbsp; &nbsp; if(substr($permissions,0,1)=="d"){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $folders[]=$filename;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $files[]=$filename;}}}<br>sort($folders);<br>sort($files);<br><br>[code]<br><br>?&gt;<br><br>so this will simply "get" all the information WITHOUT being in any case interfered with some spaces, ... etc etc... It will even put files in a $files array and folders in a $folders array, and sort them, so you will be able of using all this later<br><br>and: the "folders" will NOT contain "." and ".." ;)<br><br>so you can use all this to make a beautiful FTP interface... later on you could for example put permissions and etc etc in other arrays to use them in your result... cute....</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36700">  
  <a class="name">
  <strong class="user"><em>postmaster at alishomepage dot com</em></strong></a><div class="date" title="2003-10-19 05:05"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36700">
<div class="phpcode"><code><span class="html">
Another "formula" for decoding the rawlist: the ide is that normaly a "ls" contains info like below:<br><br>&lt;file rights&gt; &lt;number&gt; &lt;owner&gt; &lt;group&gt; &lt;date&gt; &lt;time&gt; &lt;filename&gt;<br><br>and: the "time" contains a ":" (which is NOT contained in any of the other infos -if we reversely read the array)<br><br>and, in the case the "time" would not exist, i have done a "protection script" that would try to find out using the year... Yet that may NOT always work since a user name or group name MAY contain an item like "1999" etc... (and i did not check the date format reversely -on the filename first- since a probability of presence is higher of a date is MUCH higher in a filename)<br><br>So here we go:<br><br>&lt;?<br><br>[... code ...]<br><br>$fnTest=array("198","199","200","201","202");<br><br>[... code ...]<br><br>$j=0;<br>$strrpos=strrpos($list[$i],":");<br>while($strrpos==0){<br>&nbsp; &nbsp; $strrpos=strpos($list[$i],$fnTest[$j]);<br>&nbsp; &nbsp; $j++;}<br>if($j){<br>&nbsp; &nbsp; $strrpos+=2+strlen($fnTest[$j]);<br>}else{<br>&nbsp; &nbsp; $strrpos+=4;}<br>$elmt=substr($list[$i],$strrpos);<br><br>[... code ...]<br><br>?&gt;<br><br>and $elmt would *normally* contain the info we want... but i'm still working on it!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="34640">  
  <a class="name">
  <strong class="user"><em>Svenne Burner</em></strong></a><div class="date" title="2003-08-01 06:12"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom34640">
<div class="phpcode"><code><span class="html">
If you want to use explode, for all files in a dir, or something..<br><br>Use:<br><br>$rawlist[$i][$x] = ereg_replace( "([\x20]+)", "\x20", $rawlist[$i][$x]);<br><br>/*<br>$rawlist[$i][$x] = explode("\x20", $rawlist[$i][$x]);<br><br>echo $rawlist[$i][$x][$k] . "&lt;br&gt;";<br>*/<br><br>Why?:<br>The output prints a different amount of spaces.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="32050">  
  <a class="name">
  <strong class="user"><em>jmv AT jmvware DOT com</em></strong></a><div class="date" title="2003-05-14 02:27"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom32050">
<div class="phpcode"><code><span class="html">
Seems it doesn't have to be so complicated:<br><br>$dirline=ereg_replace(" +",' ',$dirline);<br>$isdir=0;<br>if (ereg('^d',$dirline)) $isdir=1;<br>list($permissions,$num,$owner,$group<br>,$size,$month,$day,$year_time,$name)=split(' ',$dirline);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114910">  
  <a class="name">
  <strong class="user"><em>nickman at freemail dot hu</em></strong></a><div class="date" title="2014-04-24 07:17"><strong>4 months ago</strong></div>
  <div class="text" id="Hcom114910">
<div class="phpcode"><code><span class="html">
The solution of fredvanetten at tinqle dot com is nice but needs further evaluation as because of the preg_split and static listing of the variables will produce different values: comparing a file of today or an older, from a previous year:<br><br>Array<br>(<br>&nbsp; &nbsp; [time] =&gt; 2012<br>&nbsp; &nbsp; [day] =&gt; 11<br>&nbsp; &nbsp; [month] =&gt; Sep<br>&nbsp; &nbsp; [size] =&gt; 37262<br>&nbsp; &nbsp; [group] =&gt; group<br>&nbsp; &nbsp; [user] =&gt; owner<br>&nbsp; &nbsp; [number] =&gt; 1<br>&nbsp; &nbsp; [rights] =&gt; -rw-rw-rw-<br>)<br><br>Array<br>(<br>&nbsp; &nbsp; [time] =&gt; 14:01<br>&nbsp; &nbsp; [day] =&gt; 23<br>&nbsp; &nbsp; [month] =&gt; Apr<br>&nbsp; &nbsp; [size] =&gt; 37262<br>&nbsp; &nbsp; [group] =&gt; group<br>&nbsp; &nbsp; [user] =&gt; owner<br>&nbsp; &nbsp; [number] =&gt; 1<br>&nbsp; &nbsp; [rights] =&gt; -rw-rw-rw-<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="21983">  
  <a class="name">
  <strong class="user"><em>murasame at danzers dot org</em></strong></a><div class="date" title="2002-06-02 06:11"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom21983">
<div class="phpcode"><code><span class="html">
I tweaked the regexp above and used it like this in a for-loop:<br><br>...<br>ereg("([-d])([rwxst-]{9}).* ([0-9]*) ([a-zA-Z]+[0-9: ]* [0-9]{2}:?[0-9]{2}) (.+)", $raw[$i], $regs)<br><br>$out[] = array("is_dir" =&gt;<br>&nbsp; ($regs[1] == "d") ? true : false,<br> "mod" =&gt; $regs[2],<br> "size" =&gt; $regs[3],<br> "time" =&gt; $regs[4],<br> "name" =&gt; $regs[5],<br> "raw" =&gt; $regs[0]);<br>...<br><br>the previous version couldn't handle old dates which are in format 'M d Y' instead of 'M d H:i' correctly</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20270">  
  <a class="name">
  <strong class="user"><em>maikdemaSPAM at yahooMAPS dot com</em></strong></a><div class="date" title="2002-03-28 03:27"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20270">
<div class="phpcode"><code><span class="html">
L8 ereg mask (directory?, size, name):<br><br>ereg("([-d])[rwxst-]{9}.* ([0-9]*) [a-zA-Z]+ [0-9: ]*[0-9]<br>(.+)",$dirline,$regs);<br><br>I've tried this, and it works fine if the name of the file has not a number in the first letter. for example, if I have a file named "1file.exe", it shows "file.exe"; and if I've a file named "010102.exe" it shows ".exe" only.<br>I've improved it by doing this:<br><br>if(ereg("([-d])[rwxst-]{9}.* ([0-9]*) ([a-zA-Z]+[0-9: ]*[0-9]) ([0-9]{2}:[0-9]{2}) (.+)",$dirline,$regs))<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if($regs[1]=="d") $dirinfo[0] = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[1] = $regs[2];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[2] = $regs[3];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[3] = $regs[4];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[4] = $regs[5];<br>}<br>$dirinfo[0] =&gt; is a directory? (1=yes)<br>$dirinfo[1] =&gt; file size<br>$dirinfo[2] =&gt; file date<br>$dirinfo[3] =&gt; file time<br>$dirinfo[4] =&gt; file name<br><br>and now works with all filename formats!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20061">  
  <a class="name">
  <strong class="user"><em>ryan at wonko dot com</em></strong></a><div class="date" title="2002-03-20 07:32"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20061">
<div class="phpcode"><code><span class="html">
[[ Editors note: Seems it was fixed in PHP 4.3.0 ]]
<br>A note to developers using PHP on Windows servers: as of PHP 4.1.2, ftp_rawlist() is broken in the Windows build of PHP. It will return nothing at all, even if the same code works fine on UNIX. So if you're going crazy trying to figure out why the function isn't returning anything, stop wasting your time, you're not doing anything wrong. Hopefully this will get fixed in future versions, although it's apparently been an issue since at least 4.0.6.
<br>
<br>More info on this bug is at <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=16057</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="13702">  
  <a class="name">
  <strong class="user"><em>cialdi at firenze dot net</em></strong></a><div class="date" title="2001-06-29 09:24"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13702">
<div class="phpcode"><code><span class="html">
the second parameter accepts also standard arguments of /bin/ls command like "-l" or "-t"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="13095">  
  <a class="name">
  <strong class="user"><em>php at smintman dot com</em></strong></a><div class="date" title="2001-05-26 06:35"><strong>13 years ago</strong></div>
  <div class="text" id="Hcom13095">
<div class="phpcode"><code><span class="html">
An example script for rekursiv directory analysis ... interesting are the ereg functions for spliting the content based on the system type...
<br> (<a rel="nofollow" target="_blank">http://beben.lanparty.de/smint/ftp_rekdiranalys.phps</a>)
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">analysedir</span><span class="keyword">(</span><span class="default">$dirline</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; global </span><span class="default">$systyp</span><span class="keyword">,</span><span class="default">$ftp_server</span><span class="keyword">,</span><span class="default">$stop</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-dl])[rwxst-]{9}"</span><span class="keyword">,</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$dirline</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$systyp </span><span class="keyword">= </span><span class="string">"UNIX"</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$dirline</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">) == </span><span class="string">"total"</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; } elseif(</span><span class="default">$systyp</span><span class="keyword">==</span><span class="string">"Windows_NT"</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[-0-9]+ *[0-9:]+[PA]?M? +&lt;DIR&gt; {10}(.*)"</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">,</span><span class="default">$regs</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"[-0-9]+ *[0-9:]+[PA]?M? +([0-9]+) (.*)"</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">,</span><span class="default">$regs</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="default">$regs</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; } elseif(</span><span class="default">$systyp</span><span class="keyword">==</span><span class="string">"UNIX"</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"([-d])[rwxst-]{9}.* ([0-9]*) [a-zA-Z]+ [0-9: ]*[0-9] (.+)"</span><span class="keyword">,</span><span class="default">$dirline</span><span class="keyword">,</span><span class="default">$regs</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$regs</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]==</span><span class="string">"d"</span><span class="keyword">)&nbsp; &nbsp; </span><span class="default">$dirinfo</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[1] = $regs[2];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $dirinfo[2] = $regs[3];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; if(($dirinfo[2]==".")||($dirinfo[2]=="..")) $dirinfo[0]=0;
<br>
<br>&nbsp; &nbsp; // array -&gt; 0 = switch, directory or not
<br>&nbsp; &nbsp; // array -&gt; 1 = filesize (if dir =0)
<br>&nbsp; &nbsp; // array -&gt; 2 = filename or dirname
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; return $dirinfo;
<br>}
<br>
<br>function rekdir($dir)
<br>{
<br>&nbsp; &nbsp; global $conn_id,$filetyps,$exectyps,$ftp_server,$banlist,$size,$ssize;
<br>
<br>&nbsp; &nbsp; echo "&lt;b&gt;$dir&lt;/b&gt;&lt;br&gt;";
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; $dirlist = ftp_rawlist($conn_id,"");
<br>
<br>&nbsp; &nbsp; for($i=0;$i&lt;count($dirlist);$i++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; $dirinfo = analysedir($dirlist[$i]);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if($dirinfo[0]==1) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $newdir = "$dir/$dirinfo[2]";
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(($dirinfo[2]=="~")||(substr($dirinfo[2],0,1)==" "))
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $chdir=ftp_chdir($conn_id,$newdir);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else&nbsp; &nbsp; $chdir=ftp_chdir($conn_id,$dirinfo[2]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $stop = 0;
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for($k=0;($k&lt;count($banlist))&amp;&amp;(!$stop);$k++) {
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(strpos($newdir,$banlist[$k])!=0) $stop=1;
<br>//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!$stop &amp;&amp; $chdir) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rekdir($newdir);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(!ftp_chdir($conn_id,$dir))&nbsp; &nbsp; ftp_cdup($conn_id);
<br>&nbsp; &nbsp; &nbsp; &nbsp; } elseif($dirinfo[0]==0) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo "$dirinfo[2]&lt;br&gt;";
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $size += $dirinfo[1];
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>}
<br>
<br>$conn_id = ftp_connect($ftp_server); 
<br>$login_result = @ftp_login($conn_id, $user, $password);
<br>
<br>if ($login_result) {
<br>&nbsp; &nbsp; $real_systyp = ftp_systype($conn_id);
<br>&nbsp; &nbsp; $systyp = $real_systyp;
<br>&nbsp; &nbsp; echo "scanning... $systyp&lt;br&gt;";
<br>
<br>&nbsp; &nbsp; rekdir("");
<br>
<br>&nbsp; &nbsp; ftp_quit($conn_id);
<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107862">  
  <a class="name">
  <strong class="user"><em>azakolyukin at gmail dot com</em></strong></a><div class="date" title="2012-03-10 07:48"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107862">
<div class="phpcode"><code><span class="html">
To avoid complicated parsing and sorting fetched data it's possible to use additional options. For example to sort files by date and display only name of files the following code can be used:<br><br>ftp_rawlist($ftpConnection, '-1t');</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110561">  
  <a class="name">
  <strong class="user"><em>not4rent at gmail dot com</em></strong></a><div class="date" title="2012-11-07 11:23"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110561">
<div class="phpcode"><code><span class="html">
The following function receives a $rawList generated by ftp_rawlist and returns a parsed array (all in single function).
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">private function </span><span class="default">parseRawList</span><span class="keyword">(</span><span class="default">$rawList</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//if you want the dots (. &amp; ..) set this variable to 0
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//specify the order of the contents here
<br>&nbsp; &nbsp; &nbsp; //currently set to first directories "d"
<br>&nbsp; &nbsp; &nbsp; //second links "l" 
<br>&nbsp; &nbsp; &nbsp; //and last the files "-"
<br>&nbsp; &nbsp; &nbsp; //change it to your convenience but don't touch the value names!
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$orderList </span><span class="keyword">= array(</span><span class="string">"d"</span><span class="keyword">, </span><span class="string">"l"</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//the name and the order of the columns
<br>&nbsp; &nbsp; &nbsp; //change it to your convenience
<br>&nbsp; &nbsp; &nbsp; //but don't increase/reduce the number of columns
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$typeCol </span><span class="keyword">= </span><span class="string">"type"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$cols </span><span class="keyword">= array(</span><span class="string">"permissions"</span><span class="keyword">, </span><span class="string">"number"</span><span class="keyword">, </span><span class="string">"owner"</span><span class="keyword">, </span><span class="string">"group"</span><span class="keyword">, </span><span class="string">"size"</span><span class="keyword">, </span><span class="string">"month"</span><span class="keyword">, </span><span class="string">"day"</span><span class="keyword">, </span><span class="string">"time"</span><span class="keyword">, </span><span class="string">"name"</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$rawList </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parser </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$key </span><span class="keyword">&gt;= </span><span class="default">$start</span><span class="keyword">) </span><span class="default">$parser </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'!\s+!'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$parser</span><span class="keyword">)) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$parser </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$item</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parser</span><span class="keyword">[</span><span class="default">$cols</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]] = </span><span class="default">$item</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$parser</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsedList</span><span class="keyword">[] = </span><span class="default">$parser</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$orderList </span><span class="keyword">as </span><span class="default">$order</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$parsedList </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$parsedItem</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$parsedItem</span><span class="keyword">), </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$type </span><span class="keyword">== </span><span class="default">$order</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsedItem</span><span class="keyword">[</span><span class="default">$typeCol</span><span class="keyword">] = </span><span class="default">$type</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$parsedList</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parsedList</span><span class="keyword">[] = </span><span class="default">$parsedItem</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$parsedList</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>Enjoy!!</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.ftp-rawlist.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:25 GMT -->


</body></html>