<html><!-- Mirrored from php.net/manual/en/mysqlnd-ms.changes-one-five.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:07:13 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>PECL/mysqlnd_ms 1.5 series</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="mysqlnd-ms.changes-one-five.html">
 <link rel="shorturl" href="mysqlnd-ms.changes-one-five.html">
 <link rel="alternate" href="mysqlnd-ms.changes-one-five.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="mysqlnd-ms.changes.html">
 <link rel="prev" href="mysqlnd-ms.changes-one-six.html">
 <link rel="next" href="mysqlnd-ms.changes-one-four.html">

 <link rel="alternate" href="mysqlnd-ms.changes-one-five.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/mysqlnd-ms.changes-one-five.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/mysqlnd-ms.changes-one-five.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/mysqlnd-ms.changes-one-five.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/mysqlnd-ms.changes-one-five.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/mysqlnd-ms.changes-one-five.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/mysqlnd-ms.changes-one-five.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/mysqlnd-ms.changes-one-five.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/mysqlnd-ms.changes-one-five.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/mysqlnd-ms.changes-one-five.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/mysqlnd-ms.changes-one-five.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="set.mysqlinfo.html">MySQL</a></li>      <li><a href="book.mysqlnd-ms.html">mysqlnd_ms</a></li>      <li><a href="mysqlnd-ms.changes.html">Change History</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="mysqlnd-ms.changes-one-five" class="section">
  <h2 class="title">PECL/mysqlnd_ms 1.5 series</h2>
   <p class="para">
   1.5.1-stable
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Release date: 06/2013
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Motto/theme: Sharding support, improved transaction support
     </span>
    </li>
   </ul>
  <p></p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
     This is the current stable series. Use this version in production environments.
    </p>
    <p class="para">
     The documentation is complete.
    </p>
  <p></p></blockquote>
  <p class="para">
   1.5.0-alpha
   </p><ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Release date: 03/2013
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Motto/theme: Sharding support, improved transaction support
     </span>
    </li>
   </ul>
  <p></p>
  <p class="para">
   Bug fixes
   </p><ul class="itemizedlist">
    <li class="listitem">
     <p class="para">
      Fixed #60605 PHP segmentation fault when mysqlnd_ms is enabled.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Setting transaction stickiness disables all load balancing, including
      automatic failover, for the duration of a transaction. So far
      connection switches could have happened in the middle of a transaction
      in multi-master configurations  and during automatic failover although
      transaction monitoring had detected transaction boundaries properly.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      BC break and bug fix. SQL hints enforcing the use of a specific
      kind of server (<strong><code>MYSQLND_MS_MASTER_SWITCH</code></strong>,
      <strong><code>MYSQLND_MS_SLAVE_SWITCH</code></strong>,
      <strong><code>MYSQLND_MS_LAST_USED_SWITCH</code></strong>) are ignored for the
      duration of a transaction of transaction stickiness is enabled and
      transaction boundaries have been detected properly.
     </p>
     <p class="para">
      This is a change in behaviour. However, it is also a bug fix and a step
      to align behaviour. If, in previous versions, transaction stickiness,
      one of the above listed SQL hints and the quality of service filtering
      was combined it could happened that the SQL hints got ignored. In some
      case the SQL hints did work, in other cases they did not. The new
      behaviour is more consistent. SQL hints will always be ignore for
      the duration of a transaction, if
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">transaction stickiness</a>
      is enabled.
     </p>
     <p class="para">
      Please note, transaction boundary detection continues to be based on API
      call monitoring. SQL commands controlling transactions are not monitored.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      BC break and bug fix. Calls to <span class="function"><a href="function.mysqlnd-ms-set-qos.html" class="function">mysqlnd_ms_set_qos()</a></span>
      will fail when done in the middle of a transaction if
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">transaction stickiness</a>
      is enabled. Connection switches are not allowed for the duration of a
      transaction. Changing the quality of service likely results on a different
      set of servers qualifying for query execution, possibly making it
      necessary to switch connections. Thus, the call is not allowed in
      during an active transaction. The quality of server can, however, be
      changed in between transactions.
     </p>
    </li>
   </ul>
  <p></p>
  <p class="para">
   Feature changes
   </p><ul class="itemizedlist">
    <li class="listitem">
    <p class="para">
      Introduced the <em>node_group</em> filter.
      The filter lets you organize servers (master and slaves)
      into groups. Queries can be directed to a certain group of servers
      by prefixing the query statement with a SQL hint/comment that contains
      the groups configured name. Grouping can be used for
      partitioning and sharding, and also to optimize for local caching.
      In the case of sharding, a group name can be thought of like a shard key.
      All queries for a given shard key will be executed on the
      configured shard. Note: both the client and server must support sharding
      for sharding to function with mysqlnd_ms.
     </p>
    </li>
    <li class="listitem">
    <p class="para">
      Extended configuration file validation during PHP startup (RINIT).
      An <strong><code>E_WARNING</code></strong> level error will be thrown if the configuration
      file can not be read (permissions), is empty, or the file (JSON) could not be parsed.
      Warnings may appear in log files, which depending on how PHP is configured.
    </p>
    <p class="para">
      Distributions that aim to provide a pre-configured setup, including a
      configuration file stub, are asked to put <em>{}</em> into
      the configuration file to prevent this warning about an invalid
      configuration file.
     </p>
    <p class="para">
      Further configuration file validation is done when parsing sections
      upon opening a connection. Please, note that there may still be situations
      when an invalid plugin configuration file does not lead to proper error messages
      but a failure to connect.
    </p>
    </li>
    <li class="listitem">
     <p class="para">
      As of PHP 5.5.0, improved support for transaction boundaries detection was added for
      <em>mysqli</em>. The <em>mysqli</em> extension has been
      modified to use the new C API calls of the <em>mysqlnd</em>
      library to begin, commit, and rollback a transaction or savepoint.
      If <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">trx_stickiness</a>
      is used to enable transaction aware load balancing, the <span class="function"><strong>mysqli_begin()</strong></span>,
      <span class="function"><a href="mysqli.commit.html" class="function">mysqli_commit()</a></span> and <span class="function"><a href="mysqli.rollback.html" class="function">mysqli_rollback()</a></span> functions
      will now be monitered by the plugin, to go along with the <span class="function"><a href="mysqli.autocommit.html" class="function">mysqli_autocommit()</a></span>
      function that was already supported. All SQL features to control
      transactions are also available through the improved <em>mysqli</em>
      transaction control related functions. This means that it is not required to
      issue SQL statements instead of using API calls. Applications
      using the appropriate API calls can be load balanced by PECL/mysqlnd_ms
      in a completely transaction-aware way.
     </p>
     <p class="para">
      Please note, <em>PDO_MySQL</em> has not been updated
      yet to utilize the new mysqlnd API calls. Thus, transaction boundary
      detection with <em>PDO_MySQL</em> continues to be limited to
      the monitoring by passing in <strong><code>PDO::ATTR_AUTOCOMMIT</code></strong> to
      <span class="methodname"><a href="pdo.setattribute.html" class="methodname">PDO::setAttribute()</a></span>.
     </p>
    </li>
    <li class="listitem">
     <p class="para">
      Introduced <em>trx_stickiness=on</em>. This
      <a href="mysqlnd-ms.plugin-ini-json.html#ini.mysqlnd-ms-plugin-config-v2.trx-stickiness" class="link">trx_stickiness</a>
      option differs from <em>trx_stickiness=master</em> as it
      tries to execute a read-only transaction on a slave, if
      quality of service (consistency level) allows the use of a slave.
      Read-only transactions were introduced in MySQL 5.6, and they
      offer performance gains.
     </p>
    </li>
    <li class="listitem">
      <p class="para">
       Query cache support is considered beta if used with the <em>mysqli</em>
       API. It should work fine with primary copy based clusters. For all other
       APIs, this feature continues to be called experimental.
      </p>
    </li>
    <li class="listitem">
     <p class="para">
      The code examples in the mysqlnd_ms source were updated.
     </p>
    </li>
   </ul>
  <p></p>
 </div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div>
 <div class="note">There are no user contributed notes for this page.</div></section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/mysqlnd-ms.changes-one-five.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 17:07:13 GMT -->


</body></html>