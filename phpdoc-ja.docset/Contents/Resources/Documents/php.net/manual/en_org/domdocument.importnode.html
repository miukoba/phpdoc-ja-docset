<html><!-- Mirrored from php.net/manual/en/domdocument.importnode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:55:09 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>DOMDocument::importNode</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="domdocument.importnode.html">
 <link rel="shorturl" href="domdocument.importnode.html">
 <link rel="alternate" href="domdocument.importnode.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.domdocument.html">
 <link rel="prev" href="domdocument.getelementsbytagnamens.html">
 <link rel="next" href="domdocument.load.html">

 <link rel="alternate" href="domdocument.importnode.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/domdocument.importnode.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/domdocument.importnode.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/domdocument.importnode.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/domdocument.importnode.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/domdocument.importnode.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/domdocument.importnode.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/domdocument.importnode.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/domdocument.importnode.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/domdocument.importnode.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/domdocument.importnode.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.dom.html">DOM</a></li>      <li><a href="class.domdocument.html">DOMDocument</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="domdocument.importnode" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DOMDocument::importNode</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">DOMDocument::importNode</span> â€” <span class="dc-title">Import node into current document</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-domdocument.importnode-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <span class="methodname"><strong>DOMDocument::importNode</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.domnode.html" class="type DOMNode">DOMNode</a></span> <code class="parameter">$importedNode</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$deep</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   This function returns a copy of the node to import and associates it with 
   the current document.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-domdocument.importnode-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">importedNode</code></dt>

     <dd>

      <p class="para">
       The node to import.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">deep</code></dt>

     <dd>

      <p class="para">
       If set to <strong><code>TRUE</code></strong>, this method will recursively import the subtree under
       the <code class="parameter">importedNode</code>.
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        To copy the nodes attributes <code class="parameter">deep</code> needs to be set to <strong><code>TRUE</code></strong>
       </p>
      <p></p></blockquote>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-domdocument.importnode-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The copied node or <strong><code>FALSE</code></strong>, if it cannot be copied.
  </p>
 </div>

 <div class="refsect1 errors" id="refsect1-domdocument.importnode-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   <a href="class.domexception.html" class="classname">DOMException</a> is thrown if node cannot be imported.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-domdocument.importnode-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5492">
    <p><strong>Example #1 <span class="function"><strong>DOMDocument::importNode()</strong></span> example</strong></p>
    <div class="example-contents"><p>
      Copying nodes between documents.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$orgdoc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$orgdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadXML</span><span style="color: #007700">(</span><span style="color: #DD0000">"&lt;root&gt;&lt;element&gt;&lt;child&gt;text&nbsp;in&nbsp;child&lt;/child&gt;&lt;/element&gt;&lt;/root&gt;"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;The&nbsp;node&nbsp;we&nbsp;want&nbsp;to&nbsp;import&nbsp;to&nbsp;a&nbsp;new&nbsp;document<br></span><span style="color: #0000BB">$node&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$orgdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getElementsByTagName</span><span style="color: #007700">(</span><span style="color: #DD0000">"element"</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">item</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br><br><br></span><span style="color: #FF8000">//&nbsp;Create&nbsp;a&nbsp;new&nbsp;document<br></span><span style="color: #0000BB">$newdoc&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DOMDocument</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">formatOutput&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Add&nbsp;some&nbsp;markup<br></span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">loadXML</span><span style="color: #007700">(</span><span style="color: #DD0000">"&lt;root&gt;&lt;someelement&gt;text&nbsp;in&nbsp;some&nbsp;element&lt;/someelement&gt;&lt;/root&gt;"</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;'new&nbsp;document'&nbsp;before&nbsp;copying&nbsp;nodes&nbsp;into&nbsp;it:\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Import&nbsp;the&nbsp;node,&nbsp;and&nbsp;all&nbsp;its&nbsp;children,&nbsp;to&nbsp;the&nbsp;document<br></span><span style="color: #0000BB">$node&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">importNode</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br></span><span style="color: #FF8000">//&nbsp;And&nbsp;then&nbsp;append&nbsp;it&nbsp;to&nbsp;the&nbsp;"&lt;root&gt;"&nbsp;node<br></span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">documentElement</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">appendChild</span><span style="color: #007700">(</span><span style="color: #0000BB">$node</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"\nThe&nbsp;'new&nbsp;document'&nbsp;after&nbsp;copying&nbsp;the&nbsp;nodes&nbsp;into&nbsp;it:\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">$newdoc</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">saveXML</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>The 'new document' before copying nodes into it:
&lt;?xml version="1.0"?&gt;
&lt;root&gt;
  &lt;someelement&gt;text in some element&lt;/someelement&gt;
&lt;/root&gt;

The 'new document' after copying the nodes into it:
&lt;?xml version="1.0"?&gt;
&lt;root&gt;
  &lt;someelement&gt;text in some element&lt;/someelement&gt;
  &lt;element&gt;
    &lt;child&gt;text in child&lt;/child&gt;
  &lt;/element&gt;
&lt;/root&gt;
</pre></div>
    </div>
   </div>
  <p></p>
 </div>

 

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="113191">  
  <a class="name">
  <strong class="user"><em>rikdnua at mail dot ru</em></strong></a><div class="date" title="2013-09-11 01:54"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113191">
<div class="phpcode"><code><span class="html">
The behavior of importNode($node, false) is different in PHP 5.2.9-2 and PHP 5.2.17.
<br>The second option is explicitly set to false. In PHP 5.2.9-2 importNode() imports the elements WITHOUT attributes. In PHP 5.2.17 the elements imported ALONG with their attributes. 
<br><span class="default">&lt;?php
<br>$xml</span><span class="keyword">=</span><span class="string">"
<br>&lt;html&gt;
<br>&lt;a href='yandex.com'&gt;Yandex.com&lt;/a&gt;
<br>&lt;a href='rik.dn.ua'&gt;RiK.dn.ua&lt;/a&gt;
<br>&lt;/html&gt;
<br>"</span><span class="keyword">;
<br></span><span class="default">$doc</span><span class="keyword">=new </span><span class="default">domDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">);
<br></span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br></span><span class="default">$list</span><span class="keyword">=</span><span class="default">$doc</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">);
<br></span><span class="default">$doc1</span><span class="keyword">=new </span><span class="default">domDocument</span><span class="keyword">(</span><span class="string">'1.0'</span><span class="keyword">);
<br></span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">formatOutput</span><span class="keyword">=</span><span class="default">true</span><span class="keyword">;
<br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$list</span><span class="keyword">-&gt;</span><span class="default">length</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) </span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$list</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">), </span><span class="default">false</span><span class="keyword">));
<br></span><span class="default">$doc1</span><span class="keyword">-&gt;</span><span class="default">save</span><span class="keyword">(</span><span class="string">'file.xml'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>file.xml PHP 5.2.9-2
<br>&lt;?xml version="1.0"?&gt;
<br>&lt;a/&gt;
<br>&lt;a/&gt;
<br>
<br>file.xml PHP 5.2.17
<br>&lt;?xml version="1.0"?&gt;
<br>&lt;a href="yandex.com"/&gt;
<br>&lt;a href="rik.dn.ua"/&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94153">  
  <a class="name">
  <strong class="user"><em>c dot 1 at smithies dot org</em></strong></a><div class="date" title="2009-10-19 06:40"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94153">
<div class="phpcode"><code><span class="html">
Assume that $source and $dest are instances of DOMDocument. Assume that $sourcedoc contains an element with ID 'sourceID' and that $destdoc contains an element with ID 'destID'. Assume that we have already set up source and destination element variables thus:<br><br><span class="default">&lt;?php<br> $src </span><span class="keyword">= </span><span class="default">$sourcedoc</span><span class="keyword">-&gt;</span><span class="default">getElementById</span><span class="keyword">(</span><span class="string">'sourceID'</span><span class="keyword">);<br> </span><span class="default">$dst </span><span class="keyword">= </span><span class="default">$destdoc</span><span class="keyword">-&gt;</span><span class="default">getElementById</span><span class="keyword">(</span><span class="string">'destID'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Finally, assume that $sel has more than one child node.<br><br>In order to import the child elements of $src as children of $dst, you might do something like this:<br><br><span class="default">&lt;?php<br>$src </span><span class="keyword">= </span><span class="default">$dest</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$src</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br><br>foreach (</span><span class="default">$src</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$el</span><span class="keyword">) </span><span class="default">$dst</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>But this does not work. foreach gets confused, because (as noted below) appending an imported element to another existing element in the same document causes it to be removed from its current parent element.<br><br>Therefore, the following technique should be used:<br><br><span class="default">&lt;?php<br></span><span class="keyword">foreach (</span><span class="default">$src</span><span class="keyword">-&gt;</span><span class="default">childNodes </span><span class="keyword">as </span><span class="default">$el</span><span class="keyword">) </span><span class="default">$dst</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$destdoc</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$el</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87893">  
  <a class="name">
  <strong class="user"><em>p dot reisinger at gmail dot com</em></strong></a><div class="date" title="2008-12-29 03:43"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87893">
<div class="phpcode"><code><span class="html">
When you use function/method below, php automaticaly inserts namespaces (if you have some). If you want to join xml files exactly, then you can just use placeholders and treat xml as a string.<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">joinXMLStrings</span><span class="keyword">(</span><span class="default">$file1</span><span class="keyword">, </span><span class="default">$file2</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//remove xml declaration<br>&nbsp; &nbsp; </span><span class="default">$file2 </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;\?xml.*\?&gt;/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$file2</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br><br>&nbsp; &nbsp; </span><span class="comment">//insert file2 in the place of placeholder in the first file<br>&nbsp; &nbsp; </span><span class="default">$file1 </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;\?file2\s\?&gt;/'</span><span class="keyword">, </span><span class="default">$file2</span><span class="keyword">, </span><span class="default">$file1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>so function looks like this and you insert two xml files. First file has to have placeholder (where you insert file2). Placeholder in this case will be &lt;?file2 ?&gt;<br><br>!!!this is only for ilustration - test before you use it</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69607">  
  <a class="name">
  <strong class="user"><em>Colin</em></strong></a><div class="date" title="2006-09-12 09:11"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69607">
<div class="phpcode"><code><span class="html">
As of PHP 5.1.6 with libxml 2.6.26 and DOM/XML API version 20031129, importNode() does nothing if attempting to import from the same document.&nbsp; Meaning, if you do an $ret = importNode and then appendChild($ret) or insertBefore($ret, ...) then you will end up *moving* the node instead of ending up with a copy.<br><br>If you expect importNode to give you a copy of the source (in this case, a deep copy) then you must account for them being from the same document.&nbsp; This function addresses this:<br><br>&lt;?<br>// Import $b into $a's document<br>function myimport($a, $b)<br>{<br>&nbsp; if ($a-&gt;ownerDocument-&gt;isSameNode($b-&gt;ownerDocument))<br>&nbsp; {<br>&nbsp; &nbsp; $temp = new DOMDocument();<br>&nbsp; &nbsp; $ret = $temp-&gt;importNode($b, TRUE);<br>&nbsp; &nbsp; return $a-&gt;ownerDocument-&gt;importNode($ret, TRUE);<br>&nbsp; }<br>&nbsp; else<br>&nbsp; {<br>&nbsp; &nbsp; return $a-&gt;ownerDocument-&gt;importNode($b, TRUE);<br>&nbsp; }<br>}<br>?&gt;<br><br>(Function was freshly coded for this note but I based it off another, working function of mine.)<br><br>This function checks if the documents are the same and uses a new document (guaranteed to be different this way) to force a copy into $temp and then force a copy back into $a-&gt;ownerDocument.<br><br>Obviously, no error checking has been done.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87812">  
  <a class="name">
  <strong class="user"><em>p dot reisinger at gmail dot com</em></strong></a><div class="date" title="2008-12-23 07:32"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87812">
<div class="phpcode"><code><span class="html">
method (can be used as a function as well) that joins two xml files. first argument is parent xml (the one to be inserted into), second child (the one to be inserted) and third is optional argument that specifies the parent's tag where to insert children xml. If not specified then children is inserted as the last element, just before end of the root<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">protected function </span><span class="default">joinXML</span><span class="keyword">(</span><span class="default">$parent</span><span class="keyword">, </span><span class="default">$child</span><span class="keyword">, </span><span class="default">$tag </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMChild </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMChild</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$DOMChild</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMParent </span><span class="keyword">= new </span><span class="default">DOMDocument</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">formatOutput </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">loadXML</span><span class="keyword">(</span><span class="default">$parent</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$node </span><span class="keyword">= </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">importNode</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$tag </span><span class="keyword">!== </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tag </span><span class="keyword">= </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">getElementsByTagName</span><span class="keyword">(</span><span class="default">$tag</span><span class="keyword">)-&gt;</span><span class="default">item</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tag</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">documentElement</span><span class="keyword">-&gt;</span><span class="default">appendChild</span><span class="keyword">(</span><span class="default">$node</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$DOMParent</span><span class="keyword">-&gt;</span><span class="default">saveXML</span><span class="keyword">();<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83778">  
  <a class="name">
  <strong class="user"><em>mailme at sove dot nl</em></strong></a><div class="date" title="2008-06-11 05:29"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83778">
<div class="phpcode"><code><span class="html">
DOMDocument-&gt;importNode with seconds argument false will leave attributes behind. To fix this:<br><br>$__DOM-&gt;importNode<br>&nbsp;&nbsp; (<br>&nbsp; &nbsp; &nbsp; $__INPUT-&gt;cloneNode(false), true<br>&nbsp;&nbsp; );<br><br>$__DOM (DOMDocument) will import the $__INPUT node (DOMElement) INCLUDING attributes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74332">  
  <a class="name">
  <strong class="user"><em>mark at 4inloop dot de</em></strong></a><div class="date" title="2007-04-05 05:51"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74332">
<div class="phpcode"><code><span class="html">
When you left out the second argument or enter false, not only the child nodes are ommited. The attributes of the node are also cut off.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="70177">  
  <a class="name">
  <strong class="user"><em>adjwilli</em></strong></a><div class="date" title="2006-10-05 01:08"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom70177">
<div class="phpcode"><code><span class="html">
Editing XML with PHP can be a pain in the Secretary of State Powell, so here's a script to replace an XML node with a user-provided one through the POST. It's usually a good idea to run the $_POST['xml'] through a validation check and clean it for other thing before running this.<br><br>Pretty much this script expects a user-provided node called $_POST['xml'] and the XPath of the node in the original document that you want to replace called $_POST['XPath']. It also loads the original XML document from $xml. The function nodeRunner begins with the root node of the document you're editting and the XPath for the root element (these are more to make recursion easy than anything else).<br><br>$doc = new DOMDocument();<br>$doc-&gt;loadXML($xml); // $xml expects an XML string<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>function nodeRunner ($node,$xpath) {<br>&nbsp; &nbsp; global $doc;<br>&nbsp; &nbsp; if ($xpath == $_POST['XPath']) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $xmlPost = new DOMDocument();<br>&nbsp; &nbsp; &nbsp; &nbsp; $xmlPost-&gt;loadXML($_POST['xml']);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $newNode = $doc-&gt;importNode($xmlPost-&gt;firstChild,true);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $node-&gt;parentNode-&gt;replaceChild($newNode,$node);<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; $page = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; $section = 1;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; if ($node-&gt;hasChildNodes()) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach ($node-&gt;childNodes as $nodling) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $nodeName = $nodling-&gt;nodeName;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ($nodeName == 'page' || $nodeName == 'section') {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nodeRunner ($nodling,$xpath."/".$nodeName."[".$$nodeName."]");<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $$nodeName++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br>&nbsp; &nbsp; <br>nodeRunner ($doc-&gt;documentElement,"/root[1]"); // /root should be explicit name of the root&nbsp; element of the XPath<br>&nbsp; &nbsp; <br>$doc-&gt;saveXML();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69746">  
  <a class="name">
  <strong class="user"><em>stomas</em></strong></a><div class="date" title="2006-09-19 06:14"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69746">
<div class="phpcode"><code><span class="html">
I think this should do the same:<br><br>&lt;?<br> // Import $b into $a's document<br> function myimport($a, $b)<br> {<br>&nbsp;&nbsp; if ($a-&gt;ownerDocument-&gt;isSameNode($b-&gt;ownerDocument))<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; return $b-&gt;cloneNode(TRUE);<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; else<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp; return $a-&gt;ownerDocument-&gt;importNode($b, TRUE);<br>&nbsp;&nbsp; }<br> }<br> ?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68909">  
  <a class="name">
  <strong class="user"><em>andy dot clark at dial dot pipex dot com</em></strong></a><div class="date" title="2006-08-15 08:20"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68909">
<div class="phpcode"><code><span class="html">
One useful use of importNode is to copy one node onto another.<br><br>function CopyXMLNode($SourceNode,$DestNode)<br> {<br>&nbsp; if ($SourceNode-&gt;nodeName != '#text')<br>&nbsp;&nbsp; {<br>&nbsp; &nbsp;&nbsp; //Copy this node<br>&nbsp; &nbsp; $node = $DestNode-&gt;ownerDocument-&gt;importNode($SourceNode, true);<br>&nbsp; &nbsp; $node = $DestNode-&gt;appendChild($node);<br>&nbsp; &nbsp; //Now copy the child nodes<br>&nbsp; &nbsp; foreach ($SourceNode-&gt;childNodes AS $item)<br>&nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp;&nbsp; $this-&gt;CopyXMLNode($item,$node);<br>&nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55453">  
  <a class="name">
  <strong class="user"><em>Fitopaldi</em></strong></a><div class="date" title="2005-08-03 11:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55453">
<div class="phpcode"><code><span class="html">
importNode returns a copy of the node to import and associates it with the current document, but not import the node to the current DOMDocument. Use appendChild for import the copy of the node to current DOMDocument.<br><br>&lt;?<br> $domNode = $dom-&gt;importNode($aDomNode, true);<br> $currentDomDocument-&gt;appendChild($domNode);<br>?&gt;</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/domdocument.importnode.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:55:09 GMT -->


</body></html>