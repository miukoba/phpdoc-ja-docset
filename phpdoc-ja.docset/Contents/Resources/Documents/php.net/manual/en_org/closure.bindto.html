<html><!-- Mirrored from php.net/manual/en/closure.bindto.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:07 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Closure::bindTo</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="closure.bindto.html">
 <link rel="shorturl" href="closure.bindto.html">
 <link rel="alternate" href="closure.bindto.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.closure.html">
 <link rel="prev" href="closure.bind.html">
 <link rel="next" href="class.generator.html">

 <link rel="alternate" href="closure.bindto.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/closure.bindto.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/closure.bindto.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/closure.bindto.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/closure.bindto.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/closure.bindto.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/closure.bindto.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/closure.bindto.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/closure.bindto.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/closure.bindto.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/closure.bindto.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="langref.html">Language Reference</a></li>      <li><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></li>      <li><a href="class.closure.html">Closure</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="closure.bindto" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Closure::bindTo</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.4.0)</p><p class="refpurpose"><span class="refname">Closure::bindTo</span> — <span class="dc-title">
   Duplicates the closure with a new bound object and class scope
  </span></p>

 </div>

 <div class="refsect1 description" id="refsect1-closure.bindto-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.closure.html" class="type Closure">Closure</a></span> <span class="methodname"><strong>Closure::bindTo</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$newthis</code></span>
   [, <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$newscope</code>
   <span class="initializer"> = "static"</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Create and return a new <a href="functions.anonymous.html" class="link">anonymous
   function</a> with the same body and bound variables as this one, but
   possibly with a different bound object and a new class scope.
  </p>

  <p class="para">
   The “bound object” determines the value <em>$this</em> will
   have in the function body and the “class scope” represents a class
   which determines which private and protected members the anonymous
   function will be able to access. Namely, the members that will be
   visible are the same as if the anonymous function were a method of
   the class given as value of the <code class="parameter">newscope</code>
   parameter.
  </p>

  <p class="para">
   Static closures cannot have any bound object (the value of the parameter
   <code class="parameter">newthis</code> should be <strong><code>NULL</code></strong>), but this function can
   nevertheless be used to change their class scope.
  </p>

  <p class="para">
   This function will ensure that for a non-static closure, having a bound
   instance will imply being scoped and vice-versa. To this end,
   non-static closures that are given a scope but a <strong><code>NULL</code></strong> instance are made
   static and non-static non-scoped closures that are given a non-null
   instance are scoped to an unspecified class.
  </p>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    If you only want to duplicate the anonymous functions, you can use
    <a href="language.oop5.cloning.html" class="link">cloning</a> instead.
   </p>
  <p></p></blockquote>

 </div>


 <div class="refsect1 parameters" id="refsect1-closure.bindto-parameters">
  <h3 class="title">Parameters</h3>
  <dl>

   
    <dt>
<code class="parameter">newthis</code></dt>

    <dd>

     <p class="para">
      The object to which the given anonymous function should be bound, or
      <strong><code>NULL</code></strong> for the closure to be unbound. 
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">newscope</code></dt>

    <dd>

     <p class="para">
      The class scope to which associate the closure is to be associated, or
      'static' to keep the current one. If an object is given, the type of the
      object will be used instead. This determines the visibility of protected
      and private methods of the bound object.
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-closure.bindto-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns the newly created <a href="class.closure.html" class="classname">Closure</a> object
    or <strong><code>FALSE</code></strong> on failure
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-closure.bindto-examples">
  <h3 class="title">Examples</h3>
  <div class="example" id="example-327">
   <p><strong>Example #1 <span class="function"><strong>Closure::bindTo()</strong></span> example</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">A&nbsp;</span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//returns&nbsp;closure&nbsp;bound&nbsp;to&nbsp;this&nbsp;object&nbsp;and&nbsp;scope<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;function()&nbsp;{&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">val</span><span style="color: #007700">;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>}<br><br></span><span style="color: #0000BB">$ob1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$ob2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">A</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$ob1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getClosure</span><span style="color: #007700">();<br>echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$cl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindTo</span><span style="color: #007700">(</span><span style="color: #0000BB">$ob2</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">$cl</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output
something similar to:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>1
2
</pre></div>
   </div>
  </div>
 </div>



 <div class="refsect1 seealso" id="refsect1-closure.bindto-seealso">
  <h3 class="title">See Also</h3>
  <ul class="simplelist">
   <li class="member"><a href="functions.anonymous.html" class="link">Anonymous functions</a></li>
   <li class="member"><span class="methodname"><a href="closure.bind.html" class="methodname" rel="rdfs-seeAlso">Closure::bind()</a> - Duplicates a closure with a specific bound object and class scope</span></li>
  </ul>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="111379">  
  <a class="name">
  <strong class="user"><em>tatarynowicz at gmail dot com</em></strong></a><div class="date" title="2013-02-14 09:30"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111379">
<div class="phpcode"><code><span class="html">
You can do pretty Javascript-like things with objects using closure binding:<br><br><span class="default">&lt;?php<br></span><span class="keyword">trait </span><span class="default">DynamicDefinition </span><span class="keyword">{<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; public function </span><span class="default">__call</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new \</span><span class="default">RuntimeException</span><span class="keyword">(</span><span class="string">"Method </span><span class="keyword">{</span><span class="default">$name</span><span class="keyword">}</span><span class="string"> does not exist"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; public function </span><span class="default">__set</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">$name </span><span class="keyword">= </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)? <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">): <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br><br>class </span><span class="default">Foo </span><span class="keyword">{<br>&nbsp; &nbsp; use </span><span class="default">DynamicDefinition</span><span class="keyword">;<br>&nbsp; &nbsp; private </span><span class="default">$privateValue </span><span class="keyword">= </span><span class="string">'I am private'</span><span class="keyword">;<br>}<br><br></span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">Foo</span><span class="keyword">;<br></span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">bar </span><span class="keyword">= function() {<br>&nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">privateValue</span><span class="keyword">;<br>};<br><br></span><span class="comment">// prints 'I am private'<br></span><span class="keyword">print </span><span class="default">$foo</span><span class="keyword">-&gt;</span><span class="default">bar</span><span class="keyword">();<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107848">  
  <a class="name">
  <strong class="user"><em>safakozpinar at gmail dot com</em></strong></a><div class="date" title="2012-03-09 01:35"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107848">
<div class="phpcode"><code><span class="html">
Private/protected members are accessible if you set the "newscope" argument (as the manual says).<br><br><span class="default">&lt;?php<br>$fn </span><span class="keyword">= function(){<br>&nbsp; &nbsp; return ++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">; </span><span class="comment">// increase the value<br></span><span class="keyword">};<br><br>class </span><span class="default">Bar</span><span class="keyword">{<br>&nbsp; &nbsp; private </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">// initial value<br></span><span class="keyword">}<br><br></span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br><br></span><span class="default">$fn1 </span><span class="keyword">= </span><span class="default">$fn</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">, </span><span class="string">'Bar'</span><span class="keyword">); </span><span class="comment">// specify class name<br></span><span class="default">$fn2 </span><span class="keyword">= </span><span class="default">$fn</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">,&nbsp; </span><span class="default">$bar</span><span class="keyword">); </span><span class="comment">// or object<br><br></span><span class="keyword">echo </span><span class="default">$fn1</span><span class="keyword">(); </span><span class="comment">// 2<br></span><span class="keyword">echo </span><span class="default">$fn2</span><span class="keyword">(); </span><span class="comment">// 3</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106912">  
  <a class="name">
  <strong class="user"><em>amica at php-resource dot de</em></strong></a><div class="date" title="2011-12-18 04:23"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106912">
<div class="phpcode"><code><span class="html">
With rebindable $this at hand it's possible to do evil stuff:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">class </span><span class="default">A </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; private </span><span class="default">$a </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; private function </span><span class="default">getA </span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; class </span><span class="default">B </span><span class="keyword">{<br>&nbsp; &nbsp; &nbsp; &nbsp; private </span><span class="default">$b </span><span class="keyword">= </span><span class="default">34</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; private function </span><span class="default">getB </span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$a </span><span class="keyword">= new </span><span class="default">A</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$b </span><span class="keyword">= new </span><span class="default">B</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= function () {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">property_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">) &amp;&amp; </span><span class="default">method_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"getA"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">a</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getA</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">property_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">) &amp;&amp; </span><span class="default">method_exists</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="string">"getB"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">b</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getB</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; };<br>&nbsp; &nbsp; </span><span class="default">$ca </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$cb </span><span class="keyword">= </span><span class="default">$c</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br>&nbsp; &nbsp; echo </span><span class="default">$ca</span><span class="keyword">(), </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// =&gt; 13<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">$cb</span><span class="keyword">(), </span><span class="string">"\n"</span><span class="keyword">; </span><span class="comment">// =&gt; 35<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107770">  
  <a class="name">
  <strong class="user"><em>anthony bishopric</em></strong></a><div class="date" title="2012-03-03 01:00"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107770">
<div class="phpcode"><code><span class="html">
Closures can rebind their $this variable, but private/protected methods and functions of $this are not accessible to the closures. <br><br><span class="default">&lt;?php<br>$fn </span><span class="keyword">= function(){<br>&nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">foo</span><span class="keyword">;<br>};<br><br>class </span><span class="default">Bar</span><span class="keyword">{<br>&nbsp; &nbsp; private </span><span class="default">$foo </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br>}<br><br></span><span class="default">$bar </span><span class="keyword">= new </span><span class="default">Bar</span><span class="keyword">();<br><br></span><span class="default">$fn </span><span class="keyword">= </span><span class="default">$fn</span><span class="keyword">-&gt;</span><span class="default">bindTo</span><span class="keyword">(</span><span class="default">$bar</span><span class="keyword">);<br><br>echo </span><span class="default">$fn</span><span class="keyword">(); </span><span class="comment">// Fatal error: Cannot access private property Bar::$foo</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/closure.bindto.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:08 GMT -->


</body></html>