<html><!-- Mirrored from php.net/manual/en/reference.pcre.pattern.syntax.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:50:55 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>PCRE regex syntax</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="reference.pcre.pattern.syntax.html">
 <link rel="shorturl" href="reference.pcre.pattern.syntax.html">
 <link rel="alternate" href="reference.pcre.pattern.syntax.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="pcre.pattern.html">
 <link rel="prev" href="pcre.pattern.html">
 <link rel="next" href="regexp.introduction.html">

 <link rel="alternate" href="reference.pcre.pattern.syntax.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/reference.pcre.pattern.syntax.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/reference.pcre.pattern.syntax.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/reference.pcre.pattern.syntax.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/reference.pcre.pattern.syntax.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/reference.pcre.pattern.syntax.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/reference.pcre.pattern.syntax.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/reference.pcre.pattern.syntax.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/reference.pcre.pattern.syntax.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/reference.pcre.pattern.syntax.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/reference.pcre.pattern.syntax.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.pcre.html">PCRE</a></li>      <li><a href="pcre.pattern.html">PCRE Patterns</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="reference.pcre.pattern.syntax" class="chapter">
 <h1>Pattern Syntax</h1>
<h2>Table of Contents</h2><ul class="chunklist chunklist_chapter"><li><a href="regexp.introduction.html">Introduction</a></li><li><a href="regexp.reference.delimiters.html">Delimiters</a></li><li><a href="regexp.reference.meta.html">Meta-characters</a></li><li><a href="regexp.reference.escape.html">Escape sequences</a></li><li><a href="regexp.reference.unicode.html">Unicode character properties</a></li><li><a href="regexp.reference.anchors.html">Anchors</a></li><li><a href="regexp.reference.dot.html">Dot</a></li><li><a href="regexp.reference.character-classes.html">Character classes</a></li><li><a href="regexp.reference.alternation.html">Alternation</a></li><li><a href="regexp.reference.internal-options.html">Internal option setting</a></li><li><a href="regexp.reference.subpatterns.html">Subpatterns</a></li><li><a href="regexp.reference.repetition.html">Repetition</a></li><li><a href="regexp.reference.back-references.html">Back references</a></li><li><a href="regexp.reference.assertions.html">Assertions</a></li><li><a href="regexp.reference.onlyonce.html">Once-only subpatterns</a></li><li><a href="regexp.reference.conditional.html">Conditional subpatterns</a></li><li><a href="regexp.reference.comments.html">Comments</a></li><li><a href="regexp.reference.recursive.html">Recursive patterns</a></li><li><a href="regexp.reference.performance.html">Performance</a></li></ul>

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
</div>

<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="40863">  
  <a class="name">
  <strong class="user"><em>napalm at spiderfish dot net</em></strong></a><div class="date" title="2004-03-17 08:14"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40863">
<div class="phpcode"><code><span class="html">
Pay attention that some pcre features such as once-only or recursive patterns are not implemented in php versions prior to 5.00<br><br>Napalm</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51510">  
  <a class="name">
  <strong class="user"><em>onerob at gmail dot com</em></strong></a><div class="date" title="2005-04-01 04:51"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51510">
<div class="phpcode"><code><span class="html">
If, like me, you tend to use the /U pattern modifier, then you will need to remember that using ? or * to to test for optional characters will match zero characters if it means that the rest of the pattern can continue matching, even if the optional characters exist.<br><br>For instance, if we have this string:<br><br>a___bcde<br><br>and apply this pattern:<br><br>'/a(_*).*e/U'<br><br>The whole pattern is matched but none of the _ characters are placed in the sub-pattern. The way around this (if you still wish to use /U) is to use the ? greediness inverter. eg,<br><br>'/a(_*?).*e/U'</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71263">  
  <a class="name">
  <strong class="user"><em>theppg_001 at hotmail dot com</em></strong></a><div class="date" title="2006-11-20 01:22"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71263">
<div class="phpcode"><code><span class="html">
Hi there<br>This was originally made by someone eles but it didn't work correctly and so I remade it and as far as I know it works right.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br>* strip_selected_tags ( string str [, string strip_tags[, strip_content flag]] )<br>* ---------------------------------------------------------------------<br>* Like strip_tags() but inverse; the strip_tags tags will be stripped, not kept.<br>* strip_tags: string with tags to strip, ex: "&lt;a&gt;&lt;p&gt;&lt;quote&gt;" etc.<br>* strip_content flag: TRUE will also strip everything between open and closed tag<br>*/<br></span><span class="keyword">function </span><span class="default">strip_selected_tags</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$tags </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">, </span><span class="default">$stripContent </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/&lt;([^&gt;]+)&gt;/i"</span><span class="keyword">, </span><span class="default">$tags</span><span class="keyword">, </span><span class="default">$allTags</span><span class="keyword">, </span><span class="default">PREG_PATTERN_ORDER</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="string">"%(&lt;</span><span class="default">$tag</span><span class="string">.*?&gt;)(.*?)(&lt;\/</span><span class="default">$tag</span><span class="string">.*?&gt;)%is"</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$allTags</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$tag</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$stripContent</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">'${2}'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Before I 'fixed' it, when running<br>strip_selected_tags("this is &lt;p align=\"center\"&gt;a test&lt;/p&gt; and &lt;b&gt;this is bold&lt;/b&gt;","&lt;p&gt;&lt;b&gt;")<br>You would get back<br>"this is &lt;p align=\"center\"&gt;a test&lt;/p&gt; and this is bold"<br>Why? Because it did not take into account that there could be options etc in the HTML Tag.<br>My one works perfectly when stripping just the tags or the tag and its contents too!<br><br>So now when you run <br>strip_selected_tags("this is &lt;p align=\"center\"&gt;a test&lt;/p&gt; and &lt;b&gt;this is bold&lt;/b&gt;","&lt;p&gt;&lt;b&gt;")<br>You get back<br>"this is a test and this is bold"<br>Or when running<br>strip_selected_tags("this is &lt;p align=\"center\"&gt;a test&lt;/p&gt; and &lt;b&gt;this is bold&lt;/b&gt;","&lt;p&gt;&lt;b&gt;",true)<br>You get back<br>"this is&nbsp; and "<br><br>Hope it helps someone :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="48037">  
  <a class="name">
  <strong class="user"><em>J Daugherty</em></strong></a><div class="date" title="2004-12-09 09:06"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48037">
<div class="phpcode"><code><span class="html">
In the character class meta-character documentation above, the circumflex (^) is described:<br><br>"^&nbsp;&nbsp; negate the class, but only if the first character"<br><br>It should be a little more verbose to fully express the meaning of ^:<br><br>^&nbsp; &nbsp; Negate the character class.&nbsp; If used, this must be the first character of the class (e.g. "[^012]").</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75339">  
  <a class="name">
  <strong class="user"><em>sam marshall</em></strong></a><div class="date" title="2007-05-24 10:23"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75339">
<div class="phpcode"><code><span class="html">
For anyone who sees this error: <br><br>Warning: preg_match() [function.preg-match]: Compilation failed: PCRE does not support \L, \l, \N, \P, \p, \U, \u, or \X at ...<br><br>As this manual page says, you need PHP 5.1.0 and the /u modifier in order to enable these features, but that isn't the only requirement! It is possible to install later versions of PHP (we have 5.1.4) while linking to an older PCRE install. A quick look at the PCRE changelog suggests that you probably need at least PCRE 5; we're running 4.5, while the latest is 7.1. You can find out your PCRE version by checking phpinfo().<br><br>I suspect this ancient PCRE version is included in some officially-supported Red Hat Enterprise package which is probably why we are running it so might also affect other people.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59006">  
  <a class="name">
  <strong class="user"><em>Daniel Vandersluis</em></strong></a><div class="date" title="2005-11-23 10:50"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59006">
<div class="phpcode"><code><span class="html">
Concerning note #6 in "Differences From Perl", the \G token *is* supported as the last match position anchor. This has been confirmed to work at least in preg_replace(), though I'd assume it'd work in preg_match_all(), and other functions that can make more than one match, as well.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49753">  
  <a class="name">
  <strong class="user"><em>info at atjeff dot co dot nz</em></strong></a><div class="date" title="2005-02-07 04:46"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49753">
<div class="phpcode"><code><span class="html">
ive never used regex expressions till now and had loads of difficulty trying to convert a [url]link here[/url] into an href for use with posting messages on a forum, heres what i manage to come up with:<br><br>$patterns = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[link\](.*?)\[\/link\]/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[url\](.*?)\[\/url\]/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[img\](.*?)\[\/img\]/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[b\](.*?)\[\/b\]/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[u\](.*?)\[\/u\]/",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "/\[i\](.*?)\[\/i\]/"<br>&nbsp; &nbsp; &nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; $replacements = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;a href=\"\\1\"&gt;\\1&lt;/a&gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;a href=\"\\1\"&gt;\\1&lt;/a&gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;img src=\"\\1\"&gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;b&gt;\\1&lt;/b&gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;u&gt;\\1&lt;/u&gt;",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; "&lt;i&gt;\\1&lt;/i&gt;"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; $newText = preg_replace($patterns,$replacements, $text);<br><br>at first it would collect ALL the tags into one link/bold/whatever, until i added the "?" i still dont fully understand it... but it works :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="58559">  
  <a class="name">
  <strong class="user"><em>roland dot illig at gmx dot de</em></strong></a><div class="date" title="2005-11-08 01:02"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom58559">
<div class="phpcode"><code><span class="html">
&lt;quote&gt;<br>9. Another as yet unresolved discrepancy is that in Perl 5.005_02 the pattern /^(a)?(?(1)a|b)+$/ matches the string "a", whereas in PCRE it does not. However, in both Perl and PCRE /^(a)?a/ matched against "a" leaves $1 unset.<br>&lt;/quote&gt;<br><br>The last sentence does not indicate a bug. If the string "a" should match against the regular expression /^(a)?a/, the last "a" in the regex must be matched by any literal "a" in the string. The rest of the string is "", which obviously does not match the first /^(a)/.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54830">  
  <a class="name">
  <strong class="user"><em>Ned Baldessin</em></strong></a><div class="date" title="2005-07-16 04:14"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54830">
<div class="phpcode"><code><span class="html">
Although \w and \W do include as "word characters" locale-specific characters (like "�" if you are using the "fr" locale), \b and \B do not work the same way.<br><br>For example :<br>"foo �tait bar"&nbsp;&nbsp; =&gt;&nbsp;&nbsp; /\W(�tait)\W/&nbsp;&nbsp; =&gt;&nbsp;&nbsp; This captures correctly "�tait".<br>"foo �tait bar"&nbsp;&nbsp; =&gt;&nbsp;&nbsp; /\b(�tait)\b/&nbsp;&nbsp; =&gt;&nbsp;&nbsp; This fails to capture it.<br><br>This is confusing, because the manual talks in both cases about "word characters", but fails to mention the difference in behaviour.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74201">  
  <a class="name">
  <strong class="user"><em>pstradomski at gmail dot com</em></strong></a><div class="date" title="2007-03-29 07:55"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74201">
<div class="phpcode"><code><span class="html">
About strip_selected_tags function from two posts below:<br><br>it does not work if somebody uses tags without ending "&gt;" character, like this:<br><br>&lt;p &lt;b&gt; bold text &lt;/b&lt;/p<br><br>This&nbsp; is even valid HTML (but not valid XHTML)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87197">  
  <a class="name">
  <strong class="user"><em>mbrodin</em></strong></a><div class="date" title="2008-11-24 01:18"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87197">
<div class="phpcode"><code><span class="html">
Hi!<br><br>For even better prestanda of the code below, use;<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; $f </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; foreach(</span><span class="default">$allTags</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$tag</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$f</span><span class="keyword">[] = </span><span class="string">"%(&lt;</span><span class="default">$tag</span><span class="string">.*?&gt;)(.*?)(&lt;\/</span><span class="default">$tag</span><span class="string">.*?&gt;)%is"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">)) </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">, (</span><span class="default">$stripContent </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="string">'${2}'</span><span class="keyword">), </span><span class="default">$str</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This will not use preg_replace on every tag, instead it collect the regex as array, and then executes and should be better.<br><br>It also check so there are any regex to replace! If not, it will not start preg_replace! :)<br><br>Added the "&lt;?php" so it will highlight the code!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50693">  
  <a class="name">
  <strong class="user"><em>W W W</em></strong></a><div class="date" title="2005-03-07 07:22"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50693">
<div class="phpcode"><code><span class="html">
Back references are a great way to achieve exact matching when it would have been impossible any other way. Take these three strings.<br><br>1) "www.www.com"<br>2) 'www.www.com'<br>3) "www.www.com'<br><br>The regex /^("|').+?("|')$/ would match all three strings but what if you needed the 3rd string above to be illegal because the quotes are not the same? You could write four different regexes to check for every possible case OR you could use back references.<br><br>/^("|').+?\1$/ will match strings 1 and 2 but not string 3. Try this code for further proof:<br><br>$str_test="'www.www.com\"";<br>$int_count=preg_match("/^(\"|').+?\\1$/", $str_test, $matches, PREG_OFFSET_CAPTURE);<br><br>The preg_match function will not match against $str_test because the quotes are mismatched. If you change $str_test to<br><br>$str_test = "'www.www.com'";<br><br>the preg_match will work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78820">  
  <a class="name">
  <strong class="user"><em>datacompboy at call2ru dot com</em></strong></a><div class="date" title="2007-10-29 10:24"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78820">
<div class="phpcode"><code><span class="html">
For example, you want to cut an some &lt;div&gt; element.<br>Accurate, from &lt;div&gt; to correspond &lt;/div&gt; element.<br>Here is proof-of-concept code to do this:<br><br>&lt;?<br>$str = "&lt;dqiv1&gt;1+&lt;div2&gt;2+&lt;div3&gt;&lt;b&gt;&lt;c&gt;3&lt;/c&gt;&lt;/b&gt;&lt;/div3&gt;2-&lt;/div2&gt;1-&lt;/div1&gt;";<br><br>preg_match("#&lt;div.&gt; ( ".<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; " ( (?&gt;[^&lt;]*) ( &lt; ( ([^/d]|d([^i]|i[^v])) | /([^d]|d([^i]|i[^v])) ) )? )* ".<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; " | (?R) )* &lt;/div.&gt;#xi", $str, $m);<br>var_dump($m[0]);<br><br>?&gt;<br><br>it match accurate from &lt;div2&gt; to &lt;/div2&gt;. And, if you change &lt;dqiv1&gt; to &lt;div1&gt;, it will match from &lt;div1&gt; to &lt;/div1&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76197">  
  <a class="name">
  <strong class="user"><em>chris at madblanks dot org</em></strong></a><div class="date" title="2007-07-04 12:22"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76197">
<div class="phpcode"><code><span class="html">
When enclosing your regular expression in double quotes, back references require two backslashes.<br><br>For example, \1 is the ascii character \1. You need to provide \\1 to get the back reference.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/reference.pcre.pattern.syntax.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:50:57 GMT -->


</body></html>