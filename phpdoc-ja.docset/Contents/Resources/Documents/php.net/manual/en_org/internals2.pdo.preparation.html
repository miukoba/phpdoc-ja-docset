<html><!-- Mirrored from php.net/manual/en/internals2.pdo.preparation.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:29 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Preparation and Housekeeping</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="internals2.pdo.preparation.html">
 <link rel="shorturl" href="internals2.pdo.preparation.html">
 <link rel="alternate" href="internals2.pdo.preparation.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="internals2.pdo.html">
 <link rel="prev" href="internals2.pdo.prerequisites.html">
 <link rel="next" href="internals2.pdo.implementing.html">

 <link rel="alternate" href="internals2.pdo.preparation.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/internals2.pdo.preparation.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/internals2.pdo.preparation.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/internals2.pdo.preparation.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/internals2.pdo.preparation.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/internals2.pdo.preparation.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/internals2.pdo.preparation.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/internals2.pdo.preparation.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/internals2.pdo.preparation.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/internals2.pdo.preparation.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/internals2.pdo.preparation.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="internals2.html">PHP at the Core: A Hacker's Guide</a></li>      <li><a href="internals2.pdo.html">PDO Driver How-To</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="internals2.pdo.preparation" class="sect1">
 <h2 class="title">Preparation and Housekeeping</h2>
 <div class="sect2" id="internals2.pdo.preparation.layout">
  <h3 class="title">Source directory layout</h3>

  <p class="para">
   The source directory for a typical PDO driver is laid out as follows, where
   <em>SKEL</em> represents a shortened form of the name of the
   database that the driver is going to connect to.  Even though SKEL is
   presented here in uppercase (for clarity), the convention is to use
   lowercase characters.
  </p>
  <div class="example-contents screen">
<div class="cdata"><pre>pdo_SKEL/          
  config.m4                  # unix build script
  config.w32                 # win32 build script
  CREDITS
  package.xml                # meta information about the package
  pdo_SKEL.c                 # standard PHP extension glue
  php_pdo_SKEL.h
  php_pdo_SKEL_int.h         # driver private header
  SKEL_dbh.c                 # contains the implementation of the PDO driver interface
  SKEL_stmt.c                # contains the implementation of the PDO statement interface
  tests/
</pre></div>
  </div>
  <p class="para">The contents of these files are defined later in this document.</p>
 </div>
 <div class="sect2" id="internals2.pdo.preparation.create-skel">
  <h3 class="title">Creating a skeleton</h3>

  <p class="para">
   The easiest way to get started is to use the <strong class="command">ext_skel</strong>
   shell script found in the PHP build tree in the <var class="filename">ext</var>
   directory. This will build a skeleton directory containing a lot of the
   files listed above. It can be build by executing the following command from
   within the <var class="filename">ext</var> directory:
  </p>
  <div class="example-contents screen">
<div class="cdata"><pre>./ext_skel --extname=pdo_SKEL
</pre></div>
  </div>
  <p class="para">
   This will generate a directory called pdo_SKEL containing the
   skeleton files that you can then modify. This directory should then be
   moved out of the php extension directory. PDO is a PECL extension and
   should not be included in the standard extension directory. As long as you
   have PHP and PDO installed, you should be able to build from any directory.
  </p>
 </div>
 <div class="sect2" id="internals2.pdo.preparation.std-includes">
  <h3 class="title">Standard Includes</h3>
  <div class="sect3" id="internals2.pdo.preparation.std-includes.build-specific">
   <h4 class="title">Build Specific Headers</h4>
   <p class="para">
    The header file config.h is generated by the configure process for the
    platform for the which the driver is being built. If this header is
    present, the HAVE_CONFIG_H compiler variable is set. This variable should
    be tested for and if set, the file config.h should be included in the
    compilation unit.
   </p>
  </div>
  <div class="sect3" id="internals2.pdo.preparation.std-includes.php">
   <h4 class="title">PHP Headers</h4>
   <p class="para">
    The following standard public php headers should be included in each
    source module:
   </p>
   <ol type="1">
    <li class="listitem">
     <p class="para">php.h</p>
    </li>
    <li class="listitem">
     <p class="para">php_ini.h</p>
    </li>
    <li class="listitem">
     <p class="para">ext/standard/info.h</p>
    </li>
   </ol>
  </div>
  <div class="sect3" id="internals2.pdo.preparation.std-includes.pdo">
   <h4 class="title">PDO Interface Headers</h4>
   <p class="para">
    The following standard public PDO header files are also included in each
    source module:
   </p>
   <dl>

    
     <dt>
pdo/php_pdo.h</dt>

     <dd>

      <p class="para">
       This header file contains definitions of the initialization and shutdown
       functions in the main driver as well as definitions of global PDO
       variables.
      </p>
     </dd>

    
    
     <dt>
pdo/php_pdo_driver.h</dt>

     <dd>

      <p class="para">
       This header contains the types and API contracts that are used to write
       a PDO driver. It also contains method signature for calling back into
       the PDO layer and registering/unregistering your driver with 
       PDO. Most importantly, this header file contains the type
       definitions for PDO database handles and statements. The two main
       structures a driver has to deal with, pdo_dbh_t and pdo_stmt_t, are
       described in more detail in Appendix A and B.
      </p>
     </dd>

    
   </dl>

  </div>
  <div class="sect3" id="internals2.pdo.preparation.std-headers.driver-spec">
   <h4 class="title">Driver Specific Headers</h4>
   <p class="para">
    The typical PDO driver has two header files that are specific to the
    database implementation. This does not preclude the use of more depending
    on the implementation. The following two headers are, by convention,
    standard:
   </p>
   <dl>

    
     <dt>
php_pdo_SKEL.h</dt>

     <dd>

      <p class="para">
       This header file is virtually an exact duplicate in functionality
       and content of the previously defined pdo/php_pdo.h that has been
       specifically tailored for your database. If your driver requires
       the use of global variables they should be defined using the
       ZEND_BEGIN_MODULE_GLOBALS and ZEND_END_MODULE_GLOBALS macros.
       Macros are then used to access these variables. This macro is
       usually named PDO_SKEL_G(v) where v is global variable to be
       accessed. Consult the Zend programmer documentation for more
       information.
      </p>
     </dd>

    
    
     <dt>
php_pdo_SKEL_int.h</dt>

     <dd>

      <p class="para">
       This header file typically contains type definitions and function
       declarations specific to the driver implementation. It also should
       contain the db specific definitions of a pdo_SKEL_handle and
       pdo_SKEL_stmt structures. These are the names of the private
       data structures that are then referenced by the driver_data members
       of the handle and statement structures.
      </p>
     </dd>

    
   </dl>

  </div>
  <div class="sect3" id="internals2.pdo.preparation.std-headers.optional">
   <h4 class="title">Optional Headers</h4>
   <p class="para">
    Depending on the implementation details for a particular driver it may be
    necessary to include the following header:
   </p>
   <div class="example-contents">
<div class="ccode"><pre class="ccode">#include &lt;zend_exceptions.h&gt;</pre>
</div>
   </div>

  </div>
 </div>
</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div>
 <div class="note">There are no user contributed notes for this page.</div></section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/internals2.pdo.preparation.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:53:29 GMT -->


</body></html>