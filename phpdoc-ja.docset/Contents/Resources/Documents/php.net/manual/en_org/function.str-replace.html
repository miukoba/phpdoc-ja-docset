<html><!-- Mirrored from php.net/manual/en/function.str-replace.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:43 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>str_replace</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.str-replace.html">
 <link rel="shorturl" href="http://php.net/str-replace">
 <link rel="alternate" href="http://php.net/str-replace" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.str-repeat.html">
 <link rel="next" href="function.str-rot13.html">

 <link rel="alternate" href="function.str-replace.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.str-replace.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.str-replace.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.str-replace.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.str-replace.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.str-replace.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.str-replace.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.str-replace.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.str-replace.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.str-replace.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.str-replace.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.str-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">str_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">str_replace</span> — <span class="dc-title">Replace all occurrences of the search string with the replacement string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.str-replace-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>str_replace</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$search</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replace</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&amp;$count</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   This function returns a string or an array with all occurrences of
   <code class="parameter">search</code> in <code class="parameter">subject</code>
   replaced with the given <code class="parameter">replace</code> value.
  </p>
  <p class="para">
   If you don't need fancy replacing rules (like regular expressions), you
   should always use this function instead of <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.str-replace-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   If <code class="parameter">search</code> and <code class="parameter">replace</code> are
   arrays, then <span class="function"><strong>str_replace()</strong></span> takes a value from each array
   and uses them to search and replace on <code class="parameter">subject</code>. If
   <code class="parameter">replace</code> has fewer values than
   <code class="parameter">search</code>, then an empty string is used for the rest of
   replacement values. If <code class="parameter">search</code> is an array and
   <code class="parameter">replace</code> is a string, then this replacement string is
   used for every value of <code class="parameter">search</code>. The converse would
   not make sense, though.
  </p>
  <p class="para">
   If <code class="parameter">search</code> or <code class="parameter">replace</code>
   are arrays, their elements are processed first to last.
  </p>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">search</code></dt>

     <dd>

      <p class="para">
       The value being searched for, otherwise known as the <em class="emphasis">needle</em>.
       An array may be used to designate multiple needles.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replace</code></dt>

     <dd>

      <p class="para">
       The replacement value that replaces found <code class="parameter">search</code>
       values. An array may be used to designate multiple replacements.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       The string or array being searched and replaced on,
       otherwise known as the <em class="emphasis">haystack</em>.
      </p>
      <p class="para">
       If <code class="parameter">subject</code> is an array, then the search and
       replace is performed with every entry of
       <code class="parameter">subject</code>, and the return value is an array as
       well.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">count</code></dt>

     <dd>

      <p class="para">
       If passed, this will be set to the number of replacements performed.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.str-replace-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   This function returns a string or an array with the replaced values.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.str-replace-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4995">
    <p><strong>Example #1 Basic <span class="function"><strong>str_replace()</strong></span> examples</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Provides:&nbsp;&lt;body&nbsp;text='black'&gt;<br></span><span style="color: #0000BB">$bodytag&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%body%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"black"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&lt;body&nbsp;text='%body%'&gt;"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Provides:&nbsp;Hll&nbsp;Wrld&nbsp;f&nbsp;PHP<br></span><span style="color: #0000BB">$vowels&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"u"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"A"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"E"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"I"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"O"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"U"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$onlyconsonants&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$vowels</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;World&nbsp;of&nbsp;PHP"</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Provides:&nbsp;You&nbsp;should&nbsp;eat&nbsp;pizza,&nbsp;beer,&nbsp;and&nbsp;ice&nbsp;cream&nbsp;every&nbsp;day<br></span><span style="color: #0000BB">$phrase&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"You&nbsp;should&nbsp;eat&nbsp;fruits,&nbsp;vegetables,&nbsp;and&nbsp;fiber&nbsp;every&nbsp;day."</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$healthy&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"fruits"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"vegetables"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fiber"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$yummy&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"pizza"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ice&nbsp;cream"</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">$newphrase&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$healthy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$yummy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$phrase</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Provides:&nbsp;2<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"ll"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"good&nbsp;golly&nbsp;miss&nbsp;molly!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4996">
    <p><strong>Example #2 Examples of potential <span class="function"><strong>str_replace()</strong></span> gotchas</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Order&nbsp;of&nbsp;replacement<br></span><span style="color: #0000BB">$str&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Line&nbsp;1\nLine&nbsp;2\rLine&nbsp;3\r\nLine&nbsp;4\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$order&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;Processes&nbsp;\r\n's&nbsp;first&nbsp;so&nbsp;they&nbsp;aren't&nbsp;converted&nbsp;twice.<br></span><span style="color: #0000BB">$newstr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$order</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Outputs&nbsp;F&nbsp;because&nbsp;A&nbsp;is&nbsp;replaced&nbsp;with&nbsp;B,&nbsp;then&nbsp;B&nbsp;is&nbsp;replaced&nbsp;with&nbsp;C,&nbsp;and&nbsp;so&nbsp;on...<br>//&nbsp;Finally&nbsp;E&nbsp;is&nbsp;replaced&nbsp;with&nbsp;F,&nbsp;because&nbsp;of&nbsp;left&nbsp;to&nbsp;right&nbsp;replacements.<br></span><span style="color: #0000BB">$search&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'A'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$search</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Outputs:&nbsp;apearpearle&nbsp;pear<br>//&nbsp;For&nbsp;the&nbsp;same&nbsp;reason&nbsp;mentioned&nbsp;above<br></span><span style="color: #0000BB">$letters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$fruit&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$text&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a&nbsp;p'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$output&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$letters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fruit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">$output</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.str-replace-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">This function is
binary-safe.</span></p></blockquote>
  <div class="caution"><strong class="caution">Caution</strong>
   <h1 class="title">Replacement order gotcha</h1>
   <p class="para">
    Because <span class="function"><strong>str_replace()</strong></span> replaces left to right, it might
    replace a previously inserted value when doing multiple replacements.
    See also the examples in this document.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    This function is case-sensitive. Use <span class="function"><a href="function.str-ireplace.html" class="function">str_ireplace()</a></span>
    for case-insensitive replace.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.str-replace-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.str-ireplace.html" class="function" rel="rdfs-seeAlso">str_ireplace()</a> - Case-insensitive version of str_replace.</span></li>
    <li class="member"><span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - Replace text within a portion of a string</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - Perform a regular expression search and replace</span></li>
    <li class="member"><span class="function"><a href="function.strtr.html" class="function" rel="rdfs-seeAlso">strtr()</a> - Translate characters or replace substrings</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="100871">  
  <a class="name">
  <strong class="user"><em>nikolaz dot tang at hotmail dot com</em></strong></a><div class="date" title="2010-11-11 08:57"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100871">
<div class="phpcode"><code><span class="html">
A faster way to replace the strings in multidimensional array is to json_encode() it, do the str_replace() and then json_decode() it, like this:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">){
<br>&nbsp; &nbsp;&nbsp; return </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">,&nbsp; </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)));
<br>
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>This method is almost 3x faster (in 10000 runs.) than using recursive calling and looping method, and 10x simpler in coding.
<br>
<br>Compared to:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$oneSubject</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$oneSubject </span><span class="keyword">= </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$oneSubject</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$oneSubject</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102465">  
  <a class="name">
  <strong class="user"><em>jay_knows_(all)uk at hotmail dot com</em></strong></a><div class="date" title="2011-02-16 07:16"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102465">
<div class="phpcode"><code><span class="html">
This strips out horrible MS word characters. <br><br>Just keep fine tuning it until you get what you need, you'll see ive commented some out which caused problems for me.<br><br>There could be some that need adding in, but its a start to anyone who wishes to make their own custom function.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">msword_conversion</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) <br>{ <br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">130</span><span class="keyword">), </span><span class="string">','</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline single quote<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">131</span><span class="keyword">), </span><span class="string">'NLG'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// florin<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">132</span><span class="keyword">), </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline double quote<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">133</span><span class="keyword">), </span><span class="string">'...'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// ellipsis<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">134</span><span class="keyword">), </span><span class="string">'**'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// dagger (a second footnote)<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">135</span><span class="keyword">), </span><span class="string">'***'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// double dagger (a third footnote)<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">136</span><span class="keyword">), </span><span class="string">'^'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// circumflex accent<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">137</span><span class="keyword">), </span><span class="string">'o/oo'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// permile<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">138</span><span class="keyword">), </span><span class="string">'Sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// S Hacek<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">139</span><span class="keyword">), </span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single guillemet<br>// $str = str_replace(chr(140), 'OE', $str);&nbsp;&nbsp; // OE ligature<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single quote<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single quote<br>// $str = str_replace(chr(147), '"', $str);&nbsp; &nbsp; // left double quote<br>// $str = str_replace(chr(148), '"', $str);&nbsp; &nbsp; // right double quote<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">149</span><span class="keyword">), </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// bullet<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">), </span><span class="string">'-–'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// endash<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">151</span><span class="keyword">), </span><span class="string">'--'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// emdash<br>// $str = str_replace(chr(152), '~', $str);&nbsp; &nbsp; // tilde accent<br>// $str = str_replace(chr(153), '(TM)', $str); // trademark ligature<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">154</span><span class="keyword">), </span><span class="string">'sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// s Hacek<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">155</span><span class="keyword">), </span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single guillemet<br>// $str = str_replace(chr(156), 'oe', $str);&nbsp;&nbsp; // oe ligature<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">159</span><span class="keyword">), </span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Y Dieresis<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'°C'</span><span class="keyword">, </span><span class="string">'&amp;deg;C'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Celcius is used quite a lot so it makes sense to add this in<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'£'</span><span class="keyword">, </span><span class="string">'&amp;pound;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); <br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'–'</span><span class="keyword">, </span><span class="string">'&amp;ndash;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br><br>return </span><span class="default">$str</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95198">  
  <a class="name">
  <strong class="user"><em>Wes Foster</em></strong></a><div class="date" title="2009-12-17 01:32"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95198">
<div class="phpcode"><code><span class="html">
Feel free to optimize this using the while/for or anything else, but this is a bit of code that allows you to replace strings found in an associative array.
<br>
<br>For example:
<br><span class="default">&lt;?php
<br>$replace </span><span class="keyword">= array(
<br></span><span class="string">'dog' </span><span class="keyword">=&gt; </span><span class="string">'cat'</span><span class="keyword">,
<br></span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'orange'
<br>'chevy' </span><span class="keyword">=&gt; </span><span class="string">'ford'
<br></span><span class="keyword">);
<br>
<br></span><span class="default">$string </span><span class="keyword">= </span><span class="string">'I like to eat an apple with my dog in my chevy'</span><span class="keyword">;
<br>
<br>echo </span><span class="default">str_replace_assoc</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);
<br>
<br></span><span class="comment">// Echo: I like to eat an orange with my cat in my ford
<br></span><span class="default">?&gt;
<br></span>
<br>Here is the function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">strReplaceAssoc</span><span class="keyword">(array </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {
<br>&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">$subject</span><span class="keyword">);&nbsp; &nbsp; 
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>[Jun 1st, 2010 - EDIT BY thiago AT php DOT net: Function has been replaced with an updated version sent by ljelinek AT gmail DOT com]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97526">  
  <a class="name">
  <strong class="user"><em>pjcdawkins at googlemail dot com</em></strong></a><div class="date" title="2010-04-23 05:23"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97526">
<div class="phpcode"><code><span class="html">
Here's a deep replace function allowing multi-dimensional arrays in $search, $replace and $subject. The keys and other structure of $subject are preserved.<br><br><span class="default">&lt;?php<br></span><span class="comment">// Auxiliary function:<br></span><span class="keyword">function </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br>&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$search</span><span class="keyword">=array(</span><span class="default">$search</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$replace</span><span class="keyword">=array(</span><span class="default">$replace</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$search</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br>&nbsp; if(</span><span class="default">$match</span><span class="keyword">!==</span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">))<br>&nbsp; &nbsp; </span><span class="default">$subject</span><span class="keyword">=</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$match</span><span class="keyword">];<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>}<br><br></span><span class="comment">// Main function:<br></span><span class="keyword">function </span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br>&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))<br>&nbsp; &nbsp; return </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);<br>&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$val</span><span class="keyword">){<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; continue;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105939">  
  <a class="name">
  <strong class="user"><em>moostende at gmail dot com</em></strong></a><div class="date" title="2011-09-26 11:20"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105939">
<div class="phpcode"><code><span class="html">
Note that this does not replace strings that become part of replacement strings. This may be a problem when you want to remove multiple instances of the same repetative pattern, several times in a row.
<br>
<br>If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you cannot use str_replace. Instead, use preg_replace:
<br>
<br><span class="default">&lt;?php
<br>$challenge </span><span class="keyword">= </span><span class="string">'-aaa----b-c-----d--e---f'</span><span class="keyword">;
<br>echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'--'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/--+/'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>This outputs the following:
<br>-aaa--b-c---d-e--f
<br>-aaa-b-c-d-e-f</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104890">  
  <a class="name">
  <strong class="user"><em>mbullard at accuvista dot co dot uk</em></strong></a><div class="date" title="2011-07-14 02:42"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104890">
<div class="phpcode"><code><span class="html">
Insert space after comma.<br><br>If you have a form that stores results in a database field as comma separated values, when you display this data you can use the following to insert a space after each comma:<br><br><span class="default">&lt;?php<br>$find</span><span class="keyword">[] = </span><span class="string">','</span><span class="keyword">;<br></span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'&amp;#44;&amp;nbsp;'</span><span class="keyword">;<br></span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$row_rsRecordset</span><span class="keyword">[</span><span class="string">'Field'</span><span class="keyword">]);<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>Notes:<br>1) To get round the Replacement Order Gotcha, the comma is also replaced with its code equivalent: &amp;#44;<br>2) You can adapt the $replace section to suit your needs: swap out the &amp;nbsp; code with &lt;br/&gt; or replace comma and space with &amp;nbsp;&amp;middot;&amp;nbsp; etc.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97574">  
  <a class="name">
  <strong class="user"><em>jbarnett at jmbelite dot com</em></strong></a><div class="date" title="2010-04-26 01:23"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97574">
<div class="phpcode"><code><span class="html">
Might be worth mentioning that a SIMPLE way to accomplish Example 2 (potential gotchas) is to simply start your "replacements" in reverse.
<br>
<br>So instead of starting from "A" and ending with "E":
<br>
<br><span class="default">&lt;?php
<br>$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);
<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);
<br></span><span class="comment">// replaces A to B, B to C, C to D, D to E, E to F (makes them all F)
<br>// start from "E" and end with "A":
<br>
<br></span><span class="default">$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">);
<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);
<br></span><span class="comment">// replaces E to F, D to E, C to D, B to C, A to B (prevents from
<br>// multiple replacements of already replaced values)
<br></span><span class="default">?&gt;
<br></span>
<br>So basically start from the "end" and put the replacements in an order where the "replaced value" won't equal a value that exists later in the "search array".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="63783">  
  <a class="name">
  <strong class="user"><em>matt wheaton</em></strong></a><div class="date" title="2006-03-30 07:40"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom63783">
<div class="phpcode"><code><span class="html">
As an effort to remove those Word copy and paste smart quotes, I've found that this works with UTF8 encoded strings (where $text in the following example is UTF8). Also the elipsis and em and en dashes are replaced.<br><br>There is an "invisible" character after the â€ for the right side double smart quote that doesn't seem to display here. It is chr(157).<br><br><span class="default">&lt;?php<br>&nbsp; $find</span><span class="keyword">[] = </span><span class="string">'â€œ'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side double smart quote<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side double smart quote<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€˜'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side single smart quote<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€™'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side single smart quote<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€¦'</span><span class="keyword">;&nbsp; </span><span class="comment">// elipsis<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€”'</span><span class="keyword">;&nbsp; </span><span class="comment">// em dash<br>&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€“'</span><span class="keyword">;&nbsp; </span><span class="comment">// en dash<br><br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"..."</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br>&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br><br>&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108134">  
  <a class="name">
  <strong class="user"><em>cc at cc dot com</em></strong></a><div class="date" title="2012-03-31 05:26"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108134">
<div class="phpcode"><code><span class="html">
I found a pretty low tech solution to avoid the "gotcha" without worrying about the array order of how things are replaced. I could not "order" the replacement array easily because it was being read from a database table.<br><br>Anyway if you add an identifiable token to each replaced word, then just filter this out at the very end, no nested search terms are found. I just dynamically add the %% after the first char of each word before pumping it into the str_ireplace function.<br><br>$find = array("as1", "as2", "as3", "flex");<br>$replace = array("&lt;a href = \"#as1\"&gt;A%%uto S%%entry R%%ev. A%%&lt;/a&gt;", "&lt;a href = \"#as2\"&gt;A%%uto S%%entry E%%xp&lt;/a&gt;", "&lt;a href = \"#as3\"&gt;A%%uto S%%entry f%%lex&lt;/a&gt;", "&lt;a style = \"color: red;\" href = \"#flex\"&gt;f%%lex&lt;/a&gt;");<br>$text = str_ireplace($find, $replace, $text);<br>echo str_ireplace("%%", "", $text);<br><br>In this case I am using %% as my token as this is an unlikely char combo for me.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108430">  
  <a class="name">
  <strong class="user"><em>christof dot rieger at r-tron dot de</em></strong></a><div class="date" title="2012-04-25 08:41"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108430">
<div class="phpcode"><code><span class="html">
In many countries the numeric format is 1.000,33 in english it is 1,000.33<br><br>This function converts numeric arguments always into the PHP confirm numeric format. If only one seperator is into the numericstring so it is interpreted as the decimalpoint.<br><br> function dp($zahl)<br>{<br>&nbsp; if ((strpos($zahl,".") &gt; "-1") | (strpos($zahl,",") &gt; "-1")) {<br>&nbsp; &nbsp; if ((strpos($zahl,".") &gt; "-1") &amp; (strpos($zahl,",") &gt; "-1")) {<br>&nbsp; &nbsp; &nbsp; if (strpos($zahl,".") &gt; strpos($zahl,",")){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return str_replace(",","",$zahl);<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return str_replace(",",".",str_replace(".","",$zahl));<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; } else {<br>&nbsp; &nbsp; &nbsp; if (strpos($zahl,".") &gt; "-1") {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (strpos($zahl,".") == strrpos($zahl,".")) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return $zahl;<br>&nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return str_replace(".","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; } <br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (strpos($zahl,",") == strrpos($zahl,",")) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return str_replace(",",".",$zahl);<br>&nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return str_replace(",","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; } <br>&nbsp; &nbsp; } }<br>} else {<br>&nbsp; &nbsp; return $zahl;<br>} }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91536">  
  <a class="name">
  <strong class="user"><em>Alberto Lepe</em></strong></a><div class="date" title="2009-06-15 07:44"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91536">
<div class="phpcode"><code><span class="html">
Be careful when replacing characters (or repeated patterns in the FROM and TO arrays):
<br>
<br>For example:
<br>
<br><span class="default">&lt;?php
<br>$arrFrom </span><span class="keyword">= array(</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">);
<br></span><span class="default">$arrTo </span><span class="keyword">= array(</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"D"</span><span class="keyword">);
<br></span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;
<br>echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$arrFrom</span><span class="keyword">, </span><span class="default">$arrTo</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>I would expect as result: "ZDDB"
<br>However, this return: "ZDDD"
<br>(Because B = D according to our array)
<br>
<br>To make this work, use "strtr" instead:
<br>
<br><span class="default">&lt;?php
<br>$arr </span><span class="keyword">= array(</span><span class="string">"1" </span><span class="keyword">=&gt; </span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"2" </span><span class="keyword">=&gt; </span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"3" </span><span class="keyword">=&gt; </span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"B" </span><span class="keyword">=&gt; </span><span class="string">"D"</span><span class="keyword">);
<br></span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;
<br>echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>This returns: "ZDDB"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115625">  
  <a class="name">
  <strong class="user"><em>markem at sim1 dot us</em></strong></a><div class="date" title="2014-08-27 08:04"><strong>19 hours ago</strong></div>
  <div class="text" id="Hcom115625">
<div class="phpcode"><code><span class="html">
I was working with MySQL and displaying the title to things on the web page.&nbsp; I'd written a script to ensure single and double quotes were removed from the title.&nbsp; I used<br><br>&nbsp; &nbsp; $title = str_replace( "'", "", $title );<br><br>and<br><br>&nbsp; &nbsp;&nbsp; $title = str_replace( '"', "", $title );<br><br>But still the single and double quotes continued.&nbsp; So I wrote a bit of code to print out each character separated by a dash.&nbsp; Like so:<br><br>&nbsp; &nbsp;&nbsp; for( $i=0; $i&lt;strlen($title); $i++ ){<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "$i-";<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp;&nbsp; echo "&lt;br&gt;\n";<br><br>This displayed:<br><br>&nbsp; &nbsp;&nbsp; m-y-c-o-m-p-a-n-y- b-b-&amp;-#-3-9-;-s<br><br>Which made me go "Oh!&nbsp; I get it."<br><br>The MySQL function real_escape_string modifies the single quotes to be &amp;#39; and double quotes as &amp;#34;&nbsp; These still show up as single and double quotes under HTML and most importantly - <br><br>&nbsp; &nbsp;&nbsp; JAVASCRIPT sees the &amp;#34; and &amp;#39; as actual single or double<br>&nbsp; &nbsp;&nbsp; quotes.&nbsp; So if you are passing arguments to a function you have<br>&nbsp; &nbsp;&nbsp; to get rid of them or else you will get an error on trying to call<br>&nbsp; &nbsp;&nbsp; a given function.&nbsp; Example:<br><br>&nbsp; &nbsp;&nbsp; &lt;a href="javascript:func1('mycompany bbs&amp;#39;s")'"&gt;<br><br>&nbsp; &nbsp;&nbsp; becomes<br><br>&nbsp; &nbsp;&nbsp; &lt;a href="javascript:func1('mycompany bbs's');"&gt;<br><br>Which then will give you an error because there is a single quote inside of the single quoted string.&nbsp; HOWEVER, the<br><br>&nbsp; &nbsp;&nbsp; $title = str_replace( "'", "", $title );<br><br>WILL NOT FIND a single quote.&nbsp; Instead, you have to do this:<br><br>&nbsp; &nbsp;&nbsp; $title = str_replace( "&amp;#39;", "'", $title );<br>and<br>&nbsp; &nbsp;&nbsp; $title = str_relace( "&amp;#34;", '"', $title );<br><br>(Or you could just get rid of them.)<br><br>So remember!&nbsp; If you are trying to remove single and double quotes and are using MySQL and MySQL's real_escape_string() function that you might be having single and double quotes hanging around which are defined as &amp;#39; and &amp;#34; but which show up as single and double quotes as well as causing problems in your Javascripts.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109487">  
  <a class="name">
  <strong class="user"><em>kriscraig at php dot net</em></strong></a><div class="date" title="2012-07-20 11:03"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109487">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br>
<br></span><span class="comment">/**
<br> * Convert foreign 8859-1 characters into HTML entities.
<br> * 
<br> * @param string $str
<br> *&nbsp;&nbsp; The string being parsed.
<br> * 
<br> * @return string
<br> *&nbsp;&nbsp; The converted string.
<br> */
<br></span><span class="keyword">public static function </span><span class="default">convert_chars_to_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'À'</span><span class="keyword">, </span><span class="string">'&amp;#192;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Á'</span><span class="keyword">, </span><span class="string">'&amp;#193;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Â'</span><span class="keyword">, </span><span class="string">'&amp;#194;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ã'</span><span class="keyword">, </span><span class="string">'&amp;#195;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ä'</span><span class="keyword">, </span><span class="string">'&amp;#196;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Å'</span><span class="keyword">, </span><span class="string">'&amp;#197;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Æ'</span><span class="keyword">, </span><span class="string">'&amp;#198;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ç'</span><span class="keyword">, </span><span class="string">'&amp;#199;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'È'</span><span class="keyword">, </span><span class="string">'&amp;#200;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'É'</span><span class="keyword">, </span><span class="string">'&amp;#201;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ê'</span><span class="keyword">, </span><span class="string">'&amp;#202;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ë'</span><span class="keyword">, </span><span class="string">'&amp;#203;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ì'</span><span class="keyword">, </span><span class="string">'&amp;#204;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Í'</span><span class="keyword">, </span><span class="string">'&amp;#205;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Î'</span><span class="keyword">, </span><span class="string">'&amp;#206;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ï'</span><span class="keyword">, </span><span class="string">'&amp;#207;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ð'</span><span class="keyword">, </span><span class="string">'&amp;#208;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ñ'</span><span class="keyword">, </span><span class="string">'&amp;#209;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ò'</span><span class="keyword">, </span><span class="string">'&amp;#210;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ó'</span><span class="keyword">, </span><span class="string">'&amp;#211;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ô'</span><span class="keyword">, </span><span class="string">'&amp;#212;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Õ'</span><span class="keyword">, </span><span class="string">'&amp;#213;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ö'</span><span class="keyword">, </span><span class="string">'&amp;#214;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'×'</span><span class="keyword">, </span><span class="string">'&amp;#215;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ø'</span><span class="keyword">, </span><span class="string">'&amp;#216;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ù'</span><span class="keyword">, </span><span class="string">'&amp;#217;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ú'</span><span class="keyword">, </span><span class="string">'&amp;#218;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Û'</span><span class="keyword">, </span><span class="string">'&amp;#219;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ü'</span><span class="keyword">, </span><span class="string">'&amp;#220;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ý'</span><span class="keyword">, </span><span class="string">'&amp;#221;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Þ'</span><span class="keyword">, </span><span class="string">'&amp;#222;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ß'</span><span class="keyword">, </span><span class="string">'&amp;#223;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'à'</span><span class="keyword">, </span><span class="string">'&amp;#224;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'á'</span><span class="keyword">, </span><span class="string">'&amp;#225;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'â'</span><span class="keyword">, </span><span class="string">'&amp;#226;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ã'</span><span class="keyword">, </span><span class="string">'&amp;#227;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ä'</span><span class="keyword">, </span><span class="string">'&amp;#228;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'å'</span><span class="keyword">, </span><span class="string">'&amp;#229;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'æ'</span><span class="keyword">, </span><span class="string">'&amp;#230;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ç'</span><span class="keyword">, </span><span class="string">'&amp;#231;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'è'</span><span class="keyword">, </span><span class="string">'&amp;#232;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'é'</span><span class="keyword">, </span><span class="string">'&amp;#233;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ê'</span><span class="keyword">, </span><span class="string">'&amp;#234;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ë'</span><span class="keyword">, </span><span class="string">'&amp;#235;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ì'</span><span class="keyword">, </span><span class="string">'&amp;#236;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'í'</span><span class="keyword">, </span><span class="string">'&amp;#237;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'î'</span><span class="keyword">, </span><span class="string">'&amp;#238;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ï'</span><span class="keyword">, </span><span class="string">'&amp;#239;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ð'</span><span class="keyword">, </span><span class="string">'&amp;#240;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ñ'</span><span class="keyword">, </span><span class="string">'&amp;#241;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ò'</span><span class="keyword">, </span><span class="string">'&amp;#242;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ó'</span><span class="keyword">, </span><span class="string">'&amp;#243;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ô'</span><span class="keyword">, </span><span class="string">'&amp;#244;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'õ'</span><span class="keyword">, </span><span class="string">'&amp;#245;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ö'</span><span class="keyword">, </span><span class="string">'&amp;#246;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'÷'</span><span class="keyword">, </span><span class="string">'&amp;#247;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ø'</span><span class="keyword">, </span><span class="string">'&amp;#248;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ù'</span><span class="keyword">, </span><span class="string">'&amp;#249;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ú'</span><span class="keyword">, </span><span class="string">'&amp;#250;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'û'</span><span class="keyword">, </span><span class="string">'&amp;#251;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ü'</span><span class="keyword">, </span><span class="string">'&amp;#252;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ý'</span><span class="keyword">, </span><span class="string">'&amp;#253;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'þ'</span><span class="keyword">, </span><span class="string">'&amp;#254;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ÿ'</span><span class="keyword">, </span><span class="string">'&amp;#255;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108196">  
  <a class="name">
  <strong class="user"><em>Denzel Morris</em></strong></a><div class="date" title="2012-04-06 02:43"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108196">
<div class="phpcode"><code><span class="html">
Maybe obvious to veteran PHP programmers but less so to novice PHP programmers is the fact that this is invalid:<br><span class="default">&lt;?php<br>str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>At a glance it appears to be a reasonable request, until you realize that the fourth parameter must be a variable in order to be passed as a reference. A replacement:<br><span class="default">&lt;?php<br>str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">);<br></span><span class="comment">// or<br></span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br></span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86177">  
  <a class="name">
  <strong class="user"><em>nick at NOSPAM dot pitchinteractive dot com</em></strong></a><div class="date" title="2008-10-06 04:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86177">
<div class="phpcode"><code><span class="html">
I tried max at efoxdesigns dot com solution for str_replace_once but it didn't work quite right so I came up with this solution (all params must be strings):<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">str_replace_once</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$firstChar </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br>&nbsp; &nbsp; if(</span><span class="default">$firstChar </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$beforeStr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$firstChar</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$afterStr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$firstChar </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$beforeStr</span><span class="keyword">.</span><span class="default">$replace</span><span class="keyword">.</span><span class="default">$afterStr</span><span class="keyword">;<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77004">  
  <a class="name">
  <strong class="user"><em>David Gimeno i Ayuso (info at sima dot cat)</em></strong></a><div class="date" title="2007-08-09 12:22"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77004">
<div class="phpcode"><code><span class="html">
With PHP 4.3.1, at least, str_replace works fine when working with single arrays but mess it all with two or more dimension arrays.<br><br><span class="default">&lt;?php<br>$subject </span><span class="keyword">= array(</span><span class="string">"You should eat this"</span><span class="keyword">,</span><span class="string">"this"</span><span class="keyword">,</span><span class="string">"and this every day."</span><span class="keyword">);<br></span><span class="default">$search&nbsp; </span><span class="keyword">= </span><span class="string">"this"</span><span class="keyword">;<br></span><span class="default">$replace </span><span class="keyword">= </span><span class="string">"that"</span><span class="keyword">;<br></span><span class="default">$new&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">); </span><span class="comment">// Array ( [0] =&gt; You should eat that [1] =&gt; that [2] =&gt; and that every day. )<br><br></span><span class="keyword">echo </span><span class="string">"&lt;hr /&gt;"</span><span class="keyword">;<br><br></span><span class="default">$subject </span><span class="keyword">= array(array(</span><span class="string">"first"</span><span class="keyword">, </span><span class="string">"You should eat this"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ,array(</span><span class="string">"second"</span><span class="keyword">,</span><span class="string">"this"</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ,array(</span><span class="string">"third"</span><span class="keyword">, </span><span class="string">"and this every day."</span><span class="keyword">));<br></span><span class="default">$search&nbsp; </span><span class="keyword">= </span><span class="string">"this"</span><span class="keyword">;<br></span><span class="default">$replace </span><span class="keyword">= </span><span class="string">"that"</span><span class="keyword">;<br></span><span class="default">$new&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">); </span><span class="comment">// Array ( [0] =&gt; Array [1] =&gt; Array [2] =&gt; Array )<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73489">  
  <a class="name">
  <strong class="user"><em>kole</em></strong></a><div class="date" title="2007-02-25 05:48"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73489">
<div class="phpcode"><code><span class="html">
My input is MS Excel file but I want to save ‘,’,“,” as ',',",".<br><br>&nbsp; &nbsp; $badchr&nbsp; &nbsp; &nbsp; &nbsp; = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; "\xc2", // prefix 1<br>&nbsp; &nbsp; &nbsp; &nbsp; "\x80", // prefix 2<br>&nbsp; &nbsp; &nbsp; &nbsp; "\x98", // single quote opening<br>&nbsp; &nbsp; &nbsp; &nbsp; "\x99", // single quote closing<br>&nbsp; &nbsp; &nbsp; &nbsp; "\x8c", // double quote opening<br>&nbsp; &nbsp; &nbsp; &nbsp; "\x9d"&nbsp; // double quote closing<br>&nbsp; &nbsp; );<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; $goodchr&nbsp; &nbsp; = array('', '', '\'', '\'', '"', '"');<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; str_replace($badchr, $goodchr, $strFromExcelFile);<br><br>Works for me.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97374">  
  <a class="name">
  <strong class="user"><em>fleshgrinder at gmx dot at</em></strong></a><div class="date" title="2010-04-16 05:50"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97374">
<div class="phpcode"><code><span class="html">
Fast function to replace new lines from a given string. This is interesting to replace all new lines from e. g. a text formatted in HTML retrieved from database and printing it without the unnecessary new lines. This results in slightly faster rendering in the Web browser.<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Replace all linebreaks with one whitespace.<br> * <br> * @access public<br> * @param string $string<br> *&nbsp;&nbsp; The text to be processed.<br> * @return string<br> *&nbsp;&nbsp; The given text without any linebreaks.<br> */<br></span><span class="keyword">function </span><span class="default">replace_newline</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br>&nbsp; return (string)</span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87383">  
  <a class="name">
  <strong class="user"><em>nospam at nospam dot com</em></strong></a><div class="date" title="2008-12-02 02:55"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87383">
<div class="phpcode"><code><span class="html">
Replacement for str_replace in which a multiarray of numerically keyed data can be properly evaluated with the given template without having a search for 11 be mistaken for two 1's next to each other
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="keyword">function </span><span class="default">data_template</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">) {
<br>&nbsp; if (</span><span class="default">$template</span><span class="keyword">) { </span><span class="comment">// template string
<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$split </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">)) { </span><span class="comment">// each char as array member
<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$split </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) { </span><span class="comment">// each character
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">)) { </span><span class="comment">// test for digit
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$s </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// new digit sequence
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$digits</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] .= </span><span class="default">$char</span><span class="keyword">; </span><span class="comment">// store digit
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else { </span><span class="comment">// not a digit
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$s </span><span class="keyword">!= </span><span class="default">2</span><span class="keyword">) { </span><span class="comment">// new non-digit sequence
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strings</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] .= </span><span class="default">$char</span><span class="keyword">; </span><span class="comment">// store string
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">$i </span><span class="keyword">&amp;&amp; </span><span class="default">$input </span><span class="keyword">&amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)) { </span><span class="comment">// input data
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach (</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$sub</span><span class="keyword">) { </span><span class="comment">// each subarray
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; </span><span class="comment">// reset output
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt;= </span><span class="default">$i</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) { </span><span class="comment">// each number/string member
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$number </span><span class="keyword">= </span><span class="default">$digits</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]) { </span><span class="comment">// number
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$sub</span><span class="keyword">[</span><span class="default">$number</span><span class="keyword">]; </span><span class="comment">// add value from subarray to output
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else { </span><span class="comment">// string
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$strings</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]; </span><span class="comment">// add to output
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$a</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$a</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; } </span><span class="comment">// input
<br>&nbsp; &nbsp; </span><span class="keyword">} </span><span class="comment">// split
<br>&nbsp; </span><span class="keyword">} </span><span class="comment">// template
<br></span><span class="keyword">}
<br>
<br></span><span class="default">$input </span><span class="keyword">= array(array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'yellow'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'banana'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'fruit'</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'green'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'spinach'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'vegetable'</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'pink'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'salmon'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'fish'</span><span class="keyword">));
<br>
<br></span><span class="default">print_r </span><span class="keyword">(</span><span class="default">data_template</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'2: a 1, healthy 11'</span><span class="keyword">));
<br>
<br></span><span class="comment">/*
<br>Array
<br>(
<br>&nbsp; &nbsp; [0] =&gt; banana: a yellow, healthy fruit
<br>&nbsp; &nbsp; [1] =&gt; spinach: a green, healthy vegetable
<br>&nbsp; &nbsp; [2] =&gt; salmon: a pink, healthy fish
<br>)
<br>*/
<br>
<br>// str_replace would have wanted to output 'banana: a yellow, healthy yellowyellow
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>Not sure if this will help anyone but I wrote it for my application and thought I would share just in case</span>
</code></div>
  </div>
 </div>
  <div class="note" id="72344">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2007-01-15 01:42"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom72344">
<div class="phpcode"><code><span class="html">
Before spending hours searching your application why it makes UTF-8 encoding into some malformed something with str_replace, make sure you save your PHP file in UTF-8 (NO BOM).<br><br>This was at least one of my problems.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88569">  
  <a class="name">
  <strong class="user"><em>michael dot moussa at gmail dot com</em></strong></a><div class="date" title="2009-01-29 06:38"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88569">
<div class="phpcode"><code><span class="html">
As previous commentators mentioned, when $search contains values that occur earlier in $replace, str_replace will factor those previous replacements into the process rather than operating solely on the original string.&nbsp; This may produce unexpected output.<br><br>Example:<br><br><span class="default">&lt;?php<br>$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br><br>echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'FFFFFF'<br></span><span class="default">?&gt;<br></span><br>In the above code, the $search and $replace should replace each occurrence in the $subject with the next letter in the alphabet.&nbsp; The expected output for this sample is 'BCDEF'; however, the actual output is 'FFFFF'.<br><br>To more clearly illustrate this, consider the following example:<br><br><span class="default">&lt;?php<br>$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br><br>echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'F'<br></span><span class="default">?&gt;<br></span><br>Since 'A' is the only letter in the $search array that appears in $subject, one would expect the result to be 'B'; however, replacement number $n does *not* operate on $subject, it operates on $subject after the previous $n-1 replacements have been completed.<br><br>The following function utilizes array_combine and strtr to produce the expected output, and I believe it is the most efficient way to perform the desired string replacement without prior replacements affecting the final result.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br>* When using str_replace(...), values that did not exist in the original string (but were put there by previous<br>* replacements) will be replaced continuously.&nbsp; This string replacement function is designed replace the values<br>* in $search with those in $replace while not factoring in prior replacements.&nbsp; Note that this function will<br>* always look for the longest possible match first and then work its way down to individual characters.<br>*<br>* The "o" in "stro_replace" represents "original", indicating that the function operates only on the original string.<br>*<br>* @param array $search list of strings or characters that need to be replaced<br>* @param array $replace list of strings or characters that will replace the corresponding values in $search<br>* @param string $subject the string on which this operation is being performed<br>*<br>* @return string $subject with all substrings in the $search array replaced by the values in the $replace array<br>*/<br></span><span class="keyword">function </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return </span><span class="default">strtr</span><span class="keyword">( </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">) );<br>}<br><br></span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br><br>echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'BCDEF'<br></span><span class="default">?&gt;<br></span><br>Some other examples:<br><br><span class="default">&lt;?php<br>$search </span><span class="keyword">= array(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="string">'&amp;amp;'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'Hello &amp; goodbye!'</span><span class="keyword">;<br><br></span><span class="comment">// We want to replace the spaces with &amp;nbsp; and the ampersand with &amp;amp;<br></span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;amp;nbsp&amp;amp;&amp;amp;nbspgoodbye!" - wrong!<br><br></span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;nbsp;&amp;amp;&amp;nbsp;goodbye!" - correct!<br><br>/*<br>&nbsp; &nbsp; Note:&nbsp; Run the above code in the CLI or view source on your web browser - the replacement strings for stro_replace are HTML entities which the browser interprets.<br>*/<br></span><span class="default">?&gt;<br></span><br><span class="default">&lt;?php<br>$search </span><span class="keyword">= array(</span><span class="string">'ERICA'</span><span class="keyword">, </span><span class="string">'AMERICA'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'JON'</span><span class="keyword">, </span><span class="string">'PHP'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'MIKE AND ERICA LIKE AMERICA'</span><span class="keyword">;<br><br></span><span class="comment">// We want to replace the name "ERICA" with "JON" and the word "AMERICA" with "PHP"<br></span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE AMJON", which is not correct<br><br></span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE PHP", which is correct<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98511">  
  <a class="name">
  <strong class="user"><em>apmuthu at usa dot net</em></strong></a><div class="date" title="2010-06-19 12:31"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98511">
<div class="phpcode"><code><span class="html">
If we have a html template that contains placeholders in curly braces that need to be replaced in runtime, the following function will do it using str_replace:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">parse_template</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">) {<br></span><span class="comment">// example template variables {a} and {bc}<br>// example $data array<br>// $data = Array("a" =&gt; 'one', "bc" =&gt; 'two');<br>&nbsp; &nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br>&nbsp; &nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'{'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'}'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$q</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$q</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112442">  
  <a class="name">
  <strong class="user"><em>cmbecker69 at gmx dot de</em></strong></a><div class="date" title="2013-06-17 01:53"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112442">
<div class="phpcode"><code><span class="html">
To collapse multiple consecutive space characters to a single one, don't use str_replace() inside a loop--use preg_replace() instead for clarity and better performance:<br><br><span class="default">&lt;?php<br><br>$str </span><span class="keyword">= </span><span class="string">' This is&nbsp; &nbsp; a&nbsp; &nbsp; test&nbsp;&nbsp; '</span><span class="keyword">;<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102144">  
  <a class="name">
  <strong class="user"><em>mevdschee</em></strong></a><div class="date" title="2011-01-29 03:19"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102144">
<div class="phpcode"><code><span class="html">
say you want every "a" replaced by "abba" and every "b" replaced by "baab" in the string "ab" you do:
<br>
<br><span class="default">&lt;?php
<br>$search </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">);
<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">"abba"</span><span class="keyword">,</span><span class="string">"baab"</span><span class="keyword">);
<br>echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>that results in "abaabbaababaab" and not the expected "abbabaab"
<br>
<br>I wrote this little snippet to solve the replacements-in-replacement problem:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">search_replace</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$sql</span><span class="keyword">)
<br>{ </span><span class="default">$e </span><span class="keyword">= </span><span class="string">'/('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">,</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'preg_quote'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">)).</span><span class="string">')/'</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">);
<br>&nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">, function(</span><span class="default">$v</span><span class="keyword">) use (</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">) { return </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$v</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]; },</span><span class="default">$sql</span><span class="keyword">);
<br>}
<br>
<br>echo </span><span class="default">search_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>that results in the expected "abbabaab"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114415">  
  <a class="name">
  <strong class="user"><em>abc dot abc1 at vp dot pl</em></strong></a><div class="date" title="2014-02-18 08:59"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom114415">
<div class="phpcode"><code><span class="html">
I have:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">lacz_bd</span><span class="keyword">()<br>{&nbsp; <br>&nbsp; </span><span class="default">$db </span><span class="keyword">= new </span><span class="default">mysqli</span><span class="keyword">(</span><span class="string">'localhost'</span><span class="keyword">, </span><span class="string">'_admin'</span><span class="keyword">, </span><span class="string">'pass'</span><span class="keyword">, </span><span class="string">'db'</span><span class="keyword">); <br>&nbsp; <br>&nbsp; if (! </span><span class="default">$db</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">autocommit</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>&nbsp;&nbsp; return </span><span class="default">$db</span><span class="keyword">;<br>}<br></span><span class="comment">// dane do ramy pliku .xml<br></span><span class="default">$kanalRSS </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0" encoding="ISO-8859-2"?&gt;'</span><span class="keyword">;<br></span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;trovit&gt;'</span><span class="keyword">;<br></span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;ad&gt;'</span><span class="keyword">;<br><br></span><span class="comment">// połaczenie z bazą danych<br></span><span class="default">$db </span><span class="keyword">= </span><span class="default">lacz_bd</span><span class="keyword">();<br></span><span class="comment">//zapytanie określające dane ktore powinny byc pobrane z tabeli<br>// teraz pobierzmy wszystkie dane spelniajace warunek category_id=140<br></span><span class="default">$zapytanie </span><span class="keyword">= </span><span class="string">"SELECT * FROM announcements WHERE category_id in (140,141,142,143,144)"</span><span class="keyword">;<br></span><span class="default">$wynik </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="default">$zapytanie</span><span class="keyword">);<br></span><span class="default">$ile_znalezionych </span><span class="keyword">= </span><span class="default">$wynik</span><span class="keyword">-&gt;</span><span class="default">num_rows</span><span class="keyword">;<br><br>for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;</span><span class="default">$ile_znalezionych</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$wiersz </span><span class="keyword">= </span><span class="default">$wynik</span><span class="keyword">-&gt;</span><span class="default">fetch_assoc</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//usuwamy znaczniki html ze wszystkich danych z tabeli, polskie znaki, duze litery<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string_title </span><span class="keyword">= </span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_title'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string_url </span><span class="keyword">= </span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_title'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">= array(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">','</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="string">'/ą/'</span><span class="keyword">, </span><span class="string">'/Ą/'</span><span class="keyword">, </span><span class="string">'/ć/'</span><span class="keyword">, </span><span class="string">'/Ć/'</span><span class="keyword">, </span><span class="string">'/ę/'</span><span class="keyword">, </span><span class="string">'/Ę/'</span><span class="keyword">, </span><span class="string">'/ł/'</span><span class="keyword">, </span><span class="string">'/Ł/' </span><span class="keyword">,</span><span class="string">'/ń/'</span><span class="keyword">, </span><span class="string">'/Ń/'</span><span class="keyword">, </span><span class="string">'/ó/'</span><span class="keyword">, </span><span class="string">'/Ó/'</span><span class="keyword">, </span><span class="string">'/ś/'</span><span class="keyword">, </span><span class="string">'/Ś/'</span><span class="keyword">, </span><span class="string">'/ź/'</span><span class="keyword">, </span><span class="string">'/Ź/'</span><span class="keyword">, </span><span class="string">'/ż/'</span><span class="keyword">, </span><span class="string">'/Ż/'</span><span class="keyword">,);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replacement </span><span class="keyword">= array(</span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">,&nbsp; &nbsp;&nbsp; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">,);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string_url </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$string_url</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_content'</span><span class="keyword">] = </span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_content'</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//dodajemy nazwy rodzajow ogloszenia<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string_type </span><span class="keyword">= </span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_type'</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_type </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'4'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$_new_type </span><span class="keyword">= array(</span><span class="string">'Buy'</span><span class="keyword">, </span><span class="string">'Replace'</span><span class="keyword">, </span><span class="string">'For Rent'</span><span class="keyword">, </span><span class="string">'For Sale'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_type'</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$_type</span><span class="keyword">, </span><span class="default">$_new_type</span><span class="keyword">, </span><span class="default">$string_type</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br></span><span class="comment">//tutaj generujemy zawartosc pliku .xml, ktora pobierana jest z tabeli announcements<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;item&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;id&gt;&lt;![CDATA['</span><span class="keyword">.</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_id'</span><span class="keyword">].</span><span class="string">']]&gt;&lt;/id&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;url&gt;&lt;![CDATA[<a rel="nofollow" target="_blank">http://oglaszajtu.pl/ogloszenia/</a>'</span><span class="keyword">.</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_id'</span><span class="keyword">].</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$string_url</span><span class="keyword">.</span><span class="string">']]&gt;&lt;/url&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;title&gt;&lt;![CDATA['</span><span class="keyword">.</span><span class="default">$string_title</span><span class="keyword">.</span><span class="string">']]&gt;&lt;/title&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;type&gt;&lt;![CDATA['</span><span class="keyword">.</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_type'</span><span class="keyword">].</span><span class="string">']]&gt;&lt;/type&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;content&gt;&lt;![CDATA['</span><span class="keyword">.</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_content'</span><span class="keyword">].</span><span class="string">']]&gt;&lt;/content&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;date&gt;&lt;![CDATA['</span><span class="keyword">.</span><span class="default">$wiersz</span><span class="keyword">[</span><span class="string">'annoucement_date_added'</span><span class="keyword">].</span><span class="string">']]&gt;&lt;/date&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;/item&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">' &lt;/ad&gt;'</span><span class="keyword">;<br></span><span class="default">$kanalRSS </span><span class="keyword">.= </span><span class="string">'&lt;/trovit&gt;'</span><span class="keyword">;<br><br></span><span class="comment">//Zapisujemy wygenerowany kod XML do pliku moj_rss.xml<br></span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'trovit_oglaszajtu.xml'</span><span class="keyword">,</span><span class="string">'w'</span><span class="keyword">);<br></span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">,</span><span class="default">$kanalRSS</span><span class="keyword">);<br></span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>And one problem - ą,ó,ś, etc - don't delete<br><br>oglaszajtu.pl/moj_rss.php<br>oglaszajtu.pl/trovit_oglaszajtu.xml<br><br>:-(<br>Can anyone help me?<br>Thx<br>rel</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97904">  
  <a class="name">
  <strong class="user"><em>christian dot reinecke at web dot de</em></strong></a><div class="date" title="2010-05-14 12:06"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97904">
<div class="phpcode"><code><span class="html">
If you need to replace a string in another, but only once but still in all possible combinations (f.e. to replace "a" with "x" in "aba" to get array("xba", "abx")) you can use this function:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$with</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$splits </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$ix </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ix</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$previous </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$next&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$combine&nbsp; </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">) . </span><span class="default">$with </span><span class="keyword">. </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$next</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">, array(</span><span class="default">$combine</span><span class="keyword">), </span><span class="default">$next</span><span class="keyword">));<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>}<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"x"</span><span class="keyword">, </span><span class="string">"aba"</span><span class="keyword">)); </span><span class="comment">// result as mentioned above<br></span><span class="default">?&gt;<br></span>It may not be the best in performance, but it works.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112749">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2013-07-19 10:01"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112749">
<div class="phpcode"><code><span class="html">
@moostende at gmail dot com<br>If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you CAN use str_replace !<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; do {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"--"</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br>&nbsp; &nbsp; } while (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$str</span><span class="keyword">;<br>}<br>echo </span><span class="default">foo</span><span class="keyword">(</span><span class="string">"-aaa----b-c-----d--e---f"</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This outputs the following: <br>-aaa-b-c-d-e-f</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83996">  
  <a class="name">
  <strong class="user"><em>troy at troyonline dot com</em></strong></a><div class="date" title="2008-06-22 10:18"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83996">
<div class="phpcode"><code><span class="html">
Yet another deep replace function:<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">str_replace_deep</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">) and </span><span class="default">$value </span><span class="keyword">=</span><span class="default">str_replace_deep</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94073">  
  <a class="name">
  <strong class="user"><em>Decko</em></strong></a><div class="date" title="2009-10-15 01:41"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94073">
<div class="phpcode"><code><span class="html">
As mentioned earlier you should take the order into account when substituting multiple values.<br><br>However it is worth noticing that str_replace doesn't seem to re-read the string when doing single replacements. Take the following example.<br><br><span class="default">&lt;?php<br>&nbsp; $s </span><span class="keyword">= </span><span class="string">'/a/a/'</span><span class="keyword">;<br>&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/a/'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>You would expect the following.<br><br>First replacement '/a/a/' -&gt; '/a/'<br>Second replacement '/a/'-&gt;'/'<br><br>This is not the case, the actual result will be '/a/'.<br><br>To fix this, you will have to put str_replace in a while-loop.<br><br><span class="default">&lt;?php<br>&nbsp; $s </span><span class="keyword">= </span><span class="string">'/a/a/'</span><span class="keyword">;<br>&nbsp; while(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">'/a/'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br>&nbsp; &nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/a/'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">//eventually $s will == '/'<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91035">  
  <a class="name">
  <strong class="user"><em>moz667 at gmail dot com</em></strong></a><div class="date" title="2009-05-21 09:49"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91035">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br></span><span class="comment">/*
<br>This is a function for made recursive str_replaces in an array
<br>*/
<br></span><span class="keyword">function </span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, &amp;</span><span class="default">$data</span><span class="keyword">) {
<br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>}
<br>
<br></span><span class="default">$a </span><span class="keyword">= array();
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"ba"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"bb"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"da"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"db"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"dc"</span><span class="keyword">;
<br></span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'d'</span><span class="keyword">] = </span><span class="string">"dd"</span><span class="keyword">;
<br>
<br>echo </span><span class="string">"Before Replaces"</span><span class="keyword">;
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br>
<br></span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"XXXX"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);
<br>
<br>echo </span><span class="string">"After Replaces"</span><span class="keyword">;
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104774">  
  <a class="name">
  <strong class="user"><em>hakre</em></strong></a><div class="date" title="2011-07-06 08:08"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104774">
<div class="phpcode"><code><span class="html">
I was looking for a str_replace function supporting callbacks. As I didn't found one I wrote one my own. Works exactly like str_replace, but the replace parameter is a callback or an array of callbacks (instead of string/strings in str_replace). The callback function accepts two arguments, the string that is being replaced and the count of the replacement being done.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * str_ureplace<br> * <br> * str_replace like function with callback<br> * <br> * @param string|array search<br> * @param callback|array $replace<br> * @param string|array $subject<br> * @param int $replace_count<br> * @return string|array subject with replaces, FALSE on error.<br> */<br></span><span class="keyword">function </span><span class="default">str_ureplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, &amp;</span><span class="default">$replace_count </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$replace_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// validate input<br>&nbsp; &nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">((array) </span><span class="default">$search</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$searchCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br>&nbsp; &nbsp; if (!</span><span class="default">$searchCount</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; foreach(</span><span class="default">$search </span><span class="keyword">as &amp;</span><span class="default">$v</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$v </span><span class="keyword">= (string) </span><span class="default">$v</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; unset(</span><span class="default">$v</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$replaceSingle </span><span class="keyword">= </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$replaceSingle </span><span class="keyword">? array(</span><span class="default">$replace</span><span class="keyword">) : </span><span class="default">array_values</span><span class="keyword">((array) </span><span class="default">$replace</span><span class="keyword">);<br>&nbsp; &nbsp; foreach(</span><span class="default">$replace </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">=&gt;</span><span class="default">$callback</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'Unable to use %s (#%d) as a callback'</span><span class="keyword">, </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">), </span><span class="default">$index</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// search and replace<br>&nbsp; &nbsp; </span><span class="default">$subjectIsString </span><span class="keyword">= </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= (array) </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; &nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$haystack</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) continue;<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$search </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$needle</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replaceSingle </span><span class="keyword">&amp;&amp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while(</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replaceWith </span><span class="keyword">= isset(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$needle</span><span class="keyword">, ++</span><span class="default">$replace_count</span><span class="keyword">) : </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$replaceWith</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; unset(</span><span class="default">$haystack</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$subjectIsString </span><span class="keyword">? </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">) : </span><span class="default">$subject</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109365">  
  <a class="name">
  <strong class="user"><em>bfrohs at gmail dot com</em></strong></a><div class="date" title="2012-07-10 06:27"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109365">
<div class="phpcode"><code><span class="html">
This function implements $limit for str_replace(); is 100% backward compatible with str_replace(); uses str_replace() whenever possible (for performance reasons); supports arrays for $search, $replace, and $subject; and is fully commented.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Replace $limit occurences of the search string with the replacement<br> * @param mixed $search The value being searched for. An array may be used to<br> * designate multiple needles.<br> * @param mixed $replace The replacement value that replaces found search<br> * values. An array may be used to designate multiple replacements.<br> * @param mixed $subject The string or array being searched and replaced on. If<br> * subject is an array, then the search and replace is performed with every<br> * entry of subject, and the return value is an array as well. <br> * @param string $count If passed, this will be set to the number of<br> * replacements performed.<br> * @param int $limit The maximum possible replacements for each pattern in each<br> * subject string. Defaults to -1 (no limit).<br> * @return string This function returns a string with the replaced values.<br> */<br></span><span class="keyword">function </span><span class="default">str_replace_limit</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">){<br> </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br> </span><span class="comment">// Invalid $limit provided<br> </span><span class="keyword">if(!(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">strval</span><span class="keyword">(</span><span class="default">intval</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$limit</span><span class="keyword">))))){<br>&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting an '</span><span class="keyword">.<br>&nbsp; &nbsp; </span><span class="string">'integer'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> }<br> </span><span class="comment">// Invalid $limit provided<br> </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">&lt;-</span><span class="default">1</span><span class="keyword">){<br>&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting -1 or '</span><span class="keyword">.<br>&nbsp; &nbsp; </span><span class="string">'a positive integer'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> }<br> </span><span class="comment">// No replacements necessary<br> </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br>&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting -1 or '</span><span class="keyword">.<br>&nbsp; &nbsp; </span><span class="string">'a positive integer'</span><span class="keyword">, </span><span class="default">E_USER_NOTICE</span><span class="keyword">);<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> }<br> </span><span class="comment">// Use str_replace() when possible<br> </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===-</span><span class="default">1</span><span class="keyword">){<br>&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br> }<br> if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)){<br>&nbsp; </span><span class="comment">// Loop through $subject values<br>&nbsp; </span><span class="keyword">foreach(</span><span class="default">$subject </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$this_subject</span><span class="keyword">){<br>&nbsp;&nbsp; </span><span class="comment">// Skip values that are arrays<br>&nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this_subject</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="comment">// Call this function again<br>&nbsp; &nbsp; </span><span class="default">$this_function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$subject</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$this_function</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$this_subject</span><span class="keyword">, </span><span class="default">$this_count</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// Adjust $count<br>&nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">$this_count</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">// Adjust $limit<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">!=-</span><span class="default">1</span><span class="keyword">){<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$limit </span><span class="keyword">-= </span><span class="default">$this_count</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="comment">// Reached $limit<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br>&nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp; }<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> } elseif(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)){<br>&nbsp; </span><span class="comment">// Clear keys of $search<br>&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br>&nbsp; </span><span class="comment">// Clear keys of $replace<br>&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br>&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br>&nbsp; }<br>&nbsp; </span><span class="comment">// Loop through $search<br>&nbsp; </span><span class="keyword">foreach(</span><span class="default">$search </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$this_search</span><span class="keyword">){<br>&nbsp;&nbsp; </span><span class="comment">// Don't support multi-dimensional arrays<br>&nbsp;&nbsp; </span><span class="default">$this_search </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$this_search</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="comment">// If $replace is an array, use $replace[$key] if exists, else ''<br>&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br>&nbsp; &nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">)){<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br>&nbsp; &nbsp; } else {<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp;&nbsp; } else {<br>&nbsp; &nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; </span><span class="comment">// Call this function again for<br>&nbsp;&nbsp; </span><span class="default">$this_function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">$this_function</span><span class="keyword">(</span><span class="default">$this_search</span><span class="keyword">, </span><span class="default">$this_replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$this_count</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="comment">// Adjust $count<br>&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">$this_count</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="comment">// Adjust $limit<br>&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">!=-</span><span class="default">1</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$limit </span><span class="keyword">-= </span><span class="default">$this_count</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; </span><span class="comment">// Reached $limit<br>&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br>&nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>&nbsp; }<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> } else {<br>&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br>&nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br>&nbsp; </span><span class="comment">// Get position of first $search<br>&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br>&nbsp; </span><span class="comment">// Return $subject if $search cannot be found<br>&nbsp; </span><span class="keyword">if(</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">){<br>&nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; </span><span class="comment">// Get length of $search<br>&nbsp; </span><span class="default">$search_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br>&nbsp; </span><span class="comment">// Loop until $search cannot be found or $limit is reached<br>&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;((</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$limit</span><span class="keyword">)||(</span><span class="default">$limit</span><span class="keyword">===-</span><span class="default">1</span><span class="keyword">));</span><span class="default">$i</span><span class="keyword">++){<br>&nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$search_len</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="comment">// Increase $count<br>&nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br>&nbsp;&nbsp; </span><span class="comment">// Get location of next $search<br>&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="comment">// Break out of loop<br>&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">){<br>&nbsp; &nbsp; break;<br>&nbsp;&nbsp; }<br>&nbsp; }<br>&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br> }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98370">  
  <a class="name">
  <strong class="user"><em>cableray</em></strong></a><div class="date" title="2010-06-11 12:03"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98370">
<div class="phpcode"><code><span class="html">
If you wish to get around the 'gotcha', you could do something like this:<br><br><span class="default">&lt;?php<br><br>$find</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'p'</span><span class="keyword">, </span><span class="string">'^'</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'^'</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">, </span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'pear'</span><span class="keyword">);<br></span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="string">'a p'</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>The idea here is that you first replace the items you want with unique identifiers (that you are unlikely to find in the subject) and then search for those identifiers and then replace them.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85550">  
  <a class="name">
  <strong class="user"><em>paolo A T doppioclick D O T com</em></strong></a><div class="date" title="2008-09-05 04:15"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85550">
<div class="phpcode"><code><span class="html">
For PHP 4 &lt; 4.4.5 and PHP 5 &lt; 5.2.1 you may occur (like me) in this bug:<br><br><a rel="nofollow" target="_blank">http://www.php-security.org/MOPB/MOPB-39-2007.html</a></span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.str-replace.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:06:43 GMT -->


</body></html>