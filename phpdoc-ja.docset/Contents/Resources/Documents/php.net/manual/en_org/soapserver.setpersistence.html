<html><!-- Mirrored from php.net/manual/en/soapserver.setpersistence.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:54:16 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>SoapServer::setPersistence</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="soapserver.setpersistence.html">
 <link rel="shorturl" href="soapserver.setpersistence.html">
 <link rel="alternate" href="soapserver.setpersistence.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.soapserver.html">
 <link rel="prev" href="soapserver.setobject.html">
 <link rel="next" href="soapserver.soapserver.html">

 <link rel="alternate" href="soapserver.setpersistence.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/soapserver.setpersistence.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/soapserver.setpersistence.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/soapserver.setpersistence.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/soapserver.setpersistence.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/soapserver.setpersistence.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/soapserver.setpersistence.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/soapserver.setpersistence.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/soapserver.setpersistence.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/soapserver.setpersistence.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/soapserver.setpersistence.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.webservice.html">Web Services</a></li>      <li><a href="book.soap.html">SOAP</a></li>      <li><a href="class.soapserver.html">SoapServer</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="soapserver.setpersistence" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SoapServer::setPersistence</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.2)</p><p class="refpurpose"><span class="refname">SoapServer::setPersistence</span> â€” <span class="dc-title">Sets SoapServer persistence mode</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-soapserver.setpersistence-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>SoapServer::setPersistence</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code></span>
   )</div>

  <p class="para rdfs-comment"> 
   This function allows changing the persistence state of a SoapServer object between
   requests. This function allows saving data between requests utilizing PHP sessions.  This method
   only has an affect on a SoapServer after it has exported functions utilizing <span class="methodname"><a href="soapserver.setclass.html" class="methodname">SoapServer::setClass()</a></span>. 
  </p>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    </p><p class="para"> 
     The persistence of <strong><code>SOAP_PERSISTENCE_SESSION</code></strong> makes only
     objects of the given class persistent, but not the class static data. In this 
     case, use <var class="varname"><var class="varname">$this-&gt;bar</var></var> instead of self::$bar. 
    </p>
   <p></p></blockquote>
   <blockquote class="note"><p><strong class="note">Note</strong>: 
    </p><p class="para">
     <strong><code>SOAP_PERSISTENCE_SESSION</code></strong> serializes data on the class object between requests. In order to properly utilize resources (e.g. <a href="class.pdo.html" class="classname">PDO</a>), <a href="language.oop5.magic.html#object.wakeup" class="link">__wakeup()</a> and <a href="language.oop5.magic.html#object.sleep" class="link">__sleep()</a> magic methods should be utilized. 
    </p>  
  <p></p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-soapserver.setpersistence-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       One of the <em>SOAP_PERSISTENCE_XXX</em> constants.
      </p>
      <p class="para">
       <strong><code>SOAP_PERSISTENCE_REQUEST</code></strong> - SoapServer data does not persist between
       requests. This is the <em class="emphasis">default</em> behavior of any SoapServer
       object after setClass is called. 
      </p>
      <p class="para">
       <strong><code>SOAP_PERSISTENCE_SESSION</code></strong> - SoapServer data persists between requests.
       This is accomplished by serializing the SoapServer class data into
       <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION['_bogus_session_name']</a></var></var>, because of this 
       <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> must be called before this persistence mode is set. 
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-soapserver.setpersistence-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   No value is returned.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-soapserver.setpersistence-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5440">
    <p><strong>Example #1 <span class="function"><strong>SoapServer::setPersistence()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>&nbsp;</span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyFirstPersistentSoapServer&nbsp;</span><span style="color: #007700">{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$resource</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;(Such&nbsp;as&nbsp;PDO,&nbsp;mysqli,&nbsp;etc..)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;</span><span style="color: #0000BB">$myvar1</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$myvar2</span><span style="color: #007700">;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">__wakeup</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;We're&nbsp;calling&nbsp;our&nbsp;wakeup&nbsp;to&nbsp;handle&nbsp;starting&nbsp;our&nbsp;resource<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__wakeup</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">resource&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">CodeToStartOurResourceUp</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__sleep</span><span style="color: #007700">()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;We&nbsp;make&nbsp;sure&nbsp;to&nbsp;leave&nbsp;out&nbsp;$resource&nbsp;here,&nbsp;so&nbsp;our&nbsp;session&nbsp;data&nbsp;remains&nbsp;persistent<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Failure&nbsp;to&nbsp;do&nbsp;so&nbsp;will&nbsp;result&nbsp;in&nbsp;the&nbsp;failure&nbsp;during&nbsp;the&nbsp;unserialization&nbsp;of&nbsp;data<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;on&nbsp;the&nbsp;next&nbsp;request;&nbsp;thus,&nbsp;our&nbsp;SoapObject&nbsp;would&nbsp;not&nbsp;be&nbsp;persistent&nbsp;across&nbsp;requests.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">return&nbsp;array(</span><span style="color: #DD0000">'myvar1'</span><span style="color: #007700">,</span><span style="color: #DD0000">'myvar2'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;}<br><br>&nbsp;try&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$server&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SoapServer</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'uri'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REQUEST_URI'</span><span style="color: #007700">]));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setClass</span><span style="color: #007700">(</span><span style="color: #DD0000">'MyFirstPersistentSoapServer'</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;setPersistence&nbsp;MUST&nbsp;be&nbsp;called&nbsp;after&nbsp;setClass,&nbsp;because&nbsp;setClass's<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;behavior&nbsp;sets&nbsp;SESSION_PERSISTENCE_REQUEST&nbsp;upon&nbsp;enacting&nbsp;the&nbsp;method.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setPersistence</span><span style="color: #007700">(</span><span style="color: #0000BB">SOAP_PERSISTENCE_SESSION</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$server</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">handle</span><span style="color: #007700">();<br>&nbsp;}&nbsp;catch(</span><span style="color: #0000BB">SoapFault&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"SOAP&nbsp;ERROR:&nbsp;"</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">());<br>&nbsp;}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-soapserver.setpersistence-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="methodname"><a href="soapserver.setclass.html" class="methodname" rel="rdfs-seeAlso">SoapServer::setClass()</a> - Sets the class which handles SOAP requests</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="97104">  
  <a class="name">
  <strong class="user"><em>csnaitsirch at web dot de</em></strong></a><div class="date" title="2010-04-01 05:25"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97104">
<div class="phpcode"><code><span class="html">
I want to give one example for the order of commands if you want to use a class in persistence mode.<br><br><span class="default">&lt;?php<br></span><span class="comment">// 1. class definition or include<br></span><span class="keyword">class </span><span class="default">UserService<br></span><span class="keyword">{<br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">() { }<br>}<br><br></span><span class="comment">// 2. start the session after defining or including the class!!<br></span><span class="default">session_start</span><span class="keyword">();<br><br></span><span class="comment">// 3. instanciate the server<br></span><span class="default">$server </span><span class="keyword">= new </span><span class="default">SoapServer</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, array(</span><span class="string">"something"</span><span class="keyword">));<br><br></span><span class="comment">// 4. set the class to use<br></span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">setClass</span><span class="keyword">(</span><span class="string">'UserService'</span><span class="keyword">);<br><br></span><span class="comment">// 5. set persistance mode<br></span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">setPersistence</span><span class="keyword">(</span><span class="default">SOAP_PERSISTENCE_SESSION</span><span class="keyword">);<br><br></span><span class="comment">// 6. handle the request<br></span><span class="default">$server</span><span class="keyword">-&gt;</span><span class="default">handle</span><span class="keyword">();<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83539">  
  <a class="name">
  <strong class="user"><em>doug dot manley at gmail dot com</em></strong></a><div class="date" title="2008-05-30 12:54"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83539">
<div class="phpcode"><code><span class="html">
When using "SoapServer::setPersistence( SOAP_PERSISTENCE_SESSION )", you apparently MUST include the class that was used in "SoapServer::setClass()" BEFORE any "session_*" commands.<br><br>I found this out using "__autoload()" and a whole lot of "syslog()"; it kept failing to include the class that I was using for my soap server, but that class is ONLY ever referenced by the page itself, and even then only for the purposes of setting the class for the soap server; none of my code would ever cause it to autoload.&nbsp; The problem was that I was including my session-handling code first.<br><br>If the session gets started BEFORE the page defines the class definition, then persistence CANNOT happen.<br><br>The order should be:<br>1. Include the class for use with the soap server.<br>2. Start up your session.<br>3. Set up your soap server.<br>4. Handle your soap request.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82053">  
  <a class="name">
  <strong class="user"><em>boogiebug at gmail dot com</em></strong></a><div class="date" title="2008-03-25 07:40"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82053">
<div class="phpcode"><code><span class="html">
setPersistence works only for a single instance of service class.<br><br>To use multiple instance of services objects, you need to instantiate the classes into objects and use an undocumented SoapServer's method - setObject() to add the service object into the SoapServer object, and handle the service object persistence with $_SESSION instead.<br><br>For example:<br><br>$ServiceObjects = array()<br>$ServiceObjects[0] = new ServiceClass1();<br>$ServiceObjects[1] = new ServiceClass2();<br>$ServiceObjects[2] = new ServiceClass3();<br><br>$_SESSION['ServiceClass1'] = $ServiceObjects[0];<br>$_SESSION['ServiceClass2'] = $ServiceObjects[1];<br>$_SESSION['ServiceClass3'] = $ServiceObjects[2];<br><br>...<br><br>$Servers = array()<br>for ( $i = 0; $i &lt; count($ServiceObjects); i++)<br>{<br>&nbsp; $s = new SoapServer($wsdl);<br>&nbsp; $s-&gt;setObject($ServiceObject[$i]);<br>&nbsp; $Servers[] = $s;<br>}<br><br>...<br><br>$Server[$i]-&gt;handle()<br><br>...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="80638">  
  <a class="name">
  <strong class="user"><em>jan at pinna dot nl</em></strong></a><div class="date" title="2008-01-26 03:28"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom80638">
<div class="phpcode"><code><span class="html">
I found that using both modes (SOAP_PERSISTENCE_SESSION and SOAP_PERSISTENCE_REQUEST) cannot be used simultaniously. Because it didn't work at once, I started experimenting by using different settings and as stated below in the comments, "...also use SOAP_PERSISTENCE_REQUEST to save objects between requests" led me to think it was nessecary to use both modes. Well, it might for others, be but for me it turned out a day of freaking out ;) (trying all kinds of session stuff, etc etc).<br>Also, if persistence doesn't work, please check if session_start() is called somewhere in the script and try not to call it twice or whatsoever: it won't work...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56250">  
  <a class="name">
  <strong class="user"><em>jared at ws-db dot com</em></strong></a><div class="date" title="2005-08-28 12:07"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom56250">
<div class="phpcode"><code><span class="html">
I had some issues getting session persistence (SOAP_PERSISTENCE_SESSION) to work. I finally got it working after setting session.auto_start=0, and then only calling session_start() in the script containing the SoapServer. Maybe this is obvious, but took me a bit to figure it out.<br><br>I only tried it with session.use_cookies=1, so if the settings above don't work for you, make sure cookies are enabled, though it may work without the need for cookies.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="53326">  
  <a class="name">
  <strong class="user"><em>cperez1000 at hotmail dot com</em></strong></a><div class="date" title="2005-05-28 08:54"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom53326">
<div class="phpcode"><code><span class="html">
Always remember to place the "setPersistence" method before the handle method, otherwise it won't work.&nbsp; It sounds obvious, but it's still a very common mistake, since no errors are shown.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/soapserver.setpersistence.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:54:16 GMT -->


</body></html>