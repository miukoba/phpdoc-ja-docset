<html><!-- Mirrored from php.net/manual/en/function.preg-replace.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:08 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>preg_replace</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.preg-replace.html">
 <link rel="shorturl" href="http://php.net/preg-replace">
 <link rel="alternate" href="http://php.net/preg-replace" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.pcre.html">
 <link rel="prev" href="function.preg-replace-callback.html">
 <link rel="next" href="function.preg-split.html">

 <link rel="alternate" href="function.preg-replace.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.preg-replace.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.preg-replace.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.preg-replace.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.preg-replace.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.preg-replace.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.preg-replace.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.preg-replace.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.preg-replace.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.preg-replace.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.preg-replace.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.pcre.html">PCRE</a></li>      <li><a href="ref.pcre.html">PCRE Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.preg-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">preg_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">preg_replace</span> — <span class="dc-title">Perform a regular expression search and replace</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.preg-replace-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>preg_replace</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replacement</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$limit</code><span class="initializer"> = -1</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&amp;$count</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Searches <code class="parameter">subject</code> for matches to
   <code class="parameter">pattern</code> and replaces them with
   <code class="parameter">replacement</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.preg-replace-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       The pattern to search for. It can be either a string or an array with
       strings.
      </p>
      <p class="para">
       Several <a href="reference.pcre.pattern.modifiers.html" class="link">PCRE modifiers</a>
       are also available, including the deprecated '<em>e</em>'
       (PREG_REPLACE_EVAL), which is specific to this function.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">replacement</code></dt>

     <dd>

      <p class="para">
       The string or an array with strings to replace. If this parameter is a
       string and the <code class="parameter">pattern</code> parameter is an array,
       all patterns will be replaced by that string. If both
       <code class="parameter">pattern</code> and <code class="parameter">replacement</code>
       parameters are arrays, each <code class="parameter">pattern</code> will be
       replaced by the <code class="parameter">replacement</code> counterpart. If
       there are fewer elements in the <code class="parameter">replacement</code>
       array than in the <code class="parameter">pattern</code> array, any extra
       <code class="parameter">pattern</code>s will be replaced by an empty string.
      </p>
      <p class="para">
       <code class="parameter">replacement</code> may contain references of the form
       <em>\\<span class="replaceable">n</span></em> or (since PHP 4.0.4)
       <em>$<span class="replaceable">n</span></em>, with the latter form
       being the preferred one. Every such reference will be replaced by the text
       captured by the <span class="replaceable">n</span>'th parenthesized pattern.
       <span class="replaceable">n</span> can be from 0 to 99, and
       <em>\\0</em> or <em>$0</em> refers to the text matched
       by the whole pattern. Opening parentheses are counted from left to right
       (starting from 1) to obtain the number of the capturing subpattern.
       To use backslash in replacement, it must be doubled
       (<em>"\\\\"</em> PHP string).
      </p>
      <p class="para">
       When working with a replacement pattern where a backreference is 
       immediately followed by another number (i.e.: placing a literal number
       immediately after a matched pattern), you cannot use the familiar 
       <em>\\1</em> notation for your backreference.  
       <em>\\11</em>, for example, would confuse
       <span class="function"><strong>preg_replace()</strong></span> since it does not know whether you
       want the <em>\\1</em> backreference followed by a literal 
       <em>1</em>, or the <em>\\11</em> backreference
       followed by nothing.  In this case the solution is to use 
       <em>\${1}1</em>.  This creates an isolated 
       <em>$1</em> backreference, leaving the <em>1</em>
       as a literal.
      </p>
      <p class="para">
       When using the deprecated <em>e</em> modifier, this function escapes
       some characters (namely <em>'</em>, <em>"</em>,
       <em>\</em> and NULL) in the strings that replace the
       backreferences. This is done to ensure that no syntax errors arise
       from backreference usage with either single or double quotes (e.g.
       <em>'strlen(\'$1\')+strlen("$2")'</em>). Make sure you are
       aware of PHP's <a href="language.types.string.html" class="link">string
       syntax</a> to know exactly how the interpreted string will look.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       The string or an array with strings to search and replace.
      </p>
      <p class="para">
       If <code class="parameter">subject</code> is an array, then the search and
       replace is performed on every entry of <code class="parameter">subject</code>,
       and the return value is an array as well.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">limit</code></dt>

     <dd>

      <p class="para">
       The maximum possible replacements for each pattern in each
       <code class="parameter">subject</code> string. Defaults to
       <em>-1</em> (no limit).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">count</code></dt>

     <dd>

      <p class="para">
       If specified, this variable will be filled with the number of
       replacements done.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.preg-replace-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   <span class="function"><strong>preg_replace()</strong></span> returns an array if the
   <code class="parameter">subject</code> parameter is an array, or a string
   otherwise.
  </p>
  <p class="para">
   If matches are found, the new <code class="parameter">subject</code> will
   be returned, otherwise <code class="parameter">subject</code> will be
   returned unchanged or <strong><code>NULL</code></strong> if an error occurred.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.preg-replace-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   An <strong><code>E_DEPRECATED</code></strong> level error is emitted when
   passing in the "\e" modifier.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.preg-replace-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.5.0</td>
       <td>
        The <em>/e</em> modifier is deprecated. Use
        <span class="function"><a href="function.preg-replace-callback.html" class="function">preg_replace_callback()</a></span> instead. See the
        <a href="reference.pcre.pattern.modifiers.html#reference.pcre.pattern.modifiers.eval" class="link">PREG_REPLACE_EVAL</a>
        documentation for additional information about security risks.
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        Added the <code class="parameter">count</code> parameter
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.preg-replace-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4914">
    <p><strong>Example #1 Using backreferences followed by numeric literals</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'April&nbsp;15,&nbsp;2003'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pattern&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/(\w+)&nbsp;(\d+),&nbsp;(\d+)/i'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$replacement&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'${1}1,$3'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$pattern</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacement</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>April1,2003
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4915">
    <p><strong>Example #2 Using indexed arrays with <span class="function"><strong>preg_replace()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'The&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$patterns&nbsp;</span><span style="color: #007700">=&nbsp;array();<br></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/quick/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/brown/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$patterns</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'/fox/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$replacements&nbsp;</span><span style="color: #007700">=&nbsp;array();<br></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'bear'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'black'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$replacements</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'slow'</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>The bear black slow jumped over the lazy dog.
</pre></div>
    </div>
    <div class="example-contents"><p>
     By ksorting patterns and replacements, we should get what we wanted.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>ksort</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">);<br></span><span style="color: #0000BB">ksort</span><span style="color: #007700">(</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replacements</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$string</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>The slow black bear jumped over the lazy dog.
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4916">
    <p><strong>Example #3 Replacing several values</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$patterns&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">'/(19|20)(\d{2})-(\d{1,2})-(\d{1,2})/'</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/^\s*{(\w+)}\s*=/'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(</span><span style="color: #DD0000">'\3/\4/\1\2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'$\1&nbsp;='</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$patterns</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'{startDate}&nbsp;=&nbsp;1999-5-27'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>$startDate = 5/27/1999
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4917">
    <p><strong>Example #4 Strip whitespace</strong></p>
    <div class="example-contents"><p>
     This example strips excess whitespace from a string.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo&nbsp;&nbsp;&nbsp;o'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">'/\s\s+/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'&nbsp;'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br></span><span style="color: #FF8000">//&nbsp;This&nbsp;will&nbsp;be&nbsp;'foo&nbsp;o'&nbsp;now<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4918">
    <p><strong>Example #5 Using the <code class="parameter">count</code> parameter</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$count&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br><br>echo&nbsp;</span><span style="color: #0000BB">preg_replace</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'/\d/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/\s/'</span><span style="color: #007700">),&nbsp;</span><span style="color: #DD0000">'*'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'xp&nbsp;4&nbsp;to'</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//3<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>xp***to
3
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.preg-replace-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    When using arrays with <code class="parameter">pattern</code> and
    <code class="parameter">replacement</code>, the keys are processed in the order
    they appear in the array. This is <em class="emphasis">not necessarily</em> the
    same as the numerical index order. If you use indexes to identify which
    <code class="parameter">pattern</code> should be replaced by which
    <code class="parameter">replacement</code>, you should perform a
    <span class="function"><a href="function.ksort.html" class="function">ksort()</a></span> on each array prior to calling
    <span class="function"><strong>preg_replace()</strong></span>.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.preg-replace-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><a href="pcre.pattern.html" class="link">PCRE Patterns</a></li>
    <li class="member"><span class="function"><a href="function.preg-filter.html" class="function" rel="rdfs-seeAlso">preg_filter()</a> - Perform a regular expression search and replace</span></li>
    <li class="member"><span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - Perform a regular expression match</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace-callback.html" class="function" rel="rdfs-seeAlso">preg_replace_callback()</a> - Perform a regular expression search and replace using a callback</span></li>
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - Split string by a regular expression</span></li>
    <li class="member"><span class="function"><a href="function.preg-last-error.html" class="function" rel="rdfs-seeAlso">preg_last_error()</a> - Returns the error code of the last PCRE regex execution</span></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="89364">  
  <a class="name">
  <strong class="user"><em>arkani at iol dot pt</em></strong></a><div class="date" title="2009-03-04 11:00"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89364">
<div class="phpcode"><code><span class="html">
Because i search a lot 4 this:<br><br>The following should be escaped if you are trying to match that character<br><br>\ ^ . $ | ( ) [ ]<br>* + ? { } ,<br><br>Special Character Definitions<br>\ Quote the next metacharacter<br>^ Match the beginning of the line<br>. Match any character (except newline)<br>$ Match the end of the line (or before newline at the end)<br>| Alternation<br>() Grouping<br>[] Character class<br>* Match 0 or more times<br>+ Match 1 or more times<br>? Match 1 or 0 times<br>{n} Match exactly n times<br>{n,} Match at least n times<br>{n,m} Match at least n but not more than m times<br>More Special Character Stuff<br>\t tab (HT, TAB)<br>\n newline (LF, NL)<br>\r return (CR)<br>\f form feed (FF)<br>\a alarm (bell) (BEL)<br>\e escape (think troff) (ESC)<br>\033 octal char (think of a PDP-11)<br>\x1B hex char<br>\c[ control char<br>\l lowercase next char (think vi)<br>\u uppercase next char (think vi)<br>\L lowercase till \E (think vi)<br>\U uppercase till \E (think vi)<br>\E end case modification (think vi)<br>\Q quote (disable) pattern metacharacters till \E<br>Even More Special Characters<br>\w Match a "word" character (alphanumeric plus "_")<br>\W Match a non-word character<br>\s Match a whitespace character<br>\S Match a non-whitespace character<br>\d Match a digit character<br>\D Match a non-digit character<br>\b Match a word boundary<br>\B Match a non-(word boundary)<br>\A Match only at beginning of string<br>\Z Match only at end of string, or before newline at the end<br>\z Match only at end of string<br>\G Match only where previous m//g left off (works only with /g)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106981">  
  <a class="name">
  <strong class="user"><em>denis_truffaut a t hotmail d o t com</em></strong></a><div class="date" title="2011-12-23 05:11"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106981">
<div class="phpcode"><code><span class="html">
If you want to catch characters, as well european, russian, chinese, japanese, korean of whatever, just :<br>- use mb_internal_encoding('UTF-8');<br>- use preg_replace('`...`u', '...', $string) with the u (unicode) modifier<br><br>For further information, the complete list of preg_* modifiers could be found at :<br><a rel="nofollow" target="_blank">http://php.net/manual/en/reference.pcre.pattern.modifiers.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="96586">  
  <a class="name">
  <strong class="user"><em>hello at weblap dot ro</em></strong></a><div class="date" title="2010-03-06 04:10"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96586">
<div class="phpcode"><code><span class="html">
Post slug generator, for creating clean urls from titles.
<br>It works with many languages.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">remove_accent</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">'À'</span><span class="keyword">, </span><span class="string">'Á'</span><span class="keyword">, </span><span class="string">'Â'</span><span class="keyword">, </span><span class="string">'Ã'</span><span class="keyword">, </span><span class="string">'Ä'</span><span class="keyword">, </span><span class="string">'Å'</span><span class="keyword">, </span><span class="string">'Æ'</span><span class="keyword">, </span><span class="string">'Ç'</span><span class="keyword">, </span><span class="string">'È'</span><span class="keyword">, </span><span class="string">'É'</span><span class="keyword">, </span><span class="string">'Ê'</span><span class="keyword">, </span><span class="string">'Ë'</span><span class="keyword">, </span><span class="string">'Ì'</span><span class="keyword">, </span><span class="string">'Í'</span><span class="keyword">, </span><span class="string">'Î'</span><span class="keyword">, </span><span class="string">'Ï'</span><span class="keyword">, </span><span class="string">'Ð'</span><span class="keyword">, </span><span class="string">'Ñ'</span><span class="keyword">, </span><span class="string">'Ò'</span><span class="keyword">, </span><span class="string">'Ó'</span><span class="keyword">, </span><span class="string">'Ô'</span><span class="keyword">, </span><span class="string">'Õ'</span><span class="keyword">, </span><span class="string">'Ö'</span><span class="keyword">, </span><span class="string">'Ø'</span><span class="keyword">, </span><span class="string">'Ù'</span><span class="keyword">, </span><span class="string">'Ú'</span><span class="keyword">, </span><span class="string">'Û'</span><span class="keyword">, </span><span class="string">'Ü'</span><span class="keyword">, </span><span class="string">'Ý'</span><span class="keyword">, </span><span class="string">'ß'</span><span class="keyword">, </span><span class="string">'à'</span><span class="keyword">, </span><span class="string">'á'</span><span class="keyword">, </span><span class="string">'â'</span><span class="keyword">, </span><span class="string">'ã'</span><span class="keyword">, </span><span class="string">'ä'</span><span class="keyword">, </span><span class="string">'å'</span><span class="keyword">, </span><span class="string">'æ'</span><span class="keyword">, </span><span class="string">'ç'</span><span class="keyword">, </span><span class="string">'è'</span><span class="keyword">, </span><span class="string">'é'</span><span class="keyword">, </span><span class="string">'ê'</span><span class="keyword">, </span><span class="string">'ë'</span><span class="keyword">, </span><span class="string">'ì'</span><span class="keyword">, </span><span class="string">'í'</span><span class="keyword">, </span><span class="string">'î'</span><span class="keyword">, </span><span class="string">'ï'</span><span class="keyword">, </span><span class="string">'ñ'</span><span class="keyword">, </span><span class="string">'ò'</span><span class="keyword">, </span><span class="string">'ó'</span><span class="keyword">, </span><span class="string">'ô'</span><span class="keyword">, </span><span class="string">'õ'</span><span class="keyword">, </span><span class="string">'ö'</span><span class="keyword">, </span><span class="string">'ø'</span><span class="keyword">, </span><span class="string">'ù'</span><span class="keyword">, </span><span class="string">'ú'</span><span class="keyword">, </span><span class="string">'û'</span><span class="keyword">, </span><span class="string">'ü'</span><span class="keyword">, </span><span class="string">'ý'</span><span class="keyword">, </span><span class="string">'ÿ'</span><span class="keyword">, </span><span class="string">'Ā'</span><span class="keyword">, </span><span class="string">'ā'</span><span class="keyword">, </span><span class="string">'Ă'</span><span class="keyword">, </span><span class="string">'ă'</span><span class="keyword">, </span><span class="string">'Ą'</span><span class="keyword">, </span><span class="string">'ą'</span><span class="keyword">, </span><span class="string">'Ć'</span><span class="keyword">, </span><span class="string">'ć'</span><span class="keyword">, </span><span class="string">'Ĉ'</span><span class="keyword">, </span><span class="string">'ĉ'</span><span class="keyword">, </span><span class="string">'Ċ'</span><span class="keyword">, </span><span class="string">'ċ'</span><span class="keyword">, </span><span class="string">'Č'</span><span class="keyword">, </span><span class="string">'č'</span><span class="keyword">, </span><span class="string">'Ď'</span><span class="keyword">, </span><span class="string">'ď'</span><span class="keyword">, </span><span class="string">'Đ'</span><span class="keyword">, </span><span class="string">'đ'</span><span class="keyword">, </span><span class="string">'Ē'</span><span class="keyword">, </span><span class="string">'ē'</span><span class="keyword">, </span><span class="string">'Ĕ'</span><span class="keyword">, </span><span class="string">'ĕ'</span><span class="keyword">, </span><span class="string">'Ė'</span><span class="keyword">, </span><span class="string">'ė'</span><span class="keyword">, </span><span class="string">'Ę'</span><span class="keyword">, </span><span class="string">'ę'</span><span class="keyword">, </span><span class="string">'Ě'</span><span class="keyword">, </span><span class="string">'ě'</span><span class="keyword">, </span><span class="string">'Ĝ'</span><span class="keyword">, </span><span class="string">'ĝ'</span><span class="keyword">, </span><span class="string">'Ğ'</span><span class="keyword">, </span><span class="string">'ğ'</span><span class="keyword">, </span><span class="string">'Ġ'</span><span class="keyword">, </span><span class="string">'ġ'</span><span class="keyword">, </span><span class="string">'Ģ'</span><span class="keyword">, </span><span class="string">'ģ'</span><span class="keyword">, </span><span class="string">'Ĥ'</span><span class="keyword">, </span><span class="string">'ĥ'</span><span class="keyword">, </span><span class="string">'Ħ'</span><span class="keyword">, </span><span class="string">'ħ'</span><span class="keyword">, </span><span class="string">'Ĩ'</span><span class="keyword">, </span><span class="string">'ĩ'</span><span class="keyword">, </span><span class="string">'Ī'</span><span class="keyword">, </span><span class="string">'ī'</span><span class="keyword">, </span><span class="string">'Ĭ'</span><span class="keyword">, </span><span class="string">'ĭ'</span><span class="keyword">, </span><span class="string">'Į'</span><span class="keyword">, </span><span class="string">'į'</span><span class="keyword">, </span><span class="string">'İ'</span><span class="keyword">, </span><span class="string">'ı'</span><span class="keyword">, </span><span class="string">'Ĳ'</span><span class="keyword">, </span><span class="string">'ĳ'</span><span class="keyword">, </span><span class="string">'Ĵ'</span><span class="keyword">, </span><span class="string">'ĵ'</span><span class="keyword">, </span><span class="string">'Ķ'</span><span class="keyword">, </span><span class="string">'ķ'</span><span class="keyword">, </span><span class="string">'Ĺ'</span><span class="keyword">, </span><span class="string">'ĺ'</span><span class="keyword">, </span><span class="string">'Ļ'</span><span class="keyword">, </span><span class="string">'ļ'</span><span class="keyword">, </span><span class="string">'Ľ'</span><span class="keyword">, </span><span class="string">'ľ'</span><span class="keyword">, </span><span class="string">'Ŀ'</span><span class="keyword">, </span><span class="string">'ŀ'</span><span class="keyword">, </span><span class="string">'Ł'</span><span class="keyword">, </span><span class="string">'ł'</span><span class="keyword">, </span><span class="string">'Ń'</span><span class="keyword">, </span><span class="string">'ń'</span><span class="keyword">, </span><span class="string">'Ņ'</span><span class="keyword">, </span><span class="string">'ņ'</span><span class="keyword">, </span><span class="string">'Ň'</span><span class="keyword">, </span><span class="string">'ň'</span><span class="keyword">, </span><span class="string">'ŉ'</span><span class="keyword">, </span><span class="string">'Ō'</span><span class="keyword">, </span><span class="string">'ō'</span><span class="keyword">, </span><span class="string">'Ŏ'</span><span class="keyword">, </span><span class="string">'ŏ'</span><span class="keyword">, </span><span class="string">'Ő'</span><span class="keyword">, </span><span class="string">'ő'</span><span class="keyword">, </span><span class="string">'Œ'</span><span class="keyword">, </span><span class="string">'œ'</span><span class="keyword">, </span><span class="string">'Ŕ'</span><span class="keyword">, </span><span class="string">'ŕ'</span><span class="keyword">, </span><span class="string">'Ŗ'</span><span class="keyword">, </span><span class="string">'ŗ'</span><span class="keyword">, </span><span class="string">'Ř'</span><span class="keyword">, </span><span class="string">'ř'</span><span class="keyword">, </span><span class="string">'Ś'</span><span class="keyword">, </span><span class="string">'ś'</span><span class="keyword">, </span><span class="string">'Ŝ'</span><span class="keyword">, </span><span class="string">'ŝ'</span><span class="keyword">, </span><span class="string">'Ş'</span><span class="keyword">, </span><span class="string">'ş'</span><span class="keyword">, </span><span class="string">'Š'</span><span class="keyword">, </span><span class="string">'š'</span><span class="keyword">, </span><span class="string">'Ţ'</span><span class="keyword">, </span><span class="string">'ţ'</span><span class="keyword">, </span><span class="string">'Ť'</span><span class="keyword">, </span><span class="string">'ť'</span><span class="keyword">, </span><span class="string">'Ŧ'</span><span class="keyword">, </span><span class="string">'ŧ'</span><span class="keyword">, </span><span class="string">'Ũ'</span><span class="keyword">, </span><span class="string">'ũ'</span><span class="keyword">, </span><span class="string">'Ū'</span><span class="keyword">, </span><span class="string">'ū'</span><span class="keyword">, </span><span class="string">'Ŭ'</span><span class="keyword">, </span><span class="string">'ŭ'</span><span class="keyword">, </span><span class="string">'Ů'</span><span class="keyword">, </span><span class="string">'ů'</span><span class="keyword">, </span><span class="string">'Ű'</span><span class="keyword">, </span><span class="string">'ű'</span><span class="keyword">, </span><span class="string">'Ų'</span><span class="keyword">, </span><span class="string">'ų'</span><span class="keyword">, </span><span class="string">'Ŵ'</span><span class="keyword">, </span><span class="string">'ŵ'</span><span class="keyword">, </span><span class="string">'Ŷ'</span><span class="keyword">, </span><span class="string">'ŷ'</span><span class="keyword">, </span><span class="string">'Ÿ'</span><span class="keyword">, </span><span class="string">'Ź'</span><span class="keyword">, </span><span class="string">'ź'</span><span class="keyword">, </span><span class="string">'Ż'</span><span class="keyword">, </span><span class="string">'ż'</span><span class="keyword">, </span><span class="string">'Ž'</span><span class="keyword">, </span><span class="string">'ž'</span><span class="keyword">, </span><span class="string">'ſ'</span><span class="keyword">, </span><span class="string">'ƒ'</span><span class="keyword">, </span><span class="string">'Ơ'</span><span class="keyword">, </span><span class="string">'ơ'</span><span class="keyword">, </span><span class="string">'Ư'</span><span class="keyword">, </span><span class="string">'ư'</span><span class="keyword">, </span><span class="string">'Ǎ'</span><span class="keyword">, </span><span class="string">'ǎ'</span><span class="keyword">, </span><span class="string">'Ǐ'</span><span class="keyword">, </span><span class="string">'ǐ'</span><span class="keyword">, </span><span class="string">'Ǒ'</span><span class="keyword">, </span><span class="string">'ǒ'</span><span class="keyword">, </span><span class="string">'Ǔ'</span><span class="keyword">, </span><span class="string">'ǔ'</span><span class="keyword">, </span><span class="string">'Ǖ'</span><span class="keyword">, </span><span class="string">'ǖ'</span><span class="keyword">, </span><span class="string">'Ǘ'</span><span class="keyword">, </span><span class="string">'ǘ'</span><span class="keyword">, </span><span class="string">'Ǚ'</span><span class="keyword">, </span><span class="string">'ǚ'</span><span class="keyword">, </span><span class="string">'Ǜ'</span><span class="keyword">, </span><span class="string">'ǜ'</span><span class="keyword">, </span><span class="string">'Ǻ'</span><span class="keyword">, </span><span class="string">'ǻ'</span><span class="keyword">, </span><span class="string">'Ǽ'</span><span class="keyword">, </span><span class="string">'ǽ'</span><span class="keyword">, </span><span class="string">'Ǿ'</span><span class="keyword">, </span><span class="string">'ǿ'</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'AE'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'ae'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'G'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'H'</span><span class="keyword">, </span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'IJ'</span><span class="keyword">, </span><span class="string">'ij'</span><span class="keyword">, </span><span class="string">'J'</span><span class="keyword">, </span><span class="string">'j'</span><span class="keyword">, </span><span class="string">'K'</span><span class="keyword">, </span><span class="string">'k'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'L'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'N'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'OE'</span><span class="keyword">, </span><span class="string">'oe'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'R'</span><span class="keyword">, </span><span class="string">'r'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'S'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'W'</span><span class="keyword">, </span><span class="string">'w'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'Y'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'Z'</span><span class="keyword">, </span><span class="string">'z'</span><span class="keyword">, </span><span class="string">'s'</span><span class="keyword">, </span><span class="string">'f'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'I'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'U'</span><span class="keyword">, </span><span class="string">'u'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'AE'</span><span class="keyword">, </span><span class="string">'ae'</span><span class="keyword">, </span><span class="string">'O'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">);
<br>&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);
<br>}
<br>
<br>function </span><span class="default">post_slug</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)
<br>{
<br>&nbsp; return </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(array(</span><span class="string">'/[^a-zA-Z0-9 -]/'</span><span class="keyword">, </span><span class="string">'/[ -]+/'</span><span class="keyword">, </span><span class="string">'/^-|-$/'</span><span class="keyword">), 
<br>&nbsp; array(</span><span class="string">''</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">), </span><span class="default">remove_accent</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)));
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Example: post_slug(' -Lo#&amp;@rem&nbsp; IPSUM //dolor-/sit - amet-/-consectetur! 12 -- ')
<br>will output: lorem-ipsum-dolor-sit-amet-consectetur-12</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84799">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2008-07-30 09:21"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84799">
<div class="phpcode"><code><span class="html">
People using functions like scandir with user input and protecting against "../" by using preg_replace make sure you run ir recursivly untill preg_match no-long finds it, because if you don't the following can happen.<br><br>If a user gives the path:<br>"./....//....//....//....//....//....//....//"<br>then your script detects every "../" and removes them leaving:<br>"./../../../../../../../"<br>Which is proberly going back enough times to show root.<br><br>I just found this vunrability in an old script of mine, which was written several years ago.<br><br>Always do:<br><span class="default">&lt;?php<br></span><span class="keyword">while( </span><span class="default">preg_match</span><span class="keyword">( [</span><span class="default">expression</span><span class="keyword">], </span><span class="default">$input </span><span class="keyword">) )<br>{<br>&nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( [</span><span class="default">expression</span><span class="keyword">], </span><span class="string">""</span><span class="keyword">, </span><span class="default">$input </span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112400">  
  <a class="name">
  <strong class="user"><em>spamthishard at wtriple dot com</em></strong></a><div class="date" title="2013-06-12 08:02"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112400">
<div class="phpcode"><code><span class="html">
If you want to replace only the n-th occurrence of $pattern, you can use this function:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">preg_replace_nth</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; function(</span><span class="default">$found</span><span class="keyword">) use (&amp;</span><span class="default">$pattern</span><span class="keyword">, &amp;</span><span class="default">$replacement</span><span class="keyword">, &amp;</span><span class="default">$nth</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nth</span><span class="keyword">--;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$nth</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">) return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">) );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }, </span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$nth&nbsp; </span><span class="keyword">);<br>}<br><br>echo </span><span class="default">preg_replace_nth</span><span class="keyword">(</span><span class="string">"/(\w+)\|/"</span><span class="keyword">, </span><span class="string">'${1} is the 4th|'</span><span class="keyword">, </span><span class="string">"|aa|b|cc|dd|e|ff|gg|kkk|"</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>this outputs |aa|b|cc|dd is the 4th|e|ff|gg|kkk| <br>backreferences are accepted in $replacement</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84285">  
  <a class="name">
  <strong class="user"><em>akniep at rayo dot info</em></strong></a><div class="date" title="2008-07-07 03:22"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84285">
<div class="phpcode"><code><span class="html">
preg_replace (and other preg-functions) return null instead of a string when encountering problems you probably did not think about!<br>-------------------------<br><br>It may not be obvious to everybody that the function returns NULL if an error of any kind occurres. An error I happen to stumple about quite often was the back-tracking-limit:<br><a rel="nofollow" target="_blank">http://de.php.net/manual/de/pcre.configuration.php</a><br>#ini.pcre.backtrack-limit<br><br>When working with HTML-documents and their parsing it happens that you encounter documents that have a length of over 100.000 characters and that may lead to certain regular-expressions to fail due the back-tracking-limit of above.<br><br>A regular-expression that is ungreedy ("U", <a rel="nofollow" target="_blank">http://de.php.net/manual/de/reference.pcre.pattern.modifiers.php</a>) often does the job, but still: sometimes you just need a greedy regular expression working on long strings ...<br><br>Since, an unhandled return-value of NULL usually creates a consecutive error in the application with unwanted and unforeseen consequences, I found the following solution to be quite helpful and at least save the application from crashing:<br><br><span class="default">&lt;?php<br><br>$string_after </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/some_regexp/'</span><span class="keyword">, </span><span class="string">"replacement"</span><span class="keyword">, </span><span class="default">$string_before </span><span class="keyword">);<br><br></span><span class="comment">// if some error occurred we go on working with the unchanged original string<br></span><span class="keyword">if (</span><span class="default">PREG_NO_ERROR </span><span class="keyword">!== </span><span class="default">preg_last_error</span><span class="keyword">())<br>{<br>&nbsp; &nbsp; </span><span class="default">$string_after </span><span class="keyword">= </span><span class="default">$string_before</span><span class="keyword">;<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// put email-sending or a log-message here<br></span><span class="keyword">} </span><span class="comment">//if<br><br>// free memory<br></span><span class="keyword">unset( </span><span class="default">$string_before </span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>You may or should also put a log-message or the sending of an email into the if-condition in order to get informed, once, one of your regular-expressions does not have the effect you desired it to have.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104482">  
  <a class="name">
  <strong class="user"><em>anyvie at devlibre dot fr</em></strong></a><div class="date" title="2011-06-17 02:11"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104482">
<div class="phpcode"><code><span class="html">
A variable can handle a huge quantity of data but preg_replace can't.<br><br>Example :<br><span class="default">&lt;?php<br>$url </span><span class="keyword">= </span><span class="string">"ANY URL WITH LOTS OF DATA"</span><span class="keyword">;<br><br></span><span class="comment">// We get all the data into $data<br></span><span class="default">$data </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br><br></span><span class="comment">// We just want to keep the content of &lt;head&gt;<br></span><span class="default">$head </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"#(.*)&lt;head&gt;(.*?)&lt;/head&gt;(.*)#is"</span><span class="keyword">, </span><span class="string">'$2'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>$head can have the desired content, or be empty, depends on the length of $data.<br><br>For this application, just add :<br>$data = substr($data, 0, 4096);<br>before using preg_replace, and it will work fine.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107112">  
  <a class="name">
  <strong class="user"><em>hvishnu999 at gmail dot com</em></strong></a><div class="date" title="2012-01-08 06:25"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107112">
<div class="phpcode"><code><span class="html">
To covert a string to SEO friendly, do this:
<br>
<br><span class="default">&lt;?php
<br>$realname </span><span class="keyword">= </span><span class="string">"This is the string to be made SEO friendly!"
<br>
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\%/'</span><span class="keyword">,</span><span class="string">' percentage'</span><span class="keyword">,</span><span class="default">$realname</span><span class="keyword">);
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\@/'</span><span class="keyword">,</span><span class="string">' at '</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\&amp;/'</span><span class="keyword">,</span><span class="string">' and '</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s[\s]+/'</span><span class="keyword">,</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Strip off multiple spaces
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[\s\W]+/'</span><span class="keyword">,</span><span class="string">'-'</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Strip off spaces and non-alpha-numeric
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/^[\-]+/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">); </span><span class="comment">// Strip off the starting hyphens
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[\-]+$/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$seoname</span><span class="keyword">); </span><span class="comment">// // Strip off the ending hyphens
<br></span><span class="default">$seoname </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$seoname</span><span class="keyword">);
<br>
<br>echo </span><span class="default">$seoname</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>This will print: this-is-the-string-to-be-made-seo-friendly</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107491">  
  <a class="name">
  <strong class="user"><em>Ray dot Paseur at SometimesUsesGmail dot com</em></strong></a><div class="date" title="2012-02-13 03:48"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107491">
<div class="phpcode"><code><span class="html">
Please see Example #4 Strip whitespace.&nbsp; This works as designed, but if you are using Windows, it may not work as expected.&nbsp; The potential "gotcha" is the CR/LF line endings.&nbsp; On a Unix system, where there is only a single character line ending, that regex pattern will preserve line endings.&nbsp; On Windows, it may strip line endings.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106263">  
  <a class="name">
  <strong class="user"><em>akarmenia at gmail dot com</em></strong></a><div class="date" title="2011-10-22 11:47"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106263">
<div class="phpcode"><code><span class="html">
[Editor's note: in this case it would be wise to rely on the preg_quote() function instead which was added for this specific purpose]
<br>
<br>If your replacement string has a dollar sign or a backslash. it may turn into a backreference accidentally! This will fix it.
<br>
<br>I want to replace 'text' with '$12345' but this becomes a backreference to $12 (which doesn't exist) and then it prints the remaining '34'. The function down below will return a string that escapes the backreferences.
<br>
<br>OUTPUT:
<br>string(8) "some 345"
<br>string(11) "some \12345"
<br>string(8) "some 345"
<br>string(11) "some $12345"
<br>
<br><span class="default">&lt;?php
<br>
<br>$a </span><span class="keyword">= </span><span class="string">'some text'</span><span class="keyword">;
<br>
<br></span><span class="comment">// Either of these will backreference and fail
<br></span><span class="default">$b1 </span><span class="keyword">= </span><span class="string">'\12345'</span><span class="keyword">; </span><span class="comment">// Should be '\\12345' to avoid backreference
<br></span><span class="default">$b2 </span><span class="keyword">= </span><span class="string">'$12345'</span><span class="keyword">; </span><span class="comment">// Should be '\$12345' to avoid backreference
<br>
<br></span><span class="default">$d </span><span class="keyword">= array(</span><span class="default">$b1</span><span class="keyword">, </span><span class="default">$b2</span><span class="keyword">);
<br>
<br>foreach (</span><span class="default">$d </span><span class="keyword">as </span><span class="default">$b</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$result1 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(text)#'</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Fails
<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result1</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$result2 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(text)#'</span><span class="keyword">, </span><span class="default">preg_escape_back</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">); </span><span class="comment">// Succeeds
<br>&nbsp; &nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result2</span><span class="keyword">);
<br>}
<br>
<br></span><span class="comment">// Escape backreferences from string for use with regex
<br></span><span class="keyword">function </span><span class="default">preg_escape_back</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="comment">// Replace $ with \$ and \ with \\
<br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#(?&lt;!\\\\)(\\$|\\\\)#'</span><span class="keyword">, </span><span class="string">'\\\\$1'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101236">  
  <a class="name">
  <strong class="user"><em>Terminux (dot) anonymous at gmail</em></strong></a><div class="date" title="2010-12-03 09:58"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101236">
<div class="phpcode"><code><span class="html">
This function will strip all the HTML-like content in a string.<br>I know you can find a lot of similar content on the web, but this one is simple, fast and robust. Don't simply use the built-in functions like strip_tags(), they dont work so good.<br><br>Careful however, this is not a correct validation of a string ; you should use additional functions like mysql_real_escape_string and filter_var, as well as custom tests before putting a submission into your database.<br><br><span class="default">&lt;?php <br><br>$html </span><span class="keyword">= &lt;&lt;&lt;END<br></span><span class="string">&lt;div id="function.preg-split" class="refentry"&gt; Bonjour1 \t<br>&lt;div class="refnamediv"&gt; Bonjour2 \t<br>&lt;h1 class="refname"&gt;Bonjour3 \t&lt;/h1&gt;<br>&lt;h1 class="""&gt;Bonjour4 \t&lt;/h1&gt;<br>&lt;h1 class="*%1"&gt;Bonjour5 \t&lt;/h1&gt;<br>&lt;body&gt;Bonjour6 \t&lt;//body&gt;&gt;<br>&lt;/ body&gt;Bonjour7 \t&lt;////&nbsp; &nbsp; &nbsp; &nbsp; body&gt;&gt;<br>&lt;<br>a href="image.php" alt="trans" /&nbsp; &nbsp; &nbsp; &nbsp; &gt;<br>some leftover text...<br>&nbsp; &nbsp;&nbsp; &lt; DIV class=noCompliant style = "text-align:left;" &gt;<br>... and some other ...<br>&lt; dIv &gt; &lt; empty&gt;&nbsp; &lt;/ empty&gt;<br>&nbsp; &lt;p&gt; This is yet another text &lt;br&nbsp; &gt;<br>&nbsp; &nbsp;&nbsp; that wasn't &lt;b&gt;compliant&lt;/b&gt; too... &lt;br&nbsp;&nbsp; /&gt;<br>&nbsp; &nbsp;&nbsp; &lt;/p&gt;<br> &lt;div class="noClass" &gt; this one is better but we don't care anyway &lt;/div &gt;&lt;P&gt;<br>&nbsp; &nbsp; &lt;input&nbsp;&nbsp; type= "text"&nbsp; name ='my "name' value&nbsp; = "nothin really." readonly&gt;<br>end of paragraph &lt;/p&gt; &lt;/Div&gt;&nbsp;&nbsp; &lt;/div&gt;&nbsp;&nbsp; some trailing text <br></span><span class="keyword">END;<br><br></span><span class="comment">// This echoes correctly all the text that is not inside HTML tags<br></span><span class="default">$html_reg </span><span class="keyword">= </span><span class="string">'/&lt;+\s*\/*\s*([A-Z][A-Z0-9]*)\b[^&gt;]*\/*\s*&gt;+/i'</span><span class="keyword">;<br>echo </span><span class="default">htmlentities</span><span class="keyword">( </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$html_reg</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$html </span><span class="keyword">) );<br><br></span><span class="comment">// This extracts only a small portion of the text<br></span><span class="keyword">echo </span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">));<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105122">  
  <a class="name">
  <strong class="user"><em>timitheenchanter</em></strong></a><div class="date" title="2011-07-28 01:34"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105122">
<div class="phpcode"><code><span class="html">
If you have issues where preg_replace returns an empty string, please take a look at these two ini parameters:<br><br>pcre.backtrack_limit<br>pcre.recursion_limit<br><br>The default is set to 100K.&nbsp; If your buffer is larger than this, look to increase these two values.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85416">  
  <a class="name">
  <strong class="user"><em>dyer85 at gmail dot com</em></strong></a><div class="date" title="2008-08-28 07:41"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85416">
<div class="phpcode"><code><span class="html">
There seems to be some unexpected behavior when using the /m modifier when the line terminators are win32 or mac format.<br><br>If you have a string like below, and try to replace dots, the regex won't replace correctly:<br><br><span class="default">&lt;?php<br>$s </span><span class="keyword">= </span><span class="string">"Testing, testing.\r\n"<br>&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Another testing line.\r\n"<br>&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Testing almost done."</span><span class="keyword">;<br><br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\.$/m'</span><span class="keyword">, </span><span class="string">'.@'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">// only last . replaced<br></span><span class="default">?&gt;<br></span><br>The /m modifier doesn't seem to work properly when CRLFs or CRs are used. Make sure to convert line endings to LFs (*nix format) in your input string.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78597">  
  <a class="name">
  <strong class="user"><em>mike dot hayward at mikeyskona dot co dot uk</em></strong></a><div class="date" title="2007-10-18 08:49"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78597">
<div class="phpcode"><code><span class="html">
Hi.
<br>Not sure if this will be a great help to anyone out there, but thought i'd post just in case.
<br>I was having an Issue with a project that relied on $_SERVER['REQUEST_URI']. Obviously this wasn't working on IIS.
<br>(i am using mod_rewrite in apache to call up pages from a database and IIS doesn't set REQUEST_URI). So i knocked up this simple little preg_replace to use the query string set by IIS when redirecting to a PHP error page.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">//My little IIS hack :)
<br></span><span class="keyword">if(!isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">])){ 
<br>&nbsp; </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">] = </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">'/404;([a-zA-Z]+:\/\/)(.*?)\//i'</span><span class="keyword">, </span><span class="string">"/" </span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">] );
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Hope this helps someone else out there trying to do the same thing :)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46639">  
  <a class="name">
  <strong class="user"><em>gabe at mudbuginfo dot com</em></strong></a><div class="date" title="2004-10-18 01:39"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46639">
<div class="phpcode"><code><span class="html">
It is useful to note that the 'limit' parameter, when used with 'pattern' and 'replace' which are arrays, applies to each individual pattern in the patterns array, and not the entire array.<br><span class="default">&lt;?php<br><br>$pattern </span><span class="keyword">= array(</span><span class="string">'/one/'</span><span class="keyword">, </span><span class="string">'/two/'</span><span class="keyword">);<br></span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'uno'</span><span class="keyword">, </span><span class="string">'dos'</span><span class="keyword">);<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="string">"test one, one two, one two three"</span><span class="keyword">;<br><br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>If limit were applied to the whole array (which it isn't), it would return:<br>test uno, one two, one two three<br><br>However, in reality this will actually return:<br>test uno, one dos, one two three</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103985">  
  <a class="name">
  <strong class="user"><em>craiga at craiga dot id dot au</em></strong></a><div class="date" title="2011-05-15 07:02"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103985">
<div class="phpcode"><code><span class="html">
If there's a chance your replacement text contains any strings such as "$0.95", you'll need to escape those $n backreferences:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">escape_backreference</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\$(\d)/'</span><span class="keyword">, </span><span class="string">'\\\$$1'</span><span class="keyword">, </span><span class="default">$x</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101938">  
  <a class="name">
  <strong class="user"><em>nospam at probackup dot nl</em></strong></a><div class="date" title="2011-01-19 05:03"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101938">
<div class="phpcode"><code><span class="html">
Warning: a common made mistake in trying to remove all characters except numbers and letters from a string, is to use code with a regex similar to preg_replace('[^A-Za-z0-9_]', '', ...). The output goes in an unexpected direction in case your input contains two double quotes.<br><br>echo preg_replace('[^A-Za-z0-9_]', '', 'D"usseldorfer H"auptstrasse')<br><br>D"usseldorfer H"auptstrasse<br><br>It is important to not forget a leading an trailing forward slash in the regex: <br><br>echo preg_replace('/[^A-Za-z0-9_]/', '', 'D"usseldorfer H"auptstrasse')<br><br>Dusseldorfer Hauptstrasse<br><br>PS An alternative is to use preg_replace('/\W/', '', $t) for keeping all alpha numeric characters including underscores.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110511">  
  <a class="name">
  <strong class="user"><em>cincodenada at gmail dot dot dot com</em></strong></a><div class="date" title="2012-10-30 10:43"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110511">
<div class="phpcode"><code><span class="html">
There seems to be some confusion over how greediness works.&nbsp; For those familiar with Regular Expressions in other languages, particularly Perl: it works like you would expect, and as documented.&nbsp; Greedy by default, un-greedy if you follow a quantifier with a question mark.<br><br>There is a PHP/PCRE-specific U pattern modifier that flips the greediness, so that quantifiers are by default un-greedy, and become greedy if you follow the quantifier with a question mark: <a rel="nofollow" target="_blank">http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php</a><br><br>To make things clear, a series of examples:<br><br><span class="default">&lt;?php<br><br>$preview </span><span class="keyword">= </span><span class="string">"a bunch of stuff &lt;code&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end"</span><span class="keyword">; <br><br></span><span class="default">$preview_default </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*)&lt;\/code&gt;/is'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br></span><span class="default">$preview_manually_ungreedy </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*?)&lt;\/code&gt;/is'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br><br></span><span class="default">$preview_U_default </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*)&lt;\/code&gt;/isU'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br></span><span class="default">$preview_U_manually_greedy </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;code&gt;(.*?)&lt;\/code&gt;/isU'</span><span class="keyword">, </span><span class="string">"&lt;code class=\"prettyprint\"&gt;$1&lt;/code&gt;"</span><span class="keyword">, </span><span class="default">$preview</span><span class="keyword">);<br><br>echo </span><span class="string">"Default, no ?: </span><span class="default">$preview_default</span><span class="string">\n"</span><span class="keyword">;<br>echo </span><span class="string">"Default, with ?: </span><span class="default">$preview_manually_ungreedy</span><span class="string">\n"</span><span class="keyword">;<br>echo </span><span class="string">"U flag, no ?: </span><span class="default">$preview_U_default</span><span class="string">\n"</span><span class="keyword">;<br>echo </span><span class="string">"U flag, with ?: </span><span class="default">$preview_U_manually_greedy</span><span class="string">\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>Results in this:<br><br>Default, no ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end<br>Default, with ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code class="prettyprint"&gt;with a second code block&lt;/code&gt; then extra at the end<br>U flag, no ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code class="prettyprint"&gt;with a second code block&lt;/code&gt; then extra at the end<br>U flag, with ?: a bunch of stuff &lt;code class="prettyprint"&gt;this that&lt;/code&gt; and more stuff &lt;code&gt;with a second code block&lt;/code&gt; then extra at the end<br><br>As expected: greedy by default, ? inverts it to ungreedy.&nbsp; With the U flag, un-greedy by default, ? makes it greedy.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82574">  
  <a class="name">
  <strong class="user"><em>Michael W</em></strong></a><div class="date" title="2008-04-16 03:35"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82574">
<div class="phpcode"><code><span class="html">
For filename tidying I prefer to only ALLOW certain characters rather than converting particular ones that we want to exclude. To this end I use ...<br><br><span class="default">&lt;?php<br>&nbsp; $allowed </span><span class="keyword">= </span><span class="string">"/[^a-z0-9\\040\\.\\-\\_\\\\]/i"</span><span class="keyword">;<br>&nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$allowed</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">));<br></span><span class="default">?&gt;<br></span><br>Allows letters a-z, digits, space (\\040), hyphen (\\-), underscore (\\_) and backslash (\\\\), everything else is removed from the string.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102589">  
  <a class="name">
  <strong class="user"><em>me at perochak dot com</em></strong></a><div class="date" title="2011-02-22 09:57"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102589">
<div class="phpcode"><code><span class="html">
If you would like to remove a tag along with the text inside it then use the following code.
<br>
<br><span class="default">&lt;?php
<br>preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;tag&gt;.+?)+(&lt;\/tag&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>example
<br><span class="default">&lt;?php $string</span><span class="keyword">=</span><span class="string">'&lt;span class="normalprice"&gt;55 PKR&lt;/span&gt;'</span><span class="keyword">; </span><span class="default">?&gt;
<br></span>
<br><span class="default">&lt;?php
<br>$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;span class="normalprice"&gt;.+?)+(&lt;\/span&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>This will results a null or empty string.
<br>
<br><span class="default">&lt;?php
<br>$string</span><span class="keyword">=</span><span class="string">'My String &lt;span class="normalprice"&gt;55 PKR&lt;/span&gt;'</span><span class="keyword">;
<br>
<br></span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;span class="normalprice"&gt;.+?)+(&lt;\/span&gt;)/i'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>This will results a " My String"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87102">  
  <a class="name">
  <strong class="user"><em>jette at nerdgirl dot dk</em></strong></a><div class="date" title="2008-11-19 04:47"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87102">
<div class="phpcode"><code><span class="html">
I use this to prevent users from overdoing repeated text. The following function only allows 3 identical characters at a time and also takes care of repetitions with whitespace added.<br><br>This means that 'haaaaaaleluuuujaaaaa' becomes 'haaaleluuujaaa' and 'I am c o o o o o o l' becomes 'I am c o o o l'<br><br><span class="default">&lt;?php<br></span><span class="comment">//Example of user input<br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">"aaaaaaaaaaabbccccccccaaaaad d d d&nbsp;&nbsp; d&nbsp; &nbsp; &nbsp; d d ddde''''''''''''"</span><span class="keyword">;<br><br>function </span><span class="default">stripRepeat</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) {<br>&nbsp; </span><span class="comment">//Do not allow repeated whitespace<br>&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\s){2,}/"</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; </span><span class="comment">//Result: aaaaaaaaaaabbccccccccaaaaad d d d d d d ddde''''''''''''<br><br>&nbsp; //Do not allow more than 3 identical characters separated by any whitespace <br>&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'{( ?.)\1{4,}}'</span><span class="keyword">,</span><span class="string">'$1$1$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; </span><span class="comment">//Final result: aaabbcccaaad d d ddde'''<br><br>&nbsp; </span><span class="keyword">return </span><span class="default">$str</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>To prevent any repetitions of characters, you only need this:<br><br><span class="default">&lt;?php<br>$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'{(.)\1+}'</span><span class="keyword">,</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br></span><span class="comment">//Result: abcad d d d d d d de'<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76297">  
  <a class="name">
  <strong class="user"><em>mtsoft at mt-soft dot com dot ar</em></strong></a><div class="date" title="2007-07-09 02:30"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76297">
<div class="phpcode"><code><span class="html">
This function takes a URL and returns a plain-text version of the page. It uses cURL to retrieve the page and a combination of regular expressions to strip all unwanted whitespace. This function will even strip the text from STYLE and SCRIPT tags, which are ignored by PHP functions such as strip_tags (they strip only the tags, leaving the text in the middle intact).
<br>
<br>Regular expressions were split in 2 stages, to avoid deleting single carriage returns (also matched by \s) but still delete all blank lines and multiple linefeeds or spaces, trimming operations took place in 2 stages.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">webpage2txt</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)
<br>{
<br></span><span class="default">$user_agent </span><span class="keyword">= </span><span class="default">“Mozilla</span><span class="keyword">/</span><span class="default">4.0 </span><span class="keyword">(</span><span class="default">compatible</span><span class="keyword">; </span><span class="default">MSIE 5.01</span><span class="keyword">; </span><span class="default">Windows NT 5.0</span><span class="keyword">)</span><span class="default">”</span><span class="keyword">;
<br>
<br></span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">();&nbsp; &nbsp; </span><span class="comment">// initialize curl handle
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_URL</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">); </span><span class="comment">// set url to post to
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Fail on errors
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_FOLLOWLOCATION</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// allow redirects
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// return into a variable
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_PORT</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Set the port number
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_TIMEOUT</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">); </span><span class="comment">// times out after 15s
<br>
<br></span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">, </span><span class="default">CURLOPT_USERAGENT</span><span class="keyword">, </span><span class="default">$user_agent</span><span class="keyword">);
<br>
<br></span><span class="default">$document </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">);
<br>
<br></span><span class="default">$search </span><span class="keyword">= array(</span><span class="default">’</span><span class="keyword">@&lt;</span><span class="default">script</span><span class="keyword">[^&gt;]*</span><span class="default">?&gt;</span>.*?&lt;/script&gt;@si’,&nbsp; // Strip out javascript
<br>‘@&lt;style[^&gt;]*?&gt;.*?&lt;/style&gt;@siU’,&nbsp; &nbsp; // Strip style tags properly
<br>‘@&lt;[\/\!]*?[^&lt;&gt;]*?&gt;@si’,&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Strip out HTML tags
<br>‘@&lt;![\s\S]*?–[ \t\n\r]*&gt;@’,&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Strip multi-line comments including CDATA
<br>‘/\s{2,}/’,
<br>
<br>);
<br>
<br>$text = preg_replace($search, “\n”, html_entity_decode($document));
<br>
<br>$pat[0] = “/^\s+/”;
<br>$pat[2] = “/\s+\$/”;
<br>$rep[0] = “”;
<br>$rep[2] = ” “;
<br>
<br>$text = preg_replace($pat, $rep, trim($text));
<br>
<br>return $text;
<br>}
<br>?&gt;
<br>
<br>Potential uses of this function are extracting keywords from a webpage, counting words and things like that. If you find it useful, drop us a comment and let us know where you used it.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115176">  
  <a class="name">
  <strong class="user"><em>elliot dot greene at att dot net</em></strong></a><div class="date" title="2014-06-09 04:37"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115176">
<div class="phpcode"><code><span class="html">
preg_replace to only show alpha numeric characters<br><br>$info = "The Development of code . <a rel="nofollow" target="_blank">http://www.</a>";<br><br>$info = preg_replace("/[^a-zA-Z0-9]+/", "", $info);<br><br>echo $info;<br><br>OUTPUTS: TheDevelopmentofcodehttpwww<br><br>This is a good workable code<br><a rel="nofollow" target="_blank">http://www.sioure.com</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="115520">  
  <a class="name">
  <strong class="user"><em>eurosat7 at yahoo dot de</em></strong></a><div class="date" title="2014-08-08 10:12"><strong>20 days ago</strong></div>
  <div class="text" id="Hcom115520">
<div class="phpcode"><code><span class="html">
If you want to limit multiple occurences of any char in a sequence you might want to use this function.<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">limit_char_repeat</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$maxrepeat</span><span class="keyword">){<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(.)\\1{"</span><span class="keyword">.</span><span class="default">$maxrepeat</span><span class="keyword">.</span><span class="string">",}/ms"</span><span class="keyword">,</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'\1'</span><span class="keyword">,</span><span class="default">$maxrepeat</span><span class="keyword">),</span><span class="default">$string</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Example:<br><span class="default">&lt;?php<br>$string</span><span class="keyword">=</span><span class="string">"<br>---------------------<br>Heeeeeeeeeeeeeeeeeeeello Woooooooooooooooorld!!!!!!!!!!!!!!!!!!!!!!!!<br>===============================================================================================================<br>~~~~~~~~~~~~~~~~ ~ ~ ~<br>"</span><span class="keyword">;<br>echo </span><span class="default">limit_char_repeat</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>Output:<br>-----<br>Heeeeello Wooooorld!!!!!<br>=====<br>~~~~~ ~ ~ ~</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115032">  
  <a class="name">
  <strong class="user"><em>dhgouveia at gmail dot com</em></strong></a><div class="date" title="2014-05-15 10:26"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom115032">
<div class="phpcode"><code><span class="html">
if you want to replace only the content of specific div using the ID you can do this :<br><br><span class="default">&lt;?php<br>$id </span><span class="keyword">= </span><span class="string">"my-id"</span><span class="keyword">;<br></span><span class="default">$content </span><span class="keyword">= </span><span class="string">'&lt;div id="my-id"&gt;Hello World&lt;/div&gt;&lt;div&nbsp; id="other-id"&gt; My World&lt;/div&gt;'</span><span class="keyword">;<br></span><span class="default">$replacement </span><span class="keyword">= </span><span class="string">"Hello Planet"</span><span class="keyword">;<br><br></span><span class="default">$result&nbsp; </span><span class="keyword">=&nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(&lt;div.*?id=\"'</span><span class="keyword">.</span><span class="default">$id</span><span class="keyword">.</span><span class="string">'\"[^&gt;]*&gt;)(.*?)(&lt;\/div&gt;)/i'</span><span class="keyword">, </span><span class="string">"$1</span><span class="keyword">{</span><span class="default">$replacement</span><span class="keyword">}</span><span class="string">$3"</span><span class="keyword">, </span><span class="default">$content</span><span class="keyword">);<br>&nbsp;&nbsp; <br>echo </span><span class="default">$result</span><span class="keyword">:<br></span><span class="default">?&gt;<br></span><br>should print : <br>&lt;div id="my-id"&gt;Hello Planet&lt;/div&gt;&lt;div&nbsp; id="other-id"&gt; My World&lt;/div&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112203">  
  <a class="name">
  <strong class="user"><em>Dustin</em></strong></a><div class="date" title="2013-05-16 11:53"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112203">
<div class="phpcode"><code><span class="html">
Matching substrings where the match can exist at the end of the string was non-intuitive to me.<br><br>I found this because:<br>strtotime() interprets 'mon' as 'Monday', but Postgres uses interval types that return short names by default, e.g. interval '1 month' returns as '1 mon'.<br><br>I used something like this:<br><br>$str = "mon month monday Mon Monday Month MONTH MON";<br>$strMonth = preg_replace('~(mon)([^\w]|$)~i', '$1th$2', $str);<br>echo "$str\n$strMonth\n";<br><br>//to output:<br>mon month monday Mon Monday Month MONTH MON<br>month month monday Month Monday Month MONTH MONth</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111695">  
  <a class="name">
  <strong class="user"><em>nik at rolls dot cc</em></strong></a><div class="date" title="2013-03-17 10:14"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111695">
<div class="phpcode"><code><span class="html">
To split Pascal/CamelCase into Title Case (for example, converting descriptive class names for use in human-readable frontends), you can use the below function:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">expandCamelCase</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">) {<br>&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/(?&lt;!^)([A-Z][a-z]|(?&lt;=[a-z])[^a-z]|(?&lt;=[A-Z])[0-9_])/'</span><span class="keyword">, </span><span class="string">' $1'</span><span class="keyword">, </span><span class="default">$source</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Before:<br>&nbsp; ExpandCamelCaseAPIDescriptorPHP5_3_4Version3_21Beta<br>After:<br>&nbsp; Expand Camel Case API Descriptor PHP 5_3_4 Version 3_21 Beta</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113897">  
  <a class="name">
  <strong class="user"><em>reigyx_x at yahoo dot co dot id</em></strong></a><div class="date" title="2013-12-15 12:42"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom113897">
<div class="phpcode"><code><span class="html">
hy php.net<br>how to script preg replace for this code<br>&gt;:( <br>i want to use this smiley, buit dont know how to regex it..</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105490">  
  <a class="name">
  <strong class="user"><em>kosalasl at gmail dot com</em></strong></a><div class="date" title="2011-08-22 09:03"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105490">
<div class="phpcode"><code><span class="html">
I wrote some useful function to display date format based on date function particular string. preg_replace function really help me to write this tiny code
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">mysql2formatDate</span><span class="keyword">(</span><span class="default">$strn</span><span class="keyword">,</span><span class="default">$outformat</span><span class="keyword">=</span><span class="string">'n/j/Y'</span><span class="keyword">){
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/(\d{4})-(\d{2})-(\d{2})/e"</span><span class="keyword">,</span><span class="string">"Date('</span><span class="default">$outformat</span><span class="string">',strtotime('$0'))"</span><span class="keyword">,</span><span class="default">$strn</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109134">  
  <a class="name">
  <strong class="user"><em>webmaster at antoinebouchard dot net</em></strong></a><div class="date" title="2012-06-22 02:37"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109134">
<div class="phpcode"><code><span class="html">
It may seem useless, but the font tag in Internet Explorer won't recognize compressed hexa values. This is a simple function to uncompress hexa values in the font tag<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">colorfix</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/"#([a-f0-9])([a-f0-9])([a-f0-9])"/i'</span><span class="keyword">, </span><span class="string">'"#$1$1$2$2$3$3"'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104318">  
  <a class="name">
  <strong class="user"><em>someuser at dot dot com</em></strong></a><div class="date" title="2011-06-08 04:10"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104318">
<div class="phpcode"><code><span class="html">
Replacement of line numbers, with replacement limit per line.<br><br>Solution that worked for me.<br>I have a file with tasks listed each starting from number, and only starting number should be removed because forth going text has piles of numbers to be omitted.<br><br>56 Patient A of 46 years suffering ... ...<br>57 Newborn of 26 weeks was ...<br>58 Jane, having age 18 years recollects onsets of ...<br>...<br>587 Patient of 70 years ...<br><br>etc.<br><br><span class="default">&lt;?php<br></span><span class="comment">// Array obtained from file&nbsp; &nbsp; <br></span><span class="default">$array </span><span class="keyword">= </span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br><br></span><span class="comment">// Decompile array with foreach loop<br></span><span class="keyword">foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//&nbsp; &nbsp; Take away numbers 100-999<br>&nbsp; &nbsp; //&nbsp; &nbsp; Starting from biggest <br>&nbsp; &nbsp; //<br>&nbsp; &nbsp; //&nbsp; &nbsp; %&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Delimiter<br>&nbsp; &nbsp; //&nbsp; &nbsp; ^&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Make match from beginning of line<br>&nbsp; &nbsp; //&nbsp; &nbsp; [0-9]&nbsp; &nbsp; &nbsp; &nbsp; Range of numbers<br>&nbsp; &nbsp; //&nbsp; &nbsp; {3}&nbsp; &nbsp; &nbsp; &nbsp; Multiplication of digit range (For tree digit numbers)<br>&nbsp; &nbsp; //<br>&nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]{3}%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Re-assing to value its modified copy<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]{3}%'</span><span class="keyword">, </span><span class="string">'-HERE WAS XXX NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// Take away numbers 10-99<br>&nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]{2}%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]{2}%'</span><span class="keyword">, </span><span class="string">'-HERE WAS XX NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// Take away numbers 0-9<br>&nbsp; &nbsp; </span><span class="keyword">elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'%^[0-9]%'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'%^[0-9]%'</span><span class="keyword">, </span><span class="string">'-HERE WAS X NUMBER-'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// Build array back<br>&nbsp; &nbsp; </span><span class="default">$arr</span><span class="keyword">[] = array(</span><span class="default">$value</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107046">  
  <a class="name">
  <strong class="user"><em>support ~ at ~ mbnad ~ dot ~ com</em></strong></a><div class="date" title="2012-01-02 05:47"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107046">
<div class="phpcode"><code><span class="html">
Wrong number of letters in words and how solve this problem and also remove extra spaces in a row:<br><br><span class="default">&lt;?php<br>$message_body </span><span class="keyword">= </span><span class="string">'HHHHHEEEEELLLLLOOOOO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; IAM COOOOOOOOOOOOOOOOOOOL&nbsp; &nbsp; &nbsp; !!!!!!!!!!'</span><span class="keyword">;<br>echo </span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$message_body</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">$message_body </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~(.?)\1{3,}~'</span><span class="keyword">, </span><span class="string">'$1'</span><span class="keyword">, </span><span class="default">$message_body</span><span class="keyword">);<br></span><span class="default">$message_body </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~\s+~'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$message_body</span><span class="keyword">));<br>echo </span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$message_body</span><span class="keyword">.</span><span class="string">"\n\n"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101296">  
  <a class="name">
  <strong class="user"><em>ude dot mpco at wotsrabt dot maps-on</em></strong></a><div class="date" title="2010-12-08 10:30"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101296">
<div class="phpcode"><code><span class="html">
I find it useful to output HTML form names to the user from time to time while going through the $_GET or $_POST on a user's submission and output keys of the GET or POST array... the only problem being in the name attribute I follow common programming guidelines and have names like the following: eventDate, eventTime, userEmail, etc. Not great to just output to the user-- so I came up with this function. It just adds a space before any uppercase letter in the string.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">caseSwitchToSpaces</span><span class="keyword">( </span><span class="default">$stringVariableName </span><span class="keyword">)
<br>{
<br>
<br></span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/([A-Z])/'</span><span class="keyword">;
<br></span><span class="default">$replacement </span><span class="keyword">= </span><span class="string">' ${1}'</span><span class="keyword">;
<br>
<br>return </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$replacement</span><span class="keyword">, </span><span class="default">$stringVariableName </span><span class="keyword">);
<br>}
<br>
<br></span><span class="comment">//ex. 
<br></span><span class="keyword">echo( </span><span class="default">caseSwitchToSpaces</span><span class="keyword">( </span><span class="string">"helloWorld" </span><span class="keyword">) );
<br></span><span class="default">?&gt;
<br></span>
<br>would output:
<br>
<br>"hello World"
<br>
<br>You could also do title-style casing to it if desired so the first word isn't lowercase.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96649">  
  <a class="name">
  <strong class="user"><em>sergei dot garrison at gmail dot com</em></strong></a><div class="date" title="2010-03-09 01:40"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96649">
<div class="phpcode"><code><span class="html">
If you want to add simple rich text functionality to HTML input fields, preg_replace can be quite handy.<br><br>For example, if you want users to be able to bold text by typing *text* or italicize it by typing _text_, you can use the following function.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">encode</span><span class="keyword">(&amp;</span><span class="default">$text</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\*([^\*]+)\*/'</span><span class="keyword">, </span><span class="string">'&lt;b&gt;\1&lt;/b&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/_([^_]+)_/'</span><span class="keyword">, </span><span class="string">'&lt;i&gt;\1&lt;/i&gt;'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br>&nbsp; &nbsp; return </span><span class="default">$text</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>This works for nested tags, too, although it will not fix nesting mistakes.<br><br>To make this function more efficient, you could put the delimiters (* and _, in this case) and their HTML tag equivalents in an array and loop through them.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87300">  
  <a class="name">
  <strong class="user"><em>mdrisser at gmail dot com</em></strong></a><div class="date" title="2008-11-28 10:13"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87300">
<div class="phpcode"><code><span class="html">
An alternative to the method suggested by sheri is to remember that the regex modifier '$' only looks at the end of the STRING, the example given is a single string consisting of multiple lines.<br><br>Try:<br><span class="default">&lt;?php<br></span><span class="comment">// Following is 1 string containing 3 lines<br></span><span class="default">$s </span><span class="keyword">= </span><span class="string">"Testing, testing.\r\n"<br>&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Another testing line.\r\n"<br>&nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"Testing almost done."</span><span class="keyword">;<br><br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\.\\r\\n/m'</span><span class="keyword">, </span><span class="string">'@\r\n'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This results in the string:<br>Testing, testing@\r\nAnother testing line@\r\nTesting almost done.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87058">  
  <a class="name">
  <strong class="user"><em>7r6ivyeo at mail dot com</em></strong></a><div class="date" title="2008-11-17 09:25"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87058">
<div class="phpcode"><code><span class="html">
String to filename:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">string_to_filename</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/^\W+|\W+$/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">); </span><span class="comment">// remove all non-alphanumeric chars at begin &amp; end of string<br>&nbsp; &nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s+/'</span><span class="keyword">, </span><span class="string">'_'</span><span class="keyword">, </span><span class="default">$tmp</span><span class="keyword">); </span><span class="comment">// compress internal whitespace and replace with _<br>&nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\W-/'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$tmp</span><span class="keyword">)); </span><span class="comment">// remove all non-alphanumeric chars except _ and -<br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>Returns a usable &amp; readable filename.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84703">  
  <a class="name">
  <strong class="user"><em>marcin at pixaltic dot com</em></strong></a><div class="date" title="2008-07-25 03:56"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84703">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="comment">//:::replace with anything that you can do with searched string:::
<br>&nbsp; &nbsp; //Marcin Majchrzak
<br>&nbsp; &nbsp; //pixaltic.com
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="string">"2 4 8"</span><span class="keyword">;
<br>&nbsp; &nbsp; echo (</span><span class="default">$c</span><span class="keyword">); </span><span class="comment">//display:2 4 8
<br>
<br>&nbsp; &nbsp; </span><span class="default">$cp </span><span class="keyword">= </span><span class="string">"/(\d)\s(\d)\s(\d)/e"</span><span class="keyword">; </span><span class="comment">//pattern
<br>&nbsp; &nbsp; </span><span class="default">$cr </span><span class="keyword">= </span><span class="string">"'\\3*\\2+\\1='.(('\\3')*('\\2')+('\\1'))"</span><span class="keyword">; </span><span class="comment">//replece
<br>&nbsp; &nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$cp</span><span class="keyword">, </span><span class="default">$cr</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">);
<br>&nbsp; &nbsp; echo (</span><span class="default">$c</span><span class="keyword">); </span><span class="comment">//display:8*4+2=34
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89471">  
  <a class="name">
  <strong class="user"><em>arie dot benichou at gmail dot com</em></strong></a><div class="date" title="2009-03-09 12:50"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89471">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="comment">//Be carefull with utf-8, even with unicode and utf-8 support enabled, a pretty odd bug occurs depending on your operating system<br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">"Hi, my name is Arié!&lt;br /&gt;"</span><span class="keyword">;<br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\bArié\b#u'</span><span class="keyword">, </span><span class="string">'Gontran'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br></span><span class="comment">//on windows system, output is "Hi, my name is Gontran&lt;br /&gt;"<br>//on unix system, output is "Hi, my name is Arié&lt;br /&gt;"<br></span><span class="keyword">echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\bArié(|\b)#u'</span><span class="keyword">, </span><span class="string">'Gontran'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br></span><span class="comment">//on windows and unix system, output is "Hi, my name is Gontran&lt;br /&gt;"</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88997">  
  <a class="name">
  <strong class="user"><em>akam AT akameng DOT com</em></strong></a><div class="date" title="2009-02-17 04:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88997">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>$converted&nbsp; &nbsp; </span><span class="keyword">= <br>array(<br></span><span class="comment">//3 of special chars<br><br></span><span class="string">'/(;)/ie'</span><span class="keyword">, <br></span><span class="string">'/(#)/ie'</span><span class="keyword">, <br></span><span class="string">'/(&amp;)/ie'</span><span class="keyword">, <br><br></span><span class="comment">//MySQL reserved words!<br>//Check mysql website!<br></span><span class="string">'/(ACTION)/ie'</span><span class="keyword">, </span><span class="string">'/(ADD)/ie'</span><span class="keyword">, </span><span class="string">'/(ALL)/ie'</span><span class="keyword">, </span><span class="string">'/(ALTER)/ie'</span><span class="keyword">, </span><span class="string">'/(ANALYZE)/ie'</span><span class="keyword">, </span><span class="string">'/(AND)/ie'</span><span class="keyword">, </span><span class="string">'/(AS)/ie'</span><span class="keyword">, </span><span class="string">'/(ASC)/ie'</span><span class="keyword">,<br><br></span><span class="comment">//remaining of special chars<br></span><span class="string">'/(&lt;)/ie'</span><span class="keyword">, </span><span class="string">'/(&gt;)/ie'</span><span class="keyword">, </span><span class="string">'/(\.)/ie'</span><span class="keyword">, </span><span class="string">'/(,)/ie'</span><span class="keyword">, </span><span class="string">'/(\?)/ie'</span><span class="keyword">, </span><span class="string">'/(`)/ie'</span><span class="keyword">, </span><span class="string">'/(!)/ie'</span><span class="keyword">, </span><span class="string">'/(@)/ie'</span><span class="keyword">, </span><span class="string">'/(\$)/ie'</span><span class="keyword">, </span><span class="string">'/(%)/ie'</span><span class="keyword">, </span><span class="string">'/(\^)/ie'</span><span class="keyword">, </span><span class="string">'/(\*)/ie'</span><span class="keyword">, </span><span class="string">'/(\()/ie'</span><span class="keyword">, </span><span class="string">'/(\))/ie'</span><span class="keyword">, </span><span class="string">'/(_)/ie'</span><span class="keyword">, </span><span class="string">'/(-)/ie'</span><span class="keyword">, </span><span class="string">'/(\+)/ie'</span><span class="keyword">, <br></span><span class="string">'/(=)/ie'</span><span class="keyword">, </span><span class="string">'/(\/)/ie'</span><span class="keyword">, </span><span class="string">'/(\|)/ie'</span><span class="keyword">, </span><span class="string">'/(\\\)/ie'</span><span class="keyword">, </span><span class="string">"/(')/ie"</span><span class="keyword">, </span><span class="string">'/(")/ie'</span><span class="keyword">, </span><span class="string">'/(:)/'<br></span><span class="keyword">);<br><br></span><span class="default">$input_text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$converted</span><span class="keyword">, </span><span class="string">"UTF_to_Unicode('\\1')"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br><br>function </span><span class="default">UTF_to_Unicode</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">){<br><br></span><span class="comment">//return $data;<br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span>The above example useful for filtering input data, then saving into mysql database, it's not need tobe decoded again, just use UTF-8 as charset.<br>Please Note escaping special chars between delimiter..</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83974">  
  <a class="name">
  <strong class="user"><em>da_pimp2004_966 at hotmail dot com</em></strong></a><div class="date" title="2008-06-20 11:09"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83974">
<div class="phpcode"><code><span class="html">
A simple BB like thing..
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">AddBB</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$search </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[b\](.*?)\[\/b\]/is'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[i\](.*?)\[\/i\]/is'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[u\](.*?)\[\/u\]/is'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[img\](.*?)\[\/img\]/is'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[url\](.*?)\[\/url\]/is'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'/\[url\=(.*?)\](.*?)\[\/url\]/is'
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$replace </span><span class="keyword">= array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;em&gt;$1&lt;/em&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;u&gt;$1&lt;/u&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;img src="$1" /&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;a href="$1"&gt;$1&lt;/a&gt;'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;a href="$1"&gt;$2&lt;/a&gt;'
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">preg_replace </span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$var</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$var</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81486">  
  <a class="name">
  <strong class="user"><em>php-comments-REMOVE dot ME at dotancohen dot com</em></strong></a><div class="date" title="2008-02-29 12:02"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81486">
<div class="phpcode"><code><span class="html">
Below is a function for converting Hebrew final characters to their<br>normal equivelants should they appear in the middle of a word.<br>The /b argument does not treat Hebrew letters as part of a word,<br>so I had to work around that limitation.<br><br><span class="default">&lt;?php<br><br>$text</span><span class="keyword">=</span><span class="string">"עברית מבולגנת"</span><span class="keyword">;<br><br>function </span><span class="default">hebrewNotWordEndSwitch </span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=<br>&nbsp; &nbsp; </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$from</span><span class="keyword">.</span><span class="string">'([א-ת])/u'</span><span class="keyword">,</span><span class="string">'$2'</span><span class="keyword">.</span><span class="default">$to</span><span class="keyword">.</span><span class="string">'$1'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br>}<br><br>do {<br>&nbsp;&nbsp; </span><span class="default">$text_before</span><span class="keyword">=</span><span class="default">$text</span><span class="keyword">;<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"ך"</span><span class="keyword">,</span><span class="string">"כ"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"ם"</span><span class="keyword">,</span><span class="string">"מ"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"ן"</span><span class="keyword">,</span><span class="string">"נ"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"ף"</span><span class="keyword">,</span><span class="string">"פ"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">=</span><span class="default">hebrewNotWordEndSwitch</span><span class="keyword">(</span><span class="string">"ץ"</span><span class="keyword">,</span><span class="string">"צ"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);<br>}&nbsp;&nbsp; while ( </span><span class="default">$text_before</span><span class="keyword">!=</span><span class="default">$text </span><span class="keyword">);<br><br>print </span><span class="default">$text</span><span class="keyword">; </span><span class="comment">// עברית מסודרת!<br><br></span><span class="default">?&gt;<br></span><br>The do-while is necessary for multiple instances of letters, such<br>as "אנני" which would start off as "אןןי". Note that there's still the<br>problem of acronyms with gershiim but that's not a difficult one<br>to solve. The code is in use at <a rel="nofollow" target="_blank">http://gibberish.co.il</a> which you can<br>use to translate wrongly-encoded Hebrew, transliterize, and some<br>other Hebrew-related functions.<br><br>To ensure that there will be no regular characters at the end of a<br>word, just convert all regular characters to their final forms, then<br>run this function. Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79678">  
  <a class="name">
  <strong class="user"><em>ulf dot reimers at tesa dot com</em></strong></a><div class="date" title="2007-12-07 10:28"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79678">
<div class="phpcode"><code><span class="html">
Hi,<br><br>as I wasn't able to find another way to do this, I wrote a function converting any UTF-8 string into a correct NTFS filename (see <a rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Filename</a>).<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">strToNTFSFilename</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$reserved </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="string">'\/:*?"&lt;&gt;'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">);<br>&nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"/([\\x00-\\x1f</span><span class="keyword">{</span><span class="default">$forbidden</span><span class="keyword">}</span><span class="string">])/e"</span><span class="keyword">, </span><span class="string">"_"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>It converts all control characters and filename characters which are reserved by Windows ('\/:*?"&lt;&gt;') into an underscore.<br>This way you can safely create an NTFS filename out of any UTF-8 string.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77317">  
  <a class="name">
  <strong class="user"><em>sternkinder at gmail dot com</em></strong></a><div class="date" title="2007-08-24 03:10"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77317">
<div class="phpcode"><code><span class="html">
From what I can see, the problem is, that if you go straight and substitute all 'A's wit 'T's you can't tell for sure which 'T's to substitute with 'A's afterwards. This can be for instance solved by simply replacing all 'A's by another character (for instance '_' or whatever you like), then replacing all 'T's by 'A's, and then replacing all '_'s (or whatever character you chose) by 'A's:
<br>
<br><span class="default">&lt;?php
<br>$dna </span><span class="keyword">= </span><span class="string">"AGTCTGCCCTAG"</span><span class="keyword">;
<br>echo </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"_"</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">), array(</span><span class="string">"_"</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">,</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">), </span><span class="default">$dna</span><span class="keyword">); </span><span class="comment">//output will be TCAGACGGGATC
<br></span><span class="default">?&gt;
<br></span>
<br>Although I don't know how transliteration in perl works (though I remember that is kind of similar to the UNIX command "tr") I would suggest following function for "switching" single chars:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">switch_chars</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$switch_table</span><span class="keyword">,</span><span class="default">$unused_char</span><span class="keyword">=</span><span class="string">"_"</span><span class="keyword">) {
<br>&nbsp; &nbsp; foreach ( </span><span class="default">$switch_table </span><span class="keyword">as </span><span class="default">$_1 </span><span class="keyword">=&gt; </span><span class="default">$_2 </span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$_1</span><span class="keyword">,</span><span class="default">$unused_char</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$_2</span><span class="keyword">,</span><span class="default">$_1</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$unused_char</span><span class="keyword">,</span><span class="default">$_2</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;
<br>}
<br>
<br>echo </span><span class="default">switch_chars</span><span class="keyword">(</span><span class="string">"AGTCTGCCCTAG"</span><span class="keyword">, array(</span><span class="string">"A"</span><span class="keyword">=&gt;</span><span class="string">"T"</span><span class="keyword">,</span><span class="string">"G"</span><span class="keyword">=&gt;</span><span class="string">"C"</span><span class="keyword">)); </span><span class="comment">//output will be TCAGACGGGATC
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77255">  
  <a class="name">
  <strong class="user"><em>rob at ubrio dot us</em></strong></a><div class="date" title="2007-08-21 01:48"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom77255">
<div class="phpcode"><code><span class="html">
Also worth noting is that you can use array_keys()/array_values() with preg_replace like:
<br>
<br><span class="default">&lt;?php
<br>$subs </span><span class="keyword">= array(
<br>&nbsp; </span><span class="string">'/\[b\](.+)\[\/b\]/Ui' </span><span class="keyword">=&gt; </span><span class="string">'&lt;strong&gt;$1&lt;/strong&gt;'</span><span class="keyword">,
<br>&nbsp; </span><span class="string">'/_(.+)_/Ui' </span><span class="keyword">=&gt; </span><span class="string">'&lt;em&gt;$1&lt;/em&gt;'
<br>&nbsp; </span><span class="keyword">...
<br>&nbsp; ...
<br>);
<br>
<br></span><span class="default">$raw_text </span><span class="keyword">= </span><span class="string">'[b]this is bold[/b] and this is _italic!_'</span><span class="keyword">;
<br>
<br></span><span class="default">$bb_text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$subs</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$subs</span><span class="keyword">), </span><span class="default">$raw_text</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76665">  
  <a class="name">
  <strong class="user"><em>lehongviet at gmail dot com</em></strong></a><div class="date" title="2007-07-25 01:15"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76665">
<div class="phpcode"><code><span class="html">
I got problem echoing text that contains double-quotes into a text field. As it confuses value option. I use this function below to match and replace each pair of them by smart quotes. The last one will be replaced by a hyphen(-).
<br>
<br>It works for me.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">smart_quotes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/"((.)*?)"/i'</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="string">"“\\1”"</span><span class="keyword">,</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">));
<br>&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\""</span><span class="keyword">,</span><span class="string">"-"</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">addslashes</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);
<br>&nbsp; return </span><span class="default">$text</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69478">  
  <a class="name">
  <strong class="user"><em>Alexey Lebedev</em></strong></a><div class="date" title="2006-09-07 02:21"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69478">
<div class="phpcode"><code><span class="html">
Wasted several hours because of this:
<br>
<br><span class="default">&lt;?php
<br>$str</span><span class="keyword">=</span><span class="string">'It&amp;#039;s a string with HTML entities'</span><span class="keyword">;
<br></span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~&amp;#(\d+);~e'</span><span class="keyword">, </span><span class="string">'code2utf($1)'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>This code must convert numeric html entities to utf8. And it does with a little exception. It treats wrong codes starting with &amp;#0
<br>
<br>The reason is that code2utf will be called with leading zero, exactly what the pattern matches - code2utf(039).
<br>And it does matter! PHP treats 039 as octal number.
<br>Try <span class="default">&lt;?php </span><span class="keyword">print(</span><span class="default">011</span><span class="keyword">); </span><span class="default">?&gt;
<br></span>
<br>Solution:
<br><span class="default">&lt;?php preg_replace</span><span class="keyword">(</span><span class="string">'~&amp;#0*(\d+);~e'</span><span class="keyword">, </span><span class="string">'code2utf($1)'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74037">  
  <a class="name">
  <strong class="user"><em>ismith at nojunk dot motorola dot com</em></strong></a><div class="date" title="2007-03-21 09:47"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74037">
<div class="phpcode"><code><span class="html">
Be aware that when using the "/u" modifier, if your input text contains any bad UTF-8 code sequences, then preg_replace will return an empty string, regardless of whether there were any matches.<br><br>This is due to the PCRE library returning an error code if the string contains bad UTF-8.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73063">  
  <a class="name">
  <strong class="user"><em>dani dot church at gmail dot youshouldknowthisone</em></strong></a><div class="date" title="2007-02-07 11:09"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73063">
<div class="phpcode"><code><span class="html">
Note that it is in most cases much more efficient to use preg_replace_callback(), with a named function or an anonymous function created with create_function(), instead of the /e modifier.&nbsp; When preg_replace() is called with the /e modifier, the interpreter must parse the replacement string into PHP code once for every replacement made, while preg_replace_callback() uses a function that only needs to be parsed once.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85722">  
  <a class="name">
  <strong class="user"><em>tal at ashkenazi dot co dot il</em></strong></a><div class="date" title="2008-09-14 01:46"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85722">
<div class="phpcode"><code><span class="html">
after long time of tring get rid of \n\r and &lt;BR&gt; stuff i've came with this... <br>(i done some changes in clicklein() function...)<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">clickable</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\r"</span><span class="keyword">,</span><span class="string">"\r"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\n"</span><span class="keyword">,</span><span class="string">"\n&lt;BR&gt;"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\n\\r"</span><span class="keyword">,</span><span class="string">"\n\r"</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$in</span><span class="keyword">=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'`((?:https?|ftp)://\S+[[:alnum:]]/?)`si'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'`((?&lt;!//)(www\.\S+[[:alnum:]]/?))`si'<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">=array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;a href="$1"&nbsp; rel=nofollow&gt;$1&lt;/a&gt; '</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'&lt;a href="<a rel="nofollow" target="_blank">http://$1</a>" rel=\'nofollow\'&gt;$1&lt;/a&gt;'<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$in</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84816">  
  <a class="name">
  <strong class="user"><em>halityesil [ at at] globya [ dot dot] net</em></strong></a><div class="date" title="2008-07-31 06:08"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84816">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?PHP<br><br></span><span class="keyword">function </span><span class="default">strip_tags_attributes</span><span class="keyword">(</span><span class="default">$sSource</span><span class="keyword">, </span><span class="default">$aAllowedTags </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$aDisabledAttributes </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">, </span><span class="default">$aAllowedProperties </span><span class="keyword">= </span><span class="string">'font|font-size|font-weight|color' </span><span class="keyword">. </span><span class="string">'|text-align|text-decoration|margin|margin-left' </span><span class="keyword">. </span><span class="string">'|margin-top|margin-bottom|margin-right|padding' </span><span class="keyword">. </span><span class="string">'|padding-top|padding-left|padding-right|padding-bottom' </span><span class="keyword">. </span><span class="string">'|width|height'</span><span class="keyword">){<br><br>&nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$aDisabledAttributes </span><span class="keyword">) ){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$aDisabledAttributes </span><span class="keyword">= array(</span><span class="string">'onabort'</span><span class="keyword">, </span><span class="string">'onactivate'</span><span class="keyword">, </span><span class="string">'onafterprint'</span><span class="keyword">, </span><span class="string">'onafterupdate'</span><span class="keyword">, </span><span class="string">'onbeforeactivate'</span><span class="keyword">, </span><span class="string">'onbeforecopy'</span><span class="keyword">, </span><span class="string">'onbeforecut'</span><span class="keyword">, </span><span class="string">'onbeforedeactivate'</span><span class="keyword">, </span><span class="string">'onbeforeeditfocus'</span><span class="keyword">, </span><span class="string">'onbeforepaste'</span><span class="keyword">, </span><span class="string">'onbeforeprint'</span><span class="keyword">, </span><span class="string">'onbeforeunload'</span><span class="keyword">, </span><span class="string">'onbeforeupdate'</span><span class="keyword">, </span><span class="string">'onblur'</span><span class="keyword">, </span><span class="string">'onbounce'</span><span class="keyword">, </span><span class="string">'oncellchange'</span><span class="keyword">, </span><span class="string">'onchange'</span><span class="keyword">, </span><span class="string">'onclick'</span><span class="keyword">, </span><span class="string">'oncontextmenu'</span><span class="keyword">, </span><span class="string">'oncontrolselect'</span><span class="keyword">, </span><span class="string">'oncopy'</span><span class="keyword">, </span><span class="string">'oncut'</span><span class="keyword">, </span><span class="string">'ondataavaible'</span><span class="keyword">, </span><span class="string">'ondatasetchanged'</span><span class="keyword">, </span><span class="string">'ondatasetcomplete'</span><span class="keyword">, </span><span class="string">'ondblclick'</span><span class="keyword">, </span><span class="string">'ondeactivate'</span><span class="keyword">, </span><span class="string">'ondrag'</span><span class="keyword">, </span><span class="string">'ondragdrop'</span><span class="keyword">, </span><span class="string">'ondragend'</span><span class="keyword">, </span><span class="string">'ondragenter'</span><span class="keyword">, </span><span class="string">'ondragleave'</span><span class="keyword">, </span><span class="string">'ondragover'</span><span class="keyword">, </span><span class="string">'ondragstart'</span><span class="keyword">, </span><span class="string">'ondrop'</span><span class="keyword">, </span><span class="string">'onerror'</span><span class="keyword">, </span><span class="string">'onerrorupdate'</span><span class="keyword">, </span><span class="string">'onfilterupdate'</span><span class="keyword">, </span><span class="string">'onfinish'</span><span class="keyword">, </span><span class="string">'onfocus'</span><span class="keyword">, </span><span class="string">'onfocusin'</span><span class="keyword">, </span><span class="string">'onfocusout'</span><span class="keyword">, </span><span class="string">'onhelp'</span><span class="keyword">, </span><span class="string">'onkeydown'</span><span class="keyword">, </span><span class="string">'onkeypress'</span><span class="keyword">, </span><span class="string">'onkeyup'</span><span class="keyword">, </span><span class="string">'onlayoutcomplete'</span><span class="keyword">, </span><span class="string">'onload'</span><span class="keyword">, </span><span class="string">'onlosecapture'</span><span class="keyword">, </span><span class="string">'onmousedown'</span><span class="keyword">, </span><span class="string">'onmouseenter'</span><span class="keyword">, </span><span class="string">'onmouseleave'</span><span class="keyword">, </span><span class="string">'onmousemove'</span><span class="keyword">, </span><span class="string">'onmoveout'</span><span class="keyword">, </span><span class="string">'onmouseover'</span><span class="keyword">, </span><span class="string">'onmouseup'</span><span class="keyword">, </span><span class="string">'onmousewheel'</span><span class="keyword">, </span><span class="string">'onmove'</span><span class="keyword">, </span><span class="string">'onmoveend'</span><span class="keyword">, </span><span class="string">'onmovestart'</span><span class="keyword">, </span><span class="string">'onpaste'</span><span class="keyword">, </span><span class="string">'onpropertychange'</span><span class="keyword">, </span><span class="string">'onreadystatechange'</span><span class="keyword">, </span><span class="string">'onreset'</span><span class="keyword">, </span><span class="string">'onresize'</span><span class="keyword">, </span><span class="string">'onresizeend'</span><span class="keyword">, </span><span class="string">'onresizestart'</span><span class="keyword">, </span><span class="string">'onrowexit'</span><span class="keyword">, </span><span class="string">'onrowsdelete'</span><span class="keyword">, </span><span class="string">'onrowsinserted'</span><span class="keyword">, </span><span class="string">'onscroll'</span><span class="keyword">, </span><span class="string">'onselect'</span><span class="keyword">, </span><span class="string">'onselectionchange'</span><span class="keyword">, </span><span class="string">'onselectstart'</span><span class="keyword">, </span><span class="string">'onstart'</span><span class="keyword">, </span><span class="string">'onstop'</span><span class="keyword">, </span><span class="string">'onsubmit'</span><span class="keyword">, </span><span class="string">'onunload'</span><span class="keyword">);<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; <br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">stripcslashes</span><span class="keyword">( </span><span class="default">$sSource </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">strip_tags</span><span class="keyword">( </span><span class="default">$sSource</span><span class="keyword">, </span><span class="default">$aAllowedTags </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; if( empty(</span><span class="default">$aDisabledAttributes</span><span class="keyword">) ){<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">$sSource</span><span class="keyword">;<br>&nbsp;&nbsp; }<br><br>&nbsp;&nbsp; </span><span class="default">$aDisabledAttributes </span><span class="keyword">= @ </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">, </span><span class="default">$aDisabledAttributes</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;(.*?)&gt;/ie'</span><span class="keyword">, </span><span class="string">"'&lt;' . preg_replace(array('/javascript:[^\"\']*/i', '/(" </span><span class="keyword">. </span><span class="default">$aDisabledAttributes </span><span class="keyword">. </span><span class="string">")[ \\t\\n]*=[ \\t\\n]*[\"\'][^\"\']*[\"\']/i', '/\s+/'), array('', '', ' '), stripslashes('\\1')) . '&gt;'"</span><span class="keyword">, </span><span class="default">$sSource </span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/\s(' </span><span class="keyword">. </span><span class="default">$aDisabledAttributes </span><span class="keyword">. </span><span class="string">').*?([\s\&gt;])/'</span><span class="keyword">, </span><span class="string">'\\2'</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; </span><span class="default">$regexp </span><span class="keyword">= </span><span class="string">'@([^;"]+)?(?&lt;!'</span><span class="keyword">. </span><span class="default">$aAllowedProperties </span><span class="keyword">.</span><span class="string">'):(?!\/\/(.+?)\/)((.*?)[^;"]+)(;)?@is'</span><span class="keyword">;&nbsp; &nbsp; <br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$regexp</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$sSource </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'@[a-z]*=""@is'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$sSource</span><span class="keyword">); <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp; return </span><span class="default">$sSource</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Online resource help skype name : globya <br><br>good luck !</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76467">  
  <a class="name">
  <strong class="user"><em>131 dot php at cloudyks dot org</em></strong></a><div class="date" title="2007-07-17 04:37"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76467">
<div class="phpcode"><code><span class="html">
Based on previous comment, i suggest 
<br>( this function already exist in php 6 )
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">unicode_decode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">){
<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'#\\\u([0-9a-f]{4})#e'</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"unicode_value('\\1')"</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str</span><span class="keyword">);
<br>}
<br>
<br>function </span><span class="default">unicode_value</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$value</span><span class="keyword">=</span><span class="default">hexdec</span><span class="keyword">(</span><span class="default">$code</span><span class="keyword">);
<br>&nbsp; &nbsp; if(</span><span class="default">$value</span><span class="keyword">&lt;</span><span class="default">0x0080</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">chr</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; elseif(</span><span class="default">$value</span><span class="keyword">&lt;</span><span class="default">0x0800</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x07c0</span><span class="keyword">)&gt;&gt;</span><span class="default">6</span><span class="keyword">)|</span><span class="default">0xc0</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .</span><span class="default">chr</span><span class="keyword">((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x3f</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">);
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0xf000</span><span class="keyword">)&gt;&gt;</span><span class="default">12</span><span class="keyword">)|</span><span class="default">0xe0</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; .</span><span class="default">chr</span><span class="keyword">(((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x0fc0</span><span class="keyword">)&gt;&gt;</span><span class="default">6</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; .</span><span class="default">chr</span><span class="keyword">((</span><span class="default">$value</span><span class="keyword">&amp;</span><span class="default">0x3f</span><span class="keyword">)|</span><span class="default">0x80</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>[EDIT BY danbrown AT php DOT net:&nbsp; This function originally written by mrozenoer AT overstream DOT net.]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64828">  
  <a class="name">
  <strong class="user"><em>robvdl at gmail dot com</em></strong></a><div class="date" title="2006-04-21 05:15"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64828">
<div class="phpcode"><code><span class="html">
For those of you that have ever had the problem where clients paste text from msword into a CMS, where word has placed all those fancy quotes throughout the text, breaking the XHTML validator... I have created a nice regular expression, that replaces ALL high UTF-8 characters with HTML entities, such as ’.
<br>
<br>Note that most user examples on php.net I have read, only replace selected characters, such as single and double quotes. This replaces all high characters, including greek characters, arabian characters, smilies, whatever.
<br>
<br>It took me ages to get it just downto two regular expressions, but it handles all high level characters properly.
<br>
<br><span class="default">&lt;?php
<br>$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([\xc0-\xdf].)/se'</span><span class="keyword">, </span><span class="string">"'&amp;#' . ((ord(substr('$1', 0, 1)) - 192) * 64 + (ord(substr('$1', 1, 1)) - 128)) . ';'"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);
<br></span><span class="default">$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/([\xe0-\xef]..)/se'</span><span class="keyword">, </span><span class="string">"'&amp;#' . ((ord(substr('$1', 0, 1)) - 224) * 4096 + (ord(substr('$1', 1, 1)) - 128) * 64 + (ord(substr('$1', 2, 1)) - 128)) . ';'"</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36810">  
  <a class="name">
  <strong class="user"><em>thewolf at pixelcarnage dot com</em></strong></a><div class="date" title="2003-10-23 07:38"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36810">
<div class="phpcode"><code><span class="html">
I got sick of trying to replace just a word, so I decided I would write my own string replacement code. When that code because far to big and a little faulty I decided to use a simple preg_replace:
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * Written by Rowan Lewis
<br> * $search(string), the string to be searched for
<br> * $replace(string), the string to replace $search
<br> * $subject(string), the string to be searched in
<br> */
<br></span><span class="keyword">function </span><span class="default">word_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {
<br>&nbsp; &nbsp; return </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[a-zA-Z]+/e'</span><span class="keyword">, </span><span class="string">'\'\0\' == \'' </span><span class="keyword">. </span><span class="default">$search </span><span class="keyword">. </span><span class="string">'\' ? \'' </span><span class="keyword">. </span><span class="default">$replace </span><span class="keyword">. </span><span class="string">'\': \'\0\';'</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>I hope that this code helpes someone!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="39713">  
  <a class="name">
  <strong class="user"><em>steven -a-t- acko dot net</em></strong></a><div class="date" title="2004-02-08 09:45"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom39713">
<div class="phpcode"><code><span class="html">
People using the /e modifier with preg_replace should be aware of the following weird behaviour. It is not a bug per se, but can cause bugs if you don't know it's there.<br><br>The example in the docs for /e suffers from this mistake in fact.<br><br>With /e, the replacement string is a PHP expression. So when you use a backreference in the replacement expression, you need to put the backreference inside quotes, or otherwise it would be interpreted as PHP code. Like the example from the manual for preg_replace:<br><br>preg_replace("/(&lt;\/?)(\w+)([^&gt;]*&gt;)/e",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; "'\\1'.strtoupper('\\2').'\\3'",<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $html_body);<br><br>To make this easier, the data in a backreference with /e is run through addslashes() before being inserted in your replacement expression. So if you have the string<br><br> He said: "You're here"<br><br>It would become:<br><br> He said: \"You\'re here\"<br><br>...and be inserted into the expression.<br>However, if you put this inside a set of single quotes, PHP will not strip away all the slashes correctly! Try this:<br><br> print ' He said: \"You\'re here\" ';<br> Output: He said: \"You're here\"<br><br>This is because the sequence \" inside single quotes is not recognized as anything special, and it is output literally.<br><br>Using double-quotes to surround the string/backreference will not help either, because inside double-quotes, the sequence \' is not recognized and also output literally. And in fact, if you have any dollar signs in your data, they would be interpreted as PHP variables. So double-quotes are not an option.<br><br>The 'solution' is to manually fix it in your expression. It is easiest to use a separate processing function, and do the replacing there (i.e. use "my_processing_function('\\1')" or something similar as replacement expression, and do the fixing in that function).<br><br>If you surrounded your backreference by single-quotes, the double-quotes are corrupt:<br>$text = str_replace('\"', '"', $text);<br><br>People using preg_replace with /e should at least be aware of this.<br><br>I'm not sure how it would be best fixed in preg_replace. Because double-quotes are a really bad idea anyway (due to the variable expansion), I would suggest that preg_replace's auto-escaping is modified to suit the placement of backreferences inside single-quotes (which seemed to be the intention from the start, but was incorrectly applied).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112363">  
  <a class="name">
  <strong class="user"><em>jas at rephunter dot net</em></strong></a><div class="date" title="2013-06-06 05:00"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112363">
<div class="phpcode"><code><span class="html">
It is recommended that str_replace should be used instead of preg_replace when regex is not needed. In particular, at <a rel="nofollow" target="_blank">http://php.net/manual/en/function.str-replace.php</a> it says "If you don't need fancy replacing rules (like regular expressions), you should always use this function instead of preg_replace()."<br><br>While this is usually true, I have found a significant exception to this guideline and benchmarked to show that str_replace is in fact slower in the case when the pattern to be replaced is an array. In particular, when the number of elements in the pattern gets to be around 7, then the preg_replace is faster. Of course this would depend on the specifics of the regex.<br><br>In my case I had pattern arrays with about 40 elements. This becomes far slower with str_replace when there is a simple regex that will do the job.<br><br>Below is the benchmark with some examples of arrays for patterns and an equivalent regex.<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Title:&nbsp; &nbsp; Test Harness<br> * Author:&nbsp; &nbsp; **********<br> * Date:&nbsp; &nbsp; 27-May-13<br> * Project:&nbsp; &nbsp; *********<br> * Purpose:&nbsp; &nbsp; Test timer comparing str_replace and preg_replace<br> *<br> * Results:<br> *<br> * 1. preg_replace is a lot faster!<br> * empty loop takes 0.12380504608154 microseconds.<br> * Array size: 34<br> *&nbsp; *** str_replace:&nbsp; 6.0163598060608 microseconds.<br> *&nbsp; *** preg_replace: 2.1114869117737 microseconds.<br> *<br> * 2. str_replace is faster:<br> * empty loop takes 0.11837291717529 microseconds.<br> * Array size: 3<br> *&nbsp; *** str_replace:&nbsp; 1.7525472640991 microseconds.<br> *&nbsp; *** preg_replace: 2.0717389583588 microseconds.<br> *<br> * 3. preg_replace is faster:<br> * empty loop takes 0.11982989311218 microseconds.<br> * Array size: 10<br> *&nbsp; *** str_replace:&nbsp; 2.6692891120911 microseconds.<br> *&nbsp; *** preg_replace: 2.2716360092163 microseconds.<br> *<br> * 3. about the same: 6 element array is breakeven point to switch to preg_replace<br> * empty loop takes 0.12036299705505 microseconds.<br> * Array size: 6<br> *&nbsp; *** str_replace:&nbsp; 2.0874700546265 microseconds.<br> *&nbsp; *** preg_replace: 2.1840009689331 microseconds.<br> *<br> */<br><br></span><span class="default">$iterations </span><span class="keyword">= </span><span class="default">1000000</span><span class="keyword">;<br></span><span class="default">$str1 </span><span class="keyword">= </span><span class="string">'this is a - test'</span><span class="keyword">;<br><br></span><span class="comment">// empty loop<br></span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$empty_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br>echo </span><span class="string">"empty loop takes </span><span class="default">$empty_loop_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br><br></span><span class="comment">// test1 loop<br>// alternate array variations<br>//$aStr = array('\r\n','\r','\n','%','.','(',')',':',';','&amp;',"\x07","\x15",'!','\'','"',<br></span><span class="string">'#'</span><span class="keyword">,</span><span class="string">'^'</span><span class="keyword">,</span><span class="string">'*'</span><span class="keyword">,</span><span class="string">'_'</span><span class="keyword">,</span><span class="string">'='</span><span class="keyword">,</span><span class="string">'+'</span><span class="keyword">,</span><span class="string">'\\'</span><span class="keyword">,</span><span class="string">'?'</span><span class="keyword">,</span><span class="string">'|'</span><span class="keyword">,</span><span class="string">'&lt;'</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">,</span><span class="string">'{'</span><span class="keyword">,</span><span class="string">'}'</span><span class="keyword">,</span><span class="string">'’'</span><span class="keyword">,</span><span class="string">'`'</span><span class="keyword">,</span><span class="string">'~'</span><span class="keyword">,</span><span class="string">'“'</span><span class="keyword">,</span><span class="string">'?'</span><span class="keyword">,</span><span class="string">'$'</span><span class="keyword">);<br></span><span class="comment">//$aStr = array('\r\n','\r','\n');<br>//$aStr = array('0','1','2','3','4','5','6','7','8','9');<br></span><span class="default">$aStr </span><span class="keyword">= array(</span><span class="string">'0'</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">,</span><span class="string">'6'</span><span class="keyword">);<br></span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$aStr</span><span class="keyword">);<br>echo </span><span class="string">'Array size: ' </span><span class="keyword">. </span><span class="default">$cnt </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br></span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>&nbsp; &nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$aStr</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$str1</span><span class="keyword">);<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$test1_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br><br>echo </span><span class="string">' *** str_replace:&nbsp; '</span><span class="keyword">;<br></span><span class="default">$test_time </span><span class="keyword">= (</span><span class="default">$test1_loop_time </span><span class="keyword">- </span><span class="default">$empty_loop_time</span><span class="keyword">) * </span><span class="default">1000000 </span><span class="keyword">/ </span><span class="default">$iterations</span><span class="keyword">;<br>echo </span><span class="string">"</span><span class="default">$test_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br><br></span><span class="comment">// test2 loop<br></span><span class="default">$begin </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$iterations</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>&nbsp; &nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/[^a-zA-Z\s]/'</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="default">$str1</span><span class="keyword">);<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$test2_loop_time </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$begin</span><span class="keyword">;<br><br>echo </span><span class="string">' *** preg_replace: '</span><span class="keyword">;<br></span><span class="default">$test_time </span><span class="keyword">= (</span><span class="default">$test2_loop_time </span><span class="keyword">- </span><span class="default">$empty_loop_time</span><span class="keyword">) * </span><span class="default">1000000 </span><span class="keyword">/ </span><span class="default">$iterations</span><span class="keyword">;<br>echo </span><span class="string">"</span><span class="default">$test_time</span><span class="string"> microseconds.\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110077">  
  <a class="name">
  <strong class="user"><em>henke at henke37 dot cjb dot net</em></strong></a><div class="date" title="2012-09-17 01:36"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110077">
<div class="phpcode"><code><span class="html">
Warning: not all strings are from a regular language, some are from context free grammars.<br><br>Here is a pair of strings that are impossible to correctly parse with regular expressions:<br><br>a*(b+(c*d)-e)/(f-(g*h)+i)-j<br><br>a[i]b[i]c[/i]d[/i]e[i]f[i]g[/i]h[/i]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109363">  
  <a class="name">
  <strong class="user"><em>zzapper</em></strong></a><div class="date" title="2012-07-10 05:07"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109363">
<div class="phpcode"><code><span class="html">
yes you can use different pattern delimiters useful when working on an Url
<br>
<br><span class="default">&lt;?php
<br>$logo</span><span class="keyword">=</span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'#\\.\\./images#'</span><span class="keyword">,</span><span class="string">'/images'</span><span class="keyword">,</span><span class="default">$logo</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105943">  
  <a class="name">
  <strong class="user"><em>erik dot stetina at gmail dot com</em></strong></a><div class="date" title="2011-09-27 03:25"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105943">
<div class="phpcode"><code><span class="html">
simple function to remove comments from string<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">remove_comments</span><span class="keyword">( &amp; </span><span class="default">$string </span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"%(#|;|(//)).*%"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br>&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">"%/\*(?:(?!\*/).)*\*/%s"</span><span class="keyword">,</span><span class="string">""</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">); </span><span class="comment">// google for negative lookahead<br>&nbsp; </span><span class="keyword">return </span><span class="default">$string</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>USAGE:<br><span class="default">&lt;?php<br>$config </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">"config.cfg"</span><span class="keyword">);<br>print </span><span class="string">"before:"</span><span class="keyword">.</span><span class="default">$config</span><span class="keyword">;<br></span><span class="default">remove_comments</span><span class="keyword">(</span><span class="default">$config</span><span class="keyword">);<br>print </span><span class="string">"after:"</span><span class="keyword">.</span><span class="default">$config</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>OUTPUT:<br>before:<br>/*<br> *&nbsp; this is config file<br> */<br>; logdir<br>LOGDIR ./log/<br>// logfile<br>LOGFILE main.log<br># loglevel<br>LOGLEVEL 3<br>after:<br><br>LOGDIR ./log/<br><br>LOGFILE main.log<br><br>LOGLEVEL 3</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84385">  
  <a class="name">
  <strong class="user"><em>David</em></strong></a><div class="date" title="2008-07-11 04:59"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84385">
<div class="phpcode"><code><span class="html">
Take care when you try to strip whitespaces out of an UTF-8 text. Using something like:<br><br><span class="default">&lt;?php<br>$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">"{\s+}"</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>brokes in my case the letter à which is hex c3a0. But a0 is a whitespace. So use <br><br><span class="default">&lt;?php<br>$text </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">( </span><span class="string">"{[ \t]+}"</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>to strip all spaces and tabs, or better, use a multibyte function like mb_ereg_replace.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104965">  
  <a class="name">
  <strong class="user"><em>sreekanth at outsource-online dot net</em></strong></a><div class="date" title="2011-07-19 01:29"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104965">
<div class="phpcode"><code><span class="html">
if your intention to code and decode mod_rewrite urls and handle it with php and mysql ,this should work<br><br>to convert to url<br>$url = preg_replace('/[^A-Za-z0-9_-]+/', '-', $string);<br><br>And to check in mysql with the url value,use the same expression discounting '-'.<br>first replace the url value&nbsp; with php using preg_replace&nbsp; and use with mysql REGEXP<br><br>$sql = "select * from table where fieldname_to_check REGEXP '".preg_replace("/-+/",'[^A-Za-z0-9_]+',$url)."'"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88834">  
  <a class="name">
  <strong class="user"><em>Svoop</em></strong></a><div class="date" title="2009-02-10 05:41"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88834">
<div class="phpcode"><code><span class="html">
I have written a short introduction and a colorful cheat sheet for Perl Compatible Regular Expressions (PCRE):<br><br><a rel="nofollow" target="_blank">http://www.bitcetera.com/en/techblog/2008/04/01/regex-in-a-nutshell/</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="96455">  
  <a class="name">
  <strong class="user"><em>roscoe-p-coltrane</em></strong></a><div class="date" title="2010-02-27 10:43"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96455">
<div class="phpcode"><code><span class="html">
Reading arguments against variables in CSS got me to thinking. <br><br>Process your CSS files in a fashion similar to the following. This particular routine is certainly not the most efficient way, but is what I came up with on the spur of the moment. The prefix token is entirely arbitrary - everything between the leading colon and terminating semicolon is the target. In this way, default values can be put in place, and the constant identifiers simply left as comments, should the stylesheet be used without processing; this would also inhibit your editor from emitting errors about your odd syntax. The declaration pattern at the top assumes something like this:<br><br>/*@css_const<br> [<br>&nbsp; &nbsp;&nbsp; bgc_a=#ccccee,<br>&nbsp; &nbsp; &nbsp; &nbsp; fc_a=#000099,<br>&nbsp; &nbsp;&nbsp; bgc_b=#5555cc,<br>&nbsp; &nbsp;&nbsp; bgc_c=#eeeeff,<br>&nbsp; &nbsp;&nbsp; bgc_d=#599fee<br> ]<br>*/<br><br>...within the target CSS file.<br><br>Usage like so:<br><br>.Element {<br>&nbsp; &nbsp;&nbsp; font-size:10pt;<br>&nbsp; &nbsp;&nbsp; color:#000/*fc_a*/;<br>&nbsp; &nbsp;&nbsp; background-color:#fff/*bgc_a*/;<br>}<br><br>And then...<br><br><span class="default">&lt;?php<br>$dec_pat </span><span class="keyword">= </span><span class="string">'/^\/\*\@css_const\s+\[(.*)\]\s+\*\//Ums'</span><span class="keyword">;<br></span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="default">$dec_pat</span><span class="keyword">,</span><span class="default">$css</span><span class="keyword">,</span><span class="default">$m</span><span class="keyword">);<br></span><span class="default">$lhs </span><span class="keyword">= array();<br></span><span class="default">$rhs </span><span class="keyword">= array();<br>foreach(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as &amp;</span><span class="default">$p</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$p </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">,</span><span class="default">$p</span><span class="keyword">);<br>&nbsp; &nbsp; foreach(</span><span class="default">$p </span><span class="keyword">as &amp;</span><span class="default">$q</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; list(</span><span class="default">$k</span><span class="keyword">,</span><span class="default">$v</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">,</span><span class="default">trim</span><span class="keyword">(</span><span class="default">$q</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lhs</span><span class="keyword">[] = </span><span class="string">'/(\w+\:).*\/\*' </span><span class="keyword">. </span><span class="default">$k </span><span class="keyword">. </span><span class="string">'\*\/;$/Um'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rhs</span><span class="keyword">[] = </span><span class="string">'\1' </span><span class="keyword">. </span><span class="default">$v </span><span class="keyword">. </span><span class="string">';'</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">$css </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$lhs</span><span class="keyword">,</span><span class="default">$rhs</span><span class="keyword">,</span><span class="default">$css</span><span class="keyword">);<br></span><span class="comment">// spit it out or return it; whatever<br></span><span class="default">?&gt;<br></span><br>...resulting, of course, in:<br><br>.Element {<br>&nbsp; &nbsp;&nbsp; font-size:10pt;<br>&nbsp; &nbsp;&nbsp; color:#000099;<br>&nbsp; &nbsp;&nbsp; background-color:#ccccee;<br>}<br><br>Again, efficiency was not the immediate goal, so please don't slay me...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105956">  
  <a class="name">
  <strong class="user"><em>randall dot reynolds at rightnow dot com</em></strong></a><div class="date" title="2011-09-27 05:01"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105956">
<div class="phpcode"><code><span class="html">
The instructions say, use \\\\ (four backslashes) to represent a backslash.&nbsp; You can shorthand this and use \\\ (three backslashes) to represent a backslash, because of the way the parsers read it.<br><br>It appears the double escaping is required because the string is parsed twice, once by PHP and once by the regular expression generator. Thus it is expected that the PHP parser turns both instances above into \\ (two backslashes) for the PCRE parser.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.preg-replace.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:08 GMT -->


</body></html>