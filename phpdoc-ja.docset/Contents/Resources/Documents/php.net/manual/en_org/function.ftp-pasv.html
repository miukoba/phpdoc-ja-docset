<html><!-- Mirrored from php.net/manual/en/function.ftp-pasv.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:26 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>ftp_pasv</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.ftp-pasv.html">
 <link rel="shorturl" href="http://php.net/ftp-pasv">
 <link rel="alternate" href="http://php.net/ftp-pasv" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.ftp.html">
 <link rel="prev" href="function.ftp-nlist.html">
 <link rel="next" href="function.ftp-put.html">

 <link rel="alternate" href="function.ftp-pasv.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.ftp-pasv.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.ftp-pasv.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.ftp-pasv.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.ftp-pasv.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.ftp-pasv.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.ftp-pasv.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.ftp-pasv.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.ftp-pasv.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.ftp-pasv.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.ftp-pasv.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.ftp.html">FTP</a></li>      <li><a href="ref.ftp.html">FTP Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.ftp-pasv" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ftp_pasv</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">ftp_pasv</span> â€” <span class="dc-title">Turns passive mode on or off</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.ftp-pasv-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>ftp_pasv</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$ftp_stream</code></span>
   , <span class="methodparam"><span class="type">bool</span> <code class="parameter">$pasv</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>ftp_pasv()</strong></span> turns on or off passive mode. In
   passive mode, data connections are initiated by the client,
   rather than by the server.
   It may be needed if the client is behind firewall.
  </p>
  <p class="para">
   Please note that <span class="function"><strong>ftp_pasv()</strong></span> can only be called after a
   successfull login or otherwise it will fail.
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.ftp-pasv-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">ftp_stream</code></dt>

     <dd>

      <p class="para">
       The link identifier of the FTP connection.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">pasv</code></dt>

     <dd>

      <p class="para">
       If <strong><code>TRUE</code></strong>, the passive mode is turned on, else it's turned off.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.ftp-pasv-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.ftp-pasv-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4413">
    <p><strong>Example #1 <span class="function"><strong>ftp_pasv()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'somefile.txt'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$remote_file&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'readme.txt'</span><span style="color: #007700">;<br><br></span><span style="color: #FF8000">//&nbsp;set&nbsp;up&nbsp;basic&nbsp;connection<br></span><span style="color: #0000BB">$conn_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;login&nbsp;with&nbsp;username&nbsp;and&nbsp;password<br></span><span style="color: #0000BB">$login_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;turn&nbsp;passive&nbsp;mode&nbsp;on<br></span><span style="color: #0000BB">ftp_pasv</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;upload&nbsp;a&nbsp;file<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">ftp_put</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$remote_file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FTP_ASCII</span><span style="color: #007700">))&nbsp;{<br>&nbsp;echo&nbsp;</span><span style="color: #DD0000">"successfully&nbsp;uploaded&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;echo&nbsp;</span><span style="color: #DD0000">"There&nbsp;was&nbsp;a&nbsp;problem&nbsp;while&nbsp;uploading&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #FF8000">//&nbsp;close&nbsp;the&nbsp;connection<br></span><span style="color: #0000BB">ftp_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="98837">  
  <a class="name">
  <strong class="user"><em>mac at codegreene dot com</em></strong></a><div class="date" title="2010-07-09 03:20"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98837">
<div class="phpcode"><code><span class="html">
I found one place that required passive mode to function properly, but the initial error manifested itself in an odd way:<br><br>PHP Warning:&nbsp; ftp_put(): TYPE is now ASCII in &lt;file.php&gt; on line &lt;#&gt;<br><br>or <br><br>PHP Warning:&nbsp; ftp_put(): TYPE is now 8 BIT BINARY in &lt;file.php&gt; on line &lt;#&gt;<br><br>The other symptom is that it was taking a long time, perhaps the 90 seconds that the timeout was set to. No errors occurred upon connect, just when I tried ftp_put().<br><br>Once I turned on ftp_pasv() it worked, both in the place where active mode worked, and on the server where active mode wouldn't work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114973">  
  <a class="name">
  <strong class="user"><em>sameg14 at gmail dot com</em></strong></a><div class="date" title="2014-05-07 11:06"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom114973">
<div class="phpcode"><code><span class="html">
If you are running filezilla in passive mode, on windows, and try to connect using PHP, you might encounter an error that reads "425 Can't open data connection for transfer of ..."<br>This error is not indicative of a passive mode issue, but can be resolved by using <br><span class="default">&lt;?php<br>ftp_pasv</span><span class="keyword">(</span><span class="default">$conn</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111439">  
  <a class="name">
  <strong class="user"><em>marc at gutt dot it</em></strong></a><div class="date" title="2013-02-20 09:32"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111439">
<div class="phpcode"><code><span class="html">
If you are still having problems after choosing ftp_pasv() you should refresh the connection through ftp_close() / ftp_connect() after x files and/or y GB have been transfered.<br><br>It solved several (random) occurring problems like:<br><br>ftp_get(): Opening BINARY mode data connection<br><br>ftp_get(): Entering Passive Mode<br><br>Hint: fopen() created a file so don't forget to delete it if an error occurred ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115472">  
  <a class="name">
  <strong class="user"><em>carda at two-wings dot net</em></strong></a><div class="date" title="2014-07-30 08:16"><strong>28 days ago</strong></div>
  <div class="text" id="Hcom115472">
<div class="phpcode"><code><span class="html">
It should be noted that ftp_pasv has to be called AFTER ftp_login (not after ftp_connect). May seem obvious to many but it took me three hours to find out...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93348">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-09-04 10:45"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93348">
<div class="phpcode"><code><span class="html">
If you find that you are receiving "Illegal PORT command" errors you may want to try enabling passive mode.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20576">  
  <a class="name">
  <strong class="user"><em>ybourbeau at edison dot ca</em></strong></a><div class="date" title="2002-04-08 03:28"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20576">
<div class="phpcode"><code><span class="html">
Directly from bsd FTP manual pages:<br><br>The PASV command requests that the remote server open a port for the data connection and return the address of that port.&nbsp; The remote server listens on that port and the client connects to it.<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; When using the more traditional PORT command, the client listens on a port and sends that address to the remote server, who connects back to it.&nbsp; Passive mode is useful when using ftp through a gateway router or host that controls the directionality of traffic.&nbsp; (Note that though ftp servers are required to support the PASV command by RFC 1123, some do not.)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="20441">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2002-04-03 04:19"><strong>12 years ago</strong></div>
  <div class="text" id="Hcom20441">
<div class="phpcode"><code><span class="html">
PASV: For ftp users behind firewall, the server LISTEN for a connection. <br><br>Non-PASV: The client LISTEN for a connection from server.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.ftp-pasv.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:00:26 GMT -->


</body></html>