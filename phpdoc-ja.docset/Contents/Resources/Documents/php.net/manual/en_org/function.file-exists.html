<html><!-- Mirrored from php.net/manual/en/function.file-exists.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:28:58 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>file_exists</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.file-exists.html">
 <link rel="shorturl" href="http://php.net/file-exists">
 <link rel="alternate" href="http://php.net/file-exists" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.filesystem.html">
 <link rel="prev" href="function.fgetss.html">
 <link rel="next" href="function.file-get-contents.html">

 <link rel="alternate" href="function.file-exists.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.file-exists.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.file-exists.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.file-exists.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.file-exists.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.file-exists.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.file-exists.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.file-exists.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.file-exists.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.file-exists.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.file-exists.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.fileprocess.file.html">File System Related Extensions</a></li>      <li><a href="book.filesystem.html">Filesystem</a></li>      <li><a href="ref.filesystem.html">Filesystem Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.file-exists" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">file_exists</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">file_exists</span> â€” <span class="dc-title">Checks whether a file or directory exists</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.file-exists-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>file_exists</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   )</div>

  <p class="para rdfs-comment">
   Checks whether a file or directory exists.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.file-exists-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Path to the file or directory.
      </p>
      <p class="para">
       On windows, use <var class="filename">//computername/share/filename</var> or
       <var class="filename">\\computername\share\filename</var> to check files on
       network shares.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.file-exists-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> if the file or directory specified by
   <code class="parameter">filename</code> exists; <strong><code>FALSE</code></strong> otherwise.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    This function will return <strong><code>FALSE</code></strong> for symlinks pointing to non-existing
    files.
   </p>
  <p></p></blockquote>
  <div class="warning"><strong class="warning">Warning</strong>
   <p class="para">
    This function returns <strong><code>FALSE</code></strong> for files inaccessible due to <a href="features.safe-mode.html" class="link">safe mode</a> restrictions. However these
    files still can be <a href="function.include.html" class="link">included</a> if
    they are located in <a href="ini.sect.safe-mode.html#ini.safe-mode-include-dir" class="link">safe_mode_include_dir</a>.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    The check is done using the real UID/GID instead of the effective one.
   </p>
  <p></p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">
    Because PHP's integer type is signed and many platforms use 32bit integers,
    some filesystem functions may return unexpected results for files which
    are larger than 2GB.
   </span></p></blockquote>
 </div>


 <div class="refsect1 examples" id="refsect1-function.file-exists-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2458">
    <p><strong>Example #1 Testing whether a file exists</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$filename&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/path/to/foo.txt'</span><span style="color: #007700">;<br><br>if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;file&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #DD0000">&nbsp;exists"</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"The&nbsp;file&nbsp;</span><span style="color: #0000BB">$filename</span><span style="color: #DD0000">&nbsp;does&nbsp;not&nbsp;exist"</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.file-exists-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
Upon failure, an <strong><code>E_WARNING</code></strong> is emitted.
</p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.file-exists-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: <span class="simpara">The results of this
function are cached. See <span class="function"><a href="function.clearstatcache.html" class="function">clearstatcache()</a></span> for
more details.</span></p></blockquote>
  <div class="tip"><strong class="tip">Tip</strong><p class="simpara">As of PHP 5.0.0, this function
can also be used with <em class="emphasis">some</em> URL wrappers.  Refer to
<a href="wrappers.html" class="xref">Supported Protocols and Wrappers</a> to determine which wrappers support
<span class="function"><a href="function.stat.html" class="function">stat()</a></span> family of functionality.</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.file-exists-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-readable.html" class="function" rel="rdfs-seeAlso">is_readable()</a> - Tells whether a file exists and is readable</span></li>
    <li class="member"><span class="function"><a href="function.is-writable.html" class="function" rel="rdfs-seeAlso">is_writable()</a> - Tells whether the filename is writable</span></li>
    <li class="member"><span class="function"><a href="function.is-file.html" class="function" rel="rdfs-seeAlso">is_file()</a> - Tells whether the filename is a regular file</span></li>
    <li class="member"><span class="function"><a href="function.file.html" class="function" rel="rdfs-seeAlso">file()</a> - Reads entire file into an array</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="115024">  
  <a class="name">
  <strong class="user"><em>broken at links dot com</em></strong></a><div class="date" title="2014-05-14 12:29"><strong>3 months ago</strong></div>
  <div class="text" id="Hcom115024">
<div class="phpcode"><code><span class="html">
file_exists() will return FALSE for broken links<br><br>$ ln -s does_not_exist my_link<br>$ ls -l<br>lrwxr-xr-x&nbsp;&nbsp; 1 user&nbsp; group&nbsp; &nbsp; 14 May 13 17:28 my_link -&gt; does_not_exist<br>$ php -r "var_dump(file_exists('my_link'));"<br>bool(false)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75064">  
  <a class="name">
  <strong class="user"><em>vernon at kesnerdesigns dot net</em></strong></a><div class="date" title="2007-05-10 08:44"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75064">
<div class="phpcode"><code><span class="html">
In response to seejohnrun's version to check if a URL exists. Even if the file doesn't exist you're still going to get 404 headers.&nbsp; You can still use get_headers if you don't have the option of using CURL..<br><br>$file = '<a rel="nofollow" target="_blank">http://www.domain.com/somefile.jpg</a>';<br>$file_headers = @get_headers($file);<br>if($file_headers[0] == 'HTTP/1.1 404 Not Found') {<br>&nbsp; &nbsp; $exists = false;<br>}<br>else {<br>&nbsp; &nbsp; $exists = true;<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92617">  
  <a class="name">
  <strong class="user"><em>pgl at yoyo dot org</em></strong></a><div class="date" title="2009-07-31 07:03"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92617">
<div class="phpcode"><code><span class="html">
Note that this will return false for streams, eg, php://stdin.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85189">  
  <a class="name">
  <strong class="user"><em>Avee</em></strong></a><div class="date" title="2008-08-19 08:21"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85189">
<div class="phpcode"><code><span class="html">
I made a bit of code that sees whether a file served via RTSP is there or not:<br><br><span class="default">&lt;?php <br></span><span class="keyword">function </span><span class="default">rtsp_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="default">$server </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="default">PHP_URL_HOST</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$port </span><span class="keyword">= </span><span class="string">"554"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$hdrs </span><span class="keyword">= </span><span class="string">"DESCRIBE " </span><span class="keyword">.</span><span class="default">$url </span><span class="keyword">.</span><span class="string">" RTSP/1.0"</span><span class="keyword">.</span><span class="string">"\r\n\r\n"</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//Open connection (15s timeout)<br>&nbsp; &nbsp; </span><span class="default">$sh </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$server</span><span class="keyword">, </span><span class="default">$port</span><span class="keyword">, </span><span class="default">$err</span><span class="keyword">, </span><span class="default">$err_otp</span><span class="keyword">, </span><span class="default">15</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">//Check connections<br>&nbsp; &nbsp; </span><span class="keyword">if(!</span><span class="default">$sh</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//Send headers<br>&nbsp; &nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$sh</span><span class="keyword">,</span><span class="default">$hdrs</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">//Receive data (1KB)<br>&nbsp; &nbsp; </span><span class="default">$rtds </span><span class="keyword">= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$sh</span><span class="keyword">, </span><span class="default">1024</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">//Close socket<br>&nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$sh</span><span class="keyword">);<br><br>&nbsp; &nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$rtds</span><span class="keyword">, </span><span class="string">"200 OK"</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78656">  
  <a class="name">
  <strong class="user"><em>ktcb123 at hotmail dot com</em></strong></a><div class="date" title="2007-10-22 12:26"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78656">
<div class="phpcode"><code><span class="html">
For some reason, none of the url_exists() functions posted here worked for me, so here is my own tweaked version of it.<br><br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"<a rel="nofollow" target="_blank">http://</a>"</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"/"</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$url</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$url </span><span class="keyword">= array(</span><span class="default">$url</span><span class="keyword">, </span><span class="string">"/"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fh </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">80</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$fh</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">,</span><span class="string">"GET "</span><span class="keyword">.</span><span class="default">$url</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">" HTTP/1.1\nHost:"</span><span class="keyword">.</span><span class="default">$url</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">].</span><span class="string">"\n\n"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fh</span><span class="keyword">, </span><span class="default">22</span><span class="keyword">) == </span><span class="string">"HTTP/1.1 404 Not Found"</span><span class="keyword">) { return </span><span class="default">FALSE</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else { return </span><span class="default">TRUE</span><span class="keyword">;&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; } else { return </span><span class="default">FALSE</span><span class="keyword">;}<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99772">  
  <a class="name">
  <strong class="user"><em>_ michael</em></strong></a><div class="date" title="2010-09-05 02:16"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99772">
<div class="phpcode"><code><span class="html">
There is a subtle difference in behaviour of file_exists(), depending on the OS. Suppose you test a path ending with a slash. If the corresponding filesystem object exists, but is not a directory but a file, file_exists() will return true on Windows and false on Linux.<br><br>Ie, file_exists( $path_from_root . '/somedir/file/' ) returns true on Windows if that file exists, and false on Linux.<br><br>Tested with PHP 5.3.3 on Ubuntu and PHP 5.2.9 on Windows.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107191">  
  <a class="name">
  <strong class="user"><em>DeyV at poczta dot php dot pl</em></strong></a><div class="date" title="2012-01-13 04:47"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107191">
<div class="phpcode"><code><span class="html">
Great alternative to file_exists() is stream_resolve_include_path()</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49900">  
  <a class="name">
  <strong class="user"><em>andrewNOSPAMPLEASE at abcd dot NOSPAMERSca</em></strong></a><div class="date" title="2005-02-11 05:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49900">
<div class="phpcode"><code><span class="html">
file_exists will have trouble finding your file if the file permissions are not read enabled for 'other' when not owned by your php user. I thought I was having trouble with a directory name having a space in it (/users/andrew/Pictures/iPhoto Library/AlbumData.xml) but the reality was that there weren't read permissions on Pictures, iPhoto Library or AlbumData.xml. Once I fixed that, file_exists worked.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97774">  
  <a class="name">
  <strong class="user"><em>hex</em></strong></a><div class="date" title="2010-05-06 11:11"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97774">
<div class="phpcode"><code><span class="html">
If you simply want to check that some file (not directory) exists, and concerned about performance, try is_file() instead.<br>I timed is_file and file_exists, it seems like is_file() is almost 2x faster when a file exists and about the same when it doesn't.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81400">  
  <a class="name">
  <strong class="user"><em>jaz-t at hotmail dot com</em></strong></a><div class="date" title="2008-02-26 07:12"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81400">
<div class="phpcode"><code><span class="html">
Note on openspecies entry (excellent btw, thanks!).<br><br>If your server cannot resolve its own DNS, use the following:<br>$f = preg_replace('/www\.yourserver\.(net|com)/', getenv('SERVER_ADDR'), $f);<br><br>Just before the $h = @get_headers($f); line.<br><br>Replace the extensions (net|com|...) in the regexp expression as appropriate.<br><br>EXAMPLE:<br>File you are checking for: <a rel="nofollow" target="_blank">http://www.youserver.net/myfile.gif</a><br>Server IP: 10.0.0.125<br><br>The preg_replace will effectively 'resolve' the address for you by assigning $f as follows:<br><a rel="nofollow" target="_blank">http://10.0.0.125/myfile.gif</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="64908">  
  <a class="name">
  <strong class="user"><em>pilotdoofy at gmail dot com</em></strong></a><div class="date" title="2006-04-22 01:35"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64908">
<div class="phpcode"><code><span class="html">
I wrote a very simple function that allows you to search a folder for a file name with a regular expression. It can handle both PREG and EREG regexps and can accept different case sensitivities for EREG regexps.<br><br>function regExpFile($regExp, $dir, $regType='P', $case='') {<br># Two parameters accepted by $regType are E for ereg* functions<br># and P for preg* functions<br>$func = ( $regType == 'P' ) ? 'preg_match' : 'ereg' . $case;<br><br># Note, technically anything other than P will use ereg* functions;<br># however, you can specify whether to use ereg or eregi by<br># declaring $case as "i" to use eregi rather than ereg<br><br>$open = opendir($dir);<br>while( ($file = readdir($open)) !== false ) {<br>if ( $func($regExp, $file) ) {<br>return true;<br>}<br>} // End while<br>return false;<br>} // End function<br><br>Basically if you supply anything but "P" for $regType it will assume you're using EREG regexps. The case should only be blank or "i".</span>
</code></div>
  </div>
 </div>
  <div class="note" id="41273">  
  <a class="name">
  <strong class="user"><em>alex at raynor nospam dot ru</em></strong></a><div class="date" title="2004-04-05 08:16"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom41273">
<div class="phpcode"><code><span class="html">
If you use open_basedir in php.ini and use file_exists for file outside open_basedir path, you will not be warned at log and file_exists returns false even if file really exists.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85246">  
  <a class="name">
  <strong class="user"><em>justin</em></strong></a><div class="date" title="2008-08-21 12:07"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85246">
<div class="phpcode"><code><span class="html">
Small adjustment to the url_exist() by marufit at gmail dot com.&nbsp; Some sites like digg.com for example check the HTTPHEADER to see who is requesting the page and will PHP will throw an error.&nbsp; Adding the following line fixes the issue:<br><br>curl_setopt($handle, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") ); // request as if Firefox&nbsp; &nbsp; <br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// Version 4.x supported<br>&nbsp; &nbsp; </span><span class="default">$handle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">false </span><span class="keyword">=== </span><span class="default">$handle</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);&nbsp; </span><span class="comment">// this works<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HTTPHEADER</span><span class="keyword">, Array(</span><span class="string">"User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15"</span><span class="keyword">) ); </span><span class="comment">// request as if Firefox&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$connectable </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);&nbsp;&nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$connectable</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76194">  
  <a class="name">
  <strong class="user"><em>bvazquez at siscomx dot com</em></strong></a><div class="date" title="2007-07-04 09:13"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76194">
<div class="phpcode"><code><span class="html">
If you are trying to access a Windows Network Share you have to configure your WebServer with enough permissions for example:<br><br>$file = fopen("\\siscomx17\c\websapp.log",'r');<br><br>You will get an error telling you that the pathname doesnt exist this will be because Apache or IIS run as LocalSystem so you will have to enter to Services and configure Apache on "Open a session as" Create a new user that has enough permissions and also be sure that target share has the proper permissions.<br><br>Hope this save some hours of research to anyone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="81408">  
  <a class="name">
  <strong class="user"><em>stuart</em></strong></a><div class="date" title="2008-02-26 10:44"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom81408">
<div class="phpcode"><code><span class="html">
When using file_exists, seems you cannot do:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach (</span><span class="default">$possibles </span><span class="keyword">as </span><span class="default">$poss</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; if ( </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">SITE_RANGE_IMAGE_PATH </span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">range_id </span><span class="keyword">.</span><span class="string">'/ '</span><span class="keyword">.</span><span class="default">$poss </span><span class="keyword">.</span><span class="string">'.jpg'</span><span class="keyword">) )
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// exists
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not found
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>so you must do:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">foreach (</span><span class="default">$possibles </span><span class="keyword">as </span><span class="default">$poss</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="default">SITE_RANGE_IMAGE_PATH </span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">range_id </span><span class="keyword">.</span><span class="string">'/ '</span><span class="keyword">.</span><span class="default">$poss </span><span class="keyword">.</span><span class="string">'.jpg'
<br>&nbsp; &nbsp; </span><span class="keyword">if ( </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">) )
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// exists
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not found
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Then things will work fine.
<br>
<br>This is at least the case on this Windows system running php 5.2.5 and apache 2.2.3
<br>
<br>Not sure if it is down to the concatenation or the fact theres a constant in there, i'm about to run away and test just that...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="55642">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-08-09 07:20"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom55642">
<div class="phpcode"><code><span class="html">
That is true feshi. But, if you have your server configured correctly, those access logs will only be accessible by an admin or the root account. The webuser account that runs the php script will be unable to start reading from that file. That's the easiest fix.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114011">  
  <a class="name">
  <strong class="user"><em>welkom at remconijhuis dot nl</em></strong></a><div class="date" title="2013-12-30 11:10"><strong>7 months ago</strong></div>
  <div class="text" id="Hcom114011">
<div class="phpcode"><code><span class="html">
I needed to measure performance for a project, so I did a simple test with one million file_exists() and is_file() checks. In one scenario, only seven of the files existed. In the second, all files existed. is_file() needed 3.0 for scenario one and 3.3 seconds for scenario two.&nbsp; file_exists() needed 2.8 and 2.9 seconds, respectively. The absolute numbers are off course system-dependant, but it clearly indicates that file_exists() is faster.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111015">  
  <a class="name">
  <strong class="user"><em>junya</em></strong></a><div class="date" title="2013-01-06 12:11"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111015">
<div class="phpcode"><code><span class="html">
On Japanese Windows system, here is the other way to figure out the file existence to avoid SJIS 5C problem.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">sjis_file_exists</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; return </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"if exist \"</span><span class="default">$filename</span><span class="string">\" (echo 1) else (echo 0)"</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91008">  
  <a class="name">
  <strong class="user"><em>jbeltran</em></strong></a><div class="date" title="2009-05-20 01:39"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91008">
<div class="phpcode"><code><span class="html">
I want to warn developers using PHP 5.0.4 of a bug that don't happen in current stable versions:<br><br>file_exists seems to cache the response, even when the file has been moved.<br><br>An example:<br><span class="default">&lt;?php<br></span><span class="comment">/*<br>&nbsp; &nbsp; When a file which has been called by file_exist<br>&nbsp; &nbsp; has been moved, the file_exist next call gives true again<br><br>*/<br></span><span class="default">$f </span><span class="keyword">= </span><span class="string">"foo.txt"</span><span class="keyword">;<br></span><span class="default">file_put_contents</span><span class="keyword">( </span><span class="default">$f</span><span class="keyword">, </span><span class="string">"content" </span><span class="keyword">);<br>if(</span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">$f </span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">rename</span><span class="keyword">( </span><span class="default">$f</span><span class="keyword">, </span><span class="default">$f</span><span class="keyword">.</span><span class="string">".moved" </span><span class="keyword">);<br>}<br>if( </span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">$f </span><span class="keyword">)){<br>&nbsp; &nbsp; echo </span><span class="string">"Wrong! the file has just been moved! file_exists should return false."</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">rename</span><span class="keyword">( </span><span class="default">$f</span><span class="keyword">, </span><span class="default">$f</span><span class="keyword">.</span><span class="string">".willnotwork" </span><span class="keyword">); </span><span class="comment">//It gives a warning <br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>The same code tested in PHP 5.2.4-2ubuntu5.6 with Suhosin-Patch 0.9.6.2 (cli) behaves correctly.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88653">  
  <a class="name">
  <strong class="user"><em>alkaaran at gmail dot com</em></strong></a><div class="date" title="2009-02-02 06:11"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88653">
<div class="phpcode"><code><span class="html">
Although PHP 5+ supports this function with FTP, it appears that file_exists() used on ftp will always return TRUE, even if the file or directory does not exist.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88607">  
  <a class="name">
  <strong class="user"><em>fabin dot gnu at gmail dot com</em></strong></a><div class="date" title="2009-01-31 01:03"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88607">
<div class="phpcode"><code><span class="html">
The code can be used to t a filename that can be used to create a new filename.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">generateRandomString</span><span class="keyword">(</span><span class="default">$length </span><span class="keyword">= </span><span class="default">8</span><span class="keyword">)
<br>{&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//character that can be used
<br>&nbsp; &nbsp; </span><span class="default">$possible </span><span class="keyword">= </span><span class="string">"0123456789bcdfghjkmnpqrstvwxyz"</span><span class="keyword">; 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$length</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$possible</span><span class="keyword">, </span><span class="default">rand</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$possible</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">), </span><span class="default">1</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$char</span><span class="keyword">)) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; { 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$string</span><span class="keyword">;
<br>}
<br>
<br>function </span><span class="default">randomFile</span><span class="keyword">(</span><span class="default">$folder </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">, </span><span class="default">$extension </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">)
<br>{ 
<br>&nbsp; &nbsp; </span><span class="default">$folder </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$folder </span><span class="keyword">= (</span><span class="default">$folder </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) ? </span><span class="string">'./' </span><span class="keyword">: </span><span class="default">$folder</span><span class="keyword">;
<br> 
<br>&nbsp; &nbsp; </span><span class="comment">//check if directory exist
<br>&nbsp; &nbsp; </span><span class="keyword">if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">)){ die(</span><span class="string">'invalid folder given!'</span><span class="keyword">); }
<br> 
<br>&nbsp; &nbsp; </span><span class="comment">//generate a filepath
<br>&nbsp; &nbsp; </span><span class="default">$filepath </span><span class="keyword">= </span><span class="default">$folder </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">generateRandomString</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">) . </span><span class="default">$extension</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">//check if that filepath already exist, if it exist if generates again
<br>&nbsp; &nbsp; //till if gets one that doesn't exist
<br>&nbsp; &nbsp; </span><span class="keyword">while(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$filepath</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$filepath </span><span class="keyword">= </span><span class="default">$folder </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">generateRandomString</span><span class="keyword">(</span><span class="default">128</span><span class="keyword">) . </span><span class="default">$extension</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">$filepath</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79308">  
  <a class="name">
  <strong class="user"><em>maurice at idify dot nl</em></strong></a><div class="date" title="2007-11-20 02:45"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79308">
<div class="phpcode"><code><span class="html">
Note: The results of this function are cached. See clearstatcache() for more details.<br><br>That's a pretty big note. Don't forget this one, since it can make your file_exists() behave unexpectedly - probably at production time ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="79118">  
  <a class="name">
  <strong class="user"><em>marufit at gmail dot com</em></strong></a><div class="date" title="2007-11-12 03:22"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom79118">
<div class="phpcode"><code><span class="html">
Older php (v4.x) do not work with get_headers() function. So I made this one and working.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// Version 4.x supported<br>&nbsp; &nbsp; </span><span class="default">$handle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; if (</span><span class="default">false </span><span class="keyword">=== </span><span class="default">$handle</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_FAILONERROR</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);&nbsp; </span><span class="comment">// this works<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$connectable </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; return </span><span class="default">$connectable</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77662">  
  <a class="name">
  <strong class="user"><em>guillermogomezruiz at gmail dot com</em></strong></a><div class="date" title="2007-09-07 04:08"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77662">
<div class="phpcode"><code><span class="html">
I was having problems with the file_exists when using urls, so I made this function:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">file_exists_2</span><span class="keyword">(</span><span class="default">$filePath</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; return (</span><span class="default">$ch </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$filePath</span><span class="keyword">)) ? @</span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$ch</span><span class="keyword">) || </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>Cheers!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76545">  
  <a class="name">
  <strong class="user"><em>worldclimb at gmail dot com</em></strong></a><div class="date" title="2007-07-19 02:48"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76545">
<div class="phpcode"><code><span class="html">
Small error in florinel2k's example<br><br>$sourcePath should be $fileUrl, otherwise it works well for me.<br><br>//Corrected<br>This is an example if you want to know that a file exists (if that file isn't on your server):<br><br>$fileUrl = "<a rel="nofollow" target="_blank">http://www.examplecom/test.jpg</a>";<br>$AgetHeaders = @get_headers($fileUrl);<br>if (preg_match("|200|", $AgetHeaders[0])) {<br>// file exists<br>} else {<br>// file doesn't exists<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76420">  
  <a class="name">
  <strong class="user"><em>pcdinh at phpvietnam dot net</em></strong></a><div class="date" title="2007-07-14 07:03"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76420">
<div class="phpcode"><code><span class="html">
In response to havran at gmail dot com<br><br>Your function url_exists() does not work because it has got a big bug. curl_init does not make a connection to that url until curl_exec() is executed. The return value from curl_init() shows if a curl session can be started.<br><br>That function can be rewritten as follows<br><br><span class="default">&lt;?php<br></span><span class="keyword">class </span><span class="default">Url<br></span><span class="keyword">{<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Check if an url is existed<br>&nbsp; &nbsp;&nbsp; *<br>&nbsp; &nbsp;&nbsp; * @param&nbsp; string&nbsp; &nbsp; $url<br>&nbsp; &nbsp;&nbsp; * @access static<br>&nbsp; &nbsp;&nbsp; * @return bool&nbsp; &nbsp; &nbsp; True if the url is accessible and false if the url is unaccessible or does not exist<br>&nbsp; &nbsp;&nbsp; * @throws Exception An exception will be thrown when Curl session fails to start<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">null </span><span class="keyword">=== </span><span class="default">$url </span><span class="keyword">|| </span><span class="string">'' </span><span class="keyword">=== </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'The url to check must be a not empty string'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$handle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">false </span><span class="keyword">=== </span><span class="default">$handle</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Fail to start Curl session'</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_HEADER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_NOBODY</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_setopt</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">CURLOPT_RETURNTRANSFER</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// grab Url <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$connectable </span><span class="keyword">= </span><span class="default">curl_exec</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// close Curl resource, and free up system resources<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">curl_close</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$connectable</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>How to use:<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">try <br>{<br>&nbsp; &nbsp; if (</span><span class="default">Url</span><span class="keyword">::</span><span class="default">exists</span><span class="keyword">(</span><span class="string">'<a rel="nofollow" target="_blank">http://phpvietnam.net</a>'</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Do something here&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">}<br>}<br>catch (</span><span class="default">Exception $ex</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// Do something here<br></span><span class="keyword">}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75720">  
  <a class="name">
  <strong class="user"><em>florinel2k at yahoo dot com</em></strong></a><div class="date" title="2007-06-13 01:23"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75720">
<div class="phpcode"><code><span class="html">
This is an example if you want to know that a file exists (if that file isn't on your server):<br><br>$fileUrl = "<a rel="nofollow" target="_blank">http://www.examplecom/test.jpg</a>";<br>$AgetHeaders = @get_headers($sourcePath);<br>if (preg_match("|200|", $AgetHeaders[0])) {<br>// file exists<br>} else {<br>// file doesn't exists<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60458">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-01-07 01:08"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60458">
<div class="phpcode"><code><span class="html">
I wrote this little handy function to check if an image exists in a directory, and if so, return a filename which doesnt exists e.g. if you try 'flower.jpg' and it exists, then it tries 'flower[1].jpg' and if that one exists it tries 'flower[2].jpg' and so on. It works fine at my place. Ofcourse you can use it also for other filetypes than images.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">imageExists</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">$dir</span><span class="keyword">) {<br><br>&nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">; </span><span class="default">$probeer</span><span class="keyword">=</span><span class="default">$image</span><span class="keyword">;<br><br>&nbsp; &nbsp; while(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="default">$probeer</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$punt</span><span class="keyword">=</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,(</span><span class="default">$punt</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">)!==(</span><span class="string">"["</span><span class="keyword">) &amp;&amp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,(</span><span class="default">$punt</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">),</span><span class="default">1</span><span class="keyword">)!==(</span><span class="string">"]"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$probeer</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$punt</span><span class="keyword">).</span><span class="string">"["</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">"]"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,(</span><span class="default">$punt</span><span class="keyword">),</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">)-</span><span class="default">$punt</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$probeer</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$punt</span><span class="keyword">-</span><span class="default">3</span><span class="keyword">)).</span><span class="string">"["</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">"]"</span><span class="keyword">.<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,(</span><span class="default">$punt</span><span class="keyword">),</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">)-</span><span class="default">$punt</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$probeer</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59986">  
  <a class="name">
  <strong class="user"><em>Fabrizio (staff at bibivu dot com)</em></strong></a><div class="date" title="2005-12-21 06:11"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59986">
<div class="phpcode"><code><span class="html">
here a function to check if a certain URL exist:<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$a_url </span><span class="keyword">= </span><span class="default">parse_url</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; if (!isset(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">])) </span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">] = </span><span class="default">80</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$errno </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$errstr </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">]!=</span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">])){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fid </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">], </span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'port'</span><span class="keyword">], </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!</span><span class="default">$fid</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$page </span><span class="keyword">= isset(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">])&nbsp; ?</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'path'</span><span class="keyword">]:</span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$page </span><span class="keyword">.= isset(</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">])?</span><span class="string">'?'</span><span class="keyword">.</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'query'</span><span class="keyword">]:</span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fputs</span><span class="keyword">(</span><span class="default">$fid</span><span class="keyword">, </span><span class="string">'HEAD '</span><span class="keyword">.</span><span class="default">$page</span><span class="keyword">.</span><span class="string">' HTTP/1.0'</span><span class="keyword">.</span><span class="string">"\r\n"</span><span class="keyword">.</span><span class="string">'Host: '</span><span class="keyword">.</span><span class="default">$a_url</span><span class="keyword">[</span><span class="string">'host'</span><span class="keyword">].</span><span class="string">"\r\n\r\n"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$head </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$fid</span><span class="keyword">, </span><span class="default">4096</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fid</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#^HTTP/.*\s+[200|302]+\s#i'</span><span class="keyword">, </span><span class="default">$head</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>in my CMS, I am using it with those lines:<br><span class="default">&lt;?php<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(!isset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">f_exist</span><span class="keyword">[</span><span class="default">$image</span><span class="keyword">][</span><span class="string">'exist'</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)) == </span><span class="string">'http' </span><span class="keyword">|| </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)) == </span><span class="string">'www.'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)) == </span><span class="string">'www.'</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fimage </span><span class="keyword">= </span><span class="string">'<a rel="nofollow" target="_blank">http://</a>'</span><span class="keyword">.</span><span class="default">$fimage</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$image </span><span class="keyword">= </span><span class="string">'<a rel="nofollow" target="_blank">http://</a>'</span><span class="keyword">.</span><span class="default">$image</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">f_exist</span><span class="keyword">[</span><span class="default">$image</span><span class="keyword">][</span><span class="string">'exist'</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">); </span><span class="comment">//for now<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">f_exist</span><span class="keyword">[</span><span class="default">$image</span><span class="keyword">][</span><span class="string">'exist'</span><span class="keyword">] = (</span><span class="default">$fimage</span><span class="keyword">!=</span><span class="string">'' </span><span class="keyword">&amp;&amp; </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">) &amp;&amp; </span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">) &amp;&amp; </span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">) &amp;&amp; </span><span class="default">filesize</span><span class="keyword">(</span><span class="default">$fimage</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57934">  
  <a class="name">
  <strong class="user"><em>ihoss dot com at gmail dot com</em></strong></a><div class="date" title="2005-10-19 07:37"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57934">
<div class="phpcode"><code><span class="html">
The following script checks if there is a file with the same name and adds _n to the end of the file name, where n increases. if img.jpg is on the server, it tries with img_0.jpg, checks if it is on the server and tries with img_1.jpg.<br><span class="default">&lt;?php <br>&nbsp; $img </span><span class="keyword">= </span><span class="string">"images/"</span><span class="keyword">.</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'bilde'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">];<br>&nbsp; </span><span class="default">$t</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br>&nbsp; while(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">)){<br>&nbsp; &nbsp; </span><span class="default">$img </span><span class="keyword">= </span><span class="string">"images/"</span><span class="keyword">.</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'bilde'</span><span class="keyword">][</span><span class="string">'name'</span><span class="keyword">];<br>&nbsp; &nbsp; </span><span class="default">$img</span><span class="keyword">=</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">)).</span><span class="string">"_</span><span class="default">$t</span><span class="string">"</span><span class="keyword">.</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$img</span><span class="keyword">,</span><span class="string">"."</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$t</span><span class="keyword">++;<br>&nbsp; }<br>&nbsp; </span><span class="default">move_uploaded_file</span><span class="keyword">(</span><span class="default">$_FILES</span><span class="keyword">[</span><span class="string">'bilde'</span><span class="keyword">][</span><span class="string">'tmp_name'</span><span class="keyword">], </span><span class="default">$img</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56121">  
  <a class="name">
  <strong class="user"><em>tma at 2p dot cz</em></strong></a><div class="date" title="2005-08-24 01:47"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom56121">
<div class="phpcode"><code><span class="html">
If checking for a file newly created by an external program in Windows then file_exists() does not recognize it immediately.&nbsp; Iy seems that a short timeout may be required.<br><br>&lt;?<br>&nbsp; &nbsp; $file = 'file.tmp';<br>&nbsp; &nbsp; if ($h = popen("start \"bla\" touch $file", "r")) {<br>&nbsp; &nbsp; &nbsp; pclose($h);<br>&nbsp;&nbsp; // now I would like know if a file was created<br>&nbsp;&nbsp; // note: usleep not supported <br>&nbsp; &nbsp; &nbsp; $start = gettimeofday();&nbsp;&nbsp; <br>&nbsp; &nbsp; &nbsp; while (!file_exists(trim($file, " '\""))) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $stop = gettimeofday();<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( 1000000 * ($stop['sec'] - $start['sec']) + $stop['usec'] - $start['usec'] &gt; 500000) break;&nbsp; // wait a moment<br>&nbsp; &nbsp;&nbsp; }<br><br>&nbsp; &nbsp;&nbsp; if (file_exists($file))&nbsp;&nbsp; // now should be reliable<br>?&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103436">  
  <a class="name">
  <strong class="user"><em>spark at limao dot com dot br</em></strong></a><div class="date" title="2011-04-13 07:26"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103436">
<div class="phpcode"><code><span class="html">
this code here is in case you want to check if a file exists in another server:<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">fileExists</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">){<br>&nbsp; &nbsp; return (@</span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">,</span><span class="string">"r"</span><span class="keyword">)==</span><span class="default">true</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>unfortunately the file_exists can't reach remote servers, so I used the fopen function.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73904">  
  <a class="name">
  <strong class="user"><em>earle dot west at transactionalweb dot com</em></strong></a><div class="date" title="2007-03-14 05:49"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73904">
<div class="phpcode"><code><span class="html">
If the file being tested by file_exists() is a file on a symbolically-linked directory structure, the results depend on the permissions of the directory tree node underneath the linked tree.&nbsp;&nbsp; PHP under a web server (i.e. apache) will respect permissions of the file system underneath the symbolic link, contrasting with PHP as a shell script which respects permissions of the directories that are linked (i.e. on top, and visible).&nbsp;&nbsp; <br><br>This results in files that appear to NOT exist on a symbolic link, even though they are very much in existance and indeed are readable by the web server.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84918">  
  <a class="name">
  <strong class="user"><em>dan at sudonames dot com</em></strong></a><div class="date" title="2008-08-05 05:41"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84918">
<div class="phpcode"><code><span class="html">
Here is a simpler version of url_exists:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$hdrs </span><span class="keyword">= @</span><span class="default">get_headers</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br>&nbsp; &nbsp; return </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$hdrs</span><span class="keyword">) ? </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^HTTP\\/\\d+\\.\\d+\\s+2\\d\\d\\s+.*$/'</span><span class="keyword">,</span><span class="default">$hdrs</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) : </span><span class="default">false</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105093">  
  <a class="name">
  <strong class="user"><em>www dot freev at gmail dot com</em></strong></a><div class="date" title="2011-07-27 06:17"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105093">
<div class="phpcode"><code><span class="html">
my function filexists() function search file firts in include_path:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">filexists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br>{<br>&nbsp; </span><span class="default">$ps </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">":"</span><span class="keyword">, </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'include_path'</span><span class="keyword">));<br>&nbsp; foreach(</span><span class="default">$ps </span><span class="keyword">as </span><span class="default">$path</span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; }<br>&nbsp; if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100890">  
  <a class="name">
  <strong class="user"><em>anthonyiacono at gmail dot com</em></strong></a><div class="date" title="2010-11-12 09:18"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100890">
<div class="phpcode"><code><span class="html">
Try this replacement if you are having issues with safe mode restrictions:
<br>
<br><span class="default">&lt;?php
<br>&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">file_exists_2</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">, </span><span class="default">$file</span><span class="keyword">)
<br>&nbsp;&nbsp; {
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"ls "</span><span class="keyword">.</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">" | grep "</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp;&nbsp; return (!empty(</span><span class="default">$ret</span><span class="keyword">));
<br>&nbsp;&nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>I was having an issue because Apache kept resetting permissions for my public_html directory, causing issues with safe mode.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50680">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-03-07 02:00"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50680">
<div class="phpcode"><code><span class="html">
Nathaniel, you should read the manual carefuly next time prior to posting anything here, as all you indicated is the fact you missed the idea of the include_path. To remind - include_path is for some functions only, mainly intended for include and require to simpify include/require operations (kinda way the #include works). It is NOT for any filesystem function, which would be damn annoying than helpful, which is quite understandable and obvious.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93572">  
  <a class="name">
  <strong class="user"><em>ferodano at gmail dot com</em></strong></a><div class="date" title="2009-09-16 01:54"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93572">
<div class="phpcode"><code><span class="html">
You could use document root to be on the safer side because the function does not take relative paths:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if( </span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">$_SERVER</span><span class="keyword">{</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">} . </span><span class="string">"/my_images/abc.jpg"</span><span class="keyword">))&nbsp; {
<br>&nbsp;&nbsp; ...
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Do not forget to put the slash '/', e.g. my doc root in Ubuntu is /var/www without the slash.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86804">  
  <a class="name">
  <strong class="user"><em>kevin at cuznersoft dot com</em></strong></a><div class="date" title="2008-11-04 08:32"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86804">
<div class="phpcode"><code><span class="html">
My way of making sure files exist before including them is as follows (example: including a class file in an autoloader):
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">__autoload</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">)
<br>{&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">":"</span><span class="keyword">, </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'include_path'</span><span class="keyword">)); </span><span class="comment">//get all the possible paths to the file (preloaded with the file structure of the project)
<br>&nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$path </span><span class="keyword">as </span><span class="default">$tryThis</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//try each possible iteration of the file name and use the first one that comes up
<br>&nbsp; &nbsp; &nbsp; &nbsp; // name.class.php first
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$tryThis </span><span class="keyword">. </span><span class="string">'/' </span><span class="keyword">. </span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.class.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$exists</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include_once(</span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.class.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//ok that didn't work, try the other way around
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$tryThis </span><span class="keyword">. </span><span class="string">'/' </span><span class="keyword">. </span><span class="string">'class.' </span><span class="keyword">. </span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$exists</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include_once(</span><span class="string">'class.' </span><span class="keyword">. </span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//neither did that...let's try as an inc.php
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$tryThis </span><span class="keyword">. </span><span class="string">'/' </span><span class="keyword">. </span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.inc.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$exists</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; include_once(</span><span class="default">$name </span><span class="keyword">. </span><span class="string">'.inc.php'</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">// can't find it...
<br>&nbsp; &nbsp; </span><span class="keyword">die(</span><span class="string">"Class </span><span class="default">$name</span><span class="string"> could not be found!"</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49805">  
  <a class="name">
  <strong class="user"><em>Nathaniel</em></strong></a><div class="date" title="2005-02-08 09:08"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49805">
<div class="phpcode"><code><span class="html">
I spent the last two hours wondering what was wrong with my if statement: file_exists($file) was returning false, however I could call include($file) with no problem.<br><br>It turns out that I didn't realize that the php include_path value I had set in the .htaccess file didn't carry over to file_exists, is_file, etc.<br><br>Thus:<br><br><span class="default">&lt;?PHP<br></span><span class="comment">// .htaccess php_value include_path '/home/user/public_html/';<br><br>// includes lies in /home/user/public_html/includes/<br><br>//doesn't work, file_exists returns false<br></span><span class="keyword">if ( </span><span class="default">file_exists</span><span class="keyword">(</span><span class="string">'includes/config.php'</span><span class="keyword">) )<br>{<br>&nbsp; &nbsp;&nbsp; include(</span><span class="string">'includes/config.php'</span><span class="keyword">);<br>}<br><br></span><span class="comment">//does work, file_exists returns true<br></span><span class="keyword">if ( </span><span class="default">file_exists</span><span class="keyword">(</span><span class="string">'/home/user/public_html/includes/config.php'</span><span class="keyword">) )<br>{<br>&nbsp; &nbsp; include(</span><span class="string">'includes/config.php'</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Just goes to show that "shortcuts for simplicity" like setting the include_path in .htaccess can just cause more grief in the long run.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56937">  
  <a class="name">
  <strong class="user"><em>phenbach at phenbach dot com</em></strong></a><div class="date" title="2005-09-19 03:37"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56937">
<div class="phpcode"><code><span class="html">
I recently had an issue with PLESK and copying file to other directories with the move_uploaded file function.<br><br>This would work on every linux server except plesk servers. I could figure it out and have yet to find out.&nbsp; I had to create a work a round and decided to use the exec() function.<br><br>As noted above the file_exist() function must need to wait for some time and I found the looking function a waste of resouces and didn't work for me anyway. So this is what I came up with.<br><br>function cp($source,$destination){<br><br>$cmd="cp -u ".$source ." ".$destination; //create the command string to copy with the update option<br>exec($cmd); //exec command<br>$cmd_test="ls -la ".$destination; //list file <br>exec($cmd_test,$out); <br>//If the file is present it $out[0] key will contain the file info. <br>//if it is not present it will be null<br>if (isset($out[0])){<br>&nbsp; &nbsp;&nbsp; return true; <br>}else{<br>&nbsp; &nbsp;&nbsp; return false;<br>}<br>&nbsp; &nbsp; }</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74469">  
  <a class="name">
  <strong class="user"><em>havran at gmail dot com</em></strong></a><div class="date" title="2007-04-12 10:56"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74469">
<div class="phpcode"><code><span class="html">
Function url_exists() through CURL.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">url_exists</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br>&nbsp; &nbsp; if (!</span><span class="default">$fp </span><span class="keyword">= </span><span class="default">curl_init</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.file-exists.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:28:59 GMT -->


</body></html>