<html><!-- Mirrored from php.net/manual/en/function.flush.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:34 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>flush</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.flush.html">
 <link rel="shorturl" href="http://php.net/flush">
 <link rel="alternate" href="http://php.net/flush" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.outcontrol.html">
 <link rel="prev" href="ref.outcontrol.html">
 <link rel="next" href="function.ob-clean.html">

 <link rel="alternate" href="function.flush.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.flush.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.flush.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.flush.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.flush.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.flush.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.flush.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.flush.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.flush.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.flush.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.flush.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></li>      <li><a href="book.outcontrol.html">Output Control</a></li>      <li><a href="ref.outcontrol.html">Output Control Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.flush" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">flush</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">flush</span> â€” <span class="dc-title">Flush system output buffer</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.flush-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><span class="type void">void</span></span> <span class="methodname"><strong>flush</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="para rdfs-comment">
   Flushes the system write buffers of PHP and whatever backend PHP is using (CGI,
   a web server, etc).  This attempts to push current output all the way to
   the browser with a few caveats.
  </p>
  <p class="para">
   <span class="function"><strong>flush()</strong></span> may not be able to override the buffering scheme
   of your web server and it has no effect on any client-side buffering in the
   browser.  It also doesn't affect PHP's userspace output buffering mechanism.
   This means you will have to call both <span class="function"><a href="function.ob-flush.html" class="function">ob_flush()</a></span> and
   <span class="function"><strong>flush()</strong></span> to flush the ob output buffers if you are using
   those.
  </p>
  <p class="para">
   Several servers, especially on Win32, will still buffer the output from
   your script until it terminates before transmitting the results to the
   browser.
  </p>
  <p class="para">
   Server modules for Apache like mod_gzip may do buffering of their own that
   will cause <span class="function"><strong>flush()</strong></span> to not result in data being sent
   immediately to the client.
  </p>
  <p class="para">
   Even the browser may buffer its input before displaying it. Netscape, for
   example, buffers text until it receives an end-of-line or the beginning of
   a tag, and it won't render tables until the &lt;/table&gt; tag of the
   outermost table is seen.
  </p>
  <p class="para">
   Some versions of Microsoft Internet Explorer will only start to display
   the page after they have received 256 bytes of output, so you may need to
   send extra whitespace before flushing to get those browsers to display the
   page.
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.flush-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   No value is returned.
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.flush-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.ob-flush.html" class="function" rel="rdfs-seeAlso">ob_flush()</a> - Flush (send) the output buffer</span></li>
    <li class="member"><span class="function"><a href="function.ob-clean.html" class="function" rel="rdfs-seeAlso">ob_clean()</a> - Clean (erase) the output buffer</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-flush.html" class="function" rel="rdfs-seeAlso">ob_end_flush()</a> - Flush (send) the output buffer and turn off output buffering</span></li>
    <li class="member"><span class="function"><a href="function.ob-end-clean.html" class="function" rel="rdfs-seeAlso">ob_end_clean()</a> - Clean (erase) the output buffer and turn off output buffering</span></li>
   </ul>
  <p></p>
 </div>
 

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="54841">  
  <a class="name">
  <strong class="user"><em>js at jeansebastien dot com</em></strong></a><div class="date" title="2005-07-16 11:41"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54841">
<div class="phpcode"><code><span class="html">
This will show each line at a time with a pause of 2 seconds.<br>(Tested under IEx and Firefox)<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (</span><span class="default">ob_get_level</span><span class="keyword">() == </span><span class="default">0</span><span class="keyword">) </span><span class="default">ob_start</span><span class="keyword">();<br><br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">10</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br><br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;br&gt; Line to show."</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">,</span><span class="default">4096</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;&nbsp; &nbsp; <br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">ob_flush</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">);<br>}<br><br>echo </span><span class="string">"Done."</span><span class="keyword">;<br><br></span><span class="default">ob_end_flush</span><span class="keyword">();<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113360">  
  <a class="name">
  <strong class="user"><em>php at stelio dot net</em></strong></a><div class="date" title="2013-10-01 11:26"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113360">
<div class="phpcode"><code><span class="html">
For a Windows system using IIS, the ResponseBufferLimit takes precedence over PHP's output_buffering settings. So you must also set the ResponseBufferLimit to be something lower than its default value.<br><br>For IIS versions older than 7, the setting can be found in the %windir%\System32\inetsrv\fcgiext.ini file (the FastCGI config file). You can set the appropriate line to:<br>&nbsp; ResponseBufferLimit=0<br><br>For IIS 7+, the settings are stored in %windir%\System32\inetsrv\config. Edit the applicationHost.config file and search for PHP_via_FastCGI (assuming that you have installed PHP as a FastCGI module, as per the installation instructions, with the name PHP_via_FastCGI). Within the add tag, place the following setting at the end:<br>&nbsp; responseBufferLimit="0"<br>So the entire line will look something like:<br>&nbsp; &lt;add name="PHP_via_FastCGI" path="*.php" verb="*" modules="FastCgiModule" scriptProcessor="C:\PHP\php-cgi.exe" resourceType="Either" responseBufferLimit="0" /&gt;<br>Alternatively you can insert the setting using the following command:<br>&nbsp; %windir%\system32\inetsrv\appcmd.exe set config /section:handlers "/[name='PHP_via_FastCGI'].ResponseBufferLimit:0"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87807">  
  <a class="name">
  <strong class="user"><em>mandor at mandor dot net</em></strong></a><div class="date" title="2008-12-22 07:20"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87807">
<div class="phpcode"><code><span class="html">
This is what I use to turn off pretty much anything that could cause unwanted output buffering and turn on implicit flush:<br><br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">@</span><span class="default">apache_setenv</span><span class="keyword">(</span><span class="string">'no-gzip'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; @</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'zlib.output_compression'</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br>&nbsp; &nbsp; @</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">'implicit_flush'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">ob_get_level</span><span class="keyword">(); </span><span class="default">$i</span><span class="keyword">++) { </span><span class="default">ob_end_flush</span><span class="keyword">(); }<br>&nbsp; &nbsp; </span><span class="default">ob_implicit_flush</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>If it still fails though, keep in mind that Internet Explorer and Safari have a 1k buffer before incremental rendering kicks in, so you'll want to output some padding as well.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36973">  
  <a class="name">
  <strong class="user"><em>m@rco</em></strong></a><div class="date" title="2003-10-29 07:22"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36973">
<div class="phpcode"><code><span class="html">
in order to display in HTML pages something like a "progress bar" or if you want to force the web server to flush output to the browser, or the browser to flush as well, you can print a long enough "dummy" string to make the output buffer grow, as you probably know, like:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">print </span><span class="string">"["</span><span class="keyword">;
<br>
<br>for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">100</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){
<br>&nbsp; </span><span class="default">$spaces</span><span class="keyword">.=</span><span class="string">" "</span><span class="keyword">;
<br>} </span><span class="comment">// for
<br>
<br>//and then
<br>
<br></span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){
<br>&nbsp; for(</span><span class="default">$ii </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$ii </span><span class="keyword">&lt; </span><span class="default">200000</span><span class="keyword">; </span><span class="default">$ii</span><span class="keyword">++){
<br>&nbsp; &nbsp; </span><span class="comment">//do something slow here
<br>&nbsp; </span><span class="keyword">} </span><span class="comment">// for
<br>&nbsp; </span><span class="keyword">print </span><span class="string">"</span><span class="default">$spaces</span><span class="string">|"</span><span class="keyword">;
<br>&nbsp; </span><span class="default">flush</span><span class="keyword">();
<br>} </span><span class="comment">// for
<br>
<br></span><span class="keyword">print </span><span class="string">"]"</span><span class="keyword">;
<br>
<br></span><span class="comment">/*
<br>but this somethin may be not really what you expect in
<br>a progress bar, as it prints spaces (although rendered as single by the browser) between the bar units..
<br>you can solve this using 
<br>&nbsp; $spaces.="&lt;!-- bufferme --&gt;";
<br>
<br>/*
<br>
<br>print "[";
<br>
<br>for($i = 0; $i &lt; 100; $i++){
<br>&nbsp; $spaces.="&lt;!-- bufferme --&gt;";
<br>} // for
<br>
<br>//and then
<br>
<br>for($i = 0; $i &lt; 10; $i++){
<br>&nbsp; for($ii = 0; $ii &lt; 200000; $ii++){
<br>&nbsp; &nbsp; //do something slow here
<br>&nbsp; } // for
<br>&nbsp; print "$spaces|";
<br>&nbsp; flush();
<br>} // for
<br>
<br>print "]";
<br>
<br>//which looks nice as a progress bar..
<br>?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52863">  
  <a class="name">
  <strong class="user"><em>MOELZE ï¿½T GMX DOt DE   (Michael)</em></strong></a><div class="date" title="2005-05-15 04:38"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52863">
<div class="phpcode"><code><span class="html">
It is a bit complicated to work with the funktion flush() and you have to experiment with it a bit.
<br>So if you design a site which has a timeloop at the end that calls a other site via a form data input (Data Submit) you have
<br>to give something out to the buffer to get that new site loaden quick.
<br>
<br>For example:
<br>
<br><span class="default">&lt;?php
<br>$instant</span><span class="keyword">=</span><span class="default">gettimeofday</span><span class="keyword">();
<br></span><span class="default">$timenow</span><span class="keyword">=</span><span class="default">$instant</span><span class="keyword">[</span><span class="string">"sec"</span><span class="keyword">];</span><span class="comment">//Start Time
<br>
<br>//timeloop(e.g. for security_save after 30 min)
<br></span><span class="keyword">while (</span><span class="default">1</span><span class="keyword">) { echo </span><span class="string">"&lt;b&gt;&lt;/b&gt;"</span><span class="keyword">;</span><span class="comment">//Useless (only to quickload next
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //or same Site when do a switch)
<br></span><span class="default">flush</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//giveout buffer
<br></span><span class="default">$instant</span><span class="keyword">=</span><span class="default">gettimeofday</span><span class="keyword">();
<br></span><span class="default">$timeactual</span><span class="keyword">=</span><span class="default">$instant</span><span class="keyword">[</span><span class="string">"sec"</span><span class="keyword">]; </span><span class="comment">//get Actual Time in Secs
<br></span><span class="default">$flag</span><span class="keyword">=((</span><span class="default">$timeactual</span><span class="keyword">&gt;</span><span class="default">$timenow</span><span class="keyword">+</span><span class="default">$diff</span><span class="keyword">)? </span><span class="default">1</span><span class="keyword">:</span><span class="default">0</span><span class="keyword">);</span><span class="comment">//$diff=switchTime
<br></span><span class="keyword">if (</span><span class="default">$flag</span><span class="keyword">) { </span><span class="default">what_do_at_switch_Time</span><span class="keyword">();</span><span class="comment">//Sec.Save etc.etc.
<br></span><span class="default">$timenow</span><span class="keyword">=</span><span class="default">$timeactual</span><span class="keyword">; } </span><span class="comment">//Set new Start Time
<br></span><span class="default">sleep</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">); </span><span class="comment">//Or so...(Important)
<br></span><span class="keyword">} </span><span class="comment">//End of while-Loop
<br></span><span class="default">?&gt;
<br></span>
<br>So you can programm a security save or other function in your site and if you do a switch the upload of the new or same site (the called site) works...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="99988">  
  <a class="name">
  <strong class="user"><em>seb dot field at gmail dot com</em></strong></a><div class="date" title="2010-09-18 03:52"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom99988">
<div class="phpcode"><code><span class="html">
If flush() function does not work. You must set next options in php.ini like:<br><br>--[code]--<br> output_buffering = Off&nbsp; <br> ;output_handler =&nbsp;&nbsp; <br> zlib.output_compression = Off&nbsp; <br> ;zlib.output_handler =&nbsp;&nbsp; <br>--[^code^]--<br><br>If things does not work you must view headers from the server and check `Server` string.<br>In my case, as the frontend was Nginx webserver and Apache work as backend.<br>Accordingly, buffering must be disabled in Nginx config file.<br>To stop buffering you must add next string to config file:<br><br>--[code]--<br>proxy_buffering off;<br>--[^code^]--<br><br>and restart Nginx daemon.&nbsp; More information about&nbsp; configuration you find in documentation on the nginx website.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91556">  
  <a class="name">
  <strong class="user"><em>jason@jasonbaumgartner@info</em></strong></a><div class="date" title="2009-06-16 05:18"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91556">
<div class="phpcode"><code><span class="html">
Many of the suggestions below are very helpful but I would just like to clarify something.&nbsp; <br><br>If you are making calls to a .php script with AJAX (xmlHttpReq) and use flush, this will send data to your script HOWEVER it will not set the xmlHttpReq.readyState to 4 -- which is a requirement to use the information sent (Firefox does however allow you to use the responseText property with a readyState == 3 but IE will throw an error).<br><br>To get around this, you will need to make sure of a couple things:<br><br>In your Apache php.ini config file, check to make sure that output buffering is disabled:<br><br>output_buffering = off<br><br>Next, disable gzip compression for the .php script that is called from your AJAX script by using the excellent suggestion from Mandor by placing the following at the top of your script:<br><br>@apache_setenv('no-gzip', 1);<br>@ini_set('zlib.output_compression', 0);<br><br>What causes this problem is that while the php child process is running under apache, apache is waiting for the script to complete before completely closing the connection.&nbsp; Scripts that send information directly to the browser with echos and prints will get away with using flush followed by a sleep command and then clean up procedures.&nbsp; However, if you notice in the status bar of your browser window, the connection is still held open by apache until the script completed ("Transferring" ... yadda yadda).<br><br>By turning off the Apache compression, the connection is terminated directly after a flush while still giving the user the ability to run a sleep command followed by clean up code.<br><br>This bit me because the AJAX was returning &lt;img&gt; tags to newly created images by php.&nbsp; The cleanup script would then remove those images after completion.&nbsp; <br><br>Since Apache held the connection open, the readyState only changed to 4 AFTER my php cleanup fired -- thereby erasing the links referred to my the &lt;img&gt; tags.<br><br>With this solution, the readyState will change to 4 BEFORE the sleep command begins.<br><br>I hope this saves someone a lot of time and frustration.&nbsp; AJAX requests are an entirely different beast compared with simple outputting to a browser window.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56951">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2005-09-20 12:37"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56951">
<div class="phpcode"><code><span class="html">
In my testing, Internet Explorer 6.0 wouldn't flush anything nested in &lt;table&gt; or &lt;td&gt; tags, regardless of padding. But at the &lt;body&gt; level everything flushed with no fuss -- no padding or tags required.<br><br>Both Firefox 1.0 and Safari 2.0 could flush within tables, and both required a tag after the text (like &lt;br&gt;). Safari could flush only after the first 1024 characters where received. Firefox needed at least 8 characters per flush (but it could flush anything at the &lt;body&gt; level).<br><br>So the only thing that worked on all those browsers was this:<br><br>&lt;html&gt;<br>&lt;body&gt;<br><span class="default">&lt;?php&nbsp; </span><span class="comment">// not in table tags for IE<br></span><span class="keyword">echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">,</span><span class="default">1024</span><span class="keyword">);&nbsp; </span><span class="comment">// minimum start for Safari<br></span><span class="keyword">for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">10</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {<br>&nbsp; &nbsp; echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="string">"</span><span class="default">$i</span><span class="string">&lt;br&gt;\n"</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="comment">// tag after text for Safari &amp; Firefox<br>&nbsp; &nbsp; // 8 char minimum for Firefox<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();&nbsp; </span><span class="comment">// worked without ob_flush() for me<br>&nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span>&lt;/body&gt;<br>&lt;/html&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76039">  
  <a class="name">
  <strong class="user"><em>chuck at artistan dot org</em></strong></a><div class="date" title="2007-06-27 06:57"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76039">
<div class="phpcode"><code><span class="html">
had problems flushing tables to screen.
<br>this worked for me
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if (</span><span class="default">ob_get_level</span><span class="keyword">() == </span><span class="default">0</span><span class="keyword">) </span><span class="default">ob_start</span><span class="keyword">();
<br></span><span class="default">loop</span><span class="keyword">{
<br>&nbsp; &nbsp; </span><span class="default">tables </span><span class="keyword">and </span><span class="default">stuff
<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="string">"&lt;br&gt;\n"</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">);
<br>}
<br></span><span class="default">ob_flush</span><span class="keyword">();
<br></span><span class="default">flush</span><span class="keyword">();&nbsp; </span><span class="comment">// needed ob_flush
<br></span><span class="default">usleep</span><span class="keyword">(</span><span class="default">50000</span><span class="keyword">);</span><span class="comment">// delay minimum of .05 seconds to allow ie to flush to screen
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="75115">  
  <a class="name">
  <strong class="user"><em>mbilliet at gmail dot com</em></strong></a><div class="date" title="2007-05-13 03:13"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom75115">
<div class="phpcode"><code><span class="html">
Hello,<br><br>I had the same problems with sending a javascript after the &lt;body&gt;&lt;/body&gt; content has been sent to the browser (the script updates the content of an iframe).<br><br>Two solutions work for me:<br>&nbsp;&nbsp; - add enough data (i.e.: extra dummy text like spaces) or,<br>&nbsp;&nbsp; - echo the '&lt;/body&gt;' tag at the end of the page<br><br>Note, that for the latter to work one should:<br>&nbsp;&nbsp; - turn of output_buffering in php.ini and either:<br>&nbsp; &nbsp; &nbsp; * turn on implicit_flush in its php.ini or,<br>&nbsp; &nbsp; &nbsp; * call ob_implicit_flush(); at the beginning of a script<br><br>I preferr echoing the '&lt;/body&gt;' tag at the end as it doesn't require any extra data to be sent over the wire and its much a neater coding technique.<br><br>Notes:<br>&nbsp;&nbsp; - these worakarounds aren't needed when using perl and cgi,... .<br>&nbsp;&nbsp; - you can leave the zlib.output_compression in your php.ini switched on<br><br>Kind regards and hoped this is of any help.<br><br>Maurits</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50624">  
  <a class="name">
  <strong class="user"><em>crmacd at yahoo dot com</em></strong></a><div class="date" title="2005-03-04 03:28"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50624">
<div class="phpcode"><code><span class="html">
I figured out a way to create a simple progress bar that is for the most part cross platform. Seeing as I got my ideas from this site it's only share to give back to the community.<br><br>Note: Something interesting about browser buffering... you have to have the &lt;html&gt;&lt;body&gt; for Firefox and some other browsers to recognize items by their id in Javascript. So I recommend using some sort of header function before calling this function.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">fn_progress_bar</span><span class="keyword">(</span><span class="default">$intCurrentCount </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">, </span><span class="default">$intTotalCount </span><span class="keyword">= </span><span class="default">100</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; static </span><span class="default">$intNumberRuns </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; static </span><span class="default">$intDisplayedCurrentPercent </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$strProgressBar </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$dblPercentIncrease </span><span class="keyword">= (</span><span class="default">100 </span><span class="keyword">/ </span><span class="default">$intTotalCount</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$intCurrentPercent </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$intCurrentCount </span><span class="keyword">* </span><span class="default">$dblPercentIncrease</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$intNumberRuns</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; if(</span><span class="default">1 </span><span class="keyword">== </span><span class="default">$intNumberRuns</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strProgressBar </span><span class="keyword">= &lt;&lt;&lt; BAR<br></span><span class="string">&lt;table width='50%' id='progress_bar' summary='progress_bar' align='center'&gt;&lt;tbody&gt;&lt;tr&gt;<br>&lt;td id='progress_bar_complete' width='0%' align='center' style='background:#CCFFCC;'&gt;&amp;nbsp;&lt;/td&gt;<br>&lt;td style='background:#FFCCCC;'&gt;&amp;nbsp;&lt;/td&gt;<br>&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;<br>&lt;script type='text/javascript' language='javascript'&gt;<br>function dhd_fn_progress_bar_update(intCurrentPercent)<br>{<br>&nbsp; &nbsp; document.getElementById('progress_bar_complete').style.width = intCurrentPercent+'%';<br>&nbsp; &nbsp; document.getElementById('progress_bar_complete').innerHTML = intCurrentPercent+'%';<br>}<br>&lt;/script&gt;<br></span><span class="keyword">BAR;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else if(</span><span class="default">$intDisplayedCurrentPercent </span><span class="keyword">&lt;&gt; </span><span class="default">$intCurrentPercent</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$intDisplayedCurrentPercent </span><span class="keyword">= </span><span class="default">$intCurrentPercent</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strProgressBar </span><span class="keyword">= &lt;&lt;&lt; BAR<br></span><span class="string">&lt;script type='text/javascript' language='javascript'&gt;<br>dhd_fn_progress_bar_update(</span><span class="default">$intCurrentPercent</span><span class="string">);<br>&lt;/script&gt;<br></span><span class="keyword">BAR;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if(</span><span class="default">100 </span><span class="keyword">&lt;= </span><span class="default">$intCurrentPercent</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$intNumberRuns </span><span class="keyword">= </span><span class="default">$intDisplayedCurrentPercent </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$strProgressBar </span><span class="keyword">= &lt;&lt;&lt; BAR<br></span><span class="string">&lt;script type='text/javascript' language='javascript'&gt;<br>document.getElementById('progress_bar').style.visibility='hidden';<br>&lt;/script&gt;<br></span><span class="keyword">BAR;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; echo </span><span class="default">$strProgressBar</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">ob_flush</span><span class="keyword">();<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="40180">  
  <a class="name">
  <strong class="user"><em>Rusty</em></strong></a><div class="date" title="2004-02-24 09:25"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom40180">
<div class="phpcode"><code><span class="html">
Netscape will flush the output as expected at the point it is called from within your script. IE, however, needs a boost.<br><br>IE seems to have a condition where it will flush data when it hits an end (&lt;/table&gt;) tag AND has at least 256 chars of data.<br><br>So, pad your output with necessary spaces, wrap your progressing data around open (&lt;table&gt;) and end (&lt;/table&gt;) tags, and then call flush() so that one script will work for Netscape as well.<br><br>TESTING ENVIRONMENT<br>IE: Ver/6.0.2800<br>Netscape: Ver/7.1<br>PHP: Ver/4.3.4<br>Apache: Ver/1.3.27</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86307">  
  <a class="name">
  <strong class="user"><em>Mr.KTO</em></strong></a><div class="date" title="2008-10-12 06:14"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86307">
<div class="phpcode"><code><span class="html">
IE 7, Opera 9.6, any. All is quite simple. Today I just fogot what i do every night, :)<br><br><span class="default">&lt;?php<br></span><span class="comment">// All you need is 256 spaces first<br></span><span class="keyword">echo </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">256</span><span class="keyword">).</span><span class="string">"&lt;pre&gt;"</span><span class="keyword">; </span><span class="default">flush</span><span class="keyword">();<br><br></span><span class="comment">// and ANY TAG before \r\n<br></span><span class="keyword">echo </span><span class="string">"working...&lt;br/&gt;\r\n"</span><span class="keyword">; </span><span class="default">flush</span><span class="keyword">(); </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// this in cycle<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="59066">  
  <a class="name">
  <strong class="user"><em>mega023 at gmail dot com</em></strong></a><div class="date" title="2005-11-25 03:54"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom59066">
<div class="phpcode"><code><span class="html">
If flush is not working probably mod_gzip is enabled.<br>To disable it just add following lines to .htaccess<br><br>&lt;IfModule mod_gzip.c&gt;<br>mod_gzip_on no<br>&lt;/IfModule&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51143">  
  <a class="name">
  <strong class="user"><em>matt at nospamplease dot hevanet dot com</em></strong></a><div class="date" title="2005-03-21 10:42"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51143">
<div class="phpcode"><code><span class="html">
Like IE, Safari needs a fair amount of data before it'll display anything, actually more than explorer.&nbsp; The following code works for me in Firefox and Safari, and should work in IE as well.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">40000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br>{<br>echo </span><span class="string">' '</span><span class="keyword">; </span><span class="comment">// extra spaces<br></span><span class="keyword">}<br></span><span class="comment">// keeps it flowing to the browserï¿½<br></span><span class="default">flush</span><span class="keyword">();<br></span><span class="comment">// 50000 microseconds keeps things flowing in safari, IE, firefox, etc<br></span><span class="default">usleep</span><span class="keyword">(</span><span class="default">50000</span><span class="keyword">);<br><br></span><span class="default">?&gt;<br></span><br>This code came from a comment on a blog discussing browser functionality with flush();</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109239">  
  <a class="name">
  <strong class="user"><em>Kris</em></strong></a><div class="date" title="2012-06-29 01:19"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109239">
<div class="phpcode"><code><span class="html">
I had a bunch of problems trying to get flush working on my windows box, I finally found a solution after reading everyones here and it not working.<br><br>1) Set output_buffering = 0<br>2) Set zlib.output_compression = 0<br><br>I then used Wireshark to monitor network packets, and indeed the server was pusing the data, but the browser was not displaying it.. So it was a browser buffer issue (I am on Firefox 13)<br><br>For me I needed to send about 1k of data before it would display the data. To do this I added more header information.. <br> In php.ini I set default_charset = "utf-8"<br>And that was enough to give me enough for the buffer issue.<br><br>You can also try doing <br>echo str_repeat(" ", 1024), "\n";<br>at the start of the script.<br><br>hope this helps</span>
</code></div>
  </div>
 </div>
  <div class="note" id="52147">  
  <a class="name">
  <strong class="user"><em>Alex</em></strong></a><div class="date" title="2005-04-22 02:35"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom52147">
<div class="phpcode"><code><span class="html">
Modified progress bar.. Works in IE, Mozilla+FF.<br><br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;style type="text/css"&gt;&lt;!--<br><br>div {<br> margin: 1px;<br> height: 20px;<br> padding: 1px;<br> border: 1px solid #000;<br> width: 275px;<br> background: #fff;<br> color: #000;<br> float: left;<br> clear: right;<br> top: 38px;<br> z-index: 9<br>}<br><br>.percents {<br> background: #FFF;<br> border: 1px solid #CCC;<br> margin: 1px;<br> height: 20px;<br> position:absolute;<br> width:275px;<br> z-index:10;<br> left: 10px;<br> top: 38px;<br> text-align: center;<br>}<br><br>.blocks {<br> background: #EEE;<br> border: 1px solid #CCC;<br> margin: 1px;<br> height: 20px;<br> width: 10px;<br> position: absolute;<br> z-index:11;<br> left: 12px;<br> top: 38px;<br> filter: alpha(opacity=50);<br> -moz-opacity: 0.5;<br> opacity: 0.5;<br> -khtml-opacity: .5<br>}<br><br>--&gt;<br>&lt;/style&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (</span><span class="default">ob_get_level</span><span class="keyword">() == </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">ob_start</span><span class="keyword">();<br>}<br>echo </span><span class="default">str_pad</span><span class="keyword">(</span><span class="string">'Loading... '</span><span class="keyword">,</span><span class="default">4096</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;\n"</span><span class="keyword">;<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">25</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">$d </span><span class="keyword">+ </span><span class="default">11</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$m</span><span class="keyword">=</span><span class="default">$d</span><span class="keyword">+</span><span class="default">10</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//This div will show loading percents<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">'&lt;div class="percents"&gt;' </span><span class="keyword">. </span><span class="default">$i</span><span class="keyword">*</span><span class="default">4 </span><span class="keyword">. </span><span class="string">'%&amp;nbsp;complete&lt;/div&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">//This div will show progress bar<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">'&lt;div class="blocks" style="left: '</span><span class="keyword">.</span><span class="default">$d</span><span class="keyword">.</span><span class="string">'px"&gt;&amp;nbsp;&lt;/div&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">ob_flush</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">sleep</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br>}<br></span><span class="default">ob_end_flush</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span>&lt;div class="percents" style="z-index:12"&gt;Done.&lt;/div&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="50610">  
  <a class="name">
  <strong class="user"><em>siggi AT june systems DOT com</em></strong></a><div class="date" title="2005-03-04 07:54"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom50610">
<div class="phpcode"><code><span class="html">
After searching through the PHP site, google and various forums, not finding a solution to my script not outputting anything while calling flush and ob_flush, I thought of trying to tell PHP to call:<br><br>session_write_close();<br><br>before starting echo'ing. It worked like a charm. I couldn't find any references to this, so I hope this note will help someone in the future.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87040">  
  <a class="name">
  <strong class="user"><em>Arerano</em></strong></a><div class="date" title="2008-11-16 06:58"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87040">
<div class="phpcode"><code><span class="html">
This helped me getting flushing to work.<br>Using apache with deflate.<br><br>Turning compression off for this script: (add it somewhere at the top of the script)<br>apache_setenv('no-gzip', '1');<br><br>However, this only works if php is running as a module rather than a cgi-extension and safe mode must be disabled.<br><br>You can also turn the compression off for a directory by making a .htaccess file and adding the following entry:<br>mod_gzip_on Off<br><br>However that affects the whole directory.<br>Hope I could help.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74222">  
  <a class="name">
  <strong class="user"><em>Leon</em></strong></a><div class="date" title="2007-03-30 04:14"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74222">
<div class="phpcode"><code><span class="html">
I've spent days trying to figure out why flush didn't work all of a sudden, while it used to work perfectly. Apparently, it was McAfee Spamkiller that caused problems. Disabling it didn't work, I had to completely remove it. Hope this helps someone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="72985">  
  <a class="name">
  <strong class="user"><em>Kirk</em></strong></a><div class="date" title="2007-02-06 12:25"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom72985">
<div class="phpcode"><code><span class="html">
If you're not explictly using the buffering functions, then ob_flush() is only necessary if output buffering is turned on in your php.ini file.<br><br>flush() is only necessary if implicit_flush is turned off in your php.ini file. Setting implicit_flush to on will remove the need for all these flush() calls, but it's generally only good in an extremely controlled environment. Turning on implicit_flush in a production environment can be bad.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="68620">  
  <a class="name">
  <strong class="user"><em>no at spam dot com</em></strong></a><div class="date" title="2006-08-03 11:51"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom68620">
<div class="phpcode"><code><span class="html">
ob_flush();flush();<br><br>Not the other way around, because it wont work.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57398">  
  <a class="name">
  <strong class="user"><em>mikael at oebb dot net</em></strong></a><div class="date" title="2005-10-03 01:47"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57398">
<div class="phpcode"><code><span class="html">
Hi all.<br>Been scratching my head over data NOT flushed to IE (6) even though I tried strpad 4096 chars, all headers OK,&nbsp; TABLE and no TABLE, flush and ob_flush - still a blank page. Tried adding a sleep(1) before flushing - and everything worked as a charm.&nbsp; <br><br>/Mikael</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51920">  
  <a class="name">
  <strong class="user"><em>Marty</em></strong></a><div class="date" title="2005-04-14 08:33"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51920">
<div class="phpcode"><code><span class="html">
This is an extention of Rusty's comment below: <br><br>After sitting here for hours trying to make IE6 flush data out in the middle of a page (with it working perfectly in Firefox), I finally figured out the problem. IE will not display flushed data (even if it has it) unless the table that contains it is complete.<br><br>Every new element you want IE to display must not be in ANY kind of table at all. You must end all your tables.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="51679">  
  <a class="name">
  <strong class="user"><em>Ghostshaw at spymac dot com</em></strong></a><div class="date" title="2005-04-07 04:45"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom51679">
<div class="phpcode"><code><span class="html">
I would like to point out that there is a function to replace ob_flush and flush. If you set ob_implicit_flush(true); at the top of the page it will automatically flush any echo or print you do in the rest of the script.<br><br>Note that you still need a minimum amount of data to come through the browser filter. I would advice using str_pad($text,4096); since this automatically lenghtens the text with spaces to 4 KB which is the minimum limit when using FireFox and linux.<br><br>I hope this helps you all out a bit.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="49569">  
  <a class="name">
  <strong class="user"><em>Squ1sher</em></strong></a><div class="date" title="2005-02-01 12:25"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom49569">
<div class="phpcode"><code><span class="html">
On Windows xampp 1.3 with php 4.3.4 is use this functions
<br>to force a flush.
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">dummyErrorHandler </span><span class="keyword">(</span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$errfile</span><span class="keyword">, </span><span class="default">$errline</span><span class="keyword">) {
<br>}
<br>
<br>function </span><span class="default">forceFlush</span><span class="keyword">() {&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">ob_start</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">ob_end_clean</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">set_error_handler</span><span class="keyword">(</span><span class="string">"dummyErrorHandler"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">ob_end_flush</span><span class="keyword">();
<br>&nbsp; &nbsp; </span><span class="default">restore_error_handler</span><span class="keyword">();
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>ob_end_flush generates a warning, which is supressed, using the dummy-errorhander. You could also use @, but then nusphere will also print the warning.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85382">  
  <a class="name">
  <strong class="user"><em>Lucas</em></strong></a><div class="date" title="2008-08-27 03:12"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85382">
<div class="phpcode"><code><span class="html">
I just had some problems with flush() and ob_flush(). What I did to resolve this problem took me some time to figure out so I'd like to share what I came up with.<br><br>The main problem is the php setting "output_buffering" which can be set too large and will prevent your text from outputting. To change this value you can either set it in php.ini or you can add the line <br><br>php_value output_buffering "0"<br><br>to your .htaccess file. It will not work with ini_set() since it is PHP_INI_PERDIR.<br><br>Next thing is to begin with ob_start();<br>Then you need<br>ob_flush();<br>flush();<br>before any echo or print.<br><br>Your code might look like this:<br><br><span class="default">&lt;?php<br>ob_start</span><span class="keyword">();<br><br>for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">70</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++)<br>{<br>&nbsp; &nbsp; echo </span><span class="string">'printing...&lt;br /&gt;'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">ob_flush</span><span class="keyword">();<br>&nbsp; &nbsp; </span><span class="default">flush</span><span class="keyword">();<br><br>&nbsp; &nbsp; </span><span class="default">usleep</span><span class="keyword">(</span><span class="default">300000</span><span class="keyword">);<br>}<br><br></span><span class="default">?&gt;<br></span><br>Hope this helps anyone with the same problems.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64010">  
  <a class="name">
  <strong class="user"><em>vlad at modomail dot com</em></strong></a><div class="date" title="2006-04-05 06:46"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64010">
<div class="phpcode"><code><span class="html">
Sorry if this is off topic, but it's the closest place I could find :)&nbsp; I had an issue with essentially running a CPU intensive task while updating the browser with a progress bar via javascript and flushing the buffer a lot.<br><br>When the script was running, it effectively blocked other pages from running.&nbsp; I had a few extra httpd_preforks processes just waiting to be used, but they just sat there.&nbsp; I wasn't reading a file, locking database tables or anything that I would suspect an exclusive lock on, just outputting a bunch of text to the browser.&nbsp; I even tried throttling my loops to see if it was processor related but still had problems.<br><br>Finally, I found this in the php.ini file and changed the On to Off and it worked.<br><br>[Sockets]<br>; Use the system read() function instead of the php_read() wrapper.<br>sockets.use_system_read = Off<br><br>Posting in case someone else has the same issue (or if someone knows why this would make a difference :) ).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="36206">  
  <a class="name">
  <strong class="user"><em>scottmacvicar at ntlworld dot com</em></strong></a><div class="date" title="2003-09-30 07:40"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom36206">
<div class="phpcode"><code><span class="html">
Regarding Apache2<br>flush() will produce the same results as ob_flush() when output buffering is involved.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83037">  
  <a class="name">
  <strong class="user"><em>David</em></strong></a><div class="date" title="2008-05-07 02:32"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83037">
<div class="phpcode"><code><span class="html">
mod_security 2.x core rules will also prevent flush() from working.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74698">  
  <a class="name">
  <strong class="user"><em>macott[D0T]daiato[4T]gmail[D0T]com</em></strong></a><div class="date" title="2007-04-24 12:17"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74698">
<div class="phpcode"><code><span class="html">
If flush() don't work remember to check if you have any antivirus caching the data sent to the browser.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.flush.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:08:34 GMT -->


</body></html>