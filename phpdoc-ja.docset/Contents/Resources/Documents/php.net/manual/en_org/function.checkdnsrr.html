<html><!-- Mirrored from php.net/manual/en/function.checkdnsrr.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:37 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>checkdnsrr</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.checkdnsrr.html">
 <link rel="shorturl" href="http://php.net/checkdnsrr">
 <link rel="alternate" href="http://php.net/checkdnsrr" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.network.html">
 <link rel="prev" href="ref.network.html">
 <link rel="next" href="function.closelog.html">

 <link rel="alternate" href="function.checkdnsrr.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.checkdnsrr.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.checkdnsrr.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.checkdnsrr.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.checkdnsrr.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.checkdnsrr.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.checkdnsrr.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.checkdnsrr.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.checkdnsrr.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.checkdnsrr.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.checkdnsrr.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.remote.other.html">Other Services</a></li>      <li><a href="book.network.html">Network</a></li>      <li><a href="ref.network.html">Network Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.checkdnsrr" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">checkdnsrr</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">checkdnsrr</span> â€” <span class="dc-title">Check DNS records corresponding to a given Internet host name or IP address</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.checkdnsrr-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>checkdnsrr</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$host</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$type</code><span class="initializer"> = "MX"</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Searches DNS for records of type <code class="parameter">type</code>
   corresponding to <code class="parameter">host</code>. 
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.checkdnsrr-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">host</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">host</code> may either be the IP address in
       dotted-quad notation or the host name.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">type</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">type</code> may be any one of: A, MX, NS, SOA,
       PTR, CNAME, AAAA, A6, SRV, NAPTR, TXT or ANY.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.checkdnsrr-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> if any records are found; returns <strong><code>FALSE</code></strong> if no records
   were found or if an error occurred.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.checkdnsrr-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
         This function is now available on Windows platforms.
       </td>
      </tr>

      <tr>
       <td>5.2.4</td>
       <td>
        TXT <code class="parameter">type</code> was added.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.checkdnsrr-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    For compatibility with Windows before this was implemented, then try the
    <a href="http://pear.php.net/" class="link external">Â»&nbsp;PEAR</a> class
    <a href="http://pear.php.net/package/Net_DNS" class="link external">Â»&nbsp;Net_DNS</a>.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.checkdnsrr-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.dns-get-record.html" class="function" rel="rdfs-seeAlso">dns_get_record()</a> - Fetch DNS Resource Records associated with a hostname</span></li>
    <li class="member"><span class="function"><a href="function.getmxrr.html" class="function" rel="rdfs-seeAlso">getmxrr()</a> - Get MX records corresponding to a given Internet host name</span></li>
    <li class="member"><span class="function"><a href="function.gethostbyaddr.html" class="function" rel="rdfs-seeAlso">gethostbyaddr()</a> - Get the Internet host name corresponding to a given IP address</span></li>
    <li class="member"><span class="function"><a href="function.gethostbyname.html" class="function" rel="rdfs-seeAlso">gethostbyname()</a> - Get the IPv4 address corresponding to a given Internet host name</span></li>
    <li class="member"><span class="function"><a href="function.gethostbynamel.html" class="function" rel="rdfs-seeAlso">gethostbynamel()</a> - Get a list of IPv4 addresses corresponding to a given Internet host
   name</span></li>
    <li class="member">the named(8) manual page</li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="48157">  
  <a class="name">
  <strong class="user"><em>Patrick</em></strong></a><div class="date" title="2004-12-13 07:53"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom48157">
<div class="phpcode"><code><span class="html">
This is a little code example that will validate an email address in two ways:<br>- first the general syntax of the string is checked with a regular expression<br>- then the domain substring (after the '@') is checked using the 'checkdnsrr' function<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">function </span><span class="default">validate_email</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">){<br><br>&nbsp;&nbsp; </span><span class="default">$exp </span><span class="keyword">= </span><span class="string">"^[a-z\'0-9]+([._-][a-z\'0-9]+)*@([a-z0-9]+([._-][a-z0-9]+))+$"</span><span class="keyword">;<br><br>&nbsp;&nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$exp</span><span class="keyword">,</span><span class="default">$email</span><span class="keyword">)){<br><br>&nbsp; &nbsp; &nbsp; if(</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"@"</span><span class="keyword">,</span><span class="default">$email</span><span class="keyword">)),</span><span class="string">"MX"</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br><br>&nbsp;&nbsp; }else{<br><br>&nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp;&nbsp; }&nbsp; &nbsp; <br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112739">  
  <a class="name">
  <strong class="user"><em>criffoh at gmail dot com</em></strong></a><div class="date" title="2013-07-18 02:57"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112739">
<div class="phpcode"><code><span class="html">
Is not possible validate domains with 'Ã±' for my country.<br><br>In my country is possible to register domain using 'Ã±' character. For example:<br><br>Ã±andu.cl<br><a rel="nofollow" target="_blank">http://nic.cl/cgi-bin/dom-CL?q=%F1andu</a><br><br>If I use this function to check DNS record, it return false, but the domain already exists:<br><br>var_dump(checkdnsrr('Ã±andu.cl', 'A')); // returns false</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113537">  
  <a class="name">
  <strong class="user"><em>Krisztin Ferenczi</em></strong></a><div class="date" title="2013-10-27 11:12"><strong>10 months ago</strong></div>
  <div class="text" id="Hcom113537">
<div class="phpcode"><code><span class="html">
criffoh at gmail dot com is right. Before you check domain, you must convert to ascii with idn_to_ascii function:<br><a rel="nofollow" target="_blank">http://us2.php.net/manual/en/function.idn-to-ascii.php</a> .<br><br>var_dump(checkdnsrr('Ã±andu.cl', 'A')); // returns false<br>var_dump(checkdnsrr(idn_to_ascii('Ã±andu.cl'), 'A')); // return true</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71686">  
  <a class="name"><strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-12-11 04:06"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71686">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">check_dnsbl</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,</span><span class="string">"list.dsbl.org"</span><span class="keyword">,<br></span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">,</span><span class="string">'xbl.spamhaus.org'</span><span class="keyword">);<br>&nbsp; &nbsp; if(</span><span class="default">$ip</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">array_reverse</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">))); <br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$dnsbl_check </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">'A'</span><span class="keyword">))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$rip</span><span class="keyword">.</span><span class="string">'.'</span><span class="keyword">.</span><span class="default">$val</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61220">  
  <a class="name">
  <strong class="user"><em>satmd</em></strong></a><div class="date" title="2006-01-28 08:29"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61220">
<div class="phpcode"><code><span class="html">
fox dot 69 at gmx dot net: I wonder where you got this code from. I have written this piece of code half a year ago and released it WITH a copyright header that is missing now! Anyways... this code is to be considered licenced "as-is", however it'd be nice to keep the authors note (This is something about reputation, you see?). Thanks.<br><br>(Much) more recent version of it:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">is_blacklisted</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="comment">// written by satmd, do what you want with it, but keep the author please<br>&nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=Array();<br>&nbsp;&nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"list.dsbl.org"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">);<br>&nbsp;&nbsp; if (</span><span class="default">$ip</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quads</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$dnsbl_check</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">,</span><span class="string">"A"</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[]=Array(</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">$result</span><span class="keyword">;<br>&nbsp;&nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Beware that this code's signature differs from the original! I also removed osirusoft as its results are not useful anyways (false positives!). Please make sure that you have nscd or a caching dns server running as this code is prone to (d)dos! Only use it in places where it is necessary (when data is to be modified), e.g. the script processing uploads/posts/replies in a blog.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="31730">  
  <a class="name">
  <strong class="user"><em>fox dot 69 at gmx dot net</em></strong></a><div class="date" title="2003-05-01 01:40"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom31730">
<div class="phpcode"><code><span class="html">
maybe usefull, a blacklist (DNSBL) check function:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">is_blacklisted</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$dnsbl_check</span><span class="keyword">=array(</span><span class="string">"bl.spamcop.net"</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"relays.osirusoft.com"</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"list.dsbl.org"</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"sbl.spamhaus.org"</span><span class="keyword">);
<br>&nbsp; &nbsp; if (</span><span class="default">$ip</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$quads</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">"."</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rip</span><span class="keyword">=</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">].</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$quads</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$dnsbl_check</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">checkdnsrr</span><span class="keyword">(</span><span class="default">$rip</span><span class="keyword">.</span><span class="string">"."</span><span class="keyword">.</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="string">"A"</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$listed</span><span class="keyword">.=</span><span class="default">$dnsbl_check</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">].</span><span class="string">" "</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$listed</span><span class="keyword">) { return </span><span class="default">$listed</span><span class="keyword">; } else { return </span><span class="default">FALSE</span><span class="keyword">; }
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="30692">  
  <a class="name">
  <strong class="user"><em>kriek at jonkriek dot com</em></strong></a><div class="date" title="2003-03-25 05:08"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom30692">
<div class="phpcode"><code><span class="html">
The checkdnsrr function is not implemented on the Windows platform. The way to get around this problem is to write your own version of checkdnsrr. Example: myCheckDNSRR
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">myCheckDNSRR</span><span class="keyword">(</span><span class="default">$hostName</span><span class="keyword">, </span><span class="default">$recType </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">) 
<br>{ 
<br> if(!empty(</span><span class="default">$hostName</span><span class="keyword">)) { 
<br>&nbsp;&nbsp; if( </span><span class="default">$recType </span><span class="keyword">== </span><span class="string">'' </span><span class="keyword">) </span><span class="default">$recType </span><span class="keyword">= </span><span class="string">"MX"</span><span class="keyword">; 
<br>&nbsp;&nbsp; </span><span class="default">exec</span><span class="keyword">(</span><span class="string">"nslookup -type=</span><span class="default">$recType</span><span class="string"> </span><span class="default">$hostName</span><span class="string">"</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">); 
<br>&nbsp;&nbsp; </span><span class="comment">// check each line to find the one that starts with the host 
<br>&nbsp;&nbsp; // name. If it exists then the function succeeded. 
<br>&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$result </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">) { 
<br>&nbsp; &nbsp;&nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="string">"^</span><span class="default">$hostName</span><span class="string">"</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">)) { 
<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">; 
<br>&nbsp; &nbsp;&nbsp; } 
<br>&nbsp;&nbsp; } 
<br>&nbsp;&nbsp; </span><span class="comment">// otherwise there was no mail handler for the domain 
<br>&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">; 
<br> } 
<br> return </span><span class="default">false</span><span class="keyword">; 
<br>}
<br></span><span class="default">?&gt;
<br></span>Note that the type parameter is optional, and if you don't supply it then the type defaults to "MX" (which means Mail Exchange). If any records are found, the function returns TRUE. Otherwise, it returns FALSE.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.checkdnsrr.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:05:37 GMT -->


</body></html>