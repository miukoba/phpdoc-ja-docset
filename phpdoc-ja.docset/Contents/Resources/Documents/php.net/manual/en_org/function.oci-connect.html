<html><!-- Mirrored from php.net/manual/en/function.oci-connect.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:58:09 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>oci_connect</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.oci-connect.html">
 <link rel="shorturl" href="http://php.net/oci-connect">
 <link rel="alternate" href="http://php.net/oci-connect" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.oci8.html">
 <link rel="prev" href="function.oci-commit.html">
 <link rel="next" href="function.oci-define-by-name.html">

 <link rel="alternate" href="function.oci-connect.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.oci-connect.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.oci-connect.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.oci-connect.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.oci-connect.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.oci-connect.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.oci-connect.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.oci-connect.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.oci-connect.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.oci-connect.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.oci-connect.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.database.html">Database Extensions</a></li>      <li><a href="refs.database.vendors.html">Vendor Specific Database Extensions</a></li>      <li><a href="book.oci8.html">OCI8</a></li>      <li><a href="ref.oci8.html">OCI8 Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.oci-connect" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">oci_connect</h1>
  <p class="verinfo">(PHP 5, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">oci_connect</span> â€” <span class="dc-title">Connect to an Oracle database</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.oci-connect-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">resource</span> <span class="methodname"><strong>oci_connect</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$password</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$connection_string</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$character_set</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$session_mode</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   Returns a connection identifier needed for most other OCI8 operations. 
  </p>
  <p class="para">
   See <a href="oci8.connection.html" class="link">Connection Handling</a> for
   general information on connection management and connection
   pooling.
  </p>
  <p class="para">
   From PHP 5.1.2 (PECL OCI8 1.1) <span class="function"><a href="function.oci-close.html" class="function">oci_close()</a></span> can
   be used to close the connection.
  </p>
  <p class="para">
   The second and subsequent calls to <span class="function"><strong>oci_connect()</strong></span>
   with the same parameters will return the connection handle returned
   from the first call. This means that transactions in one handle are
   also in the other handles, because they use the
   <em class="emphasis">same</em> underlying database connection. If two
   handles need to be transactionally isolated from each other, use
   <span class="function"><a href="function.oci-new-connect.html" class="function">oci_new_connect()</a></span> instead.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.oci-connect-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       The Oracle user name.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">password</code></dt>

     <dd>

      <p class="para">
       The password for <code class="parameter">username</code>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">connection_string</code></dt>

     <dd>

      <p class="para">Contains
the <em>Oracle instance</em> to connect to. It can be
an <a href="http://download.oracle.com/docs/cd/E11882_01/network.112/e10836/naming.htm" class="link external">Â»&nbsp;Easy Connect
string</a>, or a Connect Name from
the <var class="filename">tnsnames.ora</var> file, or the name of a local
Oracle instance.
</p>
<p class="para">If not specified, PHP uses
environment variables such as <strong><code>TWO_TASK</code></strong> (on Linux)
or <strong><code>LOCAL</code></strong> (on Windows)
and <strong><code>ORACLE_SID</code></strong> to determine the
<em>Oracle instance</em> to connect to.
</p>
<p class="para">
To use the Easy Connect naming method, PHP must be linked with Oracle
10<em class="emphasis">g</em> or greater Client libraries. The Easy Connect string for Oracle
10<em class="emphasis">g</em> is of the form:
<em class="emphasis">[//]host_name[:port][/service_name]</em>. From Oracle
11<em class="emphasis">g</em>, the syntax is:
<em class="emphasis">[//]host_name[:port][/service_name][:server_type][/instance_name]</em>.
Service names can be found by running the Oracle
utility <em>lsnrctl status</em> on the database server
machine.
</p>
<p class="para">
The <var class="filename">tnsnames.ora</var> file can be in the Oracle Net
search path, which
includes <var class="filename">$ORACLE_HOME/network/admin</var>
and <var class="filename">/etc</var>.  Alternatively
set <em>TNS_ADMIN</em> so
that <var class="filename">$TNS_ADMIN/tnsnames.ora</var> is read.  Make sure
the web daemon has read access to the file.
</p>
     </dd>

    
    
     <dt>
<code class="parameter">character_set</code></dt>

     <dd>

      <p class="para">Determines
the character set used by the Oracle Client libraries.  The character
set does not need to match the character set used by the database.  If
it doesn't match, Oracle will do its best to convert data to and from
the database character set.  Depending on the character sets this may
not give usable results.  Conversion also adds some time overhead.
</p>
<p class="para">If not specified, the
Oracle Client libraries determine a character set from
the <strong><code>NLS_LANG</code></strong> environment variable.
</p>
<p class="para">Passing this parameter can
reduce the time taken to connect.
</p>
     </dd>

    
    
     <dt>
<code class="parameter">session_mode</code></dt>

     <dd>

      <p class="para">This
parameter is available since version PHP 5 (PECL OCI8 1.1) and accepts the
following values: <strong><code>OCI_DEFAULT</code></strong>,
<strong><code>OCI_SYSOPER</code></strong> and <strong><code>OCI_SYSDBA</code></strong>.
If either <strong><code>OCI_SYSOPER</code></strong> or
<strong><code>OCI_SYSDBA</code></strong> were specified, this function will try
to establish privileged connection using external credentials.
Privileged connections are disabled by default. To enable them you
need to set <a href="oci8.configuration.html#ini.oci8.privileged-connect" class="link">oci8.privileged_connect</a>
to <em>On</em>.
</p>
<p class="para">
PHP 5.3 (PECL OCI8 1.3.4) introduced the
<strong><code>OCI_CRED_EXT</code></strong> mode value. This tells Oracle to use
External or OS authentication, which must be configured in the
database.  The <strong><code>OCI_CRED_EXT</code></strong> flag can only be used
with username of "/" and a empty password.
<a href="oci8.configuration.html#ini.oci8.privileged-connect" class="link">oci8.privileged_connect</a>
may be <em>On</em> or <em>Off</em>.
</p>
<p class="para">
<strong><code>OCI_CRED_EXT</code></strong> may be combined with the
<strong><code>OCI_SYSOPER</code></strong> or
<strong><code>OCI_SYSDBA</code></strong> modes.
</p>
<p class="para">
<strong><code>OCI_CRED_EXT</code></strong> is not supported on Windows for
security reasons.
</p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.oci-connect-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns a connection identifier or <strong><code>FALSE</code></strong> on error.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.oci-connect-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-2057">
    <p><strong>Example #1 Basic <span class="function"><strong>oci_connect()</strong></span> using Easy Connect syntax</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Connects&nbsp;to&nbsp;the&nbsp;XE&nbsp;service&nbsp;(i.e.&nbsp;database)&nbsp;on&nbsp;the&nbsp;"localhost"&nbsp;machine<br></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br>if&nbsp;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;employees'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"&lt;table&nbsp;border='1'&gt;\n"</span><span style="color: #007700">;<br>while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #DD0000">"&amp;nbsp;"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br>}<br>echo&nbsp;</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-2058">
    <p><strong>Example #2 Basic <span class="function"><strong>oci_connect()</strong></span> using a Network Connect name</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br></span><span style="color: #FF8000">//&nbsp;Connects&nbsp;to&nbsp;the&nbsp;MYDB&nbsp;database&nbsp;described&nbsp;in&nbsp;tnsnames.ora&nbsp;file,<br>//&nbsp;One&nbsp;example&nbsp;tnsnames.ora&nbsp;entry&nbsp;for&nbsp;MYDB&nbsp;could&nbsp;be:<br>//&nbsp;&nbsp;&nbsp;MYDB&nbsp;=<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(DESCRIPTION&nbsp;=<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ADDRESS&nbsp;=&nbsp;(PROTOCOL&nbsp;=&nbsp;TCP)(HOST&nbsp;=&nbsp;mymachine.oracle.com)(PORT&nbsp;=&nbsp;1521))<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(CONNECT_DATA&nbsp;=<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SERVER&nbsp;=&nbsp;DEDICATED)<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SERVICE_NAME&nbsp;=&nbsp;XE)<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br><br></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'MYDB'</span><span style="color: #007700">);<br>if&nbsp;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;employees'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"&lt;table&nbsp;border='1'&gt;\n"</span><span style="color: #007700">;<br>while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #DD0000">"&amp;nbsp;"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br>}<br>echo&nbsp;</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-2059">
    <p><strong>Example #3 <span class="function"><strong>oci_connect()</strong></span> with an explicit character set</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'hr'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'AL32UTF8'</span><span style="color: #007700">);<br>if&nbsp;(!</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$e&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br>}<br><br></span><span style="color: #0000BB">$stid&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;employees'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">);<br><br>echo&nbsp;</span><span style="color: #DD0000">"&lt;table&nbsp;border='1'&gt;\n"</span><span style="color: #007700">;<br>while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stid</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OCI_ASSOC</span><span style="color: #007700">+</span><span style="color: #0000BB">OCI_RETURN_NULLS</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;&nbsp;&nbsp;&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;(</span><span style="color: #0000BB">$item&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">null&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">htmlentities</span><span style="color: #007700">(</span><span style="color: #0000BB">$item</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ENT_QUOTES</span><span style="color: #007700">)&nbsp;:&nbsp;</span><span style="color: #DD0000">"&amp;nbsp;"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br>}<br>echo&nbsp;</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-2060">
    <p><strong>Example #4 Using multiple calls to <span class="function"><strong>oci_connect()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$c1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"hr"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"welcome"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$c2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"hr"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"welcome"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'localhost/XE'</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Both&nbsp;$c1&nbsp;and&nbsp;$c2&nbsp;show&nbsp;the&nbsp;same&nbsp;PHP&nbsp;resource&nbsp;id&nbsp;meaning&nbsp;they&nbsp;use&nbsp;the<br>//&nbsp;same&nbsp;underlying&nbsp;database&nbsp;connection<br></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"c1&nbsp;is&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"c2&nbsp;is&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br><br>function&nbsp;</span><span style="color: #0000BB">create_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"create&nbsp;table&nbsp;hallo&nbsp;(test&nbsp;varchar2(64))"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Created&nbsp;table&lt;br&gt;\n"</span><span style="color: #007700">;<br>}<br><br>function&nbsp;</span><span style="color: #0000BB">drop_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"drop&nbsp;table&nbsp;hallo"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Dropped&nbsp;table&lt;br&gt;\n"</span><span style="color: #007700">;<br>}<br><br>function&nbsp;</span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;hallo<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values(to_char(sysdate,'DD-MON-YY&nbsp;HH24:MI:SS'))"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OCI_DEFAULT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000">&nbsp;inserted&nbsp;row&nbsp;without&nbsp;committing&lt;br&gt;\n"</span><span style="color: #007700">;<br>}<br><br>function&nbsp;</span><span style="color: #0000BB">rollback</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">oci_rollback</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000">&nbsp;rollback&lt;br&gt;\n"</span><span style="color: #007700">;<br>}<br><br>function&nbsp;</span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #0000BB">$connname</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_parse</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"select&nbsp;*&nbsp;from&nbsp;hallo"</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">oci_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">OCI_DEFAULT</span><span style="color: #007700">);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000">&nbsp;----selecting&lt;br&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">oci_fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">oci_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"TEST"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br&gt;\n"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"</span><span style="color: #0000BB">$connname</span><span style="color: #DD0000">&nbsp;----done&lt;br&gt;\n"</span><span style="color: #007700">;<br>}<br><br></span><span style="color: #0000BB">create_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Insert&nbsp;a&nbsp;row&nbsp;using&nbsp;c1<br></span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;sleep&nbsp;to&nbsp;show&nbsp;a&nbsp;different&nbsp;timestamp&nbsp;for&nbsp;the&nbsp;2nd&nbsp;row<br></span><span style="color: #0000BB">insert_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Insert&nbsp;a&nbsp;row&nbsp;using&nbsp;c2<br><br></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Results&nbsp;of&nbsp;both&nbsp;inserts&nbsp;are&nbsp;returned<br></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Results&nbsp;of&nbsp;both&nbsp;inserts&nbsp;are&nbsp;returned<br><br></span><span style="color: #0000BB">rollback</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Rollback&nbsp;using&nbsp;c1<br><br></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;Both&nbsp;inserts&nbsp;have&nbsp;been&nbsp;rolled&nbsp;back<br></span><span style="color: #0000BB">select_data</span><span style="color: #007700">(</span><span style="color: #DD0000">'c2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">drop_table</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">//&nbsp;Closing&nbsp;one&nbsp;of&nbsp;the&nbsp;connections&nbsp;makes&nbsp;the&nbsp;PHP&nbsp;variable&nbsp;unusable,&nbsp;but<br>//&nbsp;the&nbsp;other&nbsp;could&nbsp;be&nbsp;used<br></span><span style="color: #0000BB">oci_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$c1</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #DD0000">"c1&nbsp;is&nbsp;</span><span style="color: #0000BB">$c1</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br>echo&nbsp;</span><span style="color: #DD0000">"c2&nbsp;is&nbsp;</span><span style="color: #0000BB">$c2</span><span style="color: #DD0000">&lt;br&gt;\n"</span><span style="color: #007700">;<br><br><br></span><span style="color: #FF8000">//&nbsp;Output&nbsp;is:<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;is&nbsp;Resource&nbsp;id&nbsp;#5<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;is&nbsp;Resource&nbsp;id&nbsp;#5<br>//&nbsp;&nbsp;&nbsp;&nbsp;Created&nbsp;table<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;inserted&nbsp;row&nbsp;without&nbsp;committing<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;inserted&nbsp;row&nbsp;without&nbsp;committing<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;----selecting<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;09-DEC-09&nbsp;12:14:43<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;09-DEC-09&nbsp;12:14:45<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;----done<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;----selecting<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;09-DEC-09&nbsp;12:14:43<br>//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;09-DEC-09&nbsp;12:14:45<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;----done<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;rollback<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;----selecting<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;----done<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;----selecting<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;----done<br>//&nbsp;&nbsp;&nbsp;&nbsp;Dropped&nbsp;table<br>//&nbsp;&nbsp;&nbsp;&nbsp;c1&nbsp;is&nbsp;<br>//&nbsp;&nbsp;&nbsp;&nbsp;c2&nbsp;is&nbsp;Resource&nbsp;id&nbsp;#5<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.oci-connect-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    An incorrectly installed or configured OCI8 extension will often
    manifest itself as a connection problem or error.
    See <a href="oci8.setup.html" class="link">Installing/Configuring</a> for
    troubleshooting information.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.oci-connect-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.oci-pconnect.html" class="function" rel="rdfs-seeAlso">oci_pconnect()</a> - Connect to an Oracle database using a persistent connection</span></li>
    <li class="member"><span class="function"><a href="function.oci-new-connect.html" class="function" rel="rdfs-seeAlso">oci_new_connect()</a> - Connect to the Oracle server using a unique connection</span></li>
    <li class="member"><span class="function"><a href="function.oci-close.html" class="function" rel="rdfs-seeAlso">oci_close()</a> - Closes an Oracle connection</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="27061">  
  <a class="name">
  <strong class="user"><em>M0no at ethonfusino dot com</em></strong></a><div class="date" title="2002-11-21 10:04"><strong>11 years ago</strong></div>
  <div class="text" id="Hcom27061">
<div class="phpcode"><code><span class="html">
If your oracle database is on a remote system within your local network and you don't want to worry about the tnsnames file you can try this.
<br>
<br>$db = "(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.XX.XXX)(PORT = 1521)))(CONNECT_DATA=(SID=XXXX)))";
<br>
<br>$c1 = ocilogon("name","password",$db);
<br>
<br>Hope this helps someone.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90816">  
  <a class="name">
  <strong class="user"><em>Leandro da Cunha Campos</em></strong></a><div class="date" title="2009-05-11 11:04"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90816">
<div class="phpcode"><code><span class="html">
ONE ALTERNATIVE OF CONNECT IN ORACLE RAC "Real Application Clusters"
<br>
<br><span class="default">&lt;?php
<br>$dbstr </span><span class="keyword">=</span><span class="string">"(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST =ip1)(PORT = 1521))
<br>(CONNECT_DATA =
<br>(SERVER = DEDICATED)
<br>(SERVICE_NAME = banco)
<br>(INSTANCE_NAME = banco1)))"</span><span class="keyword">; 
<br> 
<br></span><span class="default">$dbstr1 </span><span class="keyword">=</span><span class="string">"(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST =ip2)(PORT = 1521))
<br>(CONNECT_DATA =
<br>(SERVER = DEDICATED)
<br>(SERVICE_NAME = banco)
<br>(INSTANCE_NAME = banco2)))"</span><span class="keyword">; 
<br> 
<br>if(!@(</span><span class="default">$conn </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">'user'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">,</span><span class="default">$dbstr1</span><span class="keyword">)))
<br>{ </span><span class="default">$conn </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">'user'</span><span class="keyword">,</span><span class="string">'password'</span><span class="keyword">,</span><span class="default">$dbstr</span><span class="keyword">) or die (</span><span class="default">ocierror</span><span class="keyword">()); }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="54755">  
  <a class="name">
  <strong class="user"><em>ben at onshop dot co dot uk</em></strong></a><div class="date" title="2005-07-14 05:25"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom54755">
<div class="phpcode"><code><span class="html">
There is a useful solution to the problem of securing connection information in the PHP Cookbook (O'Reilly) by David Sklar and Adam Trachtenberg. They propose using 'SetEnv' in the Apache configuration and then accessing the values from within a script using $_SERVER.
<br>
<br>Unfortunately using the 'SetEnv' solution exposes your connection information to all users of that virtual host. If they run phpinfo.php or display $_SERVER, I found that they will see the password from any file under the root of that virtual host.
<br>
<br>To restrict exposure to a particular directory or specific file:
<br>
<br>1. First put an 'Include' to the secret file in httpd.conf. For example:
<br>
<br>Include "/web/private/secret.txt"
<br>
<br>2. In the password file, use the 'SetEnvIf' directive to enable the Environment variables by directory only or within a specific file. For example:
<br>
<br>- For all files in the directory:
<br>
<br>SetEnvIf Request_URI "/path/to/my/directory" ORACLE_PASS=5gHj790j
<br>
<br>- For a specific file in the directory
<br>
<br>SetEnvIf Request_URI "/path/to/my/directory/connection.oracle.php" ORACLE_PASS=5gHj790j</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105284">  
  <a class="name">
  <strong class="user"><em>peter at goldthorp dot com</em></strong></a><div class="date" title="2011-08-07 03:28"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105284">
<div class="phpcode"><code><span class="html">
I started getting "ORA-12514: TNS:listener does not currently know of service requested in connect descriptor" errors when I upgraded my database instance from 10.2 to 11.2.&nbsp; For some reason it would not resolve the oci_connect calls with the Easy Connect syntax (easy connect calls from sqlplus were fine).&nbsp; I was able to workaround the issue by passing a tns connect string:
<br>
<br><span class="default">&lt;?php
<br>$db </span><span class="keyword">= </span><span class="string">"(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.XX.XXX)(PORT = 1521)))(CONNECT_DATA=(SID=XXXX)))"</span><span class="keyword">;
<br>
<br></span><span class="default">$c1 </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="string">"name"</span><span class="keyword">,</span><span class="string">"password"</span><span class="keyword">,</span><span class="default">$db</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102294">  
  <a class="name">
  <strong class="user"><em>jtacon at php dot net</em></strong></a><div class="date" title="2011-02-07 05:24"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102294">
<div class="phpcode"><code><span class="html">
If you upgrades the OCI8, be sure to use the latest oracle instantclient version, otherwise you can receive an "ORA-24315: illegal attribute type" when trying to connect due to incompatibility with some versions.<br><br>HTH,<br>Javier TacÃ³n</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91988">  
  <a class="name">
  <strong class="user"><em>drew dot carmichael at gmail dot com</em></strong></a><div class="date" title="2009-07-03 01:55"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91988">
<div class="phpcode"><code><span class="html">
When using the OCI_CRED_EXT in php <br>if the ENV $ORACLE_SID is set the DB does not need to be specified explicitly and the connection will fail unless you provide a NULL DB value when creating the connection. <br><br>The $ORACLE_SID trumps the TNS name look up for the connection. So even a manual connection string in the DB parameter will fail.<br><br>So when the $ORACLE_SID Env is set a NULL passed instead of the DB name connects successfully. <br><br>Hope this saves some hair pulling when moving to %.3 and OS Authentications</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84144">  
  <a class="name">
  <strong class="user"><em>sixd at php dot net</em></strong></a><div class="date" title="2008-06-30 04:33"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84144">
<div class="phpcode"><code><span class="html">
If you want to specify a connection timeout in case there is network problem, you can edit the client side (e.g. PHP side) sqlnet.ora file and set SQLNET.OUTBOUND_CONNECT_TIMEOUT. This sets the upper time limit for establishing a connection right through to the DB, including the time for attempts to connect to other services.&nbsp;&nbsp; It is available from Oracle 10.2.0.3 onwards.<br><br>In Oracle 11.1, a slightly lighter-weight solution TCP.CONNECT_TIMEOUT was introduced.&nbsp; It also is a sqlnet.ora parameter.&nbsp; It bounds just the TCP connection establishment time, which is mostly where connection problem are seen.<br><br>The client sqlnet.ora file should be put in the same directory as the tnsnames.ora file.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69645">  
  <a class="name">
  <strong class="user"><em>sebastien.barbieri _at_ gmail dot com</em></strong></a><div class="date" title="2006-09-13 09:42"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom69645">
<div class="phpcode"><code><span class="html">
When you are using Oracle 9.2+ I would say that you MUST use the CHARSET parameter.<br><br>Of course, you will not notice it until there is accented character... so just specify it and you will avoid a big headache.<br><br>So for example here is our Oracle internal conf:<br>select * from nls_database_parameters;<br> <br>PARAMETER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; VALUE<br>------------------------------ ----------------------------------------<br>â€¦<br>NLS_LANGUAGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; AMERICAN<br>NLS_TERRITORY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AMERICA<br>NLS_ISO_CURRENCY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; AMERICA<br>NLS_CHARACTERSET&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; WE8ISO8859P15<br>â€¦<br> <br>And there our oci_connect call:<br><br>$dbch=ocilogon($user,$pass,$connectString,"WE8ISO8859P15");<br><br>Without that, you will get question mark (inversed), squaresâ€¦ instead of most accented character.<br><br>Donâ€™t forget to use that for writing as well as for reading.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107465">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-02-10 06:33"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107465">
<div class="phpcode"><code><span class="html">
How to connect from PHP to an Oracle database using OID (Oracle Internet Directory):
<br>
<br>OID is like a lookup index that contains connection strings for connecting to various databases. Without OID, a database connection string would be stored directly in the code settings and used by the PHP code to connect to a database. With OID, a lookup can be made to the OID LDAP to acquire the database connection string. Then the PHP code will use the acquired database connection string to connect to the database as before.
<br>
<br>OID allows a DBA to manage/change which database server that an application uses without having to change any database settings in the PHP application itself or on the application server.
<br>
<br>Here are the basic steps for PHP to connect to a database via OID:
<br>
<br>- The DBA should provide you the connection information for the OID LDAP as well as the username/password for the database connection.
<br>- Connect to the OID LDAP using the provided information
<br>- Search for the appropriate LDAP record
<br>- Get the connection string data from the record attribute, \&amp;quot;orclnetdescstring\&amp;quot;
<br>- Close the LDAP connection
<br>- Use the acquired connection string data to connect to the database as usual using the provided database username/password.
<br>
<br>Here is basic sample code to do this:
<br>
<br>// Get connection string from OID LDAP
<br>
<br>&nbsp; &nbsp; $ds=ldap_connect($servername,$serverport); // Connect to ldap
<br>&nbsp; &nbsp; $r=ldap_bind($ds); // Bind to ldap
<br>&nbsp; &nbsp; $sr = ldap_search($ds, \&amp;quot;cn=OracleContext,dc=___,dc=___,dc=___\&amp;quot;, \&amp;quot;cn=$sid\&amp;quot;); // Run query
<br>&nbsp; &nbsp; $info = ldap_get_entries($ds, $sr); // Get entries
<br>&nbsp; &nbsp; ldap_close($ds); // Close connection
<br>
<br>&nbsp; &nbsp; $dbconnectstring = $info[0][\&amp;quot;orclnetdescstring\&amp;quot;][0]; // Extract db connect string from ldap search result array
<br>
<br>// Connect to database using acquired connection string from OID
<br>
<br>&nbsp; &nbsp; $dbconnection = oci_connect ($username,$password,$dbconnectstring);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="98431">  
  <a class="name">
  <strong class="user"><em>Jonathon Robinson</em></strong></a><div class="date" title="2010-06-15 11:12"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98431">
<div class="phpcode"><code><span class="html">
Regarding the following statement in the documentation:
<br>"The second and subsequent calls to oci_connect() with the same parameters will return the connection handle returned from the first call."
<br>
<br>There's one caveat here.&nbsp; Subsequent calls to oci_connect() will only return the same connection handle as the first call as long as a reference is held to the original handle.
<br>
<br>For example, the following code will generate *one* connection handle:
<br>
<br><span class="default">&lt;?php
<br>$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);
<br></span><span class="comment">// Do stuff
<br></span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);
<br></span><span class="comment">// Do more stuff
<br>
<br></span><span class="default">The follow code will generate </span><span class="keyword">*</span><span class="default">two</span><span class="keyword">* </span><span class="default">connection handles</span><span class="keyword">:
<br></span><span class="default">getData</span><span class="keyword">();
<br></span><span class="comment">// Do stuff
<br></span><span class="default">getData</span><span class="keyword">();
<br></span><span class="comment">// Do more stuff
<br>
<br></span><span class="default">getData</span><span class="keyword">() {
<br>&nbsp; &nbsp; </span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="comment">// Do stuff
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>This is the result of PHP garbage collecting the handle at the end of the method scope.
<br>
<br>If you want to isolate your DB layer through function calls but still want to leverage the fact that oci_connect can return the same handle, just keep a reference to the handle like so:
<br>
<br><span class="default">&lt;?php
<br>getData</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">) {
<br>&nbsp; &nbsp; </span><span class="default">$dbh </span><span class="keyword">= </span><span class="default">oci_connect</span><span class="keyword">(</span><span class="default">$username</span><span class="keyword">, </span><span class="default">$password</span><span class="keyword">, </span><span class="default">$conn_info</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">hash</span><span class="keyword">(</span><span class="string">'md5'</span><span class="keyword">, </span><span class="string">"</span><span class="default">$username</span><span class="string">|</span><span class="default">$password</span><span class="string">|</span><span class="default">$conn_info</span><span class="string">"</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$dbh</span><span class="keyword">;
<br>&nbsp; &nbsp; </span><span class="comment">// Do stuff
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>I originally logged this as a bug but apparently this is the expected behaviour, likely because oci_close($dbh) just calls unset($dbh).</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111614">  
  <a class="name">
  <strong class="user"><em>blake dot lewis at gmail dot com</em></strong></a><div class="date" title="2013-03-08 03:10"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111614">
<div class="phpcode"><code><span class="html">
Using ldap for Oracle name resolution:<br><br>&nbsp; The web server will need the environmental variable TNS_ADMIN='Directory of tnsname.ora' unless the default location is used. I use '/etc/tns_admin'. Confirm using the phpinfo().<br><br>&nbsp; There are three files needed in the TNS_ADMIN location: tnsnames.ora, sqlnet.ora and ldap.ora. If you are only using ldap, tnsnames.ora is not needed.<br><br>&nbsp; To sqlnet.ora add:<br>&nbsp; &nbsp;&nbsp; NAMES.DIRECTORY_PATH=(TNSNAMES,LDAP)<br><br>&nbsp; To ldap.ora add:<br>&nbsp; &nbsp;&nbsp; DIRECTORY_SERVERS=(ldap_server_fqdn:port)<br>&nbsp; &nbsp;&nbsp; DEFAULT_ADMIN_CONTEXT=""<br>&nbsp; &nbsp;&nbsp; DIRECTORY_SERVER_TYPE=OID<br><br>&nbsp; For a quick and dirty ldap tnsnames server use tnsManager by Dave Berry. Oracle OID or Openldap can used, but are complicated to setup. tnsManager is a no brainer. The quick part: give it a tnsnames.ora file and start it up. The dirty parts: I can't get Toad and SQLDeveloper to work with it, it ignores the domain and it is no longer being maintained.<br><br>&nbsp; The order of values in NAMES.DIRECTORY_PATH in sqlnet.ora determines which look up 'adapter' is used, in this case it is tnsnames.ora file and then ldap. I use ldap for general consumption and tnsnames.ora file to override ldap or entries that are not for general consumption.<br><br>&nbsp; If you have the full Oracle client you have tnsping. 'tnsping ORACLE_SID' will tell you what adapter you are using: 'Used LDAP adapter to resolve the alias'.<br><br><span class="default">&lt;?php<br>&nbsp; </span><span class="keyword">echo </span><span class="default">system</span><span class="keyword">(</span><span class="string">"/PATH/tnsping "</span><span class="keyword">.</span><span class="default">$ORACLE_SID</span><span class="keyword">.</span><span class="string">" 2&gt;&amp;1"</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br>&nbsp; echo </span><span class="string">'TNS_ADMIN='</span><span class="keyword">.</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'TNS_ADMIN'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>ISSUE:<br>&nbsp; If connecting with only ORACLE_SID and not ORACLE_SID.DB_DOMAIN, the value of NAMES.DEFAULT_DOMAIN from sqlnet.ora is appended, then for some reason PHP tries the HOSTNAME adapter, and if the database name resolves in DNS, it will fail connecting using the database name as the hostname, because neither SID nor SERVICE_NAME are defined.<br>&nbsp; If using tnsManager append '.ANY_DOMAIN' to $ORACLE_SID to hack around the issue above.<br><br>&nbsp; I have tested with:<br>&nbsp; &nbsp; &nbsp;&nbsp; 11.1.0.7 full client and PHP 5.1.6<br>&nbsp; &nbsp; &nbsp;&nbsp; 11.2.0.2 full client and PHP 5.4.11<br><br>&nbsp; I have heard that LDAP lookup does not work with older instantclients.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111400">  
  <a class="name">
  <strong class="user"><em>blake dot lewis at gmail dot com</em></strong></a><div class="date" title="2013-02-15 11:38"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111400">
<div class="phpcode"><code><span class="html">
Using ldap for Oracle name resolution:
<br>
<br>&nbsp; The web server needs the environmental variable TNS_ADMIN='Directory of tnsname.ora'. I use '/etc/tns_admin'. Confirm using the phpinfo() function.
<br>
<br>&nbsp; There are three files needed in the TNS_ADMIN location: tnsnames.ora, sqlnet.ora and ldap.ora. If you are only using ldap, tnsnames.ora is not needed.
<br>
<br>&nbsp; To sqlnet.ora add: 
<br>&nbsp; &nbsp;&nbsp; NAMES.DIRECTORY_PATH=(TNSNAMES,LDAP)
<br>
<br>&nbsp; To ldap.ora add:
<br>&nbsp; &nbsp;&nbsp; DIRECTORY_SERVERS=(ldap_fqdn_hostname:1575)
<br>&nbsp; &nbsp;&nbsp; DEFAULT_ADMIN_CONTEXT=""
<br>&nbsp; &nbsp;&nbsp; DIRECTORY_SERVER_TYPE=OID
<br>
<br>&nbsp; For a quick and dirty ldap tnsnames server use tnsManager by Dave Berry. Oracle OID or Openldap can used, but are complicated to setup. tnsManager is a no brainer. The default port is 1575.
<br>
<br>&nbsp; The order of values in NAMES.DIRECTORY_PATH from sqlnet.ora determines which look up 'adapter' is used first, in this case it is tnsnames.ora file and then ldap. I use ldap for general consumption and tnsnames.ora file to override ldap or entries that are not for general consumption.
<br>
<br>&nbsp; If you have the full Oracle client you have tnsping. 'tnsping ORACLE_SID' will tell you what adapter you are using: 'Used LDAP adapter to resolve the alias'.
<br>
<br><span class="default">&lt;?php
<br>&nbsp; </span><span class="keyword">echo </span><span class="default">system</span><span class="keyword">(</span><span class="string">"/PATH/tnsping "</span><span class="keyword">.</span><span class="default">$ORACLE_SID</span><span class="keyword">.</span><span class="string">" 2&gt;&amp;1"</span><span class="keyword">).</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;
<br>&nbsp; echo </span><span class="string">'TNS_ADMIN='</span><span class="keyword">.</span><span class="default">getenv</span><span class="keyword">(</span><span class="string">'TNS_ADMIN'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>ISSUE:
<br>&nbsp; For some reason PHP tries the HOSTNAME adapter first, and if the database name resolves in DNS, it will try connecting using the database name as the hostname with no SID or SERVICE_NAME defined. All other Oracle clients I have used will not try the HOSTNAME adapter unless it is listed in NAMES.DIRECTORY_PATH.
<br>&nbsp; I have heard that LDAP look up does not work with older instantclients.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.oci-connect.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:58:09 GMT -->


</body></html>