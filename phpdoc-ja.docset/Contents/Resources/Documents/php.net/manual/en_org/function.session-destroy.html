<html><!-- Mirrored from php.net/manual/en/function.session-destroy.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:59 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>session_destroy</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.session-destroy.html">
 <link rel="shorturl" href="http://php.net/session-destroy">
 <link rel="alternate" href="http://php.net/session-destroy" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.session.html">
 <link rel="prev" href="function.session-decode.html">
 <link rel="next" href="function.session-encode.html">

 <link rel="alternate" href="function.session-destroy.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.session-destroy.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.session-destroy.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.session-destroy.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.session-destroy.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.session-destroy.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.session-destroy.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.session-destroy.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.session-destroy.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.session-destroy.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.session-destroy.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.session.html">Session Extensions</a></li>      <li><a href="book.session.html">Sessions</a></li>      <li><a href="ref.session.html">Session Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.session-destroy" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">session_destroy</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">session_destroy</span> â€” <span class="dc-title">Destroys all data registered to a session</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.session-destroy-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>session_destroy</strong></span>
    ( <span class="methodparam">void</span>
   )</div>

  <p class="simpara">
   <span class="function"><strong>session_destroy()</strong></span> destroys all of the data associated
   with the current session. It does not unset any of the global variables
   associated with the session, or unset the session cookie.
   To use the session variables again, <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> has
   to be called.
  </p>
  <p class="para">
   In order to kill the session altogether, like to log the user out, the
   session id must also be unset. If a cookie is used to propagate the
   session id (default behavior), then the session cookie must be deleted.
   <span class="function"><a href="function.setcookie.html" class="function">setcookie()</a></span> may be used for that.
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.session-destroy-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.session-destroy-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4884">
    <p><strong>Example #1 Destroying a session with <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;Initialize&nbsp;the&nbsp;session.<br>//&nbsp;If&nbsp;you&nbsp;are&nbsp;using&nbsp;session_name("something"),&nbsp;don't&nbsp;forget&nbsp;it&nbsp;now!<br></span><span style="color: #0000BB">session_start</span><span style="color: #007700">();<br><br></span><span style="color: #FF8000">//&nbsp;Unset&nbsp;all&nbsp;of&nbsp;the&nbsp;session&nbsp;variables.<br></span><span style="color: #0000BB">$_SESSION&nbsp;</span><span style="color: #007700">=&nbsp;array();<br><br></span><span style="color: #FF8000">//&nbsp;If&nbsp;it's&nbsp;desired&nbsp;to&nbsp;kill&nbsp;the&nbsp;session,&nbsp;also&nbsp;delete&nbsp;the&nbsp;session&nbsp;cookie.<br>//&nbsp;Note:&nbsp;This&nbsp;will&nbsp;destroy&nbsp;the&nbsp;session,&nbsp;and&nbsp;not&nbsp;just&nbsp;the&nbsp;session&nbsp;data!<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">"session.use_cookies"</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">session_get_cookie_params</span><span style="color: #007700">();<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">setcookie</span><span style="color: #007700">(</span><span style="color: #0000BB">session_name</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">()&nbsp;-&nbsp;</span><span style="color: #0000BB">42000</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #DD0000">"path"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #DD0000">"domain"</span><span style="color: #007700">],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #DD0000">"secure"</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$params</span><span style="color: #007700">[</span><span style="color: #DD0000">"httponly"</span><span style="color: #007700">]<br>&nbsp;&nbsp;&nbsp;&nbsp;);<br>}<br><br></span><span style="color: #FF8000">//&nbsp;Finally,&nbsp;destroy&nbsp;the&nbsp;session.<br></span><span style="color: #0000BB">session_destroy</span><span style="color: #007700">();<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.session-destroy-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   </p><p class="para">
    Only use <span class="function"><a href="function.session-unset.html" class="function">session_unset()</a></span> for older deprecated code
    that does not use <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>.
   </p>
  <p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.session-destroy-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.unset.html" class="function" rel="rdfs-seeAlso">unset()</a> - Unset a given variable</span></li>
    <li class="member"><span class="function"><a href="function.setcookie.html" class="function" rel="rdfs-seeAlso">setcookie()</a> - Send a cookie</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="110043">  
  <a class="name">
  <strong class="user"><em>Praveen V</em></strong></a><div class="date" title="2012-09-14 04:39"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110043">
<div class="phpcode"><code><span class="html">
If you want to change the session id on each log in, make sure to use session_regenerate_id(true) during the log in process.
<br>
<br><span class="default">&lt;?php
<br>session_start</span><span class="keyword">();
<br></span><span class="default">session_regenerate_id</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>[Edited by moderator (googleguy at php dot net)]</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114709">  
  <a class="name">
  <strong class="user"><em>Jack Luo</em></strong></a><div class="date" title="2014-03-27 10:08"><strong>5 months ago</strong></div>
  <div class="text" id="Hcom114709">
<div class="phpcode"><code><span class="html">
It took me a while to figure out how to destroy a particular session in php. Note I'm not sure if solution provided below is perfect but it seems work for me. Please feel free to post any easier way to destroy a particular session. Because it's quite useful for functionality of force an user offline.<br><br>1. If you're using db or memcached to manage session, you can always delete that session entry directly from db or memcached.<br><br>2. Using generic php session methods to delete a particular session(by session id).<br><br><span class="default">&lt;?php<br>$session_id_to_destroy </span><span class="keyword">= </span><span class="string">'nill2if998vhplq9f3pj08vjb1'</span><span class="keyword">;<br></span><span class="comment">// 1. commit session if it's started.<br></span><span class="keyword">if (</span><span class="default">session_id</span><span class="keyword">()) {<br>&nbsp; &nbsp; </span><span class="default">session_commit</span><span class="keyword">();<br>}<br><br></span><span class="comment">// 2. store current session id<br></span><span class="default">session_start</span><span class="keyword">();<br></span><span class="default">$current_session_id </span><span class="keyword">= </span><span class="default">session_id</span><span class="keyword">();<br></span><span class="default">session_commit</span><span class="keyword">();<br><br></span><span class="comment">// 3. hijack then destroy session specified.<br></span><span class="default">session_id</span><span class="keyword">(</span><span class="default">$session_id_to_destroy</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br></span><span class="default">session_destroy</span><span class="keyword">();<br></span><span class="default">session_commit</span><span class="keyword">();<br><br></span><span class="comment">// 4. restore current session id. If don't restore it, your current session will refer to the session you just destroyed!<br></span><span class="default">session_id</span><span class="keyword">(</span><span class="default">$current_session_id</span><span class="keyword">);<br></span><span class="default">session_start</span><span class="keyword">();<br></span><span class="default">session_commit</span><span class="keyword">();<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="73045">  
  <a class="name">
  <strong class="user"><em>Colin</em></strong></a><div class="date" title="2007-02-07 01:52"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73045">
<div class="phpcode"><code><span class="html">
Note that when you are using a custom session handler, session_destroy will cause a fatal error if you have set the session destroy function used by session_set_save_handler to private.<br><br>Example:<br>Fatal error: Call to private method Session::sessDestroy()<br><br>where sessDestroy was the function I specified in the 5th parameter of session_set_save_handler.<br><br>Even though it isn't all that desirable, the simple solution is to set sessDestroy to public.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="76832">  
  <a class="name">
  <strong class="user"><em>administrator at anorhack dot com</em></strong></a><div class="date" title="2007-08-01 07:34"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom76832">
<div class="phpcode"><code><span class="html">
Destroying&nbsp; a session from a background job<br><br>I have a thief-protection system that compares country codes from login IPs via whois. This has to run in the background as it is way too processor-hungry to be run in the browser.<br><br>What I needed was a way to destroy the web session from the background job. For some reason, a background session_destroy APPEARS to work, but doesnt't actually destroy the web session.<br><br>There is a work around, I set the username to NULL and the web code picks up on that, bouncing the user (thief) to a "gotcha" page where his IP is logged.<br><br>Yes I know its nasty and dirty, but surprisingly it works.<br><br>$sid = the session_id() of the suspicious web session, passed in $argv to the background job<br><br>The trick is to "stuff" the $_GET array with the sid, then the session_start in the background job picks this value up (as if it were a genuine trans-sid type thing...?PHPSESSID=blah) and "connects to" the web session. All $_SESSION variable can be viewed (and CHANGED , which is how this kludge works) but for some reason (that no doubt someone will illuminate) they can't be unset...setting the particular variable to NULL works well though:<br><br> <br>$_GET[session_name()]=$sid;<br>session_start();<br>// prove we are getting the web session data<br>foreach($_SESSION as $k =&gt; $v) echo($k."=".$v);<br>// now kill the thief<br>$_SESSION['username']=NULL;<br>//web session variable now NULL - honestly!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113323">  
  <a class="name">
  <strong class="user"><em>luqui at yahoo dot com</em></strong></a><div class="date" title="2013-09-27 12:25"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113323">
<div class="phpcode"><code><span class="html">
If you want to destroy the session when it starts, don't forget to declare the session with your code because when you do that this will ensure that your session will be more effective. This also enhances the effieciency of you code.</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.session-destroy.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:07:59 GMT -->


</body></html>