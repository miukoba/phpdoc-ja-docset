<html><!-- Mirrored from php.net/manual/en/function.highlight-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:07 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>highlight_file</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.highlight-file.html">
 <link rel="shorturl" href="http://php.net/highlight-file">
 <link rel="alternate" href="http://php.net/highlight-file" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.misc.html">
 <link rel="prev" href="function.halt-compiler.html">
 <link rel="next" href="function.highlight-string.html">

 <link rel="alternate" href="function.highlight-file.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.highlight-file.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.highlight-file.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.highlight-file.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.highlight-file.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.highlight-file.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.highlight-file.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.highlight-file.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.highlight-file.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.highlight-file.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.highlight-file.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.other.html">Other Basic Extensions</a></li>      <li><a href="book.misc.html">Misc.</a></li>      <li><a href="ref.misc.html">Misc. Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.highlight-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">highlight_file</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">highlight_file</span> â€” <span class="dc-title">Syntax highlighting of a file</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.highlight-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>highlight_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$return</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   Prints out or returns a syntax highlighted version of the code contained
   in <code class="parameter">filename</code> using the colors defined in the
   built-in syntax highlighter for PHP.
  </p>
  <p class="para">
   Many servers are configured to automatically highlight files
   with a <em class="emphasis">phps</em> extension. For example,
   <var class="filename">example.phps</var> when viewed will show the
   syntax highlighted source of the file. To enable this, add this
   line to the <var class="filename">httpd.conf</var>:
  </p>
  <div class="example-contents screen">
<div class="descriptioncode"><pre class="descriptioncode">AddType application/x-httpd-php-source .phps</pre>
</div>
  </div>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.highlight-file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Path to the PHP file to be highlighted.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">return</code></dt>

     <dd>

      <p class="para">
       Set this parameter to <strong><code>TRUE</code></strong> to make this function return the
       highlighted code.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.highlight-file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   If <code class="parameter">return</code> is set to <strong><code>TRUE</code></strong>, returns the highlighted
   code as a string instead of printing it out. Otherwise, it will return
   <strong><code>TRUE</code></strong> on success, <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.highlight-file-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.2.1</td>
       <td>
        This function is now also affected by <a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">safe_mode</a> and <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a>.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.highlight-file-notes">
  <h3 class="title">Notes</h3>
  <div class="caution"><strong class="caution">Caution</strong>
   <p class="para">
    Care should be taken when using the <span class="function"><strong>highlight_file()</strong></span>
    function to make sure that you do not inadvertently reveal sensitive
    information such as passwords or any other type of information that might
    create a potential security risk.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: </p><p class="para">When the <code class="parameter">return</code> parameter
is used, this function uses internal output buffering so it cannot be used inside an
<span class="function"><a href="function.ob-start.html" class="function">ob_start()</a></span> callback function.</p><p></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.highlight-file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.highlight-string.html" class="function" rel="rdfs-seeAlso">highlight_string()</a> - Syntax highlighting of a string</span></li>
    <li class="member"><a href="misc.configuration.html#ini.syntax-highlighting" class="link">Highlighting INI directives</a></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="92160">  
  <a class="name">
  <strong class="user"><em>nospam  at  mbeulens dot nl</em></strong></a><div class="date" title="2009-07-12 12:00"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92160">
<div class="phpcode"><code><span class="html">
This is my try on linenumbers<br><span class="default">&lt;?php<br>&nbsp; &nbsp; </span><span class="keyword">public static function </span><span class="default">highlight_file_with_line_numbers</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">) { <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Strip code and first span<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="default">36</span><span class="keyword">, -</span><span class="default">15</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Split lines<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lines </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Count<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lineCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$lines</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Calc pad length<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$padLength </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$lineCount</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Re-Print the code and span again<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;code&gt;&lt;span style=\"color: #000000\"&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Loop lines<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">foreach(</span><span class="default">$lines </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$line</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Create line number<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lineNumber </span><span class="keyword">= </span><span class="default">str_pad</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">,&nbsp; </span><span class="default">$padLength</span><span class="keyword">, </span><span class="string">'0'</span><span class="keyword">, </span><span class="default">STR_PAD_LEFT</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Print line<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'&lt;br&gt;&lt;span style="color: #999999"&gt;%s | &lt;/span&gt;%s'</span><span class="keyword">, </span><span class="default">$lineNumber</span><span class="keyword">, </span><span class="default">$line</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Close span<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"&lt;/span&gt;&lt;/code&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74018">  
  <a class="name">
  <strong class="user"><em>management at twilightus dot net</em></strong></a><div class="date" title="2007-03-20 06:18"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74018">
<div class="phpcode"><code><span class="html">
Here's a better take at highlighting a file with line numbers:
<br>
<br>&lt;style type="text/css"&gt;
<br>.num {
<br>float: left;
<br>color: gray;
<br>text-align: right;
<br>margin-right: 6pt;
<br>padding-right: 6pt;
<br>border-right: 1px solid gray;}
<br>&lt;/style&gt;
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">highlight_num</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br>{
<br>&nbsp; echo </span><span class="string">'&lt;code class="num"&gt;'</span><span class="keyword">, </span><span class="default">implode</span><span class="keyword">(</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))), </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">), </span><span class="string">'&lt;/code&gt;'</span><span class="keyword">;
<br>&nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);
<br>}
<br>
<br></span><span class="default">highlight_num</span><span class="keyword">(</span><span class="string">'file.php'</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Thanks for the implode() part from Arevos at programmingforums.org</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82624">  
  <a class="name">
  <strong class="user"><em>comperr dot extra at gmail dot com</em></strong></a><div class="date" title="2008-04-18 11:20"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82624">
<div class="phpcode"><code><span class="html">
Here is what I use<br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="comment">/* array() ensures that ok[] cannot have paths inserted if register globals is enabled */<br><br>&nbsp; &nbsp; </span><span class="default">$ok </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'f1.php'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'f2.php'<br>&nbsp; &nbsp; </span><span class="keyword">);<br><br>&nbsp; &nbsp; if (!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'f'</span><span class="keyword">], </span><span class="default">$ok</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; die (</span><span class="string">'Not allowed to view this page'</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'f'</span><span class="keyword">]);<br>&nbsp; &nbsp; }</span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92697">  
  <a class="name">
  <strong class="user"><em>dynamicflurry [at] gmail dot com</em></strong></a><div class="date" title="2009-08-04 07:33"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92697">
<div class="phpcode"><code><span class="html">
Here's a great function I found to add numbers to your highlighted code:
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">highlight_num</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)
<br>{
<br>&nbsp; </span><span class="default">$lines </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))), </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">);
<br>&nbsp; </span><span class="default">$content </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>
<br>&nbsp; 
<br>&nbsp; echo </span><span class="string">'
<br>&nbsp; &nbsp; &lt;style type="text/css"&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; .num {
<br>&nbsp; &nbsp; &nbsp; &nbsp; float: left;
<br>&nbsp; &nbsp; &nbsp; &nbsp; color: gray;
<br>&nbsp; &nbsp; &nbsp; &nbsp; font-size: 13px;&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; font-family: monospace;
<br>&nbsp; &nbsp; &nbsp; &nbsp; text-align: right;
<br>&nbsp; &nbsp; &nbsp; &nbsp; margin-right: 6pt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; padding-right: 6pt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; border-right: 1px solid gray;}
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; body {margin: 0px; margin-left: 5px;}
<br>&nbsp; &nbsp; &nbsp; &nbsp; td {vertical-align: top;}
<br>&nbsp; &nbsp; &nbsp; &nbsp; code {white-space: nowrap;}
<br>&nbsp; &nbsp; &lt;/style&gt;'</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; echo </span><span class="string">"&lt;table&gt;&lt;tr&gt;&lt;td class=\"num\"&gt;\n</span><span class="default">$lines</span><span class="string">\n&lt;/td&gt;&lt;td&gt;\n</span><span class="default">$content</span><span class="string">\n&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span><span class="keyword">;
<br>}
<br></span><span class="default">highlight_num</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90229">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-04-11 03:02"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90229">
<div class="phpcode"><code><span class="html">
I get linenumbers this way... cause I don't like tables :p
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="keyword">function </span><span class="default">highlight_linenumbers </span><span class="keyword">(</span><span class="default">$page</span><span class="keyword">)
<br>{
<br>
<br>&nbsp; &nbsp; </span><span class="comment">// remove &lt;code&gt; and global &lt;span&gt;
<br>&nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$page</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">) ,</span><span class="default">36</span><span class="keyword">,-</span><span class="default">15</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; echo </span><span class="string">'&lt;ol style="font-family:monospace; color:'</span><span class="keyword">, </span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'highlight.{default}'</span><span class="keyword">) , </span><span class="string">';"&gt;'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);
<br>&nbsp; &nbsp; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$line </span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// removing newline
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//empty lines
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'`^(&amp;nbsp;)*$`'</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">) ) </span><span class="default">$line </span><span class="keyword">= </span><span class="string">'&amp;nbsp;'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// add colour from the previous line
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( !empty(</span><span class="default">$last_colour</span><span class="keyword">) ) </span><span class="default">$s </span><span class="keyword">= </span><span class="string">'&lt;span style="color:'</span><span class="keyword">.</span><span class="default">$last_colour </span><span class="keyword">.</span><span class="string">'"&gt;'</span><span class="keyword">. </span><span class="default">$s</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Supposing we open more spans on a line than closing... let's do this properly
<br>&nbsp; &nbsp; &nbsp; &nbsp; // We have at most one currently opened span
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if( </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'&lt;span'</span><span class="keyword">) - </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'&lt;/span'</span><span class="keyword">) &gt; </span><span class="default">0 </span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">.= </span><span class="string">'&lt;/span&gt;'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Grab colour to report it on next line
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_colour </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;span '</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_colour </span><span class="keyword">= </span><span class="default">$last_colour</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$last_colour</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$last_colour </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$last_colour</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$last_colour</span><span class="keyword">,</span><span class="string">'#'</span><span class="keyword">),</span><span class="default">7</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">$last_colour </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;li&gt;'</span><span class="keyword">,</span><span class="default">$line</span><span class="keyword">,</span><span class="string">"&lt;/li&gt;\r"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;/ol&gt;'</span><span class="keyword">;
<br>}
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85207">  
  <a class="name">
  <strong class="user"><em>W</em></strong></a><div class="date" title="2008-08-20 02:43"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85207">
<div class="phpcode"><code><span class="html">
Normally I add highlighting for files like so:<br><br>In every file that should be higlighted:<br><span class="default">&lt;?php<br>$tool_file</span><span class="keyword">=</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SCRIPT_FILENAME'</span><span class="keyword">]; </span><span class="default">$tool_file</span><span class="keyword">=</span><span class="default">basename</span><span class="keyword">(</span><span class="default">$tool_file</span><span class="keyword">);<br>include_once(</span><span class="string">'highlight.inc.php'</span><span class="keyword">);<br></span><span class="default">showCode</span><span class="keyword">();<br></span><span class="default">?&gt;<br></span><br>And in highlight.inc.php (or your init file):<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">showCode</span><span class="keyword">() {<br>if (</span><span class="default">$_REQUEST</span><span class="keyword">[</span><span class="string">'codeShow'</span><span class="keyword">] == </span><span class="default">1</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$codeName</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; exit ();<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>When a user will open the sourcecode (or you'll link to it) he just adds ?codeShow=1 to the filename.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83088">  
  <a class="name">
  <strong class="user"><em>mmcloughlin at gmail dot com</em></strong></a><div class="date" title="2008-05-09 06:06"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83088">
<div class="phpcode"><code><span class="html">
You can trick this function to apply additional css rules to parts of the source code.<br><br>For example, if you wanted comments to appear in bold you could do the following<br><br><span class="default">&lt;?php<br>ini_set</span><span class="keyword">(</span><span class="string">'highlight.comment'</span><span class="keyword">, </span><span class="string">'#CCCCCC; font-weight: bold;'</span><span class="keyword">);<br></span><span class="default">highlight_file</span><span class="keyword">(</span><span class="string">'file.php'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>This works because when highlight_file() writes out a comment it wraps it in &lt;span style="color: {contents of hightlight.comment ini variable}"&gt;...&lt;/span&gt;. Therefore as long as your ini value for highlight.comment starts with a color, you can put in whatever style declarations you like.<br><br>This applies to all of the other relavent ini values: highlight.default, highlight.html, highlight.keyword, highlight.string.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78558">  
  <a class="name">
  <strong class="user"><em>moisadoru at gmail dot com</em></strong></a><div class="date" title="2007-10-17 05:24"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78558">
<div class="phpcode"><code><span class="html">
A function which parses the output of highlight file and replaces &amp;lt;span&amp;gt; wits &amp;lt;a&amp;gt;, replaces the style="color: #XXXXXX" part with class="cX", storing the colors in some css rules; that way you get a smaller output size (ratio is about about 1.2 ~ 1.4):<br>&lt;code&gt;<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">highlight_file2</span><span class="keyword">(</span><span class="default">$fl</span><span class="keyword">,</span><span class="default">$ret</span><span class="keyword">){<br>&nbsp; &nbsp; if(!isset(</span><span class="default">$ret</span><span class="keyword">)) </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$fl</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\&lt;span style=\"color: #([\d|A|B|C|D|E|F]{6})\"\&gt;.*?\&lt;\/span\&gt;/"</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$mtch</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">$mtch</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);<br><br>&nbsp; &nbsp; </span><span class="default">$cls </span><span class="keyword">= </span><span class="string">'&lt;style type="text/css"&gt;'</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$rpl </span><span class="keyword">= array(</span><span class="string">"&lt;/a&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$mtc </span><span class="keyword">= array(</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; foreach(</span><span class="default">$m </span><span class="keyword">as </span><span class="default">$clr</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$cls </span><span class="keyword">.= </span><span class="string">"a.c"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">.</span><span class="string">"{color: #"</span><span class="keyword">.</span><span class="default">$clr</span><span class="keyword">.</span><span class="string">";}\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$rpl</span><span class="keyword">[] = </span><span class="string">"&lt;a class=\"c"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">++.</span><span class="string">"\"&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mtc</span><span class="keyword">[] = </span><span class="string">"&lt;span style=\"color: #"</span><span class="keyword">.</span><span class="default">$clr</span><span class="keyword">.</span><span class="string">"\"&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; </span><span class="default">$cls </span><span class="keyword">.= </span><span class="string">"&lt;/style&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$str2 </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$mtc</span><span class="keyword">,</span><span class="default">$rpl</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>&nbsp; &nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return </span><span class="default">$str2</span><span class="keyword">;<br>&nbsp; &nbsp; else echo </span><span class="default">$str2</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span>&lt;/code&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="69045">  
  <a class="name">
  <strong class="user"><em>paul at cheddar dot vaughany dot com</em></strong></a><div class="date" title="2006-08-21 04:53"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom69045">
<div class="phpcode"><code><span class="html">
It's a basic idea but one maybe worth sharing.<br><br><span class="default">&lt;?php<br></span><span class="keyword">switch(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'file'</span><span class="keyword">]) {<br>&nbsp; &nbsp; case </span><span class="default">1</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="string">"file1.php"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; case </span><span class="default">2</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="string">"file2.php"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; case </span><span class="default">3</span><span class="keyword">:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="string">"file3.php"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; default:<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">"Location: "</span><span class="keyword">.</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"PHP_SELF"</span><span class="keyword">]);<br>}<br></span><span class="default">?&gt;<br></span><br>Save the script as showfile.php and access it like this:<br><br>&lt;a href="showfile.php?file=1"&gt;Click here to see file 1 source code&lt;/a&gt;<br><br>The default case is for people editing the URL to try to access further files. Just don't add any files you don't want users to see, and maybe hard-code in large, random numbers or MD5 hashes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64123">  
  <a class="name">
  <strong class="user"><em>showsource at gmail dot com</em></strong></a><div class="date" title="2006-04-07 05:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64123">
<div class="phpcode"><code><span class="html">
Please, be aware of just using marlon at mbwp dot nl example to show the sourcecode<br>Do as told in this manual, "CAUTION", do some check on what code to highlight.<br>Simply just using $_GET["file"] is very bad.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62617">  
  <a class="name">
  <strong class="user"><em>marlon at mbwp dot nl</em></strong></a><div class="date" title="2006-03-05 05:06"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62617">
<div class="phpcode"><code><span class="html">
I use the folowing code to highlight a file with line numbers:<br><br><span class="default">&lt;?php<br></span><span class="keyword">echo </span><span class="string">"&lt;table bgcolor=#EEEEEE&gt;&lt;tr&gt;&lt;td width=30&gt;"</span><span class="keyword">;<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">file</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'file'</span><span class="keyword">])); </span><span class="default">$i</span><span class="keyword">++) echo </span><span class="default">$i</span><span class="keyword">.</span><span class="string">".&lt;br&gt;"</span><span class="keyword">;<br>echo </span><span class="string">"&lt;/td&gt;&lt;td&gt;"</span><span class="keyword">;<br></span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'file'</span><span class="keyword">]);<br>echo </span><span class="string">"&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62362">  
  <a class="name">
  <strong class="user"><em>msn at toolskyn dot nl</em></strong></a><div class="date" title="2006-02-26 01:18"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62362">
<div class="phpcode"><code><span class="html">
I use this (simple and dirty) function in my tutorials to add linenumbers. I let all the linenumbers in one table cell so it is easier for people to copy and paste the code (so they don't have to remove all the linenumbers):<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">highlight_with_linenum</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">//open handle, set vars<br>&nbsp; &nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$lines </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//look line ends<br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$thisone </span><span class="keyword">= </span><span class="default">fread</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="string">"1"</span><span class="keyword">)) <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$thisone </span><span class="keyword">== </span><span class="string">"\n"</span><span class="keyword">) <br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//add number<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lines </span><span class="keyword">.= </span><span class="default">$count </span><span class="keyword">. </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$count</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//close handle<br>&nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br><br>&nbsp; &nbsp; </span><span class="comment">//highlight contents<br>&nbsp; &nbsp; </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">TRUE</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//print output (you could as well return now)<br>&nbsp; &nbsp; </span><span class="keyword">print </span><span class="string">'&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;code&gt;' </span><span class="keyword">. <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lines </span><span class="keyword">. </span><span class="string">'&lt;/code&gt;&lt;/td&gt;&lt;td&gt;' </span><span class="keyword">. <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$contents </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;'</span><span class="keyword">;&nbsp; &nbsp; <br>}<br></span><span class="default">?&gt;<br></span><br>Maybe it's of use to someone</span>
</code></div>
  </div>
 </div>
  <div class="note" id="46009">  
  <a class="name">
  <strong class="user"><em>aidan at php dot net</em></strong></a><div class="date" title="2004-09-26 08:29"><strong>9 years ago</strong></div>
  <div class="text" id="Hcom46009">
<div class="phpcode"><code><span class="html">
To add line numbers to source code, with optional function linking, use the below function:
<br>
<br><a rel="nofollow" target="_blank">http://aidanlister.com/repos/v/function.highlight_file_linenum.php</a>
<br>
<br>A much more thorough and smarter, though slower version is here:
<br>
<br><a rel="nofollow" target="_blank">http://aidanlister.com/repos/v/PHP_Highlight.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="44699">  
  <a class="name">
  <strong class="user"><em>csst0266 at cs dot uoi dot gr</em></strong></a><div class="date" title="2004-08-13 09:42"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom44699">
<div class="phpcode"><code><span class="html">
Here is a simple, yet useful, tip... Issuing the following command under a Unix-like OS:<br><br>ln -s your_script.php your_script.phps<br><br>Will result in the creation of a symbolic link (called your_script.phps) to the source code (your_script.php). This way you have (apart from the source code .php) the highlighted version of your script (.phps) accessible via your web browser.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92449">  
  <a class="name">
  <strong class="user"><em>afugit at imavex dot com</em></strong></a><div class="date" title="2009-07-24 08:42"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92449">
<div class="phpcode"><code><span class="html">
This function will not only echo out the code but will add line numbers.&nbsp; The extra code is for the multi-line and single-line comments using /* and */ and making sure they are highlighted appropriately.&nbsp; If not used, the multi-line comments will not be displayed in orange (or the default comment color).
<br>
<br>Anthony
<br>
<br>=============
<br>
<br><span class="default">&lt;?php
<br>&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">renderFile</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">) &amp;&amp; </span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$code </span><span class="keyword">= </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$counter </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;table border="0" cellpadding="0" cellspacing="0" width="100%" style="font-family: monospace;"&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;tr&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;td width="65px" nowrap style="color: #666;"&gt;' </span><span class="keyword">. </span><span class="default">$counter </span><span class="keyword">. </span><span class="string">':&lt;/td&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// fix multi-line comment bug
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if((</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'&lt;span style="color: #FF8000"&gt;/*'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) &amp;&amp; (</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'*/'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)) { </span><span class="comment">// single line comment using /* */ 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comments </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startcolor </span><span class="keyword">= </span><span class="string">"orange"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'&lt;span style="color: #FF8000"&gt;/*'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) { </span><span class="comment">// multi line comment using /* */
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startcolor </span><span class="keyword">= </span><span class="string">"orange"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comments </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else { </span><span class="comment">// no comment marks found
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startcolor </span><span class="keyword">= </span><span class="string">"green"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$comments</span><span class="keyword">) { </span><span class="comment">// continuation of multi line comment
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">strstr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">'*/'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comments </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startcolor </span><span class="keyword">= </span><span class="string">"orange"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comments </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else { </span><span class="comment">// normal line&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$comments </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$startcolor </span><span class="keyword">= </span><span class="string">"green"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// end fix multi-line comment bug
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if(</span><span class="default">$comments</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;td width="100%" nowrap style="color: orange;"&gt;' </span><span class="keyword">. </span><span class="default">$line </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;td width="100%" nowrap style="color: ' </span><span class="keyword">. </span><span class="default">$startcolor </span><span class="keyword">. </span><span class="string">';"&gt;' </span><span class="keyword">. </span><span class="default">$line </span><span class="keyword">. </span><span class="string">'&lt;/td&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;/tr&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$counter</span><span class="keyword">++;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">'&lt;/table&gt;' </span><span class="keyword">. </span><span class="string">"\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo </span><span class="string">"&lt;p&gt;The file &lt;i&gt;</span><span class="default">$filename</span><span class="string">&lt;/i&gt; could not be opened.&lt;/p&gt;\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp;&nbsp; 
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85644">  
  <a class="name">
  <strong class="user"><em>SneakyWho_am_i</em></strong></a><div class="date" title="2008-09-10 04:00"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85644">
<div class="phpcode"><code><span class="html">
From W on 20 August 2008:<br>YES! I do it too, on many of my things! I love to be able to share my code (when I have the right to do it) with friends who aren't working on the project.<br><br><span class="default">&lt;?php<br><br></span><span class="keyword">if (isset(</span><span class="default">$_GET</span><span class="keyword">[</span><span class="string">'code'</span><span class="keyword">])) { die(</span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)); }<br><br></span><span class="default">?&gt;<br></span><br>I like to do it like this. The benefit is minimal but personally for such a small thing I would like to keep it down to one line. Maybe there is a shorter way, I don't know.. But the magic constant __FILE__ saves the day!<br><br>To access this one would be <a rel="nofollow" target="_blank">http://example.com/path/to/script.php?code</a><br>the parameter just has to be set (? or &amp;) and you don't need the equals sign.<br>This way I don't generate any errors in E_ALL (because I'm likely in development), and I don't have to remember if the value was supposed to be "true" or "1" or "abacus" or whatever (I mean you're never going to specifically ask to NOT show the code, right?)<br><br>Anyway I've gone on long enough. It's nice to not be the only one who does this :D</span>
</code></div>
  </div>
 </div>
  <div class="note" id="60422">  
  <a class="name">
  <strong class="user"><em>venski at gmail dot com</em></strong></a><div class="date" title="2006-01-06 05:21"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom60422">
<div class="phpcode"><code><span class="html">
I think it will be better if the variable contains the files that are allowed to be viewed. There can always befound a way to pass the name of a forbiddedn file that is not in the prohibited array.<br><br>Thus the code will be:<br><br><span class="default">&lt;?php<br></span><span class="comment">//array with files to allow<br></span><span class="default">$allowed </span><span class="keyword">= array(</span><span class="string">'index.php'</span><span class="keyword">, </span><span class="string">'menu.php'</span><span class="keyword">, </span><span class="string">'about.php'</span><span class="keyword">);<br><br></span><span class="comment">// get the filename<br></span><span class="default">$file </span><span class="keyword">= </span><span class="default">$_GET</span><span class="keyword">[</span><span class="default">file</span><span class="keyword">];<br>if(</span><span class="default">file_Exists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)){<br>&nbsp; &nbsp; if(</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$allowed</span><span class="keyword">)){<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check if it is part of the allowed list<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">); </span><span class="comment">//highlight file<br>&nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; else{<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// not allowed. just die. do not warn ;)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">die(</span><span class="string">""</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br>else{<br>&nbsp; &nbsp; </span><span class="comment">// file doesnt exist<br>&nbsp; &nbsp; </span><span class="keyword">echo </span><span class="string">"The file does not exist."</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; <br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93274">  
  <a class="name">
  <strong class="user"><em>design at joelalejandro dot com dot ar</em></strong></a><div class="date" title="2009-08-31 04:52"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93274">
<div class="phpcode"><code><span class="html">
Just my two cents - a function that takes PHP source code from a file and decodes it to text/plain MIME-type. 
<br>
<br>Cheers,
<br>Joel A. Villarreal Bertoldi
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">phps2array</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; return </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="default">html_entity_decode</span><span class="keyword">(</span><span class="default">strip_tags</span><span class="keyword">(</span><span class="default">highlight_file</span><span class="keyword">(</span><span class="default">$fileName</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">))));
<br>}
<br></span><span class="default">?&gt;
<br></span>
<br>Example:
<br>####################################
<br>
<br>samplefile.php:
<br><span class="default">&lt;?php
<br>$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>
<br></span><span class="comment">/* This is my file*/
<br></span><span class="keyword">echo </span><span class="default">$a</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>parser.php:
<br><span class="default">&lt;?php
<br>header</span><span class="keyword">(</span><span class="string">"Content-Type: text/plain"</span><span class="keyword">);
<br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">parse_php_file</span><span class="keyword">(</span><span class="string">"samplefile.php"</span><span class="keyword">));
<br></span><span class="default">?&gt;
<br></span>
<br>####################################
<br>Results:
<br>####################################
<br>
<br>Array
<br>(
<br>&nbsp; &nbsp; [0] =&gt; <span class="default">&lt;?php
<br>&nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; 
<br>&nbsp; &nbsp; [</span><span class="default">3</span><span class="keyword">] =&gt; </span><span class="comment">/* This is my file*/
<br>&nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] =&gt; echo </span><span class="default">$a</span><span class="keyword">;
<br>&nbsp; &nbsp; [</span><span class="default">5</span><span class="keyword">] =&gt; </span><span class="default">?&gt;
<br></span>)
<br>
<br>####################################</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.highlight-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:29:07 GMT -->


</body></html>