<html><!-- Mirrored from php.net/manual/en/function.strtok.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:26 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>strtok</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.strtok.html">
 <link rel="shorturl" href="http://php.net/strtok">
 <link rel="alternate" href="http://php.net/strtok" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.strings.html">
 <link rel="prev" href="function.strstr.html">
 <link rel="next" href="function.strtolower.html">

 <link rel="alternate" href="function.strtok.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.strtok.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.strtok.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.strtok.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.strtok.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.strtok.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.strtok.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.strtok.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.strtok.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.strtok.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.strtok.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.strings.html">Strings</a></li>      <li><a href="ref.strings.html">String Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.strtok" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strtok</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strtok</span> â€” <span class="dc-title">Tokenize string</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strtok-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>strtok</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$str</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$token</code></span>
   )</div>

  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>strtok</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$token</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><strong>strtok()</strong></span> splits a string (<code class="parameter">str</code>)
   into smaller strings (tokens), with each token being delimited by any
   character from <code class="parameter">token</code>.
   That is, if you have a string like "This is an example string" you
   could tokenize this string into its individual words by using the
   space character as the token.
  </p>
  <p class="para">
   Note that only the first call to strtok uses the string argument.
   Every subsequent call to strtok only needs the token to use, as
   it keeps track of where it is in the current string.  To start
   over, or to tokenize a new string you simply call strtok with the
   string argument again to initialize it.  Note that you may put
   multiple tokens in the token parameter.  The string will be
   tokenized when any one of the characters in the argument are
   found.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strtok-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">str</code></dt>

     <dd>

      <p class="para">
       The <span class="type"><a href="language.types.string.html" class="type string">string</a></span> being split up into smaller strings (tokens).
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">token</code></dt>

     <dd>

      <p class="para">
       The delimiter used when splitting up <code class="parameter">str</code>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.strtok-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   A <span class="type"><a href="language.types.string.html" class="type string">string</a></span> token.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strtok-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5023">
    <p><strong>Example #1 <span class="function"><strong>strtok()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"This&nbsp;is\tan&nbsp;example\nstring"</span><span style="color: #007700">;<br></span><span style="color: #FF8000">/*&nbsp;Use&nbsp;tab&nbsp;and&nbsp;newline&nbsp;as&nbsp;tokenizing&nbsp;characters&nbsp;as&nbsp;well&nbsp;&nbsp;*/<br></span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #0000BB">$string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&nbsp;\n\t"</span><span style="color: #007700">);<br><br>while&nbsp;(</span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Word=</span><span style="color: #0000BB">$tok</span><span style="color: #DD0000">&lt;br&nbsp;/&gt;"</span><span style="color: #007700">;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$tok&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">"&nbsp;\n\t"</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p> 
  <p class="para">
   The behavior when an empty part was found changed with PHP 4.1.0. The old
   behavior returned an empty string, while the new, correct, behavior
   simply skips the part of the string:
  </p>
  <p class="para">
   </p><div class="example" id="example-5024">
    <p><strong>Example #2 Old <span class="function"><strong>strtok()</strong></span> behavior</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$first_token&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/something'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$second_token&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$first_token</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$second_token</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>    string(0) ""
    string(9) "something"
</pre></div>
    </div>
   </div>
   <div class="example" id="example-5025">
    <p><strong>Example #3 New <span class="function"><strong>strtok()</strong></span> behavior</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$first_token&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/something'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$second_token&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtok</span><span style="color: #007700">(</span><span style="color: #DD0000">'/'</span><span style="color: #007700">);<br></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$first_token</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$second_token</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>    string(9) "something"
    bool(false)
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strtok-notes">
  <h3 class="title">Notes</h3>
  
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This function may
return Boolean <strong><code>FALSE</code></strong>, but may also return a non-Boolean value which
evaluates to <strong><code>FALSE</code></strong>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.strtok-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.split.html" class="function" rel="rdfs-seeAlso">split()</a> - Split string into array by regular expression</span></li>
    <li class="member"><span class="function"><a href="function.explode.html" class="function" rel="rdfs-seeAlso">explode()</a> - Split a string by string</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="113256">  
  <a class="name">
  <strong class="user"><em>eep2004 at ukr dot net</em></strong></a><div class="date" title="2013-09-18 04:11"><strong>11 months ago</strong></div>
  <div class="text" id="Hcom113256">
<div class="phpcode"><code><span class="html">
<span class="default">&lt;?php<br></span><span class="comment">// strtok example<br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">'Hello to all of Ukraine'</span><span class="keyword">;<br>echo </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>Result:<br>Hello to all</span>
</code></div>
  </div>
 </div>
  <div class="note" id="43381">  
  <a class="name">
  <strong class="user"><em>manicdepressive at mindless dot com</em></strong></a><div class="date" title="2004-06-19 06:01"><strong>10 years ago</strong></div>
  <div class="text" id="Hcom43381">
<div class="phpcode"><code><span class="html">
&lt;pre&gt;<span class="default">&lt;?php<br></span><span class="comment">/** get leading, trailing, and embedded separator tokens that were 'skipped'<br>if for some ungodly reason you are using php to implement a simple parser that <br>needs to detect nested clauses as it builds a parse tree */<br><br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">"(((alpha(beta))(gamma))"</span><span class="keyword">;<br><br></span><span class="default">$seps </span><span class="keyword">= </span><span class="string">'()'</span><span class="keyword">;<br></span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">,</span><span class="default">$seps </span><span class="keyword">); </span><span class="comment">// return false on empty string or null<br></span><span class="default">$cur </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; <br></span><span class="default">$dumbDone </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br></span><span class="default">$done </span><span class="keyword">= (</span><span class="default">FALSE</span><span class="keyword">===</span><span class="default">$tok</span><span class="keyword">);<br>while (!</span><span class="default">$done</span><span class="keyword">) {<br>&nbsp;&nbsp; </span><span class="comment">// process skipped tokens (if any at first iteration) (special for last)<br>&nbsp;&nbsp; </span><span class="default">$posTok </span><span class="keyword">= </span><span class="default">$dumbDone </span><span class="keyword">? </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) : </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$tok</span><span class="keyword">, </span><span class="default">$cur </span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">$skippedMany </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$cur</span><span class="keyword">, </span><span class="default">$posTok</span><span class="keyword">-</span><span class="default">$cur </span><span class="keyword">); </span><span class="comment">// false when 0 width<br>&nbsp;&nbsp; </span><span class="default">$lenSkipped </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skippedMany</span><span class="keyword">); </span><span class="comment">// 0 when false<br>&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">0</span><span class="keyword">!==</span><span class="default">$lenSkipped</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$last </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skippedMany</span><span class="keyword">) -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$last</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$skipped </span><span class="keyword">= </span><span class="default">$skippedMany</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$cur </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$skipped</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"skipped: </span><span class="default">$skipped</span><span class="string">\n"</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp;&nbsp; }<br>&nbsp;&nbsp; if (</span><span class="default">$dumbDone</span><span class="keyword">) break; </span><span class="comment">// this is the only place the loop is terminated<br><br>&nbsp;&nbsp; // process current tok<br>&nbsp;&nbsp; </span><span class="keyword">echo </span><span class="string">"curr tok: "</span><span class="keyword">.</span><span class="default">$tok</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br><br>&nbsp;&nbsp; </span><span class="comment">// update cursor<br>&nbsp;&nbsp; </span><span class="default">$cur </span><span class="keyword">+= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$tok</span><span class="keyword">);<br><br>&nbsp;&nbsp; </span><span class="comment">// get any next tok<br>&nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">$dumbDone</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$seps</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$dumbDone </span><span class="keyword">= (</span><span class="default">FALSE</span><span class="keyword">===</span><span class="default">$tok</span><span class="keyword">); <br>&nbsp; &nbsp; &nbsp; </span><span class="comment">// you're not really done till you check for trailing skipped<br>&nbsp;&nbsp; </span><span class="keyword">}<br>};<br></span><span class="default">?&gt;</span>&lt;/pre&gt;</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62073">  
  <a class="name">
  <strong class="user"><em>mac.com@nemo</em></strong></a><div class="date" title="2006-02-18 01:49"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62073">
<div class="phpcode"><code><span class="html">
This function takes a string and returns an array with words (delimited by spaces), also taking into account quotes, doublequotes, backticks and backslashes (for escaping stuff).<br>So<br><br>$string = "cp&nbsp;&nbsp; 'my file' to `Judy's file`";<br>var_dump(parse_cli($string));<br><br>would yield:<br><br>array(4) {<br>&nbsp; [0]=&gt;<br>&nbsp; string(2) "cp"<br>&nbsp; [1]=&gt;<br>&nbsp; string(7) "my file"<br>&nbsp; [2]=&gt;<br>&nbsp; string(5) "to"<br>&nbsp; [3]=&gt;<br>&nbsp; string(11) "Judy's file"<br>}<br><br>Way it works, runs through the string character by character, for each character looking up the action to take, based on that character and its current $state.<br>Actions can be (one or more of) adding the character/string to the current word, adding the word to the output array, and changing or (re)storing the state.<br>For example a space will become part of the current 'word' (or 'token') if $state is 'doublequoted', but it will start a new token if $state was 'unquoted'.<br>I was later told it's a "tokeniser using a finite state automaton". Who knew :-)<br><br><span class="default">&lt;?php<br><br></span><span class="comment">#_____________________<br># parse_cli($string) /<br></span><span class="keyword">function </span><span class="default">parse_cli</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'space'</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$previous </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// stores current state when encountering a backslash (which changes $state to 'escaped', but has to fall back into the previous $state afterwards)<br>&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= array();&nbsp; &nbsp;&nbsp; </span><span class="comment">// the return value<br>&nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// type of character<br>&nbsp; &nbsp; // array[states][chartypes] =&gt; actions<br>&nbsp; &nbsp; </span><span class="default">$chart </span><span class="keyword">= array(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'space'&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">''</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'q'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'d'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'ue'</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'ua'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'unquoted'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'quoted'&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'doublequoted' </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'backticked'&nbsp;&nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">,&nbsp; </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'w '</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'e'</span><span class="keyword">,&nbsp; </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'escaped'&nbsp; &nbsp; &nbsp; </span><span class="keyword">=&gt; array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">, </span><span class="string">'other'</span><span class="keyword">=&gt;</span><span class="string">'ap'</span><span class="keyword">));<br>&nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">, array(</span><span class="string">'space'</span><span class="keyword">=&gt;</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'quote'</span><span class="keyword">=&gt;</span><span class="string">'\''</span><span class="keyword">, </span><span class="string">'doublequote'</span><span class="keyword">=&gt;</span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'backtick'</span><span class="keyword">=&gt;</span><span class="string">'`'</span><span class="keyword">, </span><span class="string">'backslash'</span><span class="keyword">=&gt;</span><span class="string">'\\'</span><span class="keyword">));<br>&nbsp; &nbsp; &nbsp; &nbsp; if (! </span><span class="default">$type</span><span class="keyword">) </span><span class="default">$type </span><span class="keyword">= </span><span class="string">'other'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$type </span><span class="keyword">== </span><span class="string">'other'</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// grabs all characters that are also 'other' following the current one in one go<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[ \'\"\`\\\]/"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$matches</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$matches </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$char </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]-</span><span class="default">$i</span><span class="keyword">); </span><span class="comment">// yep, $char length can be &gt; 1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] - </span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// no more match on special characters, that must mean this is the last word!<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the .= hereunder is because we *might* be in the middle of a word that just contained special chars<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">.= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break; </span><span class="comment">// jumps out of the for() loop<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$actions </span><span class="keyword">= </span><span class="default">$chart</span><span class="keyword">[</span><span class="default">$state</span><span class="keyword">][</span><span class="default">$type</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$actions</span><span class="keyword">); </span><span class="default">$j</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$act </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$actions</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">' '</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'space'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'u'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'unquoted'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'q'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'quoted'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'d'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'doublequoted'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'b'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'backticked'</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'e'</span><span class="keyword">) { </span><span class="default">$previous </span><span class="keyword">= </span><span class="default">$state</span><span class="keyword">; </span><span class="default">$state </span><span class="keyword">= </span><span class="string">'escaped'</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'a'</span><span class="keyword">) </span><span class="default">$word </span><span class="keyword">.= </span><span class="default">$char</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'w'</span><span class="keyword">) { </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$word</span><span class="keyword">; </span><span class="default">$word </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$act </span><span class="keyword">== </span><span class="string">'p'</span><span class="keyword">) </span><span class="default">$state </span><span class="keyword">= </span><span class="default">$previous</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">)) </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$word</span><span class="keyword">;<br>&nbsp; &nbsp; return </span><span class="default">$out</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103962">  
  <a class="name">
  <strong class="user"><em>pradador at me dot com</em></strong></a><div class="date" title="2011-05-13 12:10"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103962">
<div class="phpcode"><code><span class="html">
Here's a simple class that allows you to iterate through string tokens using a foreach loop.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * The TokenIterator class allows you to iterate through string tokens using
<br> * the familiar foreach control structure.
<br> * 
<br> * Example:
<br> * &lt;code&gt;
<br> * &lt;?php
<br> * $string = 'This is a test.';
<br> * $delimiters = ' ';
<br> * $ti = new TokenIterator($string, $delimiters);
<br> * 
<br> * foreach ($ti as $count =&gt; $token) {
<br> *&nbsp; &nbsp;&nbsp; echo sprintf("%d, %s\n", $count, $token); 
<br> * }
<br> * 
<br> * // Prints the following output:
<br> * // 0. This
<br> * // 1. is
<br> * // 2. a
<br> * // 3. test.
<br> * &lt;/code&gt;
<br> */
<br></span><span class="keyword">class </span><span class="default">TokenIterator </span><span class="keyword">implements </span><span class="default">Iterator
<br></span><span class="keyword">{
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * The string to tokenize.
<br>&nbsp; &nbsp;&nbsp; * @var string
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$_string</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * The token delimiters.
<br>&nbsp; &nbsp;&nbsp; * @var string
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$_delims</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Stores the current token.
<br>&nbsp; &nbsp;&nbsp; * @var mixed
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$_token</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Internal token counter.
<br>&nbsp; &nbsp;&nbsp; * @var int
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">protected </span><span class="default">$_counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * Constructor.
<br>&nbsp; &nbsp;&nbsp; * 
<br>&nbsp; &nbsp;&nbsp; * @param string $string The string to tokenize.
<br>&nbsp; &nbsp;&nbsp; * @param string $delims The token delimiters.
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$delims</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_string </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims </span><span class="keyword">= </span><span class="default">$delims</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$delims</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * @see Iterator::current()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">current</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * @see Iterator::key()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">key</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * @see Iterator::next()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">next</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * @see Iterator::rewind()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">rewind</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_counter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_string</span><span class="keyword">, </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_delims</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/**
<br>&nbsp; &nbsp;&nbsp; * @see Iterator::valid()
<br>&nbsp; &nbsp;&nbsp; */
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">valid</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">_token </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115124">  
  <a class="name">
  <strong class="user"><em>info at maisuma dot jp</em></strong></a><div class="date" title="2014-05-30 08:15"><strong>2 months ago</strong></div>
  <div class="text" id="Hcom115124">
<div class="phpcode"><code><span class="html">
If you want to tokenize by only one letter, explode() is much faster compared to strtok().<br><br><span class="default">&lt;?php<br>$str</span><span class="keyword">=</span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">'foo '</span><span class="keyword">,</span><span class="default">10000</span><span class="keyword">);<br><br></span><span class="comment">//explode()<br></span><span class="default">$time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">$arr</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">);<br></span><span class="default">$time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">)-</span><span class="default">$time</span><span class="keyword">;<br>echo </span><span class="string">"explode():</span><span class="default">$time</span><span class="string"> sec."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="comment">//strtok()<br></span><span class="default">$time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">$ret</span><span class="keyword">=</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">);<br>while(</span><span class="default">$ret</span><span class="keyword">!==</span><span class="default">FALSE</span><span class="keyword">){<br>&nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">=</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">);<br>}<br></span><span class="default">$time</span><span class="keyword">=</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">)-</span><span class="default">$time</span><span class="keyword">;<br>echo </span><span class="string">"strtok():</span><span class="default">$time</span><span class="string"> sec."</span><span class="keyword">.</span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>The result is : (PHP 5.3.3 on CentOS)<br><br>explode():0.001317024230957 sec.<br>strtok():0.0058917999267578 sec.<br><br>explode() is about five times fast in short strings, too.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="114349">  
  <a class="name">
  <strong class="user"><em>Axeia</em></strong></a><div class="date" title="2014-02-11 05:12"><strong>6 months ago</strong></div>
  <div class="text" id="Hcom114349">
<div class="phpcode"><code><span class="html">
Might be pointing out the obvious but if you'd rather use a for loop rather than a while (to keep the token strings on the same line for readability for example), it can be done. Added bonus, it doesn't put a $tok variable outside the loop itself either.<br>Downside however is that you're not able to manually free up the memory used using the technique mentioned by elarlang.<br><br><span class="default">&lt;?php<br></span><span class="keyword">for(</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="string">' _-.'</span><span class="keyword">); </span><span class="default">$tok</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">; </span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' _-.'</span><span class="keyword">))<br>{<br>&nbsp; echo </span><span class="string">"</span><span class="default">$tok</span><span class="string"> &lt;/br&gt;"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109415">  
  <a class="name">
  <strong class="user"><em>gilthans at NOSPAM dot gmail dot com</em></strong></a><div class="date" title="2012-07-15 06:47"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109415">
<div class="phpcode"><code><span class="html">
Note that strtok may receive different tokens each time. Therefore, if, for example, you wish to extract several words and then the rest of the sentence:<br><br><span class="default">&lt;?php<br>$text </span><span class="keyword">= </span><span class="string">"13 202 5 This is a long message explaining the error codes."</span><span class="keyword">;<br></span><span class="default">$error1 </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">); </span><span class="comment">//13<br></span><span class="default">$error2 </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">); </span><span class="comment">//202<br></span><span class="default">$error3 </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">); </span><span class="comment">//5<br></span><span class="default">$error_message </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">""</span><span class="keyword">); </span><span class="comment">//Notice the different token parameter<br></span><span class="keyword">echo </span><span class="default">$error_message</span><span class="keyword">; </span><span class="comment">//This is a long message explaining the error codes.<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103051">  
  <a class="name">
  <strong class="user"><em>elarlang at gmail dot com</em></strong></a><div class="date" title="2011-03-22 10:45"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103051">
<div class="phpcode"><code><span class="html">
If you have memory-usage critical solution, you should keep in mind, that strtok function holds input string parameter (or reference to it?) in memory after usage.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">);<br>&nbsp; &nbsp; while (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do something here...<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$token_symbols</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span>Test-cases with handling ~10MB plain-text file:<br>Case #1 - unset $str variable<br><span class="default">&lt;?php<br>$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// mem usage 9.75383758545 MB (memory_get_usage() / 1024 / 1024)); <br></span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// mem usage 9.75400161743 MB<br></span><span class="keyword">unset(</span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// 9.75395584106 MB<br></span><span class="default">?&gt;<br></span>Case #1 result: memory is still used<br><br>Case #2 - call strtok again<br><span class="default">&lt;?php<br>$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// 9.75401306152 MB<br></span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// 9.75417709351<br></span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// 9.75421524048<br></span><span class="default">?&gt;<br></span>Case #2 result: memory is still used<br><br>Case #3 - call strtok again AND unset $str variable<br><span class="default">&lt;?php<br>$token_symbols </span><span class="keyword">= </span><span class="string">" \t\n"</span><span class="keyword">;<br></span><span class="default">$str </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'10MB.txt'</span><span class="keyword">); </span><span class="comment">// 9.75410079956 MB<br></span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">); </span><span class="comment">// 9.75426483154 MB<br></span><span class="keyword">unset(</span><span class="default">$str</span><span class="keyword">);<br></span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">); </span><span class="comment">// 0.0543975830078 MB<br></span><span class="default">?&gt;<br></span>Case #3 result: memory is free<br><br>So, better solution for tokenize function:<br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">tokenize</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">, </span><span class="default">$token_reset </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$token_symbols</span><span class="keyword">);<br>&nbsp; &nbsp; while (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// do something here...<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$word </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$token_symbols</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if(</span><span class="default">$token_reset</span><span class="keyword">)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94463">  
  <a class="name">
  <strong class="user"><em>benighted at gmail dot com</em></strong></a><div class="date" title="2009-11-06 06:47"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94463">
<div class="phpcode"><code><span class="html">
Simple way to tokenize search parameters, including double or single quoted keys.&nbsp; If only one quote is found, the rest of the string is assumed to be part of that token.
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$keywords</span><span class="keyword">,</span><span class="string">' '</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while (</span><span class="default">$token</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// find double quoted tokens
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$token</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}==</span><span class="string">'"'</span><span class="keyword">) { </span><span class="default">$token </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">).</span><span class="string">'"'</span><span class="keyword">; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// find single quoted tokens
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$token</span><span class="keyword">{</span><span class="default">0</span><span class="keyword">}==</span><span class="string">"'"</span><span class="keyword">) { </span><span class="default">$token </span><span class="keyword">.= </span><span class="string">' '</span><span class="keyword">.</span><span class="default">strtok</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">).</span><span class="string">"'"</span><span class="keyword">; }
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[] = </span><span class="default">$token</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>Use substr(1,strlen($token)) and remove the part that adds the trailing quotes if you want your output without quotes.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93315">  
  <a class="name">
  <strong class="user"><em>azeem</em></strong></a><div class="date" title="2009-09-02 12:14"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93315">
<div class="phpcode"><code><span class="html">
Here is a java like StringTokenizer class using strtok function:<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * The string tokenizer class allows an application to break a string into tokens.<br> *<br> * @example The following is one example of the use of the tokenizer. The code:<br> * &lt;code&gt;<br> * &lt;?php<br> *&nbsp; &nbsp; $str = 'this is:@\t\n a test!';<br> *&nbsp; &nbsp; $delim = ' !@:'\t\n; // remove these chars<br> *&nbsp; &nbsp; $st = new StringTokenizer($str, $delim);<br> *&nbsp; &nbsp; while ($st-&gt;hasMoreTokens()) {<br> *&nbsp; &nbsp; &nbsp; &nbsp; echo $st-&gt;nextToken() . "\n";<br> *&nbsp; &nbsp; }<br> *&nbsp; &nbsp; prints the following output:<br> *&nbsp; &nbsp; &nbsp; this<br> *&nbsp; &nbsp; &nbsp; is<br> *&nbsp; &nbsp; &nbsp; a<br> *&nbsp; &nbsp; &nbsp; test<br> * ?&gt;<br> * &lt;/code&gt;<br> */<br></span><span class="keyword">class </span><span class="default">StringTokenizer </span><span class="keyword">{<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * @var string<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">private </span><span class="default">$token</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * @var string<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">private </span><span class="default">$delim</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Constructs a string tokenizer for the specified string<br>&nbsp; &nbsp;&nbsp; * @param string $str String to tokenize<br>&nbsp; &nbsp;&nbsp; * @param string $delim The set of delimiters (the characters that separate tokens)<br>&nbsp; &nbsp;&nbsp; * specified at creation time, default to ' '<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="comment">/*string*/ </span><span class="default">$str</span><span class="keyword">, </span><span class="comment">/*string*/ </span><span class="default">$delim </span><span class="keyword">= </span><span class="string">' '</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$delim</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">delim </span><span class="keyword">= </span><span class="default">$delim</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; public function </span><span class="default">__destruct</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; unset(</span><span class="default">$this</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Tests if there are more tokens available from this tokenizer's string. It<br>&nbsp; &nbsp;&nbsp; * does not move the internal pointer in any way. To move the internal pointer<br>&nbsp; &nbsp;&nbsp; * to the next element call nextToken()<br>&nbsp; &nbsp;&nbsp; * @return boolean - true if has more tokens, false otherwise<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">hasMoreTokens</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Returns the next token from this string tokenizer and advances the internal<br>&nbsp; &nbsp;&nbsp; * pointer by one.<br>&nbsp; &nbsp;&nbsp; * @return string - next element in the tokenized string<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">nextToken</span><span class="keyword">() {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">token </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">delim</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$current</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="91532">  
  <a class="name">
  <strong class="user"><em>yanick dot rochon at gmail dot com</em></strong></a><div class="date" title="2009-06-15 09:37"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom91532">
<div class="phpcode"><code><span class="html">
Here is a small function I wrote as I needed to extract some named tokens from a string (a la Google). For example, I needed to format a string like "extension:gif size:64M animated:true author:'John Bash'" into<br><br>array(<br>&nbsp; 'extension' =&gt; 'gif',<br>&nbsp; 'size' =&gt; '64M',<br>&nbsp; 'animated' =&gt; true,<br>&nbsp; 'author' =&gt; 'John Bash'<br>)<br><br>So, here's the code: <br><br><span class="default">&lt;?php<br><br>header</span><span class="keyword">(</span><span class="string">'Content-type: text/plain; charset=utf-8'</span><span class="keyword">);<br><br></span><span class="comment">/**<br> * NOTE : use mbstring.func_overload for multi-byte support with this function<br> *<br> * @param string $string&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the string to tokenize<br> * @param int $offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the starting offset<br> * @param string $defaultTokenName&nbsp;&nbsp; the default token name if none specified<br> * @param string $groupDelimiters&nbsp; &nbsp; the characters to delimit token groups<br> * @param string $groupNameDelimiter the character(s) to delimit token group names<br> * @return array<br> */<br></span><span class="keyword">function </span><span class="default">getTokens</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$string</span><span class="keyword">, <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$defaultTokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">, <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$groupDelimiters </span><span class="keyword">= </span><span class="string">'\'"'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$groupNameDelimiter </span><span class="keyword">= </span><span class="string">':'</span><span class="keyword">) <br>{<br><br>&nbsp; &nbsp; if (</span><span class="default">$offset </span><span class="keyword">&gt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "offset out of range";<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; </span><span class="default">$spaces </span><span class="keyword">= </span><span class="string">" \t\n\r"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// space characters<br><br>&nbsp; &nbsp; // add group delimiters to spaces...<br>&nbsp; &nbsp; </span><span class="default">$groupSpaces </span><span class="keyword">= </span><span class="default">$spaces </span><span class="keyword">. </span><span class="default">$groupNameDelimiter</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$delimiters </span><span class="keyword">= </span><span class="default">$groupSpaces </span><span class="keyword">. </span><span class="default">$groupDelimiters</span><span class="keyword">;<br><br>&nbsp; &nbsp; </span><span class="comment">//var_dump($groupSpaces);<br><br>&nbsp; &nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">ltrim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">), </span><span class="default">$groupSpaces</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$token_strings </span><span class="keyword">= array();<br><br>&nbsp; &nbsp; </span><span class="comment">//echo "String is : " . $string . "\n";<br><br>&nbsp; &nbsp; // 1. split all tokens...<br>&nbsp; &nbsp; </span><span class="keyword">while (</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$lastOffset </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$escaped </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$groupDelimiters</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$groupChar </span><span class="keyword">= </span><span class="default">$char</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$groupChar </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">null </span><span class="keyword">!== </span><span class="default">$groupChar</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">$groupChar </span><span class="keyword">!== (</span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[++</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//$offset++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "*** Grouped : " . substr($string, $lastOffset, $offset - $lastOffset) . "\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">false </span><span class="keyword">=== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$delimiters</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "*** Non-group : " . substr($string, $lastOffset, $offset - $lastOffset) . "\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//skip spaces...<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">while ((</span><span class="default">$offset </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)) &amp;&amp; ((</span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$groupSpaces</span><span class="keyword">, </span><span class="default">$char </span><span class="keyword">= </span><span class="default">$string</span><span class="keyword">[</span><span class="default">$offset</span><span class="keyword">])) || </span><span class="default">$escaped</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$offset</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$escaped </span><span class="keyword">= (</span><span class="string">'\\' </span><span class="keyword">=== </span><span class="default">$char</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$token_strings</span><span class="keyword">[] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$lastOffset</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">- </span><span class="default">$lastOffset</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "Next token = '" . end($token_strings) . "'\n";<br>&nbsp; &nbsp; </span><span class="keyword">}<br><br>&nbsp; &nbsp; </span><span class="default">$tokens </span><span class="keyword">= array();<br>&nbsp; &nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; foreach (</span><span class="default">$token_strings </span><span class="keyword">as </span><span class="default">$token_str</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// clean $token_str<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$token_str </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">), </span><span class="default">$spaces</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; switch (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str_value</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'true'</span><span class="keyword">: </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'false'</span><span class="keyword">: </span><span class="default">$str_value </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default: break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// is it a token name?<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="string">':' </span><span class="keyword">=== </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, -</span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="default">$str_value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokenName </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } elseif (empty(</span><span class="default">$defaultTokenName</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[] = </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$token_str</span><span class="keyword">, </span><span class="default">$delimiters</span><span class="keyword">);;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">] = array(<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">],<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_value<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$defaultTokenName</span><span class="keyword">] = </span><span class="default">$str_value</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; if (!empty(</span><span class="default">$tokenName</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tokens</span><span class="keyword">[</span><span class="default">$tokenName</span><span class="keyword">] = </span><span class="string">''</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$tokens</span><span class="keyword">;<br>}<br><br></span><span class="default">$str </span><span class="keyword">= </span><span class="string">"check1: test "<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"check2:'hello world' "<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">'check3: "foo" '<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">"check4: \\\"try this\\\""<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">'"buz" '<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">. </span><span class="string">'check1:true'</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89421">  
  <a class="name">
  <strong class="user"><em>KrazyBox</em></strong></a><div class="date" title="2009-03-06 06:11"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89421">
<div class="phpcode"><code><span class="html">
As of the change in strtok()'s handling of empty strings, it is now useless for scripts that rely on empty data to function.<br><br>Take for instance, a standard header. (with UNIX newlines)<br><br>http/1.0 200 OK\n<br>Content-Type: text/html\n<br>\n<br>--HTML BODY HERE---<br><br>When parsing this with strtok, one would wait until it found an empty string to signal the end of the header. However, because strtok now skips empty segments, it is impossible to know when the header has ended.<br>This should not be called `correct' behavior, it certainly is not. It has rendered strtok incapable of (properly) processing a very simple standard.<br><br>This new functionality, however, does not affect Windows style headers. You would search for a line that only contains "\r"<br>This, however, is not a justification for the change.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101015">  
  <a class="name">
  <strong class="user"><em>fabiolimasouto at gmail dot com</em></strong></a><div class="date" title="2010-11-20 05:54"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101015">
<div class="phpcode"><code><span class="html">
this example will hopefully help you understand how this function works:<br><br><span class="default">&lt;?php<br>$selector </span><span class="keyword">= </span><span class="string">'div.class#id'</span><span class="keyword">;<br></span><span class="default">$tagname </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="default">$selector</span><span class="keyword">,</span><span class="string">'.#'</span><span class="keyword">);<br>echo </span><span class="default">$tagname</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br><br>while(</span><span class="default">$tok </span><span class="keyword">= </span><span class="default">strtok</span><span class="keyword">(</span><span class="string">'.#'</span><span class="keyword">))<br>{<br> echo </span><span class="default">$tok</span><span class="keyword">.</span><span class="string">'&lt;br/&gt;'</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>Outputs:<br>div<br>class<br>id</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87977">  
  <a class="name">
  <strong class="user"><em>Logikos</em></strong></a><div class="date" title="2009-01-03 10:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87977">
<div class="phpcode"><code><span class="html">
This looks very simple, but it took me a long time to figure out so I thought I'd share it incase someone else was wanting the same thing:<br><br>this should work similar to substr() but with tokens instead!<br><br><span class="default">&lt;?php<br></span><span class="comment">/* subtok(string,chr,pos,len)<br> *<br> * chr = chr used to seperate tokens<br> * pos = starting postion<br> * len = length, if negative count back from right<br> * <br> *&nbsp; subtok('a.b.c.d.e','.',0)&nbsp; &nbsp;&nbsp; = 'a.b.c.d.e'<br> *&nbsp; subtok('a.b.c.d.e','.',0,2)&nbsp;&nbsp; = 'a.b'<br> *&nbsp; subtok('a.b.c.d.e','.',2,1)&nbsp;&nbsp; = 'c'<br> *&nbsp; subtok('a.b.c.d.e','.',2,-1)&nbsp; = 'c.d'<br> *&nbsp; subtok('a.b.c.d.e','.',-4)&nbsp; &nbsp; = 'b.c.d.e'<br> *&nbsp; subtok('a.b.c.d.e','.',-4,2)&nbsp; = 'b.c'<br> *&nbsp; subtok('a.b.c.d.e','.',-4,-1) = 'b.c.d'<br> */<br></span><span class="keyword">function </span><span class="default">subtok</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$len </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">) {<br>&nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="default">$chr</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">),</span><span class="default">$pos</span><span class="keyword">,</span><span class="default">$len</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;<br></span><br>explode breaks the tokens up into an array, array slice alows you to pick then tokens you want, and then implode converts it back to a string<br><br>although its far from a clone, this was inspired by mIRC's gettok() function</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.strtok.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:51:27 GMT -->


</body></html>