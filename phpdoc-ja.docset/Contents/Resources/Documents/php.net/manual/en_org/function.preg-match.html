<html><!-- Mirrored from php.net/manual/en/function.preg-match.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:54:46 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>preg_match</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.preg-match.html">
 <link rel="shorturl" href="http://php.net/preg-match">
 <link rel="alternate" href="http://php.net/preg-match" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.pcre.html">
 <link rel="prev" href="function.preg-match-all.html">
 <link rel="next" href="function.preg-quote.html">

 <link rel="alternate" href="function.preg-match.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.preg-match.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.preg-match.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.preg-match.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.preg-match.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.preg-match.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.preg-match.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.preg-match.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.preg-match.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.preg-match.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.preg-match.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.basic.text.html">Text Processing</a></li>      <li><a href="book.pcre.html">PCRE</a></li>      <li><a href="ref.pcre.html">PCRE Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.preg-match" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">preg_match</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">preg_match</span> — <span class="dc-title">Perform a regular expression match</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.preg-match-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>preg_match</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$pattern</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter reference">&amp;$matches</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$flags</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code><span class="initializer"> = 0</span></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   Searches <code class="parameter">subject</code> for a match to the regular
   expression given in <code class="parameter">pattern</code>.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.preg-match-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">pattern</code></dt>

     <dd>

      <p class="para">
       The pattern to search for, as a string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">subject</code></dt>

     <dd>

      <p class="para">
       The input string.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">matches</code></dt>

     <dd>

      <p class="para">
       If <code class="parameter">matches</code> is provided, then it is filled with
       the results of search. <var class="varname"><var class="varname">$matches[0]</var></var> will contain the
       text that matched the full pattern, <var class="varname"><var class="varname">$matches[1]</var></var>
       will have the text that matched the first captured parenthesized
       subpattern, and so on.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">flags</code></dt>

     <dd>

      <p class="para">
       <code class="parameter">flags</code> can be the following flag:
       </p><dl>

        
         <dt>
<strong><code>PREG_OFFSET_CAPTURE</code></strong></dt>

         <dd>

          <span class="simpara">
           If this flag is passed, for every occurring match the appendant string
           offset will also be returned. Note that this changes the value of
           <code class="parameter">matches</code> into an array where every element is an
           array consisting of the matched string at offset <em>0</em>
           and its string offset into <code class="parameter">subject</code> at offset
           <em>1</em>.
          </span>
         </dd>

        
       </dl>

      <p></p>
     </dd>

    
    
     <dt>
<code class="parameter">offset</code></dt>

     <dd>

      <p class="para">
       Normally, the search starts from the beginning of the subject string.
       The optional parameter <code class="parameter">offset</code> can be used to
       specify the alternate place from which to start the search (in bytes).
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        Using <code class="parameter">offset</code> is not equivalent to passing
        <em>substr($subject, $offset)</em> to
        <span class="function"><strong>preg_match()</strong></span> in place of the subject string,
        because <code class="parameter">pattern</code> can contain assertions such as
        <em class="emphasis">^</em>, <em class="emphasis">$</em> or
        <em class="emphasis">(?&lt;=x)</em>. Compare:
        </p><div class="informalexample">
         <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pattern&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/^def/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #0000BB">$pattern</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PREG_OFFSET_CAPTURE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
         </div>

         <p class="para">The above example will output:</p>
         <div class="example-contents screen">
<div class="cdata"><pre>Array
(
)
</pre></div>
         </div>
         <p class="para">
          while this example
         </p>
         <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br>$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"abcdef"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">$pattern&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/^def/'</span><span style="color: #007700">;<br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #0000BB">$pattern</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">substr</span><span style="color: #007700">(</span><span style="color: #0000BB">$subject</span><span style="color: #007700">,</span><span style="color: #0000BB">3</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PREG_OFFSET_CAPTURE</span><span style="color: #007700">);<br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
         </div>

         <p class="para">
          will produce
         </p>
         <div class="example-contents screen">
<div class="cdata"><pre>Array
(
    [0] =&gt; Array
        (
            [0] =&gt; def
            [1] =&gt; 0
        )

)
</pre></div>
         </div>
        </div>
       <p></p>
      <p></p></blockquote>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.preg-match-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   <span class="function"><strong>preg_match()</strong></span> returns 1 if the <code class="parameter">pattern</code>
   matches given <code class="parameter">subject</code>, 0 if it does not, or <strong><code>FALSE</code></strong>
   if an error occurred.
  </p>
  <div class="warning"><strong class="warning">Warning</strong><p class="simpara">This function may
return Boolean <strong><code>FALSE</code></strong>, but may also return a non-Boolean value which
evaluates to <strong><code>FALSE</code></strong>. Please read the section on <a href="language.types.boolean.html" class="link">Booleans</a> for more
information. Use <a href="language.operators.comparison.html" class="link">the ===
operator</a> for testing the return value of this
function.</p></div>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.preg-match-changelog">
  <h3 class="title">Changelog</h3>
  <p class="para">
   </p><table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Version</th>
       <th>Description</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.6</td>
       <td>
        Returns <strong><code>FALSE</code></strong> if <code class="parameter">offset</code> is higher than
        <code class="parameter">subject</code> length.
       </td>
      </tr>

      <tr>
       <td>5.2.2</td>
       <td>
        Named subpatterns now accept the
        syntax <em>(?&lt;name&gt;)</em>
        and <em>(?'name')</em> as well
        as <em>(?P&lt;name&gt;)</em>. Previous versions
        accepted only <em>(?P&lt;name&gt;)</em>.
       </td>
      </tr>

     </tbody>
    
   </table>

  <p></p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.preg-match-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-4905">
    <p><strong>Example #1 Find the string of text "php"</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;The&nbsp;"i"&nbsp;after&nbsp;the&nbsp;pattern&nbsp;delimiter&nbsp;indicates&nbsp;a&nbsp;case-insensitive&nbsp;search<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/php/i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"PHP&nbsp;is&nbsp;the&nbsp;web&nbsp;scripting&nbsp;language&nbsp;of&nbsp;choice."</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;found."</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;not&nbsp;found."</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4906">
    <p><strong>Example #2 Find the word "web"</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">/*&nbsp;The&nbsp;\b&nbsp;in&nbsp;the&nbsp;pattern&nbsp;indicates&nbsp;a&nbsp;word&nbsp;boundary,&nbsp;so&nbsp;only&nbsp;the&nbsp;distinct<br>&nbsp;*&nbsp;word&nbsp;"web"&nbsp;is&nbsp;matched,&nbsp;and&nbsp;not&nbsp;a&nbsp;word&nbsp;partial&nbsp;like&nbsp;"webbing"&nbsp;or&nbsp;"cobweb"&nbsp;*/<br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\bweb\b/i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"PHP&nbsp;is&nbsp;the&nbsp;web&nbsp;scripting&nbsp;language&nbsp;of&nbsp;choice."</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;found."</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;not&nbsp;found."</span><span style="color: #007700">;<br>}<br><br>if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"/\bweb\b/i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"PHP&nbsp;is&nbsp;the&nbsp;website&nbsp;scripting&nbsp;language&nbsp;of&nbsp;choice."</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;found."</span><span style="color: #007700">;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;match&nbsp;was&nbsp;not&nbsp;found."</span><span style="color: #007700">;<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4907">
    <p><strong>Example #3 Getting the domain name out of a URL</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;get&nbsp;host&nbsp;name&nbsp;from&nbsp;URL<br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'@^(?:http://)?([^/]+)@i'</span><span style="color: #007700">,<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"http://www.php.net/index.html"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br></span><span style="color: #0000BB">$host&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br><br></span><span style="color: #FF8000">//&nbsp;get&nbsp;last&nbsp;two&nbsp;segments&nbsp;of&nbsp;host&nbsp;name<br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/[^.]+\.[^.]+$/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$host</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br>echo&nbsp;</span><span style="color: #DD0000">"domain&nbsp;name&nbsp;is:&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$matches</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>domain name is: php.net
</pre></div>
    </div>
   </div>
  <p></p>
  <p class="para">
   </p><div class="example" id="example-4908">
    <p><strong>Example #4 Using named subpattern</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br><br>$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foobar:&nbsp;2008'</span><span style="color: #007700">;<br><br></span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">'/(?P&lt;name&gt;\w+):&nbsp;(?P&lt;digit&gt;\d+)/'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br><br></span><span style="color: #FF8000">/*&nbsp;This&nbsp;also&nbsp;works&nbsp;in&nbsp;PHP&nbsp;5.2.2&nbsp;(PCRE&nbsp;7.0)&nbsp;and&nbsp;later,&nbsp;however&nbsp;<br>&nbsp;*&nbsp;the&nbsp;above&nbsp;form&nbsp;is&nbsp;recommended&nbsp;for&nbsp;backwards&nbsp;compatibility&nbsp;*/<br>//&nbsp;preg_match('/(?&lt;name&gt;\w+):&nbsp;(?&lt;digit&gt;\d+)/',&nbsp;$str,&nbsp;$matches);<br><br></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$matches</span><span style="color: #007700">);<br><br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>Array
(
    [0] =&gt; foobar: 2008
    [name] =&gt; foobar
    [1] =&gt; foobar
    [digit] =&gt; 2008
    [2] =&gt; 2008
)
</pre></div>
    </div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.preg-match-notes">
  <h3 class="title">Notes</h3>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    Do not use <span class="function"><strong>preg_match()</strong></span> if you only want to check if
    one string is contained in another string. Use
    <span class="function"><a href="function.strpos.html" class="function">strpos()</a></span> or <span class="function"><a href="function.strstr.html" class="function">strstr()</a></span> instead as
    they will be faster.
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.preg-match-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><a href="pcre.pattern.html" class="link">PCRE Patterns</a></li>
    <li class="member"><span class="function"><a href="function.preg-match-all.html" class="function" rel="rdfs-seeAlso">preg_match_all()</a> - Perform a global regular expression match</span></li>
    <li class="member"><span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - Perform a regular expression search and replace</span></li>
    <li class="member"><span class="function"><a href="function.preg-split.html" class="function" rel="rdfs-seeAlso">preg_split()</a> - Split string by a regular expression</span></li>
    <li class="member"><span class="function"><a href="function.preg-last-error.html" class="function" rel="rdfs-seeAlso">preg_last_error()</a> - Returns the error code of the last PCRE regex execution</span></li>
   </ul>
  <p></p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="105924">  
  <a class="name">
  <strong class="user"><em>force at md-t dot org</em></strong></a><div class="date" title="2011-09-25 11:38"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105924">
<div class="phpcode"><code><span class="html">
Simple regex<br><br>Regex quick reference<br>[abc]&nbsp; &nbsp;&nbsp; A single character: a, b or c<br>[^abc]&nbsp; &nbsp;&nbsp; Any single character but a, b, or c<br>[a-z]&nbsp; &nbsp;&nbsp; Any single character in the range a-z<br>[a-zA-Z]&nbsp; &nbsp;&nbsp; Any single character in the range a-z or A-Z<br>^&nbsp; &nbsp;&nbsp; Start of line<br>$&nbsp; &nbsp;&nbsp; End of line<br>\A&nbsp; &nbsp;&nbsp; Start of string<br>\z&nbsp; &nbsp;&nbsp; End of string<br>.&nbsp; &nbsp;&nbsp; Any single character<br>\s&nbsp; &nbsp;&nbsp; Any whitespace character<br>\S&nbsp; &nbsp;&nbsp; Any non-whitespace character<br>\d&nbsp; &nbsp;&nbsp; Any digit<br>\D&nbsp; &nbsp;&nbsp; Any non-digit<br>\w&nbsp; &nbsp;&nbsp; Any word character (letter, number, underscore)<br>\W&nbsp; &nbsp;&nbsp; Any non-word character<br>\b&nbsp; &nbsp;&nbsp; Any word boundary character<br>(...)&nbsp; &nbsp;&nbsp; Capture everything enclosed<br>(a|b)&nbsp; &nbsp;&nbsp; a or b<br>a?&nbsp; &nbsp;&nbsp; Zero or one of a<br>a*&nbsp; &nbsp;&nbsp; Zero or more of a<br>a+&nbsp; &nbsp;&nbsp; One or more of a<br>a{3}&nbsp; &nbsp;&nbsp; Exactly 3 of a<br>a{3,}&nbsp; &nbsp;&nbsp; 3 or more of a<br>a{3,6}&nbsp; &nbsp;&nbsp; Between 3 and 6 of a<br><br>options: i case insensitive m make dot match newlines x ignore whitespace in regex o perform #{...} substitutions only once</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83446">  
  <a class="name">
  <strong class="user"><em>jonathan dot lydall at gmail dot removethispart dot com</em></strong></a><div class="date" title="2008-05-26 12:50"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83446">
<div class="phpcode"><code><span class="html">
Because making a truly correct email validation function is harder than one may think, consider using this one which comes with PHP through the filter_var function (<a rel="nofollow" target="_blank">http://www.php.net/manual/en/function.filter-var.php</a>):<br><br><span class="default">&lt;?php<br>$email </span><span class="keyword">= </span><span class="string">"someone@domain .local"</span><span class="keyword">;<br><br>if(!</span><span class="default">filter_var</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">, </span><span class="default">FILTER_VALIDATE_EMAIL</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"E-mail is not valid"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"E-mail is valid"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84312">  
  <a class="name">
  <strong class="user"><em>Dino Korah AT webroot DOT com</em></strong></a><div class="date" title="2008-07-08 04:11"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84312">
<div class="phpcode"><code><span class="html">
preg_match and preg_replace_callback doesnt match up in the structure of the array that they fill-up for a match.<br>preg_match, as the example shows, supports named patterns, whereas preg_replace_callback doesnt seem to support it at all. It seem to ignore any named pattern matched.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103015">  
  <a class="name">
  <strong class="user"><em>MrBull</em></strong></a><div class="date" title="2011-03-20 07:32"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103015">
<div class="phpcode"><code><span class="html">
Sometimes its useful to negate a string. The first method which comes to mind to do this is: [^(string)] but this of course won't work. There is a solution, but it is not very well known. This is the simple piece of code on how a negation of a string is done:<br><br>(?:(?!string).)<br><br>?: makes a subpattern (see <a rel="nofollow" target="_blank">http://www.php.net/manual/en/regexp.reference.subpatterns.php</a>) and ?! is a negative look ahead. You put the negative look ahead in front of the dot because you want the regex engine to first check if there is an occurrence of the string you are negating. Only if it is not there, you want to match an arbitrary character.<br><br>Hope this helps some ppl.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96339">  
  <a class="name">
  <strong class="user"><em>plasma</em></strong></a><div class="date" title="2010-02-21 04:53"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96339">
<div class="phpcode"><code><span class="html">
To extract scheme, host, path, ect. simply use 
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; $url&nbsp; </span><span class="keyword">= </span><span class="string">'<a rel="nofollow" target="_blank">http://name:pass@</a>'</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$url </span><span class="keyword">.= </span><span class="string">'example.com:10000'</span><span class="keyword">;
<br>&nbsp; </span><span class="default">$url </span><span class="keyword">.= </span><span class="string">'/path/to/file.php?a=1&amp;amp;b=2#anchor'</span><span class="keyword">;
<br>
<br>&nbsp; </span><span class="default">$url_data </span><span class="keyword">= </span><span class="default">parse_url </span><span class="keyword">( </span><span class="default">$url </span><span class="keyword">);
<br>
<br>&nbsp; </span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$url_data </span><span class="keyword">);
<br>
<br></span><span class="default">?&gt;
<br></span>___
<br>prints out something like:
<br>
<br>Array
<br>(
<br>&nbsp; &nbsp; [scheme] =&gt; http
<br>&nbsp; &nbsp; [host] =&gt; wild.subdomain.orgy.domain.co.uk
<br>&nbsp; &nbsp; [port] =&gt; 10000
<br>&nbsp; &nbsp; [user] =&gt; name
<br>&nbsp; &nbsp; [pass] =&gt; pass
<br>&nbsp; &nbsp; [path] =&gt; /path/to/file.php
<br>&nbsp; &nbsp; [query] =&gt; a=1&amp;b=2
<br>&nbsp; &nbsp; [fragment] =&gt; anchor
<br>)
<br>
<br>In my tests parse_url is up to 15x faster than preg_match(_all)!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90503">  
  <a class="name">
  <strong class="user"><em>corey [works at] effim [delete] .com</em></strong></a><div class="date" title="2009-04-24 08:52"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90503">
<div class="phpcode"><code><span class="html">
I see a lot of people trying to put together phone regex's and struggling (hey, no worries...they're complicated). Here's one that we use that's pretty nifty. It's not perfect, but it should work for most non-idealists.
<br>
<br>*** Note: Only matches U.S. phone numbers. ***
<br>
<br><span class="default">&lt;?php
<br>
<br></span><span class="comment">// all on one line...
<br></span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(?:1(?:[. -])?)?(?:\((?=\d{3}\)))?([2-9]\d{2})(?:(?&lt;=\(\d{3})\))? ?(?:(?&lt;=\d{3})[.-])?([2-9]\d{2})[. -]?(\d{4})(?: (?i:ext)\.? ?(\d{1,5}))?$/'</span><span class="keyword">;
<br>
<br></span><span class="comment">// or broken up
<br></span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(?:1(?:[. -])?)?(?:\((?=\d{3}\)))?([2-9]\d{2})'
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">.</span><span class="string">'(?:(?&lt;=\(\d{3})\))? ?(?:(?&lt;=\d{3})[.-])?([2-9]\d{2})'
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">.</span><span class="string">'[. -]?(\d{4})(?: (?i:ext)\.? ?(\d{1,5}))?$/'</span><span class="keyword">;
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>If you're wondering why all the non-capturing subpatterns (which look like this "(?:", it's so that we can do this:
<br>
<br><span class="default">&lt;?php
<br>
<br>$formatted </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="string">'($1) $2-$3 ext. $4'</span><span class="keyword">, </span><span class="default">$phoneNumber</span><span class="keyword">);
<br>
<br></span><span class="comment">// or, provided you use the $matches argument in preg_match
<br>
<br></span><span class="default">$formatted </span><span class="keyword">= </span><span class="string">"(</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]</span><span class="string">) </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">]</span><span class="string">-</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">;
<br>if (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]) </span><span class="default">$formatted </span><span class="keyword">.= </span><span class="string">" </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">4</span><span class="keyword">]</span><span class="string">"</span><span class="keyword">;
<br>
<br></span><span class="default">?&gt;
<br></span>
<br>*** Results: ***
<br>520-555-5542 :: MATCH
<br>520.555.5542 :: MATCH
<br>5205555542 :: MATCH
<br>520 555 5542 :: MATCH
<br>520) 555-5542 :: FAIL
<br>(520 555-5542 :: FAIL
<br>(520)555-5542 :: MATCH
<br>(520) 555-5542 :: MATCH
<br>(520) 555 5542 :: MATCH
<br>520-555.5542 :: MATCH
<br>520 555-0555 :: MATCH
<br>(520)5555542 :: MATCH
<br>520.555-4523 :: MATCH
<br>19991114444 :: FAIL
<br>19995554444 :: MATCH
<br>514 555 1231 :: MATCH
<br>1 555 555 5555 :: MATCH
<br>1.555.555.5555 :: MATCH
<br>1-555-555-5555 :: MATCH
<br>520-555-5542 ext.123 :: MATCH
<br>520.555.5542 EXT 123 :: MATCH
<br>5205555542 Ext. 7712 :: MATCH
<br>520 555 5542 ext 5 :: MATCH
<br>520) 555-5542 :: FAIL
<br>(520 555-5542 :: FAIL
<br>(520)555-5542 ext .4 :: FAIL
<br>(512) 555-1234 ext. 123 :: MATCH
<br>1(555)555-5555 :: MATCH</span>
</code></div>
  </div>
 </div>
  <div class="note" id="88587">  
  <a class="name">
  <strong class="user"><em>akniep at rayo dot info</em></strong></a><div class="date" title="2009-01-30 03:05"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom88587">
<div class="phpcode"><code><span class="html">
Bugs of preg_match (PHP-version 5.2.5)<br><br>In most cases, the following example will show one of two PHP-bugs discovered with preg_match depending on your PHP-version and configuration.<br><br><span class="default">&lt;?php<br><br>$text </span><span class="keyword">= </span><span class="string">"test="</span><span class="keyword">;<br></span><span class="comment">// creates a rather long text<br></span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ &lt; </span><span class="default">100000</span><span class="keyword">;)<br>&nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"%AB"</span><span class="keyword">;<br><br></span><span class="comment">// a typical URL_query validity-checker (the pattern's function does not matter for this example)<br></span><span class="default">$pattern&nbsp; &nbsp; </span><span class="keyword">= </span><span class="string">'/^(?:[;\/?:@&amp;=+$,]|(?:[^\W_]|[-_.!~*\()\[\] ])|(?:%[\da-fA-F]{2}))*$/'</span><span class="keyword">;<br>&nbsp; &nbsp; <br></span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">preg_match</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">) );<br><br></span><span class="default">?&gt;<br></span><br>Possible bug (1):<br>=============<br>On one of our Linux-Servers the above example crashes PHP-execution with a C(?) Segmentation Fault(!). This seems to be a known bug (see <a rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=40909</a>), but I don't know if it has been fixed, yet.<br>If you are looking for a work-around, the following code-snippet is what I found helpful. It wraps the possibly crashing preg_match call by decreasing the PCRE recursion limit in order to result in a Reg-Exp error instead of a PHP-crash.<br><br><span class="default">&lt;?php<br></span><span class="keyword">[...]<br><br></span><span class="comment">// decrease the PCRE recursion limit for the (possibly dangerous) preg_match call<br></span><span class="default">$former_recursion_limit </span><span class="keyword">= </span><span class="default">ini_set</span><span class="keyword">( </span><span class="string">"pcre.recursion_limit"</span><span class="keyword">, </span><span class="default">10000 </span><span class="keyword">);<br><br></span><span class="comment">// the wrapped preg_match call<br></span><span class="default">$result </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">);<br><br></span><span class="comment">// reset the PCRE recursion limit to its original value<br></span><span class="default">ini_set</span><span class="keyword">( </span><span class="string">"pcre.recursion_limit"</span><span class="keyword">, </span><span class="default">$former_recursion_limit </span><span class="keyword">);<br><br></span><span class="comment">// if the reg-exp fails due to the decreased recursion limit we may not make any statement, but PHP-execution continues<br></span><span class="keyword">if ( </span><span class="default">PREG_RECURSION_LIMIT_ERROR </span><span class="keyword">=== </span><span class="default">preg_last_error</span><span class="keyword">() )<br>{<br>&nbsp; &nbsp; </span><span class="comment">// react on the failed regular expression here<br>&nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= [...];<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">// do logging or email-sending here<br>&nbsp; &nbsp; </span><span class="keyword">[...]<br>} </span><span class="comment">//if<br><br></span><span class="default">?&gt;<br></span><br>Possible bug (2):<br>=============<br>On one of our Windows-Servers the above example does not crash PHP, but (directly) hits the recursion-limit. Here, the problem is that preg_match does not return boolean(false) as expected by the description / manual of above.<br>In short, preg_match seems to return an int(0) instead of the expected boolean(false) if the regular expression could not be executed due to the PCRE recursion-limit. So, if preg_match results in int(0) you seem to have to check preg_last_error() if maybe an error occurred.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102214">  
  <a class="name">
  <strong class="user"><em>arash dot hemmat at gmail dot com</em></strong></a><div class="date" title="2011-02-02 07:15"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102214">
<div class="phpcode"><code><span class="html">
For those who search for a unicode regular expression example using preg_match here it is:<br><br>Check for Persian digits<br>preg_match( "/[^\x{06F0}-\x{06F9}\x]+/u" , '۱۲۳۴۵۶۷۸۹۰' );</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96830">  
  <a class="name">
  <strong class="user"><em>Kae Cyphet</em></strong></a><div class="date" title="2010-03-17 06:29"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96830">
<div class="phpcode"><code><span class="html">
for those coming over from ereg, preg_match can be quite intimidating. to get started here is a migration tip.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if(</span><span class="default">ereg</span><span class="keyword">(</span><span class="string">'[^0-9A-Za-z]'</span><span class="keyword">,</span><span class="default">$test_string</span><span class="keyword">)) </span><span class="comment">// will be true if characters arnt 0-9, A-Z or a-z.
<br>
<br></span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/[^0-9A-Za-z]/'</span><span class="keyword">,</span><span class="default">$test_string</span><span class="keyword">)) </span><span class="comment">// this is the preg_match version. the /'s are now required.
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89418">  
  <a class="name">
  <strong class="user"><em>daevid at daevid dot com</em></strong></a><div class="date" title="2009-03-06 03:18"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89418">
<div class="phpcode"><code><span class="html">
I just learned about named groups from a Python friend today and was curious if PHP supported them, guess what -- it does!!!<br><br><a rel="nofollow" target="_blank">http://www.regular-expressions.info/named.html</a><br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; preg_match</span><span class="keyword">(</span><span class="string">"/(?P&lt;foo&gt;abc)(.*)(?P&lt;bar&gt;xyz)/"</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'abcdefghijklmnopqrstuvwxyz'</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$matches</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>will produce: <br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; abcdefghijklmnopqrstuvwxyz<br>&nbsp; &nbsp; [foo] =&gt; abc<br>&nbsp; &nbsp; [1] =&gt; abc<br>&nbsp; &nbsp; [2] =&gt; defghijklmnopqrstuvw<br>&nbsp; &nbsp; [bar] =&gt; xyz<br>&nbsp; &nbsp; [3] =&gt; xyz<br>)<br><br>Note that you actually get the named group as well as the numerical key<br>value too, so if you do use them, and you're counting array elements, be<br>aware that your array might be bigger than you initially expect it to be.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="95828">  
  <a class="name">
  <strong class="user"><em>cebelab at gmail dot com</em></strong></a><div class="date" title="2010-01-23 10:43"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom95828">
<div class="phpcode"><code><span class="html">
I noticed that in order to deal with UTF-8 texts, without having to recompile php with the PCRE UTF-8 flag enabled, you can just add the following sequence at the start of your pattern: (*UTF8)<br><br>for instance : '#(*UTF8)[[:alnum:]]#' will return TRUE for 'é' where '#[[:alnum:]]#' will return FALSE<br><br>found this very very useful tip after hours of research over the web directly in pcre website right here : <a rel="nofollow" target="_blank">http://www.pcre.org/pcre.txt</a><br>there are many further informations about UTF-8 support in the lib<br><br>hop that will help!<br><br>--<br>cedric</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94424">  
  <a class="name">
  <strong class="user"><em>ruakuu at NOSPAM dot com</em></strong></a><div class="date" title="2009-11-03 09:32"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94424">
<div class="phpcode"><code><span class="html">
Was working on a site that needed japanese and alphabetic letters and needed to <br>validate input using preg_match, I tried using \p{script} but didn't work:<br><br><span class="default">&lt;?php<br>$pattern </span><span class="keyword">=</span><span class="string">'/^([-a-zA-Z0-9_\p{Katakana}\p{Hiragana}\p{Han}]*)$/u'</span><span class="keyword">; </span><span class="comment">// Didn't work<br></span><span class="default">?&gt;<br></span><br>So I tried with ranges and it worked:<br><br><span class="default">&lt;?php<br>$pattern </span><span class="keyword">=</span><span class="string">'/^[-a-zA-Z0-9_\x{30A0}-\x{30FF}'<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">.</span><span class="string">'\x{3040}-\x{309F}\x{4E00}-\x{9FBF}\s]*$/u'</span><span class="keyword">;<br></span><span class="default">$match_string </span><span class="keyword">= </span><span class="string">'印刷最安 ニキビ跡除去 ゲームボーイ'</span><span class="keyword">;<br><br>if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$match_string</span><span class="keyword">)) {<br>&nbsp; &nbsp; echo </span><span class="string">"Found - pattern </span><span class="default">$pattern</span><span class="string">"</span><span class="keyword">;<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"Not found - pattern </span><span class="default">$pattern</span><span class="string">"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>U+4E00–U+9FBF Kanji<br>U+3040–U+309F Hiragana<br>U+30A0–U+30FF Katakana<br><br>Hope its useful, it took me several hours to figure it out.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105598">  
  <a class="name">
  <strong class="user"><em>cmallabon at homesfactory dot com</em></strong></a><div class="date" title="2011-08-30 10:28"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105598">
<div class="phpcode"><code><span class="html">
Just an interesting note. Was just updating code to replace ereg() with strpos() and preg_match and the thought occured that preg_match() could be optimized to quit early when only searching if a string begins with something, for example<br><span class="default">&lt;?php<br></span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^http/"</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">))<br>{<br> </span><span class="comment">//do something<br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br> vs <br><br><span class="default">&lt;?php <br></span><span class="keyword">if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">, </span><span class="string">"http"</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">)<br>{<br></span><span class="comment">//do something<br></span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>As I guessed, strpos() is always faster (about 2x) for short strings like a URL but for very long strings of several paragraphs (e.g. a block of XML) when the string doesn't start with the needle preg_match as twice as fast as strpos() as it doesn't scan the entire string.<br><br>So, if you are searching long strings and expect it to normally be true (e.g. validating XML), strpos() is a much faster BUT if you expect if to often fail, preg_match is the better choice.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105362">  
  <a class="name">
  <strong class="user"><em>workhorse at op dot pl</em></strong></a><div class="date" title="2011-08-11 12:53"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105362">
<div class="phpcode"><code><span class="html">
Preg_match returns empty result trying to validate $subject with carriege returns (/n/r).<br>To solve it one need to use /s modifier in $pattern string.<br><span class="default">&lt;?php<br>$pattern</span><span class="keyword">=</span><span class="string">'/.*/s'</span><span class="keyword">;<br></span><span class="default">$valid</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89252">  
  <a class="name">
  <strong class="user"><em>wjaspers4 [at] gmail [dot] com</em></strong></a><div class="date" title="2009-02-27 03:16"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89252">
<div class="phpcode"><code><span class="html">
I recently encountered a problem trying to capture multiple instances of named subpatterns from filenames.<br>Therefore, I came up with this function.<br><br>The function allows you to pass through flags (in this version it applies to all expressions tested), and generates an array of search results.<br><br>Enjoy!<br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * Allows multiple expressions to be tested on one string.<br> * This will return a boolean, however you may want to alter this.<br> *<br> * @author William Jaspers, IV &lt;wjaspers4@gmail.com&gt;<br> * @created 2009-02-27 17:00:00 +6:00:00 GMT<br> * @access public<br> *<br> * @param array $patterns An array of expressions to be tested.<br> * @param String $subject The data to test.<br> * @param array $findings Optional argument to store our results.<br> * @param mixed $flags Pass-thru argument to allow normal flags to apply to all tested expressions.<br> * @param array $errors A storage bin for errors<br> *<br> * @returns bool Whether or not errors occurred.<br> */<br></span><span class="keyword">function </span><span class="default">preg_match_multiple</span><span class="keyword">( <br>&nbsp; array </span><span class="default">$patterns</span><span class="keyword">=array(), <br>&nbsp; </span><span class="default">$subject</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">,<br>&nbsp; &amp;</span><span class="default">$findings</span><span class="keyword">=array(),<br>&nbsp; </span><span class="default">$flags</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,<br>&nbsp; &amp;</span><span class="default">$errors</span><span class="keyword">=array()<br>) {<br>&nbsp; foreach( </span><span class="default">$patterns </span><span class="keyword">as </span><span class="default">$name </span><span class="keyword">=&gt; </span><span class="default">$pattern </span><span class="keyword">)<br>&nbsp; {<br>&nbsp; &nbsp; if( </span><span class="default">1 </span><span class="keyword">&lt;= </span><span class="default">preg_match_all</span><span class="keyword">( </span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$found</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">) )<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$findings</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$found</span><span class="keyword">;<br>&nbsp; &nbsp; } else <br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; if( </span><span class="default">PREG_NO_ERROR </span><span class="keyword">!== ( </span><span class="default">$code </span><span class="keyword">= </span><span class="default">preg_last_error</span><span class="keyword">() ))<br>&nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$errors</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">$code</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; } else </span><span class="default">$findings</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = array();<br>&nbsp; &nbsp; }<br>&nbsp; }<br>&nbsp; return (</span><span class="default">0</span><span class="keyword">===</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$errors</span><span class="keyword">));<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93824">  
  <a class="name">
  <strong class="user"><em>splattermania at freenet dot de</em></strong></a><div class="date" title="2009-10-01 05:01"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93824">
<div class="phpcode"><code><span class="html">
As I wasted lots of time finding a REAL regex for URLs and resulted in building it on my own, I now have found one, that seems to work for all kinds of urls:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; $regex </span><span class="keyword">= </span><span class="string">"((https?|ftp)\:\/\/)?"</span><span class="keyword">; </span><span class="comment">// SCHEME
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"([a-z0-9+!*(),;?&amp;=\$_.-]+(\:[a-z0-9+!*(),;?&amp;=\$_.-]+)?@)?"</span><span class="keyword">; </span><span class="comment">// User and Pass
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"([a-z0-9-.]*)\.([a-z]{2,3})"</span><span class="keyword">; </span><span class="comment">// Host or IP
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"(\:[0-9]{2,5})?"</span><span class="keyword">; </span><span class="comment">// Port
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"(\/([a-z0-9+\$_-]\.?)+)*\/?"</span><span class="keyword">; </span><span class="comment">// Path
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"(\?[a-z+&amp;\$_.-][a-z0-9;:@&amp;%=+\/\$_.-]*)?"</span><span class="keyword">; </span><span class="comment">// GET Query
<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">"(#[a-z_.-][a-z0-9+\$_.-]*)?"</span><span class="keyword">; </span><span class="comment">// Anchor
<br></span><span class="default">?&gt;
<br></span>
<br>Then, the correct way to check against the regex ist as follows:
<br>
<br><span class="default">&lt;?php
<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^</span><span class="default">$regex</span><span class="string">$/"</span><span class="keyword">, </span><span class="default">$url</span><span class="keyword">))
<br>&nbsp; &nbsp; &nbsp;&nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; }
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111300">  
  <a class="name">
  <strong class="user"><em>Yousef Ismaeil Cliprz</em></strong></a><div class="date" title="2013-02-04 01:31"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111300">
<div class="phpcode"><code><span class="html">
Some times a Hacker use a php file or shell as a image to hack your website. so if you try to use move_uploaded_file() function as in example to allow for users to upload files, you must check if this file contains a bad codes or not so we use this function. preg match<br><br>in this function we use<br><br>unlink() - <a rel="nofollow" target="_blank">http://php.net/unlink</a><br><br>after you upload file check a file with below function. <br><br><span class="default">&lt;?php<br><br></span><span class="comment">/**<br> * A simple function to check file from bad codes.<br> *<br> * @param (string) $file - file path.<br> * @author Yousef Ismaeil - Cliprz[at]gmail[dot]com.<br> */<br></span><span class="keyword">function </span><span class="default">is_clean_file </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; if (</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; exit(</span><span class="default">$file</span><span class="keyword">.</span><span class="string">" Not exists."</span><span class="keyword">);<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(base64_|eval|system|shell_|exec|php_)/i'</span><span class="keyword">,</span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#&amp;\#x([0-9a-f]+);#i"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#&amp;\#([0-9]+);#i'</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#([a-z]*)=([\`\'\"]*)script:#iU"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#([a-z]*)=([\`\'\"]*)javascript:#iU"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#([a-z]*)=([\'\"]*)vbscript:#iU"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#(&lt;[^&gt;]+)style=([\`\'\"]*).*expression\([^&gt;]*&gt;#iU"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#(&lt;[^&gt;]+)style=([\`\'\"]*).*behaviour\([^&gt;]*&gt;#iU"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; elseif (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"#&lt;/*(applet|link|style|script|iframe|frame|frameset|html|body|title|div|p|form)[^&gt;]*&gt;#i"</span><span class="keyword">, </span><span class="default">$contents</span><span class="keyword">))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; else<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">?&gt;<br></span><br>Use<br><br><span class="default">&lt;?php<br></span><span class="comment">// If image contains a bad codes<br></span><span class="default">$image&nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">"simpleimage.png"</span><span class="keyword">;<br><br>if (</span><span class="default">is_clean_file</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">))<br>{<br>&nbsp; &nbsp; echo </span><span class="string">"Bad codes this is not image"</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$image</span><span class="keyword">);<br>}<br>else<br>{<br>&nbsp; &nbsp; echo </span><span class="string">"This is a real image."</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="111573">  
  <a class="name">
  <strong class="user"><em>yofilter-php at yahoo dot co dot uk</em></strong></a><div class="date" title="2013-03-05 01:48"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom111573">
<div class="phpcode"><code><span class="html">
There does not seem to be any mention of the PHP version of switches that can be used with regular expressions.
<br>
<br>preg_match_all('/regular expr/sim',$text).
<br>
<br>The s i m being the location for and available switches (I know about)
<br>The i is to ignore letter cases (this is commonly known - I think)
<br>The s tells the code NOT TO stop searching when it encounters \n (line break) - this is important with multi-line entries for example text from an editor that needs search.
<br>The m tells the code it is a multi-line entry, but importantly allows the use of ^ and $ to work when showing start and end.
<br>
<br>I am hoping this will save someone from the 4 hours of torture that I endured, trying to workout this issue.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86098">  
  <a class="name">
  <strong class="user"><em>Steve Todorov</em></strong></a><div class="date" title="2008-10-02 06:23"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86098">
<div class="phpcode"><code><span class="html">
While I was reading the preg_match documentation I didn't found how to match an IP..<br>Let's say you need to make a script that is working with ip/host and you want to show the hostname - not the IP.<br><br>Well this is the way to go:<br><br><span class="default">&lt;?php<br></span><span class="comment">/* This is an ip that is "GET"/"POST" from somewhere */<br></span><span class="default">$ip </span><span class="keyword">= </span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'ipOrHost'</span><span class="keyword">];<br><br>if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(\d+).(\d+).(\d+).(\d+)/'</span><span class="keyword">,</span><span class="default">$ip</span><span class="keyword">))<br>&nbsp; </span><span class="default">$host </span><span class="keyword">= </span><span class="default">gethostbyaddr</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">); <br>else<br>&nbsp; </span><span class="default">$host </span><span class="keyword">= </span><span class="default">gethostbyname</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">);<br><br>echo </span><span class="default">$host</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>This is a really simple script made for beginners !<br>If you'd like you could add restriction to the numbers. <br>The code above will accept all kind of numbers and we know that IP address could be MAX 255.255.255.255 and the example accepts to 999.999.999.999.<br><br>Wish you luck!<br><br>Best wishes,<br>Steve</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105185">  
  <a class="name">
  <strong class="user"><em>mohammad40g at gmail dot com</em></strong></a><div class="date" title="2011-08-01 09:23"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105185">
<div class="phpcode"><code><span class="html">
This sample is for checking persian character:<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; preg_match</span><span class="keyword">(</span><span class="string">"/[\x{0600}-\x{06FF}\x]{1,32}/u"</span><span class="keyword">, </span><span class="string">'محمد'</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112579">  
  <a class="name">
  <strong class="user"><em>hessemanj2100 at gmail dot com</em></strong></a><div class="date" title="2013-07-01 05:05"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112579">
<div class="phpcode"><code><span class="html">
The most accurate IPv4 function. It will not allow leading zeros and supports the full address range of 0.0.0.0 - 255.255.255.255<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">is_ipv4</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">)<br>{<br>&nbsp; &nbsp; </span><span class="comment">// The regular expression checks for any number between 0 and 255 beginning with a dot (repeated 3 times)<br>&nbsp; &nbsp; // followed by another number between 0 and 255 at the end. The equivalent to an IPv4 address.<br>&nbsp; &nbsp; </span><span class="keyword">return (bool) </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])'</span><span class="keyword">.<br>&nbsp; &nbsp; </span><span class="string">'\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]?|[0-9])$/'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93043">  
  <a class="name">
  <strong class="user"><em>ian_channing at hotmail dot com</em></strong></a><div class="date" title="2009-08-20 06:13"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93043">
<div class="phpcode"><code><span class="html">
This is a function that uses regular expressions to match against the various VAT formats required across the EU.
<br>
<br><span class="default">&lt;?php
<br></span><span class="comment">/**
<br> * @param integer $country Country name
<br> * @param integer $vat_number VAT number to test e.g. GB123 4567 89
<br> * @return integer -1 if country not included OR 1 if the VAT Num matches for the country OR 0 if no match
<br>*/
<br></span><span class="keyword">function </span><span class="default">checkVatNumber</span><span class="keyword">( </span><span class="default">$country</span><span class="keyword">, </span><span class="default">$vat_number </span><span class="keyword">) {
<br>&nbsp; &nbsp; switch(</span><span class="default">$country</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Austria'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(AT){0,1}U[0-9]{8}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Belgium'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(BE){0,1}[0]{0,1}[0-9]{9}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Bulgaria'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(BG){0,1}[0-9]{9,10}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Cyprus'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(CY){0,1}[0-9]{8}[A-Z]$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Czech Republic'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(CZ){0,1}[0-9]{8,10}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Denmark'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(DK){0,1}([0-9]{2}[\ ]{0,1}){3}[0-9]{2}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Estonia'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Germany'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Greece'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Portugal'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(EE|EL|DE|PT){0,1}[0-9]{9}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'France'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(FR){0,1}[0-9A-Z]{2}[\ ]{0,1}[0-9]{9}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Finland'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Hungary'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Luxembourg'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Malta'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Slovenia'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(FI|HU|LU|MT|SI){0,1}[0-9]{8}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Ireland'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(IE){0,1}[0-9][0-9A-Z\+\*][0-9]{5}[A-Z]$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Italy'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Latvia'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(IT|LV){0,1}[0-9]{11}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Lithuania'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(LT){0,1}([0-9]{9}|[0-9]{12})$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Netherlands'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(NL){0,1}[0-9]{9}B[0-9]{2}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Poland'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Slovakia'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(PL|SK){0,1}[0-9]{10}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Romania'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(RO){0,1}[0-9]{2,10}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Sweden'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(SE){0,1}[0-9]{12}$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'Spain'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(ES){0,1}([0-9A-Z][0-9]{7}[A-Z])|([A-Z][0-9]{7}[0-9A-Z])$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; case </span><span class="string">'United Kingdom'</span><span class="keyword">:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">= </span><span class="string">'/^(GB){0,1}([1-9][0-9]{2}[\ ]{0,1}[0-9]{4}[\ ]{0,1}[0-9]{2})|([1-9][0-9]{2}[\ ]{0,1}[0-9]{4}[\ ]{0,1}[0-9]{2}[\ ]{0,1}[0-9]{3})|((GD|HA)[0-9]{3})$/i'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; default:
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return -</span><span class="default">1</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="default">$vat_number</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106804">  
  <a class="name">
  <strong class="user"><em>Jonny 5</em></strong></a><div class="date" title="2011-12-07 09:55"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106804">
<div class="phpcode"><code><span class="html">
Workaround for getting the offset in UTF-8
<br>(in some cases mb_strpos might be an option as well)
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">)) {
<br>&nbsp; &nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">utf8_decode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">])));
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105594">  
  <a class="name">
  <strong class="user"><em>ayman2243 at gmail dot com</em></strong></a><div class="date" title="2011-08-30 04:55"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom105594">
<div class="phpcode"><code><span class="html">
highlight Search Words 
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">highlight</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">$split_subject </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$split_word </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; foreach (</span><span class="default">$split_subject </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$split_word </span><span class="keyword">as </span><span class="default">$k2 </span><span class="keyword">=&gt; </span><span class="default">$v2</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$v2 </span><span class="keyword">== </span><span class="default">$v</span><span class="keyword">){
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$split_subject</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="string">"&lt;span class='highlight'&gt;"</span><span class="keyword">.</span><span class="default">$v</span><span class="keyword">.</span><span class="string">"&lt;/span&gt;"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; return </span><span class="default">implode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">$split_subject</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="110144">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-09-24 08:02"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom110144">
<div class="phpcode"><code><span class="html">
Here is a function that decreases the numbers inside a string (useful to convert DOM object into simplexml object)<br><br>e.g.: decremente_chaine("somenode-&gt;anode[2]-&gt;achildnode[3]") will return "somenode-&gt;anode[1]-&gt;achildnode[2]"<br><br>the numbering of the nodes in simplexml starts from zero, but from 1 in DOM xpath objects<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">decremente_chaine</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">)<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//récupérer toutes les occurrences de nombres et leurs indices<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/[0-9]+/"</span><span class="keyword">,</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">,</span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//parcourir les occurrences <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$i</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$longueurnombre </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">((string)</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$taillechaine </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// découper la chaine en 3 morceaux<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$debut </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$milieu </span><span class="keyword">= (</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">])-</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$fin </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$chaine</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">]+</span><span class="default">$longueurnombre</span><span class="keyword">,</span><span class="default">$taillechaine</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// si c'est 10,100,1000 etc. on décale tout de 1 car le résultat comporte un chiffre de moins<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#[1][0]+$#'</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">][</span><span class="default">0</span><span class="keyword">]))<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;</span><span class="default">$j</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);</span><span class="default">$j</span><span class="keyword">++)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="default">$out</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] -</span><span class="default">1</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$chaine </span><span class="keyword">= </span><span class="default">$debut</span><span class="keyword">.</span><span class="default">$milieu</span><span class="keyword">.</span><span class="default">$fin</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$chaine</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="89052">  
  <a class="name">
  <strong class="user"><em>skds1433 at hotmail dot com</em></strong></a><div class="date" title="2009-02-19 06:41"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom89052">
<div class="phpcode"><code><span class="html">
here is a small tool for someone learning to use regular expressions. it's very basic, and allows you to try different patterns and combinations. I made it to help me, because I like to try different things, to get a good understanding of how things work.<br><br><span class="default">&lt;?php<br>$search </span><span class="keyword">= isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'search'</span><span class="keyword">])?</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'search'</span><span class="keyword">]:</span><span class="string">"//"</span><span class="keyword">;<br></span><span class="default">$match </span><span class="keyword">= isset(</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'match'</span><span class="keyword">])?</span><span class="default">$_POST</span><span class="keyword">[</span><span class="string">'match'</span><span class="keyword">]:</span><span class="string">"&lt;&gt;"</span><span class="keyword">;<br><br>echo </span><span class="string">'&lt;form method="post"&gt;'</span><span class="keyword">;<br>echo </span><span class="string">'s: &lt;input style="width:400px;" name="search" type="text" value="'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" /&gt;&lt;br /&gt;'</span><span class="keyword">;<br>echo </span><span class="string">'m:&lt;input style="width:400px;" name="match" type="text" value="'</span><span class="keyword">.</span><span class="default">$match</span><span class="keyword">.</span><span class="string">'" /&gt;&lt;input type="submit" value="go" /&gt;&lt;/form&gt;&lt;br /&gt;'</span><span class="keyword">;<br>if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">)){echo </span><span class="string">"matches"</span><span class="keyword">;}else{echo </span><span class="string">"no match"</span><span class="keyword">;}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101618">  
  <a class="name">
  <strong class="user"><em>sainnr at gmail dot com</em></strong></a><div class="date" title="2010-12-30 06:12"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101618">
<div class="phpcode"><code><span class="html">
This sample regexp may be useful if you are working with DB field types. <br><br>(?P&lt;type&gt;\w+)($|\((?P&lt;length&gt;(\d+|(.*)))\))<br><br>For example, if you are have a such type as "varchar(255)" or "text", the next fragment<br><br><span class="default">&lt;?php<br>&nbsp;&nbsp; $type </span><span class="keyword">= </span><span class="string">'varchar(255)'</span><span class="keyword">;&nbsp; </span><span class="comment">// type of field<br>&nbsp;&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?P&lt;type&gt;\w+)($|\((?P&lt;length&gt;(\d+|(.*)))\))/'</span><span class="keyword">, </span><span class="default">$type</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">);<br>&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$field</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>will output something like this:<br>Array ( [0] =&gt; varchar(255) [type] =&gt; varchar [1] =&gt; varchar [2] =&gt; (255) [length] =&gt; 255 [3] =&gt; 255 [4] =&gt; 255 )</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112446">  
  <a class="name">
  <strong class="user"><em>andre at koethur dot de</em></strong></a><div class="date" title="2013-06-17 08:49"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112446">
<div class="phpcode"><code><span class="html">
Be aware of bug https://bugs.php.net/bug.php?id=50887 when using sub patterns: Un-matched optional sub patterns at the end won't show up in $matches.<br><br>Here is a workaround: Assign a name to all subpatterns you are interested in, and merge $match afterwards with an constant array containing some reasonable default values:<br><br><span class="default">&lt;?php<br></span><span class="keyword">if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^(?P&lt;lang&gt;[^;*][^;]*){1}(?:;q=(?P&lt;qval&gt;[0-9.]+))?$/u'</span><span class="keyword">, </span><span class="string">'de'</span><span class="keyword">, </span><span class="default">$match</span><span class="keyword">))<br>{<br>&nbsp; </span><span class="default">$match </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="string">'lang' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">, </span><span class="string">'qval' </span><span class="keyword">=&gt; </span><span class="string">''</span><span class="keyword">), </span><span class="default">$match</span><span class="keyword">);<br>&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>This outputs:<br>Array<br>(<br>&nbsp; &nbsp; [lang] =&gt; de<br>&nbsp; &nbsp; [qval] =&gt; <br>&nbsp; &nbsp; [0] =&gt; de<br>&nbsp; &nbsp; [1] =&gt; de<br>)<br><br>Instead of:<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; de<br>&nbsp; &nbsp; [lang] =&gt; de<br>&nbsp; &nbsp; [1] =&gt; de<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108746">  
  <a class="name">
  <strong class="user"><em>jphansen at uga dot edu</em></strong></a><div class="date" title="2012-05-22 07:41"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108746">
<div class="phpcode"><code><span class="html">
Here's a regex to validate against the schema for common MySQL 
<br> identifiers:
<br>
<br><span class="default">&lt;?php
<br>$string </span><span class="keyword">= </span><span class="string">"</span><span class="default">$table_name</span><span class="string">"</span><span class="keyword">;
<br>if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[^\\d\\sa-zA-Z</span><span class="default">$_</span><span class="string">]/"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">))
<br>&nbsp; echo </span><span class="string">"Failed validation"</span><span class="keyword">;
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104582">  
  <a class="name">
  <strong class="user"><em>sun at drupal dot org</em></strong></a><div class="date" title="2011-06-23 05:56"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104582">
<div class="phpcode"><code><span class="html">
Basic test for invalid UTF-8 that can hi-jack IE:<br><br><span class="default">&lt;?php<br>$valid </span><span class="keyword">= (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^./us'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">) == </span><span class="default">1</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span>See <a rel="nofollow" target="_blank">http://api.drupal.org/api/drupal/includes--bootstrap.inc/function/drupal_validate_utf8/7</a> for details.<br><br>---<br><br>Test for valid UTF-8 and XML/XHTML character range compatibility:<br><br><span class="default">&lt;?php<br>$invalid </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'@[^\x9\xA\xD\x20-\x{D7FF}\x{E000}-\x{FFFD}\x{10000}-\x{10FFFF}]@u'</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">)<br></span><span class="default">?&gt;<br></span>Ref: <a rel="nofollow" target="_blank">http://www.w3.org/TR/2000/REC-xml-20001006#charsets</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="98310">  
  <a class="name">
  <strong class="user"><em>SoN9ne at gmail dot com</em></strong></a><div class="date" title="2010-06-08 10:10"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom98310">
<div class="phpcode"><code><span class="html">
I have been working on a email system that will automatically generate a text email from a given HTML email by using strip_tags(). <br>The only issue I ran into, for my needs, were that the anchors would not keep their links. <br>I search for a little while and could not find anything to strip the links from the tags so I generated my own little snippet. <br>I am posting it here in hopes that others may find it useful and for later reference.<br><br>A note to keep in mind:<br>I was primarily concerned with valid HTML so if attributes do no use ' or " to contain the values then this will need to be tweaked.<br>If you can edit this to work better, please let me know.<br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Replaces anchor tags with text<br> * - Will search string and replace all anchor tags with text (case insensitive)<br> * <br> * How it works:<br> * - Searches string for an anchor tag, checks to make sure it matches the criteria<br> *&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Anchor search criteria:<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - 1 - &lt;a (must have the start of the anchor tag )<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - 2 - Can have any number of spaces or other attributes before and after the href attribute<br> *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - 3 - Must close the anchor tag<br> * <br> * - Once the check has passed it will then replace the anchor tag with the string replacement<br> * - The string replacement can be customized<br> * <br> * Know issue:<br> * - This will not work for anchors that do not use a ' or " to contain the attributes. <br> *&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (i.e.- &lt;a href=http: //php.net&gt;PHP.net&lt;/a&gt; will not be replaced)<br> */<br></span><span class="keyword">function </span><span class="default">replaceAnchorsWithText</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">/**<br>&nbsp; &nbsp;&nbsp; * Had to modify $regex so it could post to the site... so I broke it into 6 parts.<br>&nbsp; &nbsp;&nbsp; */<br>&nbsp; &nbsp; </span><span class="default">$regex&nbsp; </span><span class="keyword">= </span><span class="string">'/(&lt;a\s*'</span><span class="keyword">; </span><span class="comment">// Start of anchor tag<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">'(.*?)\s*'</span><span class="keyword">; </span><span class="comment">// Any attributes or spaces that may or may not exist<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">'href=[\'"]+?\s*(?P&lt;link&gt;\S+)\s*[\'"]+?'</span><span class="keyword">; </span><span class="comment">// Grab the link<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">'\s*(.*?)\s*&gt;\s*'</span><span class="keyword">; </span><span class="comment">// Any attributes or spaces that may or may not exist before closing tag <br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">'(?P&lt;name&gt;\S+)'</span><span class="keyword">; </span><span class="comment">// Grab the name<br>&nbsp; &nbsp; </span><span class="default">$regex </span><span class="keyword">.= </span><span class="string">'\s*&lt;\/a&gt;)/i'</span><span class="keyword">; </span><span class="comment">// Any number of spaces between the closing anchor tag (case insensitive)<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// This is what will replace the link (modify to you liking)<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="string">"</span><span class="keyword">{</span><span class="default">$data</span><span class="keyword">[</span><span class="string">'name'</span><span class="keyword">]}</span><span class="string">(</span><span class="keyword">{</span><span class="default">$data</span><span class="keyword">[</span><span class="string">'link'</span><span class="keyword">]}</span><span class="string">)"</span><span class="keyword">;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="default">$regex</span><span class="keyword">, </span><span class="string">'replaceAnchorsWithText'</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br>}<br><br></span><span class="default">$input&nbsp; </span><span class="keyword">= </span><span class="string">'Test 1: &lt;a href="http: //php.net1"&gt;PHP.NET1&lt;/a&gt;.&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="default">$input </span><span class="keyword">.= </span><span class="string">'Test 2: &lt;A name="test" HREF=\'HTTP: //PHP.NET2\' target="_blank"&gt;PHP.NET2&lt;/A&gt;.&lt;BR /&gt;'</span><span class="keyword">;<br></span><span class="default">$input </span><span class="keyword">.= </span><span class="string">'Test 3: &lt;a hRef=http: //php.net3&gt;php.net3&lt;/a&gt;&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="default">$input </span><span class="keyword">.= </span><span class="string">'This last line had nothing to do with any of this'</span><span class="keyword">;<br><br>echo </span><span class="default">replaceAnchorsWithText</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">).</span><span class="string">'&lt;hr/&gt;'</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span>Will output:<br>Test 1: PHP.NET1(http: //php.net1).<br>Test 2: PHP.NET2(HTTP: //PHP.NET2).<br>Test 3: php.net3 (is still an anchor)<br>This last line had nothing to do with any of this<br><br>Posting to this site is painful...<br>Had to break up the regex and had to break the test links since it was being flagged as spam...</span>
</code></div>
  </div>
 </div>
  <div class="note" id="104127">  
  <a class="name">
  <strong class="user"><em>juanmadss at gmail dot com</em></strong></a><div class="date" title="2011-05-25 04:00"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom104127">
<div class="phpcode"><code><span class="html">
Testing the speed of preg_match against stripos doing insensitive case search in strings:<br><br><span class="default">&lt;?php<br>$string </span><span class="keyword">= </span><span class="string">"Hey, how are you? I'm a string."</span><span class="keyword">;<br><br></span><span class="comment">// PCRE<br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$bool </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/you/i'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$pcre_lasted </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">; </span><span class="comment">// 8.3078360557556<br><br>// Stripos, we believe in you<br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">10000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; </span><span class="default">$bool </span><span class="keyword">= </span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="string">'you'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">;<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br></span><span class="default">$stripos_lasted </span><span class="keyword">= </span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">; </span><span class="comment">// 6.0306038856506<br><br></span><span class="keyword">echo </span><span class="string">"Preg_match lasted: </span><span class="keyword">{</span><span class="default">$pcre_lasted</span><span class="keyword">}</span><span class="string">&lt;br /&gt;Stripos lasted: </span><span class="keyword">{</span><span class="default">$stripos_lasted</span><span class="keyword">}</span><span class="string">"</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>So unless you really need to test a string against a regular expression, always use strpos / stripos and other string functions to find characters and strings within other strings.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94010">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2009-10-12 02:24"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94010">
<div class="phpcode"><code><span class="html">
If your regular expression does not match with long input text when you think it should, you might have hit the PCRE backtrack default limit of 100000. See <a rel="nofollow" target="_blank">http://php.net/pcre.backtrack-limit.</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="96285">  
  <a class="name">
  <strong class="user"><em>Dr@ke</em></strong></a><div class="date" title="2010-02-18 07:58"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96285">
<div class="phpcode"><code><span class="html">
Hello,<br>There is a bug with somes new PCRE versions (like:7.9 2009-04-1),<br>In patterns:<br>\w+ !== [a-zA-Z0-9]+<br><br>But it's ok, if i replace \w+ by [a-z0-9]+ or [a-zA-Z0-9]+</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96067">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2010-02-06 08:00"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96067">
<div class="phpcode"><code><span class="html">
The regular expression for breaking-down a URI reference into its components:<br><br>&nbsp; &nbsp; &nbsp; ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?<br>&nbsp; &nbsp; &nbsp;&nbsp; 12&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp;&nbsp; 6&nbsp; 7&nbsp; &nbsp; &nbsp; &nbsp; 8 9<br><br>Source: ietf.org/rfc/rfc2396.txt</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93332">  
  <a class="name">
  <strong class="user"><em>luc _ santeramo  at t yahoo dot com</em></strong></a><div class="date" title="2009-09-03 07:46"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93332">
<div class="phpcode"><code><span class="html">
If you want to validate an email in one line, use filter_var() function !<br><a rel="nofollow" target="_blank">http://fr.php.net/manual/en/function.filter-var.php</a><br><br>easy use, as described in the document example :<br>var_dump(filter_var('bob@example.com', FILTER_VALIDATE_EMAIL));</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90660">  
  <a class="name">
  <strong class="user"><em>daniel dot chcouri at gmail dot com</em></strong></a><div class="date" title="2009-05-03 06:09"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90660">
<div class="phpcode"><code><span class="html">
Html tags delete using regular expression
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">removeHtmlTagsWithExceptions</span><span class="keyword">(</span><span class="default">$html</span><span class="keyword">, </span><span class="default">$exceptions </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">){
<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$exceptions</span><span class="keyword">) &amp;&amp; !empty(</span><span class="default">$exceptions</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$exceptions </span><span class="keyword">as </span><span class="default">$exception</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$openTagPattern&nbsp; </span><span class="keyword">= </span><span class="string">'/&lt;(' </span><span class="keyword">. </span><span class="default">$exception </span><span class="keyword">. </span><span class="string">')(\s.*?)?&gt;/msi'</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$closeTagPattern </span><span class="keyword">= </span><span class="string">'/&lt;\/(' </span><span class="keyword">. </span><span class="default">$exception </span><span class="keyword">. </span><span class="string">')&gt;/msi'</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span><span class="default">$openTagPattern</span><span class="keyword">, </span><span class="default">$closeTagPattern</span><span class="keyword">),
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span><span class="string">'||l|\1\2|r||'</span><span class="keyword">, </span><span class="string">'||l|/\1|r||'</span><span class="keyword">),
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$html
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/&lt;.*?&gt;/msi'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$exceptions</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'||l|'</span><span class="keyword">, </span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$html </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'|r||'</span><span class="keyword">, </span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="default">$html</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$html</span><span class="keyword">;
<br>}
<br>
<br></span><span class="comment">// example:
<br></span><span class="keyword">print </span><span class="default">removeHtmlTagsWithExceptions</span><span class="keyword">(&lt;&lt;&lt;EOF
<br></span><span class="string">&lt;h1&gt;Whatsup?!&lt;/h1&gt;
<br>Enjoy &lt;span style="text-color:blue;"&gt;that&lt;/span&gt; script&lt;br /&gt;
<br>&lt;br /&gt;
<br></span><span class="keyword">EOF
<br>, array(</span><span class="string">'br'</span><span class="keyword">));
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108209">  
  <a class="name">
  <strong class="user"><em>ulli dot luftpumpe at murkymind dot de</em></strong></a><div class="date" title="2012-04-07 10:32"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108209">
<div class="phpcode"><code><span class="html">
Matching a backslash character can be confusing, because double escaping is needed in the pattern: first for PHP, second for the regex engine<br><span class="default">&lt;?php<br></span><span class="comment">//match newline control character:<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\n/'</span><span class="keyword">,</span><span class="string">'\n'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">//pattern matches and is stored as control character 0x0A in the pattern string<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\n/'</span><span class="keyword">,</span><span class="string">'\n'</span><span class="keyword">); </span><span class="comment">//very same match, but is stored escaped as 0x5C,0x6E in the pattern string<br><br>//trying to match "\'" (2 characters) in a text file, '\\\'' as PHP string:<br></span><span class="default">$subject </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="string">'myfile.txt'</span><span class="keyword">);<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\'/'</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//DOESN'T MATCH!!! stored as 0x5C,0x27 (escaped apostrophe), this only matches apostrophe<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\\\'/'</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);&nbsp; </span><span class="comment">//matches, stored as 0x5C,0x5C,0x27 (escaped backslash and unescaped apostrophe)<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\\\\\/'</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">//also matches, stored as 0x5C,0x5C,0x5C,0x27 (escaped backslash and escaped apostrophe)<br><br>//matching "\n" (2 characters):<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\\n/'</span><span class="keyword">,</span><span class="string">'\\n'</span><span class="keyword">);<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\\\n/'</span><span class="keyword">,</span><span class="string">'\\n'</span><span class="keyword">); </span><span class="comment">//same match - 3 backslashes are interpreted as 2 in PHP, if the following character is not escapeable<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="87570">  
  <a class="name">
  <strong class="user"><em>Alex Zinchenko</em></strong></a><div class="date" title="2008-12-10 06:15"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom87570">
<div class="phpcode"><code><span class="html">
If you need to check whether string is a serialized representation of variable(sic!) you can use this :<br><br><span class="default">&lt;?php<br><br>$string </span><span class="keyword">= </span><span class="string">"a:0:{}"</span><span class="keyword">;<br>if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/(a|O|s|b)\x3a[0-9]*?<br>((\x3a((\x7b?(.+)\x7d)|(\x22(.+)\x22\x3b)))|(\x3b))/"</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">)) <br>{<br>echo </span><span class="string">"Serialized."</span><span class="keyword">;<br>}<br>else <br>{<br>echo </span><span class="string">"Not serialized."</span><span class="keyword">;<br>}<br><br></span><span class="default">?&gt;<br></span><br>But don't forget, string in serialized representation could be VERY big, <br>so match work can be slow, even with fast preg_* functions.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86525">  
  <a class="name">
  <strong class="user"><em>phil dot taylor at gmail dot com</em></strong></a><div class="date" title="2008-10-22 05:01"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86525">
<div class="phpcode"><code><span class="html">
If you need to check for .com.br and .com.au and .uk and all the other crazy domain endings i found the following expression works well if you want to validate an email address. Its quite generous in what it will allow
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; $email_address </span><span class="keyword">= </span><span class="string">"phil.taylor@a_domain.tv"</span><span class="keyword">;
<br>
<br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^[^@]*@[^@]*\.[^@]*$/"</span><span class="keyword">, </span><span class="default">$email_address</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="string">"E-mail address"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85697">  
  <a class="name">
  <strong class="user"><em>Ashus</em></strong></a><div class="date" title="2008-09-12 08:18"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85697">
<div class="phpcode"><code><span class="html">
If you need to match specific wildcards in IP address, you can use this regexp:<br><br><span class="default">&lt;?php<br><br>$ip </span><span class="keyword">= </span><span class="string">'10.1.66.22'</span><span class="keyword">;<br></span><span class="default">$cmp </span><span class="keyword">= </span><span class="string">'10.1.??.*'</span><span class="keyword">;<br><br></span><span class="default">$cnt </span><span class="keyword">= </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^'<br>&nbsp; &nbsp;&nbsp; </span><span class="keyword">.</span><span class="default">str_replace</span><span class="keyword">(<br>&nbsp; &nbsp;&nbsp; array(</span><span class="string">'\*'</span><span class="keyword">,</span><span class="string">'\?'</span><span class="keyword">),<br>&nbsp; &nbsp;&nbsp; array(</span><span class="string">'(.*?)'</span><span class="keyword">,</span><span class="string">'[0-9]'</span><span class="keyword">),<br>&nbsp; &nbsp;&nbsp; </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$cmp</span><span class="keyword">)).</span><span class="string">'$/'</span><span class="keyword">,<br>&nbsp; &nbsp;&nbsp; </span><span class="default">$ip</span><span class="keyword">);<br><br>echo </span><span class="default">$cnt</span><span class="keyword">;<br><br></span><span class="default">?&gt;<br></span><br>where '?' is exactly one digit and '*' is any number of any characters. $cmp mask can be provided wild by user, $cnt equals (int) 1 on match or 0.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105324">  
  <a class="name">
  <strong class="user"><em>itworkarounds at gmail dot com</em></strong></a><div class="date" title="2011-08-09 09:08"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105324">
<div class="phpcode"><code><span class="html">
You can use the following code to detect non-latin (Cyrilic, Arabic, Greek...) characters:
<br>
<br><span class="default">&lt;?php
<br>preg_match</span><span class="keyword">(</span><span class="string">"/^[a-zA-Z\p{Cyrillic}0-9\s\-]+$/u"</span><span class="keyword">, </span><span class="string">"ABC abc 1234 АБВ абв"</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107454">  
  <a class="name">
  <strong class="user"><em>Nimja</em></strong></a><div class="date" title="2012-02-10 11:12"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107454">
<div class="phpcode"><code><span class="html">
When using a 'bad words reject string' filter, preg_match is MUCH faster than strpos / stripos. Because in the other cases, you would need to do a foreach for each word. With efficient programming, the foreach is ONLY faster when the first word in the ban-list is found.<br><br>(for 12 words, 100,000 iterations, no word found)<br>stripos - Taken 1.4876 seconds.<br>strpos - Taken 1.4207 seconds.<br>preg_match - Taken 0.189 seconds.<br><br>Interesting fact:<br>With long words ('averylongwordtospitepreg'), the difference is only much less. Only about a 2/3rd of the time instead of 1/6th<br><br><span class="default">&lt;?php<br><br>$words </span><span class="keyword">= array(</span><span class="string">'word1'</span><span class="keyword">, </span><span class="string">'word2'</span><span class="keyword">, </span><span class="string">'word3'</span><span class="keyword">, </span><span class="string">'word4'</span><span class="keyword">, </span><span class="string">'word5'</span><span class="keyword">, </span><span class="string">'word6'</span><span class="keyword">, </span><span class="string">'word7'</span><span class="keyword">, </span><span class="string">'word8'</span><span class="keyword">, </span><span class="string">'word9'</span><span class="keyword">, </span><span class="string">'word10'</span><span class="keyword">, </span><span class="string">'word11'</span><span class="keyword">, </span><span class="string">'word12' </span><span class="keyword">);<br></span><span class="default">$teststring </span><span class="keyword">= </span><span class="string">'ThIs Is A tEsTsTrInG fOr TeStInG.'</span><span class="keyword">;<br></span><span class="default">$count </span><span class="keyword">= </span><span class="default">100000</span><span class="keyword">;<br></span><span class="default">$find </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br><br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">stripos</span><span class="keyword">(</span><span class="default">$teststring</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$find</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br>echo </span><span class="string">'stripos - Taken ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">) - </span><span class="default">$start</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">) . </span><span class="string">' seconds.' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$teststring</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$find</span><span class="keyword">++;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br>echo </span><span class="string">'strpos - Taken ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">) - </span><span class="default">$start</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">) . </span><span class="string">' seconds.' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br><br></span><span class="default">$start </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br></span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">'/'</span><span class="keyword">;<br></span><span class="default">$div </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br>foreach (</span><span class="default">$words </span><span class="keyword">as </span><span class="default">$word</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$pattern </span><span class="keyword">.= </span><span class="default">$div </span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$div </span><span class="keyword">= </span><span class="string">'|'</span><span class="keyword">;<br>}<br></span><span class="default">$pattern </span><span class="keyword">.= </span><span class="string">'/i'</span><span class="keyword">;<br></span><span class="comment">//Pattern could easily be done somewhere else if words are static.<br></span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; if (</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$teststring</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$find</span><span class="keyword">++;<br>&nbsp; &nbsp; }<br>}<br></span><span class="default">$end </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br>echo </span><span class="string">'preg_match - Taken ' </span><span class="keyword">. </span><span class="default">round</span><span class="keyword">(</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">) . </span><span class="string">' seconds.' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102088">  
  <a class="name">
  <strong class="user"><em>Frank</em></strong></a><div class="date" title="2011-01-26 12:12"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102088">
<div class="phpcode"><code><span class="html">
If someone is from a country that accepts decimal numbers in format 9.00 and 9,00 (point or comma), number validation would be like that:<br><span class="default">&lt;?php<br>$number_check </span><span class="keyword">= </span><span class="string">"9,99"</span><span class="keyword">;<br>if (</span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'/^[\-+]?[0-9]*\.*\,?[0-9]+$/'</span><span class="keyword">, </span><span class="default">$number_check</span><span class="keyword">)) {<br>&nbsp; &nbsp; return </span><span class="default">TRUE</span><span class="keyword">; <br>}<br></span><span class="default">?&gt;<br></span><br>However, if the number will be written in the database, most probably this comma needs to be replaced with a dot. <br>This can be done with use of str_replace, i.e :<br><span class="default">&lt;?php<br>$number_database </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"," </span><span class="keyword">, </span><span class="string">"." </span><span class="keyword">, </span><span class="default">$number_check</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97242">  
  <a class="name">
  <strong class="user"><em>teracci2002</em></strong></a><div class="date" title="2010-04-09 09:00"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97242">
<div class="phpcode"><code><span class="html">
When you use preg_match() for security purpose or huge data processing,<br>mayby you should make consideration for backtrack_limit and recursion_limit.<br><a rel="nofollow" target="_blank">http://www.php.net/manual/en/pcre.configuration.php</a><br><br>These limits may bring wrong matching result.<br>You can verify whether you hit these limits by checking preg_last_error().<br><a rel="nofollow" target="_blank">http://www.php.net/manual/en/function.preg-last-error.php</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="93185">  
  <a class="name">
  <strong class="user"><em>marcosc at tekar dot net</em></strong></a><div class="date" title="2009-08-27 09:31"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93185">
<div class="phpcode"><code><span class="html">
When using accented characters and "ñ" (áéíóúñ), preg_match does not work. It is a charset problem, use utf8_decode/decode to fix.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="90771">  
  <a class="name">
  <strong class="user"><em>matt</em></strong></a><div class="date" title="2009-05-08 01:07"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom90771">
<div class="phpcode"><code><span class="html">
To support large Unicode ranges (ie: [\x{E000}-\x{FFFD}] or \x{10FFFFF}) you must use the modifier '/u' at the end of your expression.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="103994">  
  <a class="name">
  <strong class="user"><em>mulllhausen</em></strong></a><div class="date" title="2011-05-16 01:57"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom103994">
<div class="phpcode"><code><span class="html">
i do a fair bit of html scraping in conjunction with curl. i always need to know if i have reached the right page or if the curl request failed. the main problem i have encountered is html tags having unexpected spaces or other characters (especially the &amp;nbsp; character sequence) between them. for example when requesting a page with a certain manner set of post or get variables the response might be<br><br>&lt;a href='blah'&gt;&lt;span&gt;data data data&lt;/span&gt;&lt;/a&gt;<br><br>but requesting the same page with different post/get variables might give the following result:<br><br>&lt;a href='blah'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;nbsp;&lt;span&gt;data data data&lt;/span&gt;<br>&lt;/a&gt;<br><br>to match both of these tag sequences with the same pattern i use the [\S\s]*? wildcard which basically means 'match anything at all...but not if you can help it'<br><br>so the pattern for the above sequence would be:<br><br><span class="default">&lt;?php<br><br>$page1 </span><span class="keyword">= </span><span class="string">"........&lt;a href='blah'&gt;&lt;span&gt;data data data&lt;/span&gt;&lt;/a&gt;........."</span><span class="keyword">;<br><br></span><span class="default">$page2 </span><span class="keyword">= </span><span class="string">"........&lt;a href='blah'&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &amp;nbsp;&lt;span&gt;data data data&lt;/span&gt;<br>&lt;/a&gt;<br>........"</span><span class="keyword">;<br><br></span><span class="default">$w </span><span class="keyword">= </span><span class="string">"[\s\S]*?"</span><span class="keyword">; </span><span class="comment">//ungreedy wildcard<br></span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">"/\&lt;a href='blah'\&gt;</span><span class="default">$w</span><span class="string">\&lt;span\&gt;data data data\&lt;\/span\&gt;</span><span class="default">$w</span><span class="string">\&lt;\/a\&gt;/"</span><span class="keyword">;<br><br>if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$page1</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) echo </span><span class="string">"got to page 1. match: ["</span><span class="keyword">.</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">"]\n"</span><span class="keyword">;<br>else echo </span><span class="string">"did not get to page 1\n"</span><span class="keyword">;<br><br>if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$page2</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">)) echo </span><span class="string">"got to page 2. match: ["</span><span class="keyword">.</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">"]\n"</span><span class="keyword">;<br>else echo </span><span class="string">"did not get to page 2\n"</span><span class="keyword">;<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115614">  
  <a class="name">
  <strong class="user"><em>dkr at dotnull dot de</em></strong></a><div class="date" title="2014-08-26 03:35"><strong>1 day ago</strong></div>
  <div class="text" id="Hcom115614">
<div class="phpcode"><code><span class="html">
I noted that PCRE_ANCHORED (the pattern modifier A) does work fine if using an offset. If you use the escape sequence \A or even the dash "^" in the regex, it does not work (even if in multiline mode)... <br><br><span class="default">&lt;?php<br>$text </span><span class="keyword">= </span><span class="string">'foo bar'</span><span class="keyword">;<br>print (int) </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^bar/'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">); </span><span class="comment">// prints 0<br></span><span class="keyword">print (int) </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/\Abar/'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">); </span><span class="comment">// prints 0<br></span><span class="keyword">print (int) </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/bar/A'</span><span class="keyword">,</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">); </span><span class="comment">// prints 1<br></span><span class="default">?&gt;<br></span><br>Hope this helps someone out there! :-)<br><br>Version: PHP 5.5.12</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115599">  
  <a class="name">
  <strong class="user"><em>Gilles A</em></strong></a><div class="date" title="2014-08-22 01:27"><strong>6 days ago</strong></div>
  <div class="text" id="Hcom115599">
<div class="phpcode"><code><span class="html">
Using named subpattern :<br><br>Since PCRE 7.0 ( PHP&nbsp; &gt;= 5.2.2) , named groups can be defined using<br> (?&lt;name&gt;) or (?'name') instead of (?P&lt;name&gt;)<br><br><span class="default">&lt;?php<br><br>$str </span><span class="keyword">= </span><span class="string">'foobar: 2008'</span><span class="keyword">;<br><br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?P&lt;name&gt;\w+): (?P&lt;digit&gt;\d+)/'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="comment">//Or<br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?\'name\'\w+): (?\'digit\'\d+)/'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="comment">//Or<br><br></span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/(?&lt;name&gt;\w+): (?&lt;digit&gt;\d+)/'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>//Result <br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt;foobar: 2008<br>&nbsp; &nbsp; [name] =&gt; foobar<br>&nbsp; &nbsp; [1] =&gt; foobar<br>&nbsp; &nbsp; [digit] =&gt; 2008<br>&nbsp; &nbsp; [2] =&gt; 2008<br>)<br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; foobar: 2008<br>&nbsp; &nbsp; [name] =&gt; foobar<br>&nbsp; &nbsp; [1] =&gt; foobar<br>&nbsp; &nbsp; [digit] =&gt; 2008<br>&nbsp; &nbsp; [2] =&gt; 2008<br>)<br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; foobar: 2008<br>&nbsp; &nbsp; [name] =&gt; foobar<br>&nbsp; &nbsp; [1] =&gt; foobar<br>&nbsp; &nbsp; [digit] =&gt; 2008<br>&nbsp; &nbsp; [2] =&gt; 2008<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112812">  
  <a class="name">
  <strong class="user"><em>Jeff Weiss</em></strong></a><div class="date" title="2013-07-25 02:18"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112812">
<div class="phpcode"><code><span class="html">
Example of validating an email address and breaking it into 3 parts ( local, domain name, domain suffix )<br><br>A case insensitive&nbsp; email is valid if:<br><br>1) local matches letters a..z or characters . - _ + <br>2) domain name matches letters a..z or characters - _<br>3) domain suffix matches letters a..z and is between 2 and 4 characters in length <br><br><span class="default">&lt;?php<br>preg_match</span><span class="keyword">(</span><span class="string">'/(^[a-zA-Z_.+-]+)@([a-zA-Z_-]+).([a-zA-Z]{2,4}$)/i'</span><span class="keyword">, </span><span class="string">"jeff@nowhere.com"</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br><br></span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$matches</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>outputs:<br><br>Array<br>(<br>&nbsp; &nbsp; [0] =&gt; jeff@nowhere.com<br>&nbsp; &nbsp; [1] =&gt; jeff<br>&nbsp; &nbsp; [2] =&gt; nowhere<br>&nbsp; &nbsp; [3] =&gt; com<br>)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="113888">  
  <a class="name">
  <strong class="user"><em>Iven Marquardt</em></strong></a><div class="date" title="2013-12-13 09:57"><strong>8 months ago</strong></div>
  <div class="text" id="Hcom113888">
<div class="phpcode"><code><span class="html">
if you want to match all printable ascii (0..127) expect some specific chars, try this:<br><br><span class="default">&lt;?php<br>$excluded </span><span class="keyword">= </span><span class="string">'\$a'</span><span class="keyword">;<br>echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'~[^' </span><span class="keyword">. </span><span class="default">$excluded </span><span class="keyword">. </span><span class="string">'[:^print:]]~'</span><span class="keyword">, </span><span class="string">''</span><span class="keyword">, </span><span class="string">'abc123ABC!?$%/€'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>result: a$€</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112770">  
  <a class="name">
  <strong class="user"><em>asdfasdasad34535 at iflow dot at</em></strong></a><div class="date" title="2013-07-21 09:07"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112770">
<div class="phpcode"><code><span class="html">
Attention! PREG_OFFSET_CAPTURE not UTF-8 aware when using u modifier<br>and it's not a but, it's a feature:<br>https://bugs.php.net/bug.php?id=37391<br><br>Possible workaround: Use mb_strpos to get the correct offset, instead of the flag.<br><br> UTF-8 support would be nice.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="112581">  
  <a class="name">
  <strong class="user"><em>hessemanj2100 at gmail dot com</em></strong></a><div class="date" title="2013-07-01 05:32"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom112581">
<div class="phpcode"><code><span class="html">
Just a note about my last post. The regex expression for the function I posted contains a question mark at the end. Technically this doesn't need to be there but it will work with or without it. Just remove it if you don't want it. Enjoy!</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107958">  
  <a class="name">
  <strong class="user"><em>aer0s</em></strong></a><div class="date" title="2012-03-16 09:15"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107958">
<div class="phpcode"><code><span class="html">
Simple function to return a sub-string following the preg convention. Kind of expensive, and some might say lazy but it has saved me time.<br><br># preg_substr($pattern,$subject,[$offset]) function<br># @author&nbsp;&nbsp; aer0s<br>#&nbsp; return a specific sub-string in a string using <br>#&nbsp;&nbsp; a regular expression <br># @param&nbsp;&nbsp; $pattern&nbsp;&nbsp; regular expression pattern to match<br># @param&nbsp;&nbsp; $subject&nbsp;&nbsp; string to search<br># @param&nbsp;&nbsp; [$offset]&nbsp;&nbsp; zero based match occurrence to return<br>#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br># [$offset] is 0 by default which returns the first occurrence,<br># if [$offset] is -1 it will return the last occurrence <br><br>function preg_substr($pattern,$subject,$offset=0){<br>&nbsp; &nbsp; preg_match_all($pattern,$subject,$matches,PREG_PATTERN_ORDER);<br>&nbsp; &nbsp; return $offset==-1?array_pop($matches[0]):$matches[0][$offset];<br>} <br><br>example: <br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $pattern = "/model(\s|-)[a-z0-9]/i";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $subject = "Is there something wrong with model 654, Model 732, and model 43xl or is Model aj45B the preferred choice?";<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo preg_substr($pattern,$subject);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo preg_substr($pattern,$subject,1);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo preg_substr($pattern,$subject,-1); <br><br>Returns something like:<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; model 654<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Model 732<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Model aj45B</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108121">  
  <a class="name">
  <strong class="user"><em>Validate PAN Number</em></strong></a><div class="date" title="2012-03-30 10:13"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108121">
<div class="phpcode"><code><span class="html">
Validate PAN Number.<br>[5 Alpha][4 Number][1 Alpha]<br>AAAAA1111A<br><br>function isValidPAN($num){<br>&nbsp; &nbsp; return preg_match("/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/", $num);<br>}</span>
</code></div>
  </div>
 </div>
  <div class="note" id="101575">  
  <a class="name">
  <strong class="user"><em>ian_channing at hotmail dot com</em></strong></a><div class="date" title="2010-12-27 01:55"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom101575">
<div class="phpcode"><code><span class="html">
When trying to check a file path that could be windows or unix it took me quite a few tries to get the escape characters right.<br><br>The Unix directory separator must be escaped once and the windows directory separator must be escaped twice.<br><br>This will match path/to/file and path\to\file.exe<br><br>preg_match('/^[a-z0-9_.\/\\\]*$/i', $file_string);</span>
</code></div>
  </div>
 </div>
  <div class="note" id="94678">  
  <a class="name">
  <strong class="user"><em>Stefan</em></strong></a><div class="date" title="2009-11-17 02:47"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom94678">
<div class="phpcode"><code><span class="html">
I spent a while replacing all my ereg() calls to preg_match(), since ereg() is now deprecated and will not be supported as of v 6.0.
<br>
<br>Just a warning regarding the conversion, the two functions behave very similarly, but not exactly alike. Obviously, you will need to delimit your pattern with '/' or '|' characters.
<br>
<br>The difference that stumped me was that preg_replace overwrites the $matches array regardless if a match was found. If no match was found, $matches is simply empty.
<br>
<br>ereg(), however, would leave $matches alone if a match was not found. In my code, I had repeated calls to ereg, and was populating $matches with each match. I was only interested in the last match. However, with preg_match, if the very last call to the function did not result in a match, the $matches array would be overwritten with a blank value.
<br>
<br>Here is an example code snippet to illustrate:
<br>
<br><span class="default">&lt;?php
<br>$test </span><span class="keyword">= array(</span><span class="string">'yes'</span><span class="keyword">,</span><span class="string">'no'</span><span class="keyword">,</span><span class="string">'yes'</span><span class="keyword">,</span><span class="string">'no'</span><span class="keyword">,</span><span class="string">'yes'</span><span class="keyword">,</span><span class="string">'no'</span><span class="keyword">);
<br>
<br>foreach (</span><span class="default">$test </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {
<br>&nbsp; </span><span class="default">ereg</span><span class="keyword">(</span><span class="string">"yes"</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$matches1</span><span class="keyword">);
<br>&nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"|yes|"</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$matches2</span><span class="keyword">);
<br>}
<br>&nbsp; print </span><span class="string">"ereg result: </span><span class="default">$matches1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string">&lt;br&gt;"</span><span class="keyword">;
<br>&nbsp; print </span><span class="string">"preg_match result: </span><span class="default">$matches2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]</span><span class="string">&lt;br&gt;"</span><span class="keyword">;
<br></span><span class="default">?&gt;
<br></span>
<br>The output is:
<br>ereg result: yes
<br>preg_match result: 
<br>
<br>($matches2[0] in this case is empty)
<br>
<br>I believe the preg_match behavior is cleaner. I just thought I would report this to hopefully save others some time.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85398">  
  <a class="name">
  <strong class="user"><em>wjaspers4[at]gmail[dot]com</em></strong></a><div class="date" title="2008-08-28 07:55"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom85398">
<div class="phpcode"><code><span class="html">
I found this rather useful for testing mutliple strings when developing a regex pattern.<br><span class="default">&lt;?php <br></span><span class="comment">/**<br> * Runs preg_match on an array of strings and returns a result set.<br> * @author wjaspers4[at]gmail[dot]com<br> * @param String $expr The expression to match against<br> * @param Array $batch The array of strings to test.<br> * @return Array<br> */<br></span><span class="keyword">function </span><span class="default">preg_match_batch</span><span class="keyword">( </span><span class="default">$expr</span><span class="keyword">, </span><span class="default">$batch</span><span class="keyword">=array() )<br>{<br></span><span class="comment">// create a placeholder for our results<br>&nbsp; &nbsp; </span><span class="default">$returnMe </span><span class="keyword">= array();<br><br></span><span class="comment">// for every string in our batch ...<br>&nbsp; &nbsp; </span><span class="keyword">foreach( </span><span class="default">$batch </span><span class="keyword">as </span><span class="default">$str </span><span class="keyword">)<br>&nbsp; &nbsp; {<br></span><span class="comment">// test it, and dump our findings into $found<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$expr</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$found</span><span class="keyword">);<br><br></span><span class="comment">// append our findings to the placeholder<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$returnMe</span><span class="keyword">[</span><span class="default">$str</span><span class="keyword">] = </span><span class="default">$found</span><span class="keyword">;<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$returnMe</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92793">  
  <a class="name">
  <strong class="user"><em>KOmaSHOOTER at gmx dot de</em></strong></a><div class="date" title="2009-08-09 06:12"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92793">
<div class="phpcode"><code><span class="html">
reading files from a dir without "." or ".."<br><span class="default">&lt;?php<br>$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="string">'content/pages/'</span><span class="keyword">);<br></span><span class="default">$pages </span><span class="keyword">= array();<br>while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) {<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$case</span><span class="keyword">=</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^[.]/"</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">,</span><span class="default">$out</span><span class="keyword">, </span><span class="default">PREG_OFFSET_CAPTURE</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; </span><span class="comment">//echo($case);<br>&nbsp; &nbsp; &nbsp; </span><span class="keyword">if(!</span><span class="default">$case</span><span class="keyword">){<br>&nbsp; &nbsp; &nbsp;&nbsp; echo(</span><span class="string">"</span><span class="default">$file</span><span class="string">&lt;br /&gt;"</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$pages</span><span class="keyword">,</span><span class="default">$file</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>}<br>echo(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$pages</span><span class="keyword">));<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="107111">  
  <a class="name">
  <strong class="user"><em>kevin</em></strong></a><div class="date" title="2012-01-08 06:11"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom107111">
<div class="phpcode"><code><span class="html">
here is a little function to get an associative array instead of the numeric one.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">preg_match_assoc</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$assoc</span><span class="keyword">, </span><span class="default">$flags </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$matches </span><span class="keyword">= array();<br>&nbsp; &nbsp; eval(</span><span class="string">'preg_match($pattern, $subject, $matches, $flags, $offset);'</span><span class="keyword">);<br>&nbsp; &nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br>&nbsp; &nbsp; foreach(</span><span class="default">$matches </span><span class="keyword">as </span><span class="default">$result</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$assoc</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]] = </span><span class="default">$result</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$n</span><span class="keyword">++;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; return </span><span class="default">$array</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>example of use<br><br><span class="default">&lt;?php<br><br>$assocs </span><span class="keyword">= array(<br>&nbsp; &nbsp; </span><span class="string">'all'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'a-1'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'i-1'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'a-2'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'ia-1'</span><span class="keyword">,<br>&nbsp; &nbsp; </span><span class="string">'ia-2'<br></span><span class="keyword">);<br><br></span><span class="default">$test </span><span class="keyword">= </span><span class="default">preg_match_assoc</span><span class="keyword">(</span><span class="string">'#([a-z]+)([0-9]+)([a-z]+)\-([a-z|0-9]+)\-([a-z|0-9]+)#'</span><span class="keyword">, </span><span class="string">'az45rt-df36qz-fg89ih'</span><span class="keyword">, </span><span class="default">$assocs</span><span class="keyword">);<br><br></span><span class="comment">// $test will contain :<br>//<br>// array<br>//&nbsp;&nbsp; 'all' =&gt; string 'az45rt-df36qz-fg89ih' (length=20)<br>//&nbsp;&nbsp; 'a-1' =&gt; string 'az' (length=2)<br>//&nbsp;&nbsp; 'i-1' =&gt; string '45' (length=2)<br>//&nbsp;&nbsp; 'a-2' =&gt; string 'rt' (length=2)<br>//&nbsp;&nbsp; 'ia-1' =&gt; string 'df36qz' (length=6)<br>//<br>// Instead of :<br>//<br>// array<br>//&nbsp;&nbsp; 0 =&gt; string 'az45rt-df36qz-fg89ih' (length=20)<br>//&nbsp;&nbsp; 1 =&gt; string 'az' (length=2)<br>//&nbsp;&nbsp; 2 =&gt; string '45' (length=2)<br>//&nbsp;&nbsp; 2 =&gt; string 'rt' (length=2)<br>//&nbsp;&nbsp; 4 =&gt; string 'df36qz' (length=6)<br>//&nbsp;&nbsp; 5 =&gt; string 'fg89ih' (length=6)<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93016">  
  <a class="name">
  <strong class="user"><em>Rob</em></strong></a><div class="date" title="2009-08-19 12:03"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom93016">
<div class="phpcode"><code><span class="html">
The following function works well for validating ip addresses
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">valid_ip</span><span class="keyword">(</span><span class="default">$ip</span><span class="keyword">) {
<br>&nbsp; &nbsp; return </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])" </span><span class="keyword">.
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"(\.([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])){3}$/"</span><span class="keyword">, </span><span class="default">$ip</span><span class="keyword">);
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="105542">  
  <a class="name">
  <strong class="user"><em>Khalid_Moharram at hotmail dot com</em></strong></a><div class="date" title="2011-08-25 01:36"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom105542">
<div class="phpcode"><code><span class="html">
Well for anyone looking for email validation, according to the RFC specifications (ONLY FOR ((ENGLISH ASCII)) E-Mails).
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">email_valid</span><span class="keyword">(</span><span class="default">$temp_email</span><span class="keyword">) {
<br></span><span class="comment">######## Three functions to HELP ########
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">function </span><span class="default">valid_dot_pos</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$email</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$str_len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$current_element </span><span class="keyword">= </span><span class="default">$email</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$current_element </span><span class="keyword">== </span><span class="string">"." </span><span class="keyword">&amp;&amp; (</span><span class="default">$email</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">] == </span><span class="string">"."</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {
<br>
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; function </span><span class="default">valid_local_part</span><span class="keyword">(</span><span class="default">$local_part</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[^a-zA-Z0-9-_@.!#$%&amp;'*\/+=?^`{\|}~]/"</span><span class="keyword">, </span><span class="default">$local_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; function </span><span class="default">valid_domain_part</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[^a-zA-Z0-9@#\[\].]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[@]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">) &amp;&amp; </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[#]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[\[]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">) || </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[\]]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dot_pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if((</span><span class="default">$dot_pos </span><span class="keyword">&lt; </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">, </span><span class="string">"]"</span><span class="keyword">)) || (</span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">, </span><span class="string">"]"</span><span class="keyword">) &lt; </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">, </span><span class="string">"["</span><span class="keyword">))) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[^0-9.]/"</span><span class="keyword">, </span><span class="default">$domain_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// trim() the entered E-Mail
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$str_trimmed </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">$temp_email</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// find the @ position
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$at_pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$str_trimmed</span><span class="keyword">, </span><span class="string">"@"</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// find the . position
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dot_pos </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$str_trimmed</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// this will cut the local part and return it in $local_part
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$local_part </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str_trimmed</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$at_pos</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// this will cut the domain part and return it in $domain_part
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$domain_part </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str_trimmed</span><span class="keyword">, </span><span class="default">$at_pos</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(!isset(</span><span class="default">$str_trimmed</span><span class="keyword">) || </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$str_trimmed</span><span class="keyword">) || empty(</span><span class="default">$str_trimmed</span><span class="keyword">) || </span><span class="default">$str_trimmed </span><span class="keyword">== </span><span class="string">""</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"You must insert something"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(!</span><span class="default">valid_local_part</span><span class="keyword">(</span><span class="default">$local_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(!</span><span class="default">valid_domain_part</span><span class="keyword">(</span><span class="default">$domain_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(</span><span class="default">$at_pos </span><span class="keyword">&gt; </span><span class="default">$dot_pos</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(!</span><span class="default">valid_local_part</span><span class="keyword">(</span><span class="default">$local_part</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif((</span><span class="default">$str_trimmed</span><span class="keyword">[</span><span class="default">$at_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">]) == </span><span class="string">"."</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; elseif(!</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[(@)]/"</span><span class="keyword">, </span><span class="default">$str_trimmed</span><span class="keyword">) || !</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">"/[(.)]/"</span><span class="keyword">, </span><span class="default">$str_trimmed</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">"Invalid E-Mail Address"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">email_status </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96144">  
  <a class="name">
  <strong class="user"><em>saberdream at live dot fr</em></strong></a><div class="date" title="2010-02-10 03:53"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96144">
<div class="phpcode"><code><span class="html">
I made a function to circumvent the problem of length of a string... This verifies that the link is an image.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">verifiesimage</span><span class="keyword">(</span><span class="default">$lien</span><span class="keyword">, </span><span class="default">$limite</span><span class="keyword">) {
<br>&nbsp; &nbsp; if( </span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'#^http:\/\/(.*)\.(gif|png|jpg)$#i'</span><span class="keyword">, </span><span class="default">$lien</span><span class="keyword">) &amp;&amp; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$lien</span><span class="keyword">) &lt; </span><span class="default">$limite </span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msg </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">; </span><span class="comment">// link ok
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; else
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$msg </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">; </span><span class="comment">// the link isn't image
<br>&nbsp; &nbsp; </span><span class="keyword">}
<br>&nbsp; &nbsp; return </span><span class="default">$msg</span><span class="keyword">; </span><span class="comment">// return TRUE or FALSE
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;
<br></span>
<br>Example :
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">if(</span><span class="default">verifierimage</span><span class="keyword">(</span><span class="default">$votrelien</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">) == </span><span class="default">TRUE</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="comment">// we display the content...
<br></span><span class="keyword">}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.preg-match.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 15:54:47 GMT -->


</body></html>