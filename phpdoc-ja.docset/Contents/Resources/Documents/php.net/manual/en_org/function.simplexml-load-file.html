<html><!-- Mirrored from php.net/manual/en/function.simplexml-load-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:56:26 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>simplexml_load_file</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="function.simplexml-load-file.html">
 <link rel="shorturl" href="http://php.net/simplexml-load-file">
 <link rel="alternate" href="http://php.net/simplexml-load-file" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="ref.simplexml.html">
 <link rel="prev" href="function.simplexml-import-dom.html">
 <link rel="next" href="function.simplexml-load-string.html">

 <link rel="alternate" href="function.simplexml-load-file.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/function.simplexml-load-file.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/function.simplexml-load-file.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/function.simplexml-load-file.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/function.simplexml-load-file.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/function.simplexml-load-file.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/function.simplexml-load-file.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/function.simplexml-load-file.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/function.simplexml-load-file.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/function.simplexml-load-file.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/function.simplexml-load-file.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.xml.html">XML Manipulation</a></li>      <li><a href="book.simplexml.html">SimpleXML</a></li>      <li><a href="ref.simplexml.html">SimpleXML Functions</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="function.simplexml-load-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">simplexml_load_file</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">simplexml_load_file</span> â€” <span class="dc-title">
   Interprets an XML file into an object
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.simplexml-load-file-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> <span class="methodname"><strong>simplexml_load_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$class_name</code><span class="initializer"> = "SimpleXMLElement"</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$options</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code><span class="initializer"> = ""</span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$is_prefix</code><span class="initializer"> = false</span></span>
  ]]]] )</div>

  <p class="para rdfs-comment">
   Convert the well-formed XML document in the given file to an object.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.simplexml-load-file-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">filename</code></dt>

     <dd>

      <p class="para">
       Path to the XML file
      </p>
      <blockquote class="note"><p><strong class="note">Note</strong>: 
       </p><p class="para">
        Libxml 2 unescapes the URI, so if you want to pass e.g.
        <em>b&amp;c</em> as the URI parameter <em>a</em>,
        you have to call
        <em>simplexml_load_file(rawurlencode('http://example.com/?a=' .
        urlencode('b&amp;c')))</em>. Since PHP 5.1.0 you don't need to do
        this because PHP will do it for you.
       </p>
      <p></p></blockquote>
     </dd>

    
    
     <dt>
<code class="parameter">class_name</code></dt>

     <dd>

      <p class="para">
       You may use this optional parameter so that
       <span class="function"><strong>simplexml_load_file()</strong></span> will return an object of 
       the specified class. That class should extend the 
       <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> class.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">options</code></dt>

     <dd>

      <p class="para">
       Since PHP 5.1.0 and Libxml 2.6.0, you may also use the
       <code class="parameter">options</code> parameter to specify <a href="libxml.constants.html" class="link">additional Libxml parameters</a>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">ns</code></dt>

     <dd>

      <p class="para">
       Namespace prefix or URI.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">is_prefix</code></dt>

     <dd>

      <p class="para">
       <strong><code>TRUE</code></strong> if <code class="parameter">ns</code> is a prefix, <strong><code>FALSE</code></strong> if it's a URI;
       defaults to <strong><code>FALSE</code></strong>.
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.simplexml-load-file-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an <span class="type"><a href="language.types.object.html" class="type object">object</a></span> of class <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> with
   properties containing the data held within the XML document, or <strong><code>FALSE</code></strong> on failure.
  </p>
 </div>

 
 <div class="refsect1 errors" id="refsect1-function.simplexml-load-file-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   Produces an <strong><code>E_WARNING</code></strong> error message for each error
   found in the XML data.
  </p>
  <div class="tip"><strong class="tip">Tip</strong>
   <p class="para">
    Use <span class="function"><a href="function.libxml-use-internal-errors.html" class="function">libxml_use_internal_errors()</a></span> to suppress all XML
    errors, and <span class="function"><a href="function.libxml-get-errors.html" class="function">libxml_get_errors()</a></span> to iterate over them
    afterwards.
   </p>
  </div>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.simplexml-load-file-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   </p><div class="example" id="example-5608">
    <p><strong>Example #1 Interpret an XML document</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br></span><span style="color: #FF8000">//&nbsp;The&nbsp;file&nbsp;test.xml&nbsp;contains&nbsp;an&nbsp;XML&nbsp;document&nbsp;with&nbsp;a&nbsp;root&nbsp;element<br>//&nbsp;and&nbsp;at&nbsp;least&nbsp;an&nbsp;element&nbsp;/[root]/title.<br><br></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">simplexml_load_file</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">);<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">);<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #DD0000">'Failed&nbsp;to&nbsp;open&nbsp;test.xml.'</span><span style="color: #007700">);<br>}<br></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     This script will display, on success:
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>SimpleXMLElement Object
(
  [title] =&gt; Example Title
  ...
)
</pre></div>
    </div>
    <div class="example-contents"><p>
     At this point, you can go about using <em>$xml-&gt;title</em>
     and any other elements.
    </p></div>
   </div>
  <p></p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.simplexml-load-file-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   </p><ul class="simplelist">
    <li class="member"><span class="function"><a href="function.simplexml-load-string.html" class="function" rel="rdfs-seeAlso">simplexml_load_string()</a> - Interprets a string of XML into an object</span></li>
    <li class="member"><span class="methodname"><a href="simplexmlelement.construct.html" class="methodname" rel="rdfs-seeAlso">SimpleXMLElement::__construct()</a> - Creates a new SimpleXMLElement object</span></li>
    <li class="member"><a href="simplexml.examples-errors.html" class="xref">Dealing with XML errors</a></li>
    <li class="member"><span class="function"><a href="function.libxml-use-internal-errors.html" class="function" rel="rdfs-seeAlso">libxml_use_internal_errors()</a> - Disable libxml errors and allow user to fetch error information as needed</span></li>
    <li class="member"><a href="simplexml.examples-basic.html" class="xref">Basic SimpleXML usage</a></li>
   </ul>
  <p></p>
 </div>

</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="73367">  
  <a class="name">
  <strong class="user"><em>wouter at code-b dot nl</em></strong></a><div class="date" title="2007-02-20 02:08"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom73367">
<div class="phpcode"><code><span class="html">
To correctly extract a value from a CDATA just make sure you cast the SimpleXML Element to a string value by using the cast operator:
<br>
<br><span class="default">&lt;?php
<br>$xml </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<br>&lt;rss&gt;
<br>&nbsp; &nbsp; &lt;channel&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;item&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;title&gt;&lt;![CDATA[Tom &amp; Jerry]]&gt;&lt;/title&gt;
<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/item&gt;
<br>&nbsp; &nbsp; &lt;/channel&gt;
<br>&lt;/rss&gt;'</span><span class="keyword">;
<br>
<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br>
<br></span><span class="comment">// echo does the casting for you
<br></span><span class="keyword">echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">;
<br>
<br></span><span class="comment">// but vardump (or print_r) not!
<br></span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);
<br>
<br></span><span class="comment">// so cast the SimpleXML Element to 'string' solve this issue
<br></span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);
<br></span><span class="default">?&gt;
<br></span>
<br>Above will output:
<br>
<br>Tom &amp; Jerry
<br>
<br>object(SimpleXMLElement)#4 (0) {}
<br>
<br>string(11) "Tom &amp; Jerry"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="62781">  
  <a class="name">
  <strong class="user"><em>fdouteaud at gmail dot com</em></strong></a><div class="date" title="2006-03-09 05:21"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom62781">
<div class="phpcode"><code><span class="html">
Be careful if you are using simplexml data directly to feed your MySQL database using MYSQLi and bind parameters. <br><br>The data coming from simplexml are Objects and the bind parameters functions of MySQLi do NOT like that! (it causes some memory leak and can crash Apache/PHP)<br><br>In order to do this properly you MUST cast your values to the right type (string, integer...) before passing them to the binding methods of MySQLi.<br>I did not find that in the documentation and it caused me a lot of headache.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109795">  
  <a class="name">
  <strong class="user"><em>ricardo at ricardomartins dot info</em></strong></a><div class="date" title="2012-08-21 05:49"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom109795">
<div class="phpcode"><code><span class="html">
Sometimes we have xml's with hyphens nodes, like<br><br>&lt;my_xml&gt;<br> &lt;some-node&gt;value&lt;/some-node&gt;<br>&lt;/my_xml&gt;<br><br>You'll need to use<br><span class="default">&lt;?php<br>$simpleXmlObj</span><span class="keyword">-&gt;{</span><span class="string">'some-node'</span><span class="keyword">}<br></span><span class="default">?&gt;<br></span><br>instead of <br><span class="default">&lt;?php<br>$simpleXmlObj</span><span class="keyword">-&gt;</span><span class="default">some</span><span class="keyword">-</span><span class="default">node</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="82067">  
  <a class="name">
  <strong class="user"><em>l [DOT] anzinger [AT] gmail [DOT] com</em></strong></a><div class="date" title="2008-03-26 09:03"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom82067">
<div class="phpcode"><code><span class="html">
If you don't want that the CDATA values get escaped, just load the XML with LIBXML_NOCDATA as an 3rd argument.
<br>
<br>Note: A PHP version &gt;= 5.1.0 is required for this to work.
<br>
<br>Example: 
<br>
<br><span class="default">&lt;?php simplexml_load_file</span><span class="keyword">(</span><span class="string">'xmldatei.xml'</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">LIBXML_NOCDATA</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102974">  
  <a class="name">
  <strong class="user"><em>sean at aliencreations dot com</em></strong></a><div class="date" title="2011-03-17 10:59"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102974">
<div class="phpcode"><code><span class="html">
If you find that you are receiving 500 errors with simplexml_load_file() but you can access the xml/rss feed manually through a browser, your script is probably being blocked by a user agent sniffer.<br><br>Add this code before your xml call to remedy this issue<br><br><span class="default">&lt;?php<br><br>ini_set</span><span class="keyword">(</span><span class="string">"user_agent"</span><span class="keyword">,</span><span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"</span><span class="keyword">);<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"max_execution_time"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br></span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"memory_limit"</span><span class="keyword">, </span><span class="string">"10000M"</span><span class="keyword">);<br><br></span><span class="default">$rss </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$feed_url</span><span class="keyword">);<br><br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="85484">  
  <a class="name">
  <strong class="user"><em>mario</em></strong></a><div class="date" title="2008-09-02 02:08"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom85484">
<div class="phpcode"><code><span class="html">
If you want CDATA in your object you should use LIBXML_NOCDATA
<br>
<br><span class="default">&lt;?php
<br>$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file_xml</span><span class="keyword">, </span><span class="string">'SimpleXMLElement'</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="115630">  
  <a class="name">
  <strong class="user"><em>nirav dot vyas at freemindtech dot in</em></strong></a><div class="date" title="2014-08-28 05:51"><strong>9 hours ago</strong></div>
  <div class="text" id="Hcom115630">
<div class="phpcode"><code><span class="html">
Hi I am new to php, just started to work on it last week and I am already feeling good coding it :). So I have a issue for which I need help.. I am using simplexml_load_file, and it works well but sometimes what happens is the downloaded file is not at all XML and I get list of errors displaying on browser, what I want is to check if the file is not XML I should skip for the next feed. <br><br>I didnt find try catch help ful or may be I am doing it in wrong way. Can someone please help.<br><br>&nbsp; $myFilePath = __DIR__ . '/' . "../newsfeeds/error2.xml"; <br>&nbsp; &nbsp; $data = simplexml_load_file($myFilePath);<br><br>I am getting error on the lower line.<br><br>THanks<br>Nirav</span>
</code></div>
  </div>
 </div>
  <div class="note" id="109935">  
  <a class="name">
  <strong class="user"><em>kannan at 99deals dot in</em></strong></a><div class="date" title="2012-09-04 06:27"><strong>1 year ago</strong></div>
  <div class="text" id="Hcom109935">
<div class="phpcode"><code><span class="html">
If you have some nodes which are having special characters, it would not load properly<br><br>for an instance see the nodes below<br>&lt;node:number&gt;1538-7445&lt;/node:number&gt;<br>&lt;node:coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node:coverDisplayDate&gt;<br><br>either you have to change the : to other special characters like '-' in order to convert it properly<br><br>Correct Node<br>&lt;node-number&gt;1538-7445&lt;/node-number&gt;<br>&lt;node-coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node-coverDisplayDate&gt;<br><br>I have wasted my precious time while debugging this. Please aware about this. ?</span>
</code></div>
  </div>
 </div>
  <div class="note" id="102309">  
  <a class="name">
  <strong class="user"><em>Nanuit at ossi dot at</em></strong></a><div class="date" title="2011-02-08 01:51"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom102309">
<div class="phpcode"><code><span class="html">
A little function very helpfull in using simplexml_load_file behind a proxy
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">getXMLfromURL</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$Proxy </span><span class="keyword">= </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">"HTTP_PROXY"</span><span class="keyword">);
<br>
<br>&nbsp; &nbsp; &nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Proxy</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r_default_context </span><span class="keyword">= </span><span class="default">stream_context_get_default </span><span class="keyword">( array
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="string">'http' </span><span class="keyword">=&gt; array(
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'proxy' </span><span class="keyword">=&gt; </span><span class="default">$Proxy</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'request_fulluri' </span><span class="keyword">=&gt; </span><span class="default">True</span><span class="keyword">,
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ),
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">libxml_set_streams_context</span><span class="keyword">(</span><span class="default">$r_default_context</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$daten </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; return (</span><span class="default">$daten</span><span class="keyword">);
<br>&nbsp; &nbsp; }
<br></span><span class="default">?&gt;
<br></span>
<br>where HTTP_PROXY is set to e.g.: tcp://proxy:8080</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100526">  
  <a class="name">
  <strong class="user"><em>raduispas at gmail dot com</em></strong></a><div class="date" title="2010-10-21 06:12"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100526">
<div class="phpcode"><code><span class="html">
if you want to check when this function fails,make sure to compare the return value with ===&nbsp; instead of == :
<br>
<br><span class="default">&lt;?php
<br>$url </span><span class="keyword">= </span><span class="string">'<a rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">;
<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simpleXML_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"SimpleXMLElement"</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);
<br>if(</span><span class="default">$xml </span><span class="keyword">===&nbsp; </span><span class="default">FALSE</span><span class="keyword">)
<br>{
<br>&nbsp;&nbsp; </span><span class="comment">//deal with error
<br></span><span class="keyword">}
<br>else { </span><span class="comment">//do stuff } 
<br></span><span class="default">?&gt;
<br></span>
<br>Otherwise you may end up with FALSE all the time even if the document is ok. Hope this helps someone ;)</span>
</code></div>
  </div>
 </div>
  <div class="note" id="97077">  
  <a class="name">
  <strong class="user"><em>jamie at splooshmedia dot co dot uk</em></strong></a><div class="date" title="2010-03-31 06:17"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom97077">
<div class="phpcode"><code><span class="html">
A wrapper around simplexml_load_file to circumvent nasty error messages when the xml server times out or gives a 500 error etc.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">loadXML2</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">) {
<br>
<br>&nbsp; &nbsp; </span><span class="comment">/*
<br>&nbsp; &nbsp; &nbsp; &nbsp; Usage:
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; $xml = loadXML2("127.0.0.1", "/path/to/xml/server.php?code=do_something");
<br>&nbsp; &nbsp; &nbsp; &nbsp; if($xml) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // xml doc loaded
<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // failed. show friendly error message.
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; */
<br>
<br>&nbsp; &nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">);
<br>&nbsp; &nbsp; if(</span><span class="default">$fp</span><span class="keyword">) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// make request
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">"GET </span><span class="default">$path</span><span class="string"> HTTP/1.1\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Host: </span><span class="default">$domain</span><span class="string">\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n\r\n"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// get response
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resp </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$resp </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// check status is 200
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$status_regex </span><span class="keyword">= </span><span class="string">"/HTTP\/1\.\d\s(\d+)/"</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$status_regex</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">) &amp;&amp; </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="default">200</span><span class="keyword">) {&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// load xml as object
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r\n\r\n"</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">);&nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; }
<br>&nbsp; &nbsp; }
<br>&nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="96764">  
  <a class="name">
  <strong class="user"><em>Smokey</em></strong></a><div class="date" title="2010-03-14 10:16"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom96764">
<div class="phpcode"><code><span class="html">
for nested and same name values i'v made up this little bit for getting and displaying multiable values from google's geocode when a exact match is not found it returns all close matches in the following format(this is an abriged version of there output)<br><br>&lt;Response&gt;<br>&nbsp; &lt;Placemark id="1"&gt;<br>&nbsp; &nbsp; &lt;address&gt; New York 24, NY, USA&lt;/address&gt;<br>&nbsp; &nbsp; &lt;AddressDetails&gt;<br>&nbsp; &nbsp; &nbsp; ..................<br>&nbsp; &nbsp; &lt;/AddressDetails&gt;<br>&nbsp; &nbsp; &lt;Point&gt;<br>&nbsp; &nbsp; &nbsp; &lt;coordinates&gt;-73.5850086,40.7207442,0&lt;/coordinates&gt;<br>&nbsp; &nbsp; &lt;/Point&gt;<br>&nbsp; &lt;/Placemark&gt;<br>&nbsp; &lt;Placemark id="2"&gt;<br>&nbsp; &nbsp; &lt;address&gt;New York 27, NY, USA&lt;/address&gt;<br>&nbsp; &nbsp; &lt;AddressDetails&gt;<br>&nbsp; &nbsp; &nbsp; ...................<br>&nbsp; &nbsp; &lt;/AddressDetails&gt;<br>&nbsp; &nbsp; &lt;Point&gt;<br>&nbsp; &nbsp; &nbsp; &lt;coordinates&gt;-72.8987835,40.8003588,0&lt;/coordinates&gt;<br>&nbsp; &nbsp; &lt;/Point&gt;<br>&nbsp; &lt;/Placemark&gt;<br>&nbsp; &lt;Placemark id="3"&gt;<br>&nbsp; &nbsp; &lt;address&gt;Cedar Place School, 20 Cedar Pl, Yonkers, NY 10705, USA&lt;/address&gt;<br>&nbsp; &nbsp; &lt;AddressDetails&gt;<br>&nbsp; &nbsp; &nbsp; ..................<br>&nbsp; &nbsp; &lt;/AddressDetails&gt;<br>&nbsp; &nbsp; &lt;Point&gt;<br>&nbsp; &nbsp; &nbsp; &lt;coordinates&gt;-73.8966320,40.9256520,0&lt;/coordinates&gt;<br>&nbsp; &nbsp; &lt;/Point&gt;<br>&nbsp; &lt;/Placemark&gt;<br>&lt;/Response&gt;<br><br><span class="default">&lt;?php<br></span><span class="comment">// get and breakdown the results then store them in $var's<br></span><span class="default">$Address </span><span class="keyword">= </span><span class="string">"99999 parkplace, new york, NY"</span><span class="keyword">;<br></span><span class="default">$urladdress </span><span class="keyword">= </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">);<br></span><span class="default">$Base_url </span><span class="keyword">= </span><span class="string">"<a rel="nofollow" target="_blank">http://maps.google.com/maps/geo?q=</a>"</span><span class="keyword">;<br></span><span class="default">$urlParts </span><span class="keyword">= </span><span class="string">"&amp;output=xml"</span><span class="keyword">;<br></span><span class="default">$urlrequest </span><span class="keyword">= </span><span class="default">$Base_url </span><span class="keyword">. </span><span class="default">$urladdress </span><span class="keyword">. </span><span class="default">$urlParts</span><span class="keyword">;<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$urlrequest</span><span class="keyword">);<br></span><span class="default">$num </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br>foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Response</span><span class="keyword">-&gt;</span><span class="default">Placemark </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){ <br>&nbsp; &nbsp; </span><span class="default">$num</span><span class="keyword">++;<br>&nbsp; &nbsp; </span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">address</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">Point</span><span class="keyword">-&gt;</span><span class="default">coordinates</span><span class="keyword">;<br>} <br><br></span><span class="comment">// a simple display for the results <br></span><span class="keyword">echo </span><span class="string">"Found "</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">,</span><span class="string">" Possable Geo Data Sets &lt;br&gt;"</span><span class="keyword">;<br></span><span class="default">$CountNumResults </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br>for ( ; </span><span class="default">$num </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$num</span><span class="keyword">--){<br>&nbsp; &nbsp; </span><span class="default">$CountNumResults</span><span class="keyword">++;<br>&nbsp; &nbsp; echo </span><span class="default">$countnum</span><span class="keyword">,</span><span class="string">"&lt;br&gt; Address = "</span><span class="keyword">,</span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt; Coordinates = "</span><span class="keyword">,</span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br>}<br>echo </span><span class="string">"END"</span><span class="keyword">;<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="92969">  
  <a class="name">
  <strong class="user"><em>neil art neilanddeb dort com</em></strong></a><div class="date" title="2009-08-17 06:00"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom92969">
<div class="phpcode"><code><span class="html">
Because the encoding of my XML file is UTF-8 and the <br>encoding of my web page is iso-8859-1 I was getting strange characters such as Ã¢â‚¬â„¢ instead of a right single quote.<br><br>The solution to this turned out to be hard to find, but really easy to implement.<br><br><a rel="nofollow" target="_blank">http://uk3.php.net/manual/en/function.iconv.php</a><br><br>Using the iconv() function you can convert from one encodign to another, the TRANSLIT option seems to work best for what I needed.&nbsp; Here's my example:<br><br><span class="default">&lt;?php<br></span><span class="comment">// convert string from utf-8 to iso8859-1<br></span><span class="default">$horoscope </span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">( </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"ISO-8859-1//TRANSLIT"</span><span class="keyword">, </span><span class="default">$horoscope </span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>I found the solution on this page...<br><a rel="nofollow" target="_blank">http://tinyurl.com/lm39xc</a><br>Hope this helps</span>
</code></div>
  </div>
 </div>
  <div class="note" id="86471">  
  <a class="name">
  <strong class="user"><em>cryonyx at cerebrate dot ru</em></strong></a><div class="date" title="2008-10-21 03:34"><strong>5 years ago</strong></div>
  <div class="text" id="Hcom86471">
<div class="phpcode"><code><span class="html">
In case you have a XML file with a series of equally named elements on one level simplexml incorrectly processes them and doesn't allow to walk through the array using foreach(). As far as I'm concerned, it is the problem caused by PHP xml_parser (see: <a rel="nofollow" target="_blank">http://ru2.php.net/manual/ru/function.xml-parser-create.php#53188</a>).
<br>
<br>To avoid this, just use count() and walk through the array using for().
<br>
<br>Example:
<br>
<br>&lt;params&gt;
<br>&nbsp; &lt;param&gt;
<br>&nbsp; &nbsp; &lt;name&gt;version.shell&lt;/name&gt;
<br>&nbsp; &nbsp; &lt;value&gt;1.0&lt;/value&gt;
<br>&nbsp; &lt;/param&gt;
<br>&nbsp; &lt;param&gt;
<br>&nbsp; &nbsp; &nbsp; &lt;name&gt;version.core&lt;/name&gt;
<br>&nbsp; &nbsp; &nbsp; &lt;value&gt;1.0&lt;/value&gt;
<br>&nbsp; &lt;/param&gt;
<br>&nbsp; &lt;param&gt;
<br>&nbsp; &nbsp; &nbsp; &lt;name&gt;file.lang&lt;/name&gt;
<br>&nbsp; &nbsp; &nbsp; &lt;value&gt;vc.lang&lt;/value&gt;
<br>&nbsp; &lt;/param&gt;
<br>&nbsp; ...
<br>&lt;/params&gt;
<br>
<br><span class="default">&lt;?php
<br>$filename </span><span class="keyword">= </span><span class="string">'...'</span><span class="keyword">;
<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);
<br></span><span class="default">$p_cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">);
<br>for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$p_cnt</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {
<br>&nbsp; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];
<br>&nbsp; ...;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="74192">  
  <a class="name">
  <strong class="user"><em>php at werner dash ott dot de</em></strong></a><div class="date" title="2007-03-29 01:13"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom74192">
<div class="phpcode"><code><span class="html">
Making SimpleXMLElement objects session save.
<br>
<br>Besides the effect of not surviving sessions, the SimpleXMLElement object may even crash the session_start() function when trying to re-enter the session!
<br>
<br>To come up with a solution for this, I used a pattern as follows. The core idea is to transform the SimpleXMLElement between session calls to and from a string representation which of course is session save.
<br>
<br><span class="default">&lt;?php
<br>&nbsp; </span><span class="comment">//
<br>&nbsp; // session save handling of SimpleXMLElement objects
<br>&nbsp; // (applies to/ tested with PHP 5.1.5 and PHP 5.2.1)
<br>&nbsp; // The myClass pattern allows for conveniently accessing
<br>&nbsp; // XML structures while being session save
<br>&nbsp; //
<br>&nbsp; </span><span class="keyword">class </span><span class="default">myClass
<br>&nbsp; </span><span class="keyword">{
<br>&nbsp; &nbsp; private </span><span class="default">$o_XMLconfig </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;
<br>&nbsp; &nbsp; private </span><span class="default">$s_XMLconfig </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">)
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br>&nbsp; &nbsp; } </span><span class="comment">// __construct()
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__destruct</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();
<br>&nbsp; &nbsp; &nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">); </span><span class="comment">// this object would otherwise crash 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // the subsequent call of 
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // session_start()!
<br>&nbsp; &nbsp; </span><span class="keyword">} </span><span class="comment">// __destruct()
<br>&nbsp; &nbsp; 
<br>&nbsp; &nbsp; </span><span class="keyword">public function </span><span class="default">__wakeup</span><span class="keyword">()
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig</span><span class="keyword">);
<br>&nbsp; &nbsp; } </span><span class="comment">// __wakeup()
<br>&nbsp; &nbsp; 
<br>&nbsp; </span><span class="keyword">} </span><span class="comment">// class myClass
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="71667">  
  <a class="name">
  <strong class="user"><em>Kyle</em></strong></a><div class="date" title="2006-12-10 02:35"><strong>7 years ago</strong></div>
  <div class="text" id="Hcom71667">
<div class="phpcode"><code><span class="html">
In regards to Anonymous on 7th April 2006<br><br>There is a way to get back HTML tags. For example:<br><br>&lt;?xml version="1.0"?&gt;<br>&lt;intro&gt;<br>&nbsp; &nbsp; Welcome to &lt;b&gt;Example.com&lt;/b&gt;!<br>&lt;/intro&gt;<br><br><span class="default">&lt;?php<br></span><span class="comment">// I use @ so that it doesn't spit out content of my XML in an error message if the load fails. The content could be passwords so this is just to be safe.<br></span><span class="default">$xml </span><span class="keyword">= @</span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'content_intro.xml'</span><span class="keyword">);<br>if (</span><span class="default">$xml</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">// asXML() will keep the HTML tags but it will also keep the parent tag &lt;intro&gt; so I strip them out with a str_replace. You could obviously also use a preg_replace if you have lots of tags.<br>&nbsp; &nbsp; </span><span class="default">$intro </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;intro&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/intro&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">());<br>} else {<br>&nbsp; &nbsp; </span><span class="default">$error </span><span class="keyword">= </span><span class="string">"Could not load intro XML file."</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;<br></span><br>With this method someone can change the intro in content_intro.xml and ensure that the HTML is well formed and not ruin the whole site design.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="64080">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2006-04-06 09:21"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom64080">
<div class="phpcode"><code><span class="html">
What has been found when using the script is that simplexml_load_file() will remove any HTML formating inside the XML file, and will also only load so many layers deep. If your XML file is to deap, it will return a boolean false.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61549">  
  <a class="name">
  <strong class="user"><em>info at evasion dot cc</em></strong></a><div class="date" title="2006-02-06 08:26"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61549">
<div class="phpcode"><code><span class="html">
Sorry there's a mistake in the previous function :<br><span class="default">&lt;?php<br>&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Must use getXMLnode function there (recursive)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp;&nbsp; <br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; }<br>&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp;&nbsp; }<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61450">  
  <a class="name">
  <strong class="user"><em>skutter at imprecision dot net</em></strong></a><div class="date" title="2006-02-03 09:11"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61450">
<div class="phpcode"><code><span class="html">
So it seems SimpleXML doesn't support CDATA... I bashed together this little regex function to sort out the CDATA before trying to parse XML with the likes of simplexml_load_file / simplexml_load_string. Hope it might help somebody and would be very interested to hear of better solutions. (Other than *not* using SimpleXML of course! ;)<br><br>It looks for any &lt;![CDATA [Text and HTML etc in here]]&gt; elements, htmlspecialchar()'s the encapsulated data and then strips the "&lt;![CDATA [" and "]]&gt;" tags out.<br><br><span class="default">&lt;?php<br></span><span class="keyword">function </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br>&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\&lt;\!\[CDATA \[(.*)\]\]\&gt;/U"</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br><br>&nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; if (isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$old_text </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_text </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$old_text</span><span class="keyword">, </span><span class="default">$new_text</span><span class="keyword">, </span><span class="default">$new_xml</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br><br>&nbsp; &nbsp; return </span><span class="default">$new_xml</span><span class="keyword">;<br>}<br><br></span><span class="comment">//Usage:<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'Your XML with CDATA...'</span><span class="keyword">;<br></span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">$xml_object </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="61438">  
  <a class="name">
  <strong class="user"><em>info at evasion dot cc</em></strong></a><div class="date" title="2006-02-03 03:37"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom61438">
<div class="phpcode"><code><span class="html">
Suppose you have loaded a XML file into $simpleXML_obj. <br>The structure is like below :<br><br>SimpleXMLElement Object<br>(<br><br>&nbsp; &nbsp; [node1] =&gt; SimpleXMLElement Object<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode1] =&gt; value1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode2] =&gt; value2<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode3] =&gt; value3<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>&nbsp; &nbsp; [node2] =&gt; SimpleXMLElement Object<br>&nbsp; &nbsp; &nbsp; &nbsp; (<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode4] =&gt; value4<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode5] =&gt; value5<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [subnode6] =&gt; value6<br>&nbsp; &nbsp; &nbsp; &nbsp; )<br><br>)<br><br>When searching a specific node in the object, you may use this function :<br>&nbsp; &nbsp; &nbsp; &nbsp; <br><span class="default">&lt;?php<br><br>&nbsp; &nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getCfgParam</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br>&nbsp; &nbsp; }<br></span><span class="default">?&gt;<br></span><br>So if you want to get subnode4 value you may use this function like this : <br><br><span class="default">&lt;?php<br>$result </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$simpleXML_obj</span><span class="keyword">, </span><span class="string">'subnode4'</span><span class="keyword">);<br>echo </span><span class="default">$result</span><span class="keyword">;<br></span><span class="default">?&gt;<br></span><br>It display "value4"</span>
</code></div>
  </div>
 </div>
  <div class="note" id="93478">  
  <a class="name">
  <strong class="user"><em>knl at bitflop dot com</em></strong></a><div class="date" title="2009-09-11 12:02"><strong>4 years ago</strong></div>
  <div class="text" id="Hcom93478">
<div class="phpcode"><code><span class="html">
If you need to parse the data from SimpleXML into a session variable remember to define the data as a string first.
<br>
<br>If you don't you will get warnings of "Node no longer exists" pointing to your session_start() function.
<br>
<br>This will work:
<br>
<br><span class="default">&lt;?php
<br>
<br>&nbsp; &nbsp; $new_version </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'<a rel="nofollow" target="_blank">http://example.com/version.xml</a>'</span><span class="keyword">);
<br>&nbsp; &nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'current_version'</span><span class="keyword">] = (string)</span><span class="default">$new_version</span><span class="keyword">-&gt;</span><span class="default">version</span><span class="keyword">;
<br>
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="57326">  
  <a class="name">
  <strong class="user"><em>genialbrainmachine at NOSPAM dot tiscali dot it</em></strong></a><div class="date" title="2005-09-30 08:52"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom57326">
<div class="phpcode"><code><span class="html">
Micro$oft Word uses non-standard characters and they create problems in using simplexml_load_file.<br>Many systems include non-standard Word character in their implementation of ISO-8859-1. So an XML document containing that characters can appear well-formed (i.e.) to many browsers. But if you try to load this kind of documents with simplexml_load_file you'll have a little bunch of troubles..<br>I believe that this is exactly the same question discussed in htmlentites. Following notes to htmlentitles are interesting here too (given in the reverse order, to grant the history):<br><a rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#26379</a><br><a rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#41152</a><br><a rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42126</a><br><a rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42511</a></span>
</code></div>
  </div>
 </div>
  <div class="note" id="108180">  
  <a class="name">
  <strong class="user"><em>fusionstream at gmail dot com</em></strong></a><div class="date" title="2012-04-05 04:15"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108180">
<div class="phpcode"><code><span class="html">
If you are loading many files, this may slow down your page load time.<br><br>To set a timeout, use file_get_context and then simplexml_load_string<br><br><span class="default">&lt;?php<br><br>$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'<a rel="nofollow" target="_blank">http://www.example.com/rss</a>'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">stream_create_context</span><span class="keyword">(array(</span><span class="string">'http' </span><span class="keyword">=&gt; array(</span><span class="string">'timeout'</span><span class="keyword">, </span><span class="string">'1.5'</span><span class="keyword">))));<br><br>if (</span><span class="default">$fp</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) );<br>} else {<br>&nbsp; &nbsp; echo </span><span class="string">"The request timed out"</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="56691">  
  <a class="name">
  <strong class="user"><em>mark</em></strong></a><div class="date" title="2005-09-12 11:06"><strong>8 years ago</strong></div>
  <div class="text" id="Hcom56691">
<div class="phpcode"><code><span class="html">
If the property of an object is empty the array is not created. Here is a version object2array that transfers properly.
<br>
<br><span class="default">&lt;?php
<br></span><span class="keyword">function </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)
<br>{
<br>&nbsp; &nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;
<br>&nbsp; &nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">))
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; } 
<br>&nbsp; &nbsp; else 
<br>&nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 
<br>&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$var</span><span class="keyword">) 
<br>&nbsp; &nbsp; &nbsp; &nbsp; {
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)
<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = (</span><span class="default">$key </span><span class="keyword">&amp;&amp; !</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">NULL </span><span class="keyword">: </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);
<br>&nbsp; &nbsp; &nbsp; &nbsp; } 
<br>&nbsp; &nbsp; &nbsp; &nbsp; else return </span><span class="default">$object</span><span class="keyword">;
<br>&nbsp; &nbsp; }
<br>
<br>&nbsp; &nbsp; return </span><span class="default">$return</span><span class="keyword">;
<br>}
<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="100889">  
  <a class="name">
  <strong class="user"><em>guego dot ol at ig dot com dot br</em></strong></a><div class="date" title="2010-11-12 03:26"><strong>3 years ago</strong></div>
  <div class="text" id="Hcom100889">
<div class="phpcode"><code><span class="html">
Analyze fully XML.<br><br><span class="default">&lt;?php<br>$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'file.xml'</span><span class="keyword">);<br><br>foreach(</span><span class="default">$xml </span><span class="keyword">as </span><span class="default">$key0 </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br>echo </span><span class="string">"..1..[</span><span class="default">$key0</span><span class="string">] =&gt; </span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey0 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue1</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey0</span><span class="string">] = </span><span class="default">$attributesvalue1</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="comment">////////////////////////////////////////////////<br></span><span class="keyword">foreach(</span><span class="default">$value </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value2</span><span class="keyword">){<br>echo </span><span class="string">"....2.....[</span><span class="default">$key</span><span class="string">] =&gt; </span><span class="default">$value2</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value2</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue2</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey</span><span class="string">] = </span><span class="default">$attributesvalue2</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="comment">////////////////////////////////////////////////<br></span><span class="keyword">foreach(</span><span class="default">$value2 </span><span class="keyword">as </span><span class="default">$key2 </span><span class="keyword">=&gt; </span><span class="default">$value3</span><span class="keyword">){<br>echo </span><span class="string">".........3..........[</span><span class="default">$key2</span><span class="string">] =&gt; </span><span class="default">$value3</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value3</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey2 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue3</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey2</span><span class="string">] = </span><span class="default">$attributesvalue3</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="comment">////////////////////////////////////////////////<br></span><span class="keyword">foreach(</span><span class="default">$value3 </span><span class="keyword">as </span><span class="default">$key3 </span><span class="keyword">=&gt; </span><span class="default">$value4</span><span class="keyword">){<br>echo </span><span class="string">"...................4....................[</span><span class="default">$key3</span><span class="string">] =&gt; </span><span class="default">$value4</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value4</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey3 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue4</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey3</span><span class="string">] = </span><span class="default">$attributesvalue4</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="comment">////////////////////////////////////////////////<br></span><span class="keyword">foreach(</span><span class="default">$value4 </span><span class="keyword">as </span><span class="default">$key4 </span><span class="keyword">=&gt; </span><span class="default">$value5</span><span class="keyword">){<br>echo </span><span class="string">".....................5......................[</span><span class="default">$key4</span><span class="string">] =&gt; </span><span class="default">$value5</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value5</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey4 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue5</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey4</span><span class="string">] = </span><span class="default">$attributesvalue5</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br></span><span class="comment">////////////////////////////////////////////////<br></span><span class="keyword">foreach(</span><span class="default">$value5 </span><span class="keyword">as </span><span class="default">$key5 </span><span class="keyword">=&gt; </span><span class="default">$value6</span><span class="keyword">){<br>echo </span><span class="string">"......................6.......................[</span><span class="default">$key5</span><span class="string">] =&gt; </span><span class="default">$value6</span><span class="string">"</span><span class="keyword">;<br>foreach(</span><span class="default">$value6</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey5 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue6</span><span class="keyword">){<br>echo </span><span class="string">"________[</span><span class="default">$attributeskey5</span><span class="string">] = </span><span class="default">$attributesvalue6</span><span class="string">"</span><span class="keyword">;<br>}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br>}}}}}<br>echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br>}<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/function.simplexml-load-file.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:56:27 GMT -->


</body></html>