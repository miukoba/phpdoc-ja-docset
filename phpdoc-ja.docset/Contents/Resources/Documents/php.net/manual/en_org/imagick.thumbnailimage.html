<html><!-- Mirrored from php.net/manual/en/imagick.thumbnailimage.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:27:26 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->


  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <title>Imagick::thumbnailImage</title>

 <link rel="shortcut icon" href="../../favicon.ico">
 <link rel="search" type="application/opensearchdescription+xml" href="http://php.net/phpnetimprovedsearch.src" title="Add PHP.net search">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/releases/feed.php" title="PHP Release feed">
 <link rel="alternate" type="application/atom+xml" href="http://php.net/feed.atom" title="PHP: Hypertext Preprocessor">

 <link rel="canonical" href="imagick.thumbnailimage.html">
 <link rel="shorturl" href="imagick.thumbnailimage.html">
 <link rel="alternate" href="imagick.thumbnailimage.html" hreflang="x-default">

 <link rel="contents" href="index-2.html">
 <link rel="index" href="class.imagick.html">
 <link rel="prev" href="imagick.thresholdimage.html">
 <link rel="next" href="imagick.tintimage.html">

 <link rel="alternate" href="imagick.thumbnailimage.html" hreflang="en">
 <link rel="alternate" href="http://php.net/manual/pt_BR/imagick.thumbnailimage.php" hreflang="pt_BR">
 <link rel="alternate" href="http://php.net/manual/zh/imagick.thumbnailimage.php" hreflang="zh">
 <link rel="alternate" href="http://php.net/manual/fr/imagick.thumbnailimage.php" hreflang="fr">
 <link rel="alternate" href="http://php.net/manual/de/imagick.thumbnailimage.php" hreflang="de">
 <link rel="alternate" href="http://php.net/manual/it/imagick.thumbnailimage.php" hreflang="it">
 <link rel="alternate" href="http://php.net/manual/ja/imagick.thumbnailimage.php" hreflang="ja">
 <link rel="alternate" href="http://php.net/manual/ro/imagick.thumbnailimage.php" hreflang="ro">
 <link rel="alternate" href="http://php.net/manual/ru/imagick.thumbnailimage.php" hreflang="ru">
 <link rel="alternate" href="http://php.net/manual/es/imagick.thumbnailimage.php" hreflang="es">
 <link rel="alternate" href="http://php.net/manual/tr/imagick.thumbnailimage.php" hreflang="tr">

<link rel="stylesheet" type="text/css" href="../../cached8fe1.css?t=1401250819&amp;f=/fonts/Fira/fira.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached4b8d.css?t=1404368420&amp;f=/fonts/Font-Awesome/css/fontello.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cached5065.css?t=1403329232&amp;f=/styles/theme-base.css" media="screen">
<link rel="stylesheet" type="text/css" href="../../cachedc78d.css?t=1401249623&amp;f=/styles/theme-medium.css" media="screen">

 <!--[if lte IE 7]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie7.css" media="screen">
 <![endif]-->

 <!--[if lte IE 8]>
 <script type="text/javascript">
  window.brokenIE = true;
 </script>
 <![endif]-->

 <!--[if lte IE 9]>
 <link rel="stylesheet" type="text/css" href="http://php.net/styles/workarounds.ie9.css" media="screen">
 <![endif]-->

 <!--[if IE]>
 <script type="text/javascript" src="http://php.net/js/ext/html5.js"></script>
 <![endif]-->

 <base>

</head>
<body class="docs " style="">


<div class="headsup"><a href="http://php.net/index.php#id2014-08-28-1">PHP 5.6.0 released</a></div>
<nav id="trick"><div><dl>
<dt><a href="getting-started.html">Getting Started</a></dt>
	<dd><a href="introduction.html">Introduction</a></dd>
	<dd><a href="tutorial.html">A simple tutorial</a></dd>
<dt><a href="langref.html">Language Reference</a></dt>
	<dd><a href="language.basic-syntax.html">Basic syntax</a></dd>
	<dd><a href="language.types.html">Types</a></dd>
	<dd><a href="language.variables.html">Variables</a></dd>
	<dd><a href="language.constants.html">Constants</a></dd>
	<dd><a href="language.expressions.html">Expressions</a></dd>
	<dd><a href="language.operators.html">Operators</a></dd>
	<dd><a href="language.control-structures.html">Control Structures</a></dd>
	<dd><a href="language.functions.html">Functions</a></dd>
	<dd><a href="language.oop5.html">Classes and Objects</a></dd>
	<dd><a href="language.namespaces.html">Namespaces</a></dd>
	<dd><a href="language.exceptions.html">Exceptions</a></dd>
	<dd><a href="language.generators.html">Generators</a></dd>
	<dd><a href="language.references.html">References Explained</a></dd>
	<dd><a href="reserved.variables.html">Predefined Variables</a></dd>
	<dd><a href="reserved.exceptions.html">Predefined Exceptions</a></dd>
	<dd><a href="reserved.interfaces.html">Predefined Interfaces and Classes</a></dd>
	<dd><a href="context.html">Context options and parameters</a></dd>
	<dd><a href="wrappers.html">Supported Protocols and Wrappers</a></dd>
</dl>
<dl>
<dt><a href="security.html">Security</a></dt>
	<dd><a href="security.intro.html">Introduction</a></dd>
	<dd><a href="security.general.html">General considerations</a></dd>
	<dd><a href="security.cgi-bin.html">Installed as CGI binary</a></dd>
	<dd><a href="security.apache.html">Installed as an Apache module</a></dd>
	<dd><a href="security.filesystem.html">Filesystem Security</a></dd>
	<dd><a href="security.database.html">Database Security</a></dd>
	<dd><a href="security.errors.html">Error Reporting</a></dd>
	<dd><a href="security.globals.html">Using Register Globals</a></dd>
	<dd><a href="security.variables.html">User Submitted Data</a></dd>
	<dd><a href="security.magicquotes.html">Magic Quotes</a></dd>
	<dd><a href="security.hiding.html">Hiding PHP</a></dd>
	<dd><a href="security.current.html">Keeping Current</a></dd>
<dt><a href="features.html">Features</a></dt>
	<dd><a href="features.http-auth.html">HTTP authentication with PHP</a></dd>
	<dd><a href="features.cookies.html">Cookies</a></dd>
	<dd><a href="features.sessions.html">Sessions</a></dd>
	<dd><a href="features.xforms.html">Dealing with XForms</a></dd>
	<dd><a href="features.file-upload.html">Handling file uploads</a></dd>
	<dd><a href="features.remote-files.html">Using remote files</a></dd>
	<dd><a href="features.connection-handling.html">Connection handling</a></dd>
	<dd><a href="features.persistent-connections.html">Persistent Database Connections</a></dd>
	<dd><a href="features.safe-mode.html">Safe Mode</a></dd>
	<dd><a href="features.commandline.html">Command line usage</a></dd>
	<dd><a href="features.gc.html">Garbage Collection</a></dd>
	<dd><a href="features.dtrace.html">DTrace Dynamic Tracing</a></dd>
</dl>
<dl>
<dt><a href="funcref.html">Function Reference</a></dt>
	<dd><a href="refs.basic.php.html">Affecting PHP's Behaviour</a></dd>
	<dd><a href="refs.utilspec.audio.html">Audio Formats Manipulation</a></dd>
	<dd><a href="refs.remote.auth.html">Authentication Services</a></dd>
	<dd><a href="refs.utilspec.cmdline.html">Command Line Specific Extensions</a></dd>
	<dd><a href="refs.compression.html">Compression and Archive Extensions</a></dd>
	<dd><a href="refs.creditcard.html">Credit Card Processing</a></dd>
	<dd><a href="refs.crypto.html">Cryptography Extensions</a></dd>
	<dd><a href="refs.database.html">Database Extensions</a></dd>
	<dd><a href="refs.calendar.html">Date and Time Related Extensions</a></dd>
	<dd><a href="refs.fileprocess.file.html">File System Related Extensions</a></dd>
	<dd><a href="refs.international.html">Human Language and Character Encoding Support</a></dd>
	<dd><a href="refs.utilspec.image.html">Image Processing and Generation</a></dd>
	<dd><a href="refs.remote.mail.html">Mail Related Extensions</a></dd>
	<dd><a href="refs.math.html">Mathematical Extensions</a></dd>
	<dd><a href="refs.utilspec.nontext.html">Non-Text MIME Output</a></dd>
	<dd><a href="refs.fileprocess.process.html">Process Control Extensions</a></dd>
	<dd><a href="refs.basic.other.html">Other Basic Extensions</a></dd>
	<dd><a href="refs.remote.other.html">Other Services</a></dd>
	<dd><a href="refs.search.html">Search Engine Extensions</a></dd>
	<dd><a href="refs.utilspec.server.html">Server Specific Extensions</a></dd>
	<dd><a href="refs.basic.session.html">Session Extensions</a></dd>
	<dd><a href="refs.basic.text.html">Text Processing</a></dd>
	<dd><a href="refs.basic.vartype.html">Variable and Type Related Extensions</a></dd>
	<dd><a href="refs.webservice.html">Web Services</a></dd>
	<dd><a href="refs.utilspec.windows.html">Windows Only Extensions</a></dd>
	<dd><a href="refs.xml.html">XML Manipulation</a></dd>
</dl>
<dl>
<dt>Keyboard Shortcuts</dt><dt>?</dt>
<dd>This help</dd>
<dt>j</dt>
<dd>Next menu item</dd>
<dt>k</dt>
<dd>Previous menu item</dd>
<dt>g p</dt>
<dd>Previous man page</dd>
<dt>g n</dt>
<dd>Next man page</dd>
<dt>G</dt>
<dd>Scroll to bottom</dd>
<dt>g g</dt>
<dd>Scroll to top</dd>
<dt>g h</dt>
<dd>Goto homepage</dd>
<dt>g s</dt>
<dd>Goto search<br>(current page)</dd>
<dt>/</dt>
<dd>Focus search box</dd>
</dl></div></nav>
<div id="goto">
    <div class="search">
         <div class="text"></div>
         <div class="results"><ul></ul></div>
   </div>
</div>

  <div id="breadcrumbs" class="row-fluid">
          
              
        <ul class="breadcrumbs-container">
            <li><a href="index-2.html">PHP Manual</a></li>      <li><a href="funcref.html">Function Reference</a></li>      <li><a href="refs.utilspec.image.html">Image Processing and Generation</a></li>      <li><a href="book.imagick.html">ImageMagick</a></li>      <li><a href="class.imagick.html">Imagick</a></li>    </ul>
  </div>




<div id="layout">
  <section id="layout-content">
  <div id="imagick.thumbnailimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::thumbnailImage</h1>
  <p class="verinfo">(PECL imagick 2.0.0)</p><p class="refpurpose"><span class="refname">Imagick::thumbnailImage</span> â€” <span class="dc-title">Changes the size of an image</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.thumbnailimage-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>Imagick::thumbnailImage</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$columns</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$rows</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$bestfit</code><span class="initializer"> = false</span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$fill</code><span class="initializer"> = false</span></span>
  ]] )</div>

  <p class="para rdfs-comment">
   Changes the size of an image to the given dimensions and removes any
   associated profiles. The goal is to produce small, low cost thumbnail
   images suited for display on the Web. 

   If <strong><code>TRUE</code></strong> is given as a third parameter then columns and rows parameters
   are used as maximums for each side. Both sides will be scaled down until
   they match or are smaller than the parameter given for the side.
  </p>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
 <span class="simpara">
  The behavior of the parameter <code class="parameter">bestfit</code> changed in Imagick 3.0.0.
  Before this version given dimensions 400x400 an image of dimensions 200x150 would be
  left untouched. In Imagick 3.0.0 and later the image would be scaled up to size 400x300 as
  this is the "best fit" for the given dimensions. If <code class="parameter">bestfit</code>
  parameter is used both width and height must be given.
 </span>
</p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.thumbnailimage-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   </p><dl>

    
     <dt>
<code class="parameter">columns</code></dt>

     <dd>

      <p class="para">
      Image width
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">rows</code></dt>

     <dd>

      <p class="para">
      Image height
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">bestfit</code></dt>

     <dd>

      <p class="para">
      Whether to force maximum values
      </p>
     </dd>

    
   </dl>

  <p></p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.thumbnailimage-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>TRUE</code></strong> on success.
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-imagick.thumbnailimage-errors">
  <h3 class="title">Errors/Exceptions</h3>
  <p class="para">
   Throws ImagickException on error.
  </p>
 </div>


</div>
<section id="usernotes">
 <div class="head"><h3 class="title">User Contributed Notes</h3></div><div id="allnotes">
  <div class="note" id="108004">  
  <a class="name">
  <strong class="user"><em>web at johnbaldock dot com</em></strong></a><div class="date" title="2012-03-21 07:25"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108004">
<div class="phpcode"><code><span class="html">
When shrinking a jpg you can get more then double the performance if you use <span class="default">&lt;?php $image</span><span class="keyword">-&gt;</span><span class="default">setOption</span><span class="keyword">(</span><span class="string">'jpeg:size'</span><span class="keyword">, </span><span class="string">'800x532'</span><span class="keyword">) </span><span class="default">?&gt;</span>, exchanging 800x532 to the resolution you want the final image to be. For instance instead of this:<br><br><span class="default">&lt;?php<br>$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="string">'foo.jpg'</span><span class="keyword">);<br></span><span class="default">?&gt;<br></span><br>You would use this:<br><br><span class="default">&lt;?php<br>$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">();<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">setOption</span><span class="keyword">(</span><span class="string">'jpeg:size'</span><span class="keyword">, </span><span class="string">'800x532'</span><span class="keyword">);<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">readImage</span><span class="keyword">(</span><span class="string">'foo.jpg'</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="106345">  
  <a class="name">
  <strong class="user"><em>jarrod at jarrodchristman dot com</em></strong></a><div class="date" title="2011-10-29 08:31"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom106345">
<div class="phpcode"><code><span class="html">
Even though thumbnailImage is meant to produce the smallest file size image possible, i found it didn't. I put together this code and bordering different compression settings, found it produced the smallest file size:<br><br><span class="default">&lt;?php<br></span><span class="comment">// Max vert or horiz resolution<br></span><span class="default">$maxsize</span><span class="keyword">=</span><span class="default">550</span><span class="keyword">;<br><br></span><span class="comment">// create new Imagick object<br></span><span class="default">$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="string">'input_image_filename_and_location'</span><span class="keyword">);<br><br></span><span class="comment">// Resizes to whichever is larger, width or height<br></span><span class="keyword">if(</span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">getImageHeight</span><span class="keyword">() &lt;= </span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">getImageWidth</span><span class="keyword">())<br>{<br></span><span class="comment">// Resize image using the lanczos resampling algorithm based on width<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">resizeImage</span><span class="keyword">(</span><span class="default">$maxsize</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">FILTER_LANCZOS</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>}<br>else<br>{<br></span><span class="comment">// Resize image using the lanczos resampling algorithm based on height<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">resizeImage</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">$maxsize</span><span class="keyword">,</span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">FILTER_LANCZOS</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br>}<br><br></span><span class="comment">// Set to use jpeg compression<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">setImageCompression</span><span class="keyword">(</span><span class="default">Imagick</span><span class="keyword">::</span><span class="default">COMPRESSION_JPEG</span><span class="keyword">);<br></span><span class="comment">// Set compression level (1 lowest quality, 100 highest quality)<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">setImageCompressionQuality</span><span class="keyword">(</span><span class="default">75</span><span class="keyword">);<br></span><span class="comment">// Strip out unneeded meta data<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">stripImage</span><span class="keyword">();<br></span><span class="comment">// Writes resultant image to output directory<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="string">'output_image_filename_and_location'</span><span class="keyword">);<br></span><span class="comment">// Destroys Imagick object, freeing allocated resources in the process<br></span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">destroy</span><span class="keyword">();<br><br></span><span class="default">?&gt;<br></span><br>I found setCompression to not function at all and had to use setImageCompression. The stripImage call is needed and strips out unneeded meta data. You can choose whatever filter you want, but i found lanczos to be the best for image reduction, though it is more computationally heavy.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="108288">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2012-04-14 08:35"><strong>2 years ago</strong></div>
  <div class="text" id="Hcom108288">
<div class="phpcode"><code><span class="html">
If the 3rd parameter is true, the image will be resized in such a way that itâ€™ll be contained within the dimensions mentioned.<br>Itâ€™s like changing the dimensions of the image so that it can be contained in a box of given dimension.<br><br>Eg: Imageâ€™s dimension is 1600*800. If we use thumbnailImage(400, 400, true), the new imageâ€™s dimension will be 400*200.<br><br>Some of the previous notes in this page mentions that the image is resized proportionally so that its _smallest_ dimension matches the width or height specified, NOT both.<br>But this is not the case now. Both width &amp; height of the image will be &lt;= that mentioned in thumbnailImage().<br>Maybe imagick changed/updated the functionality.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="77728">  
  <a class="name">
  <strong class="user"><em>raybdbomb . gmail</em></strong></a><div class="date" title="2007-09-10 04:18"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom77728">
<div class="phpcode"><code><span class="html">
As noted here<br><a rel="nofollow" target="_blank">http://php.net/manual/en/ref.imagick.php</a><br>With either of the params as 0, the aspect ratio is maintained.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="84178">  
  <a class="name">
  <strong class="user"><em>Anonymous</em></strong></a><div class="date" title="2008-07-02 04:15"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom84178">
<div class="phpcode"><code><span class="html">
Here is a function to calculate the new dimensions of a thumbnail, to fit within the given dimensions on both sides.<br><br><span class="default">&lt;?php<br></span><span class="comment">/**<br> * Calculate new image dimensions to new constraints<br> *<br> * @param Original X size in pixels<br> * @param Original Y size in pixels<br> * @return New X maximum size in pixels<br> * @return New Y maximum size in pixels<br> */<br></span><span class="keyword">function </span><span class="default">scaleImage</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$cx</span><span class="keyword">,</span><span class="default">$cy</span><span class="keyword">) {<br>&nbsp; &nbsp; </span><span class="comment">//Set the default NEW values to be the old, in case it doesn't even need scaling<br>&nbsp; &nbsp; </span><span class="keyword">list(</span><span class="default">$nx</span><span class="keyword">,</span><span class="default">$ny</span><span class="keyword">)=array(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">$y</span><span class="keyword">);<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//If image is generally smaller, don't even bother<br>&nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$x</span><span class="keyword">&gt;=</span><span class="default">$cx </span><span class="keyword">|| </span><span class="default">$y</span><span class="keyword">&gt;=</span><span class="default">$cx</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Work out ratios<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$x</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$rx</span><span class="keyword">=</span><span class="default">$cx</span><span class="keyword">/</span><span class="default">$x</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">$y</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$ry</span><span class="keyword">=</span><span class="default">$cy</span><span class="keyword">/</span><span class="default">$y</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Use the lowest ratio, to ensure we don't go over the wanted image size<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">if (</span><span class="default">$rx</span><span class="keyword">&gt;</span><span class="default">$ry</span><span class="keyword">) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">$ry</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; } else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">$rx</span><span class="keyword">;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//Calculate the new size based on the chosen ratio<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nx</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">*</span><span class="default">$r</span><span class="keyword">);<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ny</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">*</span><span class="default">$r</span><span class="keyword">);<br>&nbsp; &nbsp; }&nbsp; &nbsp; <br>&nbsp; &nbsp; <br>&nbsp; &nbsp; </span><span class="comment">//Return the results<br>&nbsp; &nbsp; </span><span class="keyword">return array(</span><span class="default">$nx</span><span class="keyword">,</span><span class="default">$ny</span><span class="keyword">);<br>}<br></span><span class="default">?&gt;<br></span><br>Use it like this:<br><br><span class="default">&lt;?php<br></span><span class="comment">//Read original image and create Imagick object<br></span><span class="default">$thumb</span><span class="keyword">=new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="default">$originalImageFilename</span><span class="keyword">);<br><br></span><span class="comment">//Work out new dimensions<br></span><span class="keyword">list(</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">)=</span><span class="default">scaleImage</span><span class="keyword">(<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$thumb</span><span class="keyword">-&gt;</span><span class="default">getImageWidth</span><span class="keyword">(),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$thumb</span><span class="keyword">-&gt;</span><span class="default">getImageHeight</span><span class="keyword">(),<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newMaximumWidth</span><span class="keyword">,<br>&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$newMaximumHeight</span><span class="keyword">);<br><br></span><span class="comment">//Scale the image<br></span><span class="default">$thumb</span><span class="keyword">-&gt;</span><span class="default">thumbnailImage</span><span class="keyword">(</span><span class="default">$newX</span><span class="keyword">,</span><span class="default">$newY</span><span class="keyword">);<br><br></span><span class="comment">//Write the new image to a file<br></span><span class="default">$thumb</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="default">$thumbnailFilename</span><span class="keyword">);<br></span><span class="default">?&gt;</span>
</span>
</code></div>
  </div>
 </div>
  <div class="note" id="78553">  
  <a class="name">
  <strong class="user"><em>sgarner at expio dot co dot nz</em></strong></a><div class="date" title="2007-10-16 10:11"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom78553">
<div class="phpcode"><code><span class="html">
With $fit == true, the image is resized proportionally so that its _smallest_ dimension matches the width or height specified, NOT both.<br><br>For example, if you say thumbnailImage(400, 400, true), on an image of 1600x800, it will be resized to 800x400, NOT 400x200 as you might expect.<br><br>The solution is to compare the original image's dimensions to the specified dimensions, and substitute zero for the smaller dimension, and set $fit = false.<br><br>i.e.: thumbnailImage(400, 0, false) would resize that 1600x800 image to 400x200.</span>
</code></div>
  </div>
 </div>
  <div class="note" id="83730">  
  <a class="name">
  <strong class="user"><em>n-sw-bit at ya dot ru</em></strong></a><div class="date" title="2008-06-09 09:48"><strong>6 years ago</strong></div>
  <div class="text" id="Hcom83730">
<div class="phpcode"><code><span class="html">
If you want to resize your picture to fit smallest parameter:<br><br>$fitbyWidth = (($maxWidth/$w)&lt;($maxHeight/$h)) ?true:false;<br><br>if($fitbyWidth){<br>&nbsp; &nbsp; $im-&gt;thumbnailImage($maxWidth, 0, false);<br>}else{<br>&nbsp; &nbsp; $im-&gt;thumbnailImage(0, $maxHeight, false);<br>}</span>
</code></div>
  </div>
 </div></div>

 
</section>    </section><!-- layout-content -->
        


  </div><!-- layout -->
         
  

    
 <!-- External and third party libraries. -->
 







<a id="toTop" href="javascript:;"><span id="toTopHover"></span><img width="40" height="40" alt="To Top" src="../../images/to-top%402x.png"></a>



<!-- Mirrored from php.net/manual/en/imagick.thumbnailimage.php by HTTrack Website Copier/3.x [XR&CO'2013], Thu, 28 Aug 2014 16:27:27 GMT -->


</body></html>