<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>配列を分割する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-change-key-case.html">array_change_key_case</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-column.html">array_column</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-chunk" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_chunk</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.2.0, PHP 5)</p><p class="refpurpose"><span class="refname">array_chunk</span> &mdash; <span class="dc-title">配列を分割する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-chunk-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_chunk</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$size</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$preserve_keys</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   配列を、<em><code class="parameter">size</code></em> 個ずつの要素に分割します。
   最後の部分の要素数は <em><code class="parameter">size</code></em> より小さくなることもあります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-chunk-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>


    <dt>

     <span class="term"><em><code class="parameter">array</code></em></span>
     <dd>

      <p class="para">
       処理を行う配列。
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><em><code class="parameter">size</code></em></span>
     <dd>

      <p class="para">
       各部分のサイズ。
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><em><code class="parameter">preserve_keys</code></em></span>
     <dd>

      <p class="para">
       <strong><code>TRUE</code></strong> の場合はキーをそのまま保持します。
       デフォルトは <strong><code>FALSE</code></strong> で、各部分のキーをあらためて数字で振りなおします。
      </p>
     </dd>

    </dt>


   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-chunk-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   数値添字の多次元配列を返します。添え字はゼロから始まり、
   各次元の要素数が <em><code class="parameter">size</code></em> となります。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.array-chunk-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   <em><code class="parameter">size</code></em> が 1 より小さい場合は
   <strong><code>E_WARNING</code></strong> が発生し、<strong><code>NULL</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-chunk-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4905">
    <p><strong>例1  <span class="function"><strong>array_chunk()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$input_array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'c'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'d'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'e'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_chunk</span><span style="color: #007700">(</span><span style="color: #0000BB">$input_array</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">array_chunk</span><span style="color: #007700">(</span><span style="color: #0000BB">$input_array</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; a
            [1] =&gt; b
        )

    [1] =&gt; Array
        (
            [0] =&gt; c
            [1] =&gt; d
        )

    [2] =&gt; Array
        (
            [0] =&gt; e
        )

)
Array
(
    [0] =&gt; Array
        (
            [0] =&gt; a
            [1] =&gt; b
        )

    [1] =&gt; Array
        (
            [2] =&gt; c
            [3] =&gt; d
        )

    [2] =&gt; Array
        (
            [4] =&gt; e
        )

)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-chunk-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-slice.html" class="function" rel="rdfs-seeAlso">array_slice()</a> - 配列の一部を展開する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113234""></a>
  <div class="note">
   <strong class="user">stratboy</strong>
   <a href="#113234" class="date">16-Sep-2013 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi, I've made&nbsp; a function to split an array into chunks based on columns wanted. For example:<br />
<br />
<span class="default">&lt;?php $a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
goal (say, for 3 columns):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">array(<br />
&nbsp;&nbsp; array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">),<br />
&nbsp;&nbsp; array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">6</span><span class="keyword">),<br />
&nbsp;&nbsp; array(</span><span class="default">7</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">)<br />
);<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_array_columns</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$columns</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$columns_map </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$columns</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){ </span><span class="default">$columns_map</span><span class="keyword">[] = </span><span class="default">0</span><span class="keyword">; }</span><span class="comment">//init columns<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //create map<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$columns_map</span><span class="keyword">[</span><span class="default">$position</span><span class="keyword">]++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">= (</span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">$columns</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">) ? ++</span><span class="default">$position </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//chunk the array based on map<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunked </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$columns_map </span><span class="keyword">as </span><span class="default">$map</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunked</span><span class="keyword">[] = </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$map</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$chunked</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }</span><span class="comment">//end get_array_columns<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98976""></a>
  <div class="note">
   <strong class="user">nate at ruggfamily dot com</strong>
   <a href="#98976" class="date">20-Jul-2010 06:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just want to grab one chunk from an array, you should use array_slice().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88501""></a>
  <div class="note">
   <strong class="user">dead dot screamer at seznam dot cz</strong>
   <a href="#88501" class="date">27-Jan-2009 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can be used to reverse effect of <span class="default">&lt;?php array_Chunk</span><span class="keyword">()</span><span class="default">?&gt;</span>.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_Unchunk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_User_Func_Array</span><span class="keyword">(</span><span class="string">'array_Merge'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: text/plain'</span><span class="keyword">);<br />
</span><span class="default">$array</span><span class="keyword">=array(<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Black Canyon City'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Chandler'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Flagstaff'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Gilbert'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Glendale'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Globe'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Mesa'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Miami'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Phoenix'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Peoria'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Prescott'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Scottsdale'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Sun City'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Surprise'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Tempe'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Tucson'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'Wickenburg'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
</span><span class="default">var_Dump</span><span class="keyword">(</span><span class="default">array_Unchunk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
array(17) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(17) "Black Canyon City"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(8) "Chandler"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(9) "Flagstaff"<br />
&nbsp; [3]=&gt;<br />
&nbsp; string(7) "Gilbert"<br />
&nbsp; [4]=&gt;<br />
&nbsp; string(8) "Glendale"<br />
&nbsp; [5]=&gt;<br />
&nbsp; string(5) "Globe"<br />
&nbsp; [6]=&gt;<br />
&nbsp; string(4) "Mesa"<br />
&nbsp; [7]=&gt;<br />
&nbsp; string(5) "Miami"<br />
&nbsp; [8]=&gt;<br />
&nbsp; string(7) "Phoenix"<br />
&nbsp; [9]=&gt;<br />
&nbsp; string(6) "Peoria"<br />
&nbsp; [10]=&gt;<br />
&nbsp; string(8) "Prescott"<br />
&nbsp; [11]=&gt;<br />
&nbsp; string(10) "Scottsdale"<br />
&nbsp; [12]=&gt;<br />
&nbsp; string(8) "Sun City"<br />
&nbsp; [13]=&gt;<br />
&nbsp; string(8) "Surprise"<br />
&nbsp; [14]=&gt;<br />
&nbsp; string(5) "Tempe"<br />
&nbsp; [15]=&gt;<br />
&nbsp; string(6) "Tucson"<br />
&nbsp; [16]=&gt;<br />
&nbsp; string(10) "Wickenburg"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88437""></a>
  <div class="note">
   <strong class="user">Rasmus Schultz (http://mindplay.dk)</strong>
   <a href="#88437" class="date">23-Jan-2009 10:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately, this function only accepts real arrays, not iterable objects... For that, you need this function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">break_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$page_size</span><span class="keyword">) {<br />
&nbsp; <br />
&nbsp; </span><span class="default">$arrays </span><span class="keyword">= array();<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$index </span><span class="keyword">=&gt; </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i</span><span class="keyword">++ % </span><span class="default">$page_size </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$arrays</span><span class="keyword">[] = array();<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= &amp; </span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$current</span><span class="keyword">[] = </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; return </span><span class="default">$arrays</span><span class="keyword">;<br />
&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83752""></a>
  <div class="note">
   <strong class="user">OIS</strong>
   <a href="#83752" class="date">10-Jun-2008 02:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Response to azspot at gmail dot com function partition.<br />
<br />
$columns = 3;<br />
$citylist = array('Black Canyon City', 'Chandler', 'Flagstaff', 'Gilbert', 'Glendale', 'Globe', 'Mesa', 'Miami', 'Phoenix', 'Peoria', 'Prescott', 'Scottsdale', 'Sun City', 'Surprise', 'Tempe', 'Tucson', 'Wickenburg');<br />
print_r(array_chunk($citylist, ceil(count($citylist) / $columns)));<br />
<br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Black Canyon City<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Chandler<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Flagstaff<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Gilbert<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Glendale<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; Globe<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Mesa<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Miami<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Phoenix<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Peoria<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Prescott<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; Scottsdale<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Sun City<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Surprise<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Tempe<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Tucson<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Wickenburg<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75022""></a>
  <div class="note">
   <strong class="user">azspot at gmail dot com</strong>
   <a href="#75022" class="date">09-May-2007 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Tried to use an example below (#56022) for array_chunk_fixed that would "partition" or divide an array into a desired number of split lists -- a useful procedure for "chunking" up objects or text items into columns, or partitioning any type of data resource. However, there seems to be a flaw with array_chunk_fixed — for instance, try it with a nine item list and with four partitions. It results in 3 entries with 3 items, then a blank array.<br />
<br />
So, here is the output of my own dabbling on the matter:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">partition</span><span class="keyword">( </span><span class="default">$list</span><span class="keyword">, </span><span class="default">$p </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$listlen </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">( </span><span class="default">$list </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$partlen </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">( </span><span class="default">$listlen </span><span class="keyword">/ </span><span class="default">$p </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$partrem </span><span class="keyword">= </span><span class="default">$listlen </span><span class="keyword">% </span><span class="default">$p</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$partition </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mark </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$px </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$px </span><span class="keyword">&lt; </span><span class="default">$p</span><span class="keyword">; </span><span class="default">$px</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$incr </span><span class="keyword">= (</span><span class="default">$px </span><span class="keyword">&lt; </span><span class="default">$partrem</span><span class="keyword">) ? </span><span class="default">$partlen </span><span class="keyword">+ </span><span class="default">1 </span><span class="keyword">: </span><span class="default">$partlen</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$partition</span><span class="keyword">[</span><span class="default">$px</span><span class="keyword">] = </span><span class="default">array_slice</span><span class="keyword">( </span><span class="default">$list</span><span class="keyword">, </span><span class="default">$mark</span><span class="keyword">, </span><span class="default">$incr </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mark </span><span class="keyword">+= </span><span class="default">$incr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$partition</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$citylist </span><span class="keyword">= array( </span><span class="string">"Black Canyon City"</span><span class="keyword">, </span><span class="string">"Chandler"</span><span class="keyword">, </span><span class="string">"Flagstaff"</span><span class="keyword">, </span><span class="string">"Gilbert"</span><span class="keyword">, </span><span class="string">"Glendale"</span><span class="keyword">, </span><span class="string">"Globe"</span><span class="keyword">, </span><span class="string">"Mesa"</span><span class="keyword">, </span><span class="string">"Miami"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"Phoenix"</span><span class="keyword">, </span><span class="string">"Peoria"</span><span class="keyword">, </span><span class="string">"Prescott"</span><span class="keyword">, </span><span class="string">"Scottsdale"</span><span class="keyword">, </span><span class="string">"Sun City"</span><span class="keyword">, </span><span class="string">"Surprise"</span><span class="keyword">, </span><span class="string">"Tempe"</span><span class="keyword">, </span><span class="string">"Tucson"</span><span class="keyword">, </span><span class="string">"Wickenburg" </span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">partition</span><span class="keyword">( </span><span class="default">$citylist</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">) );<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Black Canyon City<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Chandler<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Flagstaff<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Gilbert<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Glendale<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; Globe<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Mesa<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Miami<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Phoenix<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Peoria<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Prescott<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [5] =&gt; Scottsdale<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Sun City<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Surprise<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Tempe<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Tucson<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Wickenburg<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63394""></a>
  <div class="note">
   
   <a href="#63394" class="date">22-Mar-2006 01:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here my array_chunk_values( ) with values distributed by lines (columns are balanced as much as possible) :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_chunk_vertical</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">, </span><span class="default">$columns</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$per_column </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$n </span><span class="keyword">/ </span><span class="default">$columns</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rest </span><span class="keyword">= </span><span class="default">$n </span><span class="keyword">% </span><span class="default">$columns </span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// The map<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$per_columns </span><span class="keyword">= array( ) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$columns </span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$per_columns</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$per_column </span><span class="keyword">+ (</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$rest </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tabular </span><span class="keyword">= array( ) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$per_columns </span><span class="keyword">as </span><span class="default">$rows </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ( </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$rows </span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tabular</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][ ] = </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$tabular </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">header</span><span class="keyword">(</span><span class="string">'Content-Type: text/plain'</span><span class="keyword">) ;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">array_chunk_vertical</span><span class="keyword">(</span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">31</span><span class="keyword">), </span><span class="default">7</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; foreach ( </span><span class="default">$data </span><span class="keyword">as </span><span class="default">$row </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$row </span><span class="keyword">as </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">printf</span><span class="keyword">(</span><span class="string">'[%2s]'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"\r\n" </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Output :<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [ 1][ 6][11][16][20][24][28]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [ 2][ 7][12][17][21][25][29]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [ 3][ 8][13][18][22][26][30]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [ 4][ 9][14][19][23][27][31]<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; [ 5][10][15]<br />
&nbsp;&nbsp;&nbsp; */<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57843""></a>
  <div class="note">
   <strong class="user">magick dit crow ot gmail dit com</strong>
   <a href="#57843" class="date">16-Oct-2005 06:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Mistake key did not do what I thought. A patch.<br />
<br />
function array_bucket($array,$bucket_size)// bucket filter<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!is_array($array)) return false;<br />
&nbsp;&nbsp;&nbsp; $buckets=array_chunk($array,$bucket_size);// chop up array into bucket size units<br />
&nbsp;&nbsp;&nbsp; $I=0;<br />
&nbsp;&nbsp;&nbsp; foreach ($buckets as $bucket)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $new_array[$I++]=array_sum($bucket)/count($bucket);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $new_array;// return new array<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57835""></a>
  <div class="note">
   <strong class="user">magick dit crow ot gmail dit com</strong>
   <a href="#57835" class="date">15-Oct-2005 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes each few elements of an array and averages them together. It then places the averages in a new array. It is used to smooth out data. For example lets say you have a years worth of hit data to a site and you want to graph it by the week. Then use a bucket of 7 and graph the functions output.<br />
<br />
function array_bucket($array, $bucket_size)&nbsp; // bucket filter<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!is_array($array)) return false; // no empty arrays<br />
&nbsp;&nbsp;&nbsp; $buckets=array_chunk($array,$bucket_size);&nbsp; // chop up array into bucket size units<br />
&nbsp;&nbsp;&nbsp; foreach ($buckets as $bucket) $new_array[key($buckets])=array_sum($bucket)/count($bucket);<br />
&nbsp;&nbsp;&nbsp; return $new_array;&nbsp; // return new smooth array<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56022""></a>
  <div class="note">
   <strong class="user">webmaster at cafe-clope dot net</strong>
   <a href="#56022" class="date">21-Aug-2005 01:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
based on the same syntax, useful about making columns :<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_chunk_fixed</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$num</span><span class="keyword">, </span><span class="default">$preserve_keys </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$count</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">array_chunk</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">$count</span><span class="keyword">/</span><span class="default">$num</span><span class="keyword">), </span><span class="default">$preserve_keys</span><span class="keyword">) ;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">array_pad</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$num</span><span class="keyword">, array()) ;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$input </span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">) ;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_chunk</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">)) ;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_chunk_fixed</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">)) ;<br />
</span><span class="default">?&gt;<br />
</span><br />
---- array_chunk : fixed number of sub-items ----<br />
Array(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)<br />
<br />
---- array_chunk : fixed number of columns ----<br />
Array(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48268""></a>
  <div class="note">
   <strong class="user">phpm at nreynolds dot me dot uk</strong>
   <a href="#48268" class="date">17-Dec-2004 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_chunk() is helpful when constructing tables with a known number of columns but an unknown number of values, such as a calendar month. Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$values </span><span class="keyword">= </span><span class="default">range</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">, </span><span class="default">31</span><span class="keyword">);<br />
</span><span class="default">$rows </span><span class="keyword">= </span><span class="default">array_chunk</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">, </span><span class="default">7</span><span class="keyword">);<br />
<br />
print </span><span class="string">"&lt;table&gt;\n"</span><span class="keyword">;<br />
foreach (</span><span class="default">$rows </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;tr&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$row </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">"&lt;td&gt;" </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">. </span><span class="string">"&lt;/td&gt;\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; print </span><span class="string">"&lt;/tr&gt;\n"</span><span class="keyword">;<br />
}<br />
print </span><span class="string">"&lt;/table&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Outputs:<br />
<br />
1 2 3 4 5 6 7 <br />
8 9 10 11 12 13 14 <br />
15 16 17 18 19 20 21 <br />
22 23 24 25 26 27 28 <br />
29 30 31 <br />
<br />
The other direction is possible too, with the aid of a function included at the bottom of this note. Changing this line:<br />
&nbsp; $rows = array_chunk($values, 7);<br />
<br />
To this:<br />
&nbsp; $rows = array_chunk_vertical($values, 7);<br />
<br />
Produces a vertical calendar with seven columns:<br />
<br />
1 6&nbsp; 11 16 21 26 31 <br />
2 7&nbsp; 12 17 22 27 <br />
3 8&nbsp; 13 18 23 28 <br />
4 9&nbsp; 14 19 24 29 <br />
5 10 15 20 25 30 <br />
<br />
You can also specify that $size refers to the number of rows, not columns:<br />
&nbsp; $rows = array_chunk_vertical($values, 7, false, false);<br />
<br />
Producing this:<br />
<br />
1 8&nbsp; 15 22 29 <br />
2 9&nbsp; 16 23 30 <br />
3 10 17 24 31 <br />
4 11 18 25 <br />
5 12 19 26 <br />
6 13 20 27 <br />
7 14 21 28 <br />
<br />
The function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_chunk_vertical</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="default">$preserve_keys </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$size_is_horizontal </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chunks </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$size_is_horizontal</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunk_count </span><span class="keyword">= </span><span class="default">ceil</span><span class="keyword">(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">) / </span><span class="default">$size</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunk_count </span><span class="keyword">= </span><span class="default">$size</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$chunk_index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$chunk_index </span><span class="keyword">&lt; </span><span class="default">$chunk_count</span><span class="keyword">; </span><span class="default">$chunk_index</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[] = array();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chunk_index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$preserve_keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$chunk_index</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$chunk_index</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (++</span><span class="default">$chunk_index </span><span class="keyword">== </span><span class="default">$chunk_count</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunk_index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$chunks</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41347""></a>
  <div class="note">
   <strong class="user">mick at vandermostvanspijk dot nl</strong>
   <a href="#41347" class="date">07-Apr-2004 12:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editors note: This function was based on a previous function by gphemsley at nospam users dot sourceforge.net]<br />
<br />
For those of you that need array_chunk() for PHP &lt; 4.2.0, this function should do the trick:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_chunk'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_chunk</span><span class="keyword">( </span><span class="default">$input</span><span class="keyword">, </span><span class="default">$size</span><span class="keyword">, </span><span class="default">$preserve_keys </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; @</span><span class="default">reset</span><span class="keyword">( </span><span class="default">$input </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while( @list( </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">) = @</span><span class="default">each</span><span class="keyword">( </span><span class="default">$input </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !( isset( </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">count</span><span class="keyword">( </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] ) &lt; </span><span class="default">$size </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$preserve_keys </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$preserve_keys </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chunks</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$chunks</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-change-key-case.html">array_change_key_case</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-column.html">array_column</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
