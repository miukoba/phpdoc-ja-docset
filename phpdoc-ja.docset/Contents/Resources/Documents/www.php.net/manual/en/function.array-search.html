<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>指定した値を配列で検索し、見つかった場合に対応するキーを返す</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-reverse.html">array_reverse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-shift.html">array_shift</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-search" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_search</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5)</p><p class="refpurpose"><span class="refname">array_search</span> &mdash; <span class="dc-title">指定した値を配列で検索し、見つかった場合に対応するキーを返す</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-search-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>array_search</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$haystack</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$strict</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   <em><code class="parameter">haystack</code></em> において
   <em><code class="parameter">needle</code></em> を検索します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-search-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">needle</code></em></span>
     <dd>

      <p class="para">
       検索したい値。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        <em><code class="parameter">needle</code></em> が文字列の場合、
        大文字小文字を区別して比較が行われます。
       </p>
      </p></blockquote>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">haystack</code></em></span>
     <dd>

      <p class="para">
       配列。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">strict</code></em></span>
     <dd>

      <p class="para">
       オプションの3番目のパラメータ <em><code class="parameter">strict</code></em> に <strong><code>TRUE</code></strong> が指定された場合、 <span class="function"><strong>array_search()</strong></span> は <em class="emphasis">identical</em> 要素を <em><code class="parameter">haystack</code></em> から探します。
  つまり、 <em><code class="parameter">haystack</code></em> の中で <em><code class="parameter">needle</code></em> の型に一致するかどうか、そしてオブジェクトが同一のインスタンスであるかどうかも確認します。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-search-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <em><code class="parameter">needle</code></em> が見つかった場合に配列のキー、
   それ以外の場合に <strong><code>FALSE</code></strong> を返します。
  </p>
  <p class="para">
   もし <em><code class="parameter">haystack</code></em> に 1 つ以上の
   <em><code class="parameter">needle</code></em> に見つかった場合、
   最初にマッチしたキーが返されます。全てのマッチした値に対するキーを返すためには、代わりに  <span class="function"><a href="function.array-keys.html" class="function">array_keys()</a></span> にパラメータ <em><code class="parameter">search_value</code></em> を付けて使用してください。
  </p>
  <div class="warning"><strong class="warning">警告</strong><p class="simpara">この関数は論理値
<strong><code>FALSE</code></strong> を返す可能性がありますが、<strong><code>FALSE</code></strong> として評価される値を返す可能性もあります。
詳細については <a href="language.types.boolean.html" class="link">論理値</a>の
セクションを参照してください。この関数の返り値を調べるには
<a href="language.operators.comparison.html" class="link">===演算子</a> を
使用してください。</p></div>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-search-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
      <td>
        他のすべての内部関数と同様、無効なパラメータが渡されたときに  <span class="function"><strong>array_search()</strong></span> は <strong><code>NULL</code></strong> を返すようになりました。
       </td>
       <td>4.2.0</td>
       <td>
        PHP 4.2.0 以前では、 <span class="function"><strong>array_search()</strong></span> は、
        失敗した場合に <strong><code>FALSE</code></strong> ではなく <strong><code>NULL</code></strong> を返します。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-search-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4953">
    <p><strong>例1  <span class="function"><strong>array_search()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'blue'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'green'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;2;<br /></span><span style="color: #0000BB">$key&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_search</span><span style="color: #007700">(</span><span style="color: #DD0000">'red'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$key&nbsp;=&nbsp;1;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-search-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - 配列のキーすべて、あるいはその一部を返す</span></li>
    <li class="member"> <span class="function"><a href="function.array-values.html" class="function" rel="rdfs-seeAlso">array_values()</a> - 配列の全ての値を返す</span></li>
    <li class="member"> <span class="function"><a href="function.array-key-exists.html" class="function" rel="rdfs-seeAlso">array_key_exists()</a> - 指定したキーまたは添字が配列にあるかどうかを調べる</span></li>
    <li class="member"> <span class="function"><a href="function.in-array.html" class="function" rel="rdfs-seeAlso">in_array()</a> - 配列に値があるかチェックする</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113156""></a>
  <div class="note">
   <strong class="user">mraedit at yahoo dot com</strong>
   <a href="#113156" class="date">06-Sep-2013 04:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here example if you need to search in multidimensional&nbsp; array<br />
for specific value but the return value is another value from arry this use when get rows from table in DB and you need to search in it<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_value_from_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$key_of_search</span><span class="keyword">, </span><span class="default">$name_of_key_to_return_value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$row </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$row</span><span class="keyword">[</span><span class="default">$key_in_arr</span><span class="keyword">] === </span><span class="default">$needle </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return&nbsp;&nbsp; </span><span class="default">$row</span><span class="keyword">[</span><span class="default">$name_of_key_to_return_value</span><span class="keyword">];&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Testing :<br />
I want to get last name of kasem<br />
<br />
Array (<br />
&nbsp;[0] =&gt; Array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [first_name] =&gt; 'Ahmad'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [last_name] =&gt; 'Mohammad'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <br />
<br />
&nbsp;[0] =&gt; Array (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [id] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [first_name] =&gt; 'Kasem'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [last_name] =&gt; 'Maged'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ) <br />
)<br />
<br />
get_value_from_array('Kasem', $arr, 'first_name', 'last_name')<br />
<br />
The result is : Maged</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112604""></a>
  <div class="note">
   <strong class="user">Best Served Cold dot Com</strong>
   <a href="#112604" class="date">04-Jul-2013 01:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately a lot of the very well written solutions to the multidimensional array search problem did not work for me, so I wrote this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">recursive_array_key_search </span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, array </span><span class="default">$haystack</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) ? </span><span class="default">recursive_array_key_search</span><span class="keyword">(</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">), </span><span class="default">$haystack</span><span class="keyword">) : </span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) &amp;&amp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) === </span><span class="default">$key</span><span class="keyword">) || </span><span class="default">$needle </span><span class="keyword">=== </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">recursive_array_key_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
The advantage of this script is that you can specify one or more keys to search on in an array which passes down the array structure.<br />
<br />
Take this array:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [id] =&gt; 709<br />
&nbsp;&nbsp;&nbsp; [type] =&gt; post<br />
&nbsp;&nbsp;&nbsp; [slug] =&gt; derek<br />
&nbsp;&nbsp;&nbsp; [url] =&gt; <a href="http://bestservedcold.com" rel="nofollow" target="_blank">http://bestservedcold.com</a><br />
&nbsp;&nbsp;&nbsp; [tags] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [one] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 167<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [slug] =&gt; bob<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; Whateverville<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [description] =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [post_count] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [two] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [id] =&gt; 168<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [slug] =&gt; mary<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [title] =&gt; Single<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [description] =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [post_count] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)<br />
<br />
Then using the function you can return either a single variable:<br />
<span class="default">&lt;?php<br />
recursive_array_key_search</span><span class="keyword">(</span><span class="string">'url'</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">); </span><span class="comment">// returns '<a href="http://bestservedcold.com" rel="nofollow" target="_blank">http://bestservedcold.com</a>'<br />
</span><span class="default">recursive_array_key_search</span><span class="keyword">(</span><span class="string">'slug'</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">); </span><span class="comment">// returns the first instance of slug: 'bob'<br />
</span><span class="default">?&gt;<br />
</span>Or, you can specify two or more keys to match in sequence, like so:<br />
<span class="default">&lt;?php<br />
recursive_array_key_search</span><span class="keyword">(array(</span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'slug'</span><span class="keyword">), </span><span class="default">$haystack</span><span class="keyword">) </span><span class="comment">// returns 'mary'<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope that's useful to someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111254""></a>
  <div class="note">
   <strong class="user">Thallion</strong>
   <a href="#111254" class="date">31-Jan-2013 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
And if you want to find the entire series of keys to get to a value, try this.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) </span><span class="default">$val </span><span class="keyword">= </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">$val </span><span class="keyword">!= </span><span class="default">false </span><span class="keyword">and </span><span class="default">$val </span><span class="keyword">!= </span><span class="default">NULL</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$val</span><span class="keyword">==</span><span class="default">NULL</span><span class="keyword">) return array(</span><span class="default">$current_key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_merge</span><span class="keyword">(array(</span><span class="default">$current_key</span><span class="keyword">), </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110120""></a>
  <div class="note">
   <strong class="user">sunelbe at gmail dot com</strong>
   <a href="#110120" class="date">21-Sep-2012 09:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hey i have a easy multidimensional array search function <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">search</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$results </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) &amp;&amp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$subarray</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">, </span><span class="default">search</span><span class="keyword">(</span><span class="default">$subarray</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109720""></a>
  <div class="note">
   <strong class="user">pal dot sch at gmx dot de</strong>
   <a href="#109720" class="date">14-Aug-2012 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a recursive search for a "key" (not value) in nested array/object.<br />
<br />
Returns: array with "values" for the searched "key"<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// recursive search for key in nested array, also search in objects!!<br />
// returns: array with "values" for the searched "key"<br />
</span><span class="keyword">function </span><span class="default">search_nested_arrays</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= (array)</span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// search for the key<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">search_nested_arrays</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$r</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// resolve nested arrays<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result_plain </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$result </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result_plain </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result_plain</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result_plain</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result_plain</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
--------<br />
<br />
<span class="default">&lt;?php<br />
<br />
$example_array </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">=&gt;</span><span class="string">"A1"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">=&gt;(object) array(</span><span class="string">"a"</span><span class="keyword">=&gt;</span><span class="string">"A2"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">=&gt;</span><span class="string">"B"</span><span class="keyword">, </span><span class="string">"C"</span><span class="keyword">));<br />
<br />
</span><span class="default">$result_array </span><span class="keyword">= </span><span class="default">search_nested_arrays</span><span class="keyword">(</span><span class="default">$example_array</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Result:<br />
-------<br />
Array ( [0] =&gt; A2 [1] =&gt; A1 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108783""></a>
  <div class="note">
   <strong class="user">spotitbiz at gmail dot com</strong>
   <a href="#108783" class="date">24-May-2012 07:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have just tried to add the function of recursive Array Search in order to return all finding keys in an array instead of the first matching result index, and further expanded search to contain needle instead of exactly matching: <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursiveArraySearchAll</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$index </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) <br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aIt&nbsp; &nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">RecursiveArrayIterator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$it&nbsp; &nbsp; </span><span class="keyword">= new </span><span class="default">RecursiveIteratorIterator</span><span class="keyword">(</span><span class="default">$aIt</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$resultkeys</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">()) {&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if (((isset(</span><span class="default">$index</span><span class="keyword">) AND (</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">() == </span><span class="default">$index</span><span class="keyword">)) OR (!isset(</span><span class="default">$index</span><span class="keyword">))) AND (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">(), </span><span class="default">$needle</span><span class="keyword">)!==</span><span class="default">false</span><span class="keyword">)) { </span><span class="comment">//$it-&gt;current() == $needle<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$resultkeys</span><span class="keyword">[]=</span><span class="default">$aIt</span><span class="keyword">-&gt;</span><span class="default">key</span><span class="keyword">(); </span><span class="comment">//return $aIt-&gt;key(); <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$it</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">(); <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$resultkeys</span><span class="keyword">;&nbsp; </span><span class="comment">// return all finding in an array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
</span><span class="keyword">} ;<br />
</span><span class="default">?&gt;<br />
</span><br />
To use the function on your array search:<br />
<br />
<span class="default">&lt;?php<br />
print_r</span><span class="keyword">(</span><span class="default">recursiveArraySearchAll</span><span class="keyword">(</span><span class="default">$your</span><span class="keyword">-array,</span><span class="string">'your-needle-to match'</span><span class="keyword">,</span><span class="string">'your-array-index-to-search'</span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
Simple! and Enjoy!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107944""></a>
  <div class="note">
   <strong class="user">sneskid at hotmail dot com</strong>
   <a href="#107944" class="date">16-Mar-2012 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had an array of arrays and needed to find the key of an element by comparing actual reference.<br />
Beware that even with strict equality (===) php will equate arrays via their elements recursively, not by a simple internal pointer check as with class objects. The === can be slow for massive arrays and also crash if they contain circular references.<br />
<br />
This function performs reference sniffing in order to return the key for an element that is exactly a reference of needle.<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_ref_search</span><span class="keyword">(&amp;</span><span class="default">$v</span><span class="keyword">, array &amp;</span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)){ return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$s </span><span class="keyword">as </span><span class="default">$rK </span><span class="keyword">=&gt; &amp;</span><span class="default">$rV</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; { </span><span class="comment">// reference sniff<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tV </span><span class="keyword">= </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( (</span><span class="default">$rV </span><span class="keyword">=== (</span><span class="default">$v </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">)) &amp;&amp; (</span><span class="default">$rV </span><span class="keyword">=== (</span><span class="default">$v </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)) ){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$tV</span><span class="keyword">; return </span><span class="default">$rK</span><span class="keyword">; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$tV</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">; </span><span class="comment">// use null for php &lt; 4.2.0<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">$list&nbsp;&nbsp; </span><span class="keyword">= array();<br />
</span><span class="default">$list</span><span class="keyword">[</span><span class="string">'A'</span><span class="keyword">] = &amp;</span><span class="default">$valA</span><span class="keyword">; </span><span class="default">$list</span><span class="keyword">[</span><span class="string">'B'</span><span class="keyword">] = &amp;</span><span class="default">$valB</span><span class="keyword">;<br />
<br />
</span><span class="default">$valA </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$valB </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br />
</span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'A'<br />
<br />
</span><span class="default">$valA </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">); </span><span class="default">$valB </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br />
</span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'A' because ($valA === $valB) is true by elements<br />
<br />
</span><span class="default">$valB</span><span class="keyword">[] = &amp;</span><span class="default">$valB</span><span class="keyword">; </span><span class="comment">// circular reference<br />
</span><span class="keyword">echo </span><span class="string">'array_ref_search: '</span><span class="keyword">, </span><span class="default">array_ref_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// key 'B'<br />
</span><span class="keyword">echo </span><span class="string">'array_search:&nbsp; &nbsp;&nbsp; '</span><span class="keyword">, </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$valB</span><span class="keyword">, </span><span class="default">$list</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="string">'&lt;/br&gt;'</span><span class="keyword">; </span><span class="comment">// crash because ($valB === $valB) causes infinite loop<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107288""></a>
  <div class="note">
   <strong class="user">nateferrero at gmail dot com</strong>
   <a href="#107288" class="date">28-Jan-2012 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I built a function to find the numeric index of a key in an array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Array key index<br />
&nbsp;* @author Nate Ferrero<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_key_index</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) as </span><span class="default">$k</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$k </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">) return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107223""></a>
  <div class="note">
   <strong class="user">nsstl</strong>
   <a href="#107223" class="date">23-Jan-2012 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Some thing that I wrote from a while, for what ever usefull purpose<br />
<br />
This retrieves recursively a value from an array using a path-like notation.<br />
&nbsp;<br />
&nbsp;&nbsp; with: <br />
&nbsp;&nbsp; &nbsp; $delimiter&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; path delimiter<br />
&nbsp;&nbsp; &nbsp; $strict&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if false, the search will allow gaps between path's components&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$delimiter </span><span class="keyword">= </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$path_token </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$head </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$path_token</span><span class="keyword">);<br />
<br />
&nbsp; if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">]) &amp;&amp; (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$path_token</span><span class="keyword">)))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp; else if (isset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">]))<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$path_token</span><span class="keyword">), </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$head</span><span class="keyword">], </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; else if (</span><span class="default">$strict </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$found </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$delimiter</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">false </span><span class="keyword">!= </span><span class="default">$found</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//use:<br />
<br />
</span><span class="default">$array1 </span><span class="keyword">= array(</span><span class="string">'path' </span><span class="keyword">=&gt; array(</span><span class="string">'to' </span><span class="keyword">=&gt; array(</span><span class="string">'get' </span><span class="keyword">=&gt; array(</span><span class="string">'something' </span><span class="keyword">=&gt; </span><span class="string">'bar'</span><span class="keyword">)), </span><span class="string">'somethingelse'</span><span class="keyword">), </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'anotherthing'</span><span class="keyword">);<br />
<br />
</span><span class="default">$val1 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.get.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val2 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.get'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : array('something'=&gt;'bar')<br />
</span><span class="default">$val3 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path/to/get/something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val4 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// =&gt; will return : 'bar'<br />
</span><span class="default">$val5 </span><span class="keyword">= </span><span class="default">path_through_array</span><span class="keyword">(</span><span class="string">'path.to.something'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="string">'.'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// =&gt; will return : false</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106107""></a>
  <div class="note">
   <strong class="user">revoke</strong>
   <a href="#106107" class="date">11-Oct-2011 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Better solution of multidimensional searching.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, </span><span class="default">$searched</span><span class="keyword">) {<br />
&nbsp; if (empty(</span><span class="default">$searched</span><span class="keyword">) || empty(</span><span class="default">$parents</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;<br />
&nbsp; foreach (</span><span class="default">$parents </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$searched </span><span class="keyword">as </span><span class="default">$skey </span><span class="keyword">=&gt; </span><span class="default">$svalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$exists </span><span class="keyword">= (</span><span class="default">$exists </span><span class="keyword">&amp;&amp; IsSet(</span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">]) &amp;&amp; </span><span class="default">$parents</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">][</span><span class="default">$skey</span><span class="keyword">] == </span><span class="default">$svalue</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$exists</span><span class="keyword">){ return </span><span class="default">$key</span><span class="keyword">; }<br />
&nbsp; }<br />
&nbsp;<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$parents </span><span class="keyword">= array();<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br />
</span><span class="default">$parents</span><span class="keyword">[] = array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1318204800</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">);<br />
<br />
echo </span><span class="default">multidimensional_search</span><span class="keyword">(</span><span class="default">$parents</span><span class="keyword">, array(</span><span class="string">'date'</span><span class="keyword">=&gt;</span><span class="default">1320883200</span><span class="keyword">, </span><span class="string">'uid'</span><span class="keyword">=&gt;</span><span class="default">5</span><span class="keyword">)); </span><span class="comment">// 1<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106056""></a>
  <div class="note">
   <strong class="user">stooshie at gmail dot com</strong>
   <a href="#106056" class="date">06-Oct-2011 11:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Example of a recursive binary search that returns the index rather than boolean.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// returns the index of needle in haystack<br />
</span><span class="keyword">function </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// n is only needed if counting depth of search<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">global </span><span class="default">$n</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the length of passed array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if length is 0, problem<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$l </span><span class="keyword">&lt;= </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the mid element<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= ((</span><span class="default">$l</span><span class="keyword">+(</span><span class="default">$l</span><span class="keyword">%</span><span class="default">2</span><span class="keyword">))/</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// if mid &gt;= length (e.g. l=1)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$m </span><span class="keyword">&gt;= </span><span class="default">$l</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// get the indexed element to compare to the passed element and branch accordingly<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$compare </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; switch(</span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&gt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the lower half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current index - (length of lower half - found index in lower half)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">- (</span><span class="default">$c </span><span class="keyword">- </span><span class="default">$r</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">&lt;</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recurse on the upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_haystack </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, (</span><span class="default">$l</span><span class="keyword">-</span><span class="default">$m</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">binSearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$new_haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// return current position + found index in upper half<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case(</span><span class="default">$compare</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">):<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// found it, so return index<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105955""></a>
  <div class="note">
   <strong class="user">Dave C</strong>
   <a href="#105955" class="date">27-Sep-2011 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a version of binary search that is done via recursion instead of iteration.&nbsp; Remember that your data needs to be presorted!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">static function </span><span class="default">Bin_Search</span><span class="keyword">(&amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$end </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mid </span><span class="keyword">= (int)((</span><span class="default">$end </span><span class="keyword">- </span><span class="default">$start</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">) + </span><span class="default">$start</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$mid</span><span class="keyword">] &gt; </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">Bin_Search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$start</span><span class="keyword">, </span><span class="default">$mid </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$mid</span><span class="keyword">] &lt; </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">Bin_Search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$mid </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">, </span><span class="default">$end</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101869""></a>
  <div class="note">
   <strong class="user">stefano@takys dot it</strong>
   <a href="#101869" class="date">14-Jan-2011 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for searching case insensitive better this:<br />
<br />
<span class="default">&lt;?php<br />
array_search</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">),</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strtolower'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101595""></a>
  <div class="note">
   <strong class="user">user at www dot mp3s dot pl</strong>
   <a href="#101595" class="date">28-Dec-2010 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for case insensitive array_search you could use:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_i</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)) return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100057""></a>
  <div class="note">
   <strong class="user">robert at robert-gonzalez dot com</strong>
   <a href="#100057" class="date">22-Sep-2010 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a way to find the parent hierarchy of a multidimensional array. Being the rogue that I am, I got to coding before searching the manual and came up with two little functions that will return a parent stack for a first find and a complete parent stack, similar in nature to the solution presented by jette at nerdgirl dot dk without all the extra stuff or use of eval(). ;)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Gets the parent stack of a string array element if it is found within the <br />
&nbsp;* parent array<br />
&nbsp;* <br />
&nbsp;* This will not search objects within an array, though I suspect you could <br />
&nbsp;* tweak it easily enough to do that<br />
&nbsp;*<br />
&nbsp;* @param string $child The string array element to search for<br />
&nbsp;* @param array $stack The stack to search within for the child<br />
&nbsp;* @return array An array containing the parent stack for the child if found,<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; false otherwise<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$stack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$stack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the current element of the array is an array, recurse it and capture the return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the return is an array, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$return</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Since we are not on an array, compare directly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$v </span><span class="keyword">== </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And if we match, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return array(</span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$child</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return false since there was nothing found<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Gets the complete parent stack of a string array element if it is found <br />
&nbsp;* within the parent array<br />
&nbsp;* <br />
&nbsp;* This will not search objects within an array, though I suspect you could <br />
&nbsp;* tweak it easily enough to do that<br />
&nbsp;*<br />
&nbsp;* @param string $child The string array element to search for<br />
&nbsp;* @param array $stack The stack to search within for the child<br />
&nbsp;* @return array An array containing the parent stack for the child if found,<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; false otherwise<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$stack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$stack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the current element of the array is an array, recurse it <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // and capture the return stack<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stack </span><span class="keyword">= </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="default">$child</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If the return stack is an array, add it to the return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$stack</span><span class="keyword">) &amp;&amp; !empty(</span><span class="default">$stack</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$stack</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Since we are not on an array, compare directly<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$v </span><span class="keyword">== </span><span class="default">$child</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// And if we match, stack it and return it<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$child</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return the stack<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return empty(</span><span class="default">$return</span><span class="keyword">) ? </span><span class="default">false</span><span class="keyword">: </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// TESTING<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'balloon' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'red' </span><span class="keyword">=&gt; array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'Love'</span><span class="keyword">, </span><span class="string">'Valentine'</span><span class="keyword">, </span><span class="string">'Heart'</span><span class="keyword">,),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'green' </span><span class="keyword">=&gt; array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'Summertime'</span><span class="keyword">, </span><span class="string">'Hope'</span><span class="keyword">,),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'ribbon' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'yellow' </span><span class="keyword">=&gt; array(</span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">'Welcome'</span><span class="keyword">,),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'red' </span><span class="keyword">=&gt; array(</span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">'Love'</span><span class="keyword">, </span><span class="string">'Love'</span><span class="keyword">,),<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
<br />
</span><span class="default">$s </span><span class="keyword">= </span><span class="default">getParentStack</span><span class="keyword">(</span><span class="string">'Love'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">getParentStackComplete</span><span class="keyword">(</span><span class="string">'Love'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
array<br />
&nbsp; 'balloon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; string 'Love' (length=4)<br />
<br />
array<br />
&nbsp; 'balloon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 1 =&gt; string 'Love' (length=4)<br />
&nbsp; 'ribbon' =&gt; <br />
&nbsp;&nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp;&nbsp; 'red' =&gt; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 3 =&gt; string 'Love' (length=4)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 4 =&gt; string 'Love' (length=4)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99964""></a>
  <div class="note">
   <strong class="user">hanan dot ali dot shaikh at googlemail dot com</strong>
   <a href="#99964" class="date">17-Sep-2010 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In this code I write a code to find next and previous element of an array using current element of that array. Let suppose if we are in element 9 and have to access its next and previous element then this code be helpful for someone.<br />
<br />
<span class="default">&lt;?php<br />
$myArray </span><span class="keyword">= array(</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">,</span><span class="default">19</span><span class="keyword">,</span><span class="default">25</span><span class="keyword">);<br />
<br />
</span><span class="default">$currentElement </span><span class="keyword">= </span><span class="default">9</span><span class="keyword">;<br />
</span><span class="default">$firstElement </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">);<br />
</span><span class="default">$lastElement </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$myArray</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
<br />
</span><span class="default">$currentKey </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$currentElement</span><span class="keyword">, </span><span class="default">$myArray</span><span class="keyword">);<br />
</span><span class="default">$currentValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$currentKey</span><span class="keyword">];<br />
<br />
</span><span class="default">$previousValue </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
</span><span class="default">$nextValue </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
if(</span><span class="default">$currentElement</span><span class="keyword">!=</span><span class="default">$lastElement</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextKey </span><span class="keyword">= </span><span class="default">$currentKey </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$nextKey</span><span class="keyword">];<br />
}<br />
<br />
if(</span><span class="default">$currentElement</span><span class="keyword">!=</span><span class="default">$firstElement</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previousKey </span><span class="keyword">= </span><span class="default">$currentKey </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previousValue </span><span class="keyword">= </span><span class="default">$myArray</span><span class="keyword">[</span><span class="default">$previousKey</span><span class="keyword">];<br />
}<br />
<br />
echo </span><span class="default">$previousValue</span><span class="keyword">.</span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$currentValue</span><span class="keyword">.</span><span class="string">"--"</span><span class="keyword">.</span><span class="default">$nextValue</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Thanks,<br />
Hanan Ali</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96866""></a>
  <div class="note">
   <strong class="user">kim at steinhaug dot com</strong>
   <a href="#96866" class="date">19-Mar-2010 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking around for a recursive search by keys in multidimensional arrays. After testing the ones in this thread seems noone accually works. So I put this one together, and it does what you expect it to do.<br />
<br />
You need to find the value for the key "han-solo".<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if( (</span><span class="default">$val </span><span class="keyword">= </span><span class="default">array_search_key</span><span class="keyword">(</span><span class="string">'han-solo'</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">){<br />
&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
} else {<br />
&nbsp; </span><span class="comment">// No keys with the name "han-solo"<br />
</span><span class="keyword">}<br />
<br />
function </span><span class="default">array_search_key</span><span class="keyword">( </span><span class="default">$needle_key</span><span class="keyword">, </span><span class="default">$array </span><span class="keyword">) {<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">AS </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle_key</span><span class="keyword">) return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if( (</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_search_key</span><span class="keyword">(</span><span class="default">$needle_key</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96533""></a>
  <div class="note">
   <strong class="user">camden dot michael at gmail dot com</strong>
   <a href="#96533" class="date">03-Mar-2010 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a case insensitive array search function for a project...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Performs the same function as array_search except that it is case<br />
&nbsp;* insensitive<br />
&nbsp;* @param mixed $needle<br />
&nbsp;* @param array $haystack<br />
&nbsp;* @return mixed<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_nsearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, array </span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$it </span><span class="keyword">= new </span><span class="default">IteratorIterator</span><span class="keyword">(new </span><span class="default">ArrayIterator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">));<br />
&nbsp;&nbsp; foreach(</span><span class="default">$it </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">strcasecmp</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96486""></a>
  <div class="note">
   <strong class="user">jette at nerdgirl dot dk</strong>
   <a href="#96486" class="date">01-Mar-2010 05:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this function to search the value of arrays of any dimension, and return the result with keys preserved:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$result</span><span class="keyword">, &amp;</span><span class="default">$aryPath</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$currentKey</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$iterator </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$location </span><span class="keyword">=&gt; </span><span class="default">$straw</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$iterator</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$next </span><span class="keyword">= (</span><span class="default">$iterator </span><span class="keyword">== </span><span class="default">$count</span><span class="keyword">)?</span><span class="default">false</span><span class="keyword">:</span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$straw</span><span class="keyword">)) </span><span class="default">$aryPath</span><span class="keyword">[</span><span class="default">$location</span><span class="keyword">] = </span><span class="default">$location</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$straw</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$result</span><span class="keyword">,</span><span class="default">$aryPath</span><span class="keyword">,</span><span class="default">$location</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$next</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$aryPath</span><span class="keyword">[</span><span class="default">$currentKey</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$straw </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$straw </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset(</span><span class="default">$aryPath</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strPath </span><span class="keyword">= </span><span class="string">"\$result[</span><span class="default">$currentKey</span><span class="string">] = \$needle;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strPath </span><span class="keyword">= </span><span class="string">"\$result['"</span><span class="keyword">.</span><span class="default">join</span><span class="keyword">(</span><span class="string">"']['"</span><span class="keyword">,</span><span class="default">$aryPath</span><span class="keyword">).</span><span class="string">"'][</span><span class="default">$currentKey</span><span class="string">] = \$needle;"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="default">$strPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Valentine'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="string">'Heart'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'green'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'Summertime'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ballon'</span><span class="keyword">][</span><span class="string">'green'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Hope'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'yellow'</span><span class="keyword">][</span><span class="default">2</span><span class="keyword">] = </span><span class="string">'Welcome'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
</span><span class="default">$ary</span><span class="keyword">[</span><span class="string">'ribbon'</span><span class="keyword">][</span><span class="string">'red'</span><span class="keyword">][</span><span class="default">4</span><span class="keyword">] = </span><span class="string">'Love'</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Just call the function with 3 first parameters set:<br />
//&nbsp; 1) The array to search<br />
//&nbsp; 2) The value to find<br />
//&nbsp; 3) A variable to store the result<br />
</span><span class="default">multiArrayValueSearch</span><span class="keyword">(</span><span class="default">$ary</span><span class="keyword">,</span><span class="string">'Love'</span><span class="keyword">,</span><span class="default">$match</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [ballon] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [red] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [ribbon] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [red] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; Love<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
You can easily adapt it to suit your need of matching, by changing line 16 in the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">$straw </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) {<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94598""></a>
  <div class="note">
   <strong class="user">mrjay42 at gmail dot com</strong>
   <a href="#94598" class="date">13-Nov-2009 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you search a key position in an associative array (keys are uniques), i suggest this function :<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public function </span><span class="default">getKeyPositionInArray</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$keyNeedle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$keyNeedle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93833""></a>
  <div class="note">
   <strong class="user">codeslinger at compsalot dot com</strong>
   <a href="#93833" class="date">02-Oct-2009 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
one thing to be very aware of is that array_search() will fail if the needle is a string and the array itself contains values that are mixture of numbers and strings.&nbsp; (or even a string that looks like a number)<br />
<br />
The problem is that unless you specify "strict" the match is done using ==&nbsp; &nbsp; and in that case any string will match a numeric value of zero which is not what you want.<br />
<br />
-----<br />
<br />
also, php can lookup an index pretty darn fast.&nbsp; for many scenarios, it is practical to maintain multiple arrays, one in which the index of the array is the search key and the normal array that contains the data.<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; $normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] = array(</span><span class="string">'key'</span><span class="keyword">=&gt;</span><span class="default">$key</span><span class="keyword">, </span><span class="string">'data'</span><span class="keyword">=&gt;</span><span class="string">'foo'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$index</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">//very fast lookup, this beats any other kind of search<br />
<br />
&nbsp; </span><span class="keyword">if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">)) <br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$inverse</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$normal</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">];<br />
&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93780""></a>
  <div class="note">
   <strong class="user">pi3ch at gmx dot com</strong>
   <a href="#93780" class="date">29-Sep-2009 06:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The return value for array_search is confusing if the return key is zero. it is better to double check it with in_array() function.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
<br />
$SampleArray </span><span class="keyword">= (</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
<br />
</span><span class="default">$Key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">$SampleArray</span><span class="keyword">);<br />
</span><span class="default">$Zero </span><span class="keyword">= </span><span class="default">in_array</span><span class="keyword">(</span><span class="string">'a'</span><span class="keyword">, </span><span class="default">$SampleArray</span><span class="keyword">);<br />
<br />
if(</span><span class="default">$Key </span><span class="keyword">== </span><span class="default">NULL </span><span class="keyword">&amp;&amp; !</span><span class="default">$Zero</span><span class="keyword">)<br />
&nbsp;&nbsp; echo </span><span class="string">"Key doesnt exists"</span><span class="keyword">;<br />
else<br />
&nbsp;&nbsp; echo </span><span class="string">"Key exists"</span><span class="keyword">;<br />
<br />
&nbsp;</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93352""></a>
  <div class="note">
   <strong class="user">temporal dot pl at gmail dot com</strong>
   <a href="#93352" class="date">05-Sep-2009 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you need to find a given value in a sorted array or - if not found - detect the place where it should be. After that you can for example split the array into two halves, the&nbsp; greater and the smaller one.<br />
<br />
greenmr, dennis.decoene and php at celerondude had all posted very good binary search functions but these functions all return false if the needle was not found in the haystack. I've tweaked greenmr's code a little:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Array_BinarySearch</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$comparator </span><span class="keyword">, &amp;</span><span class="default">$probe </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">Count</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">) -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while ( </span><span class="default">$high </span><span class="keyword">&gt;= </span><span class="default">$low </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= </span><span class="default">Floor</span><span class="keyword">( ( </span><span class="default">$high </span><span class="keyword">+ </span><span class="default">$low </span><span class="keyword">) / </span><span class="default">2 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$comparison </span><span class="keyword">= </span><span class="default">$comparator</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$probe</span><span class="keyword">], </span><span class="default">$needle </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$comparison </span><span class="keyword">&lt; </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif ( </span><span class="default">$comparison </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">$probe </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//The loop ended without a match <br />
&nbsp;&nbsp;&nbsp; //Compensate for needle greater than highest haystack element<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$comparator</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">], </span><span class="default">$needle</span><span class="keyword">) &lt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Now, the function returns true if it finds something and false otherwise. If a needle was found, then $probe will contain it's position. Otherwise, $probe will contain position of where the needle would be if it were there :). This is possible because we pass $probe by reference.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//ultra-simple comparator :)<br />
</span><span class="keyword">function </span><span class="default">CompareNumbers</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$obj </span><span class="keyword">- </span><span class="default">$needle</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//use examples<br />
</span><span class="default">$testArr </span><span class="keyword">= array(</span><span class="default">10</span><span class="keyword">, </span><span class="default">20</span><span class="keyword">, </span><span class="default">30</span><span class="keyword">, </span><span class="default">40</span><span class="keyword">, </span><span class="default">50</span><span class="keyword">);<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">30</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 1 2 - found at position 2<br />
<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">45</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 4 - not found, but it would be at position 4 (between 40 and 45)<br />
&nbsp;<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(-</span><span class="default">3</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 0 - not found, but it would be at position 0 (before 10)<br />
<br />
</span><span class="default">$res </span><span class="keyword">= </span><span class="default">Array_BinarySearch</span><span class="keyword">(</span><span class="default">300</span><span class="keyword">, </span><span class="default">$testArr</span><span class="keyword">, </span><span class="string">'CompareNumbers'</span><span class="keyword">, </span><span class="default">$probe</span><span class="keyword">);<br />
echo (int)</span><span class="default">$res</span><span class="keyword">.</span><span class="string">' '</span><span class="keyword">.</span><span class="default">$probe</span><span class="keyword">.</span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">//output is: 0 5 - not found, but it would be at position 5 (after 50; note, that count($haystack) == 5)<br />
</span><span class="default">?&gt;<br />
</span><br />
See original greenmr's note for additional details about usage of this binary search: <a href="http://php.net/manual/en/function.array-search.php#89413" rel="nofollow" target="_blank">http://php.net/manual/en/function.array-search.php#89413</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93103""></a>
  <div class="note">
   <strong class="user">Nguyen KimKha</strong>
   <a href="#93103" class="date">23-Aug-2009 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can remove some values from array, by using unset() and array_search().<br />
<br />
<span class="default">&lt;?php<br />
<br />
$friends </span><span class="keyword">= array( </span><span class="string">'Bob'</span><span class="keyword">, </span><span class="string">'Ann'</span><span class="keyword">, </span><span class="string">'Peter' </span><span class="keyword">); </span><span class="comment">// Two persons named 'Bob'<br />
</span><span class="default">$find </span><span class="keyword">= </span><span class="string">'Bob'</span><span class="keyword">;<br />
</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$friends </span><span class="keyword">); </span><span class="comment">// Find key of given value<br />
</span><span class="keyword">if (</span><span class="default">$key </span><span class="keyword">!= </span><span class="default">NULL </span><span class="keyword">|| </span><span class="default">$key </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$friends</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]); </span><span class="comment">// remove key from array<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">// Now, $friends = array( 'Ann', 'Peter');<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92991""></a>
  <div class="note">
   <strong class="user">Frank A Cefalu frankcefalu at gmail dot com</strong>
   <a href="#92991" class="date">18-Aug-2009 08:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The original function for searching a multidimensional array didn't let you filter by arraykeys.<br />
<br />
This one is modified so you can search by array keys or not.<br />
<br />
If you want a general search for a value and don't care which specific key to target you dont have to specify it but example.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= (</span><span class="string">"shoes" </span><span class="keyword">=&gt; array(</span><span class="string">"test1"</span><span class="keyword">=&gt; </span><span class="string">"123"</span><span class="keyword">,</span><span class="string">"test2"</span><span class="keyword">=&gt;</span><span class="string">"1234"</span><span class="keyword">,</span><span class="string">"test3"</span><span class="keyword">=&gt;</span><span class="string">"12345"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"shoes2"</span><span class="keyword">=&gt; array(</span><span class="string">"test1"</span><span class="keyword">=&gt;</span><span class="string">"324"</span><span class="keyword">,</span><span class="string">"test2"</span><span class="keyword">=&gt;</span><span class="string">"3515"</span><span class="keyword">,</span><span class="string">"test3"</span><span class="keyword">=&gt;</span><span class="string">"123131"</span><span class="keyword">);<br />
<br />
</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="string">"123"</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"test1"</span><span class="keyword">); </span><span class="comment">// would return shoes<br />
</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="string">"12223"</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">,</span><span class="string">"test1"</span><span class="keyword">); </span><span class="comment">// would return false;<br />
</span><span class="default">?&gt;<br />
</span>this makes it easier to validate a multi-dimensional array to make sure certain data is present.<br />
<br />
Enjoy!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$arraykey</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$arraykey</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$arraykey</span><span class="keyword">]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">[</span><span class="string">'id'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">[</span><span class="default">$arraykey</span><span class="keyword">]) == </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_search_value</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) == </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92396""></a>
  <div class="note">
   <strong class="user">mikeytown2</strong>
   <a href="#92396" class="date">23-Jul-2009 01:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Made a function that I used to search the $_SERVER variable ( <a href="http://php.net/reserved.variables.server " rel="nofollow" target="_blank">http://php.net/reserved.variables.server </a>) for matches to getcwd ( <a href="http://php.net/getcwd " rel="nofollow" target="_blank">http://php.net/getcwd </a>) excluding some key's that I don't want.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Returns all key/values in array that match.<br />
&nbsp;*<br />
&nbsp;* @param $needle<br />
&nbsp;*&nbsp; What your searching for<br />
&nbsp;* @param $haystack<br />
&nbsp;*&nbsp; Array of values<br />
&nbsp;* @param $a_not<br />
&nbsp;*&nbsp; Optional array of key names to exclude<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">boost_array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$a_not </span><span class="keyword">= array()) {<br />
&nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$good </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a_not </span><span class="keyword">as </span><span class="default">$not</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$not</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$good </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$good</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Example Usage<br />
</span><span class="default">$document_root </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\"</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">getcwd</span><span class="keyword">());<br />
</span><span class="default">$rejects </span><span class="keyword">= array(</span><span class="string">'SCRIPT_FILENAME'</span><span class="keyword">);<br />
</span><span class="default">$out </span><span class="keyword">= </span><span class="default">boost_array_find</span><span class="keyword">(</span><span class="default">$document_root</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">, </span><span class="default">$rejects</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Which should output this on most servers.<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [DOCUMENT_ROOT] =&gt; path/to/webroot<br />
)<br />
<br />
On Mosso's servers it will output this<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [PHP_DOCUMENT_ROOT] =&gt; path/to/webroot<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91365""></a>
  <div class="note">
   <strong class="user">buddel</strong>
   <a href="#91365" class="date">08-Jun-2009 05:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
the recursive function by tony have a small bug. it failes when a key is 0<br />
<br />
here is the corrected version of this helpful function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90822""></a>
  <div class="note">
   <strong class="user">tony dot peter at wanadoo dot fr</strong>
   <a href="#90822" class="date">11-May-2009 09:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple recursive array_search function : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current_key</span><span class="keyword">=</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$needle</span><span class="keyword">===</span><span class="default">$value </span><span class="keyword">OR (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">recursive_array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$current_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90711""></a>
  <div class="note">
   <strong class="user">n-regen</strong>
   <a href="#90711" class="date">05-May-2009 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you only know a part of a value in an array and want to know the complete value, you can use the following function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_find</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$item</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span>The function returns the complete first value of $haystack that contains $needle.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90577""></a>
  <div class="note">
   <strong class="user">alex at softservice dot org</strong>
   <a href="#90577" class="date">29-Apr-2009 06:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Can be useful for searching in a multi-dimensional array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, &amp;</span><span class="default">$result</span><span class="keyword">, </span><span class="default">$searchlevel </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {&nbsp; <br />
&nbsp; while(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)])) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$searchlevel </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) == </span><span class="default">$key </span><span class="keyword">&amp;&amp; </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } elseif(</span><span class="default">$searchlevel </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)], </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">$searchlevel </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Examples:<br />
<br />
1. 2-dimensional array, search by both key and value<br />
$arr1 = array(<br />
&nbsp; 1 =&gt; array('id' =&gt; 1, 'name' =&gt; 'Alex', 'gender' =&gt; 'male'),<br />
&nbsp; ...<br />
&nbsp; 12 =&gt; array('id' =&gt; 12, 'name' =&gt; 'John', 'gender' =&gt; 'male'),<br />
);<br />
<br />
<br />
<span class="default">&lt;?php array_search_in_level</span><span class="keyword">(</span><span class="string">'John'</span><span class="keyword">, </span><span class="default">$arr1</span><span class="keyword">, </span><span class="string">'name'</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
$result is:<br />
array(<br />
&nbsp; 'id' =&gt; int 12<br />
&nbsp; 'name' =&gt; string 'John' (length=4)<br />
&nbsp; 'gender' =&gt; string 'male' (length=4)<br />
)<br />
<br />
2. 3-dimensional array, search by value only:<br />
<br />
<span class="default">&lt;?php<br />
$arr2 </span><span class="keyword">= array(<br />
&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'Alex'</span><span class="keyword">, </span><span class="string">'gender' </span><span class="keyword">=&gt; </span><span class="string">'male'</span><span class="keyword">),<br />
&nbsp; </span><span class="comment">/* ... */<br />
&nbsp; </span><span class="default">12 </span><span class="keyword">=&gt; array(</span><span class="string">'id' </span><span class="keyword">=&gt; </span><span class="default">12</span><span class="keyword">, </span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John'</span><span class="keyword">, </span><span class="string">'gender' </span><span class="keyword">=&gt; </span><span class="string">'male'</span><span class="keyword">, </span><span class="string">'friends' </span><span class="keyword">=&gt; array(</span><span class="string">'Helen'</span><span class="keyword">, </span><span class="string">'Julia'</span><span class="keyword">)),<br />
);<br />
<br />
</span><span class="default">array_search_in_level</span><span class="keyword">(</span><span class="string">'Helen'</span><span class="keyword">, </span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$result</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
$result is:<br />
array(<br />
&nbsp; 0 =&gt; string 'Helen' (length=5)<br />
&nbsp; 1 =&gt; string 'Julia' (length=5)<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90034""></a>
  <div class="note">
   <strong class="user">office at drsoft dot com</strong>
   <a href="#90034" class="date">02-Apr-2009 01:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wish to search a multidimensional array by keys:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">extract_values_by_key </span><span class="keyword">( </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$needle_key</span><span class="keyword">, &amp;</span><span class="default">$out </span><span class="keyword">= array () ) {<br />
&nbsp;&nbsp;&nbsp; foreach ( (array) </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( ! </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) &amp;&amp; </span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle_key </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push </span><span class="keyword">( </span><span class="default">$out</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">extract_values_by_key </span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$needle_key</span><span class="keyword">, &amp;</span><span class="default">$out </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89885""></a>
  <div class="note">
   <strong class="user">elie at najberg dot fr</strong>
   <a href="#89885" class="date">27-Mar-2009 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is how to search a part of a val in an array :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_ereg_search</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">eregi</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">)) </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89414""></a>
  <div class="note">
   <strong class="user">greenmr</strong>
   <a href="#89414" class="date">06-Mar-2009 08:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Incidentally, the KeyCompare() function I described above is a generalized version. Since array_bsearch() doesn't care about specific return values, just greater then, less than, or equal to zero, when you are comparing two numbers you can greatly simplify the comparison function to something like:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">KeyCompare</span><span class="keyword">( </span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$needle </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">[</span><span class="string">'my_key'</span><span class="keyword">] - </span><span class="default">$needle</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88710""></a>
  <div class="note">
   <strong class="user">info  at  [hidden]  dot  apanel  dot nl</strong>
   <a href="#88710" class="date">04-Feb-2009 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made this function after I didnt find a recursive array_search function with a limit and the possibility to inverse the search. So here is it:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">search_in_array </span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$inverse </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Settings<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Check if inverse<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$inverse </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">array_reverse </span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment"># Loop<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check for return<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$count </span><span class="keyword">== </span><span class="default">$limit</span><span class="keyword">)&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check for val<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to path<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Count<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Fetch subs<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sub </span><span class="keyword">= </span><span class="default">search_in_array </span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$inverse</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Check if there are subs<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count </span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to path<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$sub</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># Add to count<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">count </span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88465""></a>
  <div class="note">
   <strong class="user">helenadeus at gmail dot com</strong>
   <a href="#88465" class="date">25-Jan-2009 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was trying to use array_search to retrieve all the values that match a given needle, but it turns out only the first match key is returned. I built this little function, which works just like array_search, but returns all the keys that match a given needle instead. The output is an array.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$haystack </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">);<br />
<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">));<br />
<br />
</span><span class="comment">//Output will be<br />
// Array<br />
// (<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;1<br />
//&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;3<br />
// )<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{</span><span class="comment">#array_search_match($needle, $haystack) returns all the keys of the values that match $needle in $haystack<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]==</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$array</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88047""></a>
  <div class="note">
   <strong class="user">tim_hauber at stev dot net</strong>
   <a href="#88047" class="date">07-Jan-2009 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A slight addition to array_search_recursive by Alireza Eliaderani below.&nbsp; The original searched the entire haystack, even if it found the needle at the beginning of the haystack. I must admit I had a little trouble wrapping my head around how to break out of a loop in a recursive function.&nbsp; This version returns after first occurrence of needle. changes commented.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[]=</span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment"># ^^this breaks out of loop when it finds needle<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">} else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$found</span><span class="keyword">=</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$found</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="default">$id</span><span class="keyword">]=</span><span class="default">$found</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># ^^this breaks out of loop when recursive call found needle<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">}&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87773""></a>
  <div class="note">
   <strong class="user">azaozz, gmail</strong>
   <a href="#87773" class="date">21-Dec-2008 02:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expanding on the comment by hansen{}cointel.de:<br />
<br />
When searching for a string and the array contains 0 (zero), the string is casted to (int) by the type-casting which is always 0 (perhaps the opposite is the proper behaviour, the array value 0 should have been casted to string). That produces unexpected results if strict comparison is not used:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">, </span><span class="string">"str1"</span><span class="keyword">, </span><span class="string">"str2"</span><span class="keyword">, </span><span class="string">"str3"</span><span class="keyword">);<br />
echo </span><span class="string">"<br />
str1 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str2 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
str3 = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">).</span><span class="string">",<br />
<br />
str1 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str1"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str2 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str2"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">).</span><span class="string">",<br />
str3 strict = "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"str3"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This will return:<br />
str1 = 0, str2 = 0, str3 = 0, str1 strict = 1, str2 strict = 2, str3 strict = 3</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87579""></a>
  <div class="note">
   <strong class="user">grezvany13 [at] notitia.nl</strong>
   <a href="#87579" class="date">11-Dec-2008 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can search for an array or string within an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(empty(</span><span class="default">$tmp</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } elseif(</span><span class="default">$needle </span><span class="keyword">== </span><span class="default">$haystack</span><span class="keyword">) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It's not recursive yet, so please improve it if you feel for it ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87060""></a>
  <div class="note">
   <strong class="user">michi7x7</strong>
   <a href="#87060" class="date">17-Nov-2008 08:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you exit the function whith "return", there is no need to break ;)<br />
<br />
i would write it like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=array())<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path2</span><span class="keyword">=</span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$path2</span><span class="keyword">[] = </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; else if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ret </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$path2</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
&nbsp;<br />
</span><span class="default">$array </span><span class="keyword">= array(<br />
&nbsp;&nbsp; </span><span class="string">"a" </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"b" </span><span class="keyword">=&gt; array(</span><span class="string">"c"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="string">"d" </span><span class="keyword">=&gt; array(</span><span class="string">"e"</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; ),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"f" </span><span class="keyword">=&gt; array( </span><span class="string">"g"</span><span class="keyword">, </span><span class="string">"h"</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"e"</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
var dump prints a array: (a, d, 0)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85686""></a>
  <div class="note">
   <strong class="user">s0i0m at dreamevilconcepts dot com</strong>
   <a href="#85686" class="date">12-Sep-2008 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote a better array_search_recursive function.&nbsp; The other functions listed work and will evaluate to true, however, they loop through the stack even after the needle is found: so this function will take the overhead off the cpu =P<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
&nbsp; {&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$v</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] === </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="default">$access</span><span class="keyword">[</span><span class="string">'admin'</span><span class="keyword">] = array(</span><span class="string">'nick1'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$access</span><span class="keyword">[</span><span class="string">'voice'</span><span class="keyword">] = array(</span><span class="string">'nick2'</span><span class="keyword">, </span><span class="string">'nick3'</span><span class="keyword">);<br />
<br />
&nbsp; if (</span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">'nick3'</span><span class="keyword">, </span><span class="default">$access</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'yes'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$access</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I wrote this for an access list that I have implemented into an IRC bot.&nbsp; See more interesting stuff at dreamevilconcept's forum.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82897""></a>
  <div class="note">
   <strong class="user">dcez at land dot ru</strong>
   <a href="#82897" class="date">30-Apr-2008 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple way to get variable name by using array_search function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">){<br />
<br />
&nbsp;&nbsp;&nbsp; return (isset(</span><span class="default">$var</span><span class="keyword">))? </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">, </span><span class="default">$GLOBALS</span><span class="keyword">) : </span><span class="default">false</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$boogie </span><span class="keyword">= </span><span class="string">'tonight'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">varname</span><span class="keyword">(</span><span class="default">$boogie</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82283""></a>
  <div class="note">
   <strong class="user">andreas dot damm at maxmachine dot de</strong>
   <a href="#82283" class="date">04-Apr-2008 01:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Combining syntax of array_search() and functionality of array_keys() to get all key=&gt;value associations of an array with the given search-value:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$b_strict </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_intersect_key</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">array_flip</span><span class="keyword">( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$a_haystack</span><span class="keyword">, </span><span class="default">$m_needle</span><span class="keyword">, </span><span class="default">$b_strict</span><span class="keyword">)));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array( </span><span class="string">'pre'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'2'</span><span class="keyword">, </span><span class="string">'3'</span><span class="keyword">, </span><span class="string">'post'</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="string">'2'</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_search_values</span><span class="keyword">( </span><span class="default">2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Will return:<br />
array(4) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; ["pre"] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
&nbsp;&nbsp;&nbsp; [4] =&gt;<br />
&nbsp;&nbsp;&nbsp; string(1) "2"<br />
}<br />
array(2) {<br />
&nbsp;&nbsp;&nbsp; [1] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
&nbsp;&nbsp;&nbsp; ["post"] =&gt;<br />
&nbsp;&nbsp;&nbsp; int(2)<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80902""></a>
  <div class="note">
   <strong class="user">mjaning at gmail dot com</strong>
   <a href="#80902" class="date">06-Feb-2008 08:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi! Based on Chris function, I made another to simplify code and improve diferents features...<br />
<br />
With this function you can:<br />
- Filter Key and Values recursively<br />
- Call function many times using previows result<br />
- Final result always will be an array numeric index contenting a value or sigle array key=&gt;value.<br />
<br />
Thanks for PHP!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$nodes</span><span class="keyword">=array())<br />
{&nbsp; &nbsp; &nbsp; <br />
&nbsp; foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$key1</span><span class="keyword">=&gt;</span><span class="default">$value1</span><span class="keyword">) <br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value1</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$nodes </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value1</span><span class="keyword">, </span><span class="default">$nodes</span><span class="keyword">);<br />
&nbsp;&nbsp; elseif ((</span><span class="default">$key1 </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">) or (</span><span class="default">$value1 </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$nodes</span><span class="keyword">[] = array(</span><span class="default">$key1</span><span class="keyword">=&gt;</span><span class="default">$value1</span><span class="keyword">);<br />
&nbsp; } <br />
&nbsp; return </span><span class="default">$nodes</span><span class="keyword">;<br />
}<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column1"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column2"</span><span class="keyword">=&gt;</span><span class="string">"Class1"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column3"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column4"</span><span class="keyword">=&gt;</span><span class="string">"Class4"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = array(</span><span class="string">"column4"</span><span class="keyword">=&gt;</span><span class="string">"Class3"</span><span class="keyword">);<br />
</span><span class="default">$arg</span><span class="keyword">[] = </span><span class="string">"column3"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$filter </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"Class3"</span><span class="keyword">,</span><span class="default">$arg</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;hr&gt;"</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$filter </span><span class="keyword">= </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="string">"column3"</span><span class="keyword">,</span><span class="default">$filter</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;hr&gt;"</span><span class="keyword">;</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$filter</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80692""></a>
  <div class="note">
   <strong class="user">pmmout at gmail dot com</strong>
   <a href="#80692" class="date">29-Jan-2008 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
MultiArray find function.<br />
After some time unsuccessful looking for algorithm to find a string in multidimensional array I wrote one:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multidimArrayLocate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">){<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$arrayValue</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arrayValue</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$text</span><span class="keyword">) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arrayValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">multidimArrayLocate</span><span class="keyword">(</span><span class="default">$arrayValue</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">== </span><span class="default">$text</span><span class="keyword">) </span><span class="default">$arrayResult</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$arrayValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$arrayResult</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80385""></a>
  <div class="note">
   <strong class="user">steev at anticulture dot co dot uk</strong>
   <a href="#80385" class="date">13-Jan-2008 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just adding my two penneth to someone else's script from below. If you need to easily index your csv use this slightly modified script to parse a csv file into an associative array 2d, indexed by the first column value<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">buildStock</span><span class="keyword">(</span><span class="default">$File</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$handle </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="default">$File</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$fields </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$data </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">, </span><span class="default">1000</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$detail</span><span class="keyword">[] = </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"details"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$detail</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$detail </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$fields </span><span class="keyword">as </span><span class="default">$z</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//original code<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //$stock[$x][$z] = $i[$y];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$stock</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">[</span><span class="string">'0'</span><span class="keyword">]][</span><span class="default">$z</span><span class="keyword">] = </span><span class="default">$i</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$stock</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">buildStock</span><span class="keyword">(</span><span class="string">"conf.csv"</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79535""></a>
  <div class="note">
   <strong class="user">toni dot garcia dot gutsens at gmail dot com</strong>
   <a href="#79535" class="date">02-Dec-2007 02:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Make a recursive search on array and return the matches elements in the same structure than the original array and unset empty arrays:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">,&amp;</span><span class="default">$tree</span><span class="keyword">=Array(),</span><span class="default">$index</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tree</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">) </span><span class="default">$tree</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(Array(),</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$current</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_search_recursive</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$current</span><span class="keyword">,</span><span class="default">$tree</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">.</span><span class="string">"[</span><span class="default">$k</span><span class="string">]"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="string">"\$a=\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">];"</span><span class="keyword">); </span><span class="comment">// unset all elements = empty array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">)&nbsp; </span><span class="comment">//is empty?<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">eval(</span><span class="string">"unset(\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="default">$k</span><span class="string">]);"</span><span class="keyword">); </span><span class="comment">// unset array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$current</span><span class="keyword">!=</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; eval(</span><span class="string">"unset(\$tree</span><span class="keyword">{</span><span class="default">$index</span><span class="keyword">}</span><span class="string">[</span><span class="keyword">{</span><span class="default">$k</span><span class="keyword">}</span><span class="string">]);"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$tree</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77750""></a>
  <div class="note">
   <strong class="user">kermes [at] thesevens [dot] net</strong>
   <a href="#77750" class="date">12-Sep-2007 12:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A variation of previous searches that returns an array of keys that match the given value:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">), </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage would be as follows:<br />
<span class="default">&lt;?php<br />
$testArray </span><span class="keyword">= array(</span><span class="string">'one' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'two' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">, </span><span class="string">'four' </span><span class="keyword">=&gt; </span><span class="string">'test2'</span><span class="keyword">, </span><span class="string">'five' </span><span class="keyword">=&gt; </span><span class="string">'test1'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_ksearch</span><span class="keyword">(</span><span class="default">$testArray</span><span class="keyword">, </span><span class="string">'test1'</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77525""></a>
  <div class="note">
   <strong class="user">robertark at gmail dot com</strong>
   <a href="#77525" class="date">02-Sep-2007 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A better array_isearch would be to store all results in an array, then return the KEYS stored in $found, such as:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">){<br />
&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br />
&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
To use, simply have an array to search from then search it, for example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$found </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">) == </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)) </span><span class="default">$found</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$found</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$stored </span><span class="keyword">= </span><span class="string">"these are an array"</span><span class="keyword">;<br />
</span><span class="default">$stored </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">" "</span><span class="keyword">, </span><span class="default">$stored</span><span class="keyword">);<br />
<br />
</span><span class="default">$compare </span><span class="keyword">= array(</span><span class="string">"these"</span><span class="keyword">, </span><span class="string">"are"</span><span class="keyword">, </span><span class="string">"some"</span><span class="keyword">, </span><span class="string">"results"</span><span class="keyword">, </span><span class="string">"stored"</span><span class="keyword">, </span><span class="string">"in"</span><span class="keyword">, </span><span class="string">"an"</span><span class="keyword">, </span><span class="string">"array"</span><span class="keyword">);<br />
foreach(</span><span class="default">$stored </span><span class="keyword">as </span><span class="default">$store</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_isearch</span><span class="keyword">(</span><span class="default">$store</span><span class="keyword">, </span><span class="default">$compare</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$result</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Key: "</span><span class="keyword">.</span><span class="default">$results</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;Found: "</span><span class="keyword">.</span><span class="default">$compare</span><span class="keyword">[</span><span class="default">$result</span><span class="keyword">].</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps :-)<br />
<br />
-Rob</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75319""></a>
  <div class="note">
   <strong class="user">php5 site builder</strong>
   <a href="#75319" class="date">23-May-2007 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you encounter a situation where condition test is failing on the result of either array_search or in_array, even when using "===" and "!==", make sure to set $strict = true in your array_search() or in_array() function call.<br />
<br />
A situation such as :<br />
<br />
$arTemp[0] = 1;<br />
$arTemp[1] = 0;<br />
$arTemp[2] = 3;<br />
$arTemp[3] = 5;<br />
$sTempTest = 'BLAH';<br />
<br />
$bResult = in_array($sTempTest,$arTemp);<br />
$bResult2 = array_search($sTempTest,$arTemp);<br />
<br />
var_dump($bResult);<br />
var_dump($bResult2);<br />
<br />
will result in :<br />
<br />
boolean true<br />
int 1<br />
<br />
Using :<br />
<br />
$bResult = in_array($sTempTest,$arTemp,true);<br />
$bResult2 = array_search($sTempTest,$arTemp,true);<br />
<br />
will yield :<br />
boolean false<br />
boolean false<br />
<br />
This is necessary in any instance where you have an array value equal to the integer zero.&nbsp; As soon as you put the zero in quotes or double quotes (a string), the evaluation works with in_array &amp; array_search without the $strict parameter being set.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72640""></a>
  <div class="note">
   <strong class="user">elvenone at gmail dot com</strong>
   <a href="#72640" class="date">27-Jan-2007 02:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Search an array in reverse order.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_reverse_search</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$value</span><span class="keyword">) return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72139""></a>
  <div class="note">
   <strong class="user">erick dot xavier at gmail dot com</strong>
   <a href="#72139" class="date">04-Jan-2007 01:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Modifing the "multiarray_search" to unordered Array....<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">, </span><span class="default">$campo</span><span class="keyword">, </span><span class="default">$valor</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; while(isset(</span><span class="default">$arrayVet</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">)])){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$arrayVet</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">)][</span><span class="default">$campo</span><span class="keyword">] == </span><span class="default">$valor</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">key</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$arrayVet</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//I.e.:<br />
<br />
</span><span class="default">$myArr </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">13 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"banana"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">654 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"apple"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2445 </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"fruit" </span><span class="keyword">=&gt; </span><span class="string">"nothing more"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
print(</span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$myArr </span><span class="keyword">, </span><span class="string">"fruit"</span><span class="keyword">, </span><span class="string">"apple"</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Output:<br />
654<br />
*/<br />
<br />
//and<br />
<br />
</span><span class="keyword">print(</span><span class="default">multiarray_search</span><span class="keyword">(</span><span class="default">$myArr </span><span class="keyword">, </span><span class="string">"fruit"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Output:<br />
-1<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71746""></a>
  <div class="note">
   <strong class="user">otto at twbc dot net</strong>
   <a href="#71746" class="date">14-Dec-2006 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unlimited depth array regular expression search, I found it useful, perhaps someone else will too. Searches on the array values only. Key search could be easily added.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Array_Search_Preg</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$in_array</span><span class="keyword">, </span><span class="default">$keys_found</span><span class="keyword">=Array() )<br />
{<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$in_array </span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$in_array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">) ) </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Array_Search_Preg</span><span class="keyword">( </span><span class="default">$find</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">, </span><span class="default">$keys_found </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">preg_match</span><span class="keyword">( </span><span class="string">'/'</span><span class="keyword">. </span><span class="default">$find </span><span class="keyword">.</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$val </span><span class="keyword">) ) </span><span class="default">$keys_found</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$keys_found</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71129""></a>
  <div class="note">
   <strong class="user">evert_18 at hotmail dot com</strong>
   <a href="#71129" class="date">13-Nov-2006 03:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can search in multidimensional arrays, no mather how multidimensional the array is! <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_search</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">|| </span><span class="default">$key </span><span class="keyword">== </span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">true</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">search</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">false</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70615""></a>
  <div class="note">
   <strong class="user">dmitry dot polushkin at gmail dot com</strong>
   <a href="#70615" class="date">22-Oct-2006 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get the key of the found search value, use:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">);<br />
echo </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">'c'</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">), </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69965""></a>
  <div class="note">
   <strong class="user">Digitally Designed dot co dot uk</strong>
   <a href="#69965" class="date">28-Sep-2006 11:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My Function to search a Multidimensional array.<br />
<br />
Pass in :<br />
<br />
$theNeedle as what you want to find.<br />
$theHaystack as the array <br />
$keyToSearch as what key in the array you want to find the value in.<br />
<br />
<span class="default">&lt;?php&nbsp; &nbsp; <br />
<br />
</span><span class="keyword">function </span><span class="default">myMulti_Array_Search</span><span class="keyword">(</span><span class="default">$theNeedle</span><span class="keyword">, </span><span class="default">$theHaystack</span><span class="keyword">, </span><span class="default">$keyToSearch</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$theHaystack </span><span class="keyword">as </span><span class="default">$theKey </span><span class="keyword">=&gt; </span><span class="default">$theValue</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$intCurrentKey </span><span class="keyword">= </span><span class="default">$theKey</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$theValue</span><span class="keyword">[</span><span class="default">$keyToSearch</span><span class="keyword">] == </span><span class="default">$theNeedle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$intCurrentKey </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69826""></a>
  <div class="note">
   <strong class="user">lars-magne</strong>
   <a href="#69826" class="date">22-Sep-2006 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Further comments on the multidimensional array searches given earlier:<br />
<br />
I needed an extended search function which could search in both keys and values in any # dimension array and return all results. Each result contains key/value hit, type (key or value), key path and value (in case result is a key).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$exact </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">, </span><span class="default">$trav_keys </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) || !</span><span class="default">$search </span><span class="keyword">|| (</span><span class="default">$trav_keys </span><span class="keyword">&amp;&amp; !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$trav_keys</span><span class="keyword">))) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$res_arr </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$used_keys </span><span class="keyword">= </span><span class="default">$trav_keys </span><span class="keyword">? </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$trav_keys</span><span class="keyword">, array(</span><span class="default">$key</span><span class="keyword">)) : array(</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$key </span><span class="keyword">=== </span><span class="default">$search</span><span class="keyword">) || (!</span><span class="default">$exact </span><span class="keyword">&amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">))) </span><span class="default">$res_arr</span><span class="keyword">[] = array(</span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">"key"</span><span class="keyword">, </span><span class="string">'hit' </span><span class="keyword">=&gt; </span><span class="default">$key</span><span class="keyword">, </span><span class="string">'keys' </span><span class="keyword">=&gt; </span><span class="default">$used_keys</span><span class="keyword">, </span><span class="string">'val' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) &amp;&amp; (</span><span class="default">$children_res </span><span class="keyword">= </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$exact</span><span class="keyword">, </span><span class="default">$used_keys</span><span class="keyword">))) </span><span class="default">$res_arr </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$res_arr</span><span class="keyword">, </span><span class="default">$children_res</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else if((</span><span class="default">$val </span><span class="keyword">=== </span><span class="default">$search</span><span class="keyword">) || (!</span><span class="default">$exact </span><span class="keyword">&amp;&amp; (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">), </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">))) </span><span class="default">$res_arr</span><span class="keyword">[] = array(</span><span class="string">'type' </span><span class="keyword">=&gt; </span><span class="string">"val"</span><span class="keyword">, </span><span class="string">'hit' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">, </span><span class="string">'keys' </span><span class="keyword">=&gt; </span><span class="default">$used_keys</span><span class="keyword">, </span><span class="string">'val' </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$res_arr </span><span class="keyword">? </span><span class="default">$res_arr </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// I.e.:<br />
</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">754</span><span class="keyword">] = </span><span class="string">"Norwegian"</span><span class="keyword">;<br />
</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">28</span><span class="keyword">][</span><span class="string">'details'</span><span class="keyword">][</span><span class="string">'Norway'</span><span class="keyword">] = </span><span class="string">"Oslo"</span><span class="keyword">;<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">"Norw"</span><span class="keyword">;<br />
<br />
if(</span><span class="default">$results </span><span class="keyword">= </span><span class="default">array_search_ext</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">))<br />
&nbsp; foreach(</span><span class="default">$results </span><span class="keyword">as </span><span class="default">$res</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Found '</span><span class="default">$needle</span><span class="string">' in </span><span class="default">$res</span><span class="keyword">[</span><span class="default">type</span><span class="keyword">]</span><span class="string"> '</span><span class="default">$res</span><span class="keyword">[</span><span class="default">hit</span><span class="keyword">]</span><span class="string">', using key(s) '"</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">"', '"</span><span class="keyword">, </span><span class="default">$res</span><span class="keyword">[</span><span class="string">'keys'</span><span class="keyword">]).</span><span class="string">"'. (Value: </span><span class="default">$res</span><span class="keyword">[</span><span class="default">val</span><span class="keyword">]</span><span class="string">)&lt;br /&gt;\n"</span><span class="keyword">;<br />
<br />
</span><span class="comment">/* Printed result will be:<br />
Found 'Norw' in val 'Norwegian', using key(s) '754'. (Value: Norwegian)<br />
Found 'Norw' in key 'Norway', using key(s) '28', 'details', 'Norway'. (Value: Oslo)<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69588""></a>
  <div class="note">
   <strong class="user">mark dot php at mhudson dot net</strong>
   <a href="#69588" class="date">12-Sep-2006 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was going to complain bitterly about array_search() using zero-based indexes, but then I realized I should be using in_array() instead.<br />
<br />
// if ( isset( $_GET['table'] ) and array_search( $_GET['table'], $valid_tables) ) {&nbsp; // BAD: fails on first[0] element<br />
// if ( isset( $_GET['table'] ) and ( FALSE !== array_search( $_GET['table'], $valid_tables) ) ) { OK: but wasteful and convoluted<br />
&nbsp;&nbsp; if ( isset( $_GET['table'] ) and in_array( $_GET['table'], $valid_tables) ) { // BETTER<br />
<br />
The essence is this: if you really want to know the location of an element in an array, then use array_search, else if you only want to know whether that element exists, then use in_array()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69232""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69232" class="date">28-Aug-2006 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is based on the function in comment "array_search" from July 26th 2006.<br />
<br />
I added the possibility of defining the key which $Needle shall be searched for.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// search haystack for needle and return an array of the key path,<br />
// FALSE otherwise.<br />
// if NeedleKey is given, return only for this key<br />
// mixed ArraySearchRecursive(mixed Needle,array Haystack<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [,NeedleKey[,bool Strict[,array Path]]])<br />
<br />
</span><span class="keyword">function </span><span class="default">ArraySearchRecursive</span><span class="keyword">(</span><span class="default">$Needle</span><span class="keyword">,</span><span class="default">$Haystack</span><span class="keyword">,</span><span class="default">$NeedleKey</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$Path</span><span class="keyword">=array()) {<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Haystack</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$Haystack </span><span class="keyword">as </span><span class="default">$Key </span><span class="keyword">=&gt; </span><span class="default">$Val</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Val</span><span class="keyword">)&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$SubPath</span><span class="keyword">=</span><span class="default">ArraySearchRecursive</span><span class="keyword">(</span><span class="default">$Needle</span><span class="keyword">,</span><span class="default">$Val</span><span class="keyword">,</span><span class="default">$NeedleKey</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Strict</span><span class="keyword">,</span><span class="default">$Path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Path</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$Path</span><span class="keyword">,Array(</span><span class="default">$Key</span><span class="keyword">),</span><span class="default">$SubPath</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$Path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif((!</span><span class="default">$Strict</span><span class="keyword">&amp;&amp;</span><span class="default">$Val</span><span class="keyword">==</span><span class="default">$Needle</span><span class="keyword">&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Key</span><span class="keyword">==(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$NeedleKey</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">$NeedleKey</span><span class="keyword">:</span><span class="default">$Key</span><span class="keyword">))||<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="default">$Strict</span><span class="keyword">&amp;&amp;</span><span class="default">$Val</span><span class="keyword">===</span><span class="default">$Needle</span><span class="keyword">&amp;&amp;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Key</span><span class="keyword">==(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$NeedleKey</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">$NeedleKey</span><span class="keyword">:</span><span class="default">$Key</span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Path</span><span class="keyword">[]=</span><span class="default">$Key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$Path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Remove unnecessary new lines. I had to add them because of too long lines.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64598""></a>
  <div class="note">
   <strong class="user">gullevek at gullevek dot org</strong>
   <a href="#64598" class="date">19-Apr-2006 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There were two previous entries for having a recursive search. The first one only searched for values, second one for values with an optional key.<br />
<br />
But both of those stopped after they found an entry. I needed, that it searches recursive, with optional key and returns me all matches found in the array.<br />
<br />
So I wrote this function:<br />
<br />
needle is the value you search, haystack is the array of course, key is the optional key in the array where the needle should be. path should be never set on intial call. its an internal used variable.<br />
<br />
It returns an array $path with the array entry 'found' where you can find all found groups. In these groups you have the array which holds the keys to find the data.<br />
<br />
I hope this helps some of you.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$path </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// go through the array,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$_key </span><span class="keyword">=&gt; </span><span class="default">$_value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// only value matches<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">) &amp;&amp; </span><span class="default">$_value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">&amp;&amp; !</span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'found'</span><span class="keyword">][] = </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// key and value matches<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">elseif (</span><span class="default">is_scalar</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">) &amp;&amp; </span><span class="default">$_value </span><span class="keyword">== </span><span class="default">$needle </span><span class="keyword">&amp;&amp; </span><span class="default">$_key </span><span class="keyword">== </span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'found'</span><span class="keyword">][] = </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$_value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// add position to working<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">][</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]] = </span><span class="default">$_key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// we will up a level<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] += </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// call recursive<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$_value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// cut all that is &gt;= level<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">[</span><span class="string">'work'</span><span class="keyword">], </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// step back a level<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[</span><span class="string">'level'</span><span class="keyword">] -= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$path</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
If you call it with this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $right_side </span><span class="keyword">= array (</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'alpha'</span><span class="keyword">, </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="string">'beta'</span><span class="keyword">, </span><span class="string">'delta' </span><span class="keyword">=&gt; </span><span class="string">'gamma'</span><span class="keyword">, </span><span class="string">'gamma' </span><span class="keyword">=&gt; </span><span class="string">'delta'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">'beta'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="string">'bar'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">array_search_recursive_all</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$right_side</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You will find in $pos this data<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [level] =&gt; -1<br />
&nbsp;&nbsp;&nbsp; [work] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [found] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63338""></a>
  <div class="note">
   <strong class="user">RichGC</strong>
   <a href="#63338" class="date">20-Mar-2006 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To expand on previous comments, here are some examples of<br />
where using array_search within an IF statement can go<br />
wrong when you want to use the array key thats returned.<br />
<br />
Take the following two arrays you wish to search:<br />
<br />
<span class="default">&lt;?php<br />
$fruit_array </span><span class="keyword">= array(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"orange"</span><span class="keyword">);<br />
</span><span class="default">$fruit_array </span><span class="keyword">= array(</span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="string">"apple"</span><span class="keyword">, </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="string">"pear"</span><span class="keyword">, </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="string">"orange"</span><span class="keyword">);<br />
<br />
if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">))<br />
</span><span class="comment">//PROBLEM: the first array returns a key of 0 and IF treats it as FALSE<br />
<br />
</span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: works on numeric keys of the first array but fails on the second<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)))<br />
</span><span class="comment">//PROBLEM: using the above in the wrong order causes $i to always equal 1<br />
<br />
</span><span class="keyword">if (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//PROBLEM: explicit with no extra brackets causes $i to always equal 1<br />
<br />
</span><span class="keyword">if ((</span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"apple"</span><span class="keyword">, </span><span class="default">$fruit_array</span><span class="keyword">)) !== </span><span class="default">FALSE</span><span class="keyword">)<br />
</span><span class="comment">//YES: works on both arrays returning their keys<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62810""></a>
  <div class="note">
   <strong class="user">congaz at yahoo dot dk</strong>
   <a href="#62810" class="date">10-Mar-2006 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Search a multi-dimensional array on keys!<br />
-------------------------------------------<br />
<br />
I needed to search dynamically in a multi-dimen array on keys. I came up with this little neat function. It is so amazingly simple, that I actually didn't think it would work - but it does... <br />
<br />
mixed array_searchMultiOnKeys(array, array);<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, </span><span class="default">$searchKeysArray</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Iterate through searchKeys, making $multiArray smaller and smaller.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$searchKeysArray </span><span class="keyword">as </span><span class="default">$keySearch</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$multiArray </span><span class="keyword">= </span><span class="default">$multiArray</span><span class="keyword">[</span><span class="default">$keySearch</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$multiArray</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Check $result. <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// An array was found at the end of the search. Return true.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else if (</span><span class="default">$result </span><span class="keyword">== </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// There was nothing found at the end of the search. Return false.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="comment">// End of function,<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">// --- Test array_searchMultiOnKeys ---<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'downloads'</span><span class="keyword">][</span><span class="string">'music'</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'downloads'</span><span class="keyword">][</span><span class="string">'pressmaterial'</span><span class="keyword">] = </span><span class="default">5</span><span class="keyword">;<br />
</span><span class="default">$multiArray</span><span class="keyword">[</span><span class="string">'webpages'</span><span class="keyword">][</span><span class="string">'links'</span><span class="keyword">] = </span><span class="default">7</span><span class="keyword">;<br />
<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'links'</span><span class="keyword">)); </span><span class="comment">// returns 7.<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'downloads'</span><span class="keyword">)); </span><span class="comment">// returns true.<br />
</span><span class="default">array_searchMultiOnKeys</span><span class="keyword">(</span><span class="default">$multiArray</span><span class="keyword">, array(</span><span class="string">'webpages'</span><span class="keyword">, </span><span class="string">'downloads'</span><span class="keyword">, </span><span class="string">'software'</span><span class="keyword">)); </span><span class="comment">// returns false.<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$multiArray / $searchKeysArray can be any size.<br />
<br />
Happy hacking...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61672""></a>
  <div class="note">
   <strong class="user">hansen{}cointel.de</strong>
   <a href="#61672" class="date">09-Feb-2006 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
may be good to take note of PHP's mind-boggling 'fuzzy' (vulgo "magic type-casting") comparison features not only in using the results, but also in the search, too:<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"d"</span><span class="keyword">);<br />
echo </span><span class="string">"a: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"b: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"b"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"c: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"c"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"d: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"0: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"0"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"x: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"x"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
echo </span><span class="string">"1: "</span><span class="keyword">.</span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"1"</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>will result in:<br />
a: 0, b: 1, c: 2, d: 2, 0: 2, x: 2, 1: false<br />
<br />
as from "c" on, the first match found in $a is "0", as any string compared to an int is automatically cast to (int)0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47116""></a>
  <div class="note">
   <strong class="user">scripts at webfire dot org</strong>
   <a href="#47116" class="date">03-Nov-2004 06:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
* Multi-Dimensional Array Search *<br />
If you're searching for a function to search in Multi-Arrays,<br />
this is probably usefull for you. <br />
-------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="default">$search_value</span><span class="keyword">, </span><span class="default">$the_array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$the_array</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$the_array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="default">$search_value</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (</span><span class="default">$result </span><span class="keyword">== </span><span class="default">true</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$search_value </span><span class="keyword">== </span><span class="default">$the_array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
-------------------------------------------------------------<br />
It will return an Array with the keys from the original array<br />
where your search-string was found or false. e.g.:<br />
-------------------------------------------------------------<br />
<br />
<span class="default">&lt;?php<br />
$foo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'xx'</span><span class="keyword">] = </span><span class="string">'bar 1'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'xx'</span><span class="keyword">] = </span><span class="string">'bar 2'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'bb'</span><span class="keyword">] = </span><span class="string">'bar 3'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">][</span><span class="string">'yy'</span><span class="keyword">] = </span><span class="string">'bar 4'</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[</span><span class="string">'info'</span><span class="keyword">][</span><span class="default">1</span><span class="keyword">] = </span><span class="string">'bar 5'</span><span class="keyword">;<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">multi_array_search</span><span class="keyword">(</span><span class="string">'bar 3'</span><span class="keyword">, </span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
-------------------------------------------------------------<br />
<br />
Output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp; &nbsp;&nbsp; [0] =&gt; 2<br />
&nbsp;&nbsp; &nbsp;&nbsp; [1] =&gt; a<br />
&nbsp;&nbsp; &nbsp;&nbsp; [2] =&gt; bb<br />
)<br />
<br />
-------------------------------------------------------------<br />
<br />
I hope you like it ;)<br />
greetz Udo<br />
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46762""></a>
  <div class="note">
   <strong class="user">Flix Cloutier &lt;felixcca at yahoo dot ca&gt;</strong>
   <a href="#46762" class="date">22-Oct-2004 02:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is no function to count the occurences of needle in haystack, so I made my own one...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_match</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if( !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) ) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while( (</span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack </span><span class="keyword">)) != </span><span class="default">FALSE </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)] = </span><span class="default">md5</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
I know it's a bit crappy, but don't ask me too much, I'm still only 13... ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44894""></a>
  <div class="note">
   <strong class="user">Wouter van Vliet &lt;me at woutervanvliet dot nl&gt;</strong>
   <a href="#44894" class="date">19-Aug-2004 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a way to use a user defined function for array_search and eventually came up writing my own. Which was remarkably simple :P. Let me share this:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_usearch</span><span class="keyword">(</span><span class="default">$cb</span><span class="keyword">, </span><span class="default">$ndl</span><span class="keyword">, </span><span class="default">$hs</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$hs</span><span class="keyword">)) </span><span class="default">user_error</span><span class="keyword">(</span><span class="string">'Third argument to array_usearch is expected to be an array, '</span><span class="keyword">.</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$hs</span><span class="keyword">).</span><span class="string">' given'</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$hs </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) if (</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">$cb</span><span class="keyword">, Array(</span><span class="default">$ndl</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, </span><span class="default">$strict</span><span class="keyword">))) return </span><span class="default">$key</span><span class="keyword">;<br />
};<br />
</span><span class="default">?&gt;<br />
</span><br />
I'm not sure if I'm following correct conventions to specify the callback as the first argument, but it seemed most logical to me to not interrupt the order of the other four arguments (mixed needle, array haystack, boole strict).<br />
<br />
[so far for my first post to the php notes]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42101""></a>
  <div class="note">
   <strong class="user">softexpert [at] libertysurf [dot] fr</strong>
   <a href="#42101" class="date">03-May-2004 08:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I use this for searching for a value in a bidimensional array .<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">SearchBiDimArray</span><span class="keyword">(&amp;</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">$dimNo</span><span class="keyword">, </span><span class="default">$searchValue</span><span class="keyword">, </span><span class="default">$returnIndex </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$dimNo</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$elcount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$elcount</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] === </span><span class="default">$searchValue</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$returnIndex</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$searchValue</span><span class="keyword">, </span><span class="default">$theArray</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$theArray </span><span class="keyword">= array();<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue1'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue1'</span><span class="keyword">;<br />
<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue2'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue2'</span><span class="keyword">;<br />
<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'firstproperty'</span><span class="keyword">] = </span><span class="string">'avalue3'</span><span class="keyword">;<br />
</span><span class="default">$theArray</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="string">'secondproperty'</span><span class="keyword">] = </span><span class="string">'anothervalue3'</span><span class="keyword">;<br />
<br />
print </span><span class="default">SearchBiDimArray</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'anothervalue2'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="comment">// result is 1<br />
<br />
</span><span class="keyword">print </span><span class="default">SearchBiDimArray</span><span class="keyword">(</span><span class="default">$theArray</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'anothervalue2'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
</span><span class="comment">// result is<br />
//Array<br />
//(<br />
//&nbsp; &nbsp; [firstproperty] =&gt; avalue2<br />
//&nbsp; &nbsp; [secondproperty] =&gt; anothervalue2<br />
//)<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39115""></a>
  <div class="note">
   <strong class="user">dennis dot decoene at removthis dot moveit dot be</strong>
   <a href="#39115" class="date">17-Jan-2004 07:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It has been said before: array_search is VERY slow. Everyone knows binary search is fast by design. Here is an implementation.<br />
<br />
<span class="default">&lt;?php<br />
$arr</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">9</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">);<br />
</span><span class="default">$searchfor </span><span class="keyword">= </span><span class="default">6</span><span class="keyword">;<br />
echo </span><span class="default">binsearch</span><span class="keyword">(</span><span class="default">$searchfor</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @return integer<br />
&nbsp;* @param var $needle<br />
&nbsp;* @param array $haystack<br />
&nbsp;* @desc Feed a sorted array to $haystack and a value to search for to $needle.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; It will return false if not found or the index where it was found.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This function is superfast. Try an array with 50.000 elements and search for something,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; you will be amazed.<br />
*/<br />
</span><span class="keyword">function </span><span class="default">binsearch</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$high </span><span class="keyword">- </span><span class="default">$low </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$probe </span><span class="keyword">= (</span><span class="default">$high </span><span class="keyword">+ </span><span class="default">$low</span><span class="keyword">) / </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$probe</span><span class="keyword">] &lt; </span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$low </span><span class="keyword">= </span><span class="default">$probe</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$high </span><span class="keyword">= </span><span class="default">$probe</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$high </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) || </span><span class="default">$haystack</span><span class="keyword">[</span><span class="default">$high</span><span class="keyword">] != </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$high</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37364""></a>
  <div class="note">
   <strong class="user">php at celerondude dot com</strong>
   <a href="#37364" class="date">12-Nov-2003 12:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think array_search uses serial search because they binary search function i wrote here seems to do a better job for records that are not always at the beginning of the array. <br />
<br />
Here it is<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">binarySearch </span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$t</span><span class="keyword">, </span><span class="default">$l</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$t</span><span class="keyword">&lt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$l</span><span class="keyword">]||</span><span class="default">$t</span><span class="keyword">&gt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">])return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while ( </span><span class="default">$l </span><span class="keyword">&lt; </span><span class="default">$r </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$m</span><span class="keyword">=</span><span class="default">intval</span><span class="keyword">(</span><span class="default">$l</span><span class="keyword">+</span><span class="default">$r</span><span class="keyword">)/</span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">]==</span><span class="default">$t</span><span class="keyword">)return </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">$t</span><span class="keyword">&lt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">])</span><span class="default">$r</span><span class="keyword">=</span><span class="default">$m</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(</span><span class="default">$t</span><span class="keyword">&gt;</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$m</span><span class="keyword">])</span><span class="default">$l </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$t</span><span class="keyword">==</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$r</span><span class="keyword">])<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
usage:<br />
binarySearch ( array, target, left range, right range );<br />
<br />
if your array is a multidimensional array, simply change the comparison method. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32883""></a>
  <div class="note">
   <strong class="user">cue at openxbox dot com</strong>
   <a href="#32883" class="date">10-Jun-2003 04:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using the result of array_search in a condition statement, make sure you use the === operator instead of == to test whether or not it found a match.&nbsp; Otherwise, searching through an array with numeric indicies will result in index 0 always getting evaluated as false/null.&nbsp; This nuance cost me a lot of time and sanity, so I hope this helps someone.&nbsp; In case you don't know what I'm talking about, here's an example:<br />
<br />
<span class="default">&lt;?php<br />
$code </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">); </span><span class="comment">// infamous abacabb mortal kombat code :-P<br />
<br />
// this is WRONG<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) != </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// infinite loop, regardless of the unset<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
}<br />
<br />
</span><span class="comment">// this is _RIGHT_<br />
</span><span class="keyword">while ((</span><span class="default">$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="default">$code</span><span class="keyword">)) !== </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;</span><span class="comment">// loop will terminate<br />
&nbsp;</span><span class="keyword">unset(</span><span class="default">$code</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31280""></a>
  <div class="note">
   <strong class="user">richard at richard-sumilang dot com</strong>
   <a href="#31280" class="date">16-Apr-2003 12:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; Search an array recursivly<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; This function will search an array recursivly<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; till it finds what it is looking for. An array<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; within an array within an array within array<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; is all good :-)<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @author&nbsp; &nbsp; &nbsp; &nbsp; Richard Sumilang&nbsp; &nbsp; &lt;richard@richard-sumilang.com&gt;<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; &nbsp; &nbsp; string&nbsp; &nbsp; $needle&nbsp; &nbsp; &nbsp; &nbsp; What are you searching for?<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @param&nbsp; &nbsp; &nbsp; &nbsp; array&nbsp; &nbsp; $haystack&nbsp; &nbsp; What you want to search in<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @return&nbsp; &nbsp; &nbsp; &nbsp; boolean<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; @access&nbsp; &nbsp; &nbsp; &nbsp; public<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_search_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$haystack </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">array_search_r</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$value</span><span class="keyword">==</span><span class="default">$needle</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$match</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30385""></a>
  <div class="note">
   <strong class="user">Darkvie</strong>
   <a href="#30385" class="date">16-Mar-2003 01:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to search a&nbsp; multidimensional array for a value &amp; assign another element of array CONTAINING the searched value.<br />
<br />
In the array I am using ($Projects), each item in $Projects contains a "Text_ID" &amp; "Text_Value" field from a database result. I want to search for a "Text_ID" value (456 in this example)&nbsp; &amp; get it's "Text_Value" value assigned to a variable called $Text_Value.<br />
<br />
Here's how I did it:<br />
============================================<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="comment">//Array I am going to look in: <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = array(</span><span class="default">123</span><span class="keyword">, </span><span class="string">"Text 1"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = array(</span><span class="default">456</span><span class="keyword">, </span><span class="string">"Text 2"</span><span class="keyword">);&nbsp;&nbsp; <br />
</span><span class="default">$Projects</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = array(</span><span class="default">789</span><span class="keyword">, </span><span class="string">"Text 3"</span><span class="keyword">);&nbsp;&nbsp; <br />
<br />
</span><span class="comment">// This loop goes through every element in $Projects<br />
</span><span class="keyword">foreach (</span><span class="default">$Projects </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$ArrayRow</span><span class="keyword">)<br />
{&nbsp; &nbsp; <br />
</span><span class="comment">// Now: $ArrayRow[0] = $Projects[x][0] and $ArrayRow[1] = $Projects[x][1]<br />
<br />
// Look for the value "456".&nbsp; Assign to variable &amp; stop looking if found.<br />
</span><span class="keyword">if (</span><span class="default">$ArrayRow</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] == </span><span class="string">"456"</span><span class="keyword">)&nbsp; {</span><span class="default">$Text_Value</span><span class="keyword">= </span><span class="default">$ArrayRow</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; break; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
============================================<br />
Hope this helps someone. <br />
-Darkive</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22605""></a>
  <div class="note">
   <strong class="user">saltymeat at hotmail dot com</strong>
   <a href="#22605" class="date">24-Jun-2002 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's how you can use array_search() to replace all occurances of a value in an array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$toreplace</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$toreplace</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_replace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$tofind</span><span class="keyword">, </span><span class="default">$toreplace</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
$a = array(1,2,3);<br />
$a = array_replace($a, 1, 4);<br />
echo $a[0]; // Outputs 4</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21845""></a>
  <div class="note">
   <strong class="user">dakota at dir dot bg</strong>
   <a href="#21845" class="date">29-May-2002 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For versions later than 4.2.0, the check&nbsp; isset($key) won't work properly because the function now returns false, which "isset". This change is missing in the Change Log!<br />
<br />
So the right way to use the function is:<br />
<br />
<span class="default">&lt;?php<br />
$key </span><span class="keyword">= </span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">);<br />
if (</span><span class="default">$key</span><span class="keyword">!==</span><span class="default">null</span><span class="keyword">&amp;&amp;</span><span class="default">$key</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; ...<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This example will work in both older and newer to 4.2.0 versions.<br />
<br />
P.S.: My previous post where isset() is used won't work in newer versions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21182""></a>
  <div class="note">
   <strong class="user">swbrown at ucsd dot edu</strong>
   <a href="#21182" class="date">02-May-2002 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be absolutely sure to check that your code that uses array_search now checks for 'false' too if you upgrade to PHP 4.2.0!<br />
<br />
I was using array_search in my page authentication routines and this change had the fun side-effect of causing my code to always think a user had full permissions!&nbsp; It was letting anyone click through to our installation of phpMyAdmin.&nbsp; Not good indeed!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18765""></a>
  <div class="note">
   <strong class="user">saconner at iastate dot edu</strong>
   <a href="#18765" class="date">04-Feb-2002 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP versions before 4.2.0 needle was not allowed to be an array.&nbsp; (funnily enough, at time of posting this note, we're still at ver 4.1.1 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-reverse.html">array_reverse</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-shift.html">array_shift</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
