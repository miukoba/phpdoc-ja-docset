<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>DateInterval クラス</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetimezone.listidentifiers.html">DateTimeZone::listIdentifiers</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="dateinterval.construct.html">DateInterval::__construct</a></div>
 <div class="up"><a href="book.datetime.html">Date/Time</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.dateinterval" class="reference">

 <h1 class="title">DateInterval クラス</h1>
 

 <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0)</p>


  <div class="section" id="dateinterval.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    日付の間隔をあらわします。
   </p>
   <p class="para">
    格納方式は、固定値 (年、月、日、時など)
    あるいは相対時刻 (<a href="class.datetime.html" class="classname">DateTime</a> のコンストラクタがサポートしている書式)
    となります。
   </p>
  </div>


  <div class="section" id="dateinterval.synopsis">
   <h2 class="title">クラス概要</h2>


   <div class="classsynopsis">
    <div class="ooclass"></div>


    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">DateInterval</strong>
     </span>
     {</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* プロパティ */</div>
    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.y">$<var class="varname">y</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.m">$<var class="varname">m</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.d">$<var class="varname">d</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.h">$<var class="varname">h</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.i">$<var class="varname">i</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.s">$<var class="varname">s</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type">integer</span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.invert">$<var class="varname">invert</var></a></var>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">public</span>
     <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span>
      <var class="varname"><a href="class.dateinterval.html#dateinterval.props.days">$<var class="varname">days</var></a></var>
    ;</div>

    
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="constructorsynopsis dc-description">
   <span class="modifier">public</span>  <span class="methodname"><a href="dateinterval.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$interval_spec</code></span>
   )</div>

    
    <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="modifier">static</span> <span class="type">DateInterval</span> <span class="methodname"><a href="dateinterval.createfromdatestring.html" class="methodname">createFromDateString</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$time</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">string</span> <span class="methodname"><a href="dateinterval.format.html" class="methodname">format</a></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$format</code></span>
   )</div>


   }</div>


  </div>
  
  <div class="section" id="dateinterval.props">
   <h2 class="title">プロパティ</h2>
   <dl>

    <dt id="dateinterval.props.y">
     <span class="term"><var class="varname"><var class="varname">y</var></var></span>
     <dd>

      <p class="para">
       年。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.m">
     <span class="term"><var class="varname"><var class="varname">m</var></var></span>
     <dd>

      <p class="para">
       月。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.d">
     <span class="term"><var class="varname"><var class="varname">d</var></var></span>
     <dd>

      <p class="para">
       日。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.h">
     <span class="term"><var class="varname"><var class="varname">h</var></var></span>
     <dd>

      <p class="para">
       時間。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.i">
     <span class="term"><var class="varname"><var class="varname">i</var></var></span>
     <dd>

      <p class="para">
       分。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.s">
     <span class="term"><var class="varname"><var class="varname">s</var></var></span>
     <dd>

      <p class="para">
       秒。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.invert">
     <span class="term"><var class="varname"><var class="varname">invert</var></var></span>
     <dd>

      <p class="para">
       間隔が負の数になっている場合は <em>1</em>、そうでない場合は
       <em>0</em>。
        <span class="methodname"><a href="dateinterval.format.html" class="methodname">DateInterval::format()</a></span> を参照ください。
      </p>
     </dd>

    </dt>

    <dt id="dateinterval.props.days">
     <span class="term"><var class="varname"><var class="varname">days</var></var></span>
     <dd>

      <p class="para">
        <span class="function"><a href="datetime.diff.html" class="function">DateTime::diff()</a></span> で作られた DateInterval
       オブジェクトの場合は、開始日と終了日の間の日数。
       それ以外の場合は <var class="varname"><var class="varname">days</var></var> は <strong><code>FALSE</code></strong> となります。
      </p>
      <p class="para">
       PHP 5.4.20/5.5.4 より前のバージョンでは、
       <strong><code>FALSE</code></strong> ではなく -99999 となっていました。
      </p>
     </dd>

    </dt>

   </dl>

  </div>

 </div>

 

























<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="dateinterval.construct.html">DateInterval::__construct</a> — 新しい DateInterval オブジェクトを作成する</li><li><a href="dateinterval.createfromdatestring.html">DateInterval::createFromDateString</a> — 相対指定文字列から DateInterval を作成する</li><li><a href="dateinterval.format.html">DateInterval::format</a> — 間隔をフォーマットする</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113415""></a>
  <div class="note">
   <strong class="user">theDustin</strong>
   <a href="#113415" class="date">09-Oct-2013 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to format a \DateInterval to something like you input (new \DateInterval("P3W2D")) you can use one of this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyDateInterval </span><span class="keyword">extends \</span><span class="default">DateInterval<br />
</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * formating string like ISO 8601 (PnYnMnDTnHnMnS)<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">const </span><span class="default">INTERVAL_ISO8601 </span><span class="keyword">= </span><span class="string">'P%yY%mM%dDT%hH%iM%sS'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * formating the interval like ISO 8601 (PnYnMnDTnHnMnS)<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @return string<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__toString</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">= </span><span class="string">'P'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">. </span><span class="string">'Y'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">m</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">m </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">d</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">d </span><span class="keyword">. </span><span class="string">'D'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">|| </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="string">'T'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">. </span><span class="string">'H'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">. </span><span class="string">'M'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sReturn </span><span class="keyword">.= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s </span><span class="keyword">. </span><span class="string">'S'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sReturn</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
example use:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$oDateIntervalValue </span><span class="keyword">= new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="string">'P3M'</span><span class="keyword">);<br />
<br />
</span><span class="default">$sFormatResult </span><span class="keyword">= </span><span class="default">$oDateIntervalValue</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="default">MyDateInterval</span><span class="keyword">::</span><span class="default">INTERVAL_ICALENDAR</span><span class="keyword">); </span><span class="comment">// "P0Y3M0DT0H0M0S"<br />
</span><span class="default">$sToStringResult </span><span class="keyword">= (string) </span><span class="default">$oDateIntervalValue</span><span class="keyword">; </span><span class="comment">// "P3M"<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="default">$sFormatResult</span><span class="keyword">)); </span><span class="comment">// object like $oDateIntervalValue<br />
</span><span class="default">var_dump</span><span class="keyword">(new </span><span class="default">MyDateInterval</span><span class="keyword">(</span><span class="default">$sToStringResult</span><span class="keyword">)); </span><span class="comment">// object like $oDateIntervalValue<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113270""></a>
  <div class="note">
   <strong class="user">till at php dot net</strong>
   <a href="#113270" class="date">19-Sep-2013 11:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that the following code will not throw an exception or return false, or anything:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Your best way to check if what you created is a "valid" interval, by doing something like the following:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
if (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; throw new \</span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">"Wrong interval"</span><span class="keyword">);<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113269""></a>
  <div class="note">
   <strong class="user">till at php dot net</strong>
   <a href="#113269" class="date">19-Sep-2013 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It should be noted that the following code will not throw an exception or return false, or anything:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Your best way to check if what you created is a "valid" interval, by doing something like the following:<br />
<br />
<span class="default">&lt;?php<br />
$interval </span><span class="keyword">= new \</span><span class="default">DateInterval</span><span class="keyword">::</span><span class="default">createFromDateString</span><span class="keyword">(</span><span class="string">"this is not a date interval"</span><span class="keyword">);<br />
if (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; throw new \</span><span class="default">LogicException</span><span class="keyword">(</span><span class="string">"Wrong interval"</span><span class="keyword">);<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113091""></a>
  <div class="note">
   <strong class="user">Miller</strong>
   <a href="#113091" class="date">29-Aug-2013 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This DateInterval extension allows you to write a formatted timestamp but omit the "zero values" and handle things like listing, plurals, etc.<br />
Example input: '%y year(s)', '%m month(s)', '%d day(s)', '%h hour(s)', '%i minute(s)', '%s second(s)'<br />
Example output: 1 year, 2 months, 16 days, 1 minute, and 15 seconds<br />
Example input: '%y año(s)', '%m mes(es)', '%d día(s)', '%h hora(s)', '%i minuto(s)', '%s segundo(s)'<br />
Example output: 1 año, 2 meses, 16 días, 1 minuto, y 15 segundos<br />
<br />
&lt;meta charset="UTF-8"&gt;<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
<br />
class </span><span class="default">MyDateInterval </span><span class="keyword">extends </span><span class="default">DateInterval </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pluralCheck </span><span class="keyword">= </span><span class="string">'()'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Must be exactly 2 characters long<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // The first character is the opening brace, the second the closing brace<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Text between these braces will be used if &gt; 1, or replaced with $this-&gt;singularReplacement if = 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$singularReplacement </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Replaces $this-&gt;pluralCheck if = 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // hour(s) -&gt; hour<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$separator </span><span class="keyword">= </span><span class="string">', '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimiter between units<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours, 2 minutes<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$finalSeparator </span><span class="keyword">= </span><span class="string">', and '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimeter between next-to-last unit and last unit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours, 2 minutes, and 1 second<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$finalSeparator2 </span><span class="keyword">= </span><span class="string">' and '</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Delimeter between units if there are only 2 units<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 3 hours and 2 minutes<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">createFromDateInterval </span><span class="keyword">(</span><span class="default">DateInterval $interval</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">self</span><span class="keyword">(</span><span class="string">'PT0S'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$interval </span><span class="keyword">as </span><span class="default">$property </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$obj</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">formatWithoutZeroes </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Each argument may have only one % parameter<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Result does not handle %R or %r -- but you can retrieve that information using $this-&gt;format('%R') and using your own logic<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">func_get_args</span><span class="keyword">() as </span><span class="default">$arg</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pre </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'%'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="string">'%'</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$post </span><span class="keyword">= </span><span class="default">mb_substr</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">mb_strpos</span><span class="keyword">(</span><span class="default">$arg</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">)+</span><span class="default">mb_strlen</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">parent</span><span class="keyword">::</span><span class="default">format</span><span class="keyword">(</span><span class="default">$param</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$open </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pluralCheck</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$close </span><span class="keyword">= </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">pluralCheck</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">], </span><span class="string">'/'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pattern </span><span class="keyword">= </span><span class="string">"/</span><span class="default">$open</span><span class="string">(.*)</span><span class="default">$close</span><span class="string">/"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; list (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">) = </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="default">$pattern</span><span class="keyword">, </span><span class="default">$num </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">singularReplacement </span><span class="keyword">: </span><span class="string">'$1'</span><span class="keyword">, array (</span><span class="default">$pre</span><span class="keyword">, </span><span class="default">$post</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$num </span><span class="keyword">!= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts</span><span class="keyword">[] = </span><span class="default">$pre</span><span class="keyword">.</span><span class="default">$num</span><span class="keyword">.</span><span class="default">$post</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$l </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$parts </span><span class="keyword">as </span><span class="default">$i </span><span class="keyword">=&gt; </span><span class="default">$part</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$part</span><span class="keyword">.(</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$l</span><span class="keyword">-</span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">separator </span><span class="keyword">: (</span><span class="default">$l </span><span class="keyword">== </span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">finalSeparator2 </span><span class="keyword">: (</span><span class="default">$i </span><span class="keyword">== </span><span class="default">$l</span><span class="keyword">-</span><span class="default">2 </span><span class="keyword">? </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">finalSeparator </span><span class="keyword">: </span><span class="string">''</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">date_default_timezone_set</span><span class="keyword">(</span><span class="string">'America/Phoenix'</span><span class="keyword">);<br />
<br />
</span><span class="default">$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'today'</span><span class="keyword">);<br />
echo </span><span class="string">'Today is '</span><span class="keyword">, </span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F d, Y h:ia'</span><span class="keyword">), </span><span class="string">'.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Today is August 28, 2013 12:00am.&lt;br&gt;<br />
</span><span class="default">$expiration </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'today +1 year +2 months +16 days +1 minute +15 seconds'</span><span class="keyword">);<br />
echo </span><span class="string">'Expires '</span><span class="keyword">, </span><span class="default">$expiration</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F d, Y h:ia'</span><span class="keyword">), </span><span class="string">'.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Expires November 13, 2014 12:01am.&lt;br&gt;<br />
<br />
</span><span class="default">$interval </span><span class="keyword">= </span><span class="default">MyDateInterval</span><span class="keyword">::</span><span class="default">createFromDateInterval</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$expiration</span><span class="keyword">));<br />
<br />
echo </span><span class="string">'That is '</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">formatWithoutZeroes</span><span class="keyword">(</span><span class="string">'%y year(s)'</span><span class="keyword">, </span><span class="string">'%m month(s)'</span><span class="keyword">, </span><span class="string">'%d day(s)'</span><span class="keyword">, </span><span class="string">'%h hour(s)'</span><span class="keyword">, </span><span class="string">'%i minute(s)'</span><span class="keyword">, </span><span class="string">'%s second(s)'</span><span class="keyword">), </span><span class="string">' from now.&lt;br&gt;'</span><span class="keyword">, </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// That is 1 year, 2 months, 16 days, 1 minute, and 15 seconds from now.<br />
<br />
</span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">finalSeparator </span><span class="keyword">= </span><span class="string">', y '</span><span class="keyword">;<br />
</span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">finalSeparator2 </span><span class="keyword">= </span><span class="string">' y '</span><span class="keyword">;<br />
echo </span><span class="string">'Que es de '</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">formatWithoutZeroes</span><span class="keyword">(</span><span class="string">'%y año(s)'</span><span class="keyword">, </span><span class="string">'%m mes(es)'</span><span class="keyword">, </span><span class="string">'%d día(s)'</span><span class="keyword">, </span><span class="string">'%h hora(s)'</span><span class="keyword">, </span><span class="string">'%i minuto(s)'</span><span class="keyword">, </span><span class="string">'%s segundo(s)'</span><span class="keyword">), </span><span class="string">' a partir de ahora.'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Que es de 1 año, 2 meses, 16 días, 1 minuto, y 15 segundos a partir de ahora.<br />
&nbsp;&nbsp;&nbsp; // Is that correct? Spanish isn't my strength....<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112872""></a>
  <div class="note">
   <strong class="user">computrius</strong>
   <a href="#112872" class="date">31-Jul-2013 11:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that they "days" property that is populated by \DateTime::diff does not contain a float for the differences in time.<br />
It is rounded down to the nearest whole day.<br />
<br />
&nbsp;&nbsp;&nbsp; $d1 = new \DateTime("2013-07-31 10:29:00");<br />
&nbsp;&nbsp;&nbsp; $d2 = new \DateTime("2013-08-02 5:32:12");<br />
&nbsp;&nbsp;&nbsp; echo $d1-&gt;diff($d2)-&gt;days;<br />
<br />
Output: 1</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110743""></a>
  <div class="note">
   <strong class="user">artur at qrupa dot com</strong>
   <a href="#110743" class="date">30-Nov-2012 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using DateInterval('P3M') on 30th of November you get March instead of Ferbuary.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102930""></a>
  <div class="note">
   <strong class="user">p dot scheit at ps-webforge dot com</strong>
   <a href="#102930" class="date">15-Mar-2011 03:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to convert a Timespan given in Seconds into an DateInterval Object you could dot the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$dv </span><span class="keyword">= new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT'</span><span class="keyword">.</span><span class="default">$timespan</span><span class="keyword">.</span><span class="string">'S'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
but wenn you look at the object, only the $dv-&gt;s property is set. <br />
<br />
As stated in the documentation to DateInterval::format<br />
<br />
The DateInterval::format() method does not recalculate carry over points in time strings nor in date segments. This is expected because it is not possible to overflow values like "32 days" which could be interpreted as anything from "1 month and 4 days" to "1 month and 1 day". <br />
<br />
If you still want to calculate the seconds into hours / days / years, etc do the following:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$d2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT'</span><span class="keyword">.</span><span class="default">$timespan</span><span class="keyword">.</span><span class="string">'S'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
</span><span class="default">$iv </span><span class="keyword">= </span><span class="default">$d2</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$d1</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
$iv is an DateInterval set with days, years, hours, seconds, etc ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetimezone.listidentifiers.html">DateTimeZone::listIdentifiers</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="dateinterval.construct.html">DateInterval::__construct</a></div>
 <div class="up"><a href="book.datetime.html">Date/Time</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
