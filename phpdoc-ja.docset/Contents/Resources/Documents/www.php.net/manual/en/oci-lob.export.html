<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>LOB の内容をファイルに出力する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci-lob.erase.html">OCI-Lob::erase</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci-lob.flush.html">OCI-Lob::flush</a></div>
 <div class="up"><a href="class.OCI-Lob.html">OCI-Lob</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="oci-lob.export" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">OCI-Lob::export</h1>
  <p class="verinfo">(PHP 5, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">OCI-Lob::export</span> &mdash; <span class="dc-title">LOB の内容をファイルに出力する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-oci-lob.export-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>OCI-Lob::export</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$start</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$length</code></span>
  ]] )</div>

  <p class="para rdfs-comment">
   LOB の内容をファイルに出力します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-oci-lob.export-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">filename</code></em></span>
     <dd>

      <p class="para">
       ファイルへのパス。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">start</code></em></span>
     <dd>

      <p class="para">
       出力を開始する位置。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">length</code></em></span>
     <dd>

      <p class="para">
       出力するデータの長さ。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-oci-lob.export-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-oci-lob.export-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="oci-lob.import.html" class="xref">OCI-Lob::import</a></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111676""></a>
  <div class="note">
   <strong class="user">AlexiuS</strong>
   <a href="#111676" class="date">15-Mar-2013 10:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note, that contents of LOB is cleared after this operation. If you want to use LOB data after exporting it to file, you should read it from file with file_get_contents().<br />
<br />
This will not work:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">$blob</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">DOCUMENT_ROOT</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$bildId</span><span class="keyword">.</span><span class="string">".jpg"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$blob</span><span class="keyword">-&gt;</span><span class="default">export</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(!</span><span class="default">$blob</span><span class="keyword">-&gt;</span><span class="default">eof</span><span class="keyword">()){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dbResult </span><span class="keyword">.= </span><span class="default">$blob</span><span class="keyword">-&gt;</span><span class="default">read</span><span class="keyword">(</span><span class="default">2000</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Can not save the file "</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">.</span><span class="string">"!"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Use this instead:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">$blob</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$filename </span><span class="keyword">= </span><span class="default">DOCUMENT_ROOT</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$bildId</span><span class="keyword">.</span><span class="string">".jpg"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$blob</span><span class="keyword">-&gt;</span><span class="default">export</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dbResult </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Can not save the file "</span><span class="keyword">.</span><span class="default">$filename</span><span class="keyword">.</span><span class="string">"!"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="oci-lob.erase.html">OCI-Lob::erase</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="oci-lob.flush.html">OCI-Lob::flush</a></div>
 <div class="up"><a href="class.OCI-Lob.html">OCI-Lob</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
