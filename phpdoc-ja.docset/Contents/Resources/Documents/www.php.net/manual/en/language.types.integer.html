<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>整数</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.types.boolean.html">論理型 (boolean)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.types.float.html">浮動小数点数</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.types.integer" class="sect1">
 <h2 class="title">整数</h2>
 
 <p class="simpara">
  <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> は、ℤ = {..., -2, -1, 0, 1, 2, ...}
  という集合です。
 </p>
  
 <p class="para">
  以下も参照ください。
 </p>

 <ul class="itemizedlist">
  <li class="listitem">
   <span class="simpara">
    <a href="ref.gmp.html" class="link">任意精度整数 / GMP</a>
   </span>
  </li>
  <li class="listitem">
   <span class="simpara">
    <a href="language.types.float.html" class="link">浮動小数点数</a>
   </span>
  </li>
  <li class="listitem">
   <span class="simpara">
    <a href="ref.bc.html" class="link">任意精度整数 / BCMath</a>
   </span>
  </li>
 </ul>

 <div class="sect2" id="language.types.integer.syntax">
  <h3 class="title">構文</h3>

  <p class="simpara">
   整数 (integer) は、10 進数(基数 10)、16 進数 (基数 16)、8 進数 (基数 8) あるいは 2 進数 (基数 2)
   表記で指定可能です。オプションで、符号(-または+)を前に付けることが可能です。
  </p>

  <p class="para">
   2 進数の整数リテラルは、PHP 5.4.0 から利用可能となりました。
  </p>

  <p class="para">
   8 進数表記を使用する場合、数の前に <em>0</em> (ゼロ)
   を付ける必要があります。また、16 進数表記を使用するには、数の前に
   <em>0x</em> を付ける必要があります。
   2 進数表記を使用する場合、数の前に <em>0b</em> を付ける必要があります。
  </p>

  <div class="example" id="example-68">
   <p><strong>例1 整数リテラル</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1234</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;10進整数<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;-</span><span style="color: #0000BB">123</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;負の数<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0123</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;8進数&nbsp;(10進数の83と等価)<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0x1A</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;16進数&nbsp;(10進数の26と等価)<br /></span><span style="color: #0000BB">$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0b11111111</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;2進数&nbsp;(10進数の255と等価)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <p class="para">
   使用可能な整数リテラルの形式は以下のように定義されています。
  </p>
 
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
decimal     : [1-9][0-9]*
            | 0

hexadecimal : 0[xX][0-9a-fA-F]+

octal       : 0[0-7]+

binary      : 0b[01]+

integer     : [+-]?decimal
            | [+-]?hexadecimal
            | [+-]?octal
            | [+-]?binary
</pre></div>
   </div>

  </div>

  <p class="para">
   整数のサイズはプラットフォームに依存しますが、
   約 20 億 (32 ビット符号付) が一般的な値です。
   64 ビットプラットフォームでの通常の最大値は、およそ 9*10^18 (900京) になります。
   PHP は符号無し整数をサポートしていません。
   整数のサイズは定数 <strong><code>PHP_INT_SIZE</code></strong> で、
   そして整数の最大値は定数 <strong><code>PHP_INT_MAX</code></strong> でそれぞれ決まります。
   これらの定数は、PHP 4.4.0 以降および PHP 5.0.5 以降で使えます。
  </p>

  <div class="warning"><strong class="warning">警告</strong>
   <p class="para">
    8 進数の整数値として不正な数字（例: 8 または 9）が渡された場合、
    数値の残りの部分は無視されます。
   </p>

   <div class="example" id="example-69">
    <p><strong>例2 おかしな 8 進数</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">01090</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;010（8&nbsp;進数）=&nbsp;8（10&nbsp;進数）<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
 </div>

 <div class="sect2" id="language.types.integer.overflow">
  <h3 class="title">整数のオーバーフロー</h3>

  <p class="para">
   <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>型の範囲外の数を指定した場合、かわりに
   <span class="type"><a href="language.types.float.html" class="type float">float</a></span>として解釈されます。また、結果が
   <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>型の範囲外の数となるような計算を行うと
   <span class="type"><a href="language.types.float.html" class="type float">float</a></span>が代わりに返されます。
  </p>

  <div class="example" id="example-70">
   <p><strong>例3 32 ビットシステムにおける整数のオーバーフロー</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$large_number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2147483647</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;int(2147483647)<br /><br /></span><span style="color: #0000BB">$large_number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2147483648</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(2147483648)<br /><br /></span><span style="color: #0000BB">$million&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1000000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$large_number&nbsp;</span><span style="color: #007700">=&nbsp;&nbsp;</span><span style="color: #0000BB">50000&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$million</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(50000000000)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>

  <div class="example" id="example-71">
   <p><strong>例4 64 ビットシステムにおける整数のオーバーフロー</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$large_number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">9223372036854775807</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;int(9223372036854775807)<br /><br /></span><span style="color: #0000BB">$large_number&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">9223372036854775808</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(9.2233720368548E+18)<br /><br /></span><span style="color: #0000BB">$million&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1000000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$large_number&nbsp;</span><span style="color: #007700">=&nbsp;&nbsp;</span><span style="color: #0000BB">50000000000000&nbsp;</span><span style="color: #007700">*&nbsp;</span><span style="color: #0000BB">$million</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$large_number</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(5.0E+19)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  
  <p class="para">
   PHP には整数の割り算はありません。<em>1/2</em> は <span class="type"><span class="type 
   float ">
   float </span></span> 型の <em>0.5</em> になります。
   下方向の整数値に値を丸めるためにキャストを使用することができ、
   また、 <span class="function"><a href="function.round.html" class="function">round()</a></span> 関数を使用することもできます。
  </p>

  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">25</span><span style="color: #007700">/</span><span style="color: #0000BB">7</span><span style="color: #007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(3.5714285714286)&nbsp;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">((int)&nbsp;(</span><span style="color: #0000BB">25</span><span style="color: #007700">/</span><span style="color: #0000BB">7</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//&nbsp;int(3)<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">round</span><span style="color: #007700">(</span><span style="color: #0000BB">25</span><span style="color: #007700">/</span><span style="color: #0000BB">7</span><span style="color: #007700">));&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;float(4)&nbsp;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </div>

 <div class="sect2" id="language.types.integer.casting">
  <h3 class="title">整数への変換</h3>

  <p class="simpara">
   <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> に値を明示的に変換するには、キャスト
   <em>(int)</em> または <em>(integer)</em>
   のどちらかを使用してください。しかし、多くの場合、演算子、関数、制御構造が
   <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> 引数を必要とする場合、値は自動的に変換されるため、
   キャストを使用する必要はありません。
   関数  <span class="function"><a href="function.intval.html" class="function">intval()</a></span> を用いて値を整数に変換することも可能です。
  </p>

  <p class="simpara">
   <a href="language.types.type-juggling.html" class="link">型の相互変換</a>
   を参照ください。
  </p>
   
  <div class="sect3" id="language.types.integer.casting.from-boolean">
   <h4 class="title"><a href="language.types.boolean.html" class="link">booleans</a> から</h4>

   <p class="simpara">
    <strong><code>FALSE</code></strong> は、<em>0</em> (ゼロ) となり、
    <strong><code>TRUE</code></strong> は、<em>1</em> となります。
   </p>
  </div>

  <div class="sect3" id="language.types.integer.casting.from-float">
   <h4 class="title">
    <a href="language.types.float.html" class="link">浮動小数点数</a>から
   </h4> 

   <p class="simpara">
    float から整数に変換する場合、その数は<em class="emphasis">ゼロのほうに</em>丸められます。
   </p>
    
   <p class="para">
    float が整数の範囲 (通常は、32 ビットプラットフォームでは <em>+/- 2.15e+9 =
    2^31</em>、64 ビットプラットフォームでは <em>+/- 9.22e+18 = 2^63</em>
    ) を越える場合、結果は undefined となります。これは、
    その float が正しい整数の結果を得るために十分な精度を得られなかったからです。
    この場合、警告も通知も発生しません!
   </p>
    
   <div class="warning"><strong class="warning">警告</strong>
    <p class="para">
     未知の端数を <span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> にキャストしないでください。
     この場合、予期しない結果となることがあります。
    </p>

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;(int)&nbsp;(&nbsp;(</span><span style="color: #0000BB">0.1</span><span style="color: #007700">+</span><span style="color: #0000BB">0.7</span><span style="color: #007700">)&nbsp;*&nbsp;</span><span style="color: #0000BB">10&nbsp;</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;7が出力されます!<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    
    <p class="para">
     より詳細な情報については、<a href="language.types.float.html#warn.float-precision" class="link">
     float の精度に関する注意</a>を参照ください。
    </p>
   </div>
  </div>
   
  <div class="sect3" id="language.types.integer.casting.from-string">
   <h4 class="title">文字列から</h4>

   <p class="simpara">
    <a href="language.types.string.html#language.types.string.conversion" class="link">文字列変換
    </a>を参照ください。
   </p>
  </div>
   
  <div class="sect3" id="language.types.integer.casting.from-other">
   <h4 class="title">他の型から</h4>

   <div class="caution"><strong class="caution">警告</strong>
    <p class="simpara">
     整数への変換の動作は、他の型については定義されません。
     現在の動作は、その値がまず
     <a href="language.types.boolean.html#language.types.boolean.casting" class="link">論理値に変換された</a>
     場合と同じです。しかし、この動作は予告なく変更されることがありえるので、
     これを前提にしてはいけません。
    </p>
   </div>
  </div>

 </div>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111523""></a>
  <div class="note">
   <strong class="user">php at richardneill dot org</strong>
   <a href="#111523" class="date">01-Mar-2013 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A leading zero in a numeric literal means "this is octal". But don't be confused: a leading zero in a string does not. Thus:<br />
$x = 0123;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 83<br />
$y = "0123" + 0&nbsp; &nbsp;&nbsp; // 123</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103506""></a>
  <div class="note">
   <strong class="user">Richard</strong>
   <a href="#103506" class="date">17-Apr-2011 06:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Integer arithmetic in PHP is more accurate than one might think. On a 32-bit system, the largest value that can be held in an INT is&nbsp; 2147483647.<br />
However, a FLOAT can accurately hold integer values up to 10000000000000.<br />
(this is because the significand precision of a double is 53-bits).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103442""></a>
  <div class="note">
   <strong class="user">php at keith tyler dot com</strong>
   <a href="#103442" class="date">13-Apr-2011 08:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to convert a numeric string (or more to the point, an object that represents a numeric value) that is greater then PHP_INT_MAX, and you don't have GMP or BCMath installed, you can cast to float.<br />
<br />
For example, when using SimpleXMLElement, you sometimes have to cast the extracted values, such as xml attributes, because they are returned as SimpleXMLElements and not their values' native types. While print() has no trouble with converting them, other functions, such as max(), might not.<br />
<br />
But if you cast such a value with (int), and it is over PHP_INT_MAX, you will just get PHP_INT_MAX (and vice versa for negative numbers). <br />
<br />
The Q&amp;D no-muss solution is to cast to (float) instead.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102925""></a>
  <div class="note">
   <strong class="user">pere dot cil at wanadoo dot fr</strong>
   <a href="#102925" class="date">15-Mar-2011 10:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please also note that the maximum stored in the integer depends on the platform / compilation; on windows xp 32 bits, the following value:<br />
<br />
0x5468792130ABCDEF<br />
<br />
echoes to:<br />
<br />
6.0822444802213E+18 (cast to float)<br />
<br />
On a fully 64 bits system, it echoes to:<br />
<br />
6082244480221302255</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100365""></a>
  <div class="note">
   <strong class="user">iletras at yahoo dot com</strong>
   <a href="#100365" class="date">11-Oct-2010 05:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
//This is a (simpler ?) function to return number of digits of an integer.<br />
<br />
//function declaration<br />
function count_digit($number) {<br />
&nbsp; return&nbsp; strlen((string) $number);<br />
}<br />
<br />
//function call<br />
$num = 12312;<br />
$number_of_digits = count_digit($num); //this is call :)<br />
echo $number_of_digits; <br />
//prints 5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88075""></a>
  <div class="note">
   <strong class="user">sean dot gilbertson at gmail dot com</strong>
   <a href="#88075" class="date">08-Jan-2009 10:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can make a signed, negative integer an unsigned integer (in string form) by doing the following:<br />
<br />
<span class="default">&lt;?php<br />
$unsigned </span><span class="keyword">= </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%u'</span><span class="keyword">, -</span><span class="default">5</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$unsigned</span><span class="keyword">; </span><span class="comment">// prints 4294967291<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86588""></a>
  <div class="note">
   <strong class="user">Hamza Burak Ylmaz</strong>
   <a href="#86588" class="date">24-Oct-2008 11:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//This is a simple function to return number of digits of an integer.<br />
<br />
//function declaration<br />
</span><span class="keyword">function </span><span class="default">count_digit</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$digit </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; do<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">/= </span><span class="default">10</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">//$number = $number / 10;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$number </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$number</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$digit</span><span class="keyword">++;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }while(</span><span class="default">$number</span><span class="keyword">!=</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$digit</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//function call<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="default">12312</span><span class="keyword">;<br />
</span><span class="default">$number_of_digits </span><span class="keyword">= </span><span class="default">count_digit</span><span class="keyword">(</span><span class="default">$num</span><span class="keyword">); </span><span class="comment">//this is call :)<br />
</span><span class="keyword">echo </span><span class="default">$number_of_digits</span><span class="keyword">;<br />
</span><span class="comment">//prints 5<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86180""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#86180" class="date">07-Oct-2008 03:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP offers a slew of built-in functions and automatic type-casting routines which can get pretty complicated. But most of the time, you still have to take matters into your own hands and allow PHP to do its thing. In that case, and something that has NOT been mentioned, is how to construct your code. To keep things simple, I divide all my scripts in half. The top half gives my scripts the "capability" they need, and the lower half is the actual code to be "run" or "executed".<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;* build the program's capability - define variables and functions...<br />
&nbsp;*/<br />
</span><span class="default">$item_label </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// type string<br />
</span><span class="default">$item_price </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// type float<br />
</span><span class="default">$item_qty </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// type integer<br />
</span><span class="default">$item_total </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// type float - to set use calculate()<br />
<br />
</span><span class="keyword">function </span><span class="default">calculate</span><span class="keyword">(){<br />
&nbsp; global </span><span class="default">$item_price</span><span class="keyword">, </span><span class="default">$item_qty</span><span class="keyword">, </span><span class="default">$item_total</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$item_price </span><span class="keyword">= </span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$item_price</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$item_total </span><span class="keyword">= </span><span class="default">number_format</span><span class="keyword">((</span><span class="default">$item_price </span><span class="keyword">* </span><span class="default">$item_qty</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);<br />
}<br />
<br />
function </span><span class="default">itemToString</span><span class="keyword">() {<br />
&nbsp; global </span><span class="default">$item_label</span><span class="keyword">, </span><span class="default">$item_price</span><span class="keyword">, </span><span class="default">$item_qty</span><span class="keyword">, </span><span class="default">$item_total</span><span class="keyword">;<br />
&nbsp; return </span><span class="string">"</span><span class="default">$item_label</span><span class="string"> [price=\$</span><span class="default">$item_price</span><span class="string">, qty=</span><span class="default">$item_qty</span><span class="string">, total=\$</span><span class="default">$item_total</span><span class="string">]"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/*<br />
&nbsp;* run the program - set data, call methods...<br />
&nbsp;*/<br />
</span><span class="default">$item_label </span><span class="keyword">= </span><span class="string">"Coffee"</span><span class="keyword">;<br />
</span><span class="default">$item_price </span><span class="keyword">= </span><span class="default">3.89</span><span class="keyword">;<br />
</span><span class="default">$item_qty </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">calculate</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// set $item_total<br />
</span><span class="keyword">echo </span><span class="default">itemToString</span><span class="keyword">();&nbsp;&nbsp; </span><span class="comment">// -&gt; Coffee [price=$3.89, qty=2, total=$7.78]<br />
<br />
</span><span class="default">$item_label </span><span class="keyword">= </span><span class="string">"Chicken"</span><span class="keyword">;<br />
</span><span class="default">$item_price </span><span class="keyword">= </span><span class="default">.80</span><span class="keyword">;&nbsp; &nbsp;&nbsp; </span><span class="comment">// per lb.<br />
</span><span class="default">$item_qty </span><span class="keyword">= </span><span class="default">3.5</span><span class="keyword">;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// lbs.<br />
</span><span class="default">calculate</span><span class="keyword">();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// set $item_total<br />
</span><span class="keyword">echo </span><span class="default">itemToString</span><span class="keyword">();&nbsp;&nbsp; </span><span class="comment">// -&gt; Chicken [price=$0.80, qty=3.5, total=$2.80]<br />
</span><span class="default">?&gt;<br />
</span>Note: All type-casting is done by PHP's built-in number_format() method. This allows our program to enter any number (float or int) on item price or quantity in the runtime part of our script. Also, if we explicitly cast values to integer in the capability part of our script, then we start getting results that may not be desirable for this program. For example, if in the calculate method we cast item_qty to integer, then we can no longer sell chicken by the pound!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83790""></a>
  <div class="note">
   <strong class="user">eric</strong>
   <a href="#83790" class="date">11-Jun-2008 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to the comment by me at troyswanson dot net:<br />
<br />
-2147483648 falls into the range of 32 bit signed integers yet php treats it as a float.&nbsp; However, -2147483647-1 is treated as an integer.<br />
<br />
The following code demonstrates:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; var_dump</span><span class="keyword">(-</span><span class="default">2147483648</span><span class="keyword">); </span><span class="comment">//float(-2147483648)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(-</span><span class="default">2147483647 </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">); </span><span class="comment">//int(-2147483648)<br />
</span><span class="default">?&gt;<br />
</span><br />
This is probably very similar to the MS C bug which also treats -2147483648 as an UNSIGNED because it thinks it's out of the range of a signed int.<br />
<br />
The problem is that the parser does not view "-x" as a single token, but rather as two, "-" and "x".&nbsp; Since "x" is out of the range of an INT, it is promoted to float, even though in this unique case, "-x" is in the range of an int.<br />
<br />
The best cure is probably to replace "-2147483648" with "0x80000000", as that is the hexadecimal equivalent of the same number.<br />
<br />
Hope that helps explain what's going on<br />
<br />
Peace<br />
<br />
&nbsp;- Eric / fez</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83768""></a>
  <div class="note">
   <strong class="user">winterheat</strong>
   <a href="#83768" class="date">11-Jun-2008 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP_INT_SIZE seems to be 8 when it is 64 bit integers... so 8 means the number of bytes, or number of 8-bits.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79490""></a>
  <div class="note">
   <strong class="user">autotelic at NOOOOSPAM dot hotmail dot com</strong>
   <a href="#79490" class="date">29-Nov-2007 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A note about converting IP addresses for storage in database.&nbsp; For MySQL, this is unnecessary as it has built in support via the INET functions.&nbsp; Also, there is no need to use BIGINT.&nbsp; UNSIGNED INT is, at 4 bytes, the perfect size for holding an IP (column must be defined as UNSIGNED).&nbsp; This can basically halve the storage size, as BIGINT is an 8 byte data type.<br />
<br />
INET_ATON() converts a dotted IP string to INT:<br />
INSERT table(ip) VALUES(INET_ATON('127.0.0.1'));<br />
<br />
INET_NTOA() converts an INT to dotted IP string:<br />
SELECT INET_NTOA(ip) FROM table<br />
returns '127.0.0.1'<br />
<br />
Details:<br />
<a href="http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html" rel="nofollow" target="_blank">http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79234""></a>
  <div class="note">
   <strong class="user">darkshire</strong>
   <a href="#79234" class="date">16-Nov-2007 01:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
d_n at NOSPAM dot Loryx dot com<br />
13-Aug-2007 05:33<br />
Here are some tricks to convert from a "dotted" IP address to a LONG int, and backwards. This is very useful because accessing an IP addy in a database table is very much faster if it's stored as a BIGINT rather than in characters.<br />
<br />
IP to BIGINT:<br />
<span class="default">&lt;?php<br />
&nbsp; $ipArr&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]);<br />
&nbsp; </span><span class="default">$ip&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] * </span><span class="default">0x1000000<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] * </span><span class="default">0x10000<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] * </span><span class="default">0x100<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
</span><span class="default">?&gt;<br />
</span><br />
This can be written in a bit more efficient way:<br />
<span class="default">&lt;?php<br />
&nbsp; $ipArr&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]);<br />
&nbsp; </span><span class="default">$ip&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]&lt;&lt;</span><span class="default">24<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]&lt;&lt;</span><span class="default">16<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] &lt;&lt;</span><span class="default">8<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
</span><span class="default">?&gt;<br />
</span><br />
shift is more cheaper.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77576""></a>
  <div class="note">
   <strong class="user">Paul</strong>
   <a href="#77576" class="date">04-Sep-2007 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"always round it downwards"<br />
<br />
It seems to truncate, or round toward zero, rather than downward. If the float is negative, it is rounded up.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77056""></a>
  <div class="note">
   <strong class="user">d_n at NOSPAM dot Loryx dot com</strong>
   <a href="#77056" class="date">13-Aug-2007 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are some tricks to convert from a "dotted" IP address to a LONG int, and backwards. This is very useful because accessing an IP addy in a database table is very much faster if it's stored as a BIGINT rather than in characters.<br />
<br />
IP to BIGINT:<br />
<span class="default">&lt;?php<br />
&nbsp; $ipArr&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">,</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REMOTE_ADDR'</span><span class="keyword">]);<br />
&nbsp; </span><span class="default">$ip&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] * </span><span class="default">0x1000000<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] * </span><span class="default">0x10000<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] * </span><span class="default">0x100<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">+ </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">]<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ;<br />
</span><span class="default">?&gt;<br />
</span><br />
IP as BIGINT read from db back to dotted form:<br />
<br />
Keep in mind, PHP integer operators are INTEGER -- not long. Also, since there is no integer divide in PHP, we save a couple of S-L-O-W floor (&lt;division&gt;)'s by doing bitshifts. We must use floor(/) for $ipArr[0] because though $ipVal is stored as a long value, $ipVal &gt;&gt; 24 will operate on a truncated, integer value of $ipVal! $ipVint is, however, a nice integer, so <br />
we can enjoy the bitshifts.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $ipVal </span><span class="keyword">= </span><span class="default">$row</span><span class="keyword">[</span><span class="string">'client_IP'</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipArr </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">floor</span><span class="keyword">(&nbsp; </span><span class="default">$ipVal&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">/ </span><span class="default">0x1000000</span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipVint&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">$ipVal</span><span class="keyword">-(</span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]*</span><span class="default">0x1000000</span><span class="keyword">); </span><span class="comment">// for clarity<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = (</span><span class="default">$ipVint </span><span class="keyword">&amp; </span><span class="default">0xFF0000</span><span class="keyword">)&nbsp; &gt;&gt; </span><span class="default">16</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = (</span><span class="default">$ipVint </span><span class="keyword">&amp; </span><span class="default">0xFF00&nbsp; </span><span class="keyword">)&nbsp; &gt;&gt; </span><span class="default">8</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipArr</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] =&nbsp; </span><span class="default">$ipVint </span><span class="keyword">&amp; </span><span class="default">0xFF</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ipDotted </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">'.'</span><span class="keyword">, </span><span class="default">$ipArr</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73790""></a>
  <div class="note">
   <strong class="user">Jacek</strong>
   <a href="#73790" class="date">10-Mar-2007 01:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On 64 bits machines max integer value is 0x7fffffffffffffff (9 223 372 036 854 775 807).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73766""></a>
  <div class="note">
   
   <a href="#73766" class="date">09-Mar-2007 04:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To force the correct usage of 32-bit unsigned integer in some functions, just add '+0'&nbsp; just before processing them.<br />
<br />
for example <br />
echo(dechex("2724838310"));<br />
will print '7FFFFFFF'<br />
but it should print 'A269BBA6'<br />
<br />
When adding '+0' php will handle the 32bit unsigned integer<br />
correctly<br />
echo(dechex("2724838310"+0));<br />
will print 'A269BBA6'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71899""></a>
  <div class="note">
   <strong class="user">popefelix at gmail dot com</strong>
   <a href="#71899" class="date">21-Dec-2006 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when using integer conversion to test something to see if it evaluates to a positive integer or not.&nbsp; You might get unexpected behaviour.<br />
<br />
To wit:<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
require_once </span><span class="string">'Date.php'</span><span class="keyword">;<br />
<br />
</span><span class="default">$date </span><span class="keyword">= new </span><span class="default">Date</span><span class="keyword">();<br />
print </span><span class="string">"\$date is an instance of " </span><span class="keyword">. </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$date </span><span class="keyword">+= </span><span class="default">0</span><span class="keyword">;<br />
print </span><span class="string">"\$date is now </span><span class="default">$date</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">);<br />
<br />
</span><span class="default">$foo </span><span class="keyword">= new </span><span class="default">foo</span><span class="keyword">();<br />
print </span><span class="string">"\$foo is an instance of " </span><span class="keyword">. </span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$foo </span><span class="keyword">+= </span><span class="default">0</span><span class="keyword">;<br />
print </span><span class="string">"\$foo is now </span><span class="default">$foo</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
<br />
class </span><span class="default">foo </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$bar </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$baz </span><span class="keyword">= </span><span class="string">"la lal la"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$bak</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">foo</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bak </span><span class="keyword">= </span><span class="default">3.14159</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
After the integer conversion, you might expect both $foo and $date to evaluate to 0.&nbsp; However, this is not the case:<br />
<br />
$date is an instance of Date<br />
<br />
Notice: Object of class Date could not be converted to int in /home/kpeters/work/sketches/ObjectSketch.php on line 7<br />
$date is now 1<br />
int(1)<br />
$foo is an instance of foo<br />
<br />
Notice: Object of class foo could not be converted to int in /home/kpeters/work/sketches/ObjectSketch.php on line 13<br />
$foo is now 1<br />
int(1)<br />
<br />
This is because the objects are first converted to boolean before being converted to int.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71709""></a>
  <div class="note">
   <strong class="user">rustamabd@gmail-you-know-what</strong>
   <a href="#71709" class="date">12-Dec-2006 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful with using the modulo operation on big numbers, it will cast a float argument to an int and may return wrong results. For example:<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $i </span><span class="keyword">= </span><span class="default">6887129852</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"i=</span><span class="default">$i</span><span class="string">\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"i%36="</span><span class="keyword">.(</span><span class="default">$i</span><span class="keyword">%</span><span class="default">36</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"alternative i%36="</span><span class="keyword">.(</span><span class="default">$i</span><span class="keyword">-</span><span class="default">floor</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">/</span><span class="default">36</span><span class="keyword">)*</span><span class="default">36</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>Will output:<br />
i=6.88713E+009<br />
i%36=-24<br />
alternative i%36=20</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69181""></a>
  <div class="note">
   <strong class="user">jmw254 at cornell dot edu</strong>
   <a href="#69181" class="date">25-Aug-2006 07:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Try this one instead: <br />
<br />
function iplongtostring($ip)<br />
{<br />
&nbsp;&nbsp;&nbsp; $ip=floatval($ip); // otherwise it is capped at 127.255.255.255<br />
<br />
&nbsp;&nbsp;&nbsp; $a=($ip&gt;&gt;24)&amp;255;<br />
&nbsp;&nbsp;&nbsp; $b=($ip&gt;&gt;16)&amp;255;<br />
&nbsp;&nbsp;&nbsp; $c=($ip&gt;&gt;8)&amp;255;<br />
&nbsp;&nbsp;&nbsp; $d=$ip&amp;255;<br />
<br />
&nbsp;&nbsp;&nbsp; return "$a.$b.$c.$d";<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49417""></a>
  <div class="note">
   <strong class="user">rickard_cedergren at yahoo dot com</strong>
   <a href="#49417" class="date">27-Jan-2005 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When doing large subtractions on 32 bit unsigned integers the result sometimes end up negative. My example script converts a IPv4 address represented as a 32 bit unsigned integer to a dotted quad (similar to ip2long()), and adds a "fix" to the operation. <br />
<br />
&nbsp;&nbsp; /**************************<br />
&nbsp;&nbsp;&nbsp; * int_oct($ip) <br />
&nbsp;&nbsp;&nbsp; * Convert INTeger rep of IP to octal (dotted quad)<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp; function int_oct($ip) {<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; /* Set variable to float */<br />
&nbsp;&nbsp; &nbsp;&nbsp; settype($ip, float);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; /* FIX for silly PHP integer syndrome */<br />
&nbsp;&nbsp; &nbsp;&nbsp; $fix = 0;<br />
&nbsp;&nbsp; &nbsp;&nbsp; if($ip &gt; 2147483647) $fix = 16777216;<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(is_numeric($ip)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return(sprintf("%u.%u.%u.%u",<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ip / 16777216,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (($ip % 16777216) + $fix) / 65536,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (($ip % 65536) + $fix / 256) / 256,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ($ip % 256) + $fix / 256 / 256<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; );<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return('');<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38478""></a>
  <div class="note">
   
   <a href="#38478" class="date">23-Dec-2003 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you need to parse an unsigned<br />
32 bit integer. Here's a function I 've used:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function parse_unsigned_int($string) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $x = (float)$string;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($x &gt; (float)2147483647)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $x -= (float)"4294967296";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (int)$x;<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.types.boolean.html">論理型 (boolean)</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.types.float.html">浮動小数点数</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
