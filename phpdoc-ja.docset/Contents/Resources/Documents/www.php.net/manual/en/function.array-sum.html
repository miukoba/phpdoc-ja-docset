<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>配列の中の値の合計を計算する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-splice.html">array_splice</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-udiff-assoc.html">array_udiff_assoc</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-sum" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_sum</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.4, PHP 5)</p><p class="refpurpose"><span class="refname">array_sum</span> &mdash; <span class="dc-title">配列の中の値の合計を計算する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-sum-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.number" class="type number">number</a></span> <span class="methodname"><strong>array_sum</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   )</div>

  <p class="para rdfs-comment">
    <span class="function"><strong>array_sum()</strong></span> は、配列の中の値の合計を整数または
   float として返します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-sum-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">array</code></em></span>
     <dd>

      <p class="para">
       入力の配列。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-sum-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   値の合計を整数または
   float として返します。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-sum-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.2.1</td>
       <td>
        4.2.1 より前のバージョンの PHP は、渡された配列自体を修正し、
        文字列を数値 (これは値にもよるが多くの場合ゼロとなります)
        に変換していました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-sum-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4958">
    <p><strong>例1  <span class="function"><strong>array_sum()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"sum(a)&nbsp;=&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1.2</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2.3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">3.4</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"sum(b)&nbsp;=&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">array_sum</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
sum(a) = 20
sum(b) = 6.9
</pre></div>
    </div>
   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111159""></a>
  <div class="note">
   <strong class="user">Richie</strong>
   <a href="#111159" class="date">21-Jan-2013 10:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Use this to get the sum of comma separated values:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $csv </span><span class="keyword">= </span><span class="string">"1,2,3,4"</span><span class="keyword">;<br />
&nbsp; echo </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">","</span><span class="keyword">, </span><span class="default">$csv</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
@igz: You can use mysql_fetch_assoc() to avoid duplicate entries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108555""></a>
  <div class="note">
   <strong class="user">pablo114 at interia dot eu</strong>
   <a href="#108555" class="date">07-May-2012 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to sum all values (horizontal or vertical) use this function:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">sumArray</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$params </span><span class="keyword">= array(</span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">, </span><span class="string">'key' </span><span class="keyword">=&gt; </span><span class="string">'xxx'</span><span class="keyword">), </span><span class="default">$exclusions </span><span class="keyword">= array()) {<br />
<br />
&nbsp;&nbsp;&nbsp; if(!empty(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$params</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">] == </span><span class="string">'x'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">], </span><span class="default">$exclusions</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">+= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">$params</span><span class="keyword">[</span><span class="string">'direction'</span><span class="keyword">] == </span><span class="string">'y'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$params</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">], </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">); </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">], </span><span class="default">$exclusions</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum </span><span class="keyword">+= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]][</span><span class="default">$params</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$sum</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } else return </span><span class="default">false</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Some examples now:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array1 </span><span class="keyword">= array(</span><span class="string">'myKey1' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'myKey2' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">'myKey3' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(array(</span><span class="string">'myKey1' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'myKey2' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">'myKey3' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">), array(</span><span class="string">'myKey1' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="string">'myKey2' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="string">'myKey3' </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*Sum an array*/<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">sumArray</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">)); </span><span class="comment">//outputs: 15<br />
<br />
/*Sum an array without adding "myKey2" key*/<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">sumArray</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, array(</span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">), array(</span><span class="string">'myKey2'</span><span class="keyword">))); </span><span class="comment">//outputs: 10<br />
<br />
/*Sum a multi-dimensional array horizontally without adding "myKey3" key*/<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">sumArray</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], array(</span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">), array(</span><span class="string">'myKey3'</span><span class="keyword">))); </span><span class="comment">//outputs: 7<br />
<br />
/*Sum a multi-dimensional array vertically (by "myKey1" key) without adding [0] row*/<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">sumArray</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">, array(</span><span class="string">'direction' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">, </span><span class="string">'key' </span><span class="keyword">=&gt; </span><span class="string">'myKey1'</span><span class="keyword">), array(</span><span class="string">'0'</span><span class="keyword">))); </span><span class="comment">//outputs: 2<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105650""></a>
  <div class="note">
   <strong class="user">davidcairngorm at gmail dot com</strong>
   <a href="#105650" class="date">04-Sep-2011 01:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the array is a result from mysql_fetch_array, it contains every value twice and the sum will be double.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104222""></a>
  <div class="note">
   <strong class="user">pligor at facebook dot com</strong>
   <a href="#104222" class="date">01-Jun-2011 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There was a case where I had a complex array, multi-dimesional and non-symmetric (not all elements of a sub-array were arrays themselves)<br />
Although all the leaf elements of this array were numbers. In case you have two variables like that and you wanted to add all the values of the right variable to the left then you would need a function like below.<br />
<br />
This is a recursive function which adds the values of two multidimensional arrays with the same key structure:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multiDimArrayAdd</span><span class="keyword">(&amp; </span><span class="default">$left</span><span class="keyword">, </span><span class="default">$right</span><span class="keyword">)&nbsp; &nbsp; </span><span class="comment">//created by George Pligor<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$right</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$left </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">multiDimArrayAdd</span><span class="keyword">(</span><span class="default">$left</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$right</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$left</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] += </span><span class="default">$right</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101727""></a>
  <div class="note">
   <strong class="user">uhehesh at gmail dot com</strong>
   <a href="#101727" class="date">07-Jan-2011 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">avrg</span><span class="keyword">()<br />
{<br />
&nbsp;</span><span class="default">$count </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;</span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;return (</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">) / </span><span class="default">$count</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This function calculates average of numbers given as arguments. Examples:<br />
avrg(100, 200, 300) - returns 200.<br />
avrg(5, 6) - returns 5.5.<br />
avrg('foo') - returns 0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96259""></a>
  <div class="note">
   <strong class="user">Chris</strong>
   <a href="#96259" class="date">17-Feb-2010 05:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Average array values, ignoring zero values:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_average_nonzero</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; return </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">array_filter</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
echo </span><span class="default">array_average_nonzero</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">); </span><span class="comment">// returns 2<br />
</span><span class="keyword">echo </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">); </span><span class="comment">// returns 1.2<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86161""></a>
  <div class="note">
   <strong class="user">hdeus at yahoo dot com</strong>
   <a href="#86161" class="date">06-Oct-2008 04:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is how you can multiply two arrays in the form of matrixes using a bit of matrix algebra (M*M).<br />
By calling the function multiplyMatrix, you will be multiplying two sparse matrixes (zeros need not be included in the array for the operation to be performed).<br />
<br />
<span class="default">&lt;?php<br />
$M </span><span class="keyword">= array(<br />
</span><span class="default">0</span><span class="keyword">=&gt;array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">),<br />
</span><span class="default">1</span><span class="keyword">=&gt;array(</span><span class="default">2</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">),<br />
</span><span class="default">3</span><span class="keyword">=&gt;array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">),<br />
</span><span class="default">4</span><span class="keyword">=&gt;array(</span><span class="default">5</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">),<br />
</span><span class="default">5</span><span class="keyword">=&gt;array(</span><span class="default">6</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$M1 </span><span class="keyword">= </span><span class="default">multiplyMatrix</span><span class="keyword">(</span><span class="default">$M</span><span class="keyword">, </span><span class="default">$M</span><span class="keyword">); </span><span class="comment">//multiplying $M by itself<br />
<br />
</span><span class="keyword">echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$M1</span><span class="keyword">);echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
function </span><span class="default">multiplyMatrix</span><span class="keyword">(</span><span class="default">$M1</span><span class="keyword">, </span><span class="default">$M2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
</span><span class="comment">#Helena F Deus, Oct 06, 2008<br />
##Multiply two matrixes; $M1 and $M2 can be sparse matrixes, the indexes on both should match<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_file</span><span class="keyword">(</span><span class="default">$M1</span><span class="keyword">)) {</span><span class="default">$matrix1 </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$M1</span><span class="keyword">));}<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$matrix1 </span><span class="keyword">= </span><span class="default">$M1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">#transpose M2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$M2t </span><span class="keyword">= </span><span class="default">transpose</span><span class="keyword">(</span><span class="default">$M2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$M2t </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">=&gt;</span><span class="default">$tmp</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">##sum the result of the value in the col multiplied by the value in the vector on the corresponding row<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$M1 </span><span class="keyword">as </span><span class="default">$row1</span><span class="keyword">=&gt;</span><span class="default">$tmp1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$multiply</span><span class="keyword">[</span><span class="default">$row1</span><span class="keyword">] = </span><span class="default">array_rproduct</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">,</span><span class="default">$tmp1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$multiply</span><span class="keyword">[</span><span class="default">$row1</span><span class="keyword">]){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; exit;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$multiply </span><span class="keyword">as </span><span class="default">$row1</span><span class="keyword">=&gt;</span><span class="default">$vals</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sum</span><span class="keyword">[</span><span class="default">$row</span><span class="keyword">][</span><span class="default">$row1</span><span class="keyword">]=</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$vals</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">=</span><span class="default">transpose</span><span class="keyword">(</span><span class="default">$sum</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$r</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">transpose</span><span class="keyword">(</span><span class="default">$M</span><span class="keyword">)<br />
{<br />
foreach (</span><span class="default">$M </span><span class="keyword">as </span><span class="default">$row</span><span class="keyword">=&gt;</span><span class="default">$cols</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$cols </span><span class="keyword">as </span><span class="default">$col</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$Mt</span><span class="keyword">[</span><span class="default">$col</span><span class="keyword">][</span><span class="default">$row</span><span class="keyword">]=</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$Mt</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
return (</span><span class="default">$Mt</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
}<br />
<br />
function </span><span class="default">array_rproduct</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$line</span><span class="keyword">=&gt;</span><span class="default">$cols</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a3</span><span class="keyword">[</span><span class="default">$line</span><span class="keyword">] = </span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$line</span><span class="keyword">]*</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$line</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$a2 </span><span class="keyword">as </span><span class="default">$line2</span><span class="keyword">=&gt;</span><span class="default">$cols2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a3</span><span class="keyword">[</span><span class="default">$line2</span><span class="keyword">] = </span><span class="default">$a1</span><span class="keyword">[</span><span class="default">$line2</span><span class="keyword">]*</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$line2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$a3</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85548""></a>
  <div class="note">
   <strong class="user">c dot heckemueller at befestigungsfuchs dot de</strong>
   <a href="#85548" class="date">05-Sep-2008 10:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* sum values in array<br />
&nbsp;*<br />
&nbsp;* @param array $arr<br />
&nbsp;* @param string [optional]$index<br />
&nbsp;* @return int result<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_sum_key</span><span class="keyword">( </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$index </span><span class="keyword">= </span><span class="default">null </span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">) || </span><span class="default">sizeof</span><span class="keyword">( </span><span class="default">$arr </span><span class="keyword">) &lt; </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$data </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( isset( </span><span class="default">$index </span><span class="keyword">)&nbsp; ){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= (isset( </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] )) ? </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] : </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
With this function you can choose whether you sum specific keys in a multidim array, or a normalized array. it is designed to not trigger errors if a key is not set.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85375""></a>
  <div class="note">
   <strong class="user">superman1101</strong>
   <a href="#85375" class="date">27-Aug-2008 08:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To elaborate on djyb2003 at yahoo dot fr. His function can be converted to recursive, but i've made a smaller function to do so:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;</span><span class="keyword">function </span><span class="default">array_sum_all</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$func </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">"&amp;\$arr=0,\$key=0"</span><span class="keyword">,</span><span class="string">"static \$a=0; if(is_int(\$arr)) { \$a+=\$arr; } return \$a;"</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">array_walk_recursive</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$func</span><span class="keyword">);<br />
&nbsp;&nbsp; return </span><span class="default">$func</span><span class="keyword">();<br />
&nbsp;}<br />
<br />
</span><span class="default">$tab </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; array (</span><span class="string">"val1" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,</span><span class="string">"val2" </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array (</span><span class="string">"val1" </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">,</span><span class="string">"val2" </span><span class="keyword">=&gt; </span><span class="default">10</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">"toto" </span><span class="keyword">=&gt; array (</span><span class="string">"val1" </span><span class="keyword">=&gt; </span><span class="default">15</span><span class="keyword">,</span><span class="string">"val2" </span><span class="keyword">=&gt; </span><span class="default">50</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_sum_all</span><span class="keyword">(</span><span class="default">$tab</span><span class="keyword">)); </span><span class="comment">//This will output: int(88);<br />
</span><span class="default">?&gt;<br />
</span><br />
hope this helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77151""></a>
  <div class="note">
   <strong class="user">Coder</strong>
   <a href="#77151" class="date">17-Aug-2007 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A much simpler algorithm for array_sub():<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_sub</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) || </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">// get first element<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$base </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$base </span><span class="keyword">- </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This will return the exact same results that didikdwi's version.<br />
<br />
However, didikdwi's result depends on knowing what the first value is. When this likely bug is removed, the code is:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_sub</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return ( </span><span class="default">$temp </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">? -</span><span class="default">$temp </span><span class="keyword">: </span><span class="default">false </span><span class="keyword">); <br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76501""></a>
  <div class="note">
   <strong class="user">didikdwi at gmail dot com</strong>
   <a href="#76501" class="date">18-Jul-2007 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple approach to subtract array, both indexed and associative.<br />
<br />
&nbsp; function array_sub($arr) {<br />
&nbsp;&nbsp;&nbsp; if (!is_array($arr) || count($arr) == 0) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; // get first element<br />
&nbsp;&nbsp; &nbsp;&nbsp; $base = array_shift($arr);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (count($arr) == 1) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // If only one element, return its<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $base;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach ($arr as $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $base -= $val;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return $base;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
// example<br />
$arr1 = array(3, 2, 3);<br />
echo array_sub($arr1);&nbsp;&nbsp; // Output: -2<br />
$arr2 = array(3.5, 2, 3);<br />
echo array_sub($arr2);&nbsp;&nbsp; // Output: -1.5<br />
$arr3 = array('a' =&gt; 3, 'b' =&gt; 2, 'c' =&gt; 3);<br />
echo array_sub($arr3);&nbsp;&nbsp; // Output: -2</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71373""></a>
  <div class="note">
   <strong class="user">herenvardo at gmail dot com</strong>
   <a href="#71373" class="date">25-Nov-2006 12:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I'm not sure if something similar already exists, but I needed it so I made it:<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">/* Performs a pitagoric sum of the elements in $arr<br />
&nbsp;&nbsp; The pitagoric sum of a set of values is the square root of<br />
&nbsp;&nbsp; the sum of the sqare power of each value. So, for a, b, c<br />
&nbsp;&nbsp; it's sqrt(a^2 + b^2 + c^2) */<br />
&nbsp; /* If any element of $arr is an array itself, the array_sum<br />
&nbsp;&nbsp; will be used. Alternatively, the values could be used by<br />
&nbsp;&nbsp; recursion. Returns the integer part (floor) */<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_pitag_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= </span><span class="default">$s</span><span class="keyword">*</span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">+= </span><span class="default">$i</span><span class="keyword">*</span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">floor</span><span class="keyword">(</span><span class="default">sqrt</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68472""></a>
  <div class="note">
   <strong class="user">Tobias Schlemmer</strong>
   <a href="#68472" class="date">28-Jul-2006 08:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'2'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
</span><span class="default">$array3 </span><span class="keyword">= array(&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'3'</span><span class="keyword">=&gt;</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">=&gt;</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
</span><span class="default">$array&nbsp; </span><span class="keyword">= </span><span class="default">array_sum_values</span><span class="keyword">( </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$array3 </span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Sums the values of the arrays be there keys (PHP 4, PHP 5) <br />
&nbsp;* array array_sum_values ( array array1 [, array array2 [, array ...]] )<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_sum_values</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intArgs </span><span class="keyword">= </span><span class="default">func_num_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrArgs </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$intArgs </span><span class="keyword">&lt; </span><span class="default">1</span><span class="keyword">) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Warning: Wrong parameter count for array_sum_values()'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$arrArgs </span><span class="keyword">as </span><span class="default">$arrItem</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arrItem</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Warning: Wrong parameter values for array_sum_values()'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arrItem </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] += </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
</span><span class="comment">/* result:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 6<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 3<br />
)<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66954""></a>
  <div class="note">
   <strong class="user">jodymickey at yahoo dot com</strong>
   <a href="#66954" class="date">01-Jun-2006 05:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In reference to KageKonjou's array_mode function...<br />
<br />
If you only want to know the value in the array that occurs most (and not the number of times it actually occured), you can use this short function.&nbsp; It also suffers from the same problem in that if there is more than one mode, it will return only one.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_mode</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63273""></a>
  <div class="note">
   <strong class="user">Moslehi[atsign]Gmail[dot]com</strong>
   <a href="#63273" class="date">18-Mar-2006 12:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple example for numeric values :<br />
<br />
<span class="default">&lt;?PHP <br />
<br />
</span><span class="keyword">function </span><span class="default">array_average</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">){<br />
</span><span class="default">$sum </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
echo </span><span class="default">$sum</span><span class="keyword">/</span><span class="default">$num</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$myarray </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">);<br />
</span><span class="default">array_average</span><span class="keyword">(</span><span class="default">$myarray</span><span class="keyword">); </span><span class="comment">// displays 2.5 as average of 1,2,3,4<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
[Arash Moslehi]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57232""></a>
  <div class="note">
   <strong class="user">mroach at mroach dot com</strong>
   <a href="#57232" class="date">27-Sep-2005 10:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I ran into a situation where I only wanted to sum elements of an array for certain keys. For that, I wrote this function<br />
<br />
&lt;?<br />
<br />
function array_sum_by_key()<br />
{<br />
&nbsp;&nbsp;&nbsp; $args = func_get_args();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $arr = array_shift($args);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $to_sum = is_array($args[0]) ? $args[0] : $args;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $sum = 0;<br />
<br />
&nbsp;&nbsp;&nbsp; foreach ( $arr as $k=&gt;$v ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( in_array($k, $to_sum) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $sum += $v;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $sum;<br />
}<br />
<br />
$arr = array (<br />
&nbsp;&nbsp;&nbsp; 'dog' =&gt; 1,<br />
&nbsp;&nbsp;&nbsp; 'cat' =&gt; 2,<br />
&nbsp;&nbsp;&nbsp; 'rat' =&gt; 4,<br />
&nbsp;&nbsp;&nbsp; 'mat' =&gt; 8,<br />
&nbsp;&nbsp;&nbsp; 'bat' =&gt; 16<br />
);<br />
<br />
echo array_sum_by_key($arr, 'dog', 'mat');<br />
<br />
// Result: 9<br />
<br />
?&gt;<br />
<br />
Alternatively, you can pass the keys to sum as an array<br />
<br />
&lt;?<br />
<br />
$to_sum = array('dog', 'bat');<br />
<br />
echo array_sum_by_key($arr, $to_sum);<br />
<br />
// Result: 17<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55767""></a>
  <div class="note">
   <strong class="user">KageKonjou at GMail dot com</strong>
   <a href="#55767" class="date">12-Aug-2005 06:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not sure where else to put this, but I added something that determines the most commonly occuring item in an array.&nbsp; Known Bugs: It will always return the first value if no mode are found, and the first mode found if more are found of same or lesser count.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_mode</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;</span><span class="default">$count </span><span class="keyword">= array();<br />
&nbsp;foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$count</span><span class="keyword">[</span><span class="default">$item</span><span class="keyword">]++;<br />
&nbsp;}<br />
&nbsp;</span><span class="default">$mostcommon </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;</span><span class="default">$iter </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;foreach (</span><span class="default">$count </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$v </span><span class="keyword">&gt; </span><span class="default">$iter</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$mostcommon </span><span class="keyword">= </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$iter </span><span class="keyword">= </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;return array(</span><span class="string">"mode" </span><span class="keyword">=&gt; </span><span class="default">$mostcommon</span><span class="keyword">, </span><span class="string">"count" </span><span class="keyword">=&gt; </span><span class="default">$count</span><span class="keyword">[</span><span class="default">$mostcommon</span><span class="keyword">]);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="50993""></a>
  <div class="note">
   <strong class="user">punchto at hotmail dot com</strong>
   <a href="#50993" class="date">16-Mar-2005 04:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Microsoft Excel - SUMIF()<br />
<br />
function sumif($array,$criteria,$sum_array){ <br />
&nbsp; if(is_array($array) &amp;&amp; is_array($sum_array) &amp;&amp; trim($criteria)!= ""){ <br />
&nbsp;&nbsp;&nbsp; $array_count = (count($array) &lt; count($sum_array)) ? count($array):count($sum_array);<br />
&nbsp;&nbsp;&nbsp; for($i=0;$i&lt;$array_count;$i++){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(ereg("^&lt;",$criteria)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = ereg_replace("^&lt;","",$criteria);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result += $array[$i] &lt; $value ? $sum_array[$i]:0; <br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; elseif(ereg("^&gt;",$criteria)){ <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = ereg_replace("^&gt;","",$criteria);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result += $array[$i] &gt; $value ? $sum_array[$i]:0;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = $criteria;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result += $array[$i] == $value ? $sum_array[$i]:0;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result ? $result:0;<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49757""></a>
  <div class="note">
   <strong class="user">ncheung at maine dot rr dot com</strong>
   <a href="#49757" class="date">08-Feb-2005 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For clarity, array indices containing boolean values such as TRUE and FALSE are added up as though they are 1 and 0 respectively.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36798""></a>
  <div class="note">
   <strong class="user">mucello NOO SPAM @ weatherimages dOt org</strong>
   <a href="#36798" class="date">23-Oct-2003 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to find the AVERAGE of the values in your array, use the sum and count functions together.&nbsp; For example, let's say your array is $foo and you want the average...<br />
<br />
<span class="default">&lt;?php<br />
$average_of_foo </span><span class="keyword">= </span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34535""></a>
  <div class="note">
   <strong class="user">drverieevil at REMOVEMEasenne dot org</strong>
   <a href="#34535" class="date">30-Jul-2003 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If some array elements arent integers, function will change them to integers (content of array will not change) type and then sum them.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
$foo</span><span class="keyword">[] = </span><span class="string">"12"</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[] = </span><span class="default">10</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[] = </span><span class="string">"bar"</span><span class="keyword">;<br />
</span><span class="default">$foo</span><span class="keyword">[] = </span><span class="string">"summer"</span><span class="keyword">;<br />
echo </span><span class="default">array_sum </span><span class="keyword">(</span><span class="default">$foo</span><span class="keyword">); </span><span class="comment">//same as echo "22";<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-splice.html">array_splice</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-udiff-assoc.html">array_udiff_assoc</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
