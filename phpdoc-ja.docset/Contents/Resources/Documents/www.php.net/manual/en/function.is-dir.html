<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ファイルがディレクトリかどうかを調べる</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.glob.html">glob</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.is-executable.html">is_executable</a></div>
 <div class="up"><a href="ref.filesystem.html">ファイルシステム 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.is-dir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">is_dir</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">is_dir</span> &mdash; <span class="dc-title">ファイルがディレクトリかどうかを調べる</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.is-dir-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>is_dir</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   )</div>

  <p class="para rdfs-comment">
   指定したファイルがディレクトリかどうかを調べます。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.is-dir-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">filename</code></em></span>
     <dd>

      <p class="para">
       ファイルへのパス。<em><code class="parameter">filename</code></em>
       が相対パスの場合は、現在の作業ディレクトリからの相対パスとして処理します。
       <em><code class="parameter">filename</code></em> がシンボリックリンクあるいはハードリンクの場合は、
       リンク先を解決して処理します。<a href="ini.sect.safe-mode.html#ini.safe-mode" class="link">セーフモード</a> あるいは
       <a href="ini.core.html#ini.open-basedir" class="link">open_basedir</a> を有効にすると、
       さらに制限がかかるでしょう。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.is-dir-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   ファイルが存在して、かつそれがディレクトリであれば
   <strong><code>TRUE</code></strong>、それ以外の場合は <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.is-dir-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-2390">
    <p><strong>例1  <span class="function"><strong>is_dir()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'a_file.txt'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'bogus_dir/abc'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'..'</span><span style="color: #007700">));&nbsp;</span><span style="color: #FF8000">//一つ上のディレクトリ<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
bool(false)
bool(true)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.is-dir-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
失敗したときは <strong><code>E_WARNING</code></strong> が発生します。
</p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.is-dir-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">この関数の結果は
キャッシュされます。詳細は、 <span class="function"><a href="function.clearstatcache.html" class="function">clearstatcache()</a></span>
を参照してください。</span></p></blockquote>
  <div class="tip"><strong class="tip">ヒント</strong><p class="simpara">
<em>PHP 5.0.0</em> 以降、この関数は、
<em class="emphasis">何らかの</em> URL ラッパーと組合せて使用することができます。
どのラッパーが  <span class="function"><a href="function.stat.html" class="function">stat()</a></span> ファミリーをサポートしているかを調べるには
<a href="wrappers.html" class="xref">サポートするプロトコル/ラッパー</a> を参照してください。</p></div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.is-dir-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.chdir.html" class="function" rel="rdfs-seeAlso">chdir()</a> - ディレクトリを変更する</span></li>
    <li class="member"> <span class="function"><a href="function.dir.html" class="function" rel="rdfs-seeAlso">dir()</a> - ディレクトリクラスのインスタンスを返す</span></li>
    <li class="member"> <span class="function"><a href="function.opendir.html" class="function" rel="rdfs-seeAlso">opendir()</a> - ディレクトリハンドルをオープンする</span></li>
    <li class="member"> <span class="function"><a href="function.is-file.html" class="function" rel="rdfs-seeAlso">is_file()</a> - 通常ファイルかどうかを調べる</span></li>
    <li class="member"> <span class="function"><a href="function.is-link.html" class="function" rel="rdfs-seeAlso">is_link()</a> - ファイルがシンボリックリンクかどうかを調べる</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111910""></a>
  <div class="note">
   <strong class="user">niceuser at live dot com</strong>
   <a href="#111910" class="date">11-Apr-2013 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PITFALL in sub dir processing<br />
<br />
After struggeling with a sub-dir processing (some subdirs were skipped) AND reading the posts, I realized that virutally no-one clearly told what were wrong.<br />
<br />
The common traverse dir code was:<br />
-----------------------------------------<br />
<br />
opendir("myphotos"); // Top dir to process from (example)<br />
&nbsp;<br />
while (false !== ($fname = readdir($h_dir))) { // process current dir (read a directory entry)<br />
<br />
&nbsp;&nbsp; if ($fname{0} == '.') continue; // skip dirs . and .. by first char test<br />
<br />
&nbsp;&nbsp; if (is_dir($fname)) call_own_subdir_process;&nbsp; // process this subdir by calling a routine<br />
<br />
&nbsp;&nbsp; }<br />
<br />
PROBLEM IS :<br />
<br />
The "is_dir()" must have the FULL PATH or it will skip some dirs. So the above code need to INSERT THE PATH before the filename. This would give this change in above...<br />
<br />
&nbsp;&nbsp; if (is_dir("myphotos\" . $fname)) call_own_subdir_process;&nbsp; // skip subdirs<br />
<br />
The pitfall really was, that without full path some subdirs were found...hope this clears all up</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111654""></a>
  <div class="note">
   <strong class="user">Victor</strong>
   <a href="#111654" class="date">13-Mar-2013 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using Mac, or others systems that store information about the directory layout and etc, the function:<br />
<br />
&nbsp;&nbsp; function empty_dir($dir) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (($files = @scandir($dir)) &amp;&amp; count($files) &lt;= 3)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
Must have the count($files) comparing with the number of hidden files!<br />
<br />
For example, I'm using Mac and the empty directory shows me three files: ".", ".." and ".DS_Store", so if I am planning to put the website online on my Mac, I've to count in the ".DS_Store" file!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98338""></a>
  <div class="note">
   <strong class="user">digitalaudiorock at gmail dot com</strong>
   <a href="#98338" class="date">09-Jun-2010 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a note for anyone who encounters is_dir() returning false on CIFS mount points or directories within those mount points on 2.6.31 and newer kernels: Apparently in new kernels they've started using the CIFS serverino option by default.&nbsp; With Windows shares this causes huge inode numbers and which apparently can cause is_dir() to return false.&nbsp; Adding the noserverino option to the CIFS mount will prevent this.&nbsp; This may only occur on 32 systems but I don't have a 64 bit install to test against.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90457""></a>
  <div class="note">
   <strong class="user">vstoykov at consultant dot bg</strong>
   <a href="#90457" class="date">23-Apr-2009 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When trying (no 'pear') to enumerate mounted drives on a win32&nbsp; platform (Win XP SP3, Apache/2.2.11, PHP/5.2.9), I used:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">echo_win_drives</span><span class="keyword">() {<br />
<br />
&nbsp; for(</span><span class="default">$c</span><span class="keyword">=</span><span class="string">'A'</span><span class="keyword">; </span><span class="default">$c</span><span class="keyword">&lt;=</span><span class="string">'Z'</span><span class="keyword">; </span><span class="default">$c</span><span class="keyword">++) <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$c </span><span class="keyword">. </span><span class="string">':'</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="default">$c </span><span class="keyword">. </span><span class="string">': '</span><span class="keyword">; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
which yielded:<br />
A: C: D: E: F: G: H: I:</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88542""></a>
  <div class="note">
   <strong class="user">alanguir at detroitchamber dot com</strong>
   <a href="#88542" class="date">28-Jan-2009 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When I run a scandir I always run a simple filter to account for file system artifacts (especially from a simple ftp folder drop) and the "." ".." that shows up in every directory: <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$contents </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$folder</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$bad </span><span class="keyword">= array(</span><span class="string">"."</span><span class="keyword">, </span><span class="string">".."</span><span class="keyword">, </span><span class="string">".DS_Store"</span><span class="keyword">, </span><span class="string">"_notes"</span><span class="keyword">, </span><span class="string">"Thumbs.db"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$contents</span><span class="keyword">, </span><span class="default">$bad</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85961""></a>
  <div class="note">
   <strong class="user">Btx</strong>
   <a href="#85961" class="date">26-Sep-2008 12:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="keyword">public static function </span><span class="default">isEmptyDir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; return ((</span><span class="default">$files </span><span class="keyword">= @</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) &lt;= </span><span class="default">2</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
better ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85428""></a>
  <div class="note">
   <strong class="user">jasoneisen at gee mail</strong>
   <a href="#85428" class="date">29-Aug-2008 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An even better (PHP 5 only) alternative to "Davy Defaud's function": <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_empty_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ((</span><span class="default">$files </span><span class="keyword">= @</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) &amp;&amp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$files</span><span class="keyword">) &lt;= </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
NOTE: you should obviously be checking beforehand if $dir is actually a directory, and that it is readable, as only relying on this you would assume that in both cases you have a non-empty readable directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79889""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#79889" class="date">18-Dec-2007 08:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
One note regarding checking for empty directories :<br />
&gt;&gt;echo (count(glob("$dir/*")) === 0) ? 'Empty' : 'Not empty';<br />
This does not work correctly on Linux.<br />
The '.' and '..' will always be returned even if no files are present in the directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76513""></a>
  <div class="note">
   <strong class="user">danr at cvisual dot com dot com</strong>
   <a href="#76513" class="date">18-Jul-2007 11:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Running PHP 5.2.0 on Apache Windows, I had a problem (likely the same one as described by others) where is_dir returned a False for directories with certain permissions even though they were accessible.<br />
<br />
Strangely, I was able to overcome the problem with a more complete path. For example, this only displays "Works" on subdirectories with particular permissions (in this directory about 1 out of 3):<br />
<br />
$d = opendir("./albums/mydir");<br />
while(false !== ($f = readdir($d))) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;hr /&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($f)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;b&gt;Works:" . $f . "&lt;/b&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
However, this works properly for all directories:<br />
<br />
$d = opendir("./albums/mydir");<br />
while(false !== ($f = readdir($d))) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;hr /&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dName = "./albums/mydir/" . $f;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_dir($dName)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo "&lt;b&gt;Works:" . $dName . "&lt;/b&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
I don't understand the hit-and-miss of the first code, but maybe the second code can help others having this problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73478""></a>
  <div class="note">
   <strong class="user">gecko4 at gmail dot com</strong>
   <a href="#73478" class="date">25-Feb-2007 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is another way to test if a directory is empty, which I think is much simpler than those posted below:<br />
<br />
<span class="default">&lt;?php<br />
$dir </span><span class="keyword">= </span><span class="string">'directory'</span><span class="keyword">;<br />
echo (</span><span class="default">count</span><span class="keyword">(</span><span class="default">glob</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/*"</span><span class="keyword">)) === </span><span class="default">0</span><span class="keyword">) ? </span><span class="string">'Empty' </span><span class="keyword">: </span><span class="string">'Not empty'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70712""></a>
  <div class="note">
   <strong class="user">Eric</strong>
   <a href="#70712" class="date">24-Oct-2006 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Ah ha!&nbsp; Maybe this is a bug, or limitation to be more precise, of php. See <a href="http://bugs.php.net/bug.php?id=27792" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=27792</a><br />
<br />
A workaround is posted on the page (above) and seems to work for me:<br />
<br />
function is_dir_LFS($path){<br />
&nbsp; return (('d'==substr(exec("ls -dl '$path'"),0,1))?(true):(false));<br />
}<br />
<br />
PS: I'm using PHP 4.3.10-16, posts report this problem up to 5.0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49788""></a>
  <div class="note">
   <strong class="user">puremango dot co dot uk at gmail dot com</strong>
   <a href="#49788" class="date">08-Feb-2005 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function bypasses open_basedir restrictions.<br />
&lt;?<br />
function my_is_dir($dir)<br />
{<br />
&nbsp;&nbsp;&nbsp; // bypasses open_basedir restrictions of is_dir and fileperms<br />
&nbsp;&nbsp;&nbsp; $tmp_cmd = `ls -dl $dir`;<br />
&nbsp;&nbsp;&nbsp; $dir_flag = $tmp_cmd[0];<br />
&nbsp;&nbsp;&nbsp; if($dir_flag!="d")<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // not d; use next char (first char might be 's' and is still directory)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $dir_flag = $tmp_cmd[1];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return ($dir_flag=="d");<br />
}<br />
?&gt;<br />
<br />
example:<br />
&lt;?<br />
....<br />
echo is_dir("/somewhere/i/dont/have/access/to");<br />
?&gt;<br />
output:<br />
Warning: open_basedir restriction in effect<br />
<br />
&lt;?<br />
....<br />
echo my_is_dir("/somewhere/i/dont/have/access/to");<br />
?&gt;<br />
output:<br />
true (or false, depending whether it is or not...)<br />
<br />
---<br />
visit puremango.co.uk for other such wonders</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49611""></a>
  <div class="note">
   
   <a href="#49611" class="date">03-Feb-2005 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Unfortunately, the function posted by p dot marzec at bold-sg dot pl does not work.<br />
The corrected version is:<br />
<br />
// returns true if folder is empty or not existing<br />
// false if folde is full<br />
<br />
function is_empty_folder($dir) {<br />
if (is_dir($dir)) {<br />
&nbsp;&nbsp; $dl=opendir($dir);<br />
&nbsp;&nbsp; if ($dl) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; while($name = readdir($dl)) {<br />
&nbsp;&nbsp; if (!is_dir("$dir/$name")) { //&lt;--- corrected here<br />
&nbsp;&nbsp; &nbsp; &nbsp; return false;<br />
&nbsp;&nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; closedir($dl);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; return true;<br />
&nbsp;&nbsp; } else return true;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49570""></a>
  <div class="note">
   <strong class="user">tibard at gmail dot com</strong>
   <a href="#49570" class="date">01-Feb-2005 09:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
use this function to get all files inside a directory (including subdirectories)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">scan_Dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrfiles </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$handle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">false </span><span class="keyword">!== (</span><span class="default">$file </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">))) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$file </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$file </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= </span><span class="default">scan_Dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrfiles</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrfiles</span><span class="keyword">[] = </span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$file</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chdir</span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$handle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$arrfiles</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42770""></a>
  <div class="note">
   <strong class="user">sly at noiretblanc dot org</strong>
   <a href="#42770" class="date">28-May-2004 07:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the "is_dir" function I use to solve the problems :<br />
<br />
function Another_is_dir ($file)<br />
{<br />
&nbsp;&nbsp;&nbsp; if ((fileperms("$file") &amp; 0x4000) == 0x4000)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return TRUE;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return FALSE;<br />
}<br />
<br />
or, more simple :<br />
<br />
function Another_is_dir ($file)<br />
{ <br />
return ((fileperms("$file") &amp; 0x4000) == 0x4000);<br />
}<br />
<br />
I can't remember where it comes from, but it works fine.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.glob.html">glob</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.is-executable.html">is_executable</a></div>
 <div class="up"><a href="ref.filesystem.html">ファイルシステム 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
