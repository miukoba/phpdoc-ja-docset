<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>XMLファイルをパースし、オブジェクトに代入する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.simplexml-import-dom.html">simplexml_import_dom</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.simplexml-load-string.html">simplexml_load_string</a></div>
 <div class="up"><a href="ref.simplexml.html">SimpleXML 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.simplexml-load-file" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">simplexml_load_file</h1>
  <p class="verinfo">(PHP 5)</p><p class="refpurpose"><span class="refname">simplexml_load_file</span> &mdash; <span class="dc-title">
   XMLファイルをパースし、オブジェクトに代入する
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.simplexml-load-file-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> <span class="methodname"><strong>simplexml_load_file</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$class_name</code><span class="initializer"> = &quot;SimpleXMLElement&quot;</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$options</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$ns</code><span class="initializer"> = &quot;&quot;</span></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$is_prefix</code><span class="initializer"> = false</span></span>
  ]]]] )</div>

  <p class="para rdfs-comment">
   指定したファイルの中の整形式 XML ドキュメントをオブジェクトに変換します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.simplexml-load-file-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">filename</code></em></span>
     <dd>

      <p class="para">
       XML ファイルへのパス。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        Libxml 2 は URI をエスケープしませんので、例えば URI パラメータ
        <em>a</em> に <em>b&amp;c</em> を渡したい場合、
        <em>simplexml_load_file(rawurlencode(&#039;http://example.com/?a=&#039; .
        urlencode(&#039;b&amp;c&#039;)))</em>
        をしてコールする必要があります。PHP 5.1.0 以降では、これをする必要は
        ありません。PHP が自動的に行います。
       </p>
      </p></blockquote>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">class_name</code></em></span>
     <dd>

      <p class="para">
        <span class="function"><strong>simplexml_load_file()</strong></span>
       が指定されたクラスのオブジェクトを返すようにするために、
       このオプションのパラメータを使用します。
       このクラスは、<span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span>
       クラスを継承していなければなりません。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">options</code></em></span>
     <dd>

      <p class="para">
       PHP 5.1.0 と Libxml 2.6.0 から、<a href="libxml.constants.html" class="link">追加の Libxml パラメータ</a>
       を指定するために <em><code class="parameter">options</code></em>
       を使用することもできます。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">ns</code></em></span>
     <dd>

      <p class="para">
       名前空間プレフィックスあるいは URI。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">is_prefix</code></em></span>
     <dd>

      <p class="para">
       <em><code class="parameter">ns</code></em> がプレフィックスである場合に <strong><code>TRUE</code></strong>、
       URI である場合に <strong><code>FALSE</code></strong>。デフォルトは <strong><code>FALSE</code></strong> です。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.simplexml-load-file-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <span class="type"><a href="class.simplexmlelement.html" class="type SimpleXMLElement">SimpleXMLElement</a></span> クラスのオブジェクトを返します。
   XML ドキュメント内のデータをプロパティに含みます。
   失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 
 <div class="refsect1 errors" id="refsect1-function.simplexml-load-file-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   XML データ内でエラーが見つかるたびに <strong><code>E_WARNING</code></strong>
   エラーメッセージが発生します。
  </p>
  <div class="tip"><strong class="tip">ヒント</strong>
   <p class="para">
     <span class="function"><a href="function.libxml-use-internal-errors.html" class="function">libxml_use_internal_errors()</a></span> ですべての XML エラーを抑制し、
    後から  <span class="function"><a href="function.libxml-get-errors.html" class="function">libxml_get_errors()</a></span> で取得することもできます。
   </p>
  </div>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.simplexml-load-file-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5477">
    <p><strong>例1 XMLドキュメントをパースする</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;file&nbsp;test.xml&nbsp;contains&nbsp;an&nbsp;XML&nbsp;document&nbsp;with&nbsp;a&nbsp;root&nbsp;element<br />//&nbsp;and&nbsp;at&nbsp;least&nbsp;an&nbsp;element&nbsp;/[root]/title.<br /><br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">file_exists</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">simplexml_load_file</span><span style="color: #007700">(</span><span style="color: #DD0000">'test.xml'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$xml</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #DD0000">'Failed&nbsp;to&nbsp;open&nbsp;test.xml.'</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     このスクリプトは成功時に以下のように出力します。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
SimpleXMLElement Object
(
  [title] =&gt; Example Title
  ...
)
</pre></div>
    </div>
    <div class="example-contents"><p>
     この時点で、<em>$xml-&gt;title</em> としたり、
     他の全ての要素にアクセスすることができます。
    </p></div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.simplexml-load-file-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.simplexml-load-string.html" class="function" rel="rdfs-seeAlso">simplexml_load_string()</a> - XML 文字列をオブジェクトに代入する</span></li>
    <li class="member"> <span class="methodname"><a href="simplexmlelement.construct.html" class="methodname" rel="rdfs-seeAlso">SimpleXMLElement::__construct()</a> - 新しい SimpleXMLElement オブジェクトを作成する</span></li>
    <li class="member"><a href="simplexml.examples-errors.html" class="xref">XML エラーの対応</a></li>
    <li class="member"> <span class="function"><a href="function.libxml-use-internal-errors.html" class="function" rel="rdfs-seeAlso">libxml_use_internal_errors()</a> - libxmlエラーを無効にし、ユーザーが必要に応じてエラー情報を取得できるようにする</span></li>
    <li class="member"><a href="simplexml.examples-basic.html" class="xref">基本的な SimpleXML の使用法</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="109935""></a>
  <div class="note">
   <strong class="user">kannan at 99deals dot in</strong>
   <a href="#109935" class="date">04-Sep-2012 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have some nodes which are having special characters, it would not load properly<br />
<br />
for an instance see the nodes below<br />
&lt;node:number&gt;1538-7445&lt;/node:number&gt;<br />
&lt;node:coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node:coverDisplayDate&gt;<br />
<br />
either you have to change the : to other special characters like '-' in order to convert it properly<br />
<br />
Correct Node<br />
&lt;node-number&gt;1538-7445&lt;/node-number&gt;<br />
&lt;node-coverDisplayDate&gt;Sep&nbsp; 1 2012 12:00:00:000AM&lt;/node-coverDisplayDate&gt;<br />
<br />
I have wasted my precious time while debugging this. Please aware about this. ?</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109795""></a>
  <div class="note">
   <strong class="user">ricardo at ricardomartins dot info</strong>
   <a href="#109795" class="date">22-Aug-2012 02:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes we have xml's with hyphens nodes, like<br />
<br />
&lt;my_xml&gt;<br />
&nbsp;&lt;some-node&gt;value&lt;/some-node&gt;<br />
&lt;/my_xml&gt;<br />
<br />
You'll need to use<br />
<span class="default">&lt;?php<br />
$simpleXmlObj</span><span class="keyword">-&gt;{</span><span class="string">'some-node'</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
instead of <br />
<span class="default">&lt;?php<br />
$simpleXmlObj</span><span class="keyword">-&gt;</span><span class="default">some</span><span class="keyword">-</span><span class="default">node</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108180""></a>
  <div class="note">
   <strong class="user">fusionstream at gmail dot com</strong>
   <a href="#108180" class="date">05-Apr-2012 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are loading many files, this may slow down your page load time.<br />
<br />
To set a timeout, use file_get_context and then simplexml_load_string<br />
<br />
<span class="default">&lt;?php<br />
<br />
$fp </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">'<a href="http://www.example.com/rss" rel="nofollow" target="_blank">http://www.example.com/rss</a>'</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">stream_create_context</span><span class="keyword">(array(</span><span class="string">'http' </span><span class="keyword">=&gt; array(</span><span class="string">'timeout'</span><span class="keyword">, </span><span class="string">'1.5'</span><span class="keyword">))));<br />
<br />
if (</span><span class="default">$fp</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">) );<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"The request timed out"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102974""></a>
  <div class="note">
   <strong class="user">sean at aliencreations dot com</strong>
   <a href="#102974" class="date">17-Mar-2011 07:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you find that you are receiving 500 errors with simplexml_load_file() but you can access the xml/rss feed manually through a browser, your script is probably being blocked by a user agent sniffer.<br />
<br />
Add this code before your xml call to remedy this issue<br />
<br />
<span class="default">&lt;?php<br />
<br />
ini_set</span><span class="keyword">(</span><span class="string">"user_agent"</span><span class="keyword">,</span><span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"</span><span class="keyword">);<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"max_execution_time"</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">ini_set</span><span class="keyword">(</span><span class="string">"memory_limit"</span><span class="keyword">, </span><span class="string">"10000M"</span><span class="keyword">);<br />
<br />
</span><span class="default">$rss </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$feed_url</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102309""></a>
  <div class="note">
   <strong class="user">Nanuit at ossi dot at</strong>
   <a href="#102309" class="date">08-Feb-2011 10:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A little function very helpfull in using simplexml_load_file behind a proxy<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getXMLfromURL</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Proxy </span><span class="keyword">= </span><span class="default">getenv</span><span class="keyword">(</span><span class="string">"HTTP_PROXY"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Proxy</span><span class="keyword">) &gt; </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r_default_context </span><span class="keyword">= </span><span class="default">stream_context_get_default </span><span class="keyword">( array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (</span><span class="string">'http' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'proxy' </span><span class="keyword">=&gt; </span><span class="default">$Proxy</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'request_fulluri' </span><span class="keyword">=&gt; </span><span class="default">True</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">libxml_set_streams_context</span><span class="keyword">(</span><span class="default">$r_default_context</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$daten </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return (</span><span class="default">$daten</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
where HTTP_PROXY is set to e.g.: tcp://proxy:8080</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100889""></a>
  <div class="note">
   <strong class="user">guego dot ol at ig dot com dot br</strong>
   <a href="#100889" class="date">13-Nov-2010 12:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Analyze fully XML.<br />
<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'file.xml'</span><span class="keyword">);<br />
<br />
foreach(</span><span class="default">$xml </span><span class="keyword">as </span><span class="default">$key0 </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
echo </span><span class="string">"..1..[</span><span class="default">$key0</span><span class="string">] =&gt; </span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey0 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue1</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey0</span><span class="string">] = </span><span class="default">$attributesvalue1</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value2</span><span class="keyword">){<br />
echo </span><span class="string">"....2.....[</span><span class="default">$key</span><span class="string">] =&gt; </span><span class="default">$value2</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value2</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue2</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey</span><span class="string">] = </span><span class="default">$attributesvalue2</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value2 </span><span class="keyword">as </span><span class="default">$key2 </span><span class="keyword">=&gt; </span><span class="default">$value3</span><span class="keyword">){<br />
echo </span><span class="string">".........3..........[</span><span class="default">$key2</span><span class="string">] =&gt; </span><span class="default">$value3</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value3</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey2 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue3</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey2</span><span class="string">] = </span><span class="default">$attributesvalue3</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value3 </span><span class="keyword">as </span><span class="default">$key3 </span><span class="keyword">=&gt; </span><span class="default">$value4</span><span class="keyword">){<br />
echo </span><span class="string">"...................4....................[</span><span class="default">$key3</span><span class="string">] =&gt; </span><span class="default">$value4</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value4</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey3 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue4</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey3</span><span class="string">] = </span><span class="default">$attributesvalue4</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value4 </span><span class="keyword">as </span><span class="default">$key4 </span><span class="keyword">=&gt; </span><span class="default">$value5</span><span class="keyword">){<br />
echo </span><span class="string">".....................5......................[</span><span class="default">$key4</span><span class="string">] =&gt; </span><span class="default">$value5</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value5</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey4 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue5</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey4</span><span class="string">] = </span><span class="default">$attributesvalue5</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="comment">////////////////////////////////////////////////<br />
</span><span class="keyword">foreach(</span><span class="default">$value5 </span><span class="keyword">as </span><span class="default">$key5 </span><span class="keyword">=&gt; </span><span class="default">$value6</span><span class="keyword">){<br />
echo </span><span class="string">"......................6.......................[</span><span class="default">$key5</span><span class="string">] =&gt; </span><span class="default">$value6</span><span class="string">"</span><span class="keyword">;<br />
foreach(</span><span class="default">$value6</span><span class="keyword">-&gt;</span><span class="default">attributes</span><span class="keyword">() as </span><span class="default">$attributeskey5 </span><span class="keyword">=&gt; </span><span class="default">$attributesvalue6</span><span class="keyword">){<br />
echo </span><span class="string">"________[</span><span class="default">$attributeskey5</span><span class="string">] = </span><span class="default">$attributesvalue6</span><span class="string">"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
}}}}}<br />
echo </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100526""></a>
  <div class="note">
   <strong class="user">raduispas at gmail dot com</strong>
   <a href="#100526" class="date">21-Oct-2010 03:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to check when this function fails,make sure to compare the return value with ===&nbsp; instead of == :<br />
<br />
<span class="default">&lt;?php<br />
$url </span><span class="keyword">= </span><span class="string">'<a href="http://www.example.com" rel="nofollow" target="_blank">http://www.example.com</a>'</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simpleXML_load_file</span><span class="keyword">(</span><span class="default">$url</span><span class="keyword">,</span><span class="string">"SimpleXMLElement"</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);<br />
if(</span><span class="default">$xml </span><span class="keyword">===&nbsp; </span><span class="default">FALSE</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="comment">//deal with error<br />
</span><span class="keyword">}<br />
else { </span><span class="comment">//do stuff } <br />
</span><span class="default">?&gt;<br />
</span><br />
Otherwise you may end up with FALSE all the time even if the document is ok. Hope this helps someone ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97077""></a>
  <div class="note">
   <strong class="user">jamie at splooshmedia dot co dot uk</strong>
   <a href="#97077" class="date">31-Mar-2010 03:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A wrapper around simplexml_load_file to circumvent nasty error messages when the xml server times out or gives a 500 error etc.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">loadXML2</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">, </span><span class="default">$timeout </span><span class="keyword">= </span><span class="default">30</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Usage:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $xml = loadXML2("127.0.0.1", "/path/to/xml/server.php?code=do_something");<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($xml) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // xml doc loaded<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // failed. show friendly error message.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$fp </span><span class="keyword">= </span><span class="default">fsockopen</span><span class="keyword">(</span><span class="default">$domain</span><span class="keyword">, </span><span class="default">80</span><span class="keyword">, </span><span class="default">$errno</span><span class="keyword">, </span><span class="default">$errstr</span><span class="keyword">, </span><span class="default">$timeout</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$fp</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// make request<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">"GET </span><span class="default">$path</span><span class="string"> HTTP/1.1\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Host: </span><span class="default">$domain</span><span class="string">\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="string">"Connection: Close\r\n\r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fwrite</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">$out</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get response<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$resp </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (!</span><span class="default">feof</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$resp </span><span class="keyword">.= </span><span class="default">fgets</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">, </span><span class="default">128</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">fclose</span><span class="keyword">(</span><span class="default">$fp</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check status is 200<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$status_regex </span><span class="keyword">= </span><span class="string">"/HTTP\/1\.\d\s(\d+)/"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="default">$status_regex</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">) &amp;&amp; </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] == </span><span class="default">200</span><span class="keyword">) {&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// load xml as object<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$parts </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"\r\n\r\n"</span><span class="keyword">, </span><span class="default">$resp</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$parts</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96764""></a>
  <div class="note">
   <strong class="user">Smokey</strong>
   <a href="#96764" class="date">15-Mar-2010 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for nested and same name values i'v made up this little bit for getting and displaying multiable values from google's geocode when a exact match is not found it returns all close matches in the following format(this is an abriged version of there output)<br />
<br />
&lt;Response&gt;<br />
&nbsp; &lt;Placemark id="1"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt; New York 24, NY, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ..................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-73.5850086,40.7207442,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&nbsp; &lt;Placemark id="2"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt;New York 27, NY, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ...................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-72.8987835,40.8003588,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&nbsp; &lt;Placemark id="3"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;address&gt;Cedar Place School, 20 Cedar Pl, Yonkers, NY 10705, USA&lt;/address&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;AddressDetails&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; ..................<br />
&nbsp;&nbsp;&nbsp; &lt;/AddressDetails&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;Point&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;coordinates&gt;-73.8966320,40.9256520,0&lt;/coordinates&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/Point&gt;<br />
&nbsp; &lt;/Placemark&gt;<br />
&lt;/Response&gt;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// get and breakdown the results then store them in $var's<br />
</span><span class="default">$Address </span><span class="keyword">= </span><span class="string">"99999 parkplace, new york, NY"</span><span class="keyword">;<br />
</span><span class="default">$urladdress </span><span class="keyword">= </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$Address</span><span class="keyword">);<br />
</span><span class="default">$Base_url </span><span class="keyword">= </span><span class="string">"<a href="http://maps.google.com/maps/geo?q=" rel="nofollow" target="_blank">http://maps.google.com/maps/geo?q=</a>"</span><span class="keyword">;<br />
</span><span class="default">$urlParts </span><span class="keyword">= </span><span class="string">"&amp;output=xml"</span><span class="keyword">;<br />
</span><span class="default">$urlrequest </span><span class="keyword">= </span><span class="default">$Base_url </span><span class="keyword">. </span><span class="default">$urladdress </span><span class="keyword">. </span><span class="default">$urlParts</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$urlrequest</span><span class="keyword">);<br />
</span><span class="default">$num </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br />
foreach (</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">Response</span><span class="keyword">-&gt;</span><span class="default">Placemark </span><span class="keyword">as </span><span class="default">$value</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$num</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">address</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">-&gt;</span><span class="default">Point</span><span class="keyword">-&gt;</span><span class="default">coordinates</span><span class="keyword">;<br />
} <br />
<br />
</span><span class="comment">// a simple display for the results <br />
</span><span class="keyword">echo </span><span class="string">"Found "</span><span class="keyword">,</span><span class="default">$num</span><span class="keyword">,</span><span class="string">" Possable Geo Data Sets &lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$CountNumResults </span><span class="keyword">= </span><span class="string">"0"</span><span class="keyword">;<br />
for ( ; </span><span class="default">$num </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">; </span><span class="default">$num</span><span class="keyword">--){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$CountNumResults</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$countnum</span><span class="keyword">,</span><span class="string">"&lt;br&gt; Address = "</span><span class="keyword">,</span><span class="default">$GeoFindAdd</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt; Coordinates = "</span><span class="keyword">,</span><span class="default">$GeoFindCords</span><span class="keyword">{</span><span class="default">$num</span><span class="keyword">},</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
echo </span><span class="string">"END"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93478""></a>
  <div class="note">
   <strong class="user">knl at bitflop dot com</strong>
   <a href="#93478" class="date">11-Sep-2009 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to parse the data from SimpleXML into a session variable remember to define the data as a string first.<br />
<br />
If you don't you will get warnings of "Node no longer exists" pointing to your session_start() function.<br />
<br />
This will work:<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; $new_version </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'<a href="http://example.com/version.xml" rel="nofollow" target="_blank">http://example.com/version.xml</a>'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$_SESSION</span><span class="keyword">[</span><span class="string">'current_version'</span><span class="keyword">] = (string)</span><span class="default">$new_version</span><span class="keyword">-&gt;</span><span class="default">version</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92969""></a>
  <div class="note">
   <strong class="user">neil art neilanddeb dort com</strong>
   <a href="#92969" class="date">17-Aug-2009 03:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Because the encoding of my XML file is UTF-8 and the <br />
encoding of my web page is iso-8859-1 I was getting strange characters such as â€™ instead of a right single quote.<br />
<br />
The solution to this turned out to be hard to find, but really easy to implement.<br />
<br />
<a href="http://uk3.php.net/manual/en/function.iconv.php" rel="nofollow" target="_blank">http://uk3.php.net/manual/en/function.iconv.php</a><br />
<br />
Using the iconv() function you can convert from one encodign to another, the TRANSLIT option seems to work best for what I needed.&nbsp; Here's my example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// convert string from utf-8 to iso8859-1<br />
</span><span class="default">$horoscope </span><span class="keyword">= </span><span class="default">iconv</span><span class="keyword">( </span><span class="string">"UTF-8"</span><span class="keyword">, </span><span class="string">"ISO-8859-1//TRANSLIT"</span><span class="keyword">, </span><span class="default">$horoscope </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I found the solution on this page...<br />
<a href="http://tinyurl.com/lm39xc" rel="nofollow" target="_blank">http://tinyurl.com/lm39xc</a><br />
Hope this helps</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86471""></a>
  <div class="note">
   <strong class="user">cryonyx at cerebrate dot ru</strong>
   <a href="#86471" class="date">21-Oct-2008 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you have a XML file with a series of equally named elements on one level simplexml incorrectly processes them and doesn't allow to walk through the array using foreach(). As far as I'm concerned, it is the problem caused by PHP xml_parser (see: <a href="http://ru2.php.net/manual/ru/function.xml-parser-create.php#53188" rel="nofollow" target="_blank">http://ru2.php.net/manual/ru/function.xml-parser-create.php#53188</a>).<br />
<br />
To avoid this, just use count() and walk through the array using for().<br />
<br />
Example:<br />
<br />
&lt;params&gt;<br />
&nbsp; &lt;param&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;name&gt;version.shell&lt;/name&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;value&gt;1.0&lt;/value&gt;<br />
&nbsp; &lt;/param&gt;<br />
&nbsp; &lt;param&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;name&gt;version.core&lt;/name&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;value&gt;1.0&lt;/value&gt;<br />
&nbsp; &lt;/param&gt;<br />
&nbsp; &lt;param&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;name&gt;file.lang&lt;/name&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;value&gt;vc.lang&lt;/value&gt;<br />
&nbsp; &lt;/param&gt;<br />
&nbsp; ...<br />
&lt;/params&gt;<br />
<br />
<span class="default">&lt;?php<br />
$filename </span><span class="keyword">= </span><span class="string">'...'</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />
</span><span class="default">$p_cnt </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$p_cnt</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$param </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">param</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp; ...;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85484""></a>
  <div class="note">
   <strong class="user">mario</strong>
   <a href="#85484" class="date">02-Sep-2008 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want CDATA in your object you should use LIBXML_NOCDATA<br />
<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$file_xml</span><span class="keyword">, </span><span class="string">'SimpleXMLElement'</span><span class="keyword">,</span><span class="default">LIBXML_NOCDATA</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82067""></a>
  <div class="note">
   <strong class="user">l [DOT] anzinger [AT] gmail [DOT] com</strong>
   <a href="#82067" class="date">26-Mar-2008 06:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you don't want that the CDATA values get escaped, just load the XML with LIBXML_NOCDATA as an 3rd argument.<br />
<br />
Note: A PHP version &gt;= 5.1.0 is required for this to work.<br />
<br />
Example: <br />
<br />
<span class="default">&lt;?php simplexml_load_file</span><span class="keyword">(</span><span class="string">'xmldatei.xml'</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">LIBXML_NOCDATA</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74192""></a>
  <div class="note">
   <strong class="user">php at werner dash ott dot de</strong>
   <a href="#74192" class="date">29-Mar-2007 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Making SimpleXMLElement objects session save.<br />
<br />
Besides the effect of not surviving sessions, the SimpleXMLElement object may even crash the session_start() function when trying to re-enter the session!<br />
<br />
To come up with a solution for this, I used a pattern as follows. The core idea is to transform the SimpleXMLElement between session calls to and from a string representation which of course is session save.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">//<br />
&nbsp; // session save handling of SimpleXMLElement objects<br />
&nbsp; // (applies to/ tested with PHP 5.1.5 and PHP 5.2.1)<br />
&nbsp; // The myClass pattern allows for conveniently accessing<br />
&nbsp; // XML structures while being session save<br />
&nbsp; //<br />
&nbsp; </span><span class="keyword">class </span><span class="default">myClass<br />
&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$o_XMLconfig </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$s_XMLconfig </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="default">$args_configfile</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// __construct()<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__destruct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig</span><span class="keyword">); </span><span class="comment">// this object would otherwise crash <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // the subsequent call of <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // session_start()!<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// __destruct()<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__wakeup</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">o_XMLconfig </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">s_XMLconfig</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } </span><span class="comment">// __wakeup()<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; </span><span class="keyword">} </span><span class="comment">// class myClass<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73367""></a>
  <div class="note">
   <strong class="user">wouter at code-b dot nl</strong>
   <a href="#73367" class="date">20-Feb-2007 11:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To correctly extract a value from a CDATA just make sure you cast the SimpleXML Element to a string value by using the cast operator:<br />
<br />
<span class="default">&lt;?php<br />
$xml </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0" encoding="UTF-8" ?&gt;<br />
&lt;rss&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;channel&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;item&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;title&gt;&lt;![CDATA[Tom &amp; Jerry]]&gt;&lt;/title&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/item&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/channel&gt;<br />
&lt;/rss&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
<br />
</span><span class="comment">// echo does the casting for you<br />
</span><span class="keyword">echo </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">;<br />
<br />
</span><span class="comment">// but vardump (or print_r) not!<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);<br />
<br />
</span><span class="comment">// so cast the SimpleXML Element to 'string' solve this issue<br />
</span><span class="default">var_dump</span><span class="keyword">((string) </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">channel</span><span class="keyword">-&gt;</span><span class="default">item</span><span class="keyword">-&gt;</span><span class="default">title</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Above will output:<br />
<br />
Tom &amp; Jerry<br />
<br />
object(SimpleXMLElement)#4 (0) {}<br />
<br />
string(11) "Tom &amp; Jerry"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71667""></a>
  <div class="note">
   <strong class="user">Kyle</strong>
   <a href="#71667" class="date">10-Dec-2006 11:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In regards to Anonymous on 7th April 2006<br />
<br />
There is a way to get back HTML tags. For example:<br />
<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;intro&gt;<br />
&nbsp;&nbsp;&nbsp; Welcome to &lt;b&gt;Example.com&lt;/b&gt;!<br />
&lt;/intro&gt;<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// I use @ so that it doesn't spit out content of my XML in an error message if the load fails. The content could be passwords so this is just to be safe.<br />
</span><span class="default">$xml </span><span class="keyword">= @</span><span class="default">simplexml_load_file</span><span class="keyword">(</span><span class="string">'content_intro.xml'</span><span class="keyword">);<br />
if (</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// asXML() will keep the HTML tags but it will also keep the parent tag &lt;intro&gt; so I strip them out with a str_replace. You could obviously also use a preg_replace if you have lots of tags.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$intro </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">'&lt;intro&gt;'</span><span class="keyword">, </span><span class="string">'&lt;/intro&gt;'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">-&gt;</span><span class="default">asXML</span><span class="keyword">());<br />
} else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$error </span><span class="keyword">= </span><span class="string">"Could not load intro XML file."</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
With this method someone can change the intro in content_intro.xml and ensure that the HTML is well formed and not ruin the whole site design.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="64080""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#64080" class="date">07-Apr-2006 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What has been found when using the script is that simplexml_load_file() will remove any HTML formating inside the XML file, and will also only load so many layers deep. If your XML file is to deap, it will return a boolean false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62781""></a>
  <div class="note">
   <strong class="user">fdouteaud at gmail dot com</strong>
   <a href="#62781" class="date">09-Mar-2006 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful if you are using simplexml data directly to feed your MySQL database using MYSQLi and bind parameters. <br />
<br />
The data coming from simplexml are Objects and the bind parameters functions of MySQLi do NOT like that! (it causes some memory leak and can crash Apache/PHP)<br />
<br />
In order to do this properly you MUST cast your values to the right type (string, integer...) before passing them to the binding methods of MySQLi.<br />
I did not find that in the documentation and it caused me a lot of headache.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61549""></a>
  <div class="note">
   <strong class="user">info at evasion dot cc</strong>
   <a href="#61549" class="date">06-Feb-2006 05:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry there's a mistake in the previous function :<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// Must use getXMLnode function there (recursive)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp;&nbsp; <br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61450""></a>
  <div class="note">
   <strong class="user">skutter at imprecision dot net</strong>
   <a href="#61450" class="date">03-Feb-2006 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So it seems SimpleXML doesn't support CDATA... I bashed together this little regex function to sort out the CDATA before trying to parse XML with the likes of simplexml_load_file / simplexml_load_string. Hope it might help somebody and would be very interested to hear of better solutions. (Other than *not* using SimpleXML of course! ;)<br />
<br />
It looks for any &lt;![CDATA [Text and HTML etc in here]]&gt; elements, htmlspecialchar()'s the encapsulated data and then strips the "&lt;![CDATA [" and "]]&gt;" tags out.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">"/\&lt;\!\[CDATA \[(.*)\]\]\&gt;/U"</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$args</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) &amp;&amp; isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">$xml</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]); </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$old_text </span><span class="keyword">= </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_text </span><span class="keyword">= </span><span class="default">htmlspecialchars</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_xml </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$old_text</span><span class="keyword">, </span><span class="default">$new_text</span><span class="keyword">, </span><span class="default">$new_xml</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$new_xml</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">//Usage:<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'Your XML with CDATA...'</span><span class="keyword">;<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="default">simplexml_unCDATAise</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">$xml_object </span><span class="keyword">= </span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xml</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61438""></a>
  <div class="note">
   <strong class="user">info at evasion dot cc</strong>
   <a href="#61438" class="date">03-Feb-2006 12:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Suppose you have loaded a XML file into $simpleXML_obj. <br />
The structure is like below :<br />
<br />
SimpleXMLElement Object<br />
(<br />
<br />
&nbsp;&nbsp;&nbsp; [node1] =&gt; SimpleXMLElement Object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode1] =&gt; value1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode2] =&gt; value2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode3] =&gt; value3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [node2] =&gt; SimpleXMLElement Object<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode4] =&gt; value4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode5] =&gt; value5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [subnode6] =&gt; value6<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
When searching a specific node in the object, you may use this function :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function &amp;</span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">-&gt;</span><span class="default">$param</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)&amp;&amp;!empty(</span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_obj </span><span class="keyword">= </span><span class="default">$object</span><span class="keyword">-&gt;</span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">getCfgParam</span><span class="keyword">(</span><span class="default">$new_obj</span><span class="keyword">, </span><span class="default">$param</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$ret</span><span class="keyword">) return (string) </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
So if you want to get subnode4 value you may use this function like this : <br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">getXMLnode</span><span class="keyword">(</span><span class="default">$simpleXML_obj</span><span class="keyword">, </span><span class="string">'subnode4'</span><span class="keyword">);<br />
echo </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
It display "value4"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57326""></a>
  <div class="note">
   <strong class="user">genialbrainmachine at NOSPAM dot tiscali dot it</strong>
   <a href="#57326" class="date">30-Sep-2005 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Micro$oft Word uses non-standard characters and they create problems in using simplexml_load_file.<br />
Many systems include non-standard Word character in their implementation of ISO-8859-1. So an XML document containing that characters can appear well-formed (i.e.) to many browsers. But if you try to load this kind of documents with simplexml_load_file you'll have a little bunch of troubles..<br />
I believe that this is exactly the same question discussed in htmlentites. Following notes to htmlentitles are interesting here too (given in the reverse order, to grant the history):<br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#26379" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#26379</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#41152" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#41152</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#42126" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42126</a><br />
<a href="http://it.php.net/manual/en/function.htmlentities.php#42511" rel="nofollow" target="_blank">http://it.php.net/manual/en/function.htmlentities.php#42511</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56691""></a>
  <div class="note">
   <strong class="user">mark</strong>
   <a href="#56691" class="date">12-Sep-2005 08:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If the property of an object is empty the array is not created. Here is a version object2array that transfers properly.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$object </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; else <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$var </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$var</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$var </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = (</span><span class="default">$key </span><span class="keyword">&amp;&amp; !</span><span class="default">$value</span><span class="keyword">) ? </span><span class="default">NULL </span><span class="keyword">: </span><span class="default">object2array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">$object</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.simplexml-import-dom.html">simplexml_import_dom</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.simplexml-load-string.html">simplexml_load_string</a></div>
 <div class="up"><a href="ref.simplexml.html">SimpleXML 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
