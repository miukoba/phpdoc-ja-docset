<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>変更履歴</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="class.mongogridfsexception.html">MongoGridFSException</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.msql.html">mSQL</a></div>
 <div class="up"><a href="book.mongo.html">Mongo</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="changelog.mongo" class="appendix">
 <h1>変更履歴</h1>

 <p class="para">この拡張モジュールのクラス/関数/メソッドには次のような変更がありました。</p>

 
 <div class="simplesect">
  <h3 class="title">MongoDB PHP Driver 1.3.0</h3>
  <p class="para">
   1.3 系では大きな変更が加わりました。
   <a href="mongo.connecting.html" class="link">接続処理</a>
   が新しく書き直され (同時にプーリングが削除され) たり、
   <a href="mongo.readpreferences.html" class="link">優先読み込み</a>
   に対応したり、デフォルトの <a href="mongo.writes.html" class="link">WriteConcerns</a>
   が<em class="emphasis">確認付き</em>になったりしました。新しく導入されたクラス
   <a href="class.mongoclient.html" class="link">MongoClient</a> がこれらを扱います。
   これは、非推奨になった <a href="class.mongo.html" class="classname">Mongo</a> クラスのかわりに使うものです。
  </p>
  <p class="para">
   また、複数の mongos インスタンス
   (Mongo Shard ルーター) に接続してロードバランシングができるようになりました。
  </p>
  <p class="para">
   その他の追加機能には、<a href="class.mongolog.html" class="classname">MongoLog</a> のログ機能の改良
   (接続処理のデバッグがしやすくなりました) や
    <span class="methodname"><a href="mongocollection.aggregate.html" class="methodname">MongoCollection::aggregate()</a></span> メソッドによる
   <a href="http://docs.mongodb.org/manual/applications/aggregation/" class="link external" title="Link : http://docs.mongodb.org/manual/applications/aggregation/">&raquo;&nbsp;Aggregation Framework</a>
   のサポートなどがあります。
  </p>
 </div>


 <div class="simplesect">
  <h3 class="title">既存のメソッドへの変更</h3>
  <p class="para">
  既存のメソッドの中で、初期のバージョンから改良が加えられたものをまとめます。
  </p>
  <table class='doctable table' rules='groups'><thead><tr><th>Version</th><th>Function</th><th>Description</th></tr></thead><tbody class="gen-changelog v"><tr><td>1.4.0</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>&quot;wTimeoutMS&quot; オプションが追加されました。これは
         &quot;wTimeout&quot; の代替です。</td></tr><tr><td>&nbsp;</td><td><a href='mongocursor.hint.html'>MongoCursor::hint</a></td><td>index 引数に、文字列でインデックス名を指定できるよういなりました。
         これより前のバージョンでは、配列またはオブジェクトしか渡せませんでした。</td></tr><tr><td>&nbsp;</td><td><a href='mongocursor.setflag.html'>MongoCursor::setFlag</a></td><td>フラグ 3 (OPLOG_REPLAY) をサポートするようになりました。
        以前のバージョンでは、このフラグには対応していないという警告が出ていました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.createcollection.html'>MongoDB::createCollection</a></td><td>1.4.0 より前のバージョンでは、個々のオプションがすべてメソッドの引数になっていました。
         旧バージョンのシグネチャは、次のとおりです。
        
        
         
          public MongoCollectionMongoDB::createCollection
          stringname
          boolcappedFALSE
          intsize0
          intmax0
         
        
        
         各オプションの意味は、先ほど
         options 引数のところで説明したとおりです。</td></tr></tbody><tbody class="gen-changelog v1-4-0"><tr><td>1.3.4</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>&quot;connectTimeoutMS&quot; および
         &quot;socketTimeoutMS&quot; オプションが追加されました。</td></tr></tbody><tbody class="gen-changelog v1-3-4"><tr><td>1.3.3</td><td><a href='mongoclient.getreadpreference.html'>MongoClient::getReadPreference</a></td><td>返り値が変わり、
        MongoClient::setReadPreference
        との整合性があるものになりました。
        type の値は数字から文字列に変わり、
        type_string は削除され、そして
        tagsets はコロン区切りの文字列ではなくキー/値のペアでタグを表すようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.getreadpreference.html'>MongoCollection::getReadPreference</a></td><td>返り値が変わり、
        MongoCollection::setReadPreference
        との整合性があるものになりました。
        type の値は数字から文字列に変わり、
        type_string は削除され、そして
        tagsets はコロン区切りの文字列ではなくキー/値のペアでタグを表すようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.getreadpreference.html'>MongoDB::getReadPreference</a></td><td>返り値が変わり、
        MongoDB::setReadPreference
        との整合性があるものになりました。
        type の値は数字から文字列に変わり、
        type_string は削除され、そして
        tagsets はコロン区切りの文字列ではなくキー/値のペアでタグを表すようになりました。</td></tr></tbody><tbody class="gen-changelog v1-3-3"><tr><td>1.3.0</td><td><a href='mongo.close.html'>Mongo::close</a></td><td>connection パラメータが追加されました。
         それより前のバージョンでは、このメソッドで閉じられるのは書き込み接続だけでした。</td></tr><tr><td>&nbsp;</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>&quot;readPreference&quot;、
         &quot;readPreferenceTags&quot;、&quot;w&quot; および
         &quot;wTimeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>options パラメータで、boolean
        だけを渡してユニークインデックスを指定することができなくなりました。
        同じことをするには array('unique' =&gt; true)
        としなければなりません。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>options パラメータで、boolean
        だけを渡して確認付きの書き込みを指定することができなくなりました。
        同じことをするには array('w' =&gt; 1)
        (MongoClient のデフォルト) としなければなりません。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>options パラメータで、boolean
        だけを渡して &quot;justOne&quot; を指定することができなくなりました。
        同じことをするには array('justOne' =&gt; true)
        としなければなりません。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>options パラメータで、boolean
        だけを渡して upsert を指定することができなくなりました。
        同じことをするには array('upsert'' =&gt; true)
        としなければなりません。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.listcollections.html'>MongoDB::listCollections</a></td><td>includeSystemCollections が追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongogridfscursor.key.html'>MongoGridFSCursor::key</a></td><td>ドキュメントの _id を文字列で返すようになりました。
        キーは一意であるはずだからです。
        これより前のバージョンでは filename を返していました。</td></tr></tbody><tbody class="gen-changelog v1-3-0"><tr><td>1.2.11</td><td><a href='mongo.getpoolsize.html'>Mongo::getPoolSize</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongo.getslave.html'>Mongo::getSlave</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongo.getslaveokay.html'>Mongo::getSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongo.pooldebug.html'>Mongo::poolDebug</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongo.setslaveokay.html'>Mongo::setSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongo.switchslave.html'>Mongo::switchSlave</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongobindata.construct.html'>MongoBinData::__construct</a></td><td>二番目の引数を省略すると E_DEPRECATED を発行します。
        type のデフォルト値は近い将来変わる見込みです。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>options が scalar のときに E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.getslaveokay.html'>MongoCollection::getSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.group.html'>MongoCollection::group</a></td><td>options が scalar のときに E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>options が scalar のときに E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.setslaveokay.html'>MongoCollection::setSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>options が scalar のときに E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocursor.doquery.html'>MongoCursor::doQuery</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.authenticate.html'>MongoDB::authenticate</a></td><td>E_DEPRECATED を発行するようになりました。
        認証情報の詳細をコンストラクタに渡しましょう。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.forceerror.html'>MongoDB::forceError</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.getslaveokay.html'>MongoDB::getSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.preverror.html'>MongoDB::prevError</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.reseterror.html'>MongoDB::resetError</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.setslaveokay.html'>MongoDB::setSlaveOkay</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongopool.getsize.html'>MongoPool::getSize</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongopool.info.html'>MongoPool::info</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongopool.setsize.html'>MongoPool::setSize</a></td><td>E_DEPRECATED を発行するようになりました。</td></tr></tbody><tbody class="gen-changelog v1-2-11"><tr><td>1.2.10</td><td><a href='mongo.gethosts.html'>Mongo::getHosts</a></td><td>レプリカセットでない場合もサポートするようになりました。
        
        
         返される配列の要素に、新たに
         hostname と port
         を含むようになりました。</td></tr></tbody><tbody class="gen-changelog v1-2-10"><tr><td>1.2.7</td><td><a href='mongocollection.batchinsert.html'>MongoCollection::batchInsert</a></td><td>&quot;continueOnError&quot; オプションが追加されました。</td></tr></tbody><tbody class="gen-changelog v1-2-7"><tr><td>1.2.5</td><td><a href='mongogridfs.storeupload.html'>MongoGridFS::storeUpload</a></td><td>二番目のパラメータがメタデータの配列に変わりました。これより前のバージョンでは、
        二番目のパラメータはオプションの文字列で、ファイル名を上書きするものでした。</td></tr></tbody><tbody class="gen-changelog v1-2-5"><tr><td>1.2.0</td><td><a href='mongo.close.html'>Mongo::close</a></td><td>1.2.0 より前のバージョンでは、デフォルトでは持続的接続を使いませんでした。
         そして、MongoDB の接続がスコープから抜ければすぐに閉じられていました。
         バージョン 1.2.0 からはそうではなくなりました。
         close を呼ばないと、高負荷な接続がサーバーを使い切ってしまう可能性があります。</td></tr><tr><td>&nbsp;</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>&quot;username&quot; および &quot;password&quot;
         オプションが追加されました。
        
        
         &quot;persist&quot; オプションが削除されました。すべての接続は持続的な接続となります。
         今でも使うことはできますが、何の影響も及ぼしません。
        
        
         
          
           &quot;persist&quot;
          
          
           
            持続的な接続を行うかどうか。これを設定すると、接続が持続的なものとなります。
            文字列の値を接続 ID として使うので、
            array(&quot;persist&quot; =&gt; &quot;foobar&quot;) で初期化した
            Mongo のインスタンスがふたつあれば、
            それは同じデータベース接続をあらわします。一方、
            array(&quot;persist&quot; =&gt; &quot;barbaz&quot;)
            で初期化したインスタンスは別のデータベース接続を使います。
           
          
         
        
        
         &quot;replicaSet&quot; オプションは、boolean ではなく文字列を受け取るようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>&quot;timeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>&quot;timeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>&quot;timeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.save.html'>MongoCollection::save</a></td><td>&quot;timeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>&quot;timeout&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongodb.command.html'>MongoDB::command</a></td><td>options パラメータと、そのオプション
        &quot;timeout&quot; が追加されました。</td></tr></tbody><tbody class="gen-changelog v1-2-0"><tr><td>1.1.0</td><td><a href='mongocursor.info.html'>MongoCursor::info</a></td><td>多くのフィールドが追加されました。id (カーソル ID)、
        at (現在のドキュメントを表すドライバのカウンタ)、
        numReturned (サーバーが現在のバッチで返した件数)、そして
        server (クエリの送信先のサーバー。
         と組み合わせると便利)
        などです。</td></tr></tbody><tbody class="gen-changelog v1-1-0"><tr><td>1.0.11</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>&quot;safe&quot; は必要に応じてプライマリのフェイルオーバーを行うようになりました。
        
        
         インデックス名 (自動生成されたものあるいは設定したもののどちらでも)
         の長さが 128 バイトを超えた場合に
         MongoException をスローするようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>&quot;safe&quot; が設定されている場合は、&quot;not master&quot; エラーで接続を切断するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>&quot;safe&quot; が設定されている場合は、&quot;not master&quot; エラーで接続を切断するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.save.html'>MongoCollection::save</a></td><td>&quot;safe&quot; が設定されている場合は、&quot;not master&quot; エラーで接続を切断するようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>&quot;safe&quot; が設定されている場合は、&quot;not master&quot; エラーで接続を切断するようになりました。</td></tr></tbody><tbody class="gen-changelog v1-0-11"><tr><td>1.0.10</td><td><a href='mongocursor.info.html'>MongoCursor::info</a></td><td>started_iterating フィールドが追加されました。boolean で、
        このカーソルがクエリ実行前か実行後かを返します。</td></tr></tbody><tbody class="gen-changelog v1-0-10"><tr><td>1.0.9</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>&quot;replicaSet&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.batchinsert.html'>MongoCollection::batchInsert</a></td><td>&quot;safe&quot; オプションに整数値がわたせるようになりました (以前は boolean のみでした)。
        
        
         &quot;fsync&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>&quot;safe&quot; オプションに整数値がわたせるようになりました (以前は boolean のみでした)。
        
        
         &quot;fsync&quot; オプションが追加されました。
        
        
         &quot;safe&quot; オプションを使っている場合の返り値の型が配列に変わりました。
         配列にはエラー情報が含まれています。&quot;safe&quot; オプションを使わない場合は、今までどおり
         boolean のままです。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>&quot;safe&quot; オプションに整数値がわたせるようになりました (以前は boolean のみでした)。
        
        
         &quot;fsync&quot; オプションが追加されました。
        
        
         &quot;safe&quot; オプションを使っている場合の返り値の型が配列に変わりました。
         配列にはエラー情報が含まれています。&quot;safe&quot; オプションを使わない場合は、今までどおり
         boolean のままです。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.save.html'>MongoCollection::save</a></td><td>&quot;safe&quot; オプションに整数値がわたせるようになりました (以前は boolean のみでした)。
        
        
         &quot;fsync&quot; オプションが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>&quot;safe&quot; オプションに整数値がわたせるようになりました (以前は boolean のみでした)。
        
        
         &quot;fsync&quot; オプションが追加されました。
        
        
         &quot;safe&quot; オプションを使っている場合の返り値の型が配列に変わりました。
         配列にはエラー情報が含まれています。&quot;safe&quot; オプションを使わない場合は、今までどおり
         boolean のままです。</td></tr></tbody><tbody class="gen-changelog v1-0-9"><tr><td>1.0.7</td><td><a href='mongocollection.count.html'>MongoCollection::count</a></td><td>パラメータ limit および skip が追加されました。</td></tr></tbody><tbody class="gen-changelog v1-0-7"><tr><td>1.0.5</td><td><a href='mongocollection.batchinsert.html'>MongoCollection::batchInsert</a></td><td>options パラメータが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>&quot;name&quot; オプションで、インデックス名の作成を上書きできるようになりました。
        creation.</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>二番目のパラメータがオプションの配列に変わりました。1.0.5
        より前のバージョンでは、二番目のパラメータは &quot;safe&quot;
        オプションを表す boolean 値でした。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.remove.html'>MongoCollection::remove</a></td><td>二番目のパラメータがオプションの配列に変わりました。1.0.5
        より前のバージョンでは、二番目のパラメータは &quot;safe&quot;
        オプションを表す boolean 値でした。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.save.html'>MongoCollection::save</a></td><td>options パラメータが追加されました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>&quot;safe&quot; オプションが追加されました。</td></tr></tbody><tbody class="gen-changelog v1-0-5"><tr><td>1.0.2</td><td><a href='mongoclient.construct.html'>Mongo::__construct</a></td><td>コンストラクタがオプションの配列を受け取るようになりました。
         以前のバージョンでは、コンストラクタは以下のパラメータを受け取っていました。
        
        
         
          
           server
          
          
           
            サーバー名。
           
          
         
         
          
           connect
          
          
           
            オプションの boolean パラメータで、
            コンストラクタがデータベースに接続するかどうかを示します。
            デフォルトは TRUE です。
           
          
         
         
          
           persistent
          
          
           
            持続的な接続を行うかどうか。
           
          
         
         
          
           paired
          
          
           
            ペア接続を行うかどうか。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.ensureindex.html'>MongoCollection::ensureIndex</a></td><td>options パラメータが boolean から配列に変わりました。
        1.0.2 より前のバージョンでは二番目のパラメータはオプションの boolean
        値で、一意なインデックスを指定するものでした。</td></tr></tbody><tbody class="gen-changelog v1-0-2"><tr><td>1.0.1</td><td><a href='mongocollection.insert.html'>MongoCollection::insert</a></td><td>&quot;safe&quot; オプションが設定されていて追加に失敗した場合に
        MongoCursorException をスローするようになりました。</td></tr><tr><td>&nbsp;</td><td><a href='mongocollection.update.html'>MongoCollection::update</a></td><td>options パラメータが boolean から配列に変わりました。
        1.0.1 より前のバージョンでは二番目のパラメータはオプションの boolean
        値で、upsert を指定するものでした。</td></tr></tbody></table>
 </div>


</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
 <div class="note">There are no user contributed notes for this page.</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="class.mongogridfsexception.html">MongoGridFSException</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.msql.html">mSQL</a></div>
 <div class="up"><a href="book.mongo.html">Mongo</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
