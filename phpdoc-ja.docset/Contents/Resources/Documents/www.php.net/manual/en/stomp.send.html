<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Sends a message</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="stomp.readframe.html">Stomp::readFrame</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="stomp.setreadtimeout.html">Stomp::setReadTimeout</a></div>
 <div class="up"><a href="class.stomp.html">Stomp</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="stomp.send" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Stomp::send</h1>
  <h1 class="refname">stomp_send</h1>
  <p class="verinfo">(PECL stomp &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">Stomp::send</span> -- <span class="refname">stomp_send</span> &mdash; <span class="dc-title">Sends a message</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-stomp.send-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型 (method):</p>
   <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">bool</span> <span class="methodname"><strong>Stomp::send</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$destination</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$msg</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$headers</code></span>
   ] )</div>

  <p class="para rdfs-comment">手続き型:</p>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>stomp_send</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$link</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$destination</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$msg</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$headers</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   Sends a message to the Message Broker.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-stomp.send-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><em><code class="parameter">link</code></em></span><dd>
<p class="para">手続き型のみ:  <span class="function"><a href="stomp.construct.html" class="function">stomp_connect()</a></span> が返す stomp リンク ID。</p></dd>
</dt>

    <dt>

     <span class="term"><em><code class="parameter">destination</code></em></span>
     <dd>

      <p class="para">
       Where to send the message    
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">msg</code></em></span>
     <dd>

      <p class="para">
       Message to send.
      </p>
     </dd>

    </dt>

    <dt>
<span class="term"><em><code class="parameter">headers</code></em></span><dd>
<p class="para">追加のヘッダ (例: receipt) を含む連想配列。</p></dd>
</dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-stomp.send-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。 
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-stomp.send-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <p class="para">トランザクションヘッダを指定し、そのメッセージがトランザクションの一部であることを示します。</p></p></blockquote>
  <div class="tip"><strong class="tip">ヒント</strong><p class="simpara">Stomp は本来非同期です。同期通信を実装するには receipt ヘッダを追加します。これを追加すると、サーバーがメッセージを受領するかタイムアウトに達するまではメソッドが何も返さないようになります。</p></div>
 </div>


 <div class="refsect1 examples" id="refsect1-stomp.send-examples">
  <h3 class="title">例</h3>
  <p class="para">
   See  <span class="function"><a href="stomp.ack.html" class="function">stomp_ack()</a></span>.
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105487""></a>
  <div class="note">
   <strong class="user">james dot mk dot green at gmail dot com</strong>
   <a href="#105487" class="date">22-Aug-2011 01:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Without a receipt header your application will fire messages potentially faster than the broker can receive them at. The broker may issue failure notices however STOMP being asynchronous your client won't get to see it.<br />
<br />
Without a receipt ActiveMQ (5.5.0) with ProducerFlowControl turned on drops messages (even persistent ones) and my application knows nothing about it (send() returned true). With receipt header specified the STOMP library handles the wait for the receipt acknowledgement for you - you are essentially automatically throttled.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="stomp.readframe.html">Stomp::readFrame</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="stomp.setreadtimeout.html">Stomp::setReadTimeout</a></div>
 <div class="up"><a href="class.stomp.html">Stomp</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
