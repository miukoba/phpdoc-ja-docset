<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>日付を Unix のタイムスタンプとして取得する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.microtime.html">microtime</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strftime.html">strftime</a></div>
 <div class="up"><a href="ref.datetime.html">日付・時刻 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.mktime" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mktime</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mktime</span> &mdash; <span class="dc-title">日付を Unix のタイムスタンプとして取得する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mktime-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>mktime</strong></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$hour</code><span class="initializer"> = date(&quot;H&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$minute</code><span class="initializer"> = date(&quot;i&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$second</code><span class="initializer"> = date(&quot;s&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$month</code><span class="initializer"> = date(&quot;n&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$day</code><span class="initializer"> = date(&quot;j&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$year</code><span class="initializer"> = date(&quot;Y&quot;)</span></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$is_dst</code><span class="initializer"> = -1</span></span>
  ]]]]]]] )</div>

  <p class="para rdfs-comment">
   与えられた引数に従って UNIX のタイムスタンプを返します。
   このタイムスタンプは、Unix epoch(1970年1月1日00:00:00 GMT)から
   指定された時刻までの通算秒を表す長整数です。
  </p>
  <p class="para">
   引数は右から順に省略することができます。省略された引数は、
   ローカルの日付と時刻に従って、現在の値にセットされます。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mktime-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    PHP 5.1 以降、引数なしでコールすると  <span class="function"><strong>mktime()</strong></span>
    は <strong><code>E_STRICT</code></strong> notice を発行するようになりました。かわりに
     <span class="function"><a href="function.time.html" class="function">time()</a></span> 関数を使用しましょう。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mktime-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">hour</code></em></span>
     <dd>

      <p class="para">
       <em><code class="parameter">month</code></em>、<em><code class="parameter">day</code></em> と <em><code class="parameter">year</code></em>
       で決まる日付の 0 時から数えた「時」。負の値は、その日の 0 時から前にさかのぼった時間を表します。
       23 より大きい値は、その翌日以降の該当する時間を表します。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">minute</code></em></span>
     <dd>

      <p class="para">
       <em><code class="parameter">hour</code></em> 時 0 分から数えた「分」。
       負の値は、その前の時刻を表します。
       59 より大きい値は、その次の時間以降の該当する時間を表します。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">second</code></em></span>
     <dd>

      <p class="para">
       <em><code class="parameter">minute</code></em> 分 0 秒から数えた「秒」。
       負の値は、その前の時刻を表します。
       59 より大きい値は、その次の分以降の該当する時間を表します。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">month</code></em></span>
     <dd>

      <p class="para">
       前年末から数えた月数。1 から 12 までの場合は、カレンダーどおりのその年の「月」を表します。
       (負の値を含めた) 1 より小さい値は、前年の月を逆順でたどります。
       つまり 0 なら 12 月、-1 なら 11 月になるということです。
       12 より大きい値は、その翌年以降の該当する月を表します。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">day</code></em></span>
     <dd>

      <p class="para">
       前月末から数えた日数。1 から 28、29、30、31 (月によって異なる) までの場合は、その月の「日」を表します。
       (負の値を含めた) 1 より小さい値は、前月の日を逆順でたどります。
       つまり 0 なら前月の末日、-1 ならそのさらに前日になるということです。
       その月の日数より大きい値は、翌月以降の該当する日を表します。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">year</code></em></span>
     <dd>

      <p class="para">
       年。2 桁または 4 桁の値を指定可能で、
       0-69 の間の値は 2000-2069 に、70-100 は 1970-2000 にマップされます。
       今日最も一般的なシステム、すなわち time_t が 32 ビットの符号付き整数である
       システムでは <em><code class="parameter">year</code></em> として有効な範囲は 1901 から
       2038 の間です。しかし、PHP 5.1.0 より前のバージョンではこの範囲が
       1970 から 2038 に制限されているシステム (たとえば Windows) もありました。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">is_dst</code></em></span>
     <dd>

      <p class="para">
       このパラメータはサマータイム (DST) の時に1にセットされ、
       そうでない時に0、サマータイムであるかどうかが不明である場合に-1
       にセットされます。
       不明な場合、PHP はサマータイムかどうか推測しようとします。
       PHP を実行しているシステムで DST が有効になっている、もしくは
       <em><code class="parameter">is_dst</code></em> が 1 にセットされている場合、
       一部の時刻は有効になりません。
       もし DST が有効で例えば 2:00 の場合、2:00 から 3:00 までの全ての時刻は
       無効になり、 <span class="function"><strong>mktime()</strong></span> は不確定な値 (通常は負数)
       を返します。いくつかのシステム (例えば Solaris 8) は真夜中に DST
       を有効にしますので、DST が有効なときの 0:30 は前日の 23:30
       と評価されます。
      </p>
      <blockquote class="note"><p><strong class="note">注意</strong>: 
       <p class="para">
        PHP 5.1.0 以降、このパラメータは廃止されました。その結果、
        新しいタイムゾーン処理機能がかわりに使用されます。
       </p>
      </p></blockquote>
     </dd>

    </dt>

   </dl>

  </p>
 </div>



 <div class="refsect1 returnvalues" id="refsect1-function.mktime-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
    <span class="function"><strong>mktime()</strong></span> は与えられた引数の Unix
   タイムスタンプを返します。引数が不正な場合、
   この関数は <strong><code>FALSE</code></strong> を返します（PHP 5.1 より前のバージョンでは
   <em>-1</em> を返していました）。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-function.mktime-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
すべての日付/時刻関数は、
有効なタイムゾーンが設定されていない場合に <strong><code>E_NOTICE</code></strong>
を発生させます。また、システム設定のタイムゾーンあるいは環境変数
<var class="varname"><var class="varname">TZ</var></var> を使用した場合には <strong><code>E_STRICT</code></strong>
あるいは <strong><code>E_WARNING</code></strong> を発生させます。
 <span class="function"><a href="function.date-default-timezone-set.html" class="function">date_default_timezone_set()</a></span> も参照ください。</p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.mktime-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
         <span class="function"><strong>mktime()</strong></span> は、
        <em><code class="parameter">is_dst</code></em> パラメータを使用した場合に
        <strong><code>E_DEPRECATED</code></strong> をスローするようになりました。
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        <em><code class="parameter">is_dst</code></em> パラメータは廃止されました。
        エラー時には <em>-1</em> ではなく <strong><code>FALSE</code></strong>
        を返すようになりました。
        年月日がすべてゼロとすることが可能になりました。
       </td>
      </tr>

      <tr>
       <td>5.1.0</td>
       <td>
        引数なしでコールすると、 <span class="function"><strong>mktime()</strong></span>
        は <strong><code>E_STRICT</code></strong> notice を発行するようになりました。かわりに
         <span class="function"><a href="function.time.html" class="function">time()</a></span> 関数を使用しましょう。
       </td>
      </tr>


      <tr><td>5.1.0</td><td><p class="para">
タイムゾーンがおかしい場合に <strong><code>E_STRICT</code></strong> や
<strong><code>E_NOTICE</code></strong> が発生するようになりました。</p></td></tr>


     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mktime-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-2306">
    <p><strong>例1  <span class="function"><strong>mktime()</strong></span> の基本的な例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;デフォルトのタイムゾーンを設定します。PHP&nbsp;5.1&nbsp;以降で使用可能です<br /></span><span style="color: #0000BB">date_default_timezone_set</span><span style="color: #007700">(</span><span style="color: #DD0000">'UTC'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;July&nbsp;1,&nbsp;2000&nbsp;is&nbsp;on&nbsp;a&nbsp;Saturday<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"July&nbsp;1,&nbsp;2000&nbsp;is&nbsp;on&nbsp;a&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"l"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;出力例:&nbsp;2006-04-05T01:02:03+00:00<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'c'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2006</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2307">
    <p><strong>例2  <span class="function"><strong>mktime()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
      <span class="function"><strong>mktime()</strong></span> は入力日付の有効性を確認しており、
     範囲外の入力を自動的に修正して計算してくれるので便利です。
     例えば、以下の各行はいずれも文字列 &quot;Jan-01-1998&quot;を出力します。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">12</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">32</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1997</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">13</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1997</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1998</span><span style="color: #007700">));<br />echo&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">"M-d-Y"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">98</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2308">
    <p><strong>例3 月の末日</strong></p>
    <div class="example-contents"><p>
     指定した月の最後の日は次の月の -1 番目の日ではなく、&quot;0&quot; 番目の日
     として表すことが可能です。以下の例はともに文字列&quot;The last day in
     Feb 2000 is: 29&quot; を出力します。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$lastday&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"Last&nbsp;day&nbsp;in&nbsp;Feb&nbsp;2000&nbsp;is:&nbsp;%d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastday</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$lastday&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mktime</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">31</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">strftime</span><span style="color: #007700">(</span><span style="color: #DD0000">"Last&nbsp;day&nbsp;in&nbsp;Feb&nbsp;2000&nbsp;is:&nbsp;%d"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lastday</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mktime-notes">
  <h3 class="title">注意</h3>
  <div class="caution"><strong class="caution">警告</strong>
   <p class="para">
    PHP 5.1.0 より前のバージョンでは、負の値のタイムスタンプは Windows の
    どのバージョンにおいてもサポートされていませんでした。
    したがって、年の有効範囲は 1970 年から 2038 年の間のみに限定されていました。
   </p>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mktime-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.checkdate.html" class="function" rel="rdfs-seeAlso">checkdate()</a> - グレゴリオ暦の日付/時刻の妥当性を確認します</span></li>
    <li class="member"> <span class="function"><a href="function.gmmktime.html" class="function" rel="rdfs-seeAlso">gmmktime()</a> - GMT 日付から Unix タイムスタンプを取得する</span></li>
    <li class="member"> <span class="function"><a href="function.date.html" class="function" rel="rdfs-seeAlso">date()</a> - ローカルの日付/時刻を書式化する</span></li>
    <li class="member"> <span class="function"><a href="function.time.html" class="function" rel="rdfs-seeAlso">time()</a> - 現在の Unix タイムスタンプを返す</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113120""></a>
  <div class="note">
   <strong class="user">info at djdb dot be</strong>
   <a href="#113120" class="date">02-Sep-2013 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
raw date to clean timestamp<br />
&nbsp;private function dateToTimestamp($date){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $datefrom = explode(" ", $date);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $value = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strpos($datefrom[0], '-')){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //print "issplit -";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = explode("-", $datefrom[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strpos($datefrom[0], '/')){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //print "issplit /";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $value = explode("/", $datefrom[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; /*if(){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }*/<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(strlen($value[2])==4){//13/12/2012<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //int mktime([hour[minute[second[month[day[year<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return mktime(0, 0, 0,$value[1],$value[0],$value[2]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //2012/12/13<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; //int mktime([hour[minute[second[month[day[year<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return mktime(0, 0, 0,$value[1],$value[2],$value[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110586""></a>
  <div class="note">
   <strong class="user">Jacob Santos</strong>
   <a href="#110586" class="date">10-Nov-2012 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that incrementing a date using mktime in a loop is not proper. You could do it, except that there is a far better method found in the DateTime PHP class. Look at the documentation for DateTime::modify, DateTime::add (when supported) and DateTime::sub (when supported).<br />
<br />
Also, adding seconds to a time is, well it isn't as easy as it seems, "Hey I'll just add 3600 seconds or 86400 seconds or x seconds!". The phrase once bitten, twice shy is quite applicable with the usage of adding seconds. If you ever had to 'fix' a time by calculating midnight to add the correct number of seconds, then you are doing it wrong. <br />
<br />
Luckily, knowing is not a requirement, because DateTime and friends exists, removing the complexity for you.<br />
<br />
So if given a choice of<br />
<br />
mktime($seconds, $minutes, $hours+1);<br />
<br />
and<br />
<br />
$datetime-&gt;modify('+1 hour');<br />
<br />
or<br />
<br />
$datetime-&gt;add('P1H');<br />
<br />
I'll go with the second choice, but probably not the third, unless I was using DateInterval::createFromDateString, so that other developers knew my intent.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100733""></a>
  <div class="note">
   <strong class="user">info at microweb dot lt</strong>
   <a href="#100733" class="date">03-Nov-2010 04:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to generate array of dates between two dates (date range array)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">dates_range</span><span class="keyword">(</span><span class="default">$date1</span><span class="keyword">, </span><span class="default">$date2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; if (</span><span class="default">$date1</span><span class="keyword">&lt;</span><span class="default">$date2</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$dates_range</span><span class="keyword">[]=</span><span class="default">$date1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$date1</span><span class="keyword">=</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$date2</span><span class="keyword">=</span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$date2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; while (</span><span class="default">$date1</span><span class="keyword">!=</span><span class="default">$date2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$date1</span><span class="keyword">=</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">), </span><span class="default">date</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">, </span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$dates_range</span><span class="keyword">[]=</span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">, </span><span class="default">$date1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return </span><span class="default">$dates_range</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">dates_range</span><span class="keyword">(</span><span class="string">'2009-12-25'</span><span class="keyword">, </span><span class="string">'2010-01-05'</span><span class="keyword">));<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
[EDIT BY danbrown AT php DOT net: Contains a bugfix submitted by (carlosbuz2 AT gmail DOT com) on 04-MAR-2011, with the following note: The first date in array is incorrect.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99707""></a>
  <div class="note">
   <strong class="user">tom at chegg dot com</strong>
   <a href="#99707" class="date">31-Aug-2010 11:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was using the following to get a list of month names.<br />
<br />
for ($i=1; $i&lt;13; $i++) {<br />
&nbsp; echo date('F', mktime(0,0,0,$i) . ",";<br />
}<br />
<br />
Normally this outputs -<br />
January,February,March,April,May,June,July,August,<br />
September,October,November,December<br />
<br />
However if today's date is the 31st you get instead:<br />
January,March,March,May,May,July,July,August,October,<br />
October,December,December<br />
<br />
Why? Because Feb,Apr,June,Sept, and Nov don't have 31 days!<br />
<br />
The fix, add the 5th parameter, don't let the day of month default to today's date:<br />
<br />
&nbsp; echo date('F', mktime(0,0,0,$i,1) . ",";</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96801""></a>
  <div class="note">
   <strong class="user">zfowler at unomaha dot edu</strong>
   <a href="#96801" class="date">16-Mar-2010 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Proper way to convert Excel dates into PHP-friendly timestamps using mktime():<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// The date 6/30/2009 is stored as 39994 in Excel<br />
</span><span class="default">$days </span><span class="keyword">= </span><span class="default">39994</span><span class="keyword">;<br />
<br />
</span><span class="comment">// But you must subtract 1 to get the correct timestamp<br />
</span><span class="default">$ts </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$days</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1900</span><span class="keyword">);<br />
<br />
</span><span class="comment">// So, this would then match Excel's representation:<br />
</span><span class="keyword">echo </span><span class="default">date</span><span class="keyword">(</span><span class="string">"m/d/Y"</span><span class="keyword">,</span><span class="default">$ts</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Excel uses "number of days since Jan. 1, 1900" to store its dates.&nbsp; It also treats 1900 as a leap year when it wasn't, thus there is an extra day which must be accounted for in PHP (and the rest of the world).&nbsp; Subtracting 1 from Excel's number will fix this problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95748""></a>
  <div class="note">
   <strong class="user">contact at phpmember dot com</strong>
   <a href="#95748" class="date">20-Jan-2010 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How many days have&nbsp; passed since the beginning of the year.... regardless of what year it is...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Carlos Galindo<br />
//phpmember.com<br />
<br />
</span><span class="default">$days </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">((</span><span class="default">time</span><span class="keyword">()-</span><span class="default">mktime</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">date</span><span class="keyword">(</span><span class="string">"Y"</span><span class="keyword">)))/</span><span class="default">86400</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
echo </span><span class="string">"</span><span class="default">$days</span><span class="string"> days have passed"</span><span class="keyword">;<br />
<br />
</span><span class="comment">//Good Luck<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93409""></a>
  <div class="note">
   <strong class="user">cebleo at n-trance dot net</strong>
   <a href="#93409" class="date">08-Sep-2009 08:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to ADD or SUBSTRACT times NOTE that if you dont specify the UTC zone your result is the difference +- your server UTC delay.<br />
<br />
if you are ina utc/GMT +1<br />
<br />
<span class="default">&lt;?php<br />
$hours_diff </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"20:00:00"</span><span class="keyword">)-</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"19:00:00"</span><span class="keyword">);<br />
echo&nbsp; </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h:i'</span><span class="keyword">, </span><span class="default">$hours_diff</span><span class="keyword">).</span><span class="string">" Hours"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
it shows: 02:00 Hours<br />
<br />
but if you use a default UTC time:<br />
<br />
<span class="default">&lt;?php<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'UTC'</span><span class="keyword">);<br />
</span><span class="default">$hours_diff </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"20:00:00"</span><span class="keyword">)-</span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"19:00:00"</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;br&gt;"</span><span class="keyword">. </span><span class="default">date</span><span class="keyword">(</span><span class="string">'h:i'</span><span class="keyword">, </span><span class="default">$hours_diff</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
it shows: 01:00 Hours.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88236""></a>
  <div class="note">
   <strong class="user">ronnie dot kurniawan at gmail dot com</strong>
   <a href="#88236" class="date">16-Jan-2009 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Add (and subtract) unixtime:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">utime_add</span><span class="keyword">(</span><span class="default">$unixtime</span><span class="keyword">, </span><span class="default">$hr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$min</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$mon</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$day</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$yr</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$dt </span><span class="keyword">= </span><span class="default">localtime</span><span class="keyword">(</span><span class="default">$unixtime</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$unixnewtime </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_hour'</span><span class="keyword">]+</span><span class="default">$hr</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_min'</span><span class="keyword">]+</span><span class="default">$min</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_sec'</span><span class="keyword">]+</span><span class="default">$sec</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_mon'</span><span class="keyword">]+</span><span class="default">1</span><span class="keyword">+</span><span class="default">$mon</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_mday'</span><span class="keyword">]+</span><span class="default">$day</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">[</span><span class="string">'tm_year'</span><span class="keyword">]+</span><span class="default">1900</span><span class="keyword">+</span><span class="default">$yr</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$unixnewtime</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87071""></a>
  <div class="note">
   <strong class="user">Alan</strong>
   <a href="#87071" class="date">18-Nov-2008 04:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do remember that, counter-intuitively enough, the arguments for month and day are inversed (or middle-endian). A common mistake for Europeans seems to be to feed the date arguments in the expected order (big endian or little endian).<br />
<br />
It's clear to see where this weird order comes from (even with the date being big endian the order for all arguments would still be mixed - it's obviously based on the American date format with the time "prefixed" to allow an easier shorthand) and why this wasn't changed (passing the values in the wrong order produces a valid, though unexpected, result in most cases), but it continues to be a source of confusion for me whenever I come back to PHP from other languages or libraries.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86916""></a>
  <div class="note">
   <strong class="user">yan</strong>
   <a href="#86916" class="date">10-Nov-2008 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
caculate days between two date<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="comment">// end date is 2008 Oct. 11 00:00:00<br />
&nbsp; </span><span class="default">$_endDate </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">11</span><span class="keyword">,</span><span class="default">10</span><span class="keyword">,</span><span class="default">2008</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// begin date is 2007 May 31 13:26:26<br />
&nbsp; </span><span class="default">$_beginDate </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">13</span><span class="keyword">,</span><span class="default">26</span><span class="keyword">,</span><span class="default">26</span><span class="keyword">,</span><span class="default">05</span><span class="keyword">,</span><span class="default">31</span><span class="keyword">,</span><span class="default">2007</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="default">$timestamp_diff</span><span class="keyword">= </span><span class="default">$_endDate</span><span class="keyword">-</span><span class="default">$_beginDate </span><span class="keyword">+</span><span class="default">1 </span><span class="keyword">;<br />
&nbsp; </span><span class="comment">// how many days between those two date<br />
&nbsp; </span><span class="default">$days_diff </span><span class="keyword">= </span><span class="default">$timestamp_diff</span><span class="keyword">/</span><span class="default">86400</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86086""></a>
  <div class="note">
   <strong class="user">ionut dot bodea at eydos dot ro</strong>
   <a href="#86086" class="date">02-Oct-2008 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is what I use to calculate age. It took me 30 minutes to write and it's quite accurate. What it has special is that it's calculating the number of days a year has (float number), by testing if a year is a leap one or not. This number is used to compute the age.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_age</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$t_lived </span><span class="keyword">= </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date_end</span><span class="keyword">) - </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seconds_one_year </span><span class="keyword">= </span><span class="default">get_days_per_year</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) * </span><span class="default">24 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'years_exact'</span><span class="keyword">] = </span><span class="default">$t_lived </span><span class="keyword">/ </span><span class="default">$seconds_one_year</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'years'</span><span class="keyword">] = </span><span class="default">floor</span><span class="keyword">(</span><span class="default">$t_lived </span><span class="keyword">/ </span><span class="default">$seconds_one_year</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$seconds_remaining </span><span class="keyword">= </span><span class="default">$t_lived </span><span class="keyword">% </span><span class="default">$seconds_one_year</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$age</span><span class="keyword">[</span><span class="string">'days'</span><span class="keyword">] = </span><span class="default">round</span><span class="keyword">(</span><span class="default">$seconds_remaining </span><span class="keyword">/ (</span><span class="default">24 </span><span class="keyword">* </span><span class="default">60 </span><span class="keyword">* </span><span class="default">60</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$age</span><span class="keyword">;<br />
}<br />
function </span><span class="default">get_timestamp</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">);<br />
}<br />
function </span><span class="default">get_days_per_year</span><span class="keyword">(</span><span class="default">$date_start</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y1</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date_start</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$y2</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$date_end</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$years_days </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$y </span><span class="keyword">= </span><span class="default">$y1</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt;= </span><span class="default">$y2</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$years_days</span><span class="keyword">[] = </span><span class="default">date</span><span class="keyword">(</span><span class="string">'L'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">)) ? </span><span class="default">366 </span><span class="keyword">: </span><span class="default">365</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">round</span><span class="keyword">(</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">$years_days</span><span class="keyword">) / </span><span class="default">count</span><span class="keyword">(</span><span class="default">$years_days</span><span class="keyword">), </span><span class="default">2</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$date_birth </span><span class="keyword">= </span><span class="string">'1979-10-12'</span><span class="keyword">;<br />
</span><span class="default">$date_now </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">);<br />
<br />
</span><span class="default">$age </span><span class="keyword">= </span><span class="default">get_age</span><span class="keyword">(</span><span class="default">$date_birth</span><span class="keyword">, </span><span class="default">$date_now</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$age</span><span class="keyword">);<br />
echo </span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
<br />
It will display something like this:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [years_exact] =&gt; 28.972974329491<br />
&nbsp;&nbsp;&nbsp; [years] =&gt; 28<br />
&nbsp;&nbsp;&nbsp; [days] =&gt; 355<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85478""></a>
  <div class="note">
   <strong class="user">ooogla at hotmail dot com</strong>
   <a href="#85478" class="date">02-Sep-2008 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to increment the day based on a variable when using a loop you can use this when you submit a form<br />
<br />
1. Establish a start date and end date in two different variables<br />
<br />
2. Get the number of days between a date<br />
<br />
$ndays = (strtotime($_POST['edate']) - strtotime($_POST['sdate'])) / (60 * 60 * 24);<br />
<br />
Then here is the string you slip in your loop<br />
<br />
$nextday&nbsp; = date('Y-m-d', mktime(0, 0, 0, date("m", strtotime($_POST['sdate']))&nbsp; , date("d", strtotime($_POST['sdate']))+ $count, date("Y", strtotime($_POST['sdate']))));<br />
<br />
$count is incremented by the loop.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83160""></a>
  <div class="note">
   <strong class="user">thomas_corthals at hotmail dot com</strong>
   <a href="#83160" class="date">13-May-2008 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems mktime() doesn't return negative timestamps on Linux systems with a version of glibc &lt;= 2.3.3.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80759""></a>
  <div class="note">
   <strong class="user">joseph dot andrew dot hughes at gmail dot com</strong>
   <a href="#80759" class="date">30-Jan-2008 09:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a small thing to think about if you are only trying to pull the month out using mktime and date.&nbsp; Make sure you place a 1 into day field.&nbsp; Otherwise you will get incorrect dates when a month is followed by a month with less days when the day of the current month is higher then the max day of the month you are trying to find.. (Such as today being Jan 30th and trying to find the month Feb.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77639""></a>
  <div class="note">
   <strong class="user">PHPcoder at freemail dot ig3 dot net</strong>
   <a href="#77639" class="date">06-Sep-2007 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The maximum possible date accepted by mktime() and gmmktime() is dependent on the current location time zone.<br />
<br />
For example, the 32-bit timestamp overflow occurs at 2038-01-19T03:14:08+0000Z.&nbsp; But if you're in a UTC -0500 time zone (such as EST in North America), the maximum accepted time before overflow (for older PHP versions on Windows) is 2038-01-18T22:14:07-0500Z, regardless of whether you're passing it to mktime() or gmmktime().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76460""></a>
  <div class="note">
   <strong class="user">rlz</strong>
   <a href="#76460" class="date">17-Jul-2007 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Finding out the number of days in a given month and year, accounting for leap years when February has more than 28 days.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">days_in_month</span><span class="keyword">(</span><span class="default">$year</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return( </span><span class="default">date</span><span class="keyword">( </span><span class="string">"t"</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">( </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$month</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$year</span><span class="keyword">) ) );<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope it helps a soul out there.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74241""></a>
  <div class="note">
   <strong class="user">rga at merchantpal dot com</strong>
   <a href="#74241" class="date">31-Mar-2007 05:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You cannot simply subtract or add month VARs using mktime to obtain previous or next months as suggested in previous user comments (at least not with a DD &gt; 28 anyway).<br />
<br />
If the date is 03-31-2007, the following yeilds March as a previous month. Not what you wanted.<br />
<br />
<span class="default">&lt;?php<br />
$dateMinusOneMonth </span><span class="keyword">= </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">3</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">), </span><span class="default">31</span><span class="keyword">,&nbsp; </span><span class="default">2007 </span><span class="keyword">);<br />
</span><span class="default">$lastmonth </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">"n | F"</span><span class="keyword">, </span><span class="default">$dateMinusOneMonth</span><span class="keyword">);<br />
echo </span><span class="default">$lastmonth</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">//---&gt; 3 | March<br />
</span><span class="default">?&gt;<br />
</span><br />
mktime correctly gives you back the 3rd of March if you subtract 1 month from March 31 (there are only 28 days in Feb 07).<br />
<br />
If you are just looking to do month and year arithmetic using mktime, you can use general days like 1 or 28 to do stuff like this:<br />
<br />
<span class="default">&lt;?php<br />
$d_daysinmonth </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'t'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// how many days in month<br />
</span><span class="default">$d_year </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// year<br />
</span><span class="default">$d_isleapyear </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'L'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; </span><span class="comment">// is YYYY a leapyear?<br />
<br />
</span><span class="default">$d_firstdow </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'w'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// FIRST falls on what day of week (0-6)<br />
</span><span class="default">$d_firstname </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'l'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// FIRST falls on what day of week Full Name<br />
<br />
</span><span class="default">$d_month </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// month of year (1-12)<br />
</span><span class="default">$d_monthname </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Month Long name (July)<br />
</span><span class="default">$d_month_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// PREVIOUS month of year (1-12)<br />
</span><span class="default">$d_monthname_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// PREVIOUS Month Long name (July)<br />
</span><span class="default">$d_month_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'n'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// NEXT month of year (1-12)<br />
</span><span class="default">$d_monthname_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'F'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,(</span><span class="default">$myMonth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">),</span><span class="default">28</span><span class="keyword">,</span><span class="default">$myYear</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// NEXT Month Long name (July)<br />
</span><span class="default">$d_year_previous </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,(</span><span class="default">$myYear</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// PREVIOUS year<br />
</span><span class="default">$d_year_next </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">mktime</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$myMonth</span><span class="keyword">,</span><span class="default">28</span><span class="keyword">,(</span><span class="default">$myYear</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// NEXT year<br />
<br />
</span><span class="default">$d_weeksleft </span><span class="keyword">= (</span><span class="default">52 </span><span class="keyword">- </span><span class="default">$d_weekofyear</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// how many weeks left in year<br />
</span><span class="default">$d_daysinyear </span><span class="keyword">= </span><span class="default">$d_isleapyear </span><span class="keyword">? </span><span class="default">366 </span><span class="keyword">: </span><span class="default">365</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// set correct days in year for leap years<br />
</span><span class="default">$d_daysleft </span><span class="keyword">= (</span><span class="default">$d_daysinyear </span><span class="keyword">- </span><span class="default">$d_dayofyear</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// how many days left in year<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72218""></a>
  <div class="note">
   <strong class="user">Stephen</strong>
   <a href="#72218" class="date">08-Jan-2007 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are several warnings here about using mktime() to determine a date difference because of daylight savings time. However, nobody seems to have mentioned the other obvious problem, which is leap years.<br />
<br />
Leap years mean that any effort to use mktime() and time() to determine the age (positive or negative) of some timestamp in years will be flawed. There are some years that are 366 days long, therefore you cannot say that there is a set number of seconds per year.<br />
<br />
Timestamps are good for determining *real* time, which is not the same thing as *human calendar* time. The Gregorian calendar is only an approximation of real time, which is tweaked with daylight savings time and leap years to make it conform more to humans' expectations of how time should or ought to work. Timestamps are not tweaked and therefore are the only authoritative way of recording in computers a proper order of succession of events, but they cannot be integrated with a Gregorian system unless you take both leap years and DST into account. Otherwise, you may get the wrong number of years when you are approaching a value of exactly X years.<br />
<br />
As for PHP, you could still use timestamps as a way of determining age if you took into account not only DST but also whether or not each year is a leap year and adjusted your calculations accordingly. However, this could become messy and inefficient. <br />
<br />
There is an alternative approach to calculating days given the day, month and year of the dates to be compared. Compare the years first, and then compare the month and day - if the month and day have already passed (or, if you like, if they match the current month and day), then add 1 to the total for the years. <br />
<br />
This solution works because it stays within the Gregorian system and doesn't venture into the world of timestamps.<br />
<br />
There is also the issue of leap seconds, but this will only arise if you literally need to get the *exact* age in seconds. In that case, of course, you would also need to verify that your timestamps are exactly correct and are not delayed by script processing time, plus you would need to determine whether your system conforms to UTC, etc. I expect this will hardly be an issue for anybody using PHP, however if you are interested there is an article on this issue on Wikipedia:<br />
<br />
<a href="http://en.wikipedia.org/wiki/Leap_second" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Leap_second</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.microtime.html">microtime</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strftime.html">strftime</a></div>
 <div class="up"><a href="ref.datetime.html">日付・時刻 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
