<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Ev クラス</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ev.periodic-modes.html">Periodic ウォッチャーの操作モード</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ev.backend.html">Ev::backend</a></div>
 <div class="up"><a href="book.ev.html">Ev</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.ev" class="reference">
 <h1 class="title">Ev クラス</h1>
 
 <div class="partintro"><p class="verinfo">(PECL ev &gt;= 0.2.0)</p>

  <div class="section" id="ev.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    Ev はシングルトンで、デフォルトのループへのアクセスや各種共通操作へのアクセスを提供します。
   </p>
  </div>

  <div class="section" id="ev.synopsis">
   <h2 class="title">クラス概要</h2>


   <div class="classsynopsis">
    <div class="ooclass">
     
    </div>

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <span class="modifier">final</span>
      <strong class="classname">Ev</strong>
     </span>
     {</div>

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* Constants */</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-auto"><var class="varname">FLAG_AUTO</var></a></var>
     <span class="initializer"> = 0</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-noenv"><var class="varname">FLAG_NOENV</var></a></var>
     <span class="initializer"> = 16777216</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-forkcheck"><var class="varname">FLAG_FORKCHECK</var></a></var>
     <span class="initializer"> = 33554432</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-noinotify"><var class="varname">FLAG_NOINOTIFY</var></a></var>
     <span class="initializer"> = 1048576</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-signalfd"><var class="varname">FLAG_SIGNALFD</var></a></var>
     <span class="initializer"> = 2097152</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.flag-nosigmask"><var class="varname">FLAG_NOSIGMASK</var></a></var>
     <span class="initializer"> = 4194304</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.run-nowait"><var class="varname">RUN_NOWAIT</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.run-once"><var class="varname">RUN_ONCE</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.break-cancel"><var class="varname">BREAK_CANCEL</var></a></var>
     <span class="initializer"> = 0</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.break-one"><var class="varname">BREAK_ONE</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.break-all"><var class="varname">BREAK_ALL</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.minpri"><var class="varname">MINPRI</var></a></var>
     <span class="initializer"> = -2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.maxpri"><var class="varname">MAXPRI</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.read"><var class="varname">READ</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.write"><var class="varname">WRITE</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.timer"><var class="varname">TIMER</var></a></var>
     <span class="initializer"> = 256</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.periodic"><var class="varname">PERIODIC</var></a></var>
     <span class="initializer"> = 512</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.signal"><var class="varname">SIGNAL</var></a></var>
     <span class="initializer"> = 1024</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.child"><var class="varname">CHILD</var></a></var>
     <span class="initializer"> = 2048</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.stat"><var class="varname">STAT</var></a></var>
     <span class="initializer"> = 4096</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.idle"><var class="varname">IDLE</var></a></var>
     <span class="initializer"> = 8192</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.prepare"><var class="varname">PREPARE</var></a></var>
     <span class="initializer"> = 16384</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.check"><var class="varname">CHECK</var></a></var>
     <span class="initializer"> = 32768</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.embed"><var class="varname">EMBED</var></a></var>
     <span class="initializer"> = 65536</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.custom"><var class="varname">CUSTOM</var></a></var>
     <span class="initializer"> = 16777216</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.error"><var class="varname">ERROR</var></a></var>
     <span class="initializer"> = 2147483648</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-select"><var class="varname">BACKEND_SELECT</var></a></var>
     <span class="initializer"> = 1</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-poll"><var class="varname">BACKEND_POLL</var></a></var>
     <span class="initializer"> = 2</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-epoll"><var class="varname">BACKEND_EPOLL</var></a></var>
     <span class="initializer"> = 4</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-kqueue"><var class="varname">BACKEND_KQUEUE</var></a></var>
     <span class="initializer"> = 8</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-devpoll"><var class="varname">BACKEND_DEVPOLL</var></a></var>
     <span class="initializer"> = 16</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-port"><var class="varname">BACKEND_PORT</var></a></var>
     <span class="initializer"> = 32</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-all"><var class="varname">BACKEND_ALL</var></a></var>
     <span class="initializer"> = 63</span>
    ;</div>

    <div class="fieldsynopsis">
     <span class="modifier">const</span>
     <span class="type">integer</span>
      <var class="fieldsynopsis_varname"><a href="class.ev.html#ev.constants.backend-mask"><var class="varname">BACKEND_MASK</var></a></var>
     <span class="initializer"> = 65535</span>
    ;</div>


    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">int</span>
    <span class="methodname"><a href="ev.backend.html" class="methodname">backend</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">int</span>
    <span class="methodname"><a href="ev.depth.html" class="methodname">depth</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.embeddablebackends.html" class="methodname">embeddableBackends</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.feedsignal.html" class="methodname">feedSignal</a></span>
    ( <span class="methodparam">
    <span class="type">int</span>
     <code class="parameter">$signum</code>
   </span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.feedsignalevent.html" class="methodname">feedSignalEvent</a></span>
    ( <span class="methodparam">
    <span class="type">int</span>
     <code class="parameter">$signum</code>
   </span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">int</span>
    <span class="methodname"><a href="ev.iteration.html" class="methodname">iteration</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">double</span>
    <span class="methodname"><a href="ev.now.html" class="methodname">now</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.nowupdate.html" class="methodname">nowUpdate</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.recommendedbackends.html" class="methodname">recommendedBackends</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.resume.html" class="methodname">resume</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.run.html" class="methodname">run</a></span>
    ([ <span class="methodparam">
    <span class="type">int</span>
     <code class="parameter">$flags</code>
   </span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.sleep.html" class="methodname">sleep</a></span>
    ( <span class="methodparam">
    <span class="type">double</span>
     <code class="parameter">$seconds</code>
   </span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.stop.html" class="methodname">stop</a></span>
    ([ <span class="methodparam">
    <span class="type">int</span>
     <code class="parameter">$how</code>
   </span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.supportedbackends.html" class="methodname">supportedBackends</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.suspend.html" class="methodname">suspend</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">double</span>
    <span class="methodname"><a href="ev.time.html" class="methodname">time</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">final</span>
   <span class="modifier">public</span>
   <span class="modifier">static</span>
   <span class="type">void</span>
    <span class="methodname"><a href="ev.verify.html" class="methodname">verify</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>

  </div>

  <div class="section" id="ev.constants">
   <h2 class="title">定義済み定数</h2>

  <p class="para" id="ev.constants.loop-flags">
    ループを作るときに渡すフラグ

    <dl>

     <dt id="ev.constants.flag-auto">
      <span class="term">
       <strong><code>Ev::FLAG_AUTO</code></strong>
      </span>
      <dd>

       <p class="para">
        デフォルトのフラグの値。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.flag-noenv">
      <span class="term">
       <strong><code>Ev::FLAG_NOENV</code></strong>
      </span>
      <dd>

       <p class="para">
        このフラグを使う (あるいは setuid や setgid でプログラムを実行する) と、
        <em>libev</em> は環境変数
        <var class="varname"><var class="varname">LIBEV_FLAGS</var></var> を見ません。
        それ以外の場合 (デフォルト) は、
        <var class="varname"><var class="varname">LIBEV_FLAGS</var></var> が見つかった場合は
        その内容でフラグを上書きします。パフォーマンステストやバグの調査のときに有用です。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.flag-forkcheck">
      <span class="term">
       <strong><code>Ev::FLAG_FORKCHECK</code></strong>
      </span>
      <dd>

       <p class="para">
        libev が繰り返しのたびにフォークをチェックするようにします。毎回手動で
         <span class="methodname"><a href="evloop.fork.html" class="methodname">EvLoop::fork()</a></span> を呼ぶことがなくなります。
        これを実現するために、ループ内での繰り返しの旅に
        <em>getpid()</em> を呼んでいます。
        そのため、繰り返しの回数が増えるとイベントループがスローダウンするかもしれませんが、
        通常は気になるほどではありません。このフラグの設定を上書きしたり、
        環境変数 <var class="varname"><var class="varname">LIBEV_FLAGS</var></var> で指定したりすることはできません。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.flag-noinotify">
      <span class="term">
       <strong><code>Ev::FLAG_NOINOTIFY</code></strong>
      </span>
      <dd>

       <p class="para">
        このフラグを指定すると、
        <em>libev</em>
        は <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_stat_code_did_the_file_attri" class="link external" title="Link : http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_stat_code_did_the_file_attri">&raquo;&nbsp;ev_stat</a>
        ウォッチャーに
        <em>inotify</em> API を使わなくなります。
        このフラグは inotify ファイルディスクリプタを節約するのに便利です。
        これを使わなければ、<em>ev_stat</em>
        ウォッチャーを使ったループのたびに
        <em>inotify</em>
        ハンドルをひとつずつ消費することになります。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.flag-signalfd">
      <span class="term">
       <strong><code>Ev::FLAG_SIGNALFD</code></strong>
      </span>
      <dd>

       <p class="para">
        このフラグを指定すると、
        <em>libev</em>
        は
        <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_signal_code_signal_me_when_a" class="link external" title="Link : http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_signal_code_signal_me_when_a">&raquo;&nbsp;ev_signal</a>
        (および
        <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_child_code_watch_out_for_pro" class="link external" title="Link : http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_child_code_watch_out_for_pro">&raquo;&nbsp;ev_child</a>
        ) ウォッチャーに
        <em>signalfd</em> API を使おうとします。
        この API はシグナルを同期的に配送し、高速に処理したり
        キューに入ったシグナルデータを取得できるようにしたりします。
        また、スレッドを使ったときのシグナル処理も、
        スレッド内でシグナルが適切にブロックされている限りはシンプルになります。
        デフォルトでは <em>signalfd</em> を使いません。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.flag-nosigmask">
      <span class="term">
       <strong><code>Ev::FLAG_NOSIGMASK</code></strong>
      </span>
      <dd>

       <p class="para">
        このフラグを指定すると、
        <em>libev</em> はシグナルのマスクを変更しないようにします。
        具体的には、シグナルが受信されるまではブロックしないようになるということです。
       </p>
       <p class="para">
        これは、自前のシグナル処理をするときに便利です。
        また、特定のスレッドでだけシグナルを処理するという場合にも有用です。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <p class="para" id="ev.constants.run-flags">
     <span class="methodname"><a href="ev.run.html" class="methodname">Ev::run()</a></span>
    あるいは
     <span class="methodname"><a href="evloop.run.html" class="methodname">EvLoop::run()</a></span>
    に渡すフラグ

    <dl>

     <dt id="ev.constants.run-nowait">
      <span class="term">
       <strong><code>Ev::RUN_NOWAIT</code></strong>
      </span>
      <dd>

       <p class="para">
        イベントループが新しいイベントを探し、
        新しいイベントや未処理のイベントを処理するけれども、
        もしイベントが見つからない場合は、最初のループですぐに呼び出し元に制御を戻します。
        イベントを待つためにプロセスをブロックしたりはしません。
        これは、時間のかかる計算をしているときのポーリングなどに便利です。
        プログラムの動きを止めることなく新しいイベントを処理できます。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.run-once">
      <span class="term">
       <strong><code>Ev::RUN_ONCE</code></strong>
      </span>
      <dd>

       <p class="para">
        イベントループが (必要なら待ち続けてでも) 新しいイベントを探し、
        その新しいイベントや未処理のイベントを処理します。
        少なくとも一つのイベントがやってくるまで
        (libev 自身のイベント間隔になるでしょう。
        そのため、ユーザー低位のコールバックが呼ばれる保証はありません) プロセスをブロックし
        ループ処理の終了後に呼び出し元に制御を戻します。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <p class="para" id="ev.constants.break-flags">
     <span class="methodname"><a href="ev.stop.html" class="methodname">Ev::stop()</a></span>
    あるいは
     <span class="methodname"><a href="evloop.stop.html" class="methodname">EvLoop::stop()</a></span>
    に渡すフラグ

    <dl>

     <dt id="ev.constants.break-cancel">
      <span class="term">
       <strong><code>Ev::BREAK_CANCEL</code></strong>
      </span>
      <dd>

       <p class="para">
        ブレーク操作をキャンセルします。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.break-one">
      <span class="term">
       <strong><code>Ev::BREAK_ONE</code></strong>
      </span>
      <dd>

       <p class="para">
        一番内側の
         <span class="methodname"><a href="ev.run.html" class="methodname">Ev::run()</a></span>
        (あるいは
         <span class="methodname"><a href="evloop.run.html" class="methodname">EvLoop::run()</a></span>
        ) の呼び出しを返します。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.break-all">
      <span class="term">
       <strong><code>Ev::BREAK_ALL</code></strong>
      </span>
      <dd>

       <p class="para">
        ネストしたすべての
         <span class="methodname"><a href="ev.run.html" class="methodname">Ev::run()</a></span>
        (あるいは
         <span class="methodname"><a href="evloop.run.html" class="methodname">EvLoop::run()</a></span>
        ) の呼び出しを返します。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <p class="para" id="ev.constants.watcher-pri">
    ウォッチャーの優先度

    <dl>

     <dt id="ev.constants.minpri">
      <span class="term">
       <strong><code>Ev::MINPRI</code></strong>
      </span>
      <dd>

       <p class="para">
        最小の優先度。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.maxpri">
      <span class="term">
       <strong><code>Ev::MAXPRI</code></strong>
      </span>
      <dd>

       <p class="para">
        最大の優先度。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <p class="para" id="ev.constants.watcher-revents">
    受信したイベントのビットマスク

    <dl>

     <dt id="ev.constants.read">
      <span class="term">
       <strong><code>Ev::READ</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evio.html" class="classname">EvIo</a>
        ウォッチャーが読み込み可能になったときのファイルディスクリプタ。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.write">
      <span class="term">
       <strong><code>Ev::WRITE</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evio.html" class="classname">EvIo</a>
        ウォッチャーが書き込み可能になったときのファイルディスクリプタ。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.timer">
      <span class="term">
       <strong><code>Ev::TIMER</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evtimer.html" class="classname">EvTimer</a>
        ウォッチャーがタイムアウトしました。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.periodic">
      <span class="term">
       <strong><code>Ev::PERIODIC</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evperiodic.html" class="classname">EvPeriodic</a>
        ウォッチャーがタイムアウトしました。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.signal">
      <span class="term">
       <strong><code>Ev::SIGNAL</code></strong>
      </span>
      <dd>

       <p class="para">
         <span class="methodname"><a href="evsignal.construct.html" class="methodname">EvSignal::__construct()</a></span>
        のコンストラクタで指定したシグナルを受信しました。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.child">
      <span class="term">
       <strong><code>Ev::CHILD</code></strong>
      </span>
      <dd>

       <p class="para">
         <span class="methodname"><a href="evchild.construct.html" class="methodname">EvChild::__construct()</a></span>
        のコンストラクタで指定した
        <em><code class="parameter">pid</code></em>
        が、状態の変更を受信しました。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.stat">
      <span class="term">
       <strong><code>Ev::STAT</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evstat.html" class="classname">EvStat</a>
        ウォッチャーで指定したパスが、その属性を変更しました。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.idle">
      <span class="term">
       <strong><code>Ev::IDLE</code></strong>
      </span>
      <dd>

       <p class="para">
        他のウォッチャーが何もすることがなくなったときに、
        <a href="class.evidle.html" class="classname">EvIdle</a>
        ウォッチャーが動作します。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.prepare">
      <span class="term">
       <strong><code>Ev::PREPARE</code></strong>
      </span>
      <dd>

       <p class="para">
        すべての
        <a href="class.evprepare.html" class="classname">EvPrepare</a>
        ウォッチャーが、
         <span class="methodname"><a href="ev.run.html" class="methodname">Ev::run()</a></span>
        の開始前に起動しました。つまり、
        イベントループがスリープしたり新しいイベントのポーリングをしたりする直前に
        <a href="class.evprepare.html" class="classname">EvPrepare</a>
        ウォッチャーが起動するということになります。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.check">
      <span class="term">
       <strong><code>Ev::CHECK</code></strong>
      </span>
      <dd>

       <p class="para">
        すべての
        <a href="class.evcheck.html" class="classname">EvCheck</a>
        ウォッチャーが、
         <span class="methodname"><a href="ev.run.html" class="methodname">Ev::run()</a></span>
        が新しいイベントをとりまとめた直後
        (ただし受信したイベントのコールバックをキューに入れる前)
        にキューに入ります。つまり、
        イベントループ内で優先度が同じ (あるいはより低い) ウォッチャーより前に
        <a href="class.evcheck.html" class="classname">EvCheck</a> ウォッチャーが起動するということになります。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.embed">
      <span class="term">
       <strong><code>Ev::EMBED</code></strong>
      </span>
      <dd>

       <p class="para">
        <a href="class.evembed.html" class="classname">EvEmbed</a>
        で指定した埋め込みイベントループが注目を必要としています。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.custom">
      <span class="term">
       <strong><code>Ev::CUSTOM</code></strong>
      </span>
      <dd>

       <p class="para">
        まだ
        <em>libev</em>
        で送信したりそれ以外の使いかたをしたりはしていませんが、
        <em>libev</em>
        ユーザーが ( <span class="methodname"><a href="evwatcher.feed.html" class="methodname">EvWatcher::feed()</a></span> などで)
        ウォッチャーに通知するために使えます。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.error">
      <span class="term">
       <strong><code>Ev::ERROR</code></strong>
      </span>
      <dd>

       <p class="para">
        指定されていないエラーが発生し、ウォッチャーが停止しました。
        これが発生する原因として考えられるのは、
        <em>libev</em> がメモリ不足でウォッチャーをきちんと開始できなかった場合や
        ファイルディスクリプタが閉じてしまった場合などがあります。
        <em>libev</em> は、これらに関してはアプリケーションのバグとみなします。
        詳細は
        <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#ANATOMY_OF_A_WATCHER_CONTENT" class="link external" title="Link : http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#ANATOMY_OF_A_WATCHER_CONTENT">&raquo;&nbsp;ANATOMY
    OF A WATCHER</a>
        を参照ください。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <p class="para" id="ev.constants.watcher-backends">
    バックエンドのフラグ

    <dl>

     <dt id="ev.constants.backend-select">
      <span class="term">
       <strong><code>Ev::BACKEND_SELECT</code></strong>
      </span>
      <dd>

       <p class="para">
        <em>select(2) バックエンド</em>
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-poll">
      <span class="term">
       <strong><code>Ev::BACKEND_POLL</code></strong>
      </span>
      <dd>

       <p class="para">
        <em>poll(2) バックエンド</em>
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-epoll">
      <span class="term">
       <strong><code>Ev::BACKEND_EPOLL</code></strong>
      </span>
      <dd>

       <p class="para">
        Linux 限定の
        <em>epoll(7)</em>
        バックエンド。2.6.9 以前のカーネルでもそれ以降のカーネルでも使えます。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-kqueue">
      <span class="term">
       <strong><code>Ev::BACKEND_KQUEUE</code></strong>
      </span>
      <dd>

       <p class="para">
        <em>kqueue</em>
        バックエンド。大半の BSD システムで利用します。
        <a href="class.evembed.html" class="classname">EvEmbed</a> ウォッチャーを使って、
        kqueue バックエンドのループを別のループに埋め込むことができます。
        たとえば、
        <em>kqueue</em> バックエンドのループを作って、
        それをソケットに対してだけ使うこともできます。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-devpoll">
      <span class="term">
       <strong><code>Ev::BACKEND_DEVPOLL</code></strong>
      </span>
      <dd>

       <p class="para">
        Solaris 8 バックエンド。現時点では未実装です。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-port">
      <span class="term">
       <strong><code>Ev::BACKEND_PORT</code></strong>
      </span>
      <dd>

       <p class="para">
        Solaris 10 のイベントポート機構で、規模が大きくなっても対応できます。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-all">
      <span class="term">
       <strong><code>Ev::BACKEND_ALL</code></strong>
      </span>
      <dd>

       <p class="para">
        壊れているものも含めて、すべてのバックエンドを試します。
        これを明示的に使うことは推奨しません。ビット演算子を使って、
        <strong><code>Ev::BACKEND_ALL</code></strong>
        &amp; ~
        <strong><code>Ev::BACKEND_KQUEUE</code></strong>
        のようにするか、
         <span class="methodname"><a href="ev.recommendedbackends.html" class="methodname">Ev::recommendedBackends()</a></span>
        を使うか、あるいは何もバックエンドを指定しないようにしましょう。
       </p>
      </dd>

     </dt>

     <dt id="ev.constants.backend-mask">
      <span class="term">
       <strong><code>Ev::BACKEND_MASK</code></strong>
      </span>
      <dd>

       <p class="para">
        これはバックエンドではなく、
        <em><code class="parameter">flags</code></em> の中のすべてのバックエンドビットをマスクするものです。
        たとえば、環境変数
        <var class="varname"><var class="varname">LIBEV_FLAGS</var></var>
        を変更するときに使います。
       </p>
      </dd>

     </dt>

    </dl>

   </p>

   <blockquote class="note"><p><strong class="note">注意</strong>: 
    <p class="para">
     デフォルトのループの場合は、モジュールの初期化時に
     <em>Ev</em> が
     (もし使えれば) <em>pthread_atfork</em> を使って
     <a href="http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#FUNCTIONS_CONTROLLING_EVENT_LOOPS_CO" class="link external" title="Link : http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#FUNCTIONS_CONTROLLING_EVENT_LOOPS_CO">&raquo;&nbsp;ev_loop_fork</a>
     の呼び出しを登録します。
    </p>
   </p></blockquote>
   <blockquote class="note"><p><strong class="note">注意</strong>: 
    <p class="para">
     <strong class="classname">Ev</strong> クラスには、
     <em class="emphasis">デフォルトのイベントループ</em> にアクセスするメソッドが用意されています
     ( <span class="methodname"><a href="ev.iteration.html" class="methodname">Ev::iteration()</a></span> や  <span class="methodname"><a href="ev.depth.html" class="methodname">Ev::depth()</a></span> など)。
     <em class="emphasis">カスタムループ</em>
     ( <span class="methodname"><a href="evloop.construct.html" class="methodname">EvLoop::__construct()</a></span> で作ったもの)
     の場合、これらの値にアクセスするには
     <a href="class.evloop.html" class="classname">EvLoop</a> クラスのプロパティやメソッドを使います。
    </p>
    <p class="para">
     デフォルトのイベントループ自体のインスタンスを取得するには
      <span class="methodname"><a href="evloop.defaultloop.html" class="methodname">EvLoop::defaultLoop()</a></span>
     メソッドを使います。
    </p>
   </p></blockquote>
  </div>

 </div>

 







































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="ev.backend.html">Ev::backend</a> — libev が使うバックエンドを表す整数値を返す</li><li><a href="ev.depth.html">Ev::depth</a> — 再帰の深さを返す</li><li><a href="ev.embeddablebackends.html">Ev::embeddableBackends</a> — 他のイベントループに埋め込めるバックエンド群を返す</li><li><a href="ev.feedsignal.html">Ev::feedSignal</a> — シグナルイベントを Ev に送る</li><li><a href="ev.feedsignalevent.html">Ev::feedSignalEvent</a> — シグナルイベントの情報をデフォルトループに送る</li><li><a href="ev.iteration.html">Ev::iteration</a> — デフォルトのイベントループが新しいイベントをポーリングした回数を返す</li><li><a href="ev.now.html">Ev::now</a> — デフォルトのイベントループで直近の処理が始まった時刻を返す</li><li><a href="ev.nowupdate.html">Ev::nowUpdate</a> — カーネルに問い合わせて現在時刻を確認し、処理中の Ev::now が返す時刻を更新する</li><li><a href="ev.recommendedbackends.html">Ev::recommendedBackends</a> — Returns a bit mask of recommended backends for current
  platform.</li><li><a href="ev.resume.html">Ev::resume</a> — 一時停止していたデフォルトのイベントループを再開させる</li><li><a href="ev.run.html">Ev::run</a> — イベントのチェックとデフォルトループのコールバックの呼び出しを開始する</li><li><a href="ev.sleep.html">Ev::sleep</a> — 指定した秒数だけプロセスをブロックする</li><li><a href="ev.stop.html">Ev::stop</a> — デフォルトのイベントループを止める</li><li><a href="ev.supportedbackends.html">Ev::supportedBackends</a> — 現在の libev の構成でサポートするバックエンド群を返す</li><li><a href="ev.suspend.html">Ev::suspend</a> — デフォルトのイベントループを一時停止する</li><li><a href="ev.time.html">Ev::time</a> — epoch から現在時刻までの秒数を返す</li><li><a href="ev.verify.html">Ev::verify</a> — 内部の整合性をチェックする (デバッグ用)</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
 <div class="note">There are no user contributed notes for this page.</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ev.periodic-modes.html">Periodic ウォッチャーの操作モード</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="ev.backend.html">Ev::backend</a></div>
 <div class="up"><a href="book.ev.html">Ev</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
