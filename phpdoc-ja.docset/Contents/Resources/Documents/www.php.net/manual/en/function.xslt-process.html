<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>XSLT ã«ã‚ˆã‚‹å¤‰æ›ã‚’è¡Œã†</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.xslt-getopt.html">xslt_getopt</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.xslt-set-base.html">xslt_set_base</a></div>
 <div class="up"><a href="ref.xslt.html">XSLT (PHP 4) é–¢æ•°</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.xslt-process" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">xslt_process</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.3)</p><p class="refpurpose"><span class="refname">xslt_process</span> &mdash; <span class="dc-title"><acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ã«ã‚ˆã‚‹å¤‰æ›ã‚’è¡Œã†</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.xslt-process-description">
  <h3 class="title">èª¬æ˜</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>xslt_process</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$xh</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$xmlcontainer</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$xslcontainer</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$resultcontainer</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$arguments</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$parameters</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
    <span class="function"><strong>xslt_process()</strong></span>é–¢æ•°ã¯ã€<acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> æ‹¡å¼µãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸­å¿ƒã¨ãªã‚‹é–¢æ•°ã§ã™ã€‚
   ã»ã¨ã‚“ã©å…¨ã¦ã®å‹ã®å…¥åŠ›ã‚½ãƒ¼ã‚¹ (ã‚³ãƒ³ãƒ†ãƒŠ) ã‚’ç”¨ã„ã¦ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> å¤‰æ›ã‚’å®Ÿè¡Œå¯èƒ½ã§ã™ã€‚
   ã“ã‚Œã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã®ãŒã€å¼•æ•°ãƒãƒƒãƒ•ã‚¡ã§ã™ã€‚
   å¼•æ•°ãƒãƒƒãƒ•ã‚¡ã¨ã¯ã€<span class="productname">Sablotron</span> <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ—ãƒ­ã‚»ãƒƒã‚µ
   (ç¾åœ¨ã€ã“ã®æ‹¡å¼µãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹æƒŸä¸€ã® <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ—ãƒ­ã‚»ãƒƒã‚µ)
   ã‹ã‚‰å¾—ãŸæ¦‚å¿µã§ã™ã€‚
   å…¥åŠ›ã‚³ãƒ³ãƒ†ãƒŠã¯å‡¦ç†ã™ã‚‹æ–‡ç« ã‚’ &#039;å«ã‚“ã§ã„ã‚‹&#039; ãƒ•ã‚¡ã‚¤ãƒ«åãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ã€‚
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.xslt-process-parameters">
  <h3 class="title">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><em><code class="parameter">
xh</code></em></span><dd>
<p class="para"> <span class="function"><a href="function.xslt-create.html" class="function">xslt_create()</a></span> ã§ä½œæˆã—ãŸ
<acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ—ãƒ­ã‚»ãƒƒã‚µãƒªãƒ³ã‚¯ IDã€‚</p></dd>

</dt>

    <dt>

     <span class="term"><em><code class="parameter">xmlcontainer</code></em></span>
     <dd>

      <p class="para">
       <acronym title="eXtensible Markup Language">XML</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã€ã‚ã‚‹ã„ã¯ <acronym title="eXtensible Markup Language">XML</acronym> å¼•æ•°ç”¨ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã€‚
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">xslcontainer</code></em></span>
     <dd>

      <p class="para">
       <acronym>XSL</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ã€ã‚ã‚‹ã„ã¯ <acronym title="eXtensible Markup Language">XML</acronym> å¼•æ•°ç”¨ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ã€‚
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">resultcontainer</code></em></span>
     <dd>

      <p class="para">
       çµæœã‚³ãƒ³ãƒ†ãƒŠã¯ã€å¤‰æ›ã•ã‚ŒãŸæ–‡ç« ã®ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒ
       ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ã€‚ã‚‚ã—çµæœã‚³ãƒ³ãƒ†ãƒŠãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆ - ä¾‹ãˆã° <strong><code>NULL</code></strong> -
       ã€çµæœãŒè¿”ã•ã‚Œã¾ã™ã€‚
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">arguments</code></em></span>
     <dd>

      <p class="para">
       <acronym title="eXtensible Markup Language">XML</acronym> ã‚„ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’  <span class="function"><strong>xslt_process()</strong></span>
       é–¢æ•°ã«æŒ‡å®šã™ã‚‹ã‹ã‚ã‚Šã«ã€&quot;å¼•æ•°ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€&quot;
       ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€é…åˆ—
       <em><code class="parameter">arguments</code></em> ã«æŒ‡å®šã—ãŸå†…å®¹ã§ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">parameters</code></em></span>
     <dd>

      <p class="para">
       ä»»æ„ã®ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®é…åˆ—ã€‚ã“ã‚ŒãŒ XSLT
       ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ¸¡ã•ã‚Œã¾ã™ã€‚XSL ãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯
       <em>&lt;xsl:param name=&quot;parameter_name&quot;&gt;</em> ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
       ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ UTF-8 ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
       ãã®å€¤ã¯æ–‡å­—åˆ—ã¨ã—ã¦ <span class="productname">Sablotron</span>
       ãƒ—ãƒ­ã‚»ãƒƒã‚µãŒå‡¦ç†ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€<acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯
       ãƒãƒ¼ãƒ‰ã‚»ãƒƒãƒˆã‚’æ¸¡ã™ã“ã¨ã¯ã§ããªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚
      </p>
     </dd>

    </dt>

   </dl>

  </p>
  <p class="para">
   ã¾ãŸã€<em><code class="parameter">arguments</code></em>
   é…åˆ—ã‚’é€šã˜ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ (ä»¥ä¸‹å‚ç…§)ã€‚
  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.xslt-process-returnvalues">
  <h3 class="title">è¿”ã‚Šå€¤</h3>
  <p class="para">
   æˆåŠŸã—ãŸå ´åˆã« <strong><code>TRUE</code></strong> ã‚’ã€å¤±æ•—ã—ãŸå ´åˆã« <strong><code>FALSE</code></strong> ã‚’è¿”ã—ã¾ã™ã€‚ çµæœã‚³ãƒ³ãƒ†ãƒŠã‚’æŒ‡å®šã—ã¦ã„ãªã„å ´åˆã¯çµæœã‚’è¿”ã—ã¾ã™ã€‚
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.xslt-process-changelog">
  <h3 class="title">å¤‰æ›´å±¥æ­´</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
       <th>èª¬æ˜</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>4.0.6</td>
       <td>
        ã“ã®é–¢æ•°ã¯ <em><code class="parameter">xmlcontainer</code></em>
        ã‚‚ã—ãã¯ <em><code class="parameter">xslcontainer</code></em>
        ã§ XML æ–‡å­—åˆ—ã‚’å—ã‘ä»˜ã‘ãªããªã‚Šã¾ã—ãŸã€‚
        XML ã‚’å«ã‚€æ–‡å­—åˆ—ã‚’æ¸¡ã™ã¨ã€0.95ã¨ãã‚Œä»¥é™ã® Sablotron
        ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚©ãƒ«ãƒˆã‚’å¼•ãèµ·ã“ã—ã¾ã™ã€‚
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.xslt-process-examples">
  <h3 class="title">ä¾‹</h3>
  <p class="para">
    <span class="function"><strong>xslt_process()</strong></span>é–¢æ•°ã§å¤‰æ›ã™ã‚‹æœ€ã‚‚ç°¡å˜ãªæ–¹æ³•ã¯ã€
   <acronym title="eXtensible Markup Language">XML</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym>
   ãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ›ã—ã€çµæœã‚’æ–°ã—ã„ <acronym title="eXtensible Markup Language">XML</acronym> ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
   (ã¾ãŸã¯ HTML ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ) ã‚’å«ã‚€3ç•ªç›®ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã“ã¨ã§ã™ã€‚
   ã“ã‚Œã‚’ <span class="productname">Sablotron</span> ã§è¡Œã†ã®ã¯ã¨ã¦ã‚‚ç°¡å˜ã§ã™ã€‚
  </p>
  <div class="example" id="example-5506">
   <p><strong>ä¾‹1 
    <acronym title="eXtensible Markup Language">XML</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã¨ <acronym>XSL</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦
    <acronym title="eXtensible Markup Language">XML</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«
     <span class="function"><strong>xslt_process()</strong></span> ã‚’ä½¿ç”¨ã™ã‚‹
   </strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–°è¦&nbsp;XSLT&nbsp;ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’å‰²ã‚Šå½“ã¦ã‚‹<br /></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–‡ç« ã‚’å‡¦ç†ã™ã‚‹<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'result.xml'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;result.xml"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">",&nbsp;result.xml&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">readfile</span><span style="color: #007700">(</span><span style="color: #DD0000">'result.xml'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;result.xml&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <p class="para">
   ã“ã®æ©Ÿèƒ½ã¯å„ªã‚Œã¦ã„ã¾ã™ãŒã€ç‰¹ã«Webç’°å¢ƒã§ã¯ã€çµæœã‚’ç›´æ¥å‡ºåŠ›ã—ãŸã„å ´
   åˆãŒã‚ã‚Šã¾ã™ã€‚ãã“ã§ã€ <span class="function"><strong>xslt_process()</strong></span>ã®3ç•ªç›®ã®
   å¼•æ•°ã‚’çœç•¥ã—ãŸå ´åˆ(ã¾ãŸã¯ãã®å¼•æ•°ã«NULLå€¤ã‚’æŒ‡å®šã—ãŸå ´åˆ)ã€ãƒ•ã‚¡ã‚¤
   ãƒ«ã«æ›¸ãè¾¼ã‚€æ›¿ã‚ã‚Šã«è‡ªå‹•çš„ã« <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> å¤‰æ›å¾Œã®å‡ºåŠ›ã‚’è¿”ã—ã¾ã™ã€‚
  </p>
  <p class="para">
   <div class="example" id="example-5507">
   <p><strong>ä¾‹2 
    <acronym title="eXtensible Markup Language">XML</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã¨ <acronym>XSL</acronym> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’çµæœXMLãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å¤‰æ•°ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«
     <span class="function"><strong>xslt_process()</strong></span> ã‚’ä½¿ç”¨ã™ã‚‹
   </strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–°è¦&nbsp;XSLT&nbsp;ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’å‰²ã‚Šå½“ã¦ã‚‹<br /></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–‡ç« ã‚’å‡¦ç†ã—ã€å¤‰æ•°&nbsp;$result&nbsp;ã«çµæœã‚’è¿”ã™<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sample.xsl'</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;the&nbsp;\$result"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;variable,&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   ä¸Šã®äºŒã¤ã®ã‚±ãƒ¼ã‚¹ã¯ã€XSLTå¤‰æ›ã®æœ€ã‚‚ç°¡å˜ãªå ´åˆã§ã™ã€‚ã“ã‚Œã¯ã€å¤šãã®
   å ´åˆã«ã¯é€šç”¨ã—ã¾ã™ãŒã€æ™‚ã€…ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¾ãŸã¯ã‚½ã‚±ãƒƒãƒˆã®ã‚ˆã†ãªå¤–
   éƒ¨ã‚½ãƒ¼ã‚¹ã‹ã‚‰ <acronym title="eXtensible Markup Language">XML</acronym> ã¨ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå ´
   åˆã€<acronym title="eXtensible Markup Language">XML</acronym> ã¾ãŸã¯ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ•°ã«æœ‰ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚
   å®Ÿç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã“ã‚Œã‚‰ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ€ãƒ³ãƒ—ã™ã‚‹éš›ã®ã‚ªãƒ¼ãƒãƒ¼
   ãƒ˜ãƒƒãƒ‰ã¯å¤§ãã„ã¨è¨€ãˆã¾ã™ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã“ãã€<acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym>
   &quot;argument&quot; æ§‹æ–‡ãŒå½¹ã«ç«‹ã¡ã¾ã™ã€‚
    <span class="function"><strong>xslt_process()</strong></span>é–¢æ•°ã® <acronym title="eXtensible Markup Language">XML</acronym> ãŠã‚ˆã³ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> å¼•æ•°ã¨ã—ã¦ãƒ•ã‚¡
   ã‚¤ãƒ«ã®æ›¿ã‚ã‚Šã«å¼•æ•°é…åˆ—( <span class="function"><strong>xslt_process()</strong></span>é–¢æ•°ã®5ç•ª
   ç›®ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿)ã§æŒ‡å®šã—ãŸå€¤ã«ç½®æ›ã•ã‚Œã‚‹&quot;argument place
   holders&quot;ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚
   ä»¥ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…¨ãä½¿ç”¨ã›ãšã« <acronym title="eXtensible Markup Language">XML</acronym> ãŠã‚ˆã³ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ã‚’çµæœå¤‰æ•°ã«å‡¦ç†ã™ã‚‹ä¾‹
   ã‚’ç¤ºã—ã¾ã™ã€‚
  </p>
  <p class="para">
   <div class="example" id="example-5508">
   <p><strong>ä¾‹3 
    <acronym title="eXtensible Markup Language">XML</acronym> ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å¤‰æ•°ã¨ <acronym title="eXtensible Stylesheet Language Transformations">XSLT</acronym> ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å¤‰æ•°ã‚’ <acronym title="eXtensible Markup Language">XML</acronym> ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›çµæœã‚’
    å«ã‚€å¤‰æ•°ã«å¤‰æ›ã™ã‚‹ãŸã‚ã« <span class="function"><strong>xslt_process()</strong></span>ã‚’ä½¿ç”¨
    ã™ã‚‹
   </strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;$xml&nbsp;ã¨&nbsp;$xsl&nbsp;ã¯&nbsp;XML&nbsp;ãƒ‡ãƒ¼ã‚¿ã¨&nbsp;XSL&nbsp;ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€<br /><br /></span><span style="color: #0000BB">$arguments&nbsp;</span><span style="color: #007700">=&nbsp;array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xml'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xsl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xsl<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–°è¦&nbsp;XSLT&nbsp;ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’å‰²ã‚Šå½“ã¦ã‚‹<br /></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;æ–‡ç« ã‚’å‡¦ç†ã™ã‚‹<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arguments</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"SUCCESS,&nbsp;sample.xml&nbsp;was&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into&nbsp;the&nbsp;\$result"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;variable,&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;has&nbsp;the&nbsp;following&nbsp;contents\n&lt;br&nbsp;/&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;pre&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/pre&gt;\n"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Sorry,&nbsp;sample.xml&nbsp;could&nbsp;not&nbsp;be&nbsp;transformed&nbsp;by&nbsp;sample.xsl&nbsp;into"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;the&nbsp;\$result&nbsp;variable&nbsp;the&nbsp;reason&nbsp;is&nbsp;that&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_error</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;and&nbsp;the&nbsp;error&nbsp;code&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">xslt_errno</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">xslt_free</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5509">
    <p><strong>ä¾‹4 PHP å¤‰æ•°ã‚’ XSL ãƒ•ã‚¡ã‚¤ãƒ«ã«æ¸¡ã™</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;XML&nbsp;æ–‡å­—åˆ—<br /></span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;?xml&nbsp;version="1.0"?&gt;<br />&lt;para&gt;<br />&nbsp;change&nbsp;me<br />&lt;/para&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;XSL&nbsp;æ–‡å­—åˆ—<br /></span><span style="color: #0000BB">$xsl&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'<br />&lt;xsl:stylesheet&nbsp;version="1.0"&nbsp;xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;<br />&lt;xsl:output&nbsp;method="html"&nbsp;encoding="ISO-8859-1"&nbsp;indent="no"<br />&nbsp;omit-xml-declaration="yes"&nbsp;&nbsp;media-type="text/html"/&gt;<br />&nbsp;&lt;xsl:param&nbsp;name="myvar"/&gt;<br />&nbsp;&lt;xsl:param&nbsp;name="mynode"/&gt;<br />&nbsp;&lt;xsl:template&nbsp;match="/"&gt;<br />My&nbsp;PHP&nbsp;variable&nbsp;:&nbsp;&lt;xsl:value-of&nbsp;select="$myvar"/&gt;&lt;br&nbsp;/&gt;<br />My&nbsp;node&nbsp;set&nbsp;:&nbsp;&lt;xsl:value-of&nbsp;select="$mynode"/&gt;<br />&nbsp;&lt;/xsl:template&gt;<br />&lt;/xsl:stylesheet&gt;'</span><span style="color: #007700">;<br /><br /><br /></span><span style="color: #0000BB">$xh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">xslt_create</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;2ç•ªç›®ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯æ–‡å­—åˆ—ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹<br /></span><span style="color: #0000BB">$parameters&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(<br />&nbsp;&nbsp;</span><span style="color: #DD0000">'myvar'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'test'</span><span style="color: #007700">,<br />&nbsp;&nbsp;</span><span style="color: #DD0000">'mynode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'&lt;foo&gt;bar&lt;/foo&gt;'<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$arguments&nbsp;</span><span style="color: #007700">=&nbsp;array&nbsp;(<br />&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xml'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">,<br />&nbsp;&nbsp;</span><span style="color: #DD0000">'/_xsl'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$xsl<br /></span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">xslt_process</span><span style="color: #007700">(</span><span style="color: #0000BB">$xh</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xml'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'arg:/_xsl'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$arguments</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$parameters</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>ä¸Šã®ä¾‹ã®å‡ºåŠ›ã¯ä»¥ä¸‹ã¨ãªã‚Šã¾ã™ã€‚</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
My PHP variable : test&lt;br&gt;
My node set : &amp;lt;foo&amp;gt;bar&amp;lt;/foo&amp;gt;
</pre></div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.xslt-process-notes">
  <h3 class="title">æ³¨æ„</h3>
  <blockquote class="note"><p><strong class="note">æ³¨æ„</strong>: <p class="para">Windows ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€
<em class="emphasis">file://</em> ãŒãƒ‘ã‚¹ã®å‰ã«å¿…è¦ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
</p></p></blockquote>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="76063""></a>
  <div class="note">
   <strong class="user">anonymous</strong>
   <a href="#76063" class="date">28-Jun-2007 05:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is possible that the xslt_process call can expose information about Apache's installation location if null values are passed to the signature.<br />
<br />
for example:<br />
<span class="default">&lt;?php<br />
$xslt </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
echo </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The error you will recieve is:<br />
Warning:&nbsp; Sablotron error on line none: cannot open file 'C:\Program Files\Apache Group\Apache2/' in C:\webroot\htdocs\projects\www\sales\test.php on line 4<br />
<br />
Although trying to read a 'null' XML file and 'null' XSL stylesheet are rather silly, consider an attacker tries to upload an arbitrary file and execute it with similar code.<br />
<br />
the user may then gain enough information to attack your site.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68924""></a>
  <div class="note">
   
   <a href="#68924" class="date">16-Aug-2006 01:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To let xslt_process() work correctly, you have to set xslt_set_base()<br />
Here is my example code (Tested on: Windows 2000/XAMPP 1.4.15/PHP 4.4.0/Sablotron 1.0.2):<br />
<br />
<span class="default">&lt;?php<br />
$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
</span><span class="default">$filebase </span><span class="keyword">= </span><span class="string">'file://' </span><span class="keyword">. </span><span class="default">getcwd </span><span class="keyword">() . </span><span class="string">'/test/'</span><span class="keyword">;<br />
</span><span class="default">xslt_set_base</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="default">$filebase</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'document.xml'</span><span class="keyword">;<br />
</span><span class="default">$xsl </span><span class="keyword">= </span><span class="string">'document.xsl'</span><span class="keyword">;<br />
</span><span class="default">$resultdoc </span><span class="keyword">= </span><span class="string">'result.html'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">$parameters </span><span class="keyword">= array(</span><span class="string">'mynode' </span><span class="keyword">=&gt; </span><span class="string">'&lt;foo&gt;bar&lt;/foo&gt;'</span><span class="keyword">,</span><span class="string">'sample' </span><span class="keyword">=&gt; </span><span class="string">'A sample value'</span><span class="keyword">);<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="default">$xml</span><span class="keyword">,</span><span class="default">$xsl</span><span class="keyword">,</span><span class="default">$resultdoc</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">$parameters</span><span class="keyword">);<br />
if (!</span><span class="default">$result</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; die(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"Cannot process XSLT document [%d]: %s"</span><span class="keyword">,</span><span class="default">xslt_errno</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">), </span><span class="default">xslt_error</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">)));<br />
}<br />
echo </span><span class="string">"Result: "</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">.</span><span class="string">"&lt;br /&gt;"</span><span class="keyword">;<br />
</span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>&lt;a href="test/&lt;?=$resultdoc?&gt;"&gt;The result document&lt;/a&gt;&lt;?<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63936""></a>
  <div class="note">
   <strong class="user">ken at guest dot ie</strong>
   <a href="#63936" class="date">04-Apr-2006 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After experiencing an â€xml declaration not at start of external entityâ€ error with XML recieved from a remote server. The server now sends response headers back and these were getting in the way.<br />
<br />
This fixed it:<br />
<br />
$fp = fsockopen($queryhost, 80);<br />
if($fp) {<br />
&nbsp;&nbsp;&nbsp; fputs($fp, $header);<br />
&nbsp;&nbsp;&nbsp; while(!feof($fp)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $xml .= fgets($fp, 128);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
fclose($fp);<br />
<br />
//ensure string starts with the XML declaration.<br />
$xml = substr($xml, strpos($xml, â€œ&lt;?xmlâ€) );<br />
<br />
$xsltproc = xslt_create();<br />
$result = xslt_process($xsltproc,â€˜arg:/_xmlâ€™, $xsltfile, NULL, array(â€˜/_xmlâ€™ =&gt; $xml));</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54605""></a>
  <div class="note">
   
   <a href="#54605" class="date">09-Jul-2005 12:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
just to let you know an an apostrophe ’&nbsp; can generate a&nbsp; "not well-formed (invalid token)" error message. I spent a couple of hours to find it, until i found another user with similar problem:<br />
<a href="http://www.feedforall.com/forum/viewtopic.php?t=116&amp;view=next" rel="nofollow" target="_blank">http://www.feedforall.com/forum/viewtopic.php?t=116&amp;view=next</a><br />
lets hope that hosting providers will soon adopt php5</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51447""></a>
  <div class="note">
   <strong class="user">csarven at gmail dot com</strong>
   <a href="#51447" class="date">31-Mar-2005 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found using the output buffer to be efficient, when dealing with php scripts, with xml data.<br />
<br />
&lt;?<br />
$xh = xslt_create();<br />
<br />
ob_start();<br />
include('main.php');&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //main.php contains php and xml <br />
$xml_file = ob_get_contents();<br />
ob_end_clean();<br />
<br />
$arguments = array('/_xml' =&gt; $xml_file);<br />
<br />
$result = xslt_process($xh, 'arg:/_xml', 'index.xsl', NULL, $arguments);<br />
<br />
if (!$result) echo 'XSLT processing error: ' .xslt_error($xh) ;<br />
else echo $result;<br />
<br />
xslt_free($xh);<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44494""></a>
  <div class="note">
   <strong class="user">ppekaar at hotmail dot com</strong>
   <a href="#44494" class="date">08-Aug-2004 02:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In response to "twa at carlbro dot dk" above I have finally solved how to combine two XML sources and one XSL stylesheet.&nbsp; The above comment was nearly right,<br />
<br />
for the php<br />
<br />
<span class="default">&lt;?php<br />
<br />
xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
</span><span class="default">xslt_set_base</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">,</span><span class="string">"file://c:\inetpub\wwwroot\yourwebsite\");<br />
<br />
</span><span class="default">$arguments</span><span class="string"> = array('/_xml' =&gt; </span><span class="default">$xmlSingle</span><span class="string">, '/_xsl'=&gt;</span><span class="default">$xsl</span><span class="string">, '/xml2'=&gt;</span><span class="default">$xml_rates</span><span class="string">);<br />
</span><span class="default">$xslResult</span><span class="string"> = xslt_process(</span><span class="default">$xh</span><span class="string">, 'arg:/_xml', 'single_availability_filter.xsl', NULL, </span><span class="default">$arguments</span><span class="string">,</span><span class="default">$parameters</span><span class="string">);<br />
<br />
?&gt;<br />
<br />
Please note that I have put in a blank variable "</span><span class="keyword">/</span><span class="default">_xsl </span><span class="keyword">=&gt; </span><span class="default">$xsl</span><span class="string">", the actuall XSL file is listed directly in the xslt_process fucntion.<br />
<br />
Note that we have a third XML data source which is called xml2 and is set a value </span><span class="default">$xml_rates</span><span class="string">.&nbsp; In your XSL stylesheet you can now call this XML data via the following line<br />
<br />
&lt;xsl:variable name="</span><span class="default">filter_rates</span><span class="string">" select="</span><span class="default">document</span><span class="keyword">(</span><span class="string">'arg:/xml2'</span><span class="keyword">)/</span><span class="default">RackRates</span><span class="string">"/&gt;<br />
<br />
the missing link was putting in the the arg:/<br />
<br />
Also please note that I am using xslt_set_base which set the base filepath for all your XSL documents. <br />
<br />
Hope this helps.&nbsp; <br />
Phelim</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42465""></a>
  <div class="note">
   <strong class="user">Justin Ramos</strong>
   <a href="#42465" class="date">18-May-2004 03:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The xslt_ functions no longer work in PHP/5.0; the XSLT extension has been removed. To apply an XSL transformation to an XML document, you must use DomDocument (from DOM) and XsltProcessor (from XSL):<br />
<br />
&lt;?<br />
$xml = new DomDocument();<br />
$xml-&gt;load('foo.xml');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
$xsl = new DomDocument;<br />
$xsl-&gt;load('foo.xsl');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
$proc = new xsltprocessor();<br />
$proc-&gt;importStyleSheet($xsl);<br />
echo($proc-&gt;transformToXML($xml));<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39701""></a>
  <div class="note">
   <strong class="user">ajenks at paradise dot net dot nz</strong>
   <a href="#39701" class="date">08-Feb-2004 07:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
By combining some of the user added notes and some experimentation, here's how I finally got the query string broken down and passed in as top-level parameters:<br />
<br />
With a little more effort, this could be turned into a completely generic transform script - i.e. by adding query parms for the xml and xsl files also and excluding them from the $params array (though this lat bit may not be necessary).<br />
<br />
Thanks to all those other users whose tips make up most of this solution!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Process query string to $params array<br />
<br />
</span><span class="default">$vars </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"&amp;"</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'QUERY_STRING'</span><span class="keyword">]);<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$vars</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;</span><span class="default">$var </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">"="</span><span class="keyword">, </span><span class="default">$vars</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;</span><span class="default">$params</span><span class="keyword">[</span><span class="default">$var</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = </span><span class="default">$var</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
}<br />
<br />
</span><span class="comment">// Fire up the engine<br />
<br />
</span><span class="default">$xslt </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
</span><span class="default">$xml </span><span class="keyword">= </span><span class="string">'test.xml'</span><span class="keyword">;<br />
</span><span class="default">$xsl </span><span class="keyword">= </span><span class="string">'test.xsl'</span><span class="keyword">;<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="default">$xml</span><span class="keyword">, </span><span class="default">$xsl</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, array(), </span><span class="default">$params</span><span class="keyword">);<br />
if (</span><span class="default">$result</span><span class="keyword">) {<br />
&nbsp;&nbsp; echo </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
else {<br />
&nbsp;&nbsp; print </span><span class="string">"Error:" </span><span class="keyword">. </span><span class="default">xslt_errno</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39285""></a>
  <div class="note">
   <strong class="user">greg _at_ rhythmicdesign _dot_ com</strong>
   <a href="#39285" class="date">23-Jan-2004 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Figuring out the syntax to get parameters in was difficult but this works for me:<br />
<br />
// Allows user to pass argument from URL as script.php?foo=VALUE<br />
<br />
$xml = file_get_contents ('n.xml') ;<br />
$xsl = file_get_contents ('n.xsl') ;<br />
<br />
&nbsp;// Perform the transformation <br />
$args = array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '/_xml'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $xml, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; '/_xsl'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $xsl<br />
);<br />
$params = array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'foo'&nbsp; &nbsp; =&gt;&nbsp; &nbsp; $foo<br />
) ;<br />
<br />
&nbsp;$html = xslt_process($xsltproc, 'arg:/_xml', 'arg:/_xsl', NULL, $args, $params); <br />
<br />
then in the XSL FILE:<br />
--------------------------<br />
&lt;xsl:param name="foo"/&gt;<br />
<br />
&lt;xsl:template match="/"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;root&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;test&gt;&lt;xsl:value-of select="$foo"/&gt;&lt;/test&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;xsl:apply-templates/&gt;&lt;/root&gt;<br />
<br />
&lt;/xsl:template&gt;<br />
<br />
Note: the param definition and the '$' dollar sign</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32897""></a>
  <div class="note">
   <strong class="user">ohlesbeauxjours at yahoo dot fr</strong>
   <a href="#32897" class="date">10-Jun-2003 02:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Thanks, Martin !<br />
<br />
As a matter of fact, your way of doing is probably more logical than mine :)<br />
The point is that scheme handler strangely adds a slash to your URI , if it doesn't start by any slash.<br />
<br />
So if you call : document('http:www.url.com',page/@url)<br />
...then $rest gets /www.url.com<br />
<br />
But if you call : document('<a href="http://www.url.com" rel="nofollow" target="_blank">http://www.url.com</a>',page/@url)<br />
...then $rest gets //www.url.com<br />
<br />
Another approach could consist in enclosing the scheme "http" in the XML attribute : &lt;page url="<a href="http://www.w3.org/TR/REC-xml" rel="nofollow" target="_blank">http://www.w3.org/TR/REC-xml</a>"&gt;<br />
and simply doing a : $file = fopen("http:".$rest,"r");<br />
<br />
It all depends on the context...<br />
<br />
See also :<br />
<a href="http://archive.gingerall.cz/archives/public/sablot2003/msg00598.html" rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sablot2003/msg00598.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32435""></a>
  <div class="note">
   <strong class="user">martin_a_thomas at yahoo dot com</strong>
   <a href="#32435" class="date">28-May-2003 01:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a little trouble making the http scheme handler work until I removed the line with the strip function and then changed the fopen <br />
from '<a href="http://" rel="nofollow" target="_blank">http://</a>' to 'http:' - <br />
<br />
$file = fopen("http:".$rest,"r");<br />
<br />
Regards // Martin</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30921""></a>
  <div class="note">
   <strong class="user">ohlesbeauxjours at yahoo dot fr</strong>
   <a href="#30921" class="date">03-Apr-2003 03:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The XSLT document() function can only open local files.<br />
But thanks to the Sablotron handlers, you can easely write an http-handler (or even ftp- !!).<br />
<br />
This sample opens a particular XHTML page on the W3C, and will parse it to get the TITLE tag content.<br />
The interesting point, here, is that the url to open (www.w3.org/TR/REC-xml) is defined... inside an XML&nbsp; document :)<br />
<br />
// XML content :<br />
$xml='&lt;?xml version="1.0"?&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;page url="www.w3.org/TR/REC-xml"&gt;W3C Recommendation page&lt;/page&gt;';<br />
<br />
// XSL content :<br />
$xsl='&lt;?xml version="1.0"?&gt;<br />
&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br />
&lt;xsl:output method="html" encoding="ISO-8859-1" indent="no" omit-xml-declaration="yes" standalone="yes" media-type="text/html"/&gt;<br />
&lt;xsl:template match="/"&gt;<br />
&nbsp;&nbsp;&nbsp; The title is : &lt;xsl:value-of select="document(concat(\'http:\',page/@url))/html/head/title"/&gt;<br />
&lt;/xsl:template&gt;<br />
&lt;/xsl:stylesheet&gt;';<br />
<br />
// TRANSFORMATION :<br />
function handGetAll($processor,$scheme,$rest) {<br />
&nbsp;$rest=substr($rest,1);<br />
&nbsp;switch($scheme) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case 'http':<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $file = fopen("<a href="http://" rel="nofollow" target="_blank">http://</a>".$rest,"r");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(!feof($file))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $c .= fgets($file, 1024);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fclose($file);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $c;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$xh = xslt_create();<br />
xslt_set_scheme_handlers($xh,array("get_all" =&gt; "handGetAll"));<br />
echo xslt_process($xh,'arg:/_xml', 'arg:/_xsl',NULL,array("/_xml"=&gt;$xml,"/_xsl"=&gt;$xsl)); <br />
xslt_free($xh);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28484""></a>
  <div class="note">
   <strong class="user">twa at carlbro dot dk</strong>
   <a href="#28484" class="date">14-Jan-2003 07:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi... I'm back with the result :)<br />
<br />
After a good discussion on the official Sablotron / PHP mailing list I found out how to fix the problem I had with PHP 4.3.0. So now I will just summarize it here. The full discussion can be found online on this address:<br />
<a href="http://archive.gingerall.cz/archives/public/sab-php/msg00252.html" rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sab-php/msg00252.html</a><br />
<br />
The problem is actually an error in my code (huh? I thought I wrote error-free code). In my XSLT file I use the document() method provided by Sablotron. In my previous example I use this syntax:<br />
&nbsp; document('foobar')<br />
The real syntax is actually:<br />
&nbsp; document('arg:/foobar')<br />
The reason why this worked in previous versions of PHP was due to an error in the Sablotron lib (anyway so I think).<br />
<br />
Another thing that I would like to share is the syntax of the 2nd, 3rd and 5th argument in the xslt_process() method. In the official examples on this page the names "_xml" and "_xsl" is used. But according to the Sablotron people any name can be used. And if you are wondering if you need the preceding "/" or not - then Lenar Lõhmus from the sab-php mailing list told me it would be wise to use it. Normally it works either way, but it is always the best thing to use the slash. For the full discussion on this subject see the other thread at:<br />
<a href="http://archive.gingerall.cz/archives/public/sab-php/msg00260.html" rel="nofollow" target="_blank">http://archive.gingerall.cz/archives/public/sab-php/msg00260.html</a><br />
<br />
/watson</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28444""></a>
  <div class="note">
   <strong class="user">twa at carlbro dot dk</strong>
   <a href="#28444" class="date">13-Jan-2003 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems to be undocumented how to get the XSL parser to use two XML files at the same time to produce the output. It is possible though. Here is how it's done with the XML data in a variable:<br />
<br />
First you need to change the 5th argument.<br />
$xh = xslt_create();<br />
$args = array('/_xml'=&gt;$xml1, '/_xsl'=&gt;$xsl, 'xml2'=&gt;$xml2);<br />
$result = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $args);<br />
<br />
Inside the XSLT document you then need to do this:<br />
&lt;xsl:template match="/"&gt;<br />
&nbsp; &lt;root&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;foo&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;xsl:value-of select="/foo" /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/foo&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;bar&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; &lt;xsl:value-of select="document('xml2')/bar" /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/bar&gt;<br />
&nbsp; &lt;/root&gt;<br />
&lt;/xsl:template&gt;<br />
<br />
This creates a XML result containing a root node called "root" containing two nodes. One called "foo" with the content of the root node in $xml1 and one called "bar" with the content of the root node in $xml2.<br />
<br />
In the $args array I don't know if it is best to write "'xml2'=&gt;$xml2" or "'/xml2'=&gt;$xml2". Both work. I think it has something to do with the level of the argument (/level1/level2/level3). Maybe this site reveals the true syntax:<br />
<a href="http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029" rel="nofollow" target="_blank">http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029</a><br />
<br />
I don't know if there is another - more elegant way - to do this. But I can't find any documentation on it.<br />
<br />
For the moment I can't get this to work in PHP 4.3.0/Windows because there seems to be a problem with the Sablotron that is shipped with this version (I have not tried the UNIX version though). I think a new version of the sablot.dll will fix this problem. But for the moment I can't seem to get PHP to work with this new version. If anyone knows how to do this then please send me a mail. I'll post anything that I find out.<br />
<br />
/watson</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28183""></a>
  <div class="note">
   <strong class="user">geiryork at start dot no</strong>
   <a href="#28183" class="date">05-Jan-2003 04:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An important detail if you want to use the last argument to include parameters to the template:<br />
<span class="default">&lt;?PHP<br />
xslt_process</span><span class="keyword">(</span><span class="default">$xslt</span><span class="keyword">, </span><span class="string">'foo.xml'</span><span class="keyword">, </span><span class="string">'foo.xslt'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, array(), array(</span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="string">'FOO'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
In the xsl file:<br />
&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br />
<br />
&lt;xsl:param name="foo"/&gt;<br />
&lt;xsl:template match="/"&gt;<br />
&lt;xsl:value-of select="foo"/&gt;<br />
.........<br />
<br />
Note the &lt;xsl:param name="foo"/&gt; is specified *outside* the template tag, but can be referenced inside it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26746""></a>
  <div class="note">
   <strong class="user">sanj at wiredesign dot com</strong>
   <a href="#26746" class="date">11-Nov-2002 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Okay, now this is a neat function once you play around with it<br />
bit...we're basically using it in two ways...one to preview data <br />
from a mysql database, and the other to actually publish the <br />
output to a .htm file. The following example shows us grabbing <br />
data from the database and then using the xslt_process() function<br />
&nbsp;to combine this data file a .xsl file residing on the server...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">"../../includes/connect_to_db.inc"</span><span class="keyword">); <br />
<br />
</span><span class="default">$query </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"select * from mytbl where mytbl_id=1"</span><span class="keyword">);<br />
<br />
</span><span class="default">$mydata </span><span class="keyword">= </span><span class="default">mysql_fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
<br />
</span><span class="default">$xmlString&nbsp; </span><span class="keyword">= </span><span class="string">'&lt;?xml version="1.0"?&gt;&lt;data&gt;'</span><span class="keyword">;<br />
</span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">'&lt;mytbl_id&gt;'</span><span class="keyword">.</span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_id"</span><span class="keyword">].</span><span class="string">'&lt;/mytbl_id&gt;'</span><span class="keyword">;<br />
</span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;mytbl_title&gt;"</span><span class="keyword">.</span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_title"</span><span class="keyword">].</span><span class="string">"&lt;/mytbl_title&gt;"</span><span class="keyword">;<br />
</span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;mytbl_filename&gt;"</span><span class="keyword">.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$mydata</span><span class="keyword">[</span><span class="string">"mytbl_filename"</span><span class="keyword">].</span><span class="string">"&lt;/mytbl_filename&gt;"</span><span class="keyword">;<br />
</span><span class="default">$xmlString </span><span class="keyword">.= </span><span class="string">"&lt;/data&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="comment">//create instance of xslt parser<br />
</span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
<br />
</span><span class="comment">//store xmlString in an array using a key '/_xml'<br />
</span><span class="default">$arguments </span><span class="keyword">= array(</span><span class="string">'/_xml' </span><span class="keyword">=&gt; </span><span class="default">$xmlString</span><span class="keyword">);<br />
<br />
</span><span class="comment">//to write data to a file<br />
</span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'style.xsl'</span><span class="keyword">, </span><span class="string">'result.htm'</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">);<br />
<br />
</span><span class="comment">//to view in brower<br />
</span><span class="keyword">echo(</span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'style.xsl'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above function works well, although you can't seem to view<br />
&nbsp;the resulting htm document in the browser and write to a file at<br />
&nbsp;the same time...instead you have to call the function twice, once<br />
&nbsp;to write data to a file and once to display data in a browser.<br />
<br />
-----------------------<br />
here's a simple style.xsl file that works with this example...<br />
<br />
&lt;?xml version="1.0"?&gt;<br />
&lt;xsl:stylesheet version="1.0" xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br />
&lt;xsl:template match="/"&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;html&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;head&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/head&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;body&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;h1&gt;Here's my data!&lt;/h1&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;xsl:value-of select="data/mytbl_title" /&gt;&lt;br /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;xsl:value-of select="data/mytbl_filename" /&gt;&lt;br /&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/body&gt;<br />
&nbsp;&nbsp;&nbsp; &lt;/html&gt;<br />
&lt;/xsl:template&gt;<br />
&lt;/xsl:stylesheet&gt;<br />
<br />
enjoy!<br />
<br />
Sanj Maghera</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26733""></a>
  <div class="note">
   <strong class="user">tom at hubalek dot net</strong>
   <a href="#26733" class="date">11-Nov-2002 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
keep in mind that fifth parameter of function xsl_process() is __arguments__ and sixth is __xsl parameters__. I spent a lot of time learning difference between arguments and parameters ;-)<br />
<br />
Tom</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25621""></a>
  <div class="note">
   <strong class="user">jordigasulla at yahoo dot com</strong>
   <a href="#25621" class="date">30-Sep-2002 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The output of the XSLT process doesn't have to be necessarily HTML. If you receive a lot of data in the XML and want to distribute it along all your page, you can convert all your page to XHTML or force the output to be PHP code and then eval()uated. For instance, your XSL document (part of it) could look like:<br />
<br />
&lt;xsl:text disable-output-escaping="yes"&gt;$networth=&lt;/xsl:text&gt;&lt;xsl:value-of select="networth" /&gt;&lt;xsl:text disable-output-escaping="yes"&gt;;&lt;/xsl:text&gt;<br />
<br />
and your PHP code could look like:<br />
<br />
$result = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $arguments);<br />
if ($result) {<br />
&nbsp; eval(addslashes($result));<br />
<br />
that way, you can use the variable $networth in wherever you want inside your PHP file, like:<br />
<br />
&lt;? print $networth; ?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23941""></a>
  <div class="note">
   <strong class="user">dragan at iskrassoderwas dot de</strong>
   <a href="#23941" class="date">02-Aug-2002 02:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Your input into xslt-process can of course be of external-php-script-nature. This way, you can use PHP scripts that output XML code to make up the transformation:<br />
<br />
// Transforming "Dynamic XML" through static XSL<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Gonna contain PHP-XML output<br />
</span><span class="default">$arguments </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; </span><span class="string">'/_xml' </span><span class="keyword">=&gt; </span><span class="default">$xml</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Read plain PHP-XML output<br />
</span><span class="default">$xmlData </span><span class="keyword">= </span><span class="default">fopen </span><span class="keyword">(</span><span class="string">"<a href="http://somehost/xmloutputtingscript.php" rel="nofollow" target="_blank">http://somehost/xmloutputtingscript.php</a>"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Stack up output into one String<br />
</span><span class="keyword">while (</span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgets </span><span class="keyword">(</span><span class="default">$xmlData</span><span class="keyword">))<br />
&nbsp; </span><span class="default">$xml </span><span class="keyword">.= </span><span class="default">$line</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Process the document<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'mystylesheet.xsl'</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$arguments</span><span class="keyword">); <br />
<br />
</span><span class="comment">// Print out your transformed document<br />
</span><span class="keyword">echo </span><span class="default">$result</span><span class="keyword">;<br />
<br />
</span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23013""></a>
  <div class="note">
   <strong class="user">j dot metzger at steptown dot com</strong>
   <a href="#23013" class="date">06-Jul-2002 11:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This in example on using variables from php in xsl-stylesheets (Sablotron 0.95)<br />
<br />
with:<br />
<br />
&lt;xsl:param name="foo" /&gt;<br />
<br />
and how to pass the param from php to Sablotron<br />
(I'm using Sablotron 0.95) <br />
<br />
The php-wrapper to Sablotron has changed somewhat in 4.0.6, so I'm using the new (experimental) syntax.<br />
<br />
Maybe this could change again in the future<br />
<br />
I use 4.2.1 which is compiled with:<br />
'./configure' '--with-mysql' '--with-apxs' '--enable-xslt' '--with-xslt-sablot=/usr/local/lib' '--with-expat-dir=/usr' '--with-dom' '--with-zlib-dir=/usr'<br />
<br />
When you want to use a param passed to the xslt_process you have to put it in the top level of the xslt-script, otherwice it won't work (means: before defining any template)<br />
Afterwards you can use the passed param with <br />
<br />
&lt;xsl:value-of select="$yourparamname" /&gt;<br />
<br />
in the template.<br />
<br />
example:<br />
<br />
====&gt; xsl-stylesheet &lt;====<br />
<br />
&lt;?xml version="1.0"?&gt;<br />
<br />
&lt;xsl:stylesheet version="1.0"<br />
xmlns:xsl="<a href="http://www.w3.org/1999/XSL/Transform" rel="nofollow" target="_blank">http://www.w3.org/1999/XSL/Transform</a>"&gt;<br />
<br />
&lt;xsl:output method="html" version="1.0" encoding="UTF-8" indent="no" omit-xml-declaration="yes" doctype-public="-//W3C/DTD XHTML 1.0 Transitional//EN" doctype-system="<br />
<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" rel="nofollow" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>" standalone="yes" media-type="text/html" /&gt;<br />
<br />
&lt;xsl:param name="tpsession" /&gt;<br />
<br />
&lt;xsl:template match="/root/output"&gt;<br />
&nbsp;&nbsp; this is the template stuff. and this is the param <br />
<br />
&lt;xsl:value-of select="$tpsession" /&gt;<br />
<br />
&lt;/xsl:template&gt;<br />
<br />
&lt;/xsl:stylesheet&gt;<br />
<br />
====&gt; end of xsl - stylesheet &lt;====<br />
<br />
o.k. -&gt; to call the xslt_parser (Sablotron 0.95 in my case) with params do this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/* php script */<br />
<br />
</span><span class="default">$xh </span><span class="keyword">= </span><span class="default">xslt_create</span><span class="keyword">();<br />
</span><span class="default">$arg </span><span class="keyword">= array(&nbsp; &nbsp; </span><span class="string">'/_xml'&nbsp;&nbsp; </span><span class="keyword">=&gt;</span><span class="default">$t_xmlString</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'/_xsl'&nbsp; &nbsp; </span><span class="keyword">=&gt; </span><span class="default">$t_xslString </span><span class="keyword">);<br />
</span><span class="default">$param </span><span class="keyword">= array(</span><span class="string">'tpsession' </span><span class="keyword">= </span><span class="default">session_name</span><span class="keyword">().</span><span class="string">"="</span><span class="keyword">.</span><span class="default">session_id</span><span class="keyword">());<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
</span><span class="default">$result </span><span class="keyword">= @</span><span class="default">xslt_process</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">, </span><span class="string">'arg:/_xml'</span><span class="keyword">, </span><span class="string">'arg:/_xsl'</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">,</span><span class="default">$arg</span><span class="keyword">,</span><span class="default">$param</span><span class="keyword">);<br />
if(!</span><span class="default">$result</span><span class="keyword">){<br />
print </span><span class="default">xslt_error</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br />
}<br />
else<br />
print </span><span class="default">$result</span><span class="keyword">;<br />
</span><span class="default">xslt_free</span><span class="keyword">(</span><span class="default">$xh</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* end of php-script */<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
That's it -&gt; have fun</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22196""></a>
  <div class="note">
   <strong class="user">tkearns at fastmail dot fm</strong>
   <a href="#22196" class="date">10-Jun-2002 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you wondering what the hell is up with the very strange format for refering to in-memory data, see<br />
<a href="http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029" rel="nofollow" target="_blank">http://www.gingerall.com/charlie/ga/act/gadoc.act?pg=sablot#i__1029</a><br />
<br />
normally you pass a file name (or URI) using the 'file:' syntax. The 'arg:' syntax introduced by sablotron does not refer to a file system path, it refers to an ARGument - and of course, arguments are in-memory. In the case of PHP, the argument reference is an index to the array in parameter 5 of the xslt_process() function. I think the forward slash is just to maintain the convention of path notation.<br />
<br />
Someone with more knowledge on the topic could probably provide a more concise definition. If so, it would be nice to have it included as part of the standard documentation set.<br />
<br />
Some wrapper functions would make things easier still.<br />
<br />
Here's a wrapper I wrote.<br />
<br />
function XtDataWithFile($xmlData, $uriXSLT) {<br />
&nbsp;&nbsp;&nbsp; $args = array ( '/_xml' =&gt; $xmlData );<br />
&nbsp;&nbsp;&nbsp; $xp = xslt_create();<br />
&nbsp;&nbsp;&nbsp; $out = xslt_process($xp, 'arg:/_xml', $uriXSLT, NULL, $args);<br />
&nbsp;&nbsp;&nbsp; xslt_free($xp);<br />
&nbsp;&nbsp;&nbsp; return $out;<br />
}<br />
<br />
of course you could do XtFileWithData() can XtDataWithData()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22010""></a>
  <div class="note">
   <strong class="user">msopacua at idg dot nl</strong>
   <a href="#22010" class="date">04-Jun-2002 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Took me a while to figure this one out, but no matter what your stylesheet encoding and xml encoding says - argument values, need to be UTF-8.<br />
<br />
Version 4.2.1 and sablot 0.90.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21181""></a>
  <div class="note">
   <strong class="user">tim at zero-interactive dot com</strong>
   <a href="#21181" class="date">02-May-2002 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editors note: this is basic URI syntax. Any URI, is specified as: &lt;protocol&gt;:location. Any resource, that can point to a network, needs '//' to indicate it's "network awareness". F.E.: <a href="ftp://, http:// and yes - file://.]" rel="nofollow" target="_blank">ftp://, http:// and yes - file://.]</a><br />
<br />
For those of you wanting to know how to fix the annoying bug telling you that an econding type of '' is unacceptable ....<br />
<br />
Win2K, PHP 4.2.0<br />
<br />
When processing files, you need to prefix each filename with "file://" or else you will get the above mentioned error.&nbsp; Then you just need to set the encoding in your xslt file to get it to work.<br />
<br />
You must use this prefix with your xml, xsl and output files if you are using all three like I am.<br />
<br />
Happy hunting!!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="20846""></a>
  <div class="note">
   <strong class="user">patrice dot lazareff at lbb dot fr dot invalid</strong>
   <a href="#20846" class="date">18-Apr-2002 03:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function's syntax has changed since PHP 4.0.x, here is a quick workaround for those who use a same script with various versions.<br />
Note that in order to work with PHP 4.0.x, the commented part must not be directly within the code (or a parse error will occur).<br />
This is why I commented it out here and call this bit of code via an include.<br />
<br />
// PHP 4.0.6/4.1.x difference<br />
$minor = explode(".",phpversion());<br />
if($minor[1] &gt;= 1) // PHP 4.1.x -- preferred<br />
{<br />
&nbsp;&nbsp;&nbsp; include("php412_XSLT.php");<br />
<br />
/* here is the included code<br />
$arguments = array(<br />
'/_xml' =&gt; $final_xml,<br />
'/_xsl' =&gt; $xsl_content<br />
);<br />
<br />
$html_out = xslt_process($xh, 'arg:/_xml', 'arg:/_xsl', NULL, $arguments);<br />
<br />
end of included code */<br />
<br />
} else // PHP 4.0.6 -- works okay<br />
&nbsp;&nbsp;&nbsp; xslt_process($xsl_content, $final_xml,$html_out);<br />
<br />
echo $html_out;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19890""></a>
  <div class="note">
   <strong class="user">theseer at php dot net</strong>
   <a href="#19890" class="date">14-Mar-2002 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this extension changed quite heavily in the latest releases. The documentation and howtos on the web may not match your version of php !<br />
<br />
To verify your extension, check the configure information<br />
<br />
&nbsp;( <span class="default">&lt;?php phpinfo</span><span class="keyword">(); </span><span class="default">?&gt;</span> )<br />
<br />
&nbsp;for either<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; --with-sablot&nbsp; ( old ) <br />
&nbsp;or<br />
&nbsp;&nbsp;&nbsp; --enable-xslt --with-xslt-sablot (new).<br />
<br />
Most ( all?) web documents i found describe the use of the old extension, which also changed in the process of development. <br />
<br />
This extension is marked experimental for a reason ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19191""></a>
  <div class="note">
   <strong class="user">lennart at rsd-online dot dk</strong>
   <a href="#19191" class="date">19-Feb-2002 05:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Relative paths using xsl:include<br />
<br />
i addition to francis's note above you can set the base path with the xslt_set_base function like this on windows like this.<br />
<br />
xslt_set_base('file://c:/path to xslt files/')<br />
<br />
from you xsl file use the<br />
&lt;xsl:include href="file.xls"&gt;<br />
<br />
If you wish to have full access to all files in you site only specify the root path and then use<br />
&lt;xsl:include href="somepath/file.xls"&gt;<br />
<br />
God speed.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18990""></a>
  <div class="note">
   <strong class="user">francisf at videotron dot ca</strong>
   <a href="#18990" class="date">13-Feb-2002 01:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just because that I have look around and see other look around without any solution, so for prosperity, I give somethings that surely a lot of people know but a lot don't too.<br />
<br />
OK, if you want to do xsl:include in your xsl file that will be parsed by your php page with xslt and sablot installed,<br />
<br />
you have to put that in your xsl page (on a linux machine): <br />
&lt;xsl:include&nbsp; href="file:///pathtomyxslfile/xy.xsl"&gt;<br />
<br />
yes you do have 3 "///", the 2 first are used by sablotron and the third one is used for your path as: /pathtomyxslfile/xy.xsl<br />
<br />
It was in the sablotron doc, well part of it.<br />
<br />
Tested on:<br />
php 4.1.0 <br />
Apache/1.3.22 <br />
sablot 0.80 <br />
<br />
Thanks you and take care.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18594""></a>
  <div class="note">
   <strong class="user">chris_coupal at hotmail dot com</strong>
   <a href="#18594" class="date">29-Jan-2002 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are getting the data from a database and creating the XML data stream for transformation, you can add the parameters for the stylesheet into the XML data. Once in the data, you can reference them from the XSL stylesheet directly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18292""></a>
  <div class="note">
   <strong class="user">ascii_NO_SPAM_ at _NO_SPAM_microcore dot dk</strong>
   <a href="#18292" class="date">17-Jan-2002 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed a slight difference in html output when upgrading to php4.1.1 on Windows.<br />
<br />
I found the garbled output to be caused by [indent="yes"] in &lt;xsl:output /&gt; and simply changed it to [indent="no"].</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17995""></a>
  <div class="note">
   <strong class="user">Bill Humphries &lt;whump at mac dot com&gt;</strong>
   <a href="#17995" class="date">07-Jan-2002 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that the xslt_process function does not like to have NULLs passed into it for the Argument and Parameter arrays. However, you can pass it an empty Argument array (modulo any typos):<br />
<br />
$xh = xslt_create();<br />
$args = array();<br />
$params = array( 'foo' =&gt; 'bar' );<br />
$result = xslt_process($xh,<br />
'source.xml','source.xsl',NULL,<br />
$args,$params);<br />
if ($result)<br />
{<br />
&nbsp;print $result;<br />
} else {<br />
&nbsp;print "Error: ".xslt_error($xh);<br />
}<br />
<br />
That way you don't have to worry about providing methods for reading files into the argument array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.xslt-getopt.html">xslt_getopt</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.xslt-set-base.html">xslt_set_base</a></div>
 <div class="up"><a href="ref.xslt.html">XSLT (PHP 4) é–¢æ•°</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
