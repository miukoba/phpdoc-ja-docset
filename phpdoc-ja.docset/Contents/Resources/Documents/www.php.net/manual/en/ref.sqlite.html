<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>SQLite 関数</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="sqlite.constants.html">定義済の定数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sqlite-array-query.html">sqlite_array_query</a></div>
 <div class="up"><a href="book.sqlite.html">SQLite</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.sqlite" class="reference">
  <h1 class="title">SQLite 関数</h1>

  <div class="partintro">
   
   <div class="section" id="sqlite.classes">
    <h2 class="title">定義済みクラス</h2>

    <div class="section" id="sqlite.class.sqlitedatabase">
     <h2 class="title"><strong class="classname">SQLiteDatabase</strong></h2>
     <p class="simpara">
      オープンされている SQLite データベースを表す
     </p>
     <div class="section" id="sqlite.class.sqlitedatabase.constructor">
      <h2 class="title">コンストラクタ</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-open.html" class="link">__construct</a> - 新規 SQLiteDatabase オブジェクトを生成する</span>
       </li>
      </ul>
     </div>
     <div class="section" id="sqlite.class.sqlitedatabase.methods">
      <h2 class="title">メソッド</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-query.html" class="link">query</a> - クエリを実行する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-exec.html" class="link">queryExec</a> - 結果を返さないクエリを実行する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-array-query.html" class="link">arrayQuery</a> - クエリを実行し、結果を配列として返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-single-query.html" class="link">singleQuery</a> - クエリを実行し、単一カラムに対する配列もしくは先頭行の値を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-unbuffered-query.html" class="link">unbufferedQuery</a> - バッファされていないクエリを実行する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-last-insert-rowid.html" class="link">lastInsertRowid</a> - 直近に挿入された行の行 ID を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-changes.html" class="link">changes</a> - 直近のステートメントにより更新された行数を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-create-aggregate.html" class="link">createAggregate</a> - SQL ステートメントで使用する集約 UDF を登録する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-create-function.html" class="link">createFunction</a> - SQL ステートメントで使用する UDF を登録する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-busy-timeout.html" class="link">busyTimeout</a> - ビジータイムアウト時間を設定または無効にする</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-last-error.html" class="link">lastError</a> - 直近に発生したエラーのエラーコードを返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-column-types.html" class="link">fetchColumnTypes</a> - 特定のテーブルからカラム型の配列を返す</span>
       </li>
      </ul>
     </div>
    </div>

    <div class="section" id="sqlite.class.sqliteresult">
     <h2 class="title"><strong class="classname">SQLiteResult</strong></h2>
     <p class="simpara">
      バッファされた SQLite の結果セットを表す
     </p>
     <div class="section" id="sqlite.class.sqliteresult.methods">
      <h2 class="title">メソッド</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-array.html" class="link">fetch</a> - 結果セットから次行を配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-object.html" class="link">fetchObject</a> - 結果セットから次行をオブジェクトとして取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-single.html" class="link">fetchSingle</a> - 結果セットから先頭カラムを文字列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-all.html" class="link">fetchAll</a> - 結果セットから全行を配列の配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-column.html" class="link">column</a> - 結果セットの現在行からカラムを取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-num-fields.html" class="link">numFields</a> - 結果セット内のフィールド数を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-field-name.html" class="link">fieldName</a> - 結果セット内の特定フィールドの名前を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-current.html" class="link">current</a> - 結果セットから現在行を配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-key.html" class="link">key</a> - 現在行のインデックスを返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-next.html" class="link">next</a> - 次の行番号へシークする</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-valid.html" class="link">valid</a> - まだ行が残っているかどうかを返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-rewind.html" class="link">rewind</a> - 結果セットの先頭の行番号へシークする</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-prev.html" class="link">prev</a> - 結果セットの前の行番号へシークする</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-has-prev.html" class="link">hasPrev</a> - 前の行が利用可能かどうかを返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-num-rows.html" class="link">numRows</a> - 結果セットの行数を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-seek.html" class="link">seek</a> - 特定の行番号へシークする</span>
       </li>
      </ul>
     </div>
    </div>

    <div class="section" id="sqlite.class.sqliteunbuffered">
     <h2 class="title"><strong class="classname">SQLiteUnbuffered</strong></h2>
     <p class="simpara">
      バッファされていない SQLite 結果セットを表します。
      バッファされていない結果セットはシーケンシャルで、前方シークのみ可能です。
     </p>
     <div class="section" id="sqlite.class.sqliteunbuffered.methods">
      <h2 class="title">メソッド</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-array.html" class="link">fetch</a> - 結果セットから次行を配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-object.html" class="link">fetchObject</a> - 結果セットから次行をオブジェクトとして取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-single.html" class="link">fetchSingle</a> - 結果セットから先頭カラムを文字列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-fetch-all.html" class="link">fetchAll</a> - 結果セットから全行を配列の配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-column.html" class="link">column</a> - 結果セットの現在行からカラムを取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-num-fields.html" class="link">numFields</a> - 結果セット内のフィールド数を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-field-name.html" class="link">fieldName</a> - 結果セット内の特定フィールドの名前を返す</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-current.html" class="link">current</a> - 結果セットから現在行を配列として取得する</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-next.html" class="link">next</a> - 次の行番号へシークする</span>
       </li>
       <li class="listitem">
        <span class="simpara"><a href="function.sqlite-valid.html" class="link">valid</a> - まだ行が残っているかどうかを返す</span>
       </li>
      </ul>
     </div>
    </div>

   </div>

  </div>

  




















































































































































































































































































































 <h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.sqlite-array-query.html">sqlite_array_query</a> — 指定したデータベースに対してクエリを実行し、配列を返す</li><li><a href="function.sqlite-busy-timeout.html">sqlite_busy_timeout</a> — ビジータイムアウト時間を設定またはビジーハンドラを無効にする</li><li><a href="function.sqlite-changes.html">sqlite_changes</a> — 直近のSQLステートメントにより変更されたレコード数を返す</li><li><a href="function.sqlite-close.html">sqlite_close</a> — オープンされたSQLiteデータベースを閉じる</li><li><a href="function.sqlite-column.html">sqlite_column</a> — カレントの結果セットのレコードからカラムを1列取得する</li><li><a href="function.sqlite-create-aggregate.html">sqlite_create_aggregate</a> — SQLステートメントで使用する集約UDFを登録する</li><li><a href="function.sqlite-create-function.html">sqlite_create_function</a> — SQLステートメントで使用するために&quot;通常の&quot;ユーザー定義関数を登録する</li><li><a href="function.sqlite-current.html">sqlite_current</a> — 結果セットからカレントのレコードを配列として取得する</li><li><a href="function.sqlite-error-string.html">sqlite_error_string</a> — エラーコードの説明を返す</li><li><a href="function.sqlite-escape-string.html">sqlite_escape_string</a> — クエリパラメータ用に文字列をエスケープする</li><li><a href="function.sqlite-exec.html">sqlite_exec</a> — 与えられたデータベースに対して結果を伴わないクエリを実行する</li><li><a href="function.sqlite-factory.html">sqlite_factory</a> — SQLite データベースをオープンし、SQLiteDatabse オブジェクトを返す</li><li><a href="function.sqlite-fetch-all.html">sqlite_fetch_all</a> — 結果セットから全てのレコードを配列の配列として取得する</li><li><a href="function.sqlite-fetch-array.html">sqlite_fetch_array</a> — 結果セットから次のレコードを配列として取得する</li><li><a href="function.sqlite-fetch-column-types.html">sqlite_fetch_column_types</a> — 特定のテーブルからカラム型の配列を返す</li><li><a href="function.sqlite-fetch-object.html">sqlite_fetch_object</a> — 結果セットから次のレコードをオブジェクトとして取得する</li><li><a href="function.sqlite-fetch-single.html">sqlite_fetch_single</a> — 結果セットの最初のカラムを文字列として取得する</li><li><a href="function.sqlite-fetch-string.html">sqlite_fetch_string</a> — sqlite_fetch_single のエイリアス</li><li><a href="function.sqlite-field-name.html">sqlite_field_name</a> — 特定のフィールドの名前を返す</li><li><a href="function.sqlite-has-more.html">sqlite_has_more</a> — まだレコードがあるかないかを返す</li><li><a href="function.sqlite-has-prev.html">sqlite_has_prev</a> — 前のレコードがあるかどうかを返す</li><li><a href="function.sqlite-key.html">sqlite_key</a> — カレントレコードのインデックスを返す</li><li><a href="function.sqlite-last-error.html">sqlite_last_error</a> — データベースに関する直近のエラーコードを返す</li><li><a href="function.sqlite-last-insert-rowid.html">sqlite_last_insert_rowid</a> — 直近に挿入されたレコードのrowidを返す</li><li><a href="function.sqlite-libencoding.html">sqlite_libencoding</a> — リンクされているSQLiteライブラリのエンコーディングを返す</li><li><a href="function.sqlite-libversion.html">sqlite_libversion</a> — リンクされているSQLiteライブラリのバージョンを返す</li><li><a href="function.sqlite-next.html">sqlite_next</a> — 次のレコード番号へシークする</li><li><a href="function.sqlite-num-fields.html">sqlite_num_fields</a> — 結果セットのフィールド数を返す</li><li><a href="function.sqlite-num-rows.html">sqlite_num_rows</a> — 結果セットのレコード数を返す</li><li><a href="function.sqlite-open.html">sqlite_open</a> — SQLiteデータベースをオープンする。データベースが存在しない場合は作
   成する</li><li><a href="function.sqlite-popen.html">sqlite_popen</a> — SQLiteデータベースへの持続的ハンドルをオープンする。存在しない場合
   には、データベースを作成する</li><li><a href="function.sqlite-prev.html">sqlite_prev</a> — 結果セットの前のレコード番号へシークする</li><li><a href="function.sqlite-query.html">sqlite_query</a> — 指定したデータベースに対してクエリを実行し、結果ハンドル
  を返す</li><li><a href="function.sqlite-rewind.html">sqlite_rewind</a> — 先頭レコード番号へシークする</li><li><a href="function.sqlite-seek.html">sqlite_seek</a> — 特定のレコード番号へシークする</li><li><a href="function.sqlite-single-query.html">sqlite_single_query</a> — クエリを実行し、単一カラムもしくは先頭レコードの値に対する配列を返す</li><li><a href="function.sqlite-udf-decode-binary.html">sqlite_udf_decode_binary</a> — UDFにパラメータとして渡されたバイナリデータをデコードする</li><li><a href="function.sqlite-udf-encode-binary.html">sqlite_udf_encode_binary</a> — UDFから返す前にバイナリデータをエンコードする</li><li><a href="function.sqlite-unbuffered-query.html">sqlite_unbuffered_query</a> — 事前取得していないクエリを実行し、全てのデータをバッファリングする</li><li><a href="function.sqlite-valid.html">sqlite_valid</a> — まだレコードが残っているかどうかを返す</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="105808""></a>
  <div class="note">
   <strong class="user">CraquePipe</strong>
   <a href="#105808" class="date">16-Sep-2011 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The SQLite manual mentions that queries are done in a case-sensitive way, this means your query must be the correct case. It also mentions that using the "LIKE" operator will do a case-insensitive selection. This is true, but this also introduces wildcard symbols which a user could enter without getting filtered by the SQLite escape function. I'm somewhat new to SQL and I didn't think of doing this before, even after looking for a decent way to do case-insensitive queries.<br />
<br />
For case-insensitive queries, simply use the built in "lower" function.<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// ... <br />
</span><span class="default">$name </span><span class="keyword">= </span><span class="string">'bARbarA'</span><span class="keyword">;<br />
</span><span class="default">$rows </span><span class="keyword">= </span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">arrayQuery</span><span class="keyword">(</span><span class="string">'select * from blah where lower(name) = lower(\''</span><span class="keyword">.</span><span class="default">sqlite_escape_string</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">).</span><span class="string">'\');'</span><span class="keyword">);<br />
</span><span class="comment">// $rows might contain an entry for "Barbara" now.<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66994""></a>
  <div class="note">
   <strong class="user">papafox888 at hotmail dot com</strong>
   <a href="#66994" class="date">02-Jun-2006 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get an error message:<br />
<br />
&nbsp;&nbsp; &nbsp; Warning: sqlite_open() [function.sqlite-open]: file is encrypted or is not a database<br />
<br />
then most probably your code is accessing a SQLite3 database.<br />
<br />
sqlite_open() only supports SQLite2.&nbsp; Use PDO to access SQLite3.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58684""></a>
  <div class="note">
   <strong class="user">heinemann.juergen AT t-online.de</strong>
   <a href="#58684" class="date">11-Nov-2005 06:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Simple Example for using SQLite for small Buffering Clipboard ;)<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// $Id: SQLiteClipboard.php5,v 1.1 2005/09/09 10:15:26 heinemann Exp $<br />
<br />
/**<br />
&nbsp;* @callgraph<br />
&nbsp;* @class&nbsp; &nbsp; &nbsp; SQLiteClipboard<br />
&nbsp;* @short&nbsp; &nbsp; &nbsp; Simple Read/Write Clipboard Class<br />
&nbsp;* @version&nbsp; &nbsp; 0.0.1<br />
&nbsp;* @since&nbsp; &nbsp; &nbsp; Fr Sep&nbsp; 9 08:14:45 CEST 2005<br />
&nbsp;* @code<br />
&nbsp;&nbsp; $sqlite = new SQLiteClipboard( MY_TEMP_DIR );<br />
&nbsp;&nbsp; if ( $sqlite-&gt;INSERTING = time() )<br />
&nbsp;&nbsp; &nbsp;&nbsp; var_dump( $sqlite-&gt;INSERTING );<br />
&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo "Nothing done!";<br />
&nbsp;* @endcode<br />
&nbsp;*/<br />
<br />
</span><span class="keyword">final class </span><span class="default">SQLiteClipboard<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; private </span><span class="default">$SQL</span><span class="keyword">;<br />
&nbsp;&nbsp; private </span><span class="default">$DB </span><span class="keyword">= </span><span class="string">"Clipboard.sqlite"</span><span class="keyword">;<br />
&nbsp;&nbsp; private </span><span class="default">$TB </span><span class="keyword">= </span><span class="string">"Clipboard"</span><span class="keyword">;<br />
&nbsp;&nbsp; private </span><span class="default">$ID </span><span class="keyword">= </span><span class="string">"ID"</span><span class="keyword">;<br />
&nbsp;&nbsp; private </span><span class="default">$PA </span><span class="keyword">= </span><span class="string">"PARAM"</span><span class="keyword">;<br />
&nbsp;&nbsp; private </span><span class="default">$VA </span><span class="keyword">= </span><span class="string">"VAL"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; function </span><span class="default">__construct</span><span class="keyword">( </span><span class="default">$path </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">DB </span><span class="keyword">= </span><span class="default">chop</span><span class="keyword">( </span><span class="default">$path </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">DB </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sql_init</span><span class="keyword">();<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; private function </span><span class="default">sql_init</span><span class="keyword">()<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL </span><span class="keyword">= new </span><span class="default">SQLiteDatabase</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">DB</span><span class="keyword">, </span><span class="default">0660 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( ! </span><span class="default">file_exists</span><span class="keyword">( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">DB </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; die( </span><span class="string">"Permission Denied!" </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"PRAGMA table_info(" </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">")"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">numRows</span><span class="keyword">() == </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"CREATE TABLE " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ID </span><span class="keyword">. </span><span class="string">" INTEGER PRIMARY KEY, " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">" CHAR(255), " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">VA </span><span class="keyword">. </span><span class="string">" CHAR(255) );" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; private function </span><span class="default">sql_check</span><span class="keyword">( </span><span class="default">$p </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$o </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"SELECT " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ID </span><span class="keyword">. </span><span class="string">" FROM " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" WHERE ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">"='</span><span class="default">$p</span><span class="string">' ) ORDER BY " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ID </span><span class="keyword">. </span><span class="string">" LIMIT 1" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; while( </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">() ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ID</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; public function </span><span class="default">__get</span><span class="keyword">( </span><span class="default">$p </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"SELECT " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">VA </span><span class="keyword">. </span><span class="string">" FROM " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" WHERE ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">"='</span><span class="default">$p</span><span class="string">' ) ORDER BY " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">ID </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; while( </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">valid</span><span class="keyword">() ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">current</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$o </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">VA</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$q</span><span class="keyword">-&gt;</span><span class="default">next</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$o</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; public function </span><span class="default">__set</span><span class="keyword">( </span><span class="default">$p</span><span class="keyword">, </span><span class="default">$v </span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sql_check</span><span class="keyword">( </span><span class="default">$p </span><span class="keyword">) &amp;&amp; ! empty( </span><span class="default">$v </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"UPDATE " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" SET " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">VA </span><span class="keyword">. </span><span class="string">"='</span><span class="default">$v</span><span class="string">' WHERE ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">"='</span><span class="default">$p</span><span class="string">' );" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; elseif&nbsp; ( ! </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sql_check</span><span class="keyword">( </span><span class="default">$p </span><span class="keyword">) &amp;&amp; ! empty( </span><span class="default">$v </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"INSERT INTO " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">", " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">VA </span><span class="keyword">. </span><span class="string">" ) VALUES ('</span><span class="default">$p</span><span class="string">', '</span><span class="default">$v</span><span class="string">' );" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; elseif&nbsp; ( </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">sql_check</span><span class="keyword">( </span><span class="default">$p </span><span class="keyword">) &amp;&amp; empty( </span><span class="default">$v </span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">SQL</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">( </span><span class="string">"DELETE FROM " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">TB </span><span class="keyword">. </span><span class="string">" WHERE ( " </span><span class="keyword">. </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">PA </span><span class="keyword">. </span><span class="string">"='</span><span class="default">$p</span><span class="string">' );" </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
} </span><span class="comment">// end Class<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56380""></a>
  <div class="note">
   
   <a href="#56380" class="date">01-Sep-2005 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function to check whether a table exists:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sqlite_table_exists</span><span class="keyword">(&amp;</span><span class="default">$sqlite</span><span class="keyword">, </span><span class="default">$table</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$sqlite</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"SELECT name FROM sqlite_master WHERE type='table' AND name='</span><span class="default">$table</span><span class="string">'"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">numRows</span><span class="keyword">() &gt; </span><span class="default">0</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54775""></a>
  <div class="note">
   <strong class="user">bens at effortlessis dot com</strong>
   <a href="#54775" class="date">14-Jul-2005 08:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sqlite by default allows for foreign keys, but doesn't enforce them. <br />
<br />
I found a nice article on how to enforce foreign keys&nbsp; at <a href="http://www.justatheory.com/computers/databases/sqlite/ " rel="nofollow" target="_blank">http://www.justatheory.com/computers/databases/sqlite/ </a><br />
<br />
It would be nice if this could be handled with a wrapper class, so that adding foreign keys is done thru a wrapper API to automate the generation of the necessary enforcement triggers. If nobody's done this by the time I start coding against SqlLite/PHP5 in 6-12 months, I'll write one myself, possibly by modifying "jon at jenseng dot com"s alter table wrapper <br />
<br />
Anyway, it's not PHP specific, but anybody using Sqlite really should know this!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54323""></a>
  <div class="note">
   <strong class="user">Stephen Leaf</strong>
   <a href="#54323" class="date">30-Jun-2005 02:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I think it would be good to point out that currently (as of 5.0.4) this extention does not support SQLite 3 databases.<br />
So if your getting an error message like:<br />
Error: file is encrypted or is not a database<br />
That is why.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52001""></a>
  <div class="note">
   <strong class="user">bart at mediawave dot nl</strong>
   <a href="#52001" class="date">18-Apr-2005 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SELECT tablename.columnname FROM table;<br />
<br />
will cause SQLite to return an array having tablename.field_name as the array index. (e.g. $result['tablename.field_name'])<br />
<br />
To let SQLite return an array having only field_name as the array index (e.g. $result['field_name']) you can issue a 'PRAGMA short_column_names = 1' query:<br />
<br />
sqlite_query($connection_id, 'PRAGMA short_column_names = 1');<br />
<br />
This behaviour is more consistent with the other database extensions.<br />
<br />
For a full list of all pragmas visit: <a href="http://sqlite.org/pragma.html" rel="nofollow" target="_blank">http://sqlite.org/pragma.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49837""></a>
  <div class="note">
   <strong class="user">dotwho at NOSPAM dot mac dot com</strong>
   <a href="#49837" class="date">10-Feb-2005 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This may have been obvious to others, but I had a tough time finding the info.<br />
<br />
The default location for the actual database file is the same location of the php doc that created the database. You can alter this behavior by specifying the full path in the creation call:<br />
<br />
&lt;php<br />
$db = sqlite_open("/absolute/path/my_sqlite.db");<br />
?&gt;<br />
<br />
Note that if you used the default location, the db file may be served up by the webserver if it is in a the http document path. This is obviously a security risk that should be avoided.<br />
<br />
//Max</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49094""></a>
  <div class="note">
   <strong class="user">hunreal+php at gmail dot com</strong>
   <a href="#49094" class="date">16-Jan-2005 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Check the db/table if exist<br />
<br />
$db_name='db';<br />
$db=new SQLiteDatabase($db_name, 0666, $error);<br />
if ($error) exit($error);<br />
$q=$db-&gt;query("PRAGMA table_info(test)");<br />
if ($q-&gt;numRows()!=2) {<br />
&nbsp;&nbsp;&nbsp; if (!@$db-&gt;queryexec("<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; CREATE TABLE test (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; id INTEGER NOT NULL PRIMARY KEY,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; text VARCHAR ( 255 ) NOT NULL<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )")<br />
&nbsp;&nbsp;&nbsp; ) exit ("Create SQLite Database Error\n");<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47442""></a>
  <div class="note">
   <strong class="user">nicolas dot toniazzi at free dot fr</strong>
   <a href="#47442" class="date">16-Nov-2004 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The same in 3 lines.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">sqlite_table_exists</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">,</span><span class="default">$mytable</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">/* counts the tables that match the name given */<br />
&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">sqlite_query</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">,</span><span class="string">"SELECT COUNT(*) FROM sqlite_master WHERE type='table' AND name='</span><span class="default">$mytable</span><span class="string">'"</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">/* casts into integer */<br />
&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">intval</span><span class="keyword">(</span><span class="default">sqlite_fetch_single</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">));<br />
<br />
&nbsp; </span><span class="comment">/* returns true or false */<br />
&nbsp; </span><span class="keyword">return </span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46747""></a>
  <div class="note">
   <strong class="user">artooro at gmail dot com</strong>
   <a href="#46747" class="date">22-Oct-2004 03:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to check if a table exists, you can use a function like this:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Returns TRUE if table exists and FALSE otherwise<br />
//&nbsp; $mytable = table you want to check for<br />
<br />
</span><span class="keyword">function </span><span class="default">sqlite_table_exists</span><span class="keyword">(</span><span class="default">$mytable</span><span class="keyword">) {<br />
</span><span class="default">$db </span><span class="keyword">= </span><span class="default">sqlite_open</span><span class="keyword">(</span><span class="string">'mydb.sqlite'</span><span class="keyword">, </span><span class="default">0666</span><span class="keyword">, </span><span class="default">$sqliteerror</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="default">sqlite_query</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">, </span><span class="string">"SELECT name FROM sqlite_master WHERE type='table'"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tables </span><span class="keyword">= </span><span class="default">sqlite_fetch_array</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$tables </span><span class="keyword">!= </span><span class="string">''</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$tables </span><span class="keyword">as </span><span class="default">$table</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$table </span><span class="keyword">== </span><span class="default">$mytable</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="string">"TRUE"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="string">"FALSE"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="string">"FALSE"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
A function like this could be used to create the table if it's not already created, etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46651""></a>
  <div class="note">
   <strong class="user">j-pieper at NOSPAM dot web dot de</strong>
   <a href="#46651" class="date">19-Oct-2004 12:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to create a table in your database which should have an integer primary key, you cannot declare the row like this:<br />
<br />
id int(16) primary key<br />
or<br />
id integer(16) primary key<br />
<br />
When you declare it like this it could be that the id isn't auto increment. You have to declare it like this:<br />
<br />
id integer primary key</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45541""></a>
  <div class="note">
   <strong class="user">filip at filipdewaard dot com</strong>
   <a href="#45541" class="date">10-Sep-2004 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've written a short article about the (lack of) use of SQLite in-memory databases: <a href="http://www.filipdewaard.com/21_SQLite_inmemory_databases.html . Hopefully it will help somebody out there ;" rel="nofollow" target="_blank">http://www.filipdewaard.com/21_SQLite_inmemory_databases.html . Hopefully it will help somebody out there ;</a>)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44517""></a>
  <div class="note">
   <strong class="user">philip</strong>
   <a href="#44517" class="date">08-Aug-2004 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
SQLite tutorials:<br />
&nbsp;* <a href="http://www.zend.com/php5/articles/php5-sqlite.php" rel="nofollow" target="_blank">http://www.zend.com/php5/articles/php5-sqlite.php</a><br />
&nbsp;* <a href="http://www.zend.com/php5/abs/php101-9.php" rel="nofollow" target="_blank">http://www.zend.com/php5/abs/php101-9.php</a><br />
&nbsp;* <a href="http://www.oreilly.com/catalog/upgradephp5/chapter/ch04.pdf" rel="nofollow" target="_blank">http://www.oreilly.com/catalog/upgradephp5/chapter/ch04.pdf</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="44084""></a>
  <div class="note">
   <strong class="user">david at acz dot org</strong>
   <a href="#44084" class="date">15-Jul-2004 03:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use the PECL SQLite extension as a static (built into the executable) PHP module with PHP 4.&nbsp; Download the extension tarball and extract it.&nbsp; Move it to ext/sqlite in the PHP source directory.&nbsp; Delete configure and run buildconf.<br />
<br />
Example below.&nbsp; Change version numbers as appropriate:<br />
<br />
$ tar -xzvf php-4.3.8.tar.gz<br />
$ tar -xzvf SQLite-1.0.2.tgz<br />
$ mv SQLite-1.0.2 php-4.3.8/ext/sqlite<br />
$ cd php-4.3.8<br />
$ rm configure<br />
$ ./buildconf --force<br />
<br />
If everything worked, then you should now be able to build PHP with SQLite support:<br />
<br />
$ ./configure --help | grep sqlite<br />
&nbsp; --with-sqlite&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Include sqlite support<br />
<br />
I think this method will work for other PECL extensions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42358""></a>
  <div class="note">
   
   <a href="#42358" class="date">13-May-2004 04:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP5 compile time option --enable-sqlite-utf8<br />
<br />
See the note about buggy utf-8 support <a href="http://uk.php.net/manual/en/function.sqlite-libencoding.php" rel="nofollow" target="_blank">http://uk.php.net/manual/en/function.sqlite-libencoding.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41547""></a>
  <div class="note">
   <strong class="user">csaba at alum dot mit dot edu</strong>
   <a href="#41547" class="date">14-Apr-2004 05:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get the list of all the columns in a table (and associated information), PRAGMA is helpful (see <a href="http://sqlite.org/lang.html#pragma for details" rel="nofollow" target="_blank">http://sqlite.org/lang.html#pragma for details</a>):<br />
<br />
if (!($db=@sqlite_open("delme.db",0666,$sqliteerror))) die("Can't open database");<br />
@sqlite_query ($db, 'DROP TABLE foo;');<br />
sqlite_query($db, "CREATE TABLE foo (bar INTEGER PRIMARY KEY, baz VARCHAR(5));");<br />
$aTableStruct = sqlite_array_query($db, "PRAGMA table_info('foo');", SQLITE_ASSOC);<br />
for ($i=0,$aNames=array();$i&lt;sizeof($aTableStruct);++$i)<br />
&nbsp;&nbsp;&nbsp; $aNames[]=$aTableStruct[$i]['name'];<br />
var_dump ($aNames);&nbsp; &nbsp; // =&gt; ['bar', 'baz']<br />
<br />
Note also that if you want to use more than one database in the same connection using "ATTACH DATABASE ..." then you should supply the complete database filename.<br />
<br />
Csaba Gabor</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41141""></a>
  <div class="note">
   <strong class="user">cricket at djcricket dot com</strong>
   <a href="#41141" class="date">31-Mar-2004 06:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To elaborate on vpupkin at comcast dot net's post about the INSERT query problem, you will be unable to execute any manipulation queries (INSERT/UPDATE/DELETE/ect) on the SQLite database file unless the directory the SQLite database file resides in is writable by the webserver.<br />
<br />
The reason for this is because SQLite needs to write a lock file to the hard drive. After a processes finishes writting, it deletes the lock file. Other processes check for the lock file before writting to the SQLite database file and if present, delay writting until the lock file is no longer present.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39882""></a>
  <div class="note">
   <strong class="user">jlsalinas at spamsucks dot gmx dot net</strong>
   <a href="#39882" class="date">14-Feb-2004 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those looking for a function similar to mysql_list_tables, here you have:<br />
<br />
if (! function_exists ('sqlite_list_tables')) {<br />
&nbsp;&nbsp;&nbsp; function sqlite_list_tables (&amp;$dblink) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $tables = array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sql = "SELECT name FROM sqlite_master WHERE (type = 'table')";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($res = sqlite_query ($dblink, $sql)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (sqlite_has_more($res)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tables[] = sqlite_fetch_single($res);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $tables;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
And a related funtion, to test if a given table exists:<br />
<br />
if (! function_exists ('sqlite_table_exists')) {<br />
&nbsp;&nbsp;&nbsp; function sqlite_table_exists (&amp;$dblink, $table) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $sql = "SELECT count(name) FROM sqlite_master WHERE ((type = 'table') and (name = '$table'))";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($res = sqlite_query ($dblink, $sql)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return sqlite_fetch_single($res) &gt; 0;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return false; // or throw exception<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
Of course it would be preferable to have these functions included in the library, to avoid potential changes internal to SQLite; but we'll have to stick to this method until then.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37875""></a>
  <div class="note">
   <strong class="user">vpupkin at comcast dot net</strong>
   <a href="#37875" class="date">01-Dec-2003 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you are going to send INSERT queries, you will need to make the folder, where you put your "file.db", writable by a web server user, otherwise you'll receive error message - "Unable to open database . . . ". File permissions are not enough (phpinfo - SQLite Lib 2.8.3)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37655""></a>
  <div class="note">
   <strong class="user">Minots Estich &lt;minots  at  D0X  dot  de&gt;</strong>
   <a href="#37655" class="date">22-Nov-2003 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you gone in trouble while/with installation of sqlite,<br />
you can try the installation steps I've done at<br />
RedHat9 with PHP4.3.4 and Apache 1.3.28<br />
via the Linux shell:<br />
<br />
# wget <a href="http://pecl.php.net/get/SQLite-1.0.tgz" rel="nofollow" target="_blank">http://pecl.php.net/get/SQLite-1.0.tgz</a><br />
# tar xzf SQLite-1.0.tgz<br />
# cd sqlite<br />
# export PHP_PREFIX="/usr"<br />
# $PHP_PREFIX/bin/phpize<br />
# ./configure<br />
# make<br />
# make install<br />
<br />
After that add following to php.ini and restart Apache:<br />
<br />
[sqlite]<br />
extension="sqlite.so"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37243""></a>
  <div class="note">
   <strong class="user">ng4rrjanbiah at rediffmail dot com</strong>
   <a href="#37243" class="date">07-Nov-2003 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very nice MS PowerPoint presentation titled "SQLite and PHP" (author: Wez Furlong) can be downloaded at <a href="http://www.php.net/~wez/SQLite_and_PHP.ppt [134 KB]" rel="nofollow" target="_blank">http://www.php.net/~wez/SQLite_and_PHP.ppt [134 KB]</a><br />
<br />
HTH,<br />
R. Rajesh Jeba Anbiah</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="sqlite.constants.html">定義済の定数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.sqlite-array-query.html">sqlite_array_query</a></div>
 <div class="up"><a href="book.sqlite.html">SQLite</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
