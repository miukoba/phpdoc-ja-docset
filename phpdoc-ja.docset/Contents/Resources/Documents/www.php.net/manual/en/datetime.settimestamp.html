<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Unix タイムスタンプを用いて日付と時刻を設定する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.settime.html">DateTime::setTime</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.settimezone.html">DateTime::setTimezone</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="datetime.settimestamp" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::setTimestamp</h1>
  <h1 class="refname">date_timestamp_set</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0)</p><p class="refpurpose"><span class="refname">DateTime::setTimestamp</span> -- <span class="refname">date_timestamp_set</span> &mdash; <span class="dc-title">Unix タイムスタンプを用いて日付と時刻を設定する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.settimestamp-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><strong>DateTime::setTimestamp</strong></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$unixtimestamp</code></span>
   )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><a href="function.date-timestamp-set.html" class="methodname">date_timestamp_set</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <code class="parameter">$object</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$unixtimestamp</code></span>
   )</div>

  <p class="para rdfs-comment">
   Unix タイムスタンプを用いて日付と時刻を設定します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.settimestamp-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   <dt>
<span class="term"><em><code class="parameter">object</code></em></span>
<dd>
<p class="para">手続き型のみ: 
 <span class="function"><a href="function.date-create.html" class="function">date_create()</a></span> が返す <a href="class.datetime.html" class="classname">DateTime</a> オブジェクト。
この関数は、このオブジェクトを変更します。</p></dd>
</dt>

   <dt>

    <span class="term"><em><code class="parameter">unixtimestamp</code></em></span>
    <dd>

     <p class="para">
      Unix タイムスタンプ。
     </p>
    </dd>

   </dt>

  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.settimestamp-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   メソッドチェインに使う <a href="class.datetime.html" class="classname">DateTime</a> オブジェクトを返します。失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.settimestamp-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-2258">
   <p><strong>例1  <span class="function"><strong>DateTime::setTimestamp()</strong></span> の例</strong></p>
   <div class="example-contents"><p>オブジェクト指向型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'U&nbsp;=&nbsp;Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setTimestamp</span><span style="color: #007700">(</span><span style="color: #0000BB">1171502725</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'U&nbsp;=&nbsp;Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>手続き型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">();<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'U&nbsp;=&nbsp;Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">date_timestamp_set</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1171502725</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'U&nbsp;=&nbsp;Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
1272508903 = 2010-04-28 22:41:43
1171502725 = 2007-02-14 20:25:25
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 notes" id="refsect1-datetime.settimestamp-notes">
  <h3 class="title">注意</h3>
  <p class="para">
   PHP 5.2 を使っている場合は、
   Unix タイムスタンプ形式を使って新しい <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> オブジェクトを作る方法もあります。
   以下の例を参照ください。
  </p>
  <div class="example" id="example-2259">
   <p><strong>例2 
    PHP 5.2 における  <span class="function"><strong>DateTime::setTimestamp()</strong></span> のもうひとつの方法
   </strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ts&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1171502725</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">"@</span><span style="color: #0000BB">$ts</span><span style="color: #DD0000">"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'U&nbsp;=&nbsp;Y-m-d&nbsp;H:i:s'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
1171502725 = 2007-02-14 20:25:25
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.settimestamp-seealso">
  <h3 class="title">参考</h3>
  <ul class="simplelist">
   <li class="member"> <span class="function"><a href="datetime.gettimestamp.html" class="function" rel="rdfs-seeAlso">DateTime::getTimestamp()</a> - Unix タイムスタンプを取得する</span></li>
  </ul>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112932""></a>
  <div class="note">
   <strong class="user">Arnb</strong>
   <a href="#112932" class="date">08-Aug-2013 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you need to manipulate a unix timestamp like field (seconds since 1970-01-01) that may be greater than the drop dead date of 2038-01-19.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">secs2date</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$secs</span><span class="keyword">&gt;</span><span class="default">2147472000</span><span class="keyword">)&nbsp; &nbsp; </span><span class="comment">//2038-01-19 expire dt<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setTimestamp</span><span class="keyword">(</span><span class="default">2147472000</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">=</span><span class="default">$secs</span><span class="keyword">-</span><span class="default">2147472000</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">add</span><span class="keyword">(new </span><span class="default">DateInterval</span><span class="keyword">(</span><span class="string">'PT'</span><span class="keyword">.</span><span class="default">$s</span><span class="keyword">.</span><span class="string">'S'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setTimestamp</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
function </span><span class="default">date2secs</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$datebeg</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$datebeg</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs</span><span class="keyword">=</span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%a'</span><span class="keyword">) * (</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">);&nbsp; </span><span class="comment">//total days<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs</span><span class="keyword">+=</span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%h'</span><span class="keyword">) * (</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">);&nbsp; &nbsp;&nbsp; </span><span class="comment">//hours<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs</span><span class="keyword">+=</span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%i'</span><span class="keyword">) * </span><span class="default">60</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//minutes<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$secs</span><span class="keyword">+=</span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%s'</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//seconds<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$secs</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">$datebeg </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1970-01-01'</span><span class="keyword">);<br />
</span><span class="default">$date</span><span class="keyword">=new </span><span class="default">dateTime</span><span class="keyword">();<br />
<br />
</span><span class="default">$secs</span><span class="keyword">=</span><span class="default">2017472000</span><span class="keyword">;&nbsp; </span><span class="comment">//2033-12-06 08:53:20<br />
</span><span class="default">secs2date</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">);<br />
</span><span class="default">$dt</span><span class="keyword">=</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">);<br />
echo </span><span class="default">$dt</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$sec2</span><span class="keyword">=</span><span class="default">date2secs</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$datebeg</span><span class="keyword">);<br />
echo </span><span class="string">'(1) '</span><span class="keyword">,</span><span class="default">$sec2</span><span class="keyword">,</span><span class="string">'***'</span><span class="keyword">,</span><span class="default">$secs</span><span class="keyword">,</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$secs</span><span class="keyword">=</span><span class="default">2397472000</span><span class="keyword">; </span><span class="comment">//2045-12-21 12:26:40<br />
</span><span class="default">secs2date</span><span class="keyword">(</span><span class="default">$secs</span><span class="keyword">,</span><span class="default">$date</span><span class="keyword">);<br />
</span><span class="default">$dt</span><span class="keyword">=</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">);<br />
echo </span><span class="default">$dt</span><span class="keyword">.</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
</span><span class="default">$sec2</span><span class="keyword">=</span><span class="default">date2secs</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$datebeg</span><span class="keyword">);<br />
echo </span><span class="string">'(2) '</span><span class="keyword">,</span><span class="default">$sec2</span><span class="keyword">,</span><span class="string">'***'</span><span class="keyword">,</span><span class="default">$secs</span><span class="keyword">,</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="103261""></a>
  <div class="note">
   <strong class="user">linblow at hotmail dot fr</strong>
   <a href="#103261" class="date">04-Apr-2011 09:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If your PHP version is lower than 5.3 then you can use this class to be able to use the functions "setTimestamp" and "getTimestamp":<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">MyDateTime </span><span class="keyword">extends </span><span class="default">DateTime<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">setTimestamp</span><span class="keyword">( </span><span class="default">$timestamp </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">getdate</span><span class="keyword">( ( int ) </span><span class="default">$timestamp </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">setDate</span><span class="keyword">( </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'year'</span><span class="keyword">] , </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'mon'</span><span class="keyword">] , </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'mday'</span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">setTime</span><span class="keyword">( </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'hours'</span><span class="keyword">] , </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'minutes'</span><span class="keyword">] , </span><span class="default">$date</span><span class="keyword">[</span><span class="string">'seconds'</span><span class="keyword">] );<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">getTimestamp</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'U' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$date </span><span class="keyword">= new </span><span class="default">MyDateTime</span><span class="keyword">();<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setTimestamp</span><span class="keyword">( </span><span class="default">$someTimestamp </span><span class="keyword">);<br />
<br />
echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">'d/m/Y H:i:s' </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99853""></a>
  <div class="note">
   <strong class="user">Use Web Form at Aouie.net</strong>
   <a href="#99853" class="date">10-Sep-2010 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When the exact time is important then it is important to note the difference between this and the UnixTimeStamp. The function will change the timestamp if necessary to take into account the daylight savings time.<br />
e.g. Working with the 'Europe/London' timezone and setting the DateTime object to a timestamp of 1288486753 will result in the function automatically altering it to 1288490353.<br />
This is because it is taking the fall time instead of the summer time (they will both be Sun, 31-Oct-2010 01:X:Y (I didn't check the hour and minute)).<br />
Sincerely,<br />
Aouie</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.settime.html">DateTime::setTime</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.settimezone.html">DateTime::setTimezone</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
