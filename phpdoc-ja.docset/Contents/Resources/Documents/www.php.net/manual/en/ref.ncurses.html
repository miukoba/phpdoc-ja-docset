<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Ncurses 関数</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ncurses.mouseconsts.html">マウス</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ncurses-addch.html">ncurses_addch</a></div>
 <div class="up"><a href="book.ncurses.html">Ncurses</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.ncurses" class="reference">
 <h1 class="title">Ncurses 関数</h1>
  
 

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.ncurses-addch.html">ncurses_addch</a> — 現在の位置に文字を追加し、カーソルを進める</li><li><a href="function.ncurses-addchnstr.html">ncurses_addchnstr</a> — 現在の位置に指定した長さの属性付き文字列を追加する</li><li><a href="function.ncurses-addchstr.html">ncurses_addchstr</a> — 現在の位置に属性付き文字列を追加する</li><li><a href="function.ncurses-addnstr.html">ncurses_addnstr</a> — 現在の位置に、指定した長さの文字列を追加する</li><li><a href="function.ncurses-addstr.html">ncurses_addstr</a> — 現在の位置にテキストを出力する</li><li><a href="function.ncurses-assume-default-colors.html">ncurses_assume_default_colors</a> — カラー 0 のデフォルト色を定義する</li><li><a href="function.ncurses-attroff.html">ncurses_attroff</a> — 指定した属性を無効とする</li><li><a href="function.ncurses-attron.html">ncurses_attron</a> — 指定した属性を有効にする</li><li><a href="function.ncurses-attrset.html">ncurses_attrset</a> — 指定した属性を設定する</li><li><a href="function.ncurses-baudrate.html">ncurses_baudrate</a> — 端末のボーレートを返す</li><li><a href="function.ncurses-beep.html">ncurses_beep</a> — 端末のビープを鳴らす</li><li><a href="function.ncurses-bkgd.html">ncurses_bkgd</a> — 端末画面の背景属性を設定する</li><li><a href="function.ncurses-bkgdset.html">ncurses_bkgdset</a> — 画面背景を制御する</li><li><a href="function.ncurses-border.html">ncurses_border</a> — 属性付きの文字で画面周囲に境界を描画する</li><li><a href="function.ncurses-bottom-panel.html">ncurses_bottom_panel</a> — パネルをスタックの最下部に移動する</li><li><a href="function.ncurses-can-change-color.html">ncurses_can_change_color</a> — 端末の色を変更可能かどうか確認する</li><li><a href="function.ncurses-cbreak.html">ncurses_cbreak</a> — 入力のバッファリングを変更する</li><li><a href="function.ncurses-clear.html">ncurses_clear</a> — スクリーンをクリアする</li><li><a href="function.ncurses-clrtobot.html">ncurses_clrtobot</a> — 現在位置から最下部までスクリーンをクリアする</li><li><a href="function.ncurses-clrtoeol.html">ncurses_clrtoeol</a> — 現在位置から行末までスクリーンをクリアする</li><li><a href="function.ncurses-color-content.html">ncurses_color_content</a> — 色の RGB 値を取得する</li><li><a href="function.ncurses-color-set.html">ncurses_color_set</a> — 前景/背景色を設定する</li><li><a href="function.ncurses-curs-set.html">ncurses_curs_set</a> — カーソル状態を設定する</li><li><a href="function.ncurses-def-prog-mode.html">ncurses_def_prog_mode</a> — 端末(プログラム)モードを保存する</li><li><a href="function.ncurses-def-shell-mode.html">ncurses_def_shell_mode</a> — 端末(シェル)モードを保存する</li><li><a href="function.ncurses-define-key.html">ncurses_define_key</a> — キーコードを定義する</li><li><a href="function.ncurses-del-panel.html">ncurses_del_panel</a> — パネルをスタックから取り除き、削除する
   (しかし、関連付けられているウィンドウは削除しない)</li><li><a href="function.ncurses-delay-output.html">ncurses_delay_output</a> — パディング文字を用いて端末出力を遅延させる</li><li><a href="function.ncurses-delch.html">ncurses_delch</a> — 現在位置の文字を削除し、残った部分を左に移動する</li><li><a href="function.ncurses-deleteln.html">ncurses_deleteln</a> — 現在位置の行を削除し、残りの部分を上に上げる</li><li><a href="function.ncurses-delwin.html">ncurses_delwin</a> — ncurses ウインドウを削除する</li><li><a href="function.ncurses-doupdate.html">ncurses_doupdate</a> — 準備中の全ての出力を書き込み、端末をリフレッシュする</li><li><a href="function.ncurses-echo.html">ncurses_echo</a> — キーボード入力のエコーを有効とする</li><li><a href="function.ncurses-echochar.html">ncurses_echochar</a> — リフレッシュを行いつつ 1 文字出力する</li><li><a href="function.ncurses-end.html">ncurses_end</a> — ncurses を終了し、画面を消去する</li><li><a href="function.ncurses-erase.html">ncurses_erase</a> — 端末画面を消去する</li><li><a href="function.ncurses-erasechar.html">ncurses_erasechar</a> — 現在の erase 文字を返す</li><li><a href="function.ncurses-filter.html">ncurses_filter</a> — iniscr() および newterm() の LINES を 1 に設定する</li><li><a href="function.ncurses-flash.html">ncurses_flash</a> — 端末画面をフラッシュする(ビジュアルベル)</li><li><a href="function.ncurses-flushinp.html">ncurses_flushinp</a> — キーボード入力バッファをフラッシュする</li><li><a href="function.ncurses-getch.html">ncurses_getch</a> — キーボードから 1 文字読み込む</li><li><a href="function.ncurses-getmaxyx.html">ncurses_getmaxyx</a> — ウィンドウの大きさを返す</li><li><a href="function.ncurses-getmouse.html">ncurses_getmouse</a> — マウスイベントを読みこむ</li><li><a href="function.ncurses-getyx.html">ncurses_getyx</a> — ウィンドウ内の現在のカーソル位置を返す</li><li><a href="function.ncurses-halfdelay.html">ncurses_halfdelay</a> — 端末をハーフディレイモードにする</li><li><a href="function.ncurses-has-colors.html">ncurses_has_colors</a> — カラー端末かどうか確認する</li><li><a href="function.ncurses-has-ic.html">ncurses_has_ic</a> — 挿入/削除機能の有無を確認する</li><li><a href="function.ncurses-has-il.html">ncurses_has_il</a> — 行挿入/削除機能の有無を確認する</li><li><a href="function.ncurses-has-key.html">ncurses_has_key</a> — 端末キーボードにおいてファンクションキーの有無を調べる</li><li><a href="function.ncurses-hide-panel.html">ncurses_hide_panel</a> — パネルをスタックから取り除き、見えなくする</li><li><a href="function.ncurses-hline.html">ncurses_hline</a> — 現在位置に属性付きの文字を用いて最大 n 文字長の線を水平に描画する</li><li><a href="function.ncurses-inch.html">ncurses_inch</a> — 現在位置の文字と属性を取得する</li><li><a href="function.ncurses-init-color.html">ncurses_init_color</a> — 端末の色を定義する</li><li><a href="function.ncurses-init-pair.html">ncurses_init_pair</a> — 色ペアを定義する</li><li><a href="function.ncurses-init.html">ncurses_init</a> — ncurses を初期化する</li><li><a href="function.ncurses-insch.html">ncurses_insch</a> — 文字を挿入し、現在位置にある文字を含む残りの行を移動する</li><li><a href="function.ncurses-insdelln.html">ncurses_insdelln</a> — 現在の行の後に複数の行を挿入し、スクロールダウンする
   (負の数を指定すると削除し、スクロールアップする)</li><li><a href="function.ncurses-insertln.html">ncurses_insertln</a> — 行を挿入し、残りの部分をスクロールダウンする</li><li><a href="function.ncurses-insstr.html">ncurses_insstr</a> — 現在位置に文字列を挿入し、残りの行を右に移動する</li><li><a href="function.ncurses-instr.html">ncurses_instr</a> — 端末画面から文字列を読み込む</li><li><a href="function.ncurses-isendwin.html">ncurses_isendwin</a> — Ncurses が endwin モードの場合、通常の画面出力が実行可能</li><li><a href="function.ncurses-keyok.html">ncurses_keyok</a> — キーコードを有効または無効にする</li><li><a href="function.ncurses-keypad.html">ncurses_keypad</a> — キーパッドを on あるいは off にする</li><li><a href="function.ncurses-killchar.html">ncurses_killchar</a> — 現在の行削除文字を返す</li><li><a href="function.ncurses-longname.html">ncurses_longname</a> — 端末の説明を返す</li><li><a href="function.ncurses-meta.html">ncurses_meta</a> — 8 ビットのメタキー情報を有効/無効にする</li><li><a href="function.ncurses-mouse-trafo.html">ncurses_mouse_trafo</a> — 座標を変換する</li><li><a href="function.ncurses-mouseinterval.html">ncurses_mouseinterval</a> — マウスボタンクリックのタイムアウトを設定する</li><li><a href="function.ncurses-mousemask.html">ncurses_mousemask</a> — マウスオプションを設定する</li><li><a href="function.ncurses-move-panel.html">ncurses_move_panel</a> — 左上が [startx, starty] となるようにパネルを移動する</li><li><a href="function.ncurses-move.html">ncurses_move</a> — 出力位置を移動する</li><li><a href="function.ncurses-mvaddch.html">ncurses_mvaddch</a> — 現在位置を移動し、文字を追加する</li><li><a href="function.ncurses-mvaddchnstr.html">ncurses_mvaddchnstr</a> — 位置を移動し、指定長の属性付きの文字列を追加する</li><li><a href="function.ncurses-mvaddchstr.html">ncurses_mvaddchstr</a> — 位置を移動し、属性付きの文字列を追加する</li><li><a href="function.ncurses-mvaddnstr.html">ncurses_mvaddnstr</a> — 位置を移動し、指定長の文字列を追加する</li><li><a href="function.ncurses-mvaddstr.html">ncurses_mvaddstr</a> — 位置を移動し、文字列を追加する</li><li><a href="function.ncurses-mvcur.html">ncurses_mvcur</a> — 直ちにカーソルを移動する</li><li><a href="function.ncurses-mvdelch.html">ncurses_mvdelch</a> — 位置を移動し、文字を削除、行の残りを左シフトする</li><li><a href="function.ncurses-mvgetch.html">ncurses_mvgetch</a> — 位置を移動し、新しい位置で文字を得る</li><li><a href="function.ncurses-mvhline.html">ncurses_mvhline</a> — 位置を新しく設定し、属性付きの文字を用いて最大n文字の水平線を描画</li><li><a href="function.ncurses-mvinch.html">ncurses_mvinch</a> — 位置を移動し、新しい位置の属性付きの文字を取得する</li><li><a href="function.ncurses-mvvline.html">ncurses_mvvline</a> — 位置を新しく設定し、属性付きの文字を用いて最大 n 文字の垂直線を描画する</li><li><a href="function.ncurses-mvwaddstr.html">ncurses_mvwaddstr</a> — ウインドウの新規位置に文字列を追加する</li><li><a href="function.ncurses-napms.html">ncurses_napms</a> — スリープ</li><li><a href="function.ncurses-new-panel.html">ncurses_new_panel</a> — 新しいパネルを作成し、それをウィンドウに関連づける</li><li><a href="function.ncurses-newpad.html">ncurses_newpad</a> — 新しいパッド (window) を作成する</li><li><a href="function.ncurses-newwin.html">ncurses_newwin</a> — 新規ウインドウを作成する</li><li><a href="function.ncurses-nl.html">ncurses_nl</a> — 改行と復改/ラインフィードを変換する</li><li><a href="function.ncurses-nocbreak.html">ncurses_nocbreak</a> — 端末を cooked モードに変更する</li><li><a href="function.ncurses-noecho.html">ncurses_noecho</a> — キーボード入力エコーを無効にする</li><li><a href="function.ncurses-nonl.html">ncurses_nonl</a> — 改行と復改/ラインフィードを変換しない</li><li><a href="function.ncurses-noqiflush.html">ncurses_noqiflush</a> — シグナル文字のフラッシュを無効とする</li><li><a href="function.ncurses-noraw.html">ncurses_noraw</a> — 端末を raw モード以外に変更する</li><li><a href="function.ncurses-pair-content.html">ncurses_pair_content</a> — 色ペアの前景色と背景色を取得する</li><li><a href="function.ncurses-panel-above.html">ncurses_panel_above</a> — パネルの上のパネルを返す</li><li><a href="function.ncurses-panel-below.html">ncurses_panel_below</a> — パネルの下のパネルを返す</li><li><a href="function.ncurses-panel-window.html">ncurses_panel_window</a> — パネルに関連付けられたウィンドウを返す</li><li><a href="function.ncurses-pnoutrefresh.html">ncurses_pnoutrefresh</a> — パッドから仮想画面にリージョンをコピーする</li><li><a href="function.ncurses-prefresh.html">ncurses_prefresh</a> — パッドから仮想画面にリージョンをコピーする</li><li><a href="function.ncurses-putp.html">ncurses_putp</a> — パディング情報を文字列に適用し、それを出力する</li><li><a href="function.ncurses-qiflush.html">ncurses_qiflush</a> — シグナル文字のフラッシュを有効とする</li><li><a href="function.ncurses-raw.html">ncurses_raw</a> — 端末を raw モードに変更する</li><li><a href="function.ncurses-refresh.html">ncurses_refresh</a> — 画面をリフレッシュする</li><li><a href="function.ncurses-replace-panel.html">ncurses_replace_panel</a> — パネルに関連付けられたウィンドウを置き換える</li><li><a href="function.ncurses-reset-prog-mode.html">ncurses_reset_prog_mode</a> — def_prog_mode で保存したプログラムモードをリセットする</li><li><a href="function.ncurses-reset-shell-mode.html">ncurses_reset_shell_mode</a> — def_shell_mode で保存したシェルモードをリセットする</li><li><a href="function.ncurses-resetty.html">ncurses_resetty</a> — 保存した端末モードに復帰する</li><li><a href="function.ncurses-savetty.html">ncurses_savetty</a> — 端末の状態を保存する</li><li><a href="function.ncurses-scr-dump.html">ncurses_scr_dump</a> — 画面の内容をファイルにダンプする</li><li><a href="function.ncurses-scr-init.html">ncurses_scr_init</a> — ファイルダンプから画面を初期化する</li><li><a href="function.ncurses-scr-restore.html">ncurses_scr_restore</a> — ファイルダンプから画面を復帰する</li><li><a href="function.ncurses-scr-set.html">ncurses_scr_set</a> — ファイルダンプから画面を継承する</li><li><a href="function.ncurses-scrl.html">ncurses_scrl</a> — 現在位置を変更せずに画面の内容をスクロールアップまたはダウンする</li><li><a href="function.ncurses-show-panel.html">ncurses_show_panel</a> — 不可視のパネルをスタックの最上部に置き、見えるようにする</li><li><a href="function.ncurses-slk-attr.html">ncurses_slk_attr</a> — 現在のソフトラベルキー属性を返す</li><li><a href="function.ncurses-slk-attroff.html">ncurses_slk_attroff</a> — ソフトファンクションキーラベルの指定した属性を無効にする</li><li><a href="function.ncurses-slk-attron.html">ncurses_slk_attron</a> — ソフトファンクションキーラベルの指定した属性を有効にする</li><li><a href="function.ncurses-slk-attrset.html">ncurses_slk_attrset</a> — ソフトファンクションキーラベルに、指定した属性を設定する</li><li><a href="function.ncurses-slk-clear.html">ncurses_slk_clear</a> — 画面からソフトラベルをクリアする</li><li><a href="function.ncurses-slk-color.html">ncurses_slk_color</a> — ソフトラベルキーの色を設定する</li><li><a href="function.ncurses-slk-init.html">ncurses_slk_init</a> — ソフトラベルキー関数を初期化する</li><li><a href="function.ncurses-slk-noutrefresh.html">ncurses_slk_noutrefresh</a> — 仮想画面にソフトラベルキーをコピーする</li><li><a href="function.ncurses-slk-refresh.html">ncurses_slk_refresh</a> — ソフトラベルキーを画面にコピーする</li><li><a href="function.ncurses-slk-restore.html">ncurses_slk_restore</a> — ソフトラベルキーを復帰する</li><li><a href="function.ncurses-slk-set.html">ncurses_slk_set</a> — ファンクションキーラベルを設定する</li><li><a href="function.ncurses-slk-touch.html">ncurses_slk_touch</a> — ncurses_slk_noutrefresh を実行する際に強制的に出力する</li><li><a href="function.ncurses-standend.html">ncurses_standend</a> — 'standout' 属性の使用を停止する</li><li><a href="function.ncurses-standout.html">ncurses_standout</a> — 'standout' 属性の使用を開始する</li><li><a href="function.ncurses-start-color.html">ncurses_start_color</a> — 色機能を初期化する</li><li><a href="function.ncurses-termattrs.html">ncurses_termattrs</a> — 端末でサポートされる全ての属性フラグの論理和を返す</li><li><a href="function.ncurses-termname.html">ncurses_termname</a> — 端末の(簡略)名を返す</li><li><a href="function.ncurses-timeout.html">ncurses_timeout</a> — 特別なキーシーケンスのタイムアウトを設定する</li><li><a href="function.ncurses-top-panel.html">ncurses_top_panel</a> — 可視パネルをスタックの最上部に移動する</li><li><a href="function.ncurses-typeahead.html">ncurses_typeahead</a> — typeahead 確認用に別のファイル記述子を指定する</li><li><a href="function.ncurses-ungetch.html">ncurses_ungetch</a> — 入力ストリームに 1 文字戻す</li><li><a href="function.ncurses-ungetmouse.html">ncurses_ungetmouse</a> — マウスイベントをキューにプッシュする</li><li><a href="function.ncurses-update-panels.html">ncurses_update_panels</a> — 仮想画面を再描画し、スタック内のパネルとの関係を反映させる</li><li><a href="function.ncurses-use-default-colors.html">ncurses_use_default_colors</a> — 端末のデフォルト色をカラー ID -1 に割り付ける</li><li><a href="function.ncurses-use-env.html">ncurses_use_env</a> — 端末の大きさに関する環境情報の使用を制御する</li><li><a href="function.ncurses-use-extended-names.html">ncurses_use_extended_names</a> — terminfo 記述において拡張名の使用を制御する</li><li><a href="function.ncurses-vidattr.html">ncurses_vidattr</a> — video attribute モードで、端末上に文字列を表示する</li><li><a href="function.ncurses-vline.html">ncurses_vline</a> — 現在位置に最大 n 文字の属性付きの文字を用いて垂直線を描画する</li><li><a href="function.ncurses-waddch.html">ncurses_waddch</a> — ウィンドウ内の現在位置に文字を追加し、カーソルを進める</li><li><a href="function.ncurses-waddstr.html">ncurses_waddstr</a> — ウィンドウ内の現在位置にテキストを出力する</li><li><a href="function.ncurses-wattroff.html">ncurses_wattroff</a> — ウィンドウの属性をオフにする</li><li><a href="function.ncurses-wattron.html">ncurses_wattron</a> — ウィンドウの属性をオンにする</li><li><a href="function.ncurses-wattrset.html">ncurses_wattrset</a> — ウィンドウの属性を設定する</li><li><a href="function.ncurses-wborder.html">ncurses_wborder</a> — 属性文字を使用してウィンドウの周囲に線を描画する</li><li><a href="function.ncurses-wclear.html">ncurses_wclear</a> — ウィンドウをクリアする</li><li><a href="function.ncurses-wcolor-set.html">ncurses_wcolor_set</a> — ウィンドウの色の組み合わせを設定する</li><li><a href="function.ncurses-werase.html">ncurses_werase</a> — ウィンドウを消去する</li><li><a href="function.ncurses-wgetch.html">ncurses_wgetch</a> — キーボート (ウィンドウ) から文字を読み込む</li><li><a href="function.ncurses-whline.html">ncurses_whline</a> — 指定した属性文字を用いて、最大 n 文字分の長さの水平線を
   ウィンドウに描画する</li><li><a href="function.ncurses-wmouse-trafo.html">ncurses_wmouse_trafo</a> — ウィンドウ/標準画面の座標系を変換する</li><li><a href="function.ncurses-wmove.html">ncurses_wmove</a> — ウィンドウの出力位置を移動する</li><li><a href="function.ncurses-wnoutrefresh.html">ncurses_wnoutrefresh</a> — ウィンドウを仮想画面にコピーする</li><li><a href="function.ncurses-wrefresh.html">ncurses_wrefresh</a> — 端末画面のウインドウをリフレッシュする</li><li><a href="function.ncurses-wstandend.html">ncurses_wstandend</a> — ウィンドウの standout モードを終了する</li><li><a href="function.ncurses-wstandout.html">ncurses_wstandout</a> — ウィンドウの standout モードに入る</li><li><a href="function.ncurses-wvline.html">ncurses_wvline</a> — 指定した属性文字を用いて、最大 n 文字分の長さの垂直線を
   ウィンドウに描画する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="61397""></a>
  <div class="note">
   <strong class="user">g_a at freemail dot deletethispart dot hu</strong>
   <a href="#61397" class="date">02-Feb-2006 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To determine screen width and height without any external (OS specific) commands, I use:<br />
<br />
<span class="default">&lt;?php<br />
ncurses_init</span><span class="keyword">();<br />
</span><span class="default">$fullscreen </span><span class="keyword">= </span><span class="default">ncurses_newwin </span><span class="keyword">( </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">ncurses_getmaxyx</span><span class="keyword">(</span><span class="default">$fullscreen</span><span class="keyword">,&amp;</span><span class="default">$a</span><span class="keyword">,&amp;</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">ncurses_end</span><span class="keyword">();<br />
echo </span><span class="string">"Width:</span><span class="default">$b</span><span class="string">\nHeight:</span><span class="default">$a</span><span class="string">\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58477""></a>
  <div class="note">
   <strong class="user">krzysztof dot gorzelak at gmail dot com</strong>
   <a href="#58477" class="date">05-Nov-2005 11:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a small example, how to use STDIN to read keys combinations in console.<br />
<br />
$stdin = fopen('php://stdin', 'r');<br />
stream_set_timeout($stdin, 1);<br />
while (1) {<br />
&nbsp; $temp="";<br />
&nbsp;&nbsp;&nbsp; while (1) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(stream_select($read = array($stdin), $write = NULL, $except = NULL, 0))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $temp .= ord(fgetc($stdin));<br />
&nbsp;&nbsp; &nbsp;&nbsp; else break;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; // F1 : $temp == 27914949126<br />
&nbsp;&nbsp;&nbsp; // ALT+F1 : $temp = 2727914949126<br />
&nbsp;&nbsp;&nbsp; // ....<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; usleep("50000");<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43305""></a>
  <div class="note">
   <strong class="user">kermodebear at kermodebear dot org</strong>
   <a href="#43305" class="date">17-Jun-2004 09:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An implementation of a scrolling selection box:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">ncurses_menu_select</span><span class="keyword">( </span><span class="default">$options</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">, </span><span class="default">$max_height </span><span class="keyword">= </span><span class="default">7</span><span class="keyword">, </span><span class="default">$max_width </span><span class="keyword">= </span><span class="default">20</span><span class="keyword">, </span><span class="default">$y </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">= </span><span class="default">2 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Size inside of borders<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">$max_height </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$width&nbsp; </span><span class="keyword">= </span><span class="default">$max_width&nbsp; </span><span class="keyword">- </span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Number of options<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$num_options </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">( </span><span class="default">$options </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Trim all values to fit<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach( </span><span class="default">$options </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$key </span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Create Window<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$menu_window </span><span class="keyword">= </span><span class="default">ncurses_newwin</span><span class="keyword">( </span><span class="default">$max_height</span><span class="keyword">, </span><span class="default">$max_width</span><span class="keyword">, </span><span class="default">$y</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wborder</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Initialize Window<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// Currently selected<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="comment">// Position in list<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$topitem </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="comment">// Top menu item<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for ( </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">min</span><span class="keyword">( </span><span class="default">$height</span><span class="keyword">, </span><span class="default">$num_options </span><span class="keyword">); </span><span class="default">$a</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$current </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattron</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$a </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattroff</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$a </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">'*' </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wrefresh</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Loop until a selection is made<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">while( ! </span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$key </span><span class="keyword">= </span><span class="default">ncurses_getch</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">), array( </span><span class="default">13</span><span class="keyword">, </span><span class="default">10 </span><span class="keyword">) ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$key </span><span class="keyword">== </span><span class="default">NCURSES_KEY_UP </span><span class="keyword">&amp;&amp; </span><span class="default">$current </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if ( </span><span class="default">$key </span><span class="keyword">== </span><span class="default">NCURSES_KEY_DOWN </span><span class="keyword">&amp;&amp; </span><span class="default">$current </span><span class="keyword">&lt; </span><span class="default">$num_options </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">+= </span><span class="default">$move</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">+= </span><span class="default">$move</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If we scroll off the window, redraw items.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( </span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$position </span><span class="keyword">&gt; </span><span class="default">$height </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$position </span><span class="keyword">&lt; </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$position </span><span class="keyword">= </span><span class="default">$height</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$topitem </span><span class="keyword">+= </span><span class="default">$move</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for ( </span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">&lt;= </span><span class="default">$height</span><span class="keyword">; </span><span class="default">$a</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">str_repeat</span><span class="keyword">( </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$width </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$position </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattron</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$topitem </span><span class="keyword">+ </span><span class="default">$a </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattroff</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$topitem </span><span class="keyword">+ </span><span class="default">$a </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else { </span><span class="comment">// Just update changed items<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattron</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">$position</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattroff</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">$position </span><span class="keyword">- </span><span class="default">$move</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$options</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">- </span><span class="default">$move </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Update 'scroll bar dot'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wborder</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dot_position </span><span class="keyword">= </span><span class="default">round </span><span class="keyword">( ( </span><span class="default">$current </span><span class="keyword">/ </span><span class="default">$num_options </span><span class="keyword">) * ( </span><span class="default">$height </span><span class="keyword">- </span><span class="default">1 </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$dot_position</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="string">'*' </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wrefresh</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">];<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43304""></a>
  <div class="note">
   <strong class="user">kermodebear at kermodebear dot org</strong>
   <a href="#43304" class="date">17-Jun-2004 07:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Not calling ncurses_end() can (will) cause issues with terminals. Although registering a shutdown function which includes ncurses_end() may help, sometimes things go awry and you're stuck with a terminal that is acting in strange ways. <br />
<br />
This can be fixed! *NIX systems (FreeBSD, Linux, UNIX, et al.) usually support the 'reset' command which resets the terminal settings and allows you to get things back to normal.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43303""></a>
  <div class="note">
   <strong class="user">kermodebear at kermodebear dot org</strong>
   <a href="#43303" class="date">17-Jun-2004 07:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function that takes an associative array, presents a menu in a new window, allows the user to make a choice using up and down arrows and the enter key, and returns the value of the menu item.<br />
<br />
Limitations include:<br />
No way of scrolling a long list, either horiontally or vertically;<br />
No arguments for placement on screen, although this is easy to add;<br />
No multiple selection;<br />
Will produce all kinds of errors and warnings if the terminal is smaller than is necessary to create the window.<br />
<br />
I'm very new at using the ncurses library; Comments and improvements would be greatly appreciated!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Create a simple selection menu<br />
&nbsp;* @param array Associative array; The value will be shown on the menu, while the key will be returned when the associated value is selected.<br />
&nbsp;* @return mixed<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">ncurses_menu_select</span><span class="keyword">( </span><span class="default">$menu </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$menu </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$values </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">( </span><span class="default">$menu </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">$width </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$height </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">( </span><span class="default">$menu </span><span class="keyword">) + </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$values </span><span class="keyword">as </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$width </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">( </span><span class="default">$width</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) + </span><span class="default">2 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$menu_window </span><span class="keyword">= </span><span class="default">ncurses_newwin</span><span class="keyword">( </span><span class="default">$height</span><span class="keyword">, </span><span class="default">$width</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wborder</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0 </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for( </span><span class="default">$a </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">( </span><span class="default">$values </span><span class="keyword">); </span><span class="default">$a</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$a </span><span class="keyword">== </span><span class="default">$current </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattron</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$a </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattroff</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$a</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$a </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wrefresh</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while( ! </span><span class="default">in_array</span><span class="keyword">( </span><span class="default">$key </span><span class="keyword">= </span><span class="default">ncurses_getch</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">), array( </span><span class="default">13</span><span class="keyword">, </span><span class="default">10 </span><span class="keyword">) ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">$key </span><span class="keyword">== </span><span class="default">NCURSES_KEY_UP </span><span class="keyword">AND </span><span class="default">$current </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if ( </span><span class="default">$key </span><span class="keyword">== </span><span class="default">NCURSES_KEY_DOWN </span><span class="keyword">and </span><span class="default">$current </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">( </span><span class="default">$values </span><span class="keyword">) - </span><span class="default">1 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$move </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$current</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">+= </span><span class="default">$move</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattron</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_mvwaddstr</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">+ </span><span class="default">$current</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wattroff</span><span class="keyword">( </span><span class="default">$menu_window</span><span class="keyword">, </span><span class="default">NCURSES_A_REVERSE </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_wrefresh</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_delwin</span><span class="keyword">( </span><span class="default">$menu_window </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$keys</span><span class="keyword">[ </span><span class="default">$current </span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example Use:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Initialie ncurses<br />
</span><span class="default">$ncurse </span><span class="keyword">= </span><span class="default">ncurses_init</span><span class="keyword">();<br />
</span><span class="comment">// A full screen window<br />
</span><span class="default">$fullscreen </span><span class="keyword">= </span><span class="default">ncurses_newwin </span><span class="keyword">( </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);<br />
</span><span class="comment">// Add a pretty border<br />
</span><span class="default">ncurses_border</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="comment">// Draw everything so far<br />
</span><span class="default">ncurses_refresh</span><span class="keyword">();<br />
<br />
</span><span class="comment">// Set up menu array<br />
</span><span class="default">$menu_items </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'one'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Menu Item #1'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'two'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Menu Item #2'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'three' </span><span class="keyword">=&gt; </span><span class="string">'Menu Item #3' </span><span class="keyword">);<br />
</span><span class="comment">// Display menu and return selection<br />
</span><span class="default">$selection </span><span class="keyword">= </span><span class="default">ncurses_menu_select</span><span class="keyword">( </span><span class="default">$menu_items </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Print selection<br />
</span><span class="default">ncurses_mvaddstr</span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">'You selected ' </span><span class="keyword">. </span><span class="default">$menu_items</span><span class="keyword">[</span><span class="default">$selection</span><span class="keyword">] . </span><span class="string">' with the value ' </span><span class="keyword">. </span><span class="default">$selection </span><span class="keyword">);<br />
<br />
</span><span class="comment">// Draw updates<br />
</span><span class="default">ncurses_refresh</span><span class="keyword">( </span><span class="default">$fullscreen </span><span class="keyword">);<br />
</span><span class="comment">// End <br />
</span><span class="default">ncurses_end</span><span class="keyword">();<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40198""></a>
  <div class="note">
   <strong class="user">Habib Valanejad</strong>
   <a href="#40198" class="date">25-Feb-2004 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
What if you want to draw a new window and after removing it, showing the pervious screen again? Unfortunately, there is no such a thing in php/ncurses as there is in original curses library (touchwin if I'm not mistaken - It has been a long time!). <br />
However, you can do this by a simple trick! You can <br />
dump the screen to a temp file and then restore it back<br />
again!<br />
Take a look at this function:<br />
<br />
# Function: show_a_win()<br />
# - Displays a small window and writes something in it.<br />
# - waits for a key<br />
# - shows the pervious screen again<br />
function show_a_win()<br />
{<br />
&nbsp;&nbsp; # Dump the current screen into a temp file:<br />
&nbsp;&nbsp; $tmpfile = tempnam("/tmp", "dump.");<br />
&nbsp;&nbsp; # Create a new window.<br />
&nbsp;&nbsp; $newwin = ncurses_newwin(4, 60, 10, 10);<br />
&nbsp;&nbsp; # Write something and then refresh it<br />
&nbsp;&nbsp; ncurses_mvwaddstr($newwin, 1, 1, "This is a test.");<br />
&nbsp;&nbsp; ncurses_wrefresh($newwin);<br />
&nbsp;&nbsp; # Wait for a key<br />
&nbsp;&nbsp; ncurses_wgetch($newwin);<br />
&nbsp;&nbsp; ncurses_delwin($newwin);&nbsp; /* delete the window */<br />
&nbsp;&nbsp; /* Restore the screen the same way it was before entering <br />
&nbsp;&nbsp;&nbsp; * into the function:<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp; ncurses_scr_restore($tmpfile);<br />
&nbsp;&nbsp; unlink($tmpfile);&nbsp;&nbsp; /* Remove temp file */<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38202""></a>
  <div class="note">
   <strong class="user">Habib Valanejad</strong>
   <a href="#38202" class="date">11-Dec-2003 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function which would do the job for missing<br />
ncurses_wclrtoeol() function:<br />
/* wclrtoeol()<br />
&nbsp;* Erases&nbsp; the&nbsp; current line to the right of the cursor<br />
*/<br />
function wclrtoeol($win)<br />
{<br />
&nbsp;&nbsp; # get current position<br />
&nbsp;&nbsp; ncurses_getyx($win, &amp;$crow, &amp;$ccol); <br />
&nbsp;&nbsp; # get maximum row and col for this window:<br />
&nbsp;&nbsp; ncurses_getmaxyx($win, &amp;$max_row, &amp;$max_col);<br />
&nbsp;&nbsp; for ($col = $ccol; $col &lt; $max_col; $col ++){<br />
&nbsp;&nbsp; &nbsp;&nbsp; ncurses_wmove($win, $crow, $col);<br />
&nbsp;&nbsp; &nbsp;&nbsp; ncurses_waddch($win, 32);<br />
&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34605""></a>
  <div class="note">
   <strong class="user">rainman at darkwired dot org</strong>
   <a href="#34605" class="date">01-Aug-2003 01:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is not meant as spam to get people to use my client.<br />
<br />
I have been working on a PHP4 IRC client with ncurses interface and I think it is a useful example of how ncurses with php could be used.<br />
It is GPL licensed so you can just go and take a loot at it.<br />
<br />
It can be found at <a href="http://torc.sourceforge.net or http://www.darkwired.org/projects/torc/" rel="nofollow" target="_blank">http://torc.sourceforge.net or http://www.darkwired.org/projects/torc/</a><br />
<br />
I hope this will help out some of you because php ncurses can be quite difficult I experienced :]<br />
<br />
For any questions about the code you can ofcourse just mail me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33433""></a>
  <div class="note">
   <strong class="user">Habib Valanejad</strong>
   <a href="#33433" class="date">25-Jun-2003 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a small problem building php+ncurses support.<br />
ncurses include files were installed in:<br />
ncurses_installed_dir/include/ncurses<br />
This caused problems when building php with ncurse support.<br />
php was looking for include files in:<br />
ncurses_installed_dir/include <br />
However, include files were located in include/ncurses<br />
<br />
I had to make symbolic links of files in ncurses directory so php could see them:<br />
# cd ncurses_insalled_directory/include<br />
# ln -s ncurses/* .<br />
After that it worked.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30771""></a>
  <div class="note">
   <strong class="user">Habib Valanejad</strong>
   <a href="#30771" class="date">28-Mar-2003 03:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those of you who want to check if &lt;ENTER&gt; key is passed, <br />
you have to check the key agains both NL and CR keys:<br />
<br />
function get_str()<br />
{<br />
&nbsp;&nbsp; for ($str = "";;){<br />
&nbsp;&nbsp; &nbsp;&nbsp; $key = ncurses_getch();<br />
&nbsp;&nbsp; &nbsp;&nbsp; switch ($key){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case 10:&nbsp;&nbsp; // newline<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; case 13:&nbsp;&nbsp; // Carrige Return<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return($str);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; default:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $str .= chr($key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ncurses_refresh();<br />
&nbsp;&nbsp; &nbsp;&nbsp; } // switch<br />
&nbsp;&nbsp; } // for<br />
} // get_str()<br />
<br />
Hope that would help.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30652""></a>
  <div class="note">
   
   <a href="#30652" class="date">25-Mar-2003 04:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the example above, if you run resize from a C shell it will output the sizes in C shell syntax, run resize with -u to force Bourne syntax:<br />
The $win parameter is just for future compatibility.<br />
<br />
function ncurses_getmaxyx($win, &amp;$y, &amp;$x)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; exec("/usr/X11R6/bin/resize -u", $output);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $cols = explode("=", $output[0]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $rows = explode("=", $output[1]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $x = intval($cols[1]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $y = intval($rows[1]);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27684""></a>
  <div class="note">
   <strong class="user">joeldegan AT yahoo.com</strong>
   <a href="#27684" class="date">15-Dec-2002 09:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
See the documentation for ncurses_border and ncurses_wrefresh for some more examples of doing windowing and dynamic sizing.. I also posted some information to the zend.com code-gallery for doing ncurses under php.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27662""></a>
  <div class="note">
   <strong class="user">joeldegan AT yahoo.com</strong>
   <a href="#27662" class="date">15-Dec-2002 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed a lack of a getxy() function so I wrote one.<br />
You may need to change the path for your resize cmd.<br />
<br />
&lt;?<br />
function getxy(){<br />
&nbsp;&nbsp;&nbsp; $rez = `/usr/X11R6/bin/resize`;<br />
&nbsp;&nbsp;&nbsp; $rez = explode("\n",$rez);<br />
&nbsp;&nbsp;&nbsp; while(list($key,$val)=each($rez)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $a=explode("=",$val);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(trim($a[0])=="COLUMNS"){ $COLUMNS = $a[1]; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(trim($a[0])=="LINES"){ $LINES = $a[1]; }<br />
&nbsp;&nbsp;&nbsp; }//<br />
&nbsp;&nbsp;&nbsp; $retval[0]=$COLUMNS;<br />
&nbsp;&nbsp;&nbsp; $retval[1]=$LINES;<br />
&nbsp;&nbsp; return $retval;<br />
}<br />
<br />
print_r(getxy());<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27660""></a>
  <div class="note">
   <strong class="user">joeldegan AT yahoo.com</strong>
   <a href="#27660" class="date">14-Dec-2002 11:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is from the examples that come with the latest release.<br />
<br />
From:<br />
php-4.3.0RC3/ext/ncurses/example1.php<br />
<br />
I found this useful...<br />
<br />
<span class="default">&lt;?php<br />
$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">ncurses_init</span><span class="keyword">();<br />
if(</span><span class="default">ncurses_has_colors</span><span class="keyword">()){<br />
</span><span class="default">ncurses_start_color</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_RED</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">2</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_GREEN</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">3</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_YELLOW</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">4</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLUE</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">5</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_MAGENTA</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">6</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_CYAN</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ncurses_init_pair</span><span class="keyword">(</span><span class="default">7</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_WHITE</span><span class="keyword">,</span><span class="default">NCURSES_COLOR_BLACK</span><span class="keyword">);<br />
}<br />
while(</span><span class="default">1</span><span class="keyword">){<br />
for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">80</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br />
for (</span><span class="default">$y</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">&lt;</span><span class="default">24</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$n</span><span class="keyword">++;<br />
&nbsp; </span><span class="default">ncurses_move</span><span class="keyword">(</span><span class="default">$y</span><span class="keyword">,</span><span class="default">$x</span><span class="keyword">);<br />
&nbsp; </span><span class="default">ncurses_addch</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">+</span><span class="default">64</span><span class="keyword">);<br />
&nbsp; </span><span class="default">ncurses_color_set</span><span class="keyword">(</span><span class="default">$n</span><span class="keyword">%</span><span class="default">8</span><span class="keyword">);<br />
&nbsp; </span><span class="default">ncurses_refresh</span><span class="keyword">();<br />
&nbsp; if(</span><span class="default">$n</span><span class="keyword">&gt;</span><span class="default">26</span><span class="keyword">)</span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
}<br />
}<br />
</span><span class="default">ncurses_getch</span><span class="keyword">();<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27653""></a>
  <div class="note">
   <strong class="user">joeldegan AT yahoo.com</strong>
   <a href="#27653" class="date">14-Dec-2002 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
actually *that* example does not work...<br />
here is one that I took and trimmed down from the ncurses examples.<br />
I will do some more and post them here..<br />
<br />
&lt;?<br />
ncurses_init();<br />
##############################################<br />
ncurses_noecho();<br />
<br />
&nbsp;&nbsp;&nbsp; $large = ncurses_newwin(20, 60, 2, 10);<br />
&nbsp;&nbsp;&nbsp; $small = ncurses_newwin(10, 30, 7, 25);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; ncurses_refresh();<br />
&nbsp;&nbsp;&nbsp; ncurses_wrefresh($large);<br />
&nbsp;&nbsp;&nbsp; ncurses_wrefresh($small);<br />
<br />
&nbsp;&nbsp;&nbsp; ncurses_mvwaddstr($small, 5, 5, "&nbsp;&nbsp; Test&nbsp; String&nbsp;&nbsp; ");<br />
&nbsp;&nbsp;&nbsp; ncurses_wrefresh($small);<br />
&nbsp;&nbsp;&nbsp; ncurses_getch();<br />
<br />
##############################################<br />
ncurses_end(); // Clean up, and quit<br />
?&gt;<br />
<br />
This is from PHP 4.3.0RC0 compiled with the following flags..<br />
./configure --prefix=/wwwroot/php --with-config-file-path=/wwwroot/php --with-mysql --enable-pcntl --with-tsrm-pthreads --enable-sysvsem --enable-sysvshm --with-curl --enable-bcmath --enable-sigchild --enable-sockets --with-ncurses</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="26639""></a>
  <div class="note">
   <strong class="user">nweeks at utas dot edu dot au</strong>
   <a href="#26639" class="date">08-Nov-2002 01:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With your CGI version of PHP compiled with ncurses support, console apps are amazingly easy!<br />
<br />
For example:<br />
whack the following into a file, chmod +x it, and run it.<br />
<br />
#!/usr/local/bin/php -q<br />
<span class="default">&lt;?php<br />
ncurses_init</span><span class="keyword">();<br />
</span><span class="default">ncurses_border</span><span class="keyword">(</span><span class="default">25</span><span class="keyword">,</span><span class="default">25</span><span class="keyword">,</span><span class="default">18</span><span class="keyword">,</span><span class="default">18</span><span class="keyword">,</span><span class="default">24</span><span class="keyword">,</span><span class="default">24</span><span class="keyword">,</span><span class="default">23</span><span class="keyword">,</span><span class="default">23</span><span class="keyword">); </span><span class="comment">// Do a lovely border<br />
</span><span class="default">ncurses_move</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">); </span><span class="comment">// Start top left(inside border)<br />
</span><span class="default">ncurses_addstr</span><span class="keyword">(</span><span class="string">"Welcome to NCurses"</span><span class="keyword">);<br />
</span><span class="default">ncurses_addstr</span><span class="keyword">(</span><span class="string">" with PHP!"</span><span class="keyword">);<br />
</span><span class="default">ncurses_refresh</span><span class="keyword">(); </span><span class="comment">// Send buffer to screen<br />
</span><span class="default">ncurses_end</span><span class="keyword">(); </span><span class="comment">// Clean up, and quit<br />
</span><span class="keyword">?&amp;</span><span class="default">gt</span><span class="keyword">;<br />
<br />
</span><span class="default">You</span><span class="string">'ll notice the second addstr simply tacks onto the first.</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="ncurses.mouseconsts.html">マウス</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.ncurses-addch.html">ncurses_addch</a></div>
 <div class="up"><a href="book.ncurses.html">Ncurses</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
