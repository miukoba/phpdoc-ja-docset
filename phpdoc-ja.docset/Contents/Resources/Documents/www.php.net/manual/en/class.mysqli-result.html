<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>mysqli_result クラス</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli-stmt.store-result.html">mysqli_stmt::store_result</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli-result.current-field.html">mysqli_result::$current_field</a></div>
 <div class="up"><a href="book.mysqli.html">Mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.mysqli-result" class="reference">
 <h1 class="title">mysqli_result クラス</h1>
 
 
 <div class="partintro"><p class="verinfo">(PHP 5)</p>
 

  <div class="section" id="mysqli-result.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    データベースへのクエリにより得られた結果セットを表します。
   </p>
   
   <p class="para">
    <em class="emphasis">変更履歴</em>
   </p>

   <table class="doctable table">
    <caption><strong>変更履歴</strong></caption>
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.4.0</td>
       <td>
        <a href="class.iterator.html" class="classname">Iterator</a> に対応するため、
        <strong class="classname">mysqli_result</strong>
        は <a href="class.traversable.html" class="classname">Traversable</a> を実装するようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>
  
   
  </div>

 
  <div class="section" id="mysqli-result.synopsis">
   <h2 class="title">クラス概要</h2>
 

   <div class="classsynopsis">
    <div class="ooclass"></div>
 

    <div class="classsynopsisinfo">
     <span class="ooclass">
      <strong class="classname">mysqli_result</strong>
     </span>
     {</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* プロパティ */</div>
    <div class="fieldsynopsis">
   <span class="type">int</span> <var class="varname"><a href="mysqli-result.current-field.html">$<var class="varname">current_field</var></a></var>
  ;</div>
<div class="fieldsynopsis"><span class="type">int</span> <var class="varname"><a href="mysqli-result.field-count.html">$<var class="varname">field_count</var></a></var>;</div>
<div class="fieldsynopsis"><span class="type">array</span> <var class="varname"><a href="mysqli-result.lengths.html">$<var class="varname">lengths</var></a></var>;</div>
<div class="fieldsynopsis"><span class="type">int</span> <var class="varname"><a href="mysqli-result.num-rows.html">$<var class="varname">num_rows</var></a></var>;</div>

 
    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="mysqli-result.data-seek.html" class="methodname">data_seek</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="mysqli-result.fetch-all.html" class="methodname">fetch_all</a></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$resulttype</code><span class="initializer"> = MYSQLI_NUM</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="mysqli-result.fetch-array.html" class="methodname">fetch_array</a></span>
    ([ <span class="methodparam"><span class="type">int</span> <code class="parameter">$resulttype</code><span class="initializer"> = MYSQLI_BOTH</span></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><a href="mysqli-result.fetch-assoc.html" class="methodname">fetch_assoc</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">object</span> <span class="methodname"><a href="mysqli-result.fetch-field-direct.html" class="methodname">fetch_field_direct</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$fieldnr</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">object</span> <span class="methodname"><a href="mysqli-result.fetch-field.html" class="methodname">fetch_field</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><a href="mysqli-result.fetch-fields.html" class="methodname">fetch_fields</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">object</span> <span class="methodname"><a href="mysqli-result.fetch-object.html" class="methodname">fetch_object</a></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$class_name</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$params</code></span>
  ]] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">mixed</span> <span class="methodname"><a href="mysqli-result.fetch-row.html" class="methodname">fetch_row</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><a href="mysqli-result.field-seek.html" class="methodname">field_seek</a></span>
    ( <span class="methodparam"><span class="type">int</span> <code class="parameter">$fieldnr</code></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">void</span> <span class="methodname"><a href="mysqli-result.free.html" class="methodname">free</a></span>
    ( <span class="methodparam">void</span>
   )</div>

   }</div>

 
  </div>
 
 </div>
 
 














































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="mysqli-result.current-field.html">mysqli_result::$current_field</a> — 結果ポインタにおける現在のフィールドオフセットを取得する</li><li><a href="mysqli-result.data-seek.html">mysqli_result::data_seek</a> — 結果の任意の行にポインタを移動する</li><li><a href="mysqli-result.fetch-all.html">mysqli_result::fetch_all</a> — 結果のすべての行を連想配列・数値添字配列あるいはその両方の形式で取得する</li><li><a href="mysqli-result.fetch-array.html">mysqli_result::fetch_array</a> — 結果の行を連想配列・数値添字配列あるいはその両方の形式で取得する</li><li><a href="mysqli-result.fetch-assoc.html">mysqli_result::fetch_assoc</a> — 結果の行を連想配列で取得する</li><li><a href="mysqli-result.fetch-field-direct.html">mysqli_result::fetch_field_direct</a> — 単一のフィールドのメタデータを取得する</li><li><a href="mysqli-result.fetch-field.html">mysqli_result::fetch_field</a> — 結果セットの次のフィールドを返す</li><li><a href="mysqli-result.fetch-fields.html">mysqli_result::fetch_fields</a> — 結果セットのフィールド情報をオブジェクトの配列で返す</li><li><a href="mysqli-result.fetch-object.html">mysqli_result::fetch_object</a> — 結果セットの現在の行をオブジェクトとして返す</li><li><a href="mysqli-result.fetch-row.html">mysqli_result::fetch_row</a> — 結果の行を数値添字配列で取得する</li><li><a href="mysqli-result.field-count.html">mysqli_result::$field_count</a> — 結果のフィールド数を取得する</li><li><a href="mysqli-result.field-seek.html">mysqli_result::field_seek</a> — 結果ポインタを、指定したフィールドオフセットに設定する</li><li><a href="mysqli-result.free.html">mysqli_result::free</a> — 結果に関連付けられたメモリを開放する</li><li><a href="mysqli-result.lengths.html">mysqli_result::$lengths</a> — 結果セットにおける現在の行のカラムの長さを返す</li><li><a href="mysqli-result.num-rows.html">mysqli_result::$num_rows</a> — 結果の行数を取得する</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="109782""></a>
  <div class="note">
   <strong class="user">tuxedobob</strong>
   <a href="#109782" class="date">21-Aug-2012 06:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Converting an old project from using the mysql extension to the mysqli extension, I found the most annoying change to be the lack of a corresponding mysql_result function in mysqli. While mysql_result is a generally terrible function, it was useful for fetching a single result field *value* from a result set (for example, if looking up a user's ID).<br />
<br />
The behavior of mysql_result is approximated here, though you may want to name it something other than mysqli_result so as to avoid thinking it's an actual, built-in function.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">mysqli_result</span><span class="keyword">(</span><span class="default">$res</span><span class="keyword">, </span><span class="default">$row</span><span class="keyword">, </span><span class="default">$field</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$res</span><span class="keyword">-&gt;</span><span class="default">data_seek</span><span class="keyword">(</span><span class="default">$row</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datarow </span><span class="keyword">= </span><span class="default">$res</span><span class="keyword">-&gt;</span><span class="default">fetch_array</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$datarow</span><span class="keyword">[</span><span class="default">$field</span><span class="keyword">];<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Implementing it via the OO interface is left as an exercise to the reader.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100530""></a>
  <div class="note">
   <strong class="user">sinisaculic at gmail dot com</strong>
   <a href="#100530" class="date">21-Oct-2010 10:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
storing this object in ANY kind will result in storing an empty object... if you try to serialize it dump it or do anything with it you will end up with a empty object. <br />
<br />
you have to pull all data out f the object and then store the data... no other way.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97419""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#97419" class="date">19-Apr-2010 08:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Generally, it appears Mysqli OO vs Procedural style has no significant difference in speed, at least with the more generally used functions and methods (connect, close, query, free, etc).<br />
<br />
With the fetch_* family of functions and methods dealing with result rows, however, Procedural wins out.&nbsp; Averaging over a hundred or so tests with a result set of 180,000 records, and using mysqli_fetch_*() functions vs. their mysqli_result::fetch_*() counterpart object methods to read and iterate over all records, all of the mysqli_fetch_*() functions win by ~0.1 seconds less.<br />
<br />
This is interesting considering we're dealing with the same result object in both styles.<br />
<br />
This was using Vistax64, PHP5.3.2, Mysql 5.1.45, using a bit of this code:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// procedural - takes 0.1 seconds less than OO here<br />
</span><span class="default">$stopwatch </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">mysqli_fetch_assoc</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; ++</span><span class="default">$z</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$stopwatch</span><span class="keyword">;<br />
<br />
</span><span class="comment">// OO<br />
</span><span class="default">$stopwatch </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">-&gt;</span><span class="default">fetch_assoc</span><span class="keyword">()){<br />
&nbsp;&nbsp;&nbsp; ++</span><span class="default">$z</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
echo </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$stopwatch</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88062""></a>
  <div class="note">
   <strong class="user">blar at blar dot de</strong>
   <a href="#88062" class="date">08-Jan-2009 11:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Extending the MySQLi_Result<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Database_MySQLi </span><span class="keyword">extends </span><span class="default">MySQLi<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">real_query</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return new </span><span class="default">Database_MySQLi_Result</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
class </span><span class="default">Database_MySQLi_Result </span><span class="keyword">extends </span><span class="default">MySQLi_Result<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">fetch</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fetch_assoc</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">fetchAll</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rows </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$row </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">fetch</span><span class="keyword">())<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rows</span><span class="keyword">[] = </span><span class="default">$row</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$rows</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqli-stmt.store-result.html">mysqli_stmt::store_result</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqli-result.current-field.html">mysqli_result::$current_field</a></div>
 <div class="up"><a href="book.mysqli.html">Mysqli</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
