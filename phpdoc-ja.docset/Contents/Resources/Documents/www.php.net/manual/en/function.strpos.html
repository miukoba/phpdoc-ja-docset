<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>文字列内の部分文字列が最初に現れる場所を見つける</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strpbrk.html">strpbrk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strrchr.html">strrchr</a></div>
 <div class="up"><a href="ref.strings.html">String 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.strpos" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">strpos</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">strpos</span> &mdash; <span class="dc-title">文字列内の部分文字列が最初に現れる場所を見つける</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.strpos-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>strpos</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$haystack</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$needle</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$offset</code><span class="initializer"> = 0</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   文字列 <em><code class="parameter">haystack</code></em> の中で、
   <em><code class="parameter">needle</code></em> が最初に現れる位置を探します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.strpos-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">haystack</code></em></span>
     <dd>

      <p class="para">
       検索を行う文字列。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">needle</code></em></span>
     <dd>

      <p class="para">
       <em><code class="parameter">needle</code></em> が文字列でない場合は、
       それを整数に変換し、その番号に対応する文字として扱います。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">offset</code></em></span>
     <dd>

      <p class="para">
       指定すると、文字列内での検索開始位置がその位置になります。
        <span class="function"><a href="function.strrpos.html" class="function">strrpos()</a></span> や
        <span class="function"><a href="function.strripos.html" class="function">strripos()</a></span> と異なり、負の数は指定できません。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.strpos-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   needle が見つかった位置を、
   <em><code class="parameter">haystack</code></em> 文字列の先頭 (offset の値とは無関係) からの相対位置で返します。
   文字列の開始位置は 0 であり、1 ではないことに注意しましょう。
  </p>
  <p class="para">
   needle が見つからない場合は <strong><code>FALSE</code></strong> を返します。
  </p>
  <div class="warning"><strong class="warning">警告</strong><p class="simpara">この関数は論理値
<strong><code>FALSE</code></strong> を返す可能性がありますが、<strong><code>FALSE</code></strong> として評価される値を返す可能性もあります。
詳細については <a href="language.types.boolean.html" class="link">論理値</a>の
セクションを参照してください。この関数の返り値を調べるには
<a href="language.operators.comparison.html" class="link">===演算子</a> を
使用してください。</p></div>
 </div>


 <div class="refsect1 examples" id="refsect1-function.strpos-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4868">
    <p><strong>例1 <em>===</em> の使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;===&nbsp;を使用していることに注目しましょう。単純に&nbsp;==&nbsp;を使ったのでは<br />//&nbsp;期待通りに動作しません。なぜなら&nbsp;'a'&nbsp;が&nbsp;0&nbsp;番目&nbsp;(最初)&nbsp;の文字だからです。<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">===&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"文字列&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;は、文字列&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'&nbsp;の中で見つかりませんでした"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"文字列&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;が文字列&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'&nbsp;の中で見つかりました"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;見つかった位置は&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">&nbsp;です"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-4869">
    <p><strong>例2 !== の使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$mystring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$findme&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$mystring</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$findme</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;!==&nbsp;演算子も使用可能です。ここで&nbsp;!=&nbsp;を使っても期待通りに動作しません。<br />//&nbsp;なぜなら&nbsp;'a'&nbsp;が&nbsp;0&nbsp;番目の文字だからです。(0&nbsp;!=&nbsp;false)&nbsp;を評価すると<br />//&nbsp;false&nbsp;になってしまいます。<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">!==&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"文字列&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;が文字列&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'&nbsp;の中で見つかりました"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;見つかった位置は&nbsp;</span><span style="color: #0000BB">$pos</span><span style="color: #DD0000">&nbsp;です"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"文字列&nbsp;'</span><span style="color: #0000BB">$findme</span><span style="color: #DD0000">'&nbsp;は、文字列&nbsp;'</span><span style="color: #0000BB">$mystring</span><span style="color: #DD0000">'&nbsp;の中で見つかりませんでした"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   <div class="example" id="example-4870">
    <p><strong>例3 オフセットの使用</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;オフセット以前の内容を無視して文字を探すこともできます。<br /></span><span style="color: #0000BB">$newstring&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'abcdef&nbsp;abcdef'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$pos&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strpos</span><span style="color: #007700">(</span><span style="color: #0000BB">$newstring</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;$pos&nbsp;は&nbsp;0&nbsp;ではなく&nbsp;7&nbsp;となります。<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.strpos-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">この関数はバイナリデータに対応しています。
</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.strpos-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.stripos.html" class="function" rel="rdfs-seeAlso">stripos()</a> - 大文字小文字を区別せずに文字列が最初に現れる位置を探す</span></li>
    <li class="member"> <span class="function"><a href="function.strrpos.html" class="function" rel="rdfs-seeAlso">strrpos()</a> - 文字列中に、ある部分文字列が最後に現れる場所を探す</span></li>
    <li class="member"> <span class="function"><a href="function.strripos.html" class="function" rel="rdfs-seeAlso">strripos()</a> - 文字列中で、特定の(大文字小文字を区別しない)文字列が最後に現れた位置を探す</span></li>
    <li class="member"> <span class="function"><a href="function.strstr.html" class="function" rel="rdfs-seeAlso">strstr()</a> - 文字列が最初に現れる位置を見つける</span></li>
    <li class="member"> <span class="function"><a href="function.strpbrk.html" class="function" rel="rdfs-seeAlso">strpbrk()</a> - 文字列の中から任意の文字を探す</span></li>
    <li class="member"> <span class="function"><a href="function.substr.html" class="function" rel="rdfs-seeAlso">substr()</a> - 文字列の一部分を返す</span></li>
    <li class="member"> <span class="function"><a href="function.preg-match.html" class="function" rel="rdfs-seeAlso">preg_match()</a> - 正規表現によるマッチングを行う</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111422""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#111422" class="date">19-Feb-2013 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The most straightforward way to prevent this function from returning 0 is:<br />
<br />
&nbsp; strpos('x'.$haystack, $needle, 1)<br />
<br />
The 'x' is simply a garbage character which is only there to move everything 1 position.<br />
The number 1 is there to make sure that this 'x' is ignored in the search.<br />
This way, if $haystack starts with $needle, then the function returns 1 (rather than 0).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="110464""></a>
  <div class="note">
   <strong class="user">Aleksey Korzun</strong>
   <a href="#110464" class="date">25-Oct-2012 04:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just a quick note, if by some chance you pass an array to strpos function you might have unexpected behaviour.<br />
<br />
<span class="default">&lt;?php<br />
$foobar </span><span class="keyword">= array();<br />
<br />
if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$foobar</span><span class="keyword">, </span><span class="string">'something'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The above condition will actually pass and execute your code.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108426""></a>
  <div class="note">
   <strong class="user">mtroy dot student at gmail dot com</strong>
   <a href="#108426" class="date">26-Apr-2012 01:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when you want to know how much of substring occurrences, you'll use "substr_count".<br />
But, retrieve their positions, will be harder.<br />
So, you can do it by starting with the last occurrence :<br />
<br />
function strpos_r($haystack, $needle)<br />
{<br />
&nbsp;&nbsp;&nbsp; if(strlen($needle) &gt; strlen($haystack))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; trigger_error(sprintf("%s: length of argument 2 must be &lt;= argument 1", __FUNCTION__), E_USER_WARNING);<br />
<br />
&nbsp;&nbsp;&nbsp; $seeks = array();<br />
&nbsp;&nbsp;&nbsp; while($seek = strrpos($haystack, $needle))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_push($seeks, $seek);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $haystack = substr($haystack, 0, $seek);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $seeks;<br />
}<br />
<br />
it will return an array of all occurrences a the substring in the string<br />
<br />
Example : <br />
<br />
$test = "this is a test for testing a test function... blah blah";<br />
var_dump(strpos_r($test, "test"));<br />
<br />
// output <br />
<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; int(29)<br />
&nbsp; [1]=&gt;<br />
&nbsp; int(19)<br />
&nbsp; [2]=&gt;<br />
&nbsp; int(10)<br />
}<br />
<br />
Paul-antoine<br />
Malézieux.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107678""></a>
  <div class="note">
   <strong class="user">martijn at martijnfrazer dot nl</strong>
   <a href="#107678" class="date">26-Feb-2012 12:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a function I wrote to find all occurrences of a string, using strpos recursively.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$results </span><span class="keyword">= array()) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$offset </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$results</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">), </span><span class="default">$results</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This is how you use it:<br />
<br />
<span class="default">&lt;?php<br />
$string </span><span class="keyword">= </span><span class="string">'This is some string'</span><span class="keyword">;<br />
</span><span class="default">$search </span><span class="keyword">= </span><span class="string">'a'</span><span class="keyword">;<br />
</span><span class="default">$found </span><span class="keyword">= </span><span class="default">strpos_recursive</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
<br />
if(</span><span class="default">$found</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$found </span><span class="keyword">as </span><span class="default">$pos</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">'Found "'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" in string "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'" at position &lt;b&gt;'</span><span class="keyword">.</span><span class="default">$pos</span><span class="keyword">.</span><span class="string">'&lt;/b&gt;&lt;br /&gt;'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$search</span><span class="keyword">.</span><span class="string">'" not found in "'</span><span class="keyword">.</span><span class="default">$string</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107240""></a>
  <div class="note">
   <strong class="user">rjeggens at ijskoud dot org</strong>
   <a href="#107240" class="date">24-Jan-2012 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I lost an hour before I noticed that strpos only returns FALSE as a boolean, never TRUE.. This means that<br />
<br />
strpos() !== false <br />
<br />
is a different beast then:<br />
<br />
strpos() === true<br />
<br />
since the latter will never be true. After I found out, The warning in the documentation made a lot more sense.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106407""></a>
  <div class="note">
   <strong class="user">gjh42 - simonokewode at hotmail dot com</strong>
   <a href="#106407" class="date">08-Nov-2011 04:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A pair of functions to replace every nth occurrence of a string with another string, starting at any position in the haystack. The first works on a string and the second works on a single-level array of strings, treating it as a single string for replacement purposes (any needles split over two array elements are ignored).<br />
<br />
Can be used for formatting dynamically-generated HTML output without touching the original generator: e.g. add a newLine class tag to every third item in a floated list, starting with the fourth item.<br />
&nbsp;<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* String Replace at Intervals&nbsp;&nbsp; by Glenn Herbert (gjh42)&nbsp; &nbsp; 2010-12-17<br />
&nbsp;*/<br />
&nbsp;<br />
//(basic locator by someone else - name unknown)<br />
//strnposr() - Find the position of nth needle in haystack.<br />
</span><span class="keyword">function </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$occurrence</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$occurrence</span><span class="keyword">&lt;</span><span class="default">2</span><span class="keyword">)?</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">):</span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$occurrence</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">,</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">//gjh42<br />
//replace every nth occurrence of $needle with $repl, starting from any position<br />
</span><span class="keyword">function </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$pos </span><span class="keyword">&gt;= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">) or </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">) &lt; </span><span class="default">$first</span><span class="keyword">) return </span><span class="default">$haystack</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$firstpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$nl </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$qty </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$firstpos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">)/</span><span class="default">$interval</span><span class="keyword">);<br />
&nbsp; do { </span><span class="comment">//in reverse order<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$nextpos </span><span class="keyword">= </span><span class="default">strnposr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, (</span><span class="default">$qty </span><span class="keyword">* </span><span class="default">$interval</span><span class="keyword">) + </span><span class="default">1</span><span class="keyword">, </span><span class="default">$firstpos</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$qty</span><span class="keyword">--;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$nextpos</span><span class="keyword">, </span><span class="default">$nl</span><span class="keyword">);<br />
&nbsp; } while (</span><span class="default">$nextpos </span><span class="keyword">&gt; </span><span class="default">$firstpos</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$haystack</span><span class="keyword">;<br />
}<br />
&nbsp; </span><span class="comment">//$needle = string to find<br />
&nbsp; //$repl = string to replace needle<br />
&nbsp; //$haystack = string to do replacing in<br />
&nbsp; //$interval = number of needles in loop<br />
&nbsp; //$first=1 = first occurrence of needle to replace (defaults to first) <br />
&nbsp; //$pos=0 = position in haystack string to start from (defaults to first) <br />
&nbsp;<br />
//replace every nth occurrence of $needle with $repl, starting from any position, in a single-level array<br />
</span><span class="keyword">function </span><span class="default">arr_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, </span><span class="default">$glue</span><span class="keyword">=</span><span class="string">'|+|'</span><span class="keyword">) {<br />
&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) return </span><span class="default">$arr</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">str_replace_int</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$repl</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$interval</span><span class="keyword">, </span><span class="default">$first</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$tarr </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$glue</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$tarr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>If $arr is not an array, or a multilevel array, it is returned unchanged.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105984""></a>
  <div class="note">
   <strong class="user">jim at terrys dot net</strong>
   <a href="#105984" class="date">30-Sep-2011 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
strpos that accepts an array for $needle<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// strpos that takes an array of values to match against a string<br />
// note the stupid argument order (to match strpos)<br />
</span><span class="keyword">function </span><span class="default">strpos_arr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">)) </span><span class="default">$needle </span><span class="keyword">= array(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$needle </span><span class="keyword">as </span><span class="default">$what</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$what</span><span class="keyword">))!==</span><span class="default">false</span><span class="keyword">) return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>----------------------------<br />
<a href="http://www.show-ip.org" rel="nofollow" target="_blank">http://www.show-ip.org</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102773""></a>
  <div class="note">
   <strong class="user">akarmenia at gmail dot com</strong>
   <a href="#102773" class="date">05-Mar-2011 01:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My version of strpos with needles as an array. Also allows for a string, or an array inside an array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$needles</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$str</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if ( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needles</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment">// Test<br />
</span><span class="keyword">echo </span><span class="default">strpos_array</span><span class="keyword">(</span><span class="string">'This is a test'</span><span class="keyword">, array(</span><span class="string">'test'</span><span class="keyword">, </span><span class="string">'drive'</span><span class="keyword">)); </span><span class="comment">// Output is 10<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102336""></a>
  <div class="note">
   <strong class="user">jaimthorn at yahoo dot com</strong>
   <a href="#102336" class="date">09-Feb-2011 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A complete set of strn*pos functions that look for the nth occurrence of the needle in the haystack. I prefer this implementation of strnpos because it doesn't give visible warnings when supplied with a needle of length 0 (which is, admittedly, non-standard behavior).&nbsp; Based on a version I [originally posted on 05-MAR-2010]; this new version conforms more to the semantics of strpos.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; This function implements all the strn*pos functions, which return the $nth occurrence of $needle<br />
&nbsp;*&nbsp; in $haystack, or false if it doesn't exist / when illegal parameters have been supplied.<br />
&nbsp;*<br />
&nbsp;*&nbsp; @param&nbsp; string&nbsp; $haystack&nbsp; &nbsp; &nbsp;&nbsp; the string to search in.<br />
&nbsp;*&nbsp; @param&nbsp; MIXED&nbsp;&nbsp; $needle&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the string or the ASCII value of the character to search for.<br />
&nbsp;*&nbsp; @param&nbsp; integer $nth&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; the number of the occurrence to look for.<br />
&nbsp;*&nbsp; @param&nbsp; integer $offset&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the position in $haystack to start looking for $needle.<br />
&nbsp;*&nbsp; @param&nbsp; bool&nbsp; &nbsp; $insensitive&nbsp; &nbsp; should the function be case insensitive?<br />
&nbsp;*&nbsp; @param&nbsp; bool&nbsp; &nbsp; $reverse&nbsp; &nbsp; &nbsp; &nbsp; should the function work its way backwards in the haystack?<br />
&nbsp;*&nbsp; @return MIXED&nbsp;&nbsp; integer&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; either the position of the $nth occurrence of $needle in $haystack,<br />
&nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; or boolean&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; false if it can't be found.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strnripos_generic</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$insensitive</span><span class="keyword">, </span><span class="default">$reverse </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//&nbsp; If needle is not a string, it is converted to an integer and applied as the ordinal value of a character.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if( ! </span><span class="default">is_string</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle </span><span class="keyword">= </span><span class="default">chr</span><span class="keyword">( (int) </span><span class="default">$needle </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//&nbsp; Are the supplied values valid / reasonable?<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$needle </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">1 </span><span class="keyword">&gt; </span><span class="default">$nth </span><span class="keyword">|| </span><span class="default">0 </span><span class="keyword">=== </span><span class="default">$len </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$insensitive </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">( </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$reverse </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">( </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//&nbsp; $offset is incremented in the call to strpos, so make sure that the first<br />
&nbsp;&nbsp;&nbsp; //&nbsp; call starts at the right position by initially decreasing $offset by $len.<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">-= </span><span class="default">$len</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; do<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">+ </span><span class="default">$len </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } while( --</span><span class="default">$nth&nbsp; </span><span class="keyword">&amp;&amp; </span><span class="default">false </span><span class="keyword">!== </span><span class="default">$offset </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">=== </span><span class="default">$offset </span><span class="keyword">|| ! </span><span class="default">$reverse </span><span class="keyword">? </span><span class="default">$offset </span><span class="keyword">: </span><span class="default">strlen</span><span class="keyword">( </span><span class="default">$haystack </span><span class="keyword">) - </span><span class="default">$offset</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; @see&nbsp; &nbsp; strnripos_generic<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strnpos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strnripos_generic</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; @see&nbsp; &nbsp; strnripos_generic<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strnipos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strnripos_generic</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">false </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; @see&nbsp; &nbsp; strnripos_generic<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strnrpos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strnripos_generic</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">false</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;*&nbsp; @see&nbsp; &nbsp; strnripos_generic<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strnripos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strnripos_generic</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$nth</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$haystack </span><span class="keyword">= </span><span class="string">'Dit is een HoTtentotTentenTentenToonstellingTest!'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">strnpos&nbsp; </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnpos&nbsp; </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">116</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnipos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnipos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">116</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnrpos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnrpos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">116</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnripos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'t'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnripos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">116</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnpos&nbsp; </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnpos&nbsp; </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">,&nbsp; </span><span class="default">84</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnipos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnipos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">,&nbsp; </span><span class="default">84</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnrpos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnrpos </span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">,&nbsp; </span><span class="default">84</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
echo </span><span class="default">strnripos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">, </span><span class="string">'T'</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="string">' === '</span><span class="keyword">, </span><span class="default">strnripos</span><span class="keyword">( </span><span class="default">$haystack</span><span class="keyword">,&nbsp; </span><span class="default">84</span><span class="keyword">, </span><span class="default">5 </span><span class="keyword">), </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99476""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#99476" class="date">19-Aug-2010 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware the mindless "if needle is not string":<br />
<br />
# php -r 'var_dump(strpos("X1234567",5));'<br />
bool(false)<br />
# php -r 'var_dump(strpos("X1234567","5"));'<br />
int(5)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99440""></a>
  <div class="note">
   <strong class="user">gambajaja at yahoo dot com</strong>
   <a href="#99440" class="date">18-Aug-2010 12:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
$my_array </span><span class="keyword">= array (</span><span class="string">'100,101'</span><span class="keyword">, </span><span class="string">'200,201'</span><span class="keyword">, </span><span class="string">'300,301'</span><span class="keyword">);<br />
</span><span class="default">$check_me_in </span><span class="keyword">= array (</span><span class="string">'100'</span><span class="keyword">,</span><span class="string">'200'</span><span class="keyword">,</span><span class="string">'300'</span><span class="keyword">,</span><span class="string">'400'</span><span class="keyword">);<br />
foreach (</span><span class="default">$check_me_in </span><span class="keyword">as </span><span class="default">$value_cmi</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">FALSE</span><span class="keyword">; </span><span class="comment">#asume that $check_me_in isn't in $my_array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$my_array </span><span class="keyword">as </span><span class="default">$value_my</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$value_my</span><span class="keyword">, </span><span class="default">$value_cmi</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">TRUE</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$is_in</span><span class="keyword">=</span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value_my2</span><span class="keyword">=</span><span class="default">$value_my</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$is_in</span><span class="keyword">) echo </span><span class="string">"ID </span><span class="default">$value_cmi</span><span class="string"> in \$check_me_in I found in value '</span><span class="default">$value_my2</span><span class="string">' \n"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output<br />
ID 100 in $check_me_in I found in value '100,101' <br />
ID 200 in $check_me_in I found in value '200,201' <br />
ID 300 in $check_me_in I found in value '300,301'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99332""></a>
  <div class="note">
   <strong class="user">usulaco at gmail dot com</strong>
   <a href="#99332" class="date">11-Aug-2010 02:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Parse strings between two others in to array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">g</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$start</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/' </span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">) . </span><span class="string">'(.*?)'</span><span class="keyword">. </span><span class="default">preg_quote</span><span class="keyword">(</span><span class="default">$end</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">).</span><span class="string">'/i'</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$out </span><span class="keyword">= array();<br />
<br />
&nbsp;&nbsp; &nbsp; foreach(</span><span class="default">$m</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$type </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'::'</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$type</span><span class="keyword">)&gt;</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$type</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]][] = </span><span class="default">$type</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
}<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">g</span><span class="keyword">(</span><span class="string">'Sample text, [/text to extract/] Rest of sample text [/WEB::<a href="http://google.com/] bla bla bla. " rel="nofollow" target="_blank">http://google.com/] bla bla bla. </a>'</span><span class="keyword">,</span><span class="string">'[/'</span><span class="keyword">,</span><span class="string">'/]'</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
results:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; text to extract<br />
&nbsp;&nbsp;&nbsp; [WEB] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; <a href="http://google.com" rel="nofollow" target="_blank">http://google.com</a><br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
Can be helpfull to custom parsing :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96926""></a>
  <div class="note">
   <strong class="user">olmstead31 at yahoo dot com</strong>
   <a href="#96926" class="date">23-Mar-2010 04:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that whatever I was using as a test with strpos it came out false exept if $pos was == 1<br />
<br />
I figured it gives me a numeric value if found else it is null or false<br />
here is what i did to make my code work:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//EXAMPLE 1:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',64,68,70,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 0<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//EXAMPLE 2:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,64,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to 6<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
<br />
</span><span class="comment">//EXAMPLE 3:<br />
</span><span class="default">$quiamime </span><span class="keyword">= </span><span class="string">',68,70,'</span><span class="keyword">;<br />
</span><span class="default">$me </span><span class="keyword">= </span><span class="string">'64'<br />
</span><span class="default">$posi </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$quiaime</span><span class="keyword">, </span><span class="string">",</span><span class="default">$me</span><span class="string">,"</span><span class="keyword">);&nbsp; </span><span class="comment">//posi is equal to NULL or FALSE<br />
</span><span class="keyword">if (!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$posi</span><span class="keyword">)){<br />
&nbsp;</span><span class="comment">//code here<br />
</span><span class="keyword">}else{<br />
&nbsp; </span><span class="comment">//else code here<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95875""></a>
  <div class="note">
   <strong class="user">daevid at daevid dot com</strong>
   <a href="#95875" class="date">26-Jan-2010 11:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Dan Brown and I had a discussion on the PHP list about the speed difference between the popular three string searching techniques. He wrote a simple timing test, and I adapted it further. The end result is that all three are very close and not even noticeable for sets &lt; 1M. Although, technically strpos() is about twice as fast (as the docs allude to above). Here it is for your own amusement and testing purposes.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">1000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++ )<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$o</span><span class="keyword">[] =<br />
</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'%04d-%02d-%02d'</span><span class="keyword">,</span><span class="default">rand</span><span class="keyword">(</span><span class="default">0000</span><span class="keyword">,</span><span class="default">9999</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">),</span><span class="default">rand</span><span class="keyword">(</span><span class="default">00</span><span class="keyword">,</span><span class="default">99</span><span class="keyword">));<br />
</span><span class="comment">#print_r($o);<br />
</span><span class="keyword">echo </span><span class="string">"array of "</span><span class="keyword">.</span><span class="default">number_format</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">).</span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$now </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">preg_match</span><span class="keyword">(</span><span class="string">'/^[0]{4,}\-/U'</span><span class="keyword">,</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'preg_match'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$now</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$later </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">) == </span><span class="string">"0000"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'substr'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$later</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">$after </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$o</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="string">'0000'</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//echo "Offset #".$i." matches: ".$o[$i].PHP_EOL;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
</span><span class="default">$rank</span><span class="keyword">[</span><span class="string">'strpos'</span><span class="keyword">] = (</span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$after</span><span class="keyword">);<br />
</span><span class="comment">###################################################################<br />
</span><span class="default">asort</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rank</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
array of 10,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.00766682624817<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 0.0116670131683<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 0.0124950408936<br />
)<br />
<br />
array of 100,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.0817799568176<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 0.120522975922<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 0.125612974167<br />
)<br />
<br />
array of 1,000,000<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [strpos] =&gt; 0.805890083313<br />
&nbsp;&nbsp;&nbsp; [substr] =&gt; 1.19799995422<br />
&nbsp;&nbsp;&nbsp; [preg_match] =&gt; 1.25615906715<br />
)<br />
<br />
I ran out of memory with more than 1M array elements.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94469""></a>
  <div class="note">
   <strong class="user">Achintya</strong>
   <a href="#94469" class="date">06-Nov-2009 11:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function I made to find the first occurrence of a particular needle not enclosed in quotes(single or double). Works for simple nesting (no backslashed nesting allowed).<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strposq</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$charlen </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flag1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flag2 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$len</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">"'"</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flag1 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">) == </span><span class="string">'"'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flag2 </span><span class="keyword">= !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2 </span><span class="keyword">? </span><span class="default">true </span><span class="keyword">: </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$charlen</span><span class="keyword">) == </span><span class="default">$needle </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag1 </span><span class="keyword">&amp;&amp; !</span><span class="default">$flag2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$i</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">strposq</span><span class="keyword">(</span><span class="string">"he'llo'character;\"'som\"e;crap"</span><span class="keyword">, </span><span class="string">";"</span><span class="keyword">); </span><span class="comment">//16<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93887""></a>
  <div class="note">
   <strong class="user">yasindagli at gmail dot com</strong>
   <a href="#93887" class="date">05-Oct-2009 06:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function finds postion of nth occurence of a letter starting from offset.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">nth_position</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$letter</span><span class="keyword">, </span><span class="default">$n</span><span class="keyword">, </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str_arr </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$letter_size </span><span class="keyword">= </span><span class="default">array_count_values</span><span class="keyword">(</span><span class="default">str_split</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)));<br />
&nbsp;&nbsp;&nbsp; if( !isset(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else if(</span><span class="default">$letter_size</span><span class="keyword">[</span><span class="default">$letter</span><span class="keyword">] &lt; </span><span class="default">$n</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'letter "' </span><span class="keyword">. </span><span class="default">$letter </span><span class="keyword">. </span><span class="string">'" does not exist ' </span><span class="keyword">. </span><span class="default">$n </span><span class="keyword">.</span><span class="string">' times in ' </span><span class="keyword">. </span><span class="default">$str </span><span class="keyword">. </span><span class="string">' after ' </span><span class="keyword">. </span><span class="default">$offset </span><span class="keyword">. </span><span class="string">'. position'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$count </span><span class="keyword">= (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$str_arr</span><span class="keyword">) - </span><span class="default">$offset</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$count</span><span class="keyword">, </span><span class="default">$x </span><span class="keyword">!= </span><span class="default">$n</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$str_arr</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] == </span><span class="default">$letter</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$i </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
}<br />
<br />
echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'a'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">//7<br />
</span><span class="keyword">echo </span><span class="default">nth_position</span><span class="keyword">(</span><span class="string">'foobarbaz'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">); </span><span class="comment">//6<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93816""></a>
  <div class="note">
   <strong class="user">digitalpbk [at] gmail.com</strong>
   <a href="#93816" class="date">01-Oct-2009 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function raises a warning if the offset is not between 0 and the length of string:<br />
<br />
Warning: strpos(): Offset not contained in string in %s on line %d</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93566""></a>
  <div class="note">
   <strong class="user">juniordez at gmail dot com</strong>
   <a href="#93566" class="date">16-Sep-2009 06:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to get the string pos ($search), before the position ($pos) passed as parameter.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">strposReverse</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) - </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$posRev </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">( </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$pos </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">) - </span><span class="default">$posRev </span><span class="keyword">- (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">) - </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92849""></a>
  <div class="note">
   <strong class="user">ah dot d at hotmail dot com</strong>
   <a href="#92849" class="date">11-Aug-2009 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A strpos modification to return an array of all the positions of a needle in the haystack <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">=&nbsp; </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$offset </span><span class="keyword">&gt;= </span><span class="default">$i</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
example:-<br />
<br />
<span class="default">&lt;?php<br />
$haystack </span><span class="keyword">= </span><span class="string">"ASD is trying to get out of the ASDs cube but the other ASDs told him that his behavior will destroy the ASDs world"</span><span class="keyword">;<br />
<br />
</span><span class="default">$needle </span><span class="keyword">= </span><span class="string">"ASD"</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">));<br />
<br />
</span><span class="comment">//getting all the positions starting from a specified position<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">34</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="90065""></a>
  <div class="note">
   <strong class="user">vbracco at gmail dot com</strong>
   <a href="#90065" class="date">04-Apr-2009 03:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function find position of first occurrence of any $needles in a string $haystack.<br />
Return the position as an integer. If needles is not found, strposa() will return boolean&nbsp; FALSE. <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strposa</span><span class="keyword">(</span><span class="default">$haystack </span><span class="keyword">,</span><span class="default">$needles</span><span class="keyword">=array(),</span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$chr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$needles </span><span class="keyword">as </span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$chr</span><span class="keyword">[] = </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$chr</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">min</span><span class="keyword">(</span><span class="default">$chr</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"This is my string, very simple."</span><span class="keyword">;<br />
<br />
echo </span><span class="default">strposa</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,array(</span><span class="string">"."</span><span class="keyword">,</span><span class="string">","</span><span class="keyword">,</span><span class="string">" "</span><span class="keyword">)); </span><span class="comment">// 2<br />
</span><span class="keyword">echo </span><span class="default">strposa</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,array(</span><span class="string">"T"</span><span class="keyword">)); </span><span class="comment">// 0<br />
</span><span class="keyword">echo </span><span class="default">strposa</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,array(</span><span class="string">"Q"</span><span class="keyword">,</span><span class="string">"W"</span><span class="keyword">)); </span><span class="comment">// false<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89788""></a>
  <div class="note">
   <strong class="user">teddanzig at yahoo dot com</strong>
   <a href="#89788" class="date">23-Mar-2009 06:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
routine to return -1 if there is no match for strpos<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//instr function to mimic vb instr fucntion<br />
</span><span class="keyword">function </span><span class="default">InStr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$pos </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87868""></a>
  <div class="note">
   <strong class="user">jburns131 at jbwebware dot com</strong>
   <a href="#87868" class="date">28-Dec-2008 01:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Situation:<br />
<br />
I wanted to return TRUE if strpos returned position 0, and only position 0, without the added overhead of preg_match.<br />
<br />
The Solution:<br />
<br />
As PHP treats 0 (zero) as NULL, and strpos returns the int 0 (but not NULL), I used type casting and the "===" comparison operator (as it compares types) to resolve my issue.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$hayStack </span><span class="keyword">= </span><span class="string">"dbHost"</span><span class="keyword">;<br />
</span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
<br />
if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Returns:<br />
db is in position zero<br />
<br />
<span class="default">&lt;?php<br />
<br />
$hayStack </span><span class="keyword">= </span><span class="string">"another_db_host"</span><span class="keyword">;<br />
</span><span class="default">$needle&nbsp; </span><span class="keyword">= </span><span class="string">"db"<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$hayStack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
<br />
if((string)</span><span class="default">$needlePos </span><span class="keyword">=== (string)</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is in position zero"</span><span class="keyword">;<br />
} else {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"db is NOT in position zero"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This returns:<br />
db is in NOT position zero</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87061""></a>
  <div class="note">
   <strong class="user">Tim</strong>
   <a href="#87061" class="date">18-Nov-2008 02:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you would like to find all occurences of a needle inside a haystack you could use this function strposall($haystack,$needle);. It will return an array with all the strpos's.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* strposall<br />
&nbsp;* <br />
&nbsp;* Find all occurrences of a needle in a haystack<br />
&nbsp;*<br />
&nbsp;* @param string $haystack<br />
&nbsp;* @param string $needle<br />
&nbsp;* @return array or false<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">strposall</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needle</span><span class="keyword">,</span><span class="default">$s</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aStrPos</span><span class="keyword">[] = </span><span class="default">$i</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if (isset(</span><span class="default">$aStrPos</span><span class="keyword">)) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$aStrPos</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; else { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">; <br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85835""></a>
  <div class="note">
   <strong class="user">mickRacky</strong>
   <a href="#85835" class="date">19-Sep-2008 08:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's a php implementation of stdc++ string class find_first_of using strpos.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needlesAsString</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$max </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needlesAsString</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp; for(</span><span class="default">$ii</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; </span><span class="default">$ii</span><span class="keyword">&lt;</span><span class="default">$max</span><span class="keyword">;</span><span class="default">$ii</span><span class="keyword">++){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">,</span><span class="default">$needlesAsString</span><span class="keyword">[</span><span class="default">$ii</span><span class="keyword">], </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE&nbsp; </span><span class="keyword">&amp;&amp; </span><span class="default">$result </span><span class="keyword">&lt; </span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return ( </span><span class="default">$index </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)? </span><span class="default">FALSE</span><span class="keyword">: </span><span class="default">$index</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
<span class="default">&lt;?php<br />
$test</span><span class="keyword">=</span><span class="string">"Ralph: One of these days, Alice!!"</span><span class="keyword">;<br />
</span><span class="default">$look_for</span><span class="keyword">=</span><span class="string">":!,"</span><span class="keyword">;&nbsp;&nbsp; </span><span class="comment">// punctuation marks<br />
<br />
</span><span class="default">$ss </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
while( </span><span class="default">$answer</span><span class="keyword">=</span><span class="default">find_first_of</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">,</span><span class="default">$look_for</span><span class="keyword">,</span><span class="default">$ss</span><span class="keyword">) ) {<br />
&nbsp; echo </span><span class="default">$answer </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$ss </span><span class="keyword">= </span><span class="default">$answer</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;}<br />
</span><span class="default">?&gt;<br />
</span><br />
This prints out:<br />
5<br />
24<br />
31<br />
32</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84910""></a>
  <div class="note">
   <strong class="user">Chuzasoft Inc. ARGENTINA</strong>
   <a href="#84910" class="date">05-Aug-2008 09:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi! Don't you people miss the pretty comparison operator 'LIKE' from mySql in PHP??. <br />
I've made this funtion to emulate that method. It's for search a match string into another String <br />
using the '%' caracter just like you do un the LIKE syntax.<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
$mystring </span><span class="keyword">= </span><span class="string">"Hi, this is good!"</span><span class="keyword">;<br />
</span><span class="default">$searchthis </span><span class="keyword">= </span><span class="string">"%thi% goo%"</span><span class="keyword">;<br />
<br />
</span><span class="default">$resp </span><span class="keyword">= </span><span class="default">milike</span><span class="keyword">(</span><span class="default">$mystring</span><span class="keyword">,</span><span class="default">$searchthis</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
if (</span><span class="default">$resp</span><span class="keyword">){<br />
&nbsp;&nbsp; echo </span><span class="string">"milike = VERDADERO"</span><span class="keyword">;<br />
} else{<br />
&nbsp;&nbsp; echo </span><span class="string">"milike = FALSO"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span>Will print:<br />
milike = VERDADERO<br />
<br />
and so on...<br />
<br />
this is the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">milike</span><span class="keyword">(</span><span class="default">$cadena</span><span class="keyword">,</span><span class="default">$busca</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$busca</span><span class="keyword">==</span><span class="string">""</span><span class="keyword">) return </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vi </span><span class="keyword">= </span><span class="default">split</span><span class="keyword">(</span><span class="string">"%"</span><span class="keyword">,</span><span class="default">$busca</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$n</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$vi</span><span class="keyword">);</span><span class="default">$n</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]== </span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]== </span><span class="string">""</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$tieneini </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newoff</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$cadena</span><span class="keyword">,</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">],</span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$newoff</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$tieneini</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$offset</span><span class="keyword">!=</span><span class="default">$newoff</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$n</span><span class="keyword">==</span><span class="default">count</span><span class="keyword">(</span><span class="default">$vi</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">] != </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$cadena</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$cadena</span><span class="keyword">)-</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]), </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]))){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$newoff </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$vi</span><span class="keyword">[</span><span class="default">$n</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Good luck!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83914""></a>
  <div class="note">
   <strong class="user">paul at thiswayupdesign dot co dot uk</strong>
   <a href="#83914" class="date">18-Jun-2008 12:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wasn't aware of the !== operator, only the === for false. I was using this code on strpos:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while( ! (</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
This gave a false if the string was found at position 0, which is weird. <br />
<br />
However using<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">while((</span><span class="default">$start</span><span class="keyword">=@</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">,</span><span class="default">$startTag</span><span class="keyword">,</span><span class="default">$end</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp; </span><span class="comment">// ...<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Gives no such error and seems to work correctly</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82229""></a>
  <div class="note">
   <strong class="user">ilaymyhat-rem0ve at yahoo dot com</strong>
   <a href="#82229" class="date">02-Apr-2008 01:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This might be useful.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">String</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Look for a $needle in $haystack in any position<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">contains</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result </span><span class="keyword">!== </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//intuitive implementation .. if not found returns -1.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">strpos</span><span class="keyword">(&amp;</span><span class="default">$haystack</span><span class="keyword">, &amp;</span><span class="default">$needle</span><span class="keyword">, &amp;</span><span class="default">$offset</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$result </span><span class="keyword">=== </span><span class="default">FALSE </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}</span><span class="comment">//String<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80363""></a>
  <div class="note">
   <strong class="user">Suggested re-write for pink WARNING box</strong>
   <a href="#80363" class="date">12-Jan-2008 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING<br />
<br />
As strpos may return either FALSE (substring absent) or 0 (substring at start of string), strict versus loose equivalency operators must be used very carefully.<br />
<br />
To know that a substring is absent, you must use:&nbsp; <br />
<br />
=== FALSE<br />
<br />
To know that a substring is present (in any position including 0), you can use either of:<br />
<br />
!== FALSE&nbsp; (recommended)<br />
&nbsp;&gt; -1&nbsp; (note: or greater than any negative number)<br />
<br />
To know that a substring is at the start of the string, you must use:&nbsp; <br />
<br />
=== 0<br />
<br />
To know that a substring is in any position other than the start, you can use any of: <br />
<br />
&nbsp;&gt; 0&nbsp; (recommended)<br />
!= 0&nbsp; (note: but not !== 0 which also equates to FALSE)<br />
!= FALSE&nbsp; (disrecommended as highly confusing)<br />
<br />
Also note that you cannot compare a value of "" to the returned value of strpos. With a loose equivalence operator (== or !=) it will return results which don't distinguish between the substring's presence versus position. With a strict equivalence operator (=== or !==) it will always return false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78483""></a>
  <div class="note">
   <strong class="user">Benjie</strong>
   <a href="#78483" class="date">14-Oct-2007 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
str_replace evaluates its arguments exactly once.<br />
<br />
for example:<br />
<br />
<span class="default">&lt;?php<br />
$page </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"##randompicture##"</span><span class="keyword">, </span><span class="default">getrandompicture</span><span class="keyword">(), </span><span class="default">$page</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
will call getrandompicture() once, ie it will insert the same random picture for each occurrence of ##randompicture## :(<br />
<br />
Here is my quick and dirty workaround:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">add_random_pictures</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) {<br />
<br />
&nbsp; while ((</span><span class="default">$i </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="string">"##randompicture##"</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">getrandompicture</span><span class="keyword">(), </span><span class="default">$i</span><span class="keyword">, </span><span class="default">strlen</span><span class="keyword">(</span><span class="string">"##randompicture##"</span><span class="keyword">));<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">$page </span><span class="keyword">= </span><span class="default">add_random_pictures</span><span class="keyword">(</span><span class="default">$page</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75146""></a>
  <div class="note">
   <strong class="user">user at nomail dot com</strong>
   <a href="#75146" class="date">15-May-2007 11:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a bit more useful when scanning a large string for all occurances between 'tags'.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getStrsBetween</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*====================================================================<br />
&nbsp;&nbsp;&nbsp; Function to scan a string for items encapsulated within a pair of tags<br />
<br />
&nbsp;&nbsp;&nbsp; getStrsBetween(string, tag1, &lt;tag2&gt;, &lt;offset&gt;<br />
<br />
&nbsp;&nbsp;&nbsp; If no second tag is specified, then match between identical tags<br />
<br />
&nbsp;&nbsp;&nbsp; Returns an array indexed with the encapsulated text, which is in turn<br />
&nbsp;&nbsp;&nbsp; a sub-array, containing the position of each item.<br />
<br />
&nbsp;&nbsp;&nbsp; Notes:<br />
&nbsp;&nbsp;&nbsp; strpos($needle,$haystack,$offset)<br />
&nbsp;&nbsp;&nbsp; substr($string,$start,$length)<br />
<br />
&nbsp;&nbsp;&nbsp; ====================================================================*/<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if( </span><span class="default">$s2 </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">) { </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$s1</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$L1 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$L2 </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if( </span><span class="default">$L1</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">|| </span><span class="default">$L2</span><span class="keyword">==</span><span class="default">0 </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">,</span><span class="default">$offset</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">+= </span><span class="default">$L1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos2 </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">$pos2 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key_len </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">- </span><span class="default">$pos1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this_key </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$pos1</span><span class="keyword">,</span><span class="default">$key_len</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$this_key</span><span class="keyword">,</span><span class="default">$result</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">][] = </span><span class="default">$pos1</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos2 </span><span class="keyword">+ </span><span class="default">$L2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos1 </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } while(</span><span class="default">$pos1 </span><span class="keyword">!== </span><span class="default">false </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74763""></a>
  <div class="note">
   <strong class="user">Rich Deeson</strong>
   <a href="#74763" class="date">26-Apr-2007 05:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a somewhat more efficient way to truncate a string at the end of a word. This will end the string on the last dot or last space, whichever is closer to the cut off point. In some cases, a full stop may not be followed by a space eg when followed by a HTML tag.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $shortstring </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$originalstring</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lastdot </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$shortstring</span><span class="keyword">, </span><span class="string">"."</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lastspace </span><span class="keyword">= </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$shortstring</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$shortstring </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$shortstring</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, (</span><span class="default">$lastdot </span><span class="keyword">&gt; </span><span class="default">$lastspace</span><span class="keyword">? </span><span class="default">$lastdot </span><span class="keyword">: </span><span class="default">$lastspace</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Obviously, if you only want to split on a space, you can simplify this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $shortstring </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$originalstring</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">400</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$shortstring </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$shortstring</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">strrpos</span><span class="keyword">(</span><span class="default">$shortstring</span><span class="keyword">, </span><span class="string">" "</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74286""></a>
  <div class="note">
   <strong class="user">gal_chen123 at hotmail dot co dot il</strong>
   <a href="#74286" class="date">03-Apr-2007 06:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function returns the text between 2 strings:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_between </span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, </span><span class="default">$s1</span><span class="keyword">, </span><span class="default">$s2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mid_url </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos_s </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pos_e </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,</span><span class="default">$s2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for ( </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$pos_s</span><span class="keyword">+</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$s1</span><span class="keyword">) ; ( ( </span><span class="default">$i </span><span class="keyword">&lt; (</span><span class="default">$pos_e</span><span class="keyword">)) &amp;&amp; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">) ) ; </span><span class="default">$i</span><span class="keyword">++ ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$mid_url </span><span class="keyword">.= </span><span class="default">$text</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$mid_url</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
if $s1 or $s2 are not found, $mid_url will be empty<br />
to add an offset, simply compare $pos_s to the offset, and only let it continue if the offset is smaller then $pos_s.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72466""></a>
  <div class="note">
   <strong class="user">jamie at jamiechong dot ca</strong>
   <a href="#72466" class="date">19-Jan-2007 09:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Try this function to find the first position of needle before a given offset. <br />
<br />
For example:<br />
<span class="default">&lt;?php<br />
$s </span><span class="keyword">= </span><span class="string">"This is a test a is This"</span><span class="keyword">;<br />
</span><span class="default">$offset </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">"test"</span><span class="keyword">);<br />
<br />
</span><span class="default">strnpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">"is"</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);&nbsp; </span><span class="comment">// returns 17<br />
</span><span class="default">strnpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">"is"</span><span class="keyword">, -</span><span class="default">$offset</span><span class="keyword">); </span><span class="comment">// returns 5<br />
<br />
// Works just like strpos if $offset is positive.<br />
// If $offset is negative, return the first position of needle<br />
// before before $offset.<br />
</span><span class="keyword">function </span><span class="default">strnpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$offset</span><span class="keyword">&gt;=</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)+</span><span class="default">$offset</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack</span><span class="keyword">=</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle</span><span class="keyword">=</span><span class="default">strrev</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$result</span><span class="keyword">!==</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">+=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">=</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)-</span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70394""></a>
  <div class="note">
   <strong class="user">spinicrus at gmail dot com</strong>
   <a href="#70394" class="date">14-Oct-2006 07:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want to get the position of a substring relative to a substring of your string, BUT in REVERSE way:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">strpos_reverse_way</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$charToFind</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$relativePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$relativeChar</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$relativePos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$searchChar </span><span class="keyword">!= </span><span class="default">$charToFind</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newPos </span><span class="keyword">= </span><span class="default">$searchPos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$searchChar </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$newPos</span><span class="keyword">,</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$charToFind</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$searchPos </span><span class="keyword">= </span><span class="default">$newPos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (!empty(</span><span class="default">$searchChar</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$searchPos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69927""></a>
  <div class="note">
   <strong class="user">admin at xylotspace dot com</strong>
   <a href="#69927" class="date">27-Sep-2006 04:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yay! I came up with a very useful function. This finds a beginning marker and an ending marker (the first after the beginning marker), and returns the contents between them. You specify an initial position in order to tell it where to start looking. You can use a while() or for() loop to get all occurence of a certain string within a string (for example, taking all hyperlinks in a string of HTML code)...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_middle</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">, </span><span class="default">$beginning</span><span class="keyword">, </span><span class="default">$ending</span><span class="keyword">, </span><span class="default">$init_pos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$beginning_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">, </span><span class="default">$beginning</span><span class="keyword">, </span><span class="default">$init_pos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$middle_pos </span><span class="keyword">= </span><span class="default">$beginning_pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$beginning</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ending_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">, </span><span class="default">$ending</span><span class="keyword">, </span><span class="default">$beginning_pos </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$middle </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$source</span><span class="keyword">, </span><span class="default">$middle_pos</span><span class="keyword">, </span><span class="default">$ending_pos </span><span class="keyword">- </span><span class="default">$middle_pos</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$middle</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
For example, to find the URL of the very first hyperlink in an HTML string $data, use:<br />
<br />
$first_url = get_middle($data, '&lt;a href="', '"', 0);<br />
<br />
It's done wonders for scraping HTML pages with certain tools on my website.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58688""></a>
  <div class="note">
   <strong class="user">dale at ucsc dot edu</strong>
   <a href="#58688" class="date">11-Nov-2005 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you want need a fast function to find the first occurrence of any ch element of an needle array this function might be of use: <br />
<span class="default">&lt;?php<br />
$eurl </span><span class="keyword">= </span><span class="default">strpos_needle_array</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, array(</span><span class="string">'"'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'\''</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">,</span><span class="string">'&gt;'</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">=&gt;</span><span class="default">0</span><span class="keyword">), </span><span class="default">$surl</span><span class="keyword">);<br />
<br />
function </span><span class="default">strpos_needle_array</span><span class="keyword">(&amp; </span><span class="default">$text</span><span class="keyword">, </span><span class="default">$needle_ary</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">){&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$ch_pos</span><span class="keyword">=</span><span class="default">$offset</span><span class="keyword">;</span><span class="default">$ch_pos</span><span class="keyword">&lt;</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);</span><span class="default">$ch_pos</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$needle_ary</span><span class="keyword">[</span><span class="default">$text</span><span class="keyword">[</span><span class="default">$ch_pos</span><span class="keyword">]])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$ch_pos</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49739""></a>
  <div class="note">
   <strong class="user">arias at elleondeoro dot com</strong>
   <a href="#49739" class="date">07-Feb-2005 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get all positions in an array, you can use this function. If the optional parameter count is especified, the function will put there the number of matches.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strallpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">=</span><span class="default">null</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$offset </span><span class="keyword">&gt; </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">)) </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">"strallpos(): Offset not contained in string."</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$match </span><span class="keyword">= array();<br />
&nbsp; for (</span><span class="default">$count</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">; ((</span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$pajar</span><span class="keyword">, </span><span class="default">$aguja</span><span class="keyword">, </span><span class="default">$offset</span><span class="keyword">)) !== </span><span class="default">false</span><span class="keyword">); </span><span class="default">$count</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$match</span><span class="keyword">[] = </span><span class="default">$pos</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$offset </span><span class="keyword">= </span><span class="default">$pos </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$aguja</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$match</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45088""></a>
  <div class="note">
   <strong class="user">philip</strong>
   <a href="#45088" class="date">26-Aug-2004 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Many people look for in_string which does not exist in PHP, so, here's the most efficient form of in_string() (that works in both PHP 4/5) that I can think of:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">in_string</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$insensitive </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$insensitive</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">stristr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false </span><span class="keyword">!== </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="41762""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#41762" class="date">22-Apr-2004 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Code like this:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (</span><span class="default">strpos</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"found it"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
gets repetitive, is not very self-explanatory, and most people handle it incorrectly anyway. Make your life easier:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_contains</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$ignoreCase </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$ignoreCase</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$needle&nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">strtolower</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">$needlePos </span><span class="keyword">=== </span><span class="default">false </span><span class="keyword">? </span><span class="default">false </span><span class="keyword">: (</span><span class="default">$needlePos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Then, you may do:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// simplest use<br />
</span><span class="keyword">if (</span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"Found it"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// when you need the position, as well whether it's present<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'is'</span><span class="keyword">);<br />
if (</span><span class="default">$needlePos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="comment">// you may also ignore case<br />
</span><span class="default">$needlePos </span><span class="keyword">= </span><span class="default">str_contains</span><span class="keyword">(</span><span class="string">'this is a test'</span><span class="keyword">, </span><span class="string">'IS'</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">);<br />
if (</span><span class="default">$needlePos</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">'Found it at position ' </span><span class="keyword">. (</span><span class="default">$needlePos</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40617""></a>
  <div class="note">
   <strong class="user">ebypdx at comcast dot net</strong>
   <a href="#40617" class="date">10-Mar-2004 02:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
counting the occurrences of a substring, recursive-style instead of looping.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">countSubstrs</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return ((</span><span class="default">$p </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">)) === </span><span class="default">false</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: (</span><span class="default">1 </span><span class="keyword">+ </span><span class="default">countSubstrs</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$p</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">), </span><span class="default">$needle</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38375""></a>
  <div class="note">
   <strong class="user">kingbusiness at hotmail dot com</strong>
   <a href="#38375" class="date">18-Dec-2003 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple function to find the number of occurances in a string within a string<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">StringCount</span><span class="keyword">(</span><span class="default">$searchstring</span><span class="keyword">, </span><span class="default">$findstring</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$searchstring</span><span class="keyword">, </span><span class="default">$findstring</span><span class="keyword">) === </span><span class="default">false </span><span class="keyword">? </span><span class="default">0 </span><span class="keyword">:&nbsp; </span><span class="default">count</span><span class="keyword">(</span><span class="default">split</span><span class="keyword">(</span><span class="default">$findstring</span><span class="keyword">, </span><span class="default">$searchstring</span><span class="keyword">)) - </span><span class="default">1</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.strpbrk.html">strpbrk</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.strrchr.html">strrchr</a></div>
 <div class="up"><a href="ref.strings.html">String 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
