<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>指定した名前で画像を書き込む</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="imagick.whitethresholdimage.html">Imagick::whiteThresholdImage</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="imagick.writeimagefile.html">Imagick::writeImageFile</a></div>
 <div class="up"><a href="class.imagick.html">Imagick</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="imagick.writeimage" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">Imagick::writeImage</h1>
  <p class="verinfo">(PECL imagick 0.9.0-0.9.9)</p><p class="refpurpose"><span class="refname">Imagick::writeImage</span> &mdash; <span class="dc-title">指定した名前で画像を書き込む</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-imagick.writeimage-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>Imagick::writeImage</strong></span>
    ([ <span class="methodparam"><span class="type">string</span> <code class="parameter">$filename</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   指定した名前で画像を書き込みます。filename パラメータが NULL の場合は、
   Imagick::ReadImage() あるいは Imagick::SetImageFilename()
   で設定した名前で書き込みます。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-imagick.writeimage-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">filename</code></em></span>
     <dd>

      <p class="para">
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-imagick.writeimage-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を返します。
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="110703""></a>
  <div class="note">
   <strong class="user">pfz at pfzone dot org</strong>
   <a href="#110703" class="date">25-Nov-2012 02:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With Imagick 3.1.0RC2, PHP4.8<br />
If you plan to overwrite the file you're working on, before doing writeImage, consider clearing the file buffer before the write statement : <br />
<br />
<span class="default">&lt;?php<br />
$image </span><span class="keyword">= new </span><span class="default">Imagick</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br />
</span><span class="comment">/* some processing */<br />
<br />
</span><span class="default">clearstatcache</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">));<br />
</span><span class="comment">// or<br />
</span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br />
</span><span class="default">$image</span><span class="keyword">-&gt;</span><span class="default">writeImage</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>It happened to me that the resulting file size was wrong. This could lead to truncation, as the file is not expanded.<br />
This happened while working on JPEG, and PNG. <br />
<br />
this line worked for me without this hack. <br />
<span class="default">&lt;?php<br />
file_put_contents</span><span class="keyword">(</span><span class="default">$your_file</span><span class="keyword">, </span><span class="default">$image</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Do not rely on getImageLength() for sending your image, especially when keepalive is ON. Content length is then relevant, and must be set. If the wrong size is given, your image will be truncated.<br />
Use filesize($your_file_) once written or strlen($image) instead (which renders your image and updates getImageLength() result).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104112""></a>
  <div class="note">
   <strong class="user">icinagle at gmail dot com</strong>
   <a href="#104112" class="date">24-May-2011 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to manipulate a uploaded file and then save the file all in the same request with Apache + mod_dav this will fail.<br />
mod_dav puts a lock on the file during the request where the file is uploaded so trying to save the smallest file, e.g. 1kb will fail with a "Failed to allocate memory" error.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="imagick.whitethresholdimage.html">Imagick::whiteThresholdImage</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="imagick.writeimagefile.html">Imagick::writeImageFile</a></div>
 <div class="up"><a href="class.imagick.html">Imagick</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
