<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>指定したオブジェクトのプロパティを取得する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.get-declared-traits.html">get_declared_traits</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.get-parent-class.html">get_parent_class</a></div>
 <div class="up"><a href="ref.classobj.html">クラス/オブジェクト関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.get-object-vars" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">get_object_vars</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">get_object_vars</span> &mdash; <span class="dc-title">指定したオブジェクトのプロパティを取得する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.get-object-vars-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>get_object_vars</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>
   )</div>

  <p class="para rdfs-comment">
   指定した <em><code class="parameter">object</code></em> について、
   そのスコープ内でアクセス可能な非 static プロパティを取得します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.get-object-vars-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">object</code></em></span>
     <dd>

      <p class="para">
       オブジェクトのインスタンス。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.get-object-vars-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   指定したオブジェクト <em><code class="parameter">object</code></em> について、
   そのスコープ内でアクセス可能な非 static プロパティを連想配列として返します。
   プロパティに値が設定されていない場合は、<strong><code>NULL</code></strong> 値が返されます。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.get-object-vars-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.0</td>
       <td>
        <em><code class="parameter">object</code></em> がオブジェクトではない場合に
        <span class="type"><a href="language.types.null.html" class="type NULL">NULL</a></span> を返すようになりました。
        これより前のバージョンでは、<strong><code>FALSE</code></strong> を返していました。
       </td>
      </tr>

      <tr>
       <td>4.2.0</td>
       <td>
        <em><code class="parameter">object</code></em> のクラスで宣言されているプロパティのうち、
        まだ値が代入されていないものも返すようになりました (値は <strong><code>NULL</code></strong> です)。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.get-object-vars-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5028">
    <p><strong>例1  <span class="function"><strong>get_object_vars()</strong></span> の使用例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$a</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$c</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;</span><span style="color: #0000BB">$d</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">test</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">get_object_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$test&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">get_object_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$test</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$test</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">test</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(2) {
  [&quot;b&quot;]=&gt;
  int(1)
  [&quot;c&quot;]=&gt;
  NULL
}
array(4) {
  [&quot;a&quot;]=&gt;
  NULL
  [&quot;b&quot;]=&gt;
  int(1)
  [&quot;c&quot;]=&gt;
  NULL
  [&quot;d&quot;]=&gt;
  NULL
}
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.get-object-vars-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.get-class-methods.html" class="function" rel="rdfs-seeAlso">get_class_methods()</a> - クラスメソッドの名前を取得する</span></li>
    <li class="member"> <span class="function"><a href="function.get-class-vars.html" class="function" rel="rdfs-seeAlso">get_class_vars()</a> - クラスのデフォルトプロパティを取得する</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113435""></a>
  <div class="note">
   <strong class="user">oom at oscarotero dot com</strong>
   <a href="#113435" class="date">10-Oct-2013 06:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use call_user_func() to return public variables from inside the class:<br />
<br />
class Test {<br />
&nbsp;&nbsp;&nbsp; protected $protected;<br />
&nbsp;&nbsp;&nbsp; public $public;<br />
&nbsp;&nbsp;&nbsp; private $private;<br />
<br />
&nbsp;&nbsp;&nbsp; public function getPublicVars () {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return call_user_func('get_object_vars', $this);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
$test = new Test();<br />
var_dump($test-&gt;getPublicVars()); // array("public" =&gt; NULL)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113126""></a>
  <div class="note">
   <strong class="user">jozef at mostka dot com</strong>
   <a href="#113126" class="date">03-Sep-2013 03:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
class A{<br />
&nbsp;&nbsp;&nbsp; private $priA;<br />
&nbsp;&nbsp;&nbsp; protected $proA;<br />
&nbsp;&nbsp;&nbsp; public $pubA;<br />
}<br />
<br />
class B extends A{<br />
&nbsp;&nbsp;&nbsp; private $priB;<br />
&nbsp;&nbsp;&nbsp; protected $proB;<br />
&nbsp;&nbsp;&nbsp; public $pubB;<br />
<br />
&nbsp;&nbsp;&nbsp; public function getVars(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array_diff_key(get_object_vars($this), get_class_vars(get_parent_class($this)));<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
$b = new B();<br />
var_dump($b-&gt;getVars());<br />
<br />
array(3) {<br />
&nbsp; ["priB"]=&gt;<br />
&nbsp; NULL<br />
&nbsp; ["proB"]=&gt;<br />
&nbsp; NULL<br />
&nbsp; ["pubB"]=&gt;<br />
&nbsp; NULL<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111946""></a>
  <div class="note">
   <strong class="user">kuko at webperfection dot net</strong>
   <a href="#111946" class="date">16-Apr-2013 08:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
get_object_vars($this)<br />
php5.3 + it returns only public and protected; NOT private vars</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111360""></a>
  <div class="note">
   <strong class="user">@chozilla</strong>
   <a href="#111360" class="date">11-Feb-2013 09:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple way to call this function within an Object and to only export the *public* params would be to artificially change the scope - for example with a closure in php 5.3:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Example<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$publicSetting </span><span class="keyword">= </span><span class="string">'public'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$protectedSetting </span><span class="keyword">= </span><span class="string">'protected'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$privateSetting </span><span class="keyword">= </span><span class="string">'private'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">showEverything</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">showMyPublicsOnly</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$me </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$publics </span><span class="keyword">= function() use (</span><span class="default">$me</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$me</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$publics</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108846""></a>
  <div class="note">
   <strong class="user">Fabien Haddadi</strong>
   <a href="#108846" class="date">30-May-2012 06:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems like there's no function that determines all the *static* variables of a class.<br />
<br />
I've come out with this one as I needed it in a project:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_class_static_vars</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">get_class_vars</span><span class="keyword">(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)), </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
It relies on an interesting property: the fact that get_object_vars only returns the non-static variables of an object.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108369""></a>
  <div class="note">
   <strong class="user">Dionisiy</strong>
   <a href="#108369" class="date">20-Apr-2012 03:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that before PHP 5.3.9 numeric object variables of unserialized object are not public, and get_object_vars() won't return them:<br />
https://bugs.php.net/bug.php?id=61774</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98785""></a>
  <div class="note">
   <strong class="user">elminster2031 at hotmail dot com</strong>
   <a href="#98785" class="date">07-Jul-2010 09:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Also note that this is recursive. For example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Sarah</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$Father</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$Mother</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Father&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">NULL</span><span class="keyword">; </span><span class="comment">//I don't know Sarah's Father<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Mother&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">NULL</span><span class="keyword">; </span><span class="comment">//I don't know Sarah's Mother<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
}<br />
class </span><span class="default">John_Connor</span><span class="keyword">{<br />
<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$Father</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$Mother</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">__construct</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Father&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">; </span><span class="comment">//John went back in time and fathered himself<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">Mother&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; new </span><span class="default">Sarah</span><span class="keyword">(); </span><span class="comment">//Sarah was his mom and his mate ewww<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">showParents</span><span class="keyword">(){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$John&nbsp; &nbsp; </span><span class="keyword">=&nbsp; &nbsp; new </span><span class="default">John_Connor</span><span class="keyword">();<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$John</span><span class="keyword">-&gt;</span><span class="default">showParents</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span><br />
You will see this outputs:<br />
<br />
array(2) {<br />
&nbsp; ["Father"]=&gt;<br />
&nbsp; object(John_Connor)#1 (2) {<br />
&nbsp;&nbsp;&nbsp; ["Father":"John_Connor":private]=&gt;<br />
&nbsp;&nbsp;&nbsp; object(John_Connor)#1 (2) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["Father":"John_Connor":private]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; *RECURSION*<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["Mother":"John_Connor":private]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; object(Sarah)#2 (2) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ["Father":"Sarah":private]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; NULL<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ["Mother":"Sarah":private]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; NULL<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; ["Mother":"John_Connor":private]=&gt;<br />
&nbsp;&nbsp;&nbsp; object(Sarah)#2 (2) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["Father":"Sarah":private]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; NULL<br />
&nbsp;&nbsp; &nbsp;&nbsp; ["Mother":"Sarah":private]=&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; NULL<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; ["Mother"]=&gt;<br />
&nbsp; object(Sarah)#2 (2) {<br />
&nbsp;&nbsp;&nbsp; ["Father":"Sarah":private]=&gt;<br />
&nbsp;&nbsp;&nbsp; NULL<br />
&nbsp;&nbsp;&nbsp; ["Mother":"Sarah":private]=&gt;<br />
&nbsp;&nbsp;&nbsp; NULL<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95315""></a>
  <div class="note">
   <strong class="user">benny at nospam dot com</strong>
   <a href="#95315" class="date">26-Dec-2009 10:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be aware of the fact that this is scope-sensitive. If you're calling this from an objects own method, then private and protected vars will be outputted as well. Call it from outside the object and the result will most likely be what you want to archive.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88659""></a>
  <div class="note">
   <strong class="user">huzursuz at mailinator dot com</strong>
   <a href="#88659" class="date">02-Feb-2009 05:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
better version of conv_obj, based on XML... this converts XML to an array... use it by<br />
<br />
<span class="default">&lt;?php<br />
$result </span><span class="keyword">= </span><span class="default">xmlobj2arr</span><span class="keyword">(</span><span class="default">simplexml_load_string</span><span class="keyword">(</span><span class="default">$xmlContent</span><span class="keyword">));<br />
<br />
function </span><span class="default">xmlobj2arr</span><span class="keyword">(</span><span class="default">$Data</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$Data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$Data</span><span class="keyword">) as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">xmlobj2arr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$Data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">xmlobj2arr</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">$Data</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84260""></a>
  <div class="note">
   <strong class="user">jon at websandbox dot net</strong>
   <a href="#84260" class="date">06-Jul-2008 06:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're using the SPL ArrayObject class (or similar, or the ArrayAccess interface), you may have noticed that it's difficult to loop through an object's properties.&nbsp; <br />
<br />
get_object_vars does not return the properties of an ArrayObject.&nbsp; The only workaround I can see is to use get_class_vars.<br />
<br />
<span class="default">&lt;?php<br />
$obj </span><span class="keyword">= new </span><span class="default">ArrayObject</span><span class="keyword">();<br />
</span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">[] = </span><span class="string">"1"</span><span class="keyword">;<br />
</span><span class="default">$obj</span><span class="keyword">[] = </span><span class="string">"2"</span><span class="keyword">;<br />
foreach(</span><span class="default">$obj </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;</span><span class="comment">// will iterate over the array, iterating over "1" and "2", but ignoring $obj-&gt;foo<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">); </span><span class="comment">// dumps the array values, ignores $obj-&gt;foo<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">); </span><span class="comment">// returns an empty array<br />
<br />
</span><span class="keyword">class </span><span class="default">Fart </span><span class="keyword">extends </span><span class="default">ArrayObject </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$foo </span><span class="keyword">= </span><span class="string">"bar"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$obj </span><span class="keyword">= new </span><span class="default">Fart</span><span class="keyword">();<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">); </span><span class="comment">// return an empty array<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">get_class_vars</span><span class="keyword">(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)); </span><span class="comment">// returns array("foo"=&gt;"bar"), Yay!<br />
<br />
/* The above works with subclasses as well */<br />
</span><span class="keyword">class </span><span class="default">Toot </span><span class="keyword">extends </span><span class="default">Fart </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$weeble </span><span class="keyword">= </span><span class="string">"wobble"</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">get_class_vars</span><span class="keyword">(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">)); <br />
</span><span class="comment">// returns array("weeble" =&gt; "wobble", "foo"=&gt;"bar"), Yay again!<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
So, to iterate over the properties of an ArrayObject, and not the array values:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$obj </span><span class="keyword">= new </span><span class="default">Toot</span><span class="keyword">(); </span><span class="comment">// which is a subclass of ArrayObject<br />
</span><span class="default">$props </span><span class="keyword">= </span><span class="default">get_class_vars</span><span class="keyword">(</span><span class="default">get_class</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">));<br />
foreach(</span><span class="default">$props </span><span class="keyword">as </span><span class="default">$prop </span><span class="keyword">=&gt; </span><span class="default">$defaultValue</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$prop</span><span class="keyword">; </span><span class="comment">// now you have the property name and&nbsp; its value<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83078""></a>
  <div class="note">
   <strong class="user">pardini at gmail dot com</strong>
   <a href="#83078" class="date">09-May-2008 01:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
get_object_vars() has confusing behaviour when called as get_object_vars($this) or similar: since a method inside a class definition can access private vars, apparently so can get_object_vars(), so it returns private vars as well. <br />
<br />
A simple workaround is to define a method that in itself calls get_object_vars, like:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getPublicObjectVars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br />
&nbsp; return </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">);<br />
}<br />
<br />
class </span><span class="default">Smth </span><span class="keyword">{<br />
&nbsp; private </span><span class="default">$notShown </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; public </span><span class="default">$shown </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
<br />
&nbsp; function </span><span class="default">test</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">); </span><span class="comment">// includes 'notShown'<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$vars </span><span class="keyword">= </span><span class="default">getPublicObjectVars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">); </span><span class="comment">// only 'shown'<br />
&nbsp; </span><span class="keyword">}<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79287""></a>
  <div class="note">
   <strong class="user">biga888 AT gmail</strong>
   <a href="#79287" class="date">19-Nov-2007 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just thought I would pass this on.<br />
<br />
Working with PHP 5.2.4<br />
<br />
In Windows this works by reading the vars from the passed in object and copying them to the vars of the current object.<br />
<br />
&nbsp;&nbsp;&nbsp; public function copyMe(User $user) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $varArray = get_object_vars($this);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $copyVarArray = get_object_vars($user);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($varArray as $key=&gt;$value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;$key = $copyVarArray[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
This did not work in Linux, I had to add another function to return the array of vars. Calling get_array_vars on the passed in object would return an empty array.<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; public function copyMe(User $user) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $varArray = $this-&gt;getArray();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $copyVarArray = $user-&gt;getArray();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($varArray as $key=&gt;$value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;$key = $copyVarArray[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function getArray() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return get_object_vars($this);<br />
&nbsp;&nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77717""></a>
  <div class="note">
   <strong class="user">firemouth at gmail dot com</strong>
   <a href="#77717" class="date">10-Sep-2007 03:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a slight modification of the previous poster's function.&nbsp; We ran into a problem using this function when we had a JS array nested inside a JS hash.<br />
<br />
Something like this...<br />
<br />
myHash = new Hash();<br />
myHash[address] = new Array();<br />
<br />
When we threw that at this function, it found the first hash as an object, and then using the previous poster's function, it did not consider the array as an "object."&nbsp; Instead it gave us a std_object type and we were unable to make any use of it.<br />
<br />
The modification we made was adding a check for is_array inside both the is_object and is_array checks when you call the function.&nbsp; This checks for an array inside either an object or a nested array.<br />
<br />
function conv_obj($Data){<br />
&nbsp;&nbsp;&nbsp; if(is_object($Data)){<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(get_object_vars($Data) as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_object($val) || is_array($val)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[$key]=conv_obj($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[$key]=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $ret;<br />
&nbsp;&nbsp;&nbsp; }elseif(is_array($Data)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($Data as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_object($val) || is_array($val)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[$key]=conv_obj($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ret[$key]=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $ret;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $Data;<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77100""></a>
  <div class="note">
   <strong class="user">C.H.</strong>
   <a href="#77100" class="date">15-Aug-2007 03:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function conv_obj($Data){<br />
&nbsp;&nbsp; &nbsp; if(is_object($Data)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; foreach(get_object_vars($Data) as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_object($val)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret[$key]=conv_obj($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret[$key]=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $ret;<br />
&nbsp;&nbsp; &nbsp; }elseif(is_array($Data)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; foreach($Data as $key=&gt;$val){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(is_object($val)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret[$key]=conv_obj($val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $ret[$key]=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $ret;<br />
&nbsp;&nbsp; &nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return $Data;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;}<br />
<br />
Very simple function to convert any Subobject to an array.<br />
Created it while working with Soap.<br />
For me as an beginner with PHP, very useful :o)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77066""></a>
  <div class="note">
   <strong class="user">thinice at gmail dot com</strong>
   <a href="#77066" class="date">13-Aug-2007 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To add to my previous comment - the error message should have meant same structure.<br />
<br />
As my implementation called for cross-class comparison.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75330""></a>
  <div class="note">
   <strong class="user">Maikel</strong>
   <a href="#75330" class="date">24-May-2007 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To follow the code of d11wtq (enquiries AT chriscorbyn.co.uk). I did this function to inspect all properties(public, private, protected) of object. <br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"content-type: text/plain"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Classes to test!<br />
</span><span class="keyword">class </span><span class="default">OtherClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$privateVarOtherClass </span><span class="keyword">= </span><span class="default">11</span><span class="keyword">;<br />
}<br />
<br />
class </span><span class="default">MyClass </span><span class="keyword">extends </span><span class="default">OtherClass<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$protectedVar </span><span class="keyword">= </span><span class="string">"some"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$publicVar </span><span class="keyword">= </span><span class="string">"nk"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$privateVar </span><span class="keyword">= </span><span class="string">"algo"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; var </span><span class="default">$oldStyle</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Dangerous function<br />
</span><span class="keyword">function </span><span class="default">get_properties</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$values</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$obj_dump&nbsp; </span><span class="keyword">= </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$matches </span><span class="keyword">=&nbsp; array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/^\s+\[(\w+).*\] =&gt; (\w*)/m'</span><span class="keyword">, </span><span class="default">$obj_dump</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$values</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$property</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output</span><span class="keyword">[</span><span class="default">$property</span><span class="keyword">] = </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$instance </span><span class="keyword">= new </span><span class="default">MyClass</span><span class="keyword">();<br />
<br />
echo </span><span class="string">"Properties\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_properties</span><span class="keyword">(</span><span class="default">$instance</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"Properties and values\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">get_properties</span><span class="keyword">(</span><span class="default">$instance</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: remember that static properties are not visible to the object. By that not supported to them</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73403""></a>
  <div class="note">
   <strong class="user">thiago dot henrique dot mata at gmail dot com</strong>
   <a href="#73403" class="date">21-Feb-2007 08:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment"># How to make a function change the private attributes<br />
# from some object without use serialize functions or<br />
# lose the control of the changes.<br />
<br />
/**<br />
&nbsp;* Parent Class to allow the change of privates attributes<br />
&nbsp;* Look the abstract function __setAttribute.<br />
&nbsp;*<br />
&nbsp;* @author Renan de Lima ( renandelima@gmail.com )<br />
&nbsp;* @author Thiago Mata ( thiago.henrique.mata@gmail.com )<br />
&nbsp;* @date 2007-02-21<br />
&nbsp;*/<br />
</span><span class="keyword">abstract class </span><span class="default">father<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Receive the Aray and try to change the attribute value<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param array $arrNewValues<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__fromDatabase</span><span class="keyword">( </span><span class="default">$arrNewValues </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrToSet </span><span class="keyword">= </span><span class="default">array_intersect_key</span><span class="keyword">( </span><span class="default">$arrNewValues</span><span class="keyword">, </span><span class="default">get_object_vars</span><span class="keyword">( </span><span class="default">$this </span><span class="keyword">) );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$arrToSet </span><span class="keyword">as </span><span class="default">$strAttribute </span><span class="keyword">=&gt; </span><span class="default">$mixValue </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">__setAttribute</span><span class="keyword">( </span><span class="default">$strAttribute </span><span class="keyword">, </span><span class="default">$mixValue </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Required method to control the attributes of class <br />
&nbsp;&nbsp; &nbsp; * @param string $strAttribute<br />
&nbsp;&nbsp; &nbsp; * @param unknown $mixValue<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">abstract protected function </span><span class="default">__setAttribute</span><span class="keyword">( </span><span class="default">$strAttribute</span><span class="keyword">, </span><span class="default">$mixValue </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Just a example of a child class using the functionality<br />
&nbsp;*<br />
&nbsp;* Note: if you don't wanna to allow the change of some attribute<br />
&nbsp;* by this method you can just make more complex the __setAttribute function.<br />
&nbsp;*<br />
&nbsp;* @author Renan de Lima ( renandelima@gmail.com )<br />
&nbsp;* @author Thiago Mata ( thiago.henrique.mata@gmail.com )<br />
&nbsp;* @date 2007-02-21<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">son </span><span class="keyword">extends </span><span class="default">father<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$atr </span><span class="keyword">= </span><span class="default">9</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * This is the most simple implementation of the method.<br />
&nbsp;&nbsp; &nbsp; * This way it's allowed to the parent class change any attribute<br />
&nbsp;&nbsp; &nbsp; * @param string $strAttribute<br />
&nbsp;&nbsp; &nbsp; * @param unknown $mixValue<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected function </span><span class="default">__setAttribute</span><span class="keyword">( </span><span class="default">$strAttribute</span><span class="keyword">, </span><span class="default">$mixValue </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;{ </span><span class="default">$strAttribute </span><span class="keyword">} = </span><span class="default">$mixValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
<br />
</span><span class="default">$objSon </span><span class="keyword">= new </span><span class="default">son</span><span class="keyword">();<br />
</span><span class="default">$objSon</span><span class="keyword">-&gt;</span><span class="default">__fromDatabase</span><span class="keyword">( array( </span><span class="string">'atr' </span><span class="keyword">=&gt; </span><span class="default">55 </span><span class="keyword">) );<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$objSon </span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62470""></a>
  <div class="note">
   <strong class="user">ananda dot putra at gmail dot com</strong>
   <a href="#62470" class="date">01-Mar-2006 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi all, I just wrote a function which dumps all the object propreties and its associations recursively into an array. Here it is..<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$_arr </span><span class="keyword">= </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) ? </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">) : </span><span class="default">$obj</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$_arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val </span><span class="keyword">= (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)) ? </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">) : </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example:<br />
You have an object like this:<br />
fruitsbasket Object<br />
(<br />
&nbsp;&nbsp;&nbsp; [Fruits] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; fruits Object<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Mango<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Green<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 10<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; fruits Object<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Apple<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Red<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 15<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; fruits Object<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Grape<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Purple<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [total_weight] =&gt; 30<br />
)<br />
<br />
just do:<br />
<span class="default">&lt;?php<br />
$the_array </span><span class="keyword">= </span><span class="default">object_to_array</span><span class="keyword">(</span><span class="default">$the_object</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$the_array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
it will produce an array:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [Fruits] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Mango<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Green<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 10<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Apple<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Red<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 15<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_name] =&gt; Grape<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_color] =&gt; Purple<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [_weight] =&gt; 5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [total_weight] =&gt; 30<br />
)<br />
<br />
I wish function like this could be usefull for you all. :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60029""></a>
  <div class="note">
   <strong class="user">support at sascha minus diebel dot de</strong>
   <a href="#60029" class="date">23-Dec-2005 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that get_object_vars() returns the variables of the object not the class. You need to know if your class is extended from a parent class.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58835""></a>
  <div class="note">
   <strong class="user">d11wtq (enquiries AT chriscorbyn.co.uk)</strong>
   <a href="#58835" class="date">17-Nov-2005 12:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since there's no apparent means of obtaining all the *private* properties in an object I wrote a little function to do it.&nbsp; Built in support would be much more efficient since mine uses a preg_&nbsp; search to do this....<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">get_private_properties</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">$inside</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$obj_dump&nbsp; </span><span class="keyword">= </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$obj</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">preg_match_all</span><span class="keyword">(</span><span class="string">'/^\s+\[(\w+):private\]/m'</span><span class="keyword">, </span><span class="default">$obj_dump</span><span class="keyword">, </span><span class="default">$matches</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$inside</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] as </span><span class="default">$property</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output</span><span class="keyword">[</span><span class="default">$property</span><span class="keyword">] = </span><span class="default">$obj</span><span class="keyword">-&gt;</span><span class="default">$property</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$output</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else return </span><span class="default">$matches</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">];<br />
} <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
So if you run it with the optional second paramter missing you'll just get an array of the variable names that are private inside the class.&nbsp; This is the only option if you are not inside the actual object and the object has no private properties inherited.<br />
<br />
If you run it with the second parameter set to true you will get an associative array with the properties and their corresponding values.&nbsp; I'd only advise to do that for singletons since you may get errors if there are any private properites in parents/children.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57758""></a>
  <div class="note">
   <strong class="user">pascal dot poncet at netconsult dot com</strong>
   <a href="#57758" class="date">13-Oct-2005 04:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Subject: using "sql_calc_found_rows" in a MySQL query while exploiting result in a PHP db class object.<br />
<br />
Hello,<br />
<br />
There is a nice function in MySQL that allows to know how many records would have been returned if no "where" clause were set : SQL_CALC_FOUND_ROWS.<br />
<br />
If you have create a db object to collect the returned lines, you will be a little perplex when trying to call the result of this function.<br />
<br />
Why ?<br />
Simply because the returned field's name is "found_rows()" and obviously it's not possible to call something like :<br />
<br />
<span class="default">&lt;?php $result</span><span class="keyword">-&gt;</span><span class="default">found_rows</span><span class="keyword">() </span><span class="default">?&gt;<br />
</span><br />
...as it will try to acces a method, not a property !<br />
<br />
Then, the only way to get the right result seems to be the use of a class function, like :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $db</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"select found_rows()"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">current</span><span class="keyword">(</span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">current</span><span class="keyword">(</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">result</span><span class="keyword">)));<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course, if somebody found an other way to solve it, like a special syntax (see the one used with curled arrays in a string), I'm really open to discuss.<br />
<br />
Good luck,<br />
Pascal</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56096""></a>
  <div class="note">
   <strong class="user">Marc</strong>
   <a href="#56096" class="date">23-Aug-2005 03:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to access all properties (private, protected, public) of a class and his base class(es) from outside the object you can take a look in the code below.<br />
You can even reffrence them.<br />
<br />
Example:<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Dummy class to act as parent class.<br />
</span><span class="keyword">class </span><span class="default">Dummy<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d1 </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected&nbsp; &nbsp; </span><span class="default">$d2 </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$d3 </span><span class="keyword">= </span><span class="default">3</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// The class to test on.<br />
</span><span class="keyword">class </span><span class="default">Test </span><span class="keyword">extends </span><span class="default">Dummy<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t1 </span><span class="keyword">= </span><span class="default">11</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected&nbsp; &nbsp; </span><span class="default">$t2 </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$t3 </span><span class="keyword">= </span><span class="default">13</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Instance of the test class.<br />
</span><span class="default">$test </span><span class="keyword">=&amp; new </span><span class="default">Test</span><span class="keyword">();<br />
<br />
</span><span class="comment">// The propertynames of the test class and his parent.<br />
</span><span class="default">$nameD1 </span><span class="keyword">= </span><span class="string">"\0Dummy\0d1"</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">// class Dummy, private&nbsp; &nbsp; &nbsp; $d1<br />
</span><span class="default">$nameD2 </span><span class="keyword">= </span><span class="string">"\0*\0d2"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class Dummy, protected $d2<br />
</span><span class="default">$nameD3 </span><span class="keyword">= </span><span class="string">"d3"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class Dummy, public&nbsp; &nbsp; $d3<br />
<br />
</span><span class="default">$nameT1 </span><span class="keyword">= </span><span class="string">"\0Test\0t1"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class Test,&nbsp; private&nbsp; &nbsp; &nbsp; $t1<br />
</span><span class="default">$nameT2 </span><span class="keyword">= </span><span class="string">"\0*\0t2"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class Test,&nbsp; protected $t2<br />
</span><span class="default">$nameT3 </span><span class="keyword">= </span><span class="string">"t3"</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// class Test,&nbsp; public&nbsp; &nbsp; $t3<br />
<br />
// Printing all members (private, protected, public) of test class and parent.<br />
// These are the values at construction.<br />
</span><span class="keyword">print(</span><span class="string">"Original object:\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Create new values to use as reffrence.<br />
</span><span class="default">$varD1 </span><span class="keyword">= </span><span class="default">31</span><span class="keyword">;<br />
</span><span class="default">$varD2 </span><span class="keyword">= </span><span class="default">32</span><span class="keyword">;<br />
</span><span class="default">$varD3 </span><span class="keyword">= </span><span class="default">33</span><span class="keyword">;<br />
<br />
</span><span class="default">$varT1 </span><span class="keyword">= </span><span class="default">41</span><span class="keyword">;<br />
</span><span class="default">$varT2 </span><span class="keyword">= </span><span class="default">42</span><span class="keyword">;<br />
</span><span class="default">$varT3 </span><span class="keyword">= </span><span class="default">43</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Reffrence these to the class properties.<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD1 </span><span class="keyword">=&amp; </span><span class="default">$varD1</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD2 </span><span class="keyword">=&amp; </span><span class="default">$varD2</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD3 </span><span class="keyword">=&amp; </span><span class="default">$varD3</span><span class="keyword">;<br />
<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT1 </span><span class="keyword">=&amp; </span><span class="default">$varT1</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT2 </span><span class="keyword">=&amp; </span><span class="default">$varT2</span><span class="keyword">;<br />
</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT3 </span><span class="keyword">=&amp; </span><span class="default">$varT3</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Printing all members (private, protected, public) of test class and parent.<br />
// The values have changed by assigning reffrence to them.<br />
</span><span class="keyword">print(</span><span class="string">"Object Changed by reffrence (1):\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Change the original values.<br />
// This will change the class properties.<br />
</span><span class="default">$varD1 </span><span class="keyword">= </span><span class="default">61</span><span class="keyword">;<br />
</span><span class="default">$varD1 </span><span class="keyword">= </span><span class="default">62</span><span class="keyword">;<br />
</span><span class="default">$varD1 </span><span class="keyword">= </span><span class="default">63</span><span class="keyword">;<br />
<br />
</span><span class="default">$varT1 </span><span class="keyword">= </span><span class="default">71</span><span class="keyword">;<br />
</span><span class="default">$varT1 </span><span class="keyword">= </span><span class="default">72</span><span class="keyword">;<br />
</span><span class="default">$varT1 </span><span class="keyword">= </span><span class="default">73</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Printing all members (private, protected, public) of test class and parent.<br />
// The values have changed because the variables $varXX have been changed.<br />
</span><span class="keyword">print(</span><span class="string">"Object Changed by reffrence (2):\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$d3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameD3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t1 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT1</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t2 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT2</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\t\$t3 = "</span><span class="keyword">.</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">$nameT3</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">);<br />
print(</span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Printing the object using print_r() shows the changes<br />
// have been done on the object.<br />
</span><span class="keyword">print(</span><span class="string">"Object Changed (print_r):\n"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">);<br />
print(</span><span class="string">"\n"</span><span class="keyword">);<br />
<br />
</span><span class="comment">// If you dont now the class propertynames you can get these by casting the<br />
// object to an array. The array keys are the names<br />
</span><span class="default">$prop </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">((array) </span><span class="default">$test</span><span class="keyword">);<br />
print(</span><span class="string">"Getting all class propertynames (print_r)\n"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$prop</span><span class="keyword">);<br />
<br />
</span><span class="comment">//Result<br />
/*<br />
<br />
Original object:<br />
&nbsp;&nbsp;&nbsp; $d1 = 1<br />
&nbsp;&nbsp;&nbsp; $d2 = 2<br />
&nbsp;&nbsp;&nbsp; $d3 = 3<br />
&nbsp;&nbsp;&nbsp; $t1 = 11<br />
&nbsp;&nbsp;&nbsp; $t2 = 12<br />
&nbsp;&nbsp;&nbsp; $t3 = 13<br />
<br />
Object Changed by reffrence (1):<br />
&nbsp;&nbsp;&nbsp; $d1 = 31<br />
&nbsp;&nbsp;&nbsp; $d2 = 32<br />
&nbsp;&nbsp;&nbsp; $d3 = 33<br />
&nbsp;&nbsp;&nbsp; $t1 = 41<br />
&nbsp;&nbsp;&nbsp; $t2 = 42<br />
&nbsp;&nbsp;&nbsp; $t3 = 43<br />
<br />
Object Changed by reffrence (2):<br />
&nbsp;&nbsp;&nbsp; $d1 = 63<br />
&nbsp;&nbsp;&nbsp; $d2 = 32<br />
&nbsp;&nbsp;&nbsp; $d3 = 33<br />
&nbsp;&nbsp;&nbsp; $t1 = 73<br />
&nbsp;&nbsp;&nbsp; $t2 = 42<br />
&nbsp;&nbsp;&nbsp; $t3 = 43<br />
<br />
Object Changed (print_r):<br />
Test Object<br />
(<br />
&nbsp;&nbsp;&nbsp; [t1:private] =&gt; 73<br />
&nbsp;&nbsp;&nbsp; [t2:protected] =&gt; 42<br />
&nbsp;&nbsp;&nbsp; [t3] =&gt; 43<br />
&nbsp;&nbsp;&nbsp; [d1:private] =&gt; 63<br />
&nbsp;&nbsp;&nbsp; [d2:protected] =&gt; 32<br />
&nbsp;&nbsp;&nbsp; [d3] =&gt; 33<br />
)<br />
<br />
Getting all class propertynames (print_r)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Test<br />
<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55406""></a>
  <div class="note">
   <strong class="user">stachnik at gmail dot com</strong>
   <a href="#55406" class="date">02-Aug-2005 06:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In PHP5 to get an array with all properties (even the private ones) all you have to do is write a public method that returns an array for your class:<br />
<br />
public function getArray()<br />
{<br />
&nbsp; return get_object_vars($this);<br />
}<br />
<br />
and then<br />
<br />
$myBeautifulArray = $myBeautifulObject-&gt;getArray ();<br />
<br />
Have BEAUTIFUL day :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47075""></a>
  <div class="note">
   <strong class="user">fmmarzoa at librexpresion dot org</strong>
   <a href="#47075" class="date">02-Nov-2004 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can still cast the object to an array to get all its members and see its visibility. Example:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">class </span><span class="default">Potatoe </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$skin</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$meat</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$roots</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct </span><span class="keyword">( </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$Obj </span><span class="keyword">= new </span><span class="default">Potatoe </span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
<br />
echo </span><span class="string">"&lt;pre&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">"Using get_object_vars:\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_object_vars </span><span class="keyword">( </span><span class="default">$Obj </span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$vars </span><span class="keyword">);<br />
<br />
echo </span><span class="string">"\n\nUsing array cast:\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$Arr </span><span class="keyword">= (array)</span><span class="default">$Obj</span><span class="keyword">;<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$Arr </span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will returns:<br />
<br />
Using get_object_vars:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [skin] =&gt; 1<br />
)<br />
<br />
Using array cast:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [skin] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [ * meat] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [ Potatoe roots] =&gt; 3<br />
)<br />
<br />
As you can see, you can obtain the visibility for each member from this cast. That which seems to be spaces into array keys are '\0' characters, so the general rule to parse keys seems to be:<br />
<br />
Public members: member_name<br />
Protected memebers: \0*\0member_name<br />
Private members: \0Class_name\0member_name<br />
<br />
I've wroten a obj2array function that creates entries without visibility for each key, so you can handle them into the array as it were within the object:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">obj2array </span><span class="keyword">( &amp;</span><span class="default">$Instance </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$clone </span><span class="keyword">= (array) </span><span class="default">$Instance</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rtn </span><span class="keyword">= array ();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">[</span><span class="string">'___SOURCE_KEYS_'</span><span class="keyword">] = </span><span class="default">$clone</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; while ( list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$clone</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aux </span><span class="keyword">= </span><span class="default">explode </span><span class="keyword">(</span><span class="string">"\0"</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$newkey </span><span class="keyword">= </span><span class="default">$aux</span><span class="keyword">[</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aux</span><span class="keyword">)-</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rtn</span><span class="keyword">[</span><span class="default">$newkey</span><span class="keyword">] = &amp;</span><span class="default">$rtn</span><span class="keyword">[</span><span class="string">'___SOURCE_KEYS_'</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$rtn</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I've created also a &lt;i&gt;bless&lt;/i&gt; function that works similar to Perl's bless, so you can further recast the array converting it in an object of an specific class:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">bless </span><span class="keyword">( &amp;</span><span class="default">$Instance</span><span class="keyword">, </span><span class="default">$Class </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if ( ! (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$Instance</span><span class="keyword">) ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// First get source keys if available<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if ( isset (</span><span class="default">$Instance</span><span class="keyword">[</span><span class="string">'___SOURCE_KEYS_'</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$Instance </span><span class="keyword">= </span><span class="default">$Instance</span><span class="keyword">[</span><span class="string">'___SOURCE_KEYS_'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Get serialization data from array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$serdata </span><span class="keyword">= </span><span class="default">serialize </span><span class="keyword">( </span><span class="default">$Instance </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$array_params</span><span class="keyword">, </span><span class="default">$array_elems</span><span class="keyword">) = </span><span class="default">explode </span><span class="keyword">(</span><span class="string">'{'</span><span class="keyword">, </span><span class="default">$serdata</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; list (</span><span class="default">$array_tag</span><span class="keyword">, </span><span class="default">$array_count</span><span class="keyword">) = </span><span class="default">explode </span><span class="keyword">(</span><span class="string">':'</span><span class="keyword">, </span><span class="default">$array_params</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$serdata </span><span class="keyword">= </span><span class="string">"O:"</span><span class="keyword">.</span><span class="default">strlen </span><span class="keyword">(</span><span class="default">$Class</span><span class="keyword">).</span><span class="string">":\"</span><span class="default">$Class</span><span class="string">\":</span><span class="default">$array_count</span><span class="string">:{"</span><span class="keyword">.</span><span class="default">$array_elems</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Instance </span><span class="keyword">= </span><span class="default">unserialize </span><span class="keyword">( </span><span class="default">$serdata </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$Instance</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
With these ones you can do things like:<br />
<br />
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">"SFCMS_DIR"</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">"/.."</span><span class="keyword">);<br />
require_once (</span><span class="default">SFCMS_DIR</span><span class="keyword">.</span><span class="string">"/Misc/bless.php"</span><span class="keyword">);<br />
<br />
class </span><span class="default">Potatoe </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$skin</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; protected </span><span class="default">$meat</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$roots</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">__construct </span><span class="keyword">( </span><span class="default">$s</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$r </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin </span><span class="keyword">= </span><span class="default">$s</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat </span><span class="keyword">= </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots </span><span class="keyword">= </span><span class="default">$r</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">PrintAll </span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"skin = "</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">skin</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"meat = "</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">meat</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"roots = "</span><span class="keyword">.</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">roots</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$Obj </span><span class="keyword">= new </span><span class="default">Potatoe </span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3 </span><span class="keyword">);<br />
<br />
echo </span><span class="string">"&lt;pre&gt;\n"</span><span class="keyword">;<br />
echo </span><span class="string">"Using get_object_vars:\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$vars </span><span class="keyword">= </span><span class="default">get_object_vars </span><span class="keyword">( </span><span class="default">$Obj </span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$vars </span><span class="keyword">);<br />
<br />
echo </span><span class="string">"\n\nUsing obj2array func:\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$Arr </span><span class="keyword">= </span><span class="default">obj2array</span><span class="keyword">(</span><span class="default">$Obj</span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$Arr </span><span class="keyword">);<br />
<br />
echo </span><span class="string">"\n\nSetting all members to 0.\n"</span><span class="keyword">;<br />
</span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">'skin'</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">'meat'</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$Arr</span><span class="keyword">[</span><span class="string">'roots'</span><span class="keyword">]=</span><span class="default">0</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"Converting the array into an instance of the original class.\n"</span><span class="keyword">;<br />
</span><span class="default">bless </span><span class="keyword">( </span><span class="default">$Arr</span><span class="keyword">, </span><span class="default">Potatoe </span><span class="keyword">);<br />
<br />
if ( </span><span class="default">is_object </span><span class="keyword">(</span><span class="default">$Arr</span><span class="keyword">) ) {<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="string">"\$Arr is now an object.\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$Arr </span><span class="keyword">instanceof </span><span class="default">Potatoe </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo </span><span class="string">"\$Arr is an instance of Potatoe class.\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$Arr</span><span class="keyword">-&gt;</span><span class="default">PrintAll</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="46903""></a>
  <div class="note">
   
   <a href="#46903" class="date">27-Oct-2004 05:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
actually, it's not entirely true that php5 will only return public members....php5 will return any variable IT HAS ACCESS TO<br />
<br />
In other words, if you do a get_class_variables($this) inside a class, you'll get everything - public, private, the whole shebang...really annoying since you can't check to see what's private/public without using reflection</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40515""></a>
  <div class="note">
   <strong class="user">manicdepressive AT mindless DOT com</strong>
   <a href="#40515" class="date">06-Mar-2004 04:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
more strange, strange behaviour: <br />
<br />
if you are trying to deep-copy an object with get_object_vars(), strange behaviour can accidentally clobber your original object properties.&nbsp; please read very, very carefully: <br />
<br />
get_object_vars() may either return references to *or* deep copies of the object's properties *depending on whether that property has been set with the -&gt; operator*.&nbsp;&nbsp; (this behaviour probably varies per php platform and os so please confirm for yourself.) <br />
<br />
furthermore, consider <br />
&nbsp; $properties = get_object_vars($obj);<br />
normally, unset()ting a reference does not affect the original, i.e. $ref = NULL; is not the same as unset($ref); per the references documentation.&nbsp; However, if you have this strange references version and you unset() an array element of $properties, it will *SET THE OBJECT PROPERTY TO NULL*, which is not how references normally work.&nbsp; <br />
<br />
even stranger behaviour comes into effect that i can only express with an example.&nbsp; please test this with your version and OS and proceed very carefully:<br />
--&gt;<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">"&lt;pre&gt;\n"</span><span class="keyword">;<br />
<br />
class </span><span class="default">Lump<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp; var </span><span class="default">$size </span><span class="keyword">= </span><span class="string">'average'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; function &amp; </span><span class="default">copy</span><span class="keyword">()<br />
&nbsp;&nbsp; {&nbsp; </span><span class="comment">// return a deep copy<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$copy </span><span class="keyword">= new </span><span class="default">Lump</span><span class="keyword">();&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$properties </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach( </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$properties </span><span class="keyword">) as </span><span class="default">$property </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$copy</span><span class="keyword">-&gt;</span><span class="default">$property </span><span class="keyword">= </span><span class="default">$properties</span><span class="keyword">[</span><span class="default">$property</span><span class="keyword">];&nbsp; </span><span class="comment">// deep, right?<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$copy</span><span class="keyword">;<br />
&nbsp;&nbsp; } <br />
<br />
}<br />
<br />
</span><span class="default">$lump </span><span class="keyword">= new </span><span class="default">Lump</span><span class="keyword">();<br />
<br />
</span><span class="default">$lump</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">= </span><span class="string">'huge'</span><span class="keyword">;&nbsp; </span><span class="comment">// &lt;--- this line changes everything<br />
// comment above line out, and see the difference<br />
// also, try substituting another property for 'size'<br />
<br />
</span><span class="default">$properties </span><span class="keyword">= </span><span class="default">get_object_vars</span><span class="keyword">(</span><span class="default">$lump</span><span class="keyword">);<br />
</span><span class="default">$properties</span><span class="keyword">[</span><span class="string">'size'</span><span class="keyword">] = </span><span class="string">'small'</span><span class="keyword">; </span><span class="comment">// this behavior varies<br />
<br />
</span><span class="keyword">echo </span><span class="string">"after changing the properties array:\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$lump </span><span class="keyword">);&nbsp; <br />
</span><span class="comment">// it's either big or small (never huge) depending on <br />
// whether you commented-out the indicated line<br />
<br />
//------------- let's try using our copy() method<br />
<br />
</span><span class="default">$original_lump </span><span class="keyword">= new </span><span class="default">Lump</span><span class="keyword">();<br />
</span><span class="default">$original_lump</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">= </span><span class="string">'huge'</span><span class="keyword">; </span><span class="comment">// this line changes the behaviour<br />
</span><span class="default">$other_lump </span><span class="keyword">=&amp; </span><span class="default">$original_lump</span><span class="keyword">-&gt;</span><span class="default">copy</span><span class="keyword">();<br />
unset( </span><span class="default">$other_lump</span><span class="keyword">-&gt;</span><span class="default">size </span><span class="keyword">);<br />
echo </span><span class="string">"after unsetting in copy:\n"</span><span class="keyword">;<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">$original_lump </span><span class="keyword">); </span><span class="comment">// i'm afraid so -- original value clobbered !<br />
<br />
</span><span class="keyword">echo </span><span class="string">"&lt;/pre&gt;\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>code till dawn, <br />
&nbsp;&nbsp; mark meves</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38624""></a>
  <div class="note">
   <strong class="user">christopher AT NOSPAM AT idealab DOT com</strong>
   <a href="#38624" class="date">31-Dec-2003 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hmmm.&nbsp; A bit embarassing...<br />
<br />
It turns out the best way to get references to all of your objects member variables is NOT with the functions I provided before, or with get_object_vars.<br />
<br />
Just cast the object to array.<br />
<br />
$a=(array)$obj;<br />
<br />
# The two following statements are now equivalent and identical<br />
$a["member"]=3;<br />
$obj-&gt;member=3;<br />
<br />
A very powerful tool, for inspectors and what not.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38482""></a>
  <div class="note">
   <strong class="user">christopher AT NOSPAM AT idealab DOT com</strong>
   <a href="#38482" class="date">23-Dec-2003 09:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that you cannot affect the object via the array values...in other words, the returned array does not contain references to the values within the object, but copies.<br />
<br />
If you are making an object inspector or editor, this is not good enough.&nbsp; So I made the following methods:<br />
<br />
METHODS:<br />
<br />
function &amp;getVar($obj, $name)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $expr="\$prop=&amp;\$obj-&gt;$name;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; eval($expr);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $prop;<br />
}<br />
<br />
function &amp;getObjectVars($obj)<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $result=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $vars=get_object_vars($obj);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($vars as $var =&gt; $value)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$var]=&amp;getVar(&amp;$obj, $var);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $result;<br />
}<br />
<br />
[NOTE:&nbsp; You must pass in a reference to an object, not an object.&nbsp; Sorry if this&nbsp; offends PHP'ers, but the distinction of pass-by-value and copy-on-assignment drives me batty (compared to Python, Java, Smalltalk), so I make all my functions pass by value, and force myself to pass in a reference to keep track of what is happening under the hood.]<br />
<br />
EXAMPLE:<br />
<br />
class Bob<br />
{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function Bob()<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;thing=13;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;other="whatever";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; var $thing;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; var $other;<br />
}<br />
<br />
$obj=&amp;new Bob();<br />
<br />
# NOTE:&nbsp; Passing in a reference!<br />
$props=getObjectVars(&amp;$obj);<br />
$props["thing"]=-11;<br />
<br />
var_dump($obj);<br />
<br />
RESULTS:<br />
<br />
object(bob)(2) {<br />
&nbsp; ["thing"]=&gt;<br />
&nbsp; &amp;int(-11)<br />
&nbsp; ["other"]=&gt;<br />
&nbsp; &amp;string(8) "whatever"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37187""></a>
  <div class="note">
   <strong class="user">jordi at laigu dot net</strong>
   <a href="#37187" class="date">06-Nov-2003 02:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case your object contains again OBJECTS or ARRAYS:<br />
<br />
function makeAssoc($res) {<br />
&nbsp; if (is_object($res)) $res = get_object_vars($res);<br />
&nbsp; while (list($key, $value) = each($res)) {<br />
&nbsp;&nbsp;&nbsp; if (is_object($value) || is_array($value)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $res[$key] = makeAssoc($value);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $res;<br />
}<br />
<br />
Thanks to mark at dreamzpace dot com</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30110""></a>
  <div class="note">
   <strong class="user">markus at emedia-solutions-wolf dot de</strong>
   <a href="#30110" class="date">06-Mar-2003 09:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi,<br />
<br />
I figured out that in prior version to 4.2 the returned array only contains attributes directly in this class, excluding the derived ones from parentclasses.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27079""></a>
  <div class="note">
   <strong class="user">info at phpken dot de</strong>
   <a href="#27079" class="date">22-Nov-2002 03:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
hello,<br />
<br />
this example will look like all values of vars was set in your class. write a method like the name: dumpClass and then fill in follow code:<br />
<br />
$vars = get_object_vars($this);<br />
<br />
echo "&lt;b&gt;class vars&lt;/b&gt;";<br />
<br />
foreach( $vars as $name =&gt; $value ) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;li&gt;".$name." : ".$value;<br />
}<br />
<br />
look at: get_object_vars($this);<br />
<br />
andreas v.l</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25189""></a>
  <div class="note">
   <strong class="user">mark at dreamzpace dot com</strong>
   <a href="#25189" class="date">13-Sep-2002 07:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case your object contains again objects (and so on), this function might be useful:<br />
<br />
function makeAssoc($res) {<br />
&nbsp; $res = get_object_vars($res);<br />
&nbsp; while (list($key, $value) = each($res)) {<br />
&nbsp;&nbsp;&nbsp; if (is_object($value)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $res[$key] = makeAssoc($value);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return $res;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="23105""></a>
  <div class="note">
   <strong class="user">nick_eby at bonzidev dot com</strong>
   <a href="#23105" class="date">09-Jul-2002 09:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Furthermore, variables not declared in the class but set on a given object, will be returned by get_object_vars().<br />
<br />
Example, ver. 4.2.1:<br />
&lt;?<br />
class MyTest {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; var $classVar1 = 'Class Var 1';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; var $classVar2;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; var $classVar3;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function MyTest()<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;classVar2 = 'class var 2';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
}<br />
<br />
$test = new MyTest();<br />
// This var isn't declared in the class<br />
$test-&gt;newObjVar = 'foobar';<br />
<br />
echo "&lt;pre&gt;";<br />
print_r(get_object_vars($test));<br />
echo "&lt;/pre&gt;";<br />
?&gt;<br />
<br />
The output is:<br />
Array<br />
(<br />
<br />
&nbsp;&nbsp;&nbsp; [classVar1] =&gt; Class Var 1<br />
&nbsp;&nbsp;&nbsp; [classVar2] =&gt; class var 2<br />
&nbsp;&nbsp;&nbsp; [classVar3] =&gt; <br />
&nbsp;&nbsp;&nbsp; [newObjVar] =&gt; foobar<br />
)<br />
<br />
Prior to version 4.2, classVar3 would not be output as it was never assigned a value.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22326""></a>
  <div class="note">
   <strong class="user">michael at tapinternet dot com</strong>
   <a href="#22326" class="date">14-Jun-2002 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It seems that get_object_vars will now return properties of an object even if they have no value&nbsp; - meaning only defined by var $foo in the class declaration.&nbsp; This is noted behaviour in 4.2.1 which is different from previous versions and hitherto undocumented on this page.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18611""></a>
  <div class="note">
   <strong class="user">florian at XCLUDETHISgsf dot de</strong>
   <a href="#18611" class="date">29-Jan-2002 07:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a strange behaviour, not sure whether it is a bug:<br />
<br />
if I call<br />
&lt;?<br />
$single_object = $data_array_of_objects[0];<br />
$array_of_objectvars = get_object_vars($single_object);<br />
&nbsp;&nbsp; &nbsp; foreach($array_of_objectvars as $key =&gt; $val) {<br />
&nbsp;&nbsp; &nbsp; echo(" $key =&gt; $val&lt;br&gt;");<br />
&nbsp;&nbsp; &nbsp; }<br />
?&gt;<br />
I get only _ONE_ line with the $key = first variable name of the object and $val = the values of _ALL_ variables of the object including the first separated by a space.<br />
<br />
NOW:<br />
if I call<br />
&lt;?<br />
$single_object = $data_array_of_objects[0];<br />
$array_of_objectvars = get_object_vars($single_object);<br />
&nbsp;&nbsp; &nbsp; foreach($array_of_objectvars as $key =&gt; $val) {<br />
&nbsp;&nbsp; &nbsp; echo(" $key =&gt; $val&lt;br&gt;");<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; echo($data_array_of_objects[0]-&gt;objectvar1."&lt;br&gt;");<br />
&nbsp;&nbsp; &nbsp; echo($data_array_of_objects[0]-&gt;objectvar2."&lt;br&gt;");<br />
?&gt;<br />
<br />
I get a list of $key = $ val as expected, before the other echos' are printed.<br />
It seems to me that get_object_vars works differently when you access a variable in those objects explicitly (as in the echos)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.get-declared-traits.html">get_declared_traits</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.get-parent-class.html">get_parent_class</a></div>
 <div class="up"><a href="ref.classobj.html">クラス/オブジェクト関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
