<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>検索文字列に一致したすべての文字列を置換する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.str-repeat.html">str_repeat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-rot13.html">str_rot13</a></div>
 <div class="up"><a href="ref.strings.html">String 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.str-replace" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">str_replace</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">str_replace</span> &mdash; <span class="dc-title">検索文字列に一致したすべての文字列を置換する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.str-replace-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>str_replace</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$search</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$replace</code></span>
   , <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$subject</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter reference">&$count</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   この関数は、<em><code class="parameter">subject</code></em> の中の
   <em><code class="parameter">search</code></em> を全て
   <em><code class="parameter">replace</code></em> に置換します。
  </p>
  <p class="para">
   (正規表現のような) 技巧的な置換ルールを必要としない場合、
    <span class="function"><a href="function.preg-replace.html" class="function">preg_replace()</a></span> の代わりにこの関数を常用するべきです。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.str-replace-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <em><code class="parameter">search</code></em> と <em><code class="parameter">replace</code></em>
   が配列の場合、 <span class="function"><strong>str_replace()</strong></span> は各配列から値をひとつ取り出し、
   <em><code class="parameter">subject</code></em> 上で検索と置換を行うために使用します。
   <em><code class="parameter">replace</code></em> の値が
   <em><code class="parameter">search</code></em> よりも少ない場合、
   置換される値の残りの部分には空の文字列が使用されます。
   <em><code class="parameter">search</code></em> が配列で
   <em><code class="parameter">replace</code></em> が文字列の場合、この置換文字列が
   <em><code class="parameter">search</code></em> の各値について使用されます。しかし、
   逆は意味がありません。
  </p>
  <p class="para">
   <em><code class="parameter">search</code></em> あるいは <em><code class="parameter">replace</code></em>
   が配列の場合は、配列の最初の要素から順に処理されます。
  </p>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">search</code></em></span>
     <dd>

      <p class="para">
       探したい値。<em class="emphasis">needle (針)</em> と呼ばれることもあります。
       配列を使えば、複数の値を指定することもできます。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">replace</code></em></span>
     <dd>

      <p class="para">
       見つかった <em><code class="parameter">search</code></em> を置き換える値。
       配列を使えば、複数の値を指定することもできます。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">subject</code></em></span>
     <dd>

      <p class="para">
       検索・置換の対象となる文字列あるいは配列。
       <em class="emphasis">haystack (干し草の山)</em> と呼ばれることもあります。
      </p>
      <p class="para">
       <em><code class="parameter">subject</code></em> が配列の場合、
       <em><code class="parameter">subject</code></em> の各エントリについて検索と置換が行われ、
       返り値は同様に配列となります。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">count</code></em></span>
     <dd>

      <p class="para">
       指定した場合は、マッチして置換が行われた箇所の個数がここに格納されます。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.str-replace-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   この関数は、置換後の文字列あるいは配列を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.str-replace-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.0.0</td>
       <td>
        <em><code class="parameter">count</code></em> パラメータが追加されました。
       </td>
      </tr>

      <tr>
       <td>4.3.3</td>
       <td>
        この関数の挙動がかわりました。以前のバージョンにはバグがあり、
        <em><code class="parameter">search</code></em> と <em><code class="parameter">replace</code></em>
        の両方に配列を指定した場合に、
        空の <em><code class="parameter">search</code></em> 添字をスキップしても
        <em><code class="parameter">replace</code></em> 配列上の内部ポインタが進みませんでした。
        このバグは PHP 4.3.3 で修正されたので、このバグを前提としたスクリプトは、
        この関数をコールする前に空の検索値を削除しておく必要があります。
       </td>
      </tr>

      <tr>
       <td>4.0.5</td>
       <td>
        ほとんどのパラメータに配列を渡せるようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.str-replace-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4851">
    <p><strong>例1 基本的な  <span class="function"><strong>str_replace()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;&lt;body&nbsp;text='black'&gt;&nbsp;となります<br /></span><span style="color: #0000BB">$bodytag&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%body%"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"black"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"&lt;body&nbsp;text='%body%'&gt;"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Hll&nbsp;Wrld&nbsp;f&nbsp;PHP&nbsp;となります<br /></span><span style="color: #0000BB">$vowels&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"e"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"i"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"o"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"u"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"A"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"E"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"I"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"O"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"U"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$onlyconsonants&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$vowels</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Hello&nbsp;World&nbsp;of&nbsp;PHP"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;You&nbsp;should&nbsp;eat&nbsp;pizza,&nbsp;beer,&nbsp;and&nbsp;ice&nbsp;cream&nbsp;every&nbsp;day&nbsp;となります<br /></span><span style="color: #0000BB">$phrase&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"You&nbsp;should&nbsp;eat&nbsp;fruits,&nbsp;vegetables,&nbsp;and&nbsp;fiber&nbsp;every&nbsp;day."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$healthy&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"fruits"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"vegetables"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"fiber"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$yummy&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"pizza"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"beer"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"ice&nbsp;cream"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$newphrase&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$healthy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$yummy</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$phrase</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;2&nbsp;となります<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"ll"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"good&nbsp;golly&nbsp;miss&nbsp;molly!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$count</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4852">
    <p><strong>例2  <span class="function"><strong>str_replace()</strong></span> に関するちょっとした事実</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;置換の順番を指定します<br /></span><span style="color: #0000BB">$str&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"Line&nbsp;1\nLine&nbsp;2\rLine&nbsp;3\r\nLine&nbsp;4\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$order&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"\r"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;まず最初に&nbsp;\r\n&nbsp;を置換するので、二重に変換されることはありません<br /></span><span style="color: #0000BB">$newstr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$order</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;出力は&nbsp;F&nbsp;となります。A&nbsp;が&nbsp;B&nbsp;に、そして&nbsp;B&nbsp;が&nbsp;C&nbsp;に、そして……<br />//&nbsp;最終的に&nbsp;E&nbsp;が&nbsp;F&nbsp;に置換されるからです。置換は左から右へと順に行われます<br /></span><span style="color: #0000BB">$search&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'A'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$replace&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'B'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'C'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'D'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'E'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'F'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$subject&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$search</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$replace</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$subject</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;出力は&nbsp;apearpearle&nbsp;pear&nbsp;となります<br />//&nbsp;上で説明したのと同じ理由です<br /></span><span style="color: #0000BB">$letters&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'p'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$fruit&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$text&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'a&nbsp;p'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$output&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">str_replace</span><span style="color: #007700">(</span><span style="color: #0000BB">$letters</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fruit</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$output</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.str-replace-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">この関数はバイナリデータに対応しています。
</span></p></blockquote>
  <div class="caution"><strong class="caution">警告</strong>
   <h1 class="title">置換の順番に関するメモ</h1>
   <p class="para">
     <span class="function"><strong>str_replace()</strong></span> は左から右へと置換を行うので、
    複数の置換を行うときには、前に追加された値を置換する可能性もあります。
    このドキュメントのサンプルを参照ください。
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    この関数は大文字小文字を区別します。区別せずに置換するには
     <span class="function"><a href="function.str-ireplace.html" class="function">str_ireplace()</a></span> を使用します。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.str-replace-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.str-ireplace.html" class="function" rel="rdfs-seeAlso">str_ireplace()</a> - 大文字小文字を区別しない str_replace</span></li>
    <li class="member"> <span class="function"><a href="function.substr-replace.html" class="function" rel="rdfs-seeAlso">substr_replace()</a> - 文字列の一部を置換する</span></li>
    <li class="member"> <span class="function"><a href="function.preg-replace.html" class="function" rel="rdfs-seeAlso">preg_replace()</a> - 正規表現検索および置換を行う</span></li>
    <li class="member"> <span class="function"><a href="function.strtr.html" class="function" rel="rdfs-seeAlso">strtr()</a> - 文字の変換あるいは部分文字列の置換を行う</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113690""></a>
  <div class="note">
   <strong class="user">omar dot technologies at gmail dot com</strong>
   <a href="#113690" class="date">17-Nov-2013 02:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is for arabic strings and names<br />
<br />
I've written a small series of str_replace to standardize Arabic names when comparing one name to another to find a match.<br />
<br />
Because a name can be entered in many many ways, and if you're trying to compare an exact LIKE or == .. if both the names aren't entered in the exactly written way, your comparison will return a false, even though it might have been the same name. <br />
<br />
This .. takes care of almost all possible exceptions. <br />
<br />
function cleanArabicName($name)<br />
{<br />
&nbsp;&nbsp;&nbsp; $name =&nbsp; str_replace(array("ا","أ","إ","آ","اَ","اً","اُ","اٌ","اِ","اٍ"),"ا",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("ه","ة"),"ة",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("ي","ى"),"ي",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("و","ؤ"),"و",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("ئ","ء"),"ئ",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("ْ","ـ"),"",$name);<br />
&nbsp;&nbsp;&nbsp; $name = str_replace(array("ﻹ","ﻷ","ﻻ","ﻵ"),"لا",$name);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $name;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113462""></a>
  <div class="note">
   <strong class="user">andrew at noob dot com</strong>
   <a href="#113462" class="date">14-Oct-2013 09:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to make it easy for Noobs;<br />
str_replace(FROM, TO, INPUT String);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112749""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#112749" class="date">19-Jul-2013 07:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@moostende at gmail dot com<br />
If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you CAN use str_replace !<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">foo</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"--"</span><span class="keyword">, </span><span class="string">"-"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } while (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
echo </span><span class="default">foo</span><span class="keyword">(</span><span class="string">"-aaa----b-c-----d--e---f"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This outputs the following: <br />
-aaa-b-c-d-e-f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112442""></a>
  <div class="note">
   <strong class="user">cmbecker69 at gmx dot de</strong>
   <a href="#112442" class="date">17-Jun-2013 10:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To collapse multiple consecutive space characters to a single one, don't use str_replace() inside a loop--use preg_replace() instead for clarity and better performance:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$str </span><span class="keyword">= </span><span class="string">' This is&nbsp; &nbsp; a&nbsp; &nbsp; test&nbsp;&nbsp; '</span><span class="keyword">;<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/ +/'</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111694""></a>
  <div class="note">
   <strong class="user">Daniel Loureiro</strong>
   <a href="#111694" class="date">18-Mar-2013 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you need to remove accents of string (ex. if you are a portuguese speaker), you can use this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">remove_accents</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">)<br />
{ <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$from </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"á"</span><span class="keyword">, </span><span class="string">"à"</span><span class="keyword">, </span><span class="string">"â"</span><span class="keyword">, </span><span class="string">"ã"</span><span class="keyword">, </span><span class="string">"ä"</span><span class="keyword">, </span><span class="string">"é"</span><span class="keyword">, </span><span class="string">"è"</span><span class="keyword">, </span><span class="string">"ê"</span><span class="keyword">, </span><span class="string">"ë"</span><span class="keyword">, </span><span class="string">"í"</span><span class="keyword">, </span><span class="string">"ì"</span><span class="keyword">, </span><span class="string">"î"</span><span class="keyword">, </span><span class="string">"ï"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"ó"</span><span class="keyword">, </span><span class="string">"ò"</span><span class="keyword">, </span><span class="string">"ô"</span><span class="keyword">, </span><span class="string">"õ"</span><span class="keyword">, </span><span class="string">"ö"</span><span class="keyword">, </span><span class="string">"ú"</span><span class="keyword">, </span><span class="string">"ù"</span><span class="keyword">, </span><span class="string">"û"</span><span class="keyword">, </span><span class="string">"ü"</span><span class="keyword">, </span><span class="string">"ç"</span><span class="keyword">, </span><span class="string">"Á"</span><span class="keyword">, </span><span class="string">"À"</span><span class="keyword">, </span><span class="string">"Â"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Ã"</span><span class="keyword">, </span><span class="string">"Ä"</span><span class="keyword">, </span><span class="string">"É"</span><span class="keyword">, </span><span class="string">"È"</span><span class="keyword">, </span><span class="string">"Ê"</span><span class="keyword">, </span><span class="string">"Ë"</span><span class="keyword">, </span><span class="string">"Í"</span><span class="keyword">, </span><span class="string">"Ì"</span><span class="keyword">, </span><span class="string">"Î"</span><span class="keyword">, </span><span class="string">"Ï"</span><span class="keyword">, </span><span class="string">"Ó"</span><span class="keyword">, </span><span class="string">"Ò"</span><span class="keyword">, </span><span class="string">"Ô"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"Õ"</span><span class="keyword">, </span><span class="string">"Ö"</span><span class="keyword">, </span><span class="string">"Ú"</span><span class="keyword">, </span><span class="string">"Ù"</span><span class="keyword">, </span><span class="string">"Û"</span><span class="keyword">, </span><span class="string">"Ü"</span><span class="keyword">, </span><span class="string">"Ç"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$to </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"e"</span><span class="keyword">, </span><span class="string">"e"</span><span class="keyword">, </span><span class="string">"e"</span><span class="keyword">, </span><span class="string">"e"</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, </span><span class="string">"i"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"o"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">, </span><span class="string">"u"</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"A"</span><span class="keyword">, </span><span class="string">"A"</span><span class="keyword">, </span><span class="string">"E"</span><span class="keyword">, </span><span class="string">"E"</span><span class="keyword">, </span><span class="string">"E"</span><span class="keyword">, </span><span class="string">"E"</span><span class="keyword">, </span><span class="string">"I"</span><span class="keyword">, </span><span class="string">"I"</span><span class="keyword">, </span><span class="string">"I"</span><span class="keyword">, </span><span class="string">"I"</span><span class="keyword">, </span><span class="string">"O"</span><span class="keyword">, </span><span class="string">"O"</span><span class="keyword">, </span><span class="string">"O"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"O"</span><span class="keyword">, </span><span class="string">"O"</span><span class="keyword">, </span><span class="string">"U"</span><span class="keyword">, </span><span class="string">"U"</span><span class="keyword">, </span><span class="string">"U"</span><span class="keyword">, </span><span class="string">"U"</span><span class="keyword">, </span><span class="string">"C"<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return&nbsp; &nbsp; </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$from</span><span class="keyword">, </span><span class="default">$to</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); <br />
}<br />
<br />
echo </span><span class="default">remove_accents</span><span class="keyword">(</span><span class="string">"Açaí não é maçã"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109487""></a>
  <div class="note">
   <strong class="user">kriscraig at php dot net</strong>
   <a href="#109487" class="date">21-Jul-2012 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Convert foreign 8859-1 characters into HTML entities.<br />
&nbsp;* <br />
&nbsp;* @param string $str<br />
&nbsp;*&nbsp;&nbsp; The string being parsed.<br />
&nbsp;* <br />
&nbsp;* @return string<br />
&nbsp;*&nbsp;&nbsp; The converted string.<br />
&nbsp;*/<br />
</span><span class="keyword">public static function </span><span class="default">convert_chars_to_entities</span><span class="keyword">( </span><span class="default">$str </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'À'</span><span class="keyword">, </span><span class="string">'&amp;#192;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Á'</span><span class="keyword">, </span><span class="string">'&amp;#193;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Â'</span><span class="keyword">, </span><span class="string">'&amp;#194;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ã'</span><span class="keyword">, </span><span class="string">'&amp;#195;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ä'</span><span class="keyword">, </span><span class="string">'&amp;#196;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Å'</span><span class="keyword">, </span><span class="string">'&amp;#197;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Æ'</span><span class="keyword">, </span><span class="string">'&amp;#198;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ç'</span><span class="keyword">, </span><span class="string">'&amp;#199;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'È'</span><span class="keyword">, </span><span class="string">'&amp;#200;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'É'</span><span class="keyword">, </span><span class="string">'&amp;#201;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ê'</span><span class="keyword">, </span><span class="string">'&amp;#202;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ë'</span><span class="keyword">, </span><span class="string">'&amp;#203;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ì'</span><span class="keyword">, </span><span class="string">'&amp;#204;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Í'</span><span class="keyword">, </span><span class="string">'&amp;#205;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Î'</span><span class="keyword">, </span><span class="string">'&amp;#206;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ï'</span><span class="keyword">, </span><span class="string">'&amp;#207;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ð'</span><span class="keyword">, </span><span class="string">'&amp;#208;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ñ'</span><span class="keyword">, </span><span class="string">'&amp;#209;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ò'</span><span class="keyword">, </span><span class="string">'&amp;#210;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ó'</span><span class="keyword">, </span><span class="string">'&amp;#211;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ô'</span><span class="keyword">, </span><span class="string">'&amp;#212;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Õ'</span><span class="keyword">, </span><span class="string">'&amp;#213;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ö'</span><span class="keyword">, </span><span class="string">'&amp;#214;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'×'</span><span class="keyword">, </span><span class="string">'&amp;#215;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ø'</span><span class="keyword">, </span><span class="string">'&amp;#216;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ù'</span><span class="keyword">, </span><span class="string">'&amp;#217;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ú'</span><span class="keyword">, </span><span class="string">'&amp;#218;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Û'</span><span class="keyword">, </span><span class="string">'&amp;#219;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ü'</span><span class="keyword">, </span><span class="string">'&amp;#220;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Ý'</span><span class="keyword">, </span><span class="string">'&amp;#221;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'Þ'</span><span class="keyword">, </span><span class="string">'&amp;#222;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ß'</span><span class="keyword">, </span><span class="string">'&amp;#223;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'à'</span><span class="keyword">, </span><span class="string">'&amp;#224;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'á'</span><span class="keyword">, </span><span class="string">'&amp;#225;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'â'</span><span class="keyword">, </span><span class="string">'&amp;#226;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ã'</span><span class="keyword">, </span><span class="string">'&amp;#227;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ä'</span><span class="keyword">, </span><span class="string">'&amp;#228;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'å'</span><span class="keyword">, </span><span class="string">'&amp;#229;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'æ'</span><span class="keyword">, </span><span class="string">'&amp;#230;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ç'</span><span class="keyword">, </span><span class="string">'&amp;#231;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'è'</span><span class="keyword">, </span><span class="string">'&amp;#232;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'é'</span><span class="keyword">, </span><span class="string">'&amp;#233;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ê'</span><span class="keyword">, </span><span class="string">'&amp;#234;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ë'</span><span class="keyword">, </span><span class="string">'&amp;#235;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ì'</span><span class="keyword">, </span><span class="string">'&amp;#236;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'í'</span><span class="keyword">, </span><span class="string">'&amp;#237;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'î'</span><span class="keyword">, </span><span class="string">'&amp;#238;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ï'</span><span class="keyword">, </span><span class="string">'&amp;#239;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ð'</span><span class="keyword">, </span><span class="string">'&amp;#240;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ñ'</span><span class="keyword">, </span><span class="string">'&amp;#241;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ò'</span><span class="keyword">, </span><span class="string">'&amp;#242;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ó'</span><span class="keyword">, </span><span class="string">'&amp;#243;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ô'</span><span class="keyword">, </span><span class="string">'&amp;#244;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'õ'</span><span class="keyword">, </span><span class="string">'&amp;#245;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ö'</span><span class="keyword">, </span><span class="string">'&amp;#246;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'÷'</span><span class="keyword">, </span><span class="string">'&amp;#247;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);&nbsp; </span><span class="comment">// Yeah, I know.&nbsp; But otherwise the gap is confusing.&nbsp; --Kris<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ø'</span><span class="keyword">, </span><span class="string">'&amp;#248;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ù'</span><span class="keyword">, </span><span class="string">'&amp;#249;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ú'</span><span class="keyword">, </span><span class="string">'&amp;#250;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'û'</span><span class="keyword">, </span><span class="string">'&amp;#251;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ü'</span><span class="keyword">, </span><span class="string">'&amp;#252;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ý'</span><span class="keyword">, </span><span class="string">'&amp;#253;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'þ'</span><span class="keyword">, </span><span class="string">'&amp;#254;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="string">'ÿ'</span><span class="keyword">, </span><span class="string">'&amp;#255;'</span><span class="keyword">, </span><span class="default">$str </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109365""></a>
  <div class="note">
   <strong class="user">bfrohs at gmail dot com</strong>
   <a href="#109365" class="date">11-Jul-2012 03:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function implements $limit for str_replace(); is 100% backward compatible with str_replace(); uses str_replace() whenever possible (for performance reasons); supports arrays for $search, $replace, and $subject; and is fully commented.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Replace $limit occurences of the search string with the replacement<br />
&nbsp;* @param mixed $search The value being searched for. An array may be used to<br />
&nbsp;* designate multiple needles.<br />
&nbsp;* @param mixed $replace The replacement value that replaces found search<br />
&nbsp;* values. An array may be used to designate multiple replacements.<br />
&nbsp;* @param mixed $subject The string or array being searched and replaced on. If<br />
&nbsp;* subject is an array, then the search and replace is performed with every<br />
&nbsp;* entry of subject, and the return value is an array as well. <br />
&nbsp;* @param string $count If passed, this will be set to the number of<br />
&nbsp;* replacements performed.<br />
&nbsp;* @param int $limit The maximum possible replacements for each pattern in each<br />
&nbsp;* subject string. Defaults to -1 (no limit).<br />
&nbsp;* @return string This function returns a string with the replaced values.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">str_replace_limit</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, &amp;</span><span class="default">$count</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;</span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;</span><span class="comment">// Invalid $limit provided<br />
&nbsp;</span><span class="keyword">if(!(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">strval</span><span class="keyword">(</span><span class="default">intval</span><span class="keyword">(</span><span class="default">strval</span><span class="keyword">(</span><span class="default">$limit</span><span class="keyword">))))){<br />
&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting an '</span><span class="keyword">.<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;</span><span class="comment">// Invalid $limit provided<br />
&nbsp;</span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">&lt;-</span><span class="default">1</span><span class="keyword">){<br />
&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting -1 or '</span><span class="keyword">.<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'a positive integer'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;</span><span class="comment">// No replacements necessary<br />
&nbsp;</span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br />
&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Invalid $limit `'</span><span class="keyword">.</span><span class="default">$limit</span><span class="keyword">.</span><span class="string">'` provided. Expecting -1 or '</span><span class="keyword">.<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'a positive integer'</span><span class="keyword">, </span><span class="default">E_USER_NOTICE</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;}<br />
&nbsp;</span><span class="comment">// Use str_replace() when possible<br />
&nbsp;</span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===-</span><span class="default">1</span><span class="keyword">){<br />
&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
&nbsp;}<br />
&nbsp;if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)){<br />
&nbsp; </span><span class="comment">// Loop through $subject values<br />
&nbsp; </span><span class="keyword">foreach(</span><span class="default">$subject </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$this_subject</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="comment">// Skip values that are arrays<br />
&nbsp;&nbsp; </span><span class="keyword">if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$this_subject</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Call this function again<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this_function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$subject</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$this_function</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$this_subject</span><span class="keyword">, </span><span class="default">$this_count</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Adjust $count<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">$this_count</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Adjust $limit<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">!=-</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$limit </span><span class="keyword">-= </span><span class="default">$this_count</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Reached $limit<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;} elseif(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">)){<br />
&nbsp; </span><span class="comment">// Clear keys of $search<br />
&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// Clear keys of $replace<br />
&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br />
&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="comment">// Loop through $search<br />
&nbsp; </span><span class="keyword">foreach(</span><span class="default">$search </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$this_search</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="comment">// Don't support multi-dimensional arrays<br />
&nbsp;&nbsp; </span><span class="default">$this_search </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$this_search</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// If $replace is an array, use $replace[$key] if exists, else ''<br />
&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$this_replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="comment">// Call this function again for<br />
&nbsp;&nbsp; </span><span class="default">$this_function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">$this_function</span><span class="keyword">(</span><span class="default">$this_search</span><span class="keyword">, </span><span class="default">$this_replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$this_count</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// Adjust $count<br />
&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">$this_count</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="comment">// Adjust $limit<br />
&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">!=-</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$limit </span><span class="keyword">-= </span><span class="default">$this_count</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="comment">// Reached $limit<br />
&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$limit</span><span class="keyword">===</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;} else {<br />
&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">strval</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// Get position of first $search<br />
&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// Return $subject if $search cannot be found<br />
&nbsp; </span><span class="keyword">if(</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="comment">// Get length of $search<br />
&nbsp; </span><span class="default">$search_len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// Loop until $search cannot be found or $limit is reached<br />
&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;((</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$limit</span><span class="keyword">)||(</span><span class="default">$limit</span><span class="keyword">===-</span><span class="default">1</span><span class="keyword">));</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$search_len</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// Increase $count<br />
&nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp; </span><span class="comment">// Get location of next $search<br />
&nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="comment">// Break out of loop<br />
&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; break;<br />
&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;}<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108777""></a>
  <div class="note">
   <strong class="user">eggmatters at gmail dot com</strong>
   <a href="#108777" class="date">24-May-2012 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed that if you use mysql_real_escape_string() before performing str_replace, it won't work. This may be dependent on the string being replaced. Specifically, the following, won't work:<br />
<br />
<span class="default">&lt;?php<br />
$formattedPost </span><span class="keyword">= </span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$formattedPost</span><span class="keyword">);<br />
</span><span class="default">$formattedPost </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\r\\n"</span><span class="keyword">, </span><span class="string">"&lt;br&gt;"</span><span class="keyword">, </span><span class="default">$comment</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Do this instead:<br />
<br />
<span class="default">&lt;?php<br />
$formattedPost </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\\r\\n"</span><span class="keyword">, </span><span class="string">"&lt;br&gt;"</span><span class="keyword">, </span><span class="default">$comment</span><span class="keyword">);<br />
</span><span class="default">$formattedPost </span><span class="keyword">= </span><span class="default">mysql_real_escape_string</span><span class="keyword">(</span><span class="default">$formattedPost</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108430""></a>
  <div class="note">
   <strong class="user">christof dot rieger at r-tron dot de</strong>
   <a href="#108430" class="date">26-Apr-2012 05:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In many countries the numeric format is 1.000,33 in english it is 1,000.33<br />
<br />
This function converts numeric arguments always into the PHP confirm numeric format. If only one seperator is into the numericstring so it is interpreted as the decimalpoint.<br />
<br />
&nbsp;function dp($zahl)<br />
{<br />
&nbsp; if ((strpos($zahl,".") &gt; "-1") | (strpos($zahl,",") &gt; "-1")) {<br />
&nbsp;&nbsp;&nbsp; if ((strpos($zahl,".") &gt; "-1") &amp; (strpos($zahl,",") &gt; "-1")) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (strpos($zahl,".") &gt; strpos($zahl,",")){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",","",$zahl);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",",".",str_replace(".","",$zahl));<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (strpos($zahl,".") &gt; "-1") {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strpos($zahl,".") == strrpos($zahl,".")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return $zahl;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(".","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (strpos($zahl,",") == strrpos($zahl,",")) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",",".",$zahl);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return str_replace(",","",$zahl);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; } }<br />
} else {<br />
&nbsp;&nbsp;&nbsp; return $zahl;<br />
} }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108196""></a>
  <div class="note">
   <strong class="user">Denzel Morris</strong>
   <a href="#108196" class="date">06-Apr-2012 11:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Maybe obvious to veteran PHP programmers but less so to novice PHP programmers is the fact that this is invalid:<br />
<span class="default">&lt;?php<br />
str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>At a glance it appears to be a reasonable request, until you realize that the fourth parameter must be a variable in order to be passed as a reference. A replacement:<br />
<span class="default">&lt;?php<br />
str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">);<br />
</span><span class="comment">// or<br />
</span><span class="default">$temp </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$temp</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108134""></a>
  <div class="note">
   <strong class="user">cc at cc dot com</strong>
   <a href="#108134" class="date">31-Mar-2012 02:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found a pretty low tech solution to avoid the "gotcha" without worrying about the array order of how things are replaced. I could not "order" the replacement array easily because it was being read from a database table.<br />
<br />
Anyway if you add an identifiable token to each replaced word, then just filter this out at the very end, no nested search terms are found. I just dynamically add the %% after the first char of each word before pumping it into the str_ireplace function.<br />
<br />
$find = array("as1", "as2", "as3", "flex");<br />
$replace = array("&lt;a href = \"#as1\"&gt;A%%uto S%%entry R%%ev. A%%&lt;/a&gt;", "&lt;a href = \"#as2\"&gt;A%%uto S%%entry E%%xp&lt;/a&gt;", "&lt;a href = \"#as3\"&gt;A%%uto S%%entry f%%lex&lt;/a&gt;", "&lt;a style = \"color: red;\" href = \"#flex\"&gt;f%%lex&lt;/a&gt;");<br />
$text = str_ireplace($find, $replace, $text);<br />
echo str_ireplace("%%", "", $text);<br />
<br />
In this case I am using %% as my token as this is an unlikely char combo for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105939""></a>
  <div class="note">
   <strong class="user">moostende at gmail dot com</strong>
   <a href="#105939" class="date">27-Sep-2011 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that this does not replace strings that become part of replacement strings. This may be a problem when you want to remove multiple instances of the same repetative pattern, several times in a row.<br />
<br />
If you want to remove all dashes but one from the string '-aaa----b-c-----d--e---f' resulting in '-aaa-b-c-d-e-f', you cannot use str_replace. Instead, use preg_replace:<br />
<br />
<span class="default">&lt;?php<br />
$challenge </span><span class="keyword">= </span><span class="string">'-aaa----b-c-----d--e---f'</span><span class="keyword">;<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'--'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
echo </span><span class="default">preg_replace</span><span class="keyword">(</span><span class="string">'/--+/'</span><span class="keyword">, </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$challenge</span><span class="keyword">).</span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This outputs the following:<br />
-aaa--b-c---d-e--f<br />
-aaa-b-c-d-e-f</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104890""></a>
  <div class="note">
   <strong class="user">mbullard at accuvista dot co dot uk</strong>
   <a href="#104890" class="date">14-Jul-2011 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Insert space after comma.<br />
<br />
If you have a form that stores results in a database field as comma separated values, when you display this data you can use the following to insert a space after each comma:<br />
<br />
<span class="default">&lt;?php<br />
$find</span><span class="keyword">[] = </span><span class="string">','</span><span class="keyword">;<br />
</span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'&amp;#44;&amp;nbsp;'</span><span class="keyword">;<br />
</span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$row_rsRecordset</span><span class="keyword">[</span><span class="string">'Field'</span><span class="keyword">]);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Notes:<br />
1) To get round the Replacement Order Gotcha, the comma is also replaced with its code equivalent: &amp;#44;<br />
2) You can adapt the $replace section to suit your needs: swap out the &amp;nbsp; code with &lt;br/&gt; or replace comma and space with &amp;nbsp;&amp;middot;&amp;nbsp; etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104774""></a>
  <div class="note">
   <strong class="user">hakre</strong>
   <a href="#104774" class="date">06-Jul-2011 05:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a str_replace function supporting callbacks. As I didn't found one I wrote one my own. Works exactly like str_replace, but the replace parameter is a callback or an array of callbacks (instead of string/strings in str_replace). The callback function accepts two arguments, the string that is being replaced and the count of the replacement being done.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* str_ureplace<br />
&nbsp;* <br />
&nbsp;* str_replace like function with callback<br />
&nbsp;* <br />
&nbsp;* @param string|array search<br />
&nbsp;* @param callback|array $replace<br />
&nbsp;* @param string|array $subject<br />
&nbsp;* @param int $replace_count<br />
&nbsp;* @return string|array subject with replaces, FALSE on error.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">str_ureplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">, &amp;</span><span class="default">$replace_count </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace_count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// validate input<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$search </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">((array) </span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$searchCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$searchCount</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$search </span><span class="keyword">as &amp;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v </span><span class="keyword">= (string) </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replaceSingle </span><span class="keyword">= </span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace </span><span class="keyword">= </span><span class="default">$replaceSingle </span><span class="keyword">? array(</span><span class="default">$replace</span><span class="keyword">) : </span><span class="default">array_values</span><span class="keyword">((array) </span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$replace </span><span class="keyword">as </span><span class="default">$index</span><span class="keyword">=&gt;</span><span class="default">$callback</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_callable</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">'Unable to use %s (#%d) as a callback'</span><span class="keyword">, </span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$callback</span><span class="keyword">), </span><span class="default">$index</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// search and replace<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$subjectIsString </span><span class="keyword">= </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= (array) </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$haystack</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">)) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$search </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$needle</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$needle</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replaceSingle </span><span class="keyword">&amp;&amp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">false </span><span class="keyword">!== </span><span class="default">$pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$needle</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$replaceWith </span><span class="keyword">= isset(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$needle</span><span class="keyword">, ++</span><span class="default">$replace_count</span><span class="keyword">) : </span><span class="string">''</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$haystack </span><span class="keyword">= </span><span class="default">substr_replace</span><span class="keyword">(</span><span class="default">$haystack</span><span class="keyword">, </span><span class="default">$replaceWith</span><span class="keyword">, </span><span class="default">$pos</span><span class="keyword">, </span><span class="default">$len</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset(</span><span class="default">$haystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$subjectIsString </span><span class="keyword">? </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">) : </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102465""></a>
  <div class="note">
   <strong class="user">jay_knows_(all)uk at hotmail dot com</strong>
   <a href="#102465" class="date">16-Feb-2011 04:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This strips out horrible MS word characters. <br />
<br />
Just keep fine tuning it until you get what you need, you'll see ive commented some out which caused problems for me.<br />
<br />
There could be some that need adding in, but its a start to anyone who wishes to make their own custom function.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">msword_conversion</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">) <br />
{ <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">130</span><span class="keyword">), </span><span class="string">','</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline single quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">131</span><span class="keyword">), </span><span class="string">'NLG'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// florin<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">132</span><span class="keyword">), </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// baseline double quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">133</span><span class="keyword">), </span><span class="string">'...'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// ellipsis<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">134</span><span class="keyword">), </span><span class="string">'**'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// dagger (a second footnote)<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">135</span><span class="keyword">), </span><span class="string">'***'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; </span><span class="comment">// double dagger (a third footnote)<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">136</span><span class="keyword">), </span><span class="string">'^'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// circumflex accent<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">137</span><span class="keyword">), </span><span class="string">'o/oo'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); </span><span class="comment">// permile<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">138</span><span class="keyword">), </span><span class="string">'Sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// S Hacek<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">139</span><span class="keyword">), </span><span class="string">'&lt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single guillemet<br />
// $str = str_replace(chr(140), 'OE', $str);&nbsp;&nbsp; // OE ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">145</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// left single quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">146</span><span class="keyword">), </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single quote<br />
// $str = str_replace(chr(147), '"', $str);&nbsp; &nbsp; // left double quote<br />
// $str = str_replace(chr(148), '"', $str);&nbsp; &nbsp; // right double quote<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">149</span><span class="keyword">), </span><span class="string">'-'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// bullet<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">150</span><span class="keyword">), </span><span class="string">'-–'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// endash<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">151</span><span class="keyword">), </span><span class="string">'--'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// emdash<br />
// $str = str_replace(chr(152), '~', $str);&nbsp; &nbsp; // tilde accent<br />
// $str = str_replace(chr(153), '(TM)', $str); // trademark ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">154</span><span class="keyword">), </span><span class="string">'sh'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// s Hacek<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">155</span><span class="keyword">), </span><span class="string">'&gt;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// right single guillemet<br />
// $str = str_replace(chr(156), 'oe', $str);&nbsp;&nbsp; // oe ligature<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">chr</span><span class="keyword">(</span><span class="default">159</span><span class="keyword">), </span><span class="string">'Y'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Y Dieresis<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'°C'</span><span class="keyword">, </span><span class="string">'&amp;deg;C'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">// Celcius is used quite a lot so it makes sense to add this in<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'£'</span><span class="keyword">, </span><span class="string">'&amp;pound;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">); <br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"'"</span><span class="keyword">, </span><span class="string">"'"</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'"'</span><span class="keyword">, </span><span class="string">'"'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
</span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'–'</span><span class="keyword">, </span><span class="string">'&amp;ndash;'</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">);<br />
<br />
return </span><span class="default">$str</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102144""></a>
  <div class="note">
   <strong class="user">mevdschee</strong>
   <a href="#102144" class="date">29-Jan-2011 12:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
say you want every "a" replaced by "abba" and every "b" replaced by "baab" in the string "ab" you do:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">"abba"</span><span class="keyword">,</span><span class="string">"baab"</span><span class="keyword">);<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
that results in "abaabbaababaab" and not the expected "abbabaab"<br />
<br />
I wrote this little snippet to solve the replacements-in-replacement problem:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">search_replace</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">,</span><span class="default">$sql</span><span class="keyword">)<br />
{ </span><span class="default">$e </span><span class="keyword">= </span><span class="string">'/('</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">,</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'preg_quote'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">)).</span><span class="string">')/'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$r </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">preg_replace_callback</span><span class="keyword">(</span><span class="default">$e</span><span class="keyword">, function(</span><span class="default">$v</span><span class="keyword">) use (</span><span class="default">$s</span><span class="keyword">,</span><span class="default">$r</span><span class="keyword">) { return </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$v</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]]; },</span><span class="default">$sql</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">search_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="string">"ab"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
that results in the expected "abbabaab"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100871""></a>
  <div class="note">
   <strong class="user">nikolaz dot tang at hotmail dot com</strong>
   <a href="#100871" class="date">12-Nov-2010 05:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A faster way to replace the strings in multidimensional array is to json_encode() it, do the str_replace() and then json_decode() it, like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_replace_json</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; return </span><span class="default">json_decode</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">,&nbsp; </span><span class="default">json_encode</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">)));<br />
<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This method is almost 3x faster (in 10000 runs.) than using recursive calling and looping method, and 10x simpler in coding.<br />
<br />
Compared to:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$oneSubject</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$oneSubject </span><span class="keyword">= </span><span class="default">str_replace_deep</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$oneSubject</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$oneSubject</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98511""></a>
  <div class="note">
   <strong class="user">apmuthu at usa dot net</strong>
   <a href="#98511" class="date">19-Jun-2010 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If we have a html template that contains placeholders in curly braces that need to be replaced in runtime, the following function will do it using str_replace:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">parse_template</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">) {<br />
</span><span class="comment">// example template variables {a} and {bc}<br />
// example $data array<br />
// $data = Array("a" =&gt; 'one', "bc" =&gt; 'two');<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">file_get_contents</span><span class="keyword">(</span><span class="default">$filename</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$q </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'{'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'}'</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$q</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$q</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98370""></a>
  <div class="note">
   <strong class="user">cableray</strong>
   <a href="#98370" class="date">11-Jun-2010 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you wish to get around the 'gotcha', you could do something like this:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$find</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'p'</span><span class="keyword">, </span><span class="string">'^'</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'^'</span><span class="keyword">, </span><span class="string">'*'</span><span class="keyword">, </span><span class="string">'apple'</span><span class="keyword">, </span><span class="string">'pear'</span><span class="keyword">);<br />
</span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="string">'a p'</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The idea here is that you first replace the items you want with unique identifiers (that you are unlikely to find in the subject) and then search for those identifiers and then replace them.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97904""></a>
  <div class="note">
   <strong class="user">christian dot reinecke at web dot de</strong>
   <a href="#97904" class="date">14-May-2010 09:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to replace a string in another, but only once but still in all possible combinations (f.e. to replace "a" with "x" in "aba" to get array("xba", "abx")) you can use this function:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$with</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$splits </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$inHaystack</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">, </span><span class="default">$ix </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$ix</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$previous </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$splits</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$combine&nbsp; </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">) . </span><span class="default">$with </span><span class="keyword">. </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$next</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">implode</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">, </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$previous</span><span class="keyword">, array(</span><span class="default">$combine</span><span class="keyword">), </span><span class="default">$next</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">getSingleReplaceCombinations</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"x"</span><span class="keyword">, </span><span class="string">"aba"</span><span class="keyword">)); </span><span class="comment">// result as mentioned above<br />
</span><span class="default">?&gt;<br />
</span>It may not be the best in performance, but it works.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97574""></a>
  <div class="note">
   <strong class="user">jbarnett at jmbelite dot com</strong>
   <a href="#97574" class="date">26-Apr-2010 10:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Might be worth mentioning that a SIMPLE way to accomplish Example 2 (potential gotchas) is to simply start your "replacements" in reverse.<br />
<br />
So instead of starting from "A" and ending with "E":<br />
<br />
<span class="default">&lt;?php<br />
$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="comment">// replaces A to B, B to C, C to D, D to E, E to F (makes them all F)<br />
// start from "E" and end with "A":<br />
<br />
</span><span class="default">$search&nbsp; </span><span class="keyword">= array(</span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'A'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'F'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">);<br />
</span><span class="comment">// replaces E to F, D to E, C to D, B to C, A to B (prevents from<br />
// multiple replacements of already replaced values)<br />
</span><span class="default">?&gt;<br />
</span><br />
So basically start from the "end" and put the replacements in an order where the "replaced value" won't equal a value that exists later in the "search array".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97526""></a>
  <div class="note">
   <strong class="user">pjcdawkins at googlemail dot com</strong>
   <a href="#97526" class="date">24-Apr-2010 02:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a deep replace function allowing multi-dimensional arrays in $search, $replace and $subject. The keys and other structure of $subject are preserved.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Auxiliary function:<br />
</span><span class="keyword">function </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$search</span><span class="keyword">=array(</span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$replace</span><span class="keyword">=array(</span><span class="default">$replace</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$match</span><span class="keyword">=</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">$search</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
&nbsp; if(</span><span class="default">$match</span><span class="keyword">!==</span><span class="default">false </span><span class="keyword">&amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$match</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$subject</span><span class="keyword">=</span><span class="default">$replace</span><span class="keyword">[</span><span class="default">$match</span><span class="keyword">];<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Main function:<br />
</span><span class="keyword">function </span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">){<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$subject</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">deepReplace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">_replaceWithAnything</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">,</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97374""></a>
  <div class="note">
   <strong class="user">fleshgrinder at gmx dot at</strong>
   <a href="#97374" class="date">16-Apr-2010 02:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fast function to replace new lines from a given string. This is interesting to replace all new lines from e. g. a text formatted in HTML retrieved from database and printing it without the unnecessary new lines. This results in slightly faster rendering in the Web browser.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* Replace all linebreaks with one whitespace.<br />
&nbsp;* <br />
&nbsp;* @access public<br />
&nbsp;* @param string $string<br />
&nbsp;*&nbsp;&nbsp; The text to be processed.<br />
&nbsp;* @return string<br />
&nbsp;*&nbsp;&nbsp; The given text without any linebreaks.<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">replace_newline</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) {<br />
&nbsp; return (string)</span><span class="default">str_replace</span><span class="keyword">(array(</span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95198""></a>
  <div class="note">
   <strong class="user">Wes Foster</strong>
   <a href="#95198" class="date">17-Dec-2009 10:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Feel free to optimize this using the while/for or anything else, but this is a bit of code that allows you to replace strings found in an associative array.<br />
<br />
For example:<br />
<span class="default">&lt;?php<br />
$replace </span><span class="keyword">= array(<br />
</span><span class="string">'dog' </span><span class="keyword">=&gt; </span><span class="string">'cat'</span><span class="keyword">,<br />
</span><span class="string">'apple' </span><span class="keyword">=&gt; </span><span class="string">'orange'<br />
'chevy' </span><span class="keyword">=&gt; </span><span class="string">'ford'<br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">'I like to eat an apple with my dog in my chevy'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">str_replace_assoc</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">,</span><span class="default">$string</span><span class="keyword">);<br />
<br />
</span><span class="comment">// Echo: I like to eat an orange with my cat in my ford<br />
</span><span class="default">?&gt;<br />
</span><br />
Here is the function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">strReplaceAssoc</span><span class="keyword">(array </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {<br />
&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$replace</span><span class="keyword">), </span><span class="default">$subject</span><span class="keyword">);&nbsp; &nbsp; <br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
[Jun 1st, 2010 - EDIT BY thiago AT php DOT net: Function has been replaced with an updated version sent by ljelinek AT gmail DOT com]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94387""></a>
  <div class="note">
   <strong class="user">Chris</strong>
   <a href="#94387" class="date">01-Nov-2009 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Compress a string's internal spaces:<br />
<span class="default">&lt;?php<br />
$str </span><span class="keyword">= </span><span class="string">' This is&nbsp; &nbsp; a&nbsp; &nbsp; test&nbsp;&nbsp; '</span><span class="keyword">;<br />
</span><span class="default">$count </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
while(</span><span class="default">$count</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$str </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'&nbsp; '</span><span class="keyword">, </span><span class="string">' '</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94073""></a>
  <div class="note">
   <strong class="user">Decko</strong>
   <a href="#94073" class="date">15-Oct-2009 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As mentioned earlier you should take the order into account when substituting multiple values.<br />
<br />
However it is worth noticing that str_replace doesn't seem to re-read the string when doing single replacements. Take the following example.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $s </span><span class="keyword">= </span><span class="string">'/a/a/'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/a/'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
You would expect the following.<br />
<br />
First replacement '/a/a/' -&gt; '/a/'<br />
Second replacement '/a/'-&gt;'/'<br />
<br />
This is not the case, the actual result will be '/a/'.<br />
<br />
To fix this, you will have to put str_replace in a while-loop.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $s </span><span class="keyword">= </span><span class="string">'/a/a/'</span><span class="keyword">;<br />
&nbsp; while(</span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">'/a/'</span><span class="keyword">) !== </span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'/a/'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">); </span><span class="comment">//eventually $s will == '/'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91536""></a>
  <div class="note">
   <strong class="user">Alberto Lepe</strong>
   <a href="#91536" class="date">16-Jun-2009 04:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be careful when replacing characters (or repeated patterns in the FROM and TO arrays):<br />
<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
$arrFrom </span><span class="keyword">= array(</span><span class="string">"1"</span><span class="keyword">,</span><span class="string">"2"</span><span class="keyword">,</span><span class="string">"3"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">);<br />
</span><span class="default">$arrTo </span><span class="keyword">= array(</span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"D"</span><span class="keyword">);<br />
</span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$arrFrom</span><span class="keyword">, </span><span class="default">$arrTo</span><span class="keyword">, </span><span class="default">$word</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
I would expect as result: "ZDDB"<br />
However, this return: "ZDDD"<br />
(Because B = D according to our array)<br />
<br />
To make this work, use "strtr" instead:<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">"1" </span><span class="keyword">=&gt; </span><span class="string">"A"</span><span class="keyword">,</span><span class="string">"2" </span><span class="keyword">=&gt; </span><span class="string">"B"</span><span class="keyword">,</span><span class="string">"3" </span><span class="keyword">=&gt; </span><span class="string">"C"</span><span class="keyword">,</span><span class="string">"B" </span><span class="keyword">=&gt; </span><span class="string">"D"</span><span class="keyword">);<br />
</span><span class="default">$word </span><span class="keyword">= </span><span class="string">"ZBB2"</span><span class="keyword">;<br />
echo </span><span class="default">strtr</span><span class="keyword">(</span><span class="default">$word</span><span class="keyword">,</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
This returns: "ZDDB"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91035""></a>
  <div class="note">
   <strong class="user">moz667 at gmail dot com</strong>
   <a href="#91035" class="date">21-May-2009 06:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
This is a function for made recursive str_replaces in an array<br />
*/<br />
</span><span class="keyword">function </span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, &amp;</span><span class="default">$data</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$data </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$data</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array();<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"a"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"ba"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'b'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"bb"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"c"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'a'</span><span class="keyword">] = </span><span class="string">"da"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'b'</span><span class="keyword">] = </span><span class="string">"db"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'c'</span><span class="keyword">] = </span><span class="string">"dc"</span><span class="keyword">;<br />
</span><span class="default">$a</span><span class="keyword">[</span><span class="string">'d'</span><span class="keyword">][</span><span class="string">'d'</span><span class="keyword">] = </span><span class="string">"dd"</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"Before Replaces"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">recursive_array_replace</span><span class="keyword">(</span><span class="string">"a"</span><span class="keyword">, </span><span class="string">"XXXX"</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"After Replaces"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88569""></a>
  <div class="note">
   <strong class="user">michael dot moussa at gmail dot com</strong>
   <a href="#88569" class="date">29-Jan-2009 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As previous commentators mentioned, when $search contains values that occur earlier in $replace, str_replace will factor those previous replacements into the process rather than operating solely on the original string.&nbsp; This may produce unexpected output.<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'FFFFFF'<br />
</span><span class="default">?&gt;<br />
</span><br />
In the above code, the $search and $replace should replace each occurrence in the $subject with the next letter in the alphabet.&nbsp; The expected output for this sample is 'BCDEF'; however, the actual output is 'FFFFF'.<br />
<br />
To more clearly illustrate this, consider the following example:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'A'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'F'<br />
</span><span class="default">?&gt;<br />
</span><br />
Since 'A' is the only letter in the $search array that appears in $subject, one would expect the result to be 'B'; however, replacement number $n does *not* operate on $subject, it operates on $subject after the previous $n-1 replacements have been completed.<br />
<br />
The following function utilizes array_combine and strtr to produce the expected output, and I believe it is the most efficient way to perform the desired string replacement without prior replacements affecting the final result.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
* When using str_replace(...), values that did not exist in the original string (but were put there by previous<br />
* replacements) will be replaced continuously.&nbsp; This string replacement function is designed replace the values<br />
* in $search with those in $replace while not factoring in prior replacements.&nbsp; Note that this function will<br />
* always look for the longest possible match first and then work its way down to individual characters.<br />
*<br />
* The "o" in "stro_replace" represents "original", indicating that the function operates only on the original string.<br />
*<br />
* @param array $search list of strings or characters that need to be replaced<br />
* @param array $replace list of strings or characters that will replace the corresponding values in $search<br />
* @param string $subject the string on which this operation is being performed<br />
*<br />
* @return string $subject with all substrings in the $search array replaced by the values in the $replace array<br />
*/<br />
</span><span class="keyword">function </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">strtr</span><span class="keyword">( </span><span class="default">$subject</span><span class="keyword">, </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">) );<br />
}<br />
<br />
</span><span class="default">$search </span><span class="keyword">= array(</span><span class="string">'A'</span><span class="keyword">, </span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'B'</span><span class="keyword">, </span><span class="string">'C'</span><span class="keyword">, </span><span class="string">'D'</span><span class="keyword">, </span><span class="string">'E'</span><span class="keyword">, </span><span class="string">'F'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'ABCDE'</span><span class="keyword">;<br />
<br />
echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: 'BCDEF'<br />
</span><span class="default">?&gt;<br />
</span><br />
Some other examples:<br />
<br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">' '</span><span class="keyword">, </span><span class="string">'&amp;'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'&amp;nbsp;'</span><span class="keyword">, </span><span class="string">'&amp;amp;'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'Hello &amp; goodbye!'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// We want to replace the spaces with &amp;nbsp; and the ampersand with &amp;amp;<br />
</span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;amp;nbsp&amp;amp;&amp;amp;nbspgoodbye!" - wrong!<br />
<br />
</span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "Hello&amp;nbsp;&amp;amp;&amp;nbsp;goodbye!" - correct!<br />
<br />
/*<br />
&nbsp;&nbsp;&nbsp; Note:&nbsp; Run the above code in the CLI or view source on your web browser - the replacement strings for stro_replace are HTML entities which the browser interprets.<br />
*/<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
$search </span><span class="keyword">= array(</span><span class="string">'ERICA'</span><span class="keyword">, </span><span class="string">'AMERICA'</span><span class="keyword">);<br />
</span><span class="default">$replace </span><span class="keyword">= array(</span><span class="string">'JON'</span><span class="keyword">, </span><span class="string">'PHP'</span><span class="keyword">);<br />
</span><span class="default">$subject </span><span class="keyword">= </span><span class="string">'MIKE AND ERICA LIKE AMERICA'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// We want to replace the name "ERICA" with "JON" and the word "AMERICA" with "PHP"<br />
</span><span class="keyword">echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE AMJON", which is not correct<br />
<br />
</span><span class="keyword">echo </span><span class="default">stro_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">); </span><span class="comment">// output: "MIKE AND JON LIKE PHP", which is correct<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87383""></a>
  <div class="note">
   <strong class="user">nospam at nospam dot com</strong>
   <a href="#87383" class="date">02-Dec-2008 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Replacement for str_replace in which a multiarray of numerically keyed data can be properly evaluated with the given template without having a search for 11 be mistaken for two 1's next to each other<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">data_template</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$template</span><span class="keyword">) {<br />
&nbsp; if (</span><span class="default">$template</span><span class="keyword">) { </span><span class="comment">// template string<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$split </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$template</span><span class="keyword">)) { </span><span class="comment">// each char as array member<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$split </span><span class="keyword">as </span><span class="default">$char</span><span class="keyword">) { </span><span class="comment">// each character<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$char</span><span class="keyword">)) { </span><span class="comment">// test for digit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$s </span><span class="keyword">!= </span><span class="default">1</span><span class="keyword">) { </span><span class="comment">// new digit sequence<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$digits</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] .= </span><span class="default">$char</span><span class="keyword">; </span><span class="comment">// store digit<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else { </span><span class="comment">// not a digit<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$s </span><span class="keyword">!= </span><span class="default">2</span><span class="keyword">) { </span><span class="comment">// new non-digit sequence<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$strings</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] .= </span><span class="default">$char</span><span class="keyword">; </span><span class="comment">// store string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">&amp;&amp; </span><span class="default">$input </span><span class="keyword">&amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)) { </span><span class="comment">// input data<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$input </span><span class="keyword">as </span><span class="default">$sub</span><span class="keyword">) { </span><span class="comment">// each subarray<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$sub</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">; </span><span class="comment">// reset output<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt;= </span><span class="default">$i</span><span class="keyword">; </span><span class="default">$j</span><span class="keyword">++) { </span><span class="comment">// each number/string member<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$number </span><span class="keyword">= </span><span class="default">$digits</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]) { </span><span class="comment">// number<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$sub</span><span class="keyword">[</span><span class="default">$number</span><span class="keyword">]; </span><span class="comment">// add value from subarray to output<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else { </span><span class="comment">// string<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out </span><span class="keyword">.= </span><span class="default">$strings</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]; </span><span class="comment">// add to output<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[] = </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$a</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } </span><span class="comment">// input<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">} </span><span class="comment">// split<br />
&nbsp; </span><span class="keyword">} </span><span class="comment">// template<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">$input </span><span class="keyword">= array(array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'yellow'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'banana'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'fruit'</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'green'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'spinach'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'vegetable'</span><span class="keyword">), array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">'pink'</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">'salmon'</span><span class="keyword">, </span><span class="default">11</span><span class="keyword">=&gt;</span><span class="string">'fish'</span><span class="keyword">));<br />
<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">data_template</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">, </span><span class="string">'2: a 1, healthy 11'</span><span class="keyword">));<br />
<br />
</span><span class="comment">/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; banana: a yellow, healthy fruit<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; spinach: a green, healthy vegetable<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; salmon: a pink, healthy fish<br />
)<br />
*/<br />
<br />
// str_replace would have wanted to output 'banana: a yellow, healthy yellowyellow<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Not sure if this will help anyone but I wrote it for my application and thought I would share just in case</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86177""></a>
  <div class="note">
   <strong class="user">nick at NOSPAM dot pitchinteractive dot com</strong>
   <a href="#86177" class="date">07-Oct-2008 01:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I tried max at efoxdesigns dot com solution for str_replace_once but it didn't work quite right so I came up with this solution (all params must be strings):<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">str_replace_once</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$firstChar </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$search</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$firstChar </span><span class="keyword">!== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$beforeStr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$firstChar</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$afterStr </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$subject</span><span class="keyword">, </span><span class="default">$firstChar </span><span class="keyword">+ </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$beforeStr</span><span class="keyword">.</span><span class="default">$replace</span><span class="keyword">.</span><span class="default">$afterStr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85550""></a>
  <div class="note">
   <strong class="user">paolo A T doppioclick D O T com</strong>
   <a href="#85550" class="date">05-Sep-2008 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For PHP 4 &lt; 4.4.5 and PHP 5 &lt; 5.2.1 you may occur (like me) in this bug:<br />
<br />
<a href="http://www.php-security.org/MOPB/MOPB-39-2007.html" rel="nofollow" target="_blank">http://www.php-security.org/MOPB/MOPB-39-2007.html</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83996""></a>
  <div class="note">
   <strong class="user">troy at troyonline dot com</strong>
   <a href="#83996" class="date">23-Jun-2008 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Yet another deep replace function:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">str_replace_deep</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$subject </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$subject </span><span class="keyword">as &amp;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">) and </span><span class="default">$value </span><span class="keyword">=</span><span class="default">str_replace_deep</span><span class="keyword">( </span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$subject</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77004""></a>
  <div class="note">
   <strong class="user">David Gimeno i Ayuso (info at sima dot cat)</strong>
   <a href="#77004" class="date">09-Aug-2007 09:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
With PHP 4.3.1, at least, str_replace works fine when working with single arrays but mess it all with two or more dimension arrays.<br />
<br />
<span class="default">&lt;?php<br />
$subject </span><span class="keyword">= array(</span><span class="string">"You should eat this"</span><span class="keyword">,</span><span class="string">"this"</span><span class="keyword">,</span><span class="string">"and this every day."</span><span class="keyword">);<br />
</span><span class="default">$search&nbsp; </span><span class="keyword">= </span><span class="string">"this"</span><span class="keyword">;<br />
</span><span class="default">$replace </span><span class="keyword">= </span><span class="string">"that"</span><span class="keyword">;<br />
</span><span class="default">$new&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">); </span><span class="comment">// Array ( [0] =&gt; You should eat that [1] =&gt; that [2] =&gt; and that every day. )<br />
<br />
</span><span class="keyword">echo </span><span class="string">"&lt;hr /&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">$subject </span><span class="keyword">= array(array(</span><span class="string">"first"</span><span class="keyword">, </span><span class="string">"You should eat this"</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,array(</span><span class="string">"second"</span><span class="keyword">,</span><span class="string">"this"</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ,array(</span><span class="string">"third"</span><span class="keyword">, </span><span class="string">"and this every day."</span><span class="keyword">));<br />
</span><span class="default">$search&nbsp; </span><span class="keyword">= </span><span class="string">"this"</span><span class="keyword">;<br />
</span><span class="default">$replace </span><span class="keyword">= </span><span class="string">"that"</span><span class="keyword">;<br />
</span><span class="default">$new&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$search</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$subject</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$new</span><span class="keyword">); </span><span class="comment">// Array ( [0] =&gt; Array [1] =&gt; Array [2] =&gt; Array )<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73489""></a>
  <div class="note">
   <strong class="user">kole</strong>
   <a href="#73489" class="date">26-Feb-2007 02:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My input is MS Excel file but I want to save ‘,’,“,” as ',',",".<br />
<br />
&nbsp;&nbsp;&nbsp; $badchr&nbsp; &nbsp; &nbsp; &nbsp; = array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\xc2", // prefix 1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x80", // prefix 2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x98", // single quote opening<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x99", // single quote closing<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x8c", // double quote opening<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "\x9d"&nbsp; // double quote closing<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $goodchr&nbsp; &nbsp; = array('', '', '\'', '\'', '"', '"');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; str_replace($badchr, $goodchr, $strFromExcelFile);<br />
<br />
Works for me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72344""></a>
  <div class="note">
   
   <a href="#72344" class="date">15-Jan-2007 10:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Before spending hours searching your application why it makes UTF-8 encoding into some malformed something with str_replace, make sure you save your PHP file in UTF-8 (NO BOM).<br />
<br />
This was at least one of my problems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63783""></a>
  <div class="note">
   <strong class="user">matt wheaton</strong>
   <a href="#63783" class="date">30-Mar-2006 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As an effort to remove those Word copy and paste smart quotes, I've found that this works with UTF8 encoded strings (where $text in the following example is UTF8). Also the elipsis and em and en dashes are replaced.<br />
<br />
There is an "invisible" character after the â€ for the right side double smart quote that doesn't seem to display here. It is chr(157).<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; $find</span><span class="keyword">[] = </span><span class="string">'â€œ'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side double smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side double smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€˜'</span><span class="keyword">;&nbsp; </span><span class="comment">// left side single smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€™'</span><span class="keyword">;&nbsp; </span><span class="comment">// right side single smart quote<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€¦'</span><span class="keyword">;&nbsp; </span><span class="comment">// elipsis<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€”'</span><span class="keyword">;&nbsp; </span><span class="comment">// em dash<br />
&nbsp; </span><span class="default">$find</span><span class="keyword">[] = </span><span class="string">'â€“'</span><span class="keyword">;&nbsp; </span><span class="comment">// en dash<br />
<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">'"'</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"'"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"..."</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$replace</span><span class="keyword">[] = </span><span class="string">"-"</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$find</span><span class="keyword">, </span><span class="default">$replace</span><span class="keyword">, </span><span class="default">$text</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.str-repeat.html">str_repeat</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.str-rot13.html">str_rot13</a></div>
 <div class="up"><a href="ref.strings.html">String 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
