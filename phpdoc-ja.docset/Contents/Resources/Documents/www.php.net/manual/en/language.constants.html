<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>定数</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.variables.external.html">外部から来る変数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.constants.syntax.html">構文</a></div>
 <div class="up"><a href="langref.html">言語リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.constants" class="chapter">
  <h1>定数</h1>
<h2>目次</h2><ul class="chunklist chunklist_chapter"><li><a href="language.constants.syntax.html">構文</a></li><li><a href="language.constants.predefined.html">自動的に定義される定数</a></li></ul>


  <p class="simpara">
   定数は簡単な値のためのID(名前)です。この名前が示すように、定数の値は
   スクリプト実行中に変更できません (<a href="language.constants.predefined.html" class="link">マジック定数</a>
   は例外で、これらは実際は定数ではありません)。
   デフォルトで定数では大文字小文字を区別します。慣習的に、
   定数は常に大文字で表記されます。
  </p>
  <p class="para">
   定数の名前は、PHP のラベルと同じ規則に従います。有効な定数の名前は、
   文字またはアンダースコアで始まり、任意の数の文字、数字、
   アンダースコアが後に続きます。正規表現で示すと次のようになります。
   <em>[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*</em>
  </p>
  <div class="tip"><strong class="tip">ヒント</strong><p class="simpara">
<a href="userlandnaming.html" class="xref">ユーザーレベルでの命名の手引き</a> も参照ください。</p></div>
  <p class="para">
   <div class="example" id="example-111">
    <p><strong>例1 有効/無効な定数名の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;有効な定数名<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO2"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something&nbsp;else"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"FOO_BAR"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"something&nbsp;more"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;無効な定数名<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"2FOO"</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;有効だが、避けるべき。<br />//&nbsp;将来&nbsp;PHP&nbsp;に定数の予約語が追加された場合に<br />//&nbsp;スクリプトが動作しなくなる可能性がある<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"__FOO__"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"something"</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <span class="simpara">
    本節の目的においては、文字は a-z, A-Z, および127から255まで
    (0x7f-0xff)のASCII文字を指します。
   </span>
  </p></blockquote>
  <p class="simpara">
   <a href="language.variables.predefined.html" class="link">superglobals</a>と同様に定数のスコープはグローバルです。
   つまり、スコープによらずスクリプトの中ではどこでも定数に
   アクセスできます。スコープの詳細についてはマニュアルの
   <a href="language.variables.scope.html" class="link">変数のスコープ</a>
   をご覧ください。
  </p>

  
  
  
 </div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="108717""></a>
  <div class="note">
   <strong class="user">wbcarts at juno dot com</strong>
   <a href="#108717" class="date">20-May-2012 12:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
CONSTANTS and PHP Class Definitions<br />
<br />
Using "define('MY_VAR', 'default value')" INSIDE a class definition does not work. You have to use the PHP keyword 'const' and initialize it with a scalar value -- boolean, int, float, or string (no array or other object types) -- right away.<br />
<br />
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">'MIN_VALUE'</span><span class="keyword">, </span><span class="string">'0.0'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// RIGHT - Works OUTSIDE of a class definition.<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'MAX_VALUE'</span><span class="keyword">, </span><span class="string">'1.0'</span><span class="keyword">);&nbsp;&nbsp; </span><span class="comment">// RIGHT - Works OUTSIDE of a class definition.<br />
<br />
//const MIN_VALUE = 0.0;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; WRONG - Works INSIDE of a class definition.<br />
//const MAX_VALUE = 1.0;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; WRONG - Works INSIDE of a class definition.<br />
<br />
</span><span class="keyword">class </span><span class="default">Constants<br />
</span><span class="keyword">{<br />
&nbsp; </span><span class="comment">//define('MIN_VALUE', '0.0');&nbsp; WRONG - Works OUTSIDE of a class definition.<br />
&nbsp; //define('MAX_VALUE', '1.0');&nbsp; WRONG - Works OUTSIDE of a class definition.<br />
<br />
&nbsp; </span><span class="keyword">const </span><span class="default">MIN_VALUE </span><span class="keyword">= </span><span class="default">0.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// RIGHT - Works INSIDE of a class definition.<br />
&nbsp; </span><span class="keyword">const </span><span class="default">MAX_VALUE </span><span class="keyword">= </span><span class="default">1.0</span><span class="keyword">;&nbsp; &nbsp; &nbsp; </span><span class="comment">// RIGHT - Works INSIDE of a class definition.<br />
<br />
&nbsp; </span><span class="keyword">public static function </span><span class="default">getMinValue</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">MIN_VALUE</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; public static function </span><span class="default">getMaxValue</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">self</span><span class="keyword">::</span><span class="default">MAX_VALUE</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
#Example 1:<br />
You can access these constants DIRECTLY like so:<br />
&nbsp;* type the class name exactly.<br />
&nbsp;* type two (2) colons.<br />
&nbsp;* type the const name exactly.<br />
<br />
#Example 2:<br />
Because our class definition provides two (2) static functions, you can also access them like so:<br />
&nbsp;* type the class name exactly.<br />
&nbsp;* type two (2) colons.<br />
&nbsp;* type the function name exactly (with the parentheses).<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">#Example 1:<br />
</span><span class="default">$min </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">MIN_VALUE</span><span class="keyword">;<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">MAX_VALUE</span><span class="keyword">;<br />
<br />
</span><span class="comment">#Example 2:<br />
</span><span class="default">$min </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">getMinValue</span><span class="keyword">();<br />
</span><span class="default">$max </span><span class="keyword">= </span><span class="default">Constants</span><span class="keyword">::</span><span class="default">getMaxValue</span><span class="keyword">();<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Once class constants are declared AND initialized, they cannot be set to different values -- that is why there are no setMinValue() and setMaxValue() functions in the class definition -- which means they are READ-ONLY and STATIC (shared by all instances of the class).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79431""></a>
  <div class="note">
   <strong class="user">ben at bendodson dot com</strong>
   <a href="#79431" class="date">27-Nov-2007 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I recently found I needed a way of retrieving the value of a constant dynamically - e.g. trying to find the value of FOO_BAR by passing 'FOO_' . $someVariableWithValueBAR.&nbsp; I came up with the following solution:<br />
<br />
<span class="default">&lt;?php<br />
<br />
define</span><span class="keyword">(</span><span class="string">'FOO_BAR'</span><span class="keyword">,</span><span class="string">'It works!'</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'FOO_FOO_BAR'</span><span class="keyword">,</span><span class="string">'It works again!'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// prints 'It works!'<br />
</span><span class="default">$changing_variable </span><span class="keyword">= </span><span class="string">'bar'</span><span class="keyword">;<br />
echo </span><span class="default">constant</span><span class="keyword">(</span><span class="string">'FOO_' </span><span class="keyword">. </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$changing_variable</span><span class="keyword">));<br />
<br />
</span><span class="comment">// prints 'It works again!'<br />
</span><span class="default">$changing_variable </span><span class="keyword">= </span><span class="string">'foo_bar'</span><span class="keyword">;<br />
echo </span><span class="default">constant</span><span class="keyword">(</span><span class="string">'FOO_' </span><span class="keyword">. </span><span class="default">strtoupper</span><span class="keyword">(</span><span class="default">$changing_variable</span><span class="keyword">));<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note the use of strtoupper() as constants should be defined in uppercase for good practice - feel free to remove if you have constants defined in lowercase or you can set $changing_variable as uppercase.<br />
<br />
Might be of some use to someone!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76304""></a>
  <div class="note">
   <strong class="user">tudor at tudorholton dot com</strong>
   <a href="#76304" class="date">10-Jul-2007 02:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that constant name must always be quoted when defined.<br />
<br />
e.g.<br />
define('MY_CONST','blah') - correct<br />
define(MY_CONST,'blah') - incorrect<br />
<br />
The following error message also indicates this fact:<br />
Notice:&nbsp; Use of undefined constant MY_CONST - assumed 'MY_CONST' in included_script.php on line 5<br />
<br />
Note the error message gives you some incorrect information.&nbsp;&nbsp; 'MY_CONST' (with quotes) doesn't actually exist anywhere in your code.&nbsp; The error _is_ that you didn't quote the constant when you defined it in the 'assumed' file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74836""></a>
  <div class="note">
   <strong class="user">Andreas R.</strong>
   <a href="#74836" class="date">30-Apr-2007 04:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are looking for predefined constants like<br />
* PHP_OS (to show the operating system, PHP was compiled for; php_uname('s') might be more suitable),<br />
* DIRECTORY_SEPARATOR ("\\" on Win, '/' Linux,...)<br />
* PATH_SEPARATOR (';' on Win, ':' on Linux,...)<br />
they are buried in 'Predefined Constants' under 'List of Reserved Words' in the appendix:<br />
<a href="http://www.php.net/manual/en/reserved.constants.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/reserved.constants.php</a><br />
while the latter two are also mentioned in 'Directory Functions'<br />
<a href="http://www.php.net/manual/en/ref.dir.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/ref.dir.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73339""></a>
  <div class="note">
   <strong class="user">pdenny at magmic dot com</strong>
   <a href="#73339" class="date">18-Feb-2007 06:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that constants can also be used as default argument values<br />
so the following code:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; define</span><span class="keyword">(</span><span class="string">'TEST_CONSTANT'</span><span class="keyword">,</span><span class="string">'Works!'</span><span class="keyword">);<br />
&nbsp; function </span><span class="default">testThis</span><span class="keyword">(</span><span class="default">$var</span><span class="keyword">=</span><span class="default">TEST_CONSTANT</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; echo </span><span class="string">"Passing constants as default values </span><span class="default">$var</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">testThis</span><span class="keyword">();<br />
</span><span class="default">?&gt;<br />
</span><br />
will produce :<br />
<br />
Passing constants as default values Works!<br />
<br />
(I tried this in both PHP 4 and 5)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62253""></a>
  <div class="note">
   <strong class="user">martin at larsen dot dk</strong>
   <a href="#62253" class="date">23-Feb-2006 11:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find variables much more flexible than constants because variables can be used inside quotes and heredocs etc. Especially for language systems, this is nice.<br />
<br />
As stated in one of the previous notes, there is no speed penalty by using variables. However, one issue is that you risc name collision with existing variables. When implementing a language system I simply found that adding a prefix to all the variables was the way to go, for example:<br />
<br />
$LNG_myvar1 = "my value";<br />
<br />
That is easier and performs faster than using arrays like<br />
<br />
$LNG['myvar'] = "my value";<br />
<br />
As a final note, implementing a new superglobal in PHP would make using constants much more beneficial. Then it could be used in qoutes like this:<br />
<br />
"The constant myconst has the value $CONSTANTS[myconst] !"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59936""></a>
  <div class="note">
   <strong class="user">anj at aps dot anl dot gov</strong>
   <a href="#59936" class="date">20-Dec-2005 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is possible to define constants that have the same name as a built-in PHP keyword, although subsequent attempts to actually use these constants will cause a parse error. For example in PHP 5.1.1, this code<br />
<br />
&nbsp;&nbsp;&nbsp; <span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; define</span><span class="keyword">(</span><span class="string">"PUBLIC"</span><span class="keyword">, </span><span class="string">"Hello, world!"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo PUBLIC;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">?&gt;<br />
</span><br />
gives the error<br />
<br />
&nbsp;&nbsp;&nbsp; Parse error: syntax error, unexpected T_PUBLIC in test.php on line 3<br />
<br />
This is a problem to be aware of when converting PHP4 applications to PHP5, since that release introduced several new keywords that used to be legal names for constants.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56756""></a>
  <div class="note">
   <strong class="user">kencomer at NOSPAM dot kencomer dot com</strong>
   <a href="#56756" class="date">14-Sep-2005 02:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Being a belt and suspenders person, when I use a constant to do flow control (i.e., using constants to determine which version of a section of the program should be used), I always use something like:<br />
<br />
if ( defined('DEBUG') &amp;&amp; TRUE===DEBUG )<br />
<br />
If you accidentally use DEBUG somewhere before it is defined, PHP will create a new constant called DEBUG with the value 'DEBUG'. Adding the second comparison will prevent the expression from being TRUE when you did not intentionally create the constant. For the constant DEBUG, this would rarely be a problem, but if you had (e.g.) a constant used to determine whether a function was created using case-sensitive comparisons, an accidental creation of the constant IGNORE_CASE having the value 'IGNORE_CASE' could drive you up the wall trying to find out what went wrong, particularly if you had warnings turned off.<br />
<br />
In almost all code I write, I put this function definition in my configuration section:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">"debug_print"</span><span class="keyword">)) {<br />
&nbsp; if ( </span><span class="default">defined</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">) &amp;&amp; </span><span class="default">TRUE</span><span class="keyword">===</span><span class="default">DEBUG </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">debug_print</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$flag</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/* if second argument is absent or TRUE, print */<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">if ( !(</span><span class="default">FALSE</span><span class="keyword">===</span><span class="default">$flag</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; print </span><span class="string">'DEBUG: '</span><span class="keyword">.</span><span class="default">$string </span><span class="keyword">. </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; } else {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">debug_print</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">,</span><span class="default">$flag</span><span class="keyword">=</span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Then, in my code, I'll sprinkle liberal doses of debug code like :<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">"DEBUG_TRACK_EXAMPLE_CREATION"</span><span class="keyword">,</span><span class="default">FALSE</span><span class="keyword">);<br />
class </span><span class="default">Example </span><span class="keyword">extends </span><span class="default">Something </span><span class="keyword">{<br />
&nbsp; </span><span class="default">__construct</span><span class="keyword">(</span><span class="default">$whatever</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">debug_print</span><span class="keyword">( </span><span class="string">"new instance of Example created with '</span><span class="default">$whatever</span><span class="string">'\n"</span><span class="keyword">,</span><span class="default">DEBUG_TRACK_EXAMPLE_CREATION</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
and :<br />
<br />
<span class="default">&lt;?php<br />
debug_print</span><span class="keyword">(</span><span class="string">"finished init.\n"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
In the first case, I would not want to see that message every time I went into DEBUG mode, so I made it a special case. The second case is always printed in DEBUG mode. If I decide to turn everything on, special cases and all, all I have to do is comment out the "if" line in debug_print() and presto magicko! It costs a little and gains a lot.<br />
<br />
As another belt-and-suspenders aside, notice that, unlike most people, I put the language constant (e.g.,TRUE, "string", etc.) on the left side of the comparison. By doing that, you can never accidentally do something like <br />
&nbsp; if ( $hard_to_find_error="here" )<br />
<br />
because you always write it as <br />
&nbsp; if ( "here"==$no_error )<br />
<br />
or, if you got it wrong,<br />
&nbsp; if ( "here"=$easy_to_find_parse_error )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52133""></a>
  <div class="note">
   <strong class="user">hafenator2000 at yahoo dot com</strong>
   <a href="#52133" class="date">21-Apr-2005 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP Modules also define constants.&nbsp; Make sure to avoid constant name collisions.&nbsp; There are two ways to do this that I can think of.<br />
First: in your code make sure that the constant name is not already used.&nbsp; ex. <span class="default">&lt;?php </span><span class="keyword">if (! </span><span class="default">defined</span><span class="keyword">(</span><span class="string">"CONSTANT_NAME"</span><span class="keyword">)) { </span><span class="default">Define</span><span class="keyword">(</span><span class="string">"CONSTANT_NAME"</span><span class="keyword">,</span><span class="string">"Some Value"</span><span class="keyword">); } </span><span class="default">?&gt;</span>&nbsp; This can get messy when you start thinking about collision handling, and the implications of this.<br />
Second: Use some off prepend to all your constant names without exception&nbsp; ex. <span class="default">&lt;?php Define</span><span class="keyword">(</span><span class="string">"SITE_CONSTANT_NAME"</span><span class="keyword">,</span><span class="string">"Some Value"</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
Perhaps the developers or documentation maintainers could recommend a good prepend and ask module writers to avoid that prepend in modules.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52008""></a>
  <div class="note">
   <strong class="user">storm</strong>
   <a href="#52008" class="date">18-Apr-2005 06:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An undefined constant evaluates as true when not used correctly. Say for example you had something like this:<br />
<br />
settings.php<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Debug mode<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">,</span><span class="default">false</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
test.php<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">'settings.php'</span><span class="keyword">);<br />
<br />
if (</span><span class="default">DEBUG</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// echo some sensitive data.<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
If for some reason settings.php doesn't get included and the DEBUG constant is not set, PHP will STILL print the sensitive data. The solution is to evaluate it. Like so:<br />
<br />
settings.php<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// Debug mode<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'DEBUG'</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
test.php<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include(</span><span class="string">'settings.php'</span><span class="keyword">);<br />
<br />
if (</span><span class="default">DEBUG </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="comment">// echo some sensitive data.<br />
</span><span class="keyword">}<br />
</span><span class="default">?&gt;<br />
</span><br />
Now it works correctly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36875""></a>
  <div class="note">
   <strong class="user">kumar at farmdev</strong>
   <a href="#36875" class="date">26-Oct-2003 02:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
before embarking on creating a language system I wanted to see if there was any speed advantage to defining language strings as constants vs. variables or array items.&nbsp; It is more logical to define language strings as constants but you have more flexibility using variables or arrays in your code (i.e. they can be accessed directly, concatenated, used in quotes, used in heredocs whereas constants can only be accessed directly or concatenated).<br />
<br />
Results of the test:<br />
declaring as $Variable is fastest<br />
declaring with define() is second fastest<br />
declaring as $Array['Item'] is slowest<br />
<br />
=======================================<br />
the test was done using PHP 4.3.2, Apache 1.3.27, and the ab (apache bench) tool.<br />
100 requests (1 concurrent) were sent to one php file that includes 15 php files each containing 100 unique declarations of a language string.<br />
<br />
Example of each declaration ("Variable" numbered 1 - 1500):<br />
<span class="default">&lt;?php<br />
$GLOBALS</span><span class="keyword">[</span><span class="string">'Variable1'</span><span class="keyword">] = </span><span class="string">"A whole lot of text for this variable as if it were a language string containing a whole lot of text"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">'Variable1' </span><span class="keyword">, </span><span class="string">"A whole lot of text for this variable as if it were a language string containing a whole lot of text"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
&lt;?php<br />
$GLOBALS</span><span class="keyword">[</span><span class="string">'CP_Lang'</span><span class="keyword">][</span><span class="string">'Variable1'</span><span class="keyword">] = </span><span class="string">"A whole lot of text for this variable as if it were a language string containing a whole lot of text"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Here are the exact averages of each ab run of 100 requests (averages based on 6 runs):<br />
variable (24.956 secs)<br />
constant (25.426 secs)<br />
array (28.141)<br />
<br />
(not huge differences but good to know that using variables won't take a huge performance hit)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35064""></a>
  <div class="note">
   <strong class="user">ewspencer at industrex dot com</strong>
   <a href="#35064" class="date">18-Aug-2003 03:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find using the concatenation operator helps disambiguate value assignments with constants. For example, setting constants in a global configuration file:<br />
<br />
<span class="default">&lt;?php<br />
define</span><span class="keyword">(</span><span class="string">'LOCATOR'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="string">"/locator"</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'CLASSES'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/code/classes"</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'FUNCTIONS'</span><span class="keyword">, </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/code/functions"</span><span class="keyword">);<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'USERDIR'</span><span class="keyword">,&nbsp;&nbsp; </span><span class="default">LOCATOR</span><span class="keyword">.</span><span class="string">"/user"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Later, I can use the same convention when invoking a constant's value for static constructs such as require() calls:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">require_once(</span><span class="default">FUNCTIONS</span><span class="keyword">.</span><span class="string">"/database.fnc"</span><span class="keyword">);<br />
require_once(</span><span class="default">FUNCTIONS</span><span class="keyword">.</span><span class="string">"/randchar.fnc"</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
as well as dynamic constructs, typical of value assignment to variables:<br />
<br />
<span class="default">&lt;?php<br />
$userid&nbsp; </span><span class="keyword">= </span><span class="default">randchar</span><span class="keyword">(</span><span class="default">8</span><span class="keyword">,</span><span class="string">'anc'</span><span class="keyword">,</span><span class="string">'u'</span><span class="keyword">);<br />
</span><span class="default">$usermap </span><span class="keyword">= </span><span class="default">USERDIR</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$userid</span><span class="keyword">.</span><span class="string">".png"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
The above convention works for me, and helps produce self-documenting code.<br />
<br />
-- Erich</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19363""></a>
  <div class="note">
   <strong class="user">katana at katana-inc dot com</strong>
   <a href="#19363" class="date">25-Feb-2002 08:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning, constants used within the heredoc syntax (<a href="http://www.php.net/manual/en/language.types.string.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/language.types.string.php</a>) are not interpreted!<br />
<br />
Editor's Note: This is true. PHP has no way of recognizing the constant from any other string of characters within the heredoc block.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="language.variables.external.html">外部から来る変数</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="language.constants.syntax.html">構文</a></div>
 <div class="up"><a href="langref.html">言語リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
