<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ディレクトリを削除する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rewind.html">rewind</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.set-file-buffer.html">set_file_buffer</a></div>
 <div class="up"><a href="ref.filesystem.html">ファイルシステム 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.rmdir" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">rmdir</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">rmdir</span> &mdash; <span class="dc-title">ディレクトリを削除する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.rmdir-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>rmdir</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$dirname</code></span>
   [, <span class="methodparam"><span class="type">resource</span> <code class="parameter">$context</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <em><code class="parameter">dirname</code></em>で指定されたディレクトリを
   削除しようと試みます。ディレクトリは空でなくてはならず、また
   適切なパーミッションが設定されていなければなりません。
   失敗した場合は <strong><code>E_WARNING</code></strong> レベルのエラーが発生します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.rmdir-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">dirname</code></em></span>
     <dd>

      <p class="para">
       ディレクトリへのパス。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">context</code></em></span>
     <dd>

      <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">コンテキストのサポートは、
PHP 5.0.0 で追加されました。<em>contexts</em> の説明に関しては、
<a href="book.stream.html" class="xref">ストリーム</a> を参照してください。</span></p></blockquote>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.rmdir-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.rmdir-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.0.0</td>
       <td>
        PHP 5.0.0 以降、 <span class="function"><strong>rmdir()</strong></span> は
        <em class="emphasis">いくつかの</em> URL ラッパーを併用することが可能です。
         <span class="function"><strong>rmdir()</strong></span> をサポートしているラッパーの一覧については、
        <a href="wrappers.html" class="xref">サポートするプロトコル/ラッパー</a> を参照ください。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.rmdir-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-2421">
    <p><strong>例1  <span class="function"><strong>rmdir()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #DD0000">'examples'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">mkdir</span><span style="color: #007700">(</span><span style="color: #DD0000">'examples'</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">rmdir</span><span style="color: #007700">(</span><span style="color: #DD0000">'examples'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.rmdir-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara"> <a href="features.safe-mode.html" class="link">セーフモード</a> が有効の場合、PHP は、
操作を行うディレクトリが、実行するスクリプトと同じ UID (所有者)を有しているか
どうかを確認します。</span></p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.rmdir-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.is-dir.html" class="function" rel="rdfs-seeAlso">is_dir()</a> - ファイルがディレクトリかどうかを調べる</span></li>
    <li class="member"> <span class="function"><a href="function.mkdir.html" class="function" rel="rdfs-seeAlso">mkdir()</a> - ディレクトリを作る</span></li>
    <li class="member"> <span class="function"><a href="function.unlink.html" class="function" rel="rdfs-seeAlso">unlink()</a> - ファイルを削除する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="110489""></a>
  <div class="note">
   <strong class="user">nbari at dalmp dot com</strong>
   <a href="#110489" class="date">29-Oct-2012 07:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Glob function doesn't return the hidden files, therefore scandir can be more useful, when trying to delete recursively a tree.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">public static function </span><span class="default">delTree</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">), array(</span><span class="string">'.'</span><span class="keyword">,</span><span class="string">'..'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$file</span><span class="string">"</span><span class="keyword">)) ? </span><span class="default">delTree</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$file</span><span class="string">"</span><span class="keyword">) : </span><span class="default">unlink</span><span class="keyword">(</span><span class="string">"</span><span class="default">$dir</span><span class="string">/</span><span class="default">$file</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109901""></a>
  <div class="note">
   <strong class="user">Chris Wren</strong>
   <a href="#109901" class="date">02-Sep-2012 05:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I also ran into the permissions issue in Windows when deleting a folder and the solution was to close all editors which had files opened which were located in the folder structure.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108113""></a>
  <div class="note">
   <strong class="user">longears at BLERG dot gmail dot com</strong>
   <a href="#108113" class="date">30-Mar-2012 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Concise way to recursively remove a directory:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># recursively remove a directory<br />
</span><span class="keyword">function </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">glob</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'/*'</span><span class="keyword">) as </span><span class="default">$file</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107233""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#107233" class="date">24-Jan-2012 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When the directory is not empty:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">function </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$objects </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; foreach (</span><span class="default">$objects </span><span class="keyword">as </span><span class="default">$object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$object </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$object </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">) == </span><span class="string">"dir"</span><span class="keyword">) </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">); else </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106587""></a>
  <div class="note">
   <strong class="user">thomas</strong>
   <a href="#106587" class="date">21-Nov-2011 09:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function deleteAll given by O S on 18-Jun-2010 11:30 will fail at line<br />
<br />
while ($contents = readdir($directoryHandle)) {...<br />
<br />
if a folder named 0 (zero) is found during traversing the hierarchy</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105311""></a>
  <div class="note">
   <strong class="user">shane dot ray87 at gmail dot com</strong>
   <a href="#105311" class="date">08-Aug-2011 10:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This issue has been driving me nuts for hours.<br />
<br />
I am running PHP on IIS, I had the wincache module installed, when running a recursive delete a certain folder would get "stuck" and throw permissions errors.&nbsp; I was not able to delete them with PHP or in windows itself.&nbsp; The only way to delete the folder was to wait 5 min and run the script again, or stop the IIS server and the folder would delete on its own.&nbsp; Disabling the wincachce module resolved the issue.<br />
<br />
Hope this helps.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104631""></a>
  <div class="note">
   <strong class="user">samy dot see at gmail dot com</strong>
   <a href="#104631" class="date">27-Jun-2011 12:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you get this problem Permission denied in windows testing your site maybe this will resolve the problem <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/Thumbs.db'</span><span class="keyword">)){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">.</span><span class="string">'/Thumbs.db'</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
and then<br />
<br />
<span class="default">&lt;?php rmdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98622""></a>
  <div class="note">
   <strong class="user">holger1 at NOSPAMzentralplan dot de</strong>
   <a href="#98622" class="date">26-Jun-2010 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another simple way to recursively delete a directory that is not empty:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="keyword">function </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$objects </span><span class="keyword">= </span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; foreach (</span><span class="default">$objects </span><span class="keyword">as </span><span class="default">$object</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$object </span><span class="keyword">!= </span><span class="string">"." </span><span class="keyword">&amp;&amp; </span><span class="default">$object </span><span class="keyword">!= </span><span class="string">".."</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">filetype</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">) == </span><span class="string">"dir"</span><span class="keyword">) </span><span class="default">rrmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">); else </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">.</span><span class="string">"/"</span><span class="keyword">.</span><span class="default">$object</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$objects</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98499""></a>
  <div class="note">
   <strong class="user">O S</strong>
   <a href="#98499" class="date">19-Jun-2010 12:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This isn't my code, but just thought I would share, since it took me so long to find. This is a function to delete a folder, all sub-folders, and files in one clean move.<br />
<br />
Just tell it what directory you want deleted, in relation to the page that this function is executed. Then set $empty = true if you want the folder just emptied, but not deleted. If you set $empty = false, or just simply leave it out, the given directory will be deleted, as well.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">deleteAll</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">, </span><span class="default">$empty </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">) == </span><span class="string">"/"</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$directory </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">) || !</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } elseif(!</span><span class="default">is_readable</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$directoryHandle </span><span class="keyword">= </span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (</span><span class="default">$contents </span><span class="keyword">= </span><span class="default">readdir</span><span class="keyword">(</span><span class="default">$directoryHandle</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$contents </span><span class="keyword">!= </span><span class="string">'.' </span><span class="keyword">&amp;&amp; </span><span class="default">$contents </span><span class="keyword">!= </span><span class="string">'..'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path </span><span class="keyword">= </span><span class="default">$directory </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$contents</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">deleteAll</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">closedir</span><span class="keyword">(</span><span class="default">$directoryHandle</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$empty </span><span class="keyword">== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$directory</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97618""></a>
  <div class="note">
   <strong class="user">info at top-info dot org</strong>
   <a href="#97618" class="date">28-Apr-2010 01:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function delTree is dangerous when you dont take really care. I for example always deleted a temporary directory with it. Everthing went fine until the moment where the var containing this temporary directory wasnt set. The var didnt contain the path but an empty string. The function delTree&nbsp; was called and deleted all the files at my host!<br />
So dont use this function when you dont have a proper handling coded. Dont think about using this function only for testing without such a handling.<br />
Luckily nothing is lost because I had the local copy...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95703""></a>
  <div class="note">
   <strong class="user">steffen at wirsching-idstein dot de</strong>
   <a href="#95703" class="date">17-Jan-2010 02:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Say, you're working on Windows and continue to get a permission's error without a reason. Then it may be that a different Windows program is working on the folder (see earlier notes also). In the case that you can't find that program, the line<br />
<br />
<span class="default">&lt;?php closedir</span><span class="keyword">(</span><span class="default">opendir</span><span class="keyword">(</span><span class="default">$dirname</span><span class="keyword">)); </span><span class="default">?&gt;<br />
</span><br />
may solve the problem!<br />
Make sure to write this before rmdir($dirname);.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93971""></a>
  <div class="note">
   <strong class="user">omikrosys at gmail dot com</strong>
   <a href="#93971" class="date">09-Oct-2009 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sometimes you would face situations in which rmdir($dirname) would give "permission denied" errors though you may have changed $dirname permissions. In such situations just change the permissions of the directory which contains $dirname and rmdir($dirname) would work like a charm.<br />
Say you use rmdir('dirr'); then change the permissions of the folder that contains 'dirr'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93836""></a>
  <div class="note">
   <strong class="user">kevin at web-power dot co dot uk</strong>
   <a href="#93836" class="date">02-Oct-2009 02:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had situation where the rmdir was returning warning message as within last loop it was already removed. So here is quick fix by adding is_dir to the DelTree routine below<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">delTree</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'*'</span><span class="keyword">, </span><span class="default">GLOB_MARK </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$file</span><span class="keyword">, -</span><span class="default">1 </span><span class="keyword">) == </span><span class="string">'/' </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">delTree</span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) </span><span class="default">rmdir</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92661""></a>
  <div class="note">
   <strong class="user">bcairns at gmail dot com</strong>
   <a href="#92661" class="date">03-Aug-2009 06:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wasn't having much luck with the recursive delete functions below, so I wrote my own:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// ensure $dir ends with a slash<br />
</span><span class="keyword">function </span><span class="default">delTree</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$files </span><span class="keyword">= </span><span class="default">glob</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">. </span><span class="string">'*'</span><span class="keyword">, </span><span class="default">GLOB_MARK </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$files </span><span class="keyword">as </span><span class="default">$file </span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">substr</span><span class="keyword">( </span><span class="default">$file</span><span class="keyword">, -</span><span class="default">1 </span><span class="keyword">) == </span><span class="string">'/' </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">delTree</span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">unlink</span><span class="keyword">( </span><span class="default">$file </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">rmdir</span><span class="keyword">( </span><span class="default">$dir </span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Simple.&nbsp; Works.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92050""></a>
  <div class="note">
   <strong class="user">asn at asn24 dot dk</strong>
   <a href="#92050" class="date">07-Jul-2009 06:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A patch to previous script to make sure rights for deletion is set:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//Delete folder function<br />
</span><span class="keyword">function </span><span class="default">deleteDirectory</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_dir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) || </span><span class="default">is_link</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)) return </span><span class="default">unlink</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">scandir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">) as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$item </span><span class="keyword">== </span><span class="string">'.' </span><span class="keyword">|| </span><span class="default">$item </span><span class="keyword">== </span><span class="string">'..'</span><span class="keyword">) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">deleteDirectory</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$item</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">chmod</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$item</span><span class="keyword">, </span><span class="default">0777</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">deleteDirectory</span><span class="keyword">(</span><span class="default">$dir </span><span class="keyword">. </span><span class="string">"/" </span><span class="keyword">. </span><span class="default">$item</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; };<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">rmdir</span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
[EDITOR NOTE: "Credits to erkethan at free dot fr." - thiago]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84982""></a>
  <div class="note">
   <strong class="user">TrashF at taistelumarsu dot org</strong>
   <a href="#84982" class="date">08-Aug-2008 12:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case you're trying to rmdir() and you keep getting 'Permission denied' errors, make sure you don't have the directory still open after using opendir(). Especially when writing recursive functions for deleting directories, make sure you have closedir() BEFORE rmdir().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="79898""></a>
  <div class="note">
   <strong class="user">rn at clubfl dot com</strong>
   <a href="#79898" class="date">18-Dec-2007 07:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've noticed that when using this command on a windows platform you may encounter a permissions error which may seem unwarranted. This commonly occurs if you are or were using a program to edit something in the to be deleted folder and either the item is still in the folder or the program that was accessing the file in that folder is still running(causing it to hold onto the folder).<br />
<br />
SO... if you get a permissions error and there shouldn't be an issue with folder permissions check if there are files in there then check if there is a program running that is or was using a file that was in that folder and kill it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.rewind.html">rewind</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.set-file-buffer.html">set_file_buffer</a></div>
 <div class="up"><a href="ref.filesystem.html">ファイルシステム 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
