<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã‚’è¿”ã™</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.delete.html">delete</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.disk-free-space.html">disk_free_space</a></div>
 <div class="up"><a href="ref.filesystem.html">ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  é–¢æ•°</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.dirname" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">dirname</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">dirname</span> &mdash; <span class="dc-title">è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã‚’è¿”ã™</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.dirname-description">
  <h3 class="title">èª¬æ˜</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>dirname</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$path</code></span>
   )</div>

  <p class="para rdfs-comment">
   ãƒ•ã‚¡ã‚¤ãƒ«ã‚ã‚‹ã„ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ãƒ‘ã‚¹ã‚’å«ã‚€æ–‡å­—åˆ—ã‚’å—ã‘å–ã£ã¦ã€
   è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.dirname-parameters">
  <h3 class="title">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">path</code></em></span>
     <dd>

      <p class="para">
       ãƒ‘ã‚¹ã€‚
      </p>
      <p class="para">
       Windows ã§ã¯ã€ã‚¹ãƒ©ãƒƒã‚·ãƒ¥(<em>/</em>)ã¨ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥
       (<em>\</em>)ã®ä¸¡æ–¹ãŒãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŒºåˆ‡ã‚Šæ–‡å­—ã¨ã—ã¦ä½¿ã‚ã‚Œã¾ã™ã€‚
       ãã®ä»–ã®ç’°å¢ƒã§ã¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥(<em>/</em>)ã«ãªã‚Šã¾ã™ã€‚
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.dirname-returnvalues">
  <h3 class="title">è¿”ã‚Šå€¤</h3>
  <p class="para">
   è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚
   <em><code class="parameter">path</code></em> ã«ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ãŒç„¡ã„å ´åˆã¯ã€
   ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¤ºã™ãƒ‰ãƒƒãƒˆ (&#039;<em>.</em>&#039;)
   ã‚’è¿”ã—ã¾ã™ã€‚ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ä»¥é™ã®
   <em>/component</em> éƒ¨åˆ†ã‚’å–ã‚Šé™¤ã„ãŸ
   <em><code class="parameter">path</code></em> ã‚’è¿”ã—ã¾ã™ã€‚
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.dirname-changelog">
  <h3 class="title">å¤‰æ›´å±¥æ­´</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
       <th>èª¬æ˜</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.0.0</td>
       <td>
         <span class="function"><strong>dirname()</strong></span> ãŒãƒã‚¤ãƒŠãƒªã‚»ãƒ¼ãƒ•ã¨ãªã‚Šã¾ã—ãŸã€‚
       </td>
      </tr>

      <tr>
       <td>4.0.3</td>
       <td>
         <span class="function"><strong>dirname()</strong></span> ãŒ POSIX æº–æ‹ ã¨ãªã‚Šã¾ã—ãŸã€‚
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.dirname-examples">
  <h3 class="title">ä¾‹</h3>
  <p class="para">
   <div class="example" id="example-2344">
    <p><strong>ä¾‹1  <span class="function"><strong>dirname()</strong></span> ã®ä¾‹</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"1)&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">"/etc/passwd"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;1)&nbsp;/etc<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"2)&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">"/etc/"</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #0000BB">PHP_EOL</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;2)&nbsp;/&nbsp;(Windows&nbsp;ã®å ´åˆã¯&nbsp;\)<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"3)&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">"."</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;3)&nbsp;.<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.dirname-notes">
  <h3 class="title">æ³¨æ„</h3>
  <blockquote class="note"><p><strong class="note">æ³¨æ„</strong>: 
   <p class="para">
     <span class="function"><strong>dirname()</strong></span> ã¯ã€å…¥åŠ›æ–‡å­—åˆ—ã‚’å˜ç´”ã«ãã®ã¾ã¾å‡¦ç†ã—ã¾ã™ã€‚
    å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ç¢ºèªã—ãŸã‚Š
    &quot;<em>..</em>&quot; ã®ã‚ˆã†ãªãƒ‘ã‚¹ã‚’æ°—ã«ã—ãŸã‚Šã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">æ³¨æ„</strong>: 
   <p class="para">
     <span class="function"><strong>dirname()</strong></span> ã¯ãƒ­ã‚±ãƒ¼ãƒ«ã«ä¾å­˜ã—ã¾ã™ã€‚
    ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’å«ã‚€ãƒ‘ã‚¹ã§æ­£ã—ã„çµæœã‚’å¾—ã‚‹ã«ã¯ã€ãã‚Œã¨ä¸€è‡´ã™ã‚‹ãƒ­ã‚±ãƒ¼ãƒ«ã‚’
     <span class="function"><a href="function.setlocale.html" class="function">setlocale()</a></span> ã§è¨­å®šã—ã¦ãŠã‹ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">æ³¨æ„</strong>: 
   <p class="para">
    PHP 4.3.0 ä»¥é™ã§ã¯ã€ã“ã‚Œã¾ã§ã¯
     <span class="function"><strong>dirname()</strong></span> ãŒç©ºæ–‡å­—åˆ—ã‚’è¿”ã—ã¦ã„ãŸã‚ˆã†ãªçŠ¶æ³ã§
    ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚„ãƒ‰ãƒƒãƒˆã‚’è¿”ã™ã“ã¨ãŒå¤šããªã‚Šã¾ã—ãŸã€‚
   </p>
  </p></blockquote>
  <p class="para">
   ä»¥ä¸‹ã®ä¾‹ã§å¤‰æ›´ç‚¹ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;PHP&nbsp;4.3.0&nbsp;ã‚ˆã‚Šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³<br /></span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">'c:/'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;'.'&nbsp;ã‚’è¿”ã—ã¾ã™<br /><br />//&nbsp;PHP&nbsp;4.3.0&nbsp;ä»¥é™ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³<br /></span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">'c:/x'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;'c:\'&nbsp;ã‚’è¿”ã—ã¾ã™<br /></span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">'c:/Temp/x'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;'c:/Temp'&nbsp;ã‚’è¿”ã—ã¾ã™<br /></span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #DD0000">'/x'</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;'\'&nbsp;ã‚’è¿”ã—ã¾ã™<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.dirname-seealso">
  <h3 class="title">å‚è€ƒ</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.basename.html" class="function" rel="rdfs-seeAlso">basename()</a> - ãƒ‘ã‚¹ã®æœ€å¾Œã«ã‚ã‚‹åå‰ã®éƒ¨åˆ†ã‚’è¿”ã™</span></li>
    <li class="member"> <span class="function"><a href="function.pathinfo.html" class="function" rel="rdfs-seeAlso">pathinfo()</a> - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã«é–¢ã™ã‚‹æƒ…å ±ã‚’è¿”ã™</span></li>
    <li class="member"> <span class="function"><a href="function.realpath.html" class="function" rel="rdfs-seeAlso">realpath()</a> - çµ¶å¯¾ãƒ‘ã‚¹åã‚’è¿”ã™</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113193""></a>
  <div class="note">
   <strong class="user">frederikreiss at gmx dot de</strong>
   <a href="#113193" class="date">11-Sep-2013 06:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
what about a recursive dirname. To get $count levels up in a directory.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">r_dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, </span><span class="default">$count</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$count </span><span class="keyword">&gt; </span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">r_dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">, --</span><span class="default">$count</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
}</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111415""></a>
  <div class="note">
   <strong class="user">Yousef Ismaeil Cliprz</strong>
   <a href="#111415" class="date">18-Feb-2013 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can get best root path if you want to call a file from you project paths.<br />
<br />
Make sure this define in your www/index.php<br />
<br />
or the core file that inside www/ root.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @def (string) DS - Directory separator.<br />
&nbsp;*/<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">"DS"</span><span class="keyword">,</span><span class="string">"/"</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* @def (resource) BASE_PATH - get a base path.<br />
&nbsp;*/<br />
</span><span class="default">define</span><span class="keyword">(</span><span class="string">'BASE_PATH'</span><span class="keyword">,</span><span class="default">realpath</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)).</span><span class="default">DS</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
You can call any file any time without any problems<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">include </span><span class="default">BASE_PATH</span><span class="keyword">.</span><span class="string">'inc/class.php'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107860""></a>
  <div class="note">
   <strong class="user">minimalist at intelligence dot com</strong>
   <a href="#107860" class="date">11-Mar-2012 02:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to get the parent parent directory of your script, you can use this:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;</span><span class="comment">//Example script path: home/content/en/script.php<br />
&nbsp;</span><span class="default">$parentparentdir</span><span class="keyword">=</span><span class="default">basename</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)));<br />
&nbsp;echo </span><span class="default">$parentparentdir</span><span class="keyword">; </span><span class="comment">//will output 'content'<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104624""></a>
  <div class="note">
   <strong class="user">nhl261 at yahoo dot com</strong>
   <a href="#104624" class="date">27-Jun-2011 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As usual, to include or require a file, we use this<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">require </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">) . </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="string">'my_file.php'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
in rare case, we have current file existing at the root directory, dirname would return C:\ or / , then the line above contains 2 slashes \\ or // <br />
To handle this this case, we use rtrim to clear slashes.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">require </span><span class="default">rtrim</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">), </span><span class="string">'/\\'</span><span class="keyword">) . </span><span class="default">DIRECTORY_SEPARATOR </span><span class="keyword">. </span><span class="string">'my_file.php'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Also, another use of dirname is to get virtual directory (url path), the issue is the same as above, we have to check and process before concatenating strings</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99797""></a>
  <div class="note">
   <strong class="user">subzey at immelman dot ru</strong>
   <a href="#99797" class="date">07-Sep-2010 06:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In some situations (I can't locate the dependencies) basename and dirname may return incorrect values if parsed string is in UTF-8.<br />
<br />
Like, dirname("glossary/Ğ·Ğ°Ğ´Ğ½Ğ¸Ğ¹-Ñ„Ğ¾ĞºÑƒÑ") will return "glossary" and basename("glossary/Ğ·Ğ°Ğ´Ğ½Ğ¸Ğ¹-Ñ„Ğ¾ĞºÑƒÑ") will return "-Ñ„Ğ¾ĞºÑƒÑ".<br />
<br />
Quickfix is <br />
str_replace("!$!", "", dirname(str_replace("/", "!$!/!$!", $q)))</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94797""></a>
  <div class="note">
   <strong class="user">webyazilimci84 at gmail dot com</strong>
   <a href="#94797" class="date">25-Nov-2009 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In my mvc based framework i make BASE_PATH and BASE_URL definitions like the following and both work well in the framework without problem.<br />
<br />
index.php :<br />
<br />
define('BASE_PATH',realpath('.'));<br />
define('BASE_URL', dirname($_SERVER["SCRIPT_NAME"]));<br />
<br />
BASE_PATH is for server side inclusions.<br />
BASE_URL is for client side inclusions (scripts, css files, images etc.)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91208""></a>
  <div class="note">
   <strong class="user">ken dot forslund at hp dot com</strong>
   <a href="#91208" class="date">29-May-2009 10:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A key problem to hierarchical include trees is that PHP processes include paths relative to the original file, not the current including file.<br />
<br />
A solution to that, is to prefix all include paths with:<br />
<span class="default">&lt;?php str_replace</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)); </span><span class="default">?&gt;<br />
</span><br />
this will generate a base path relative to the current file, which will then allow an include behavior similar to C/C++.<br />
<br />
thus, to include a file that is 1 in the parent directory:<br />
<span class="default">&lt;?php </span><span class="keyword">require_once( </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">) .</span><span class="string">'../parent.php'</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
to include a file that is in the same directory:<br />
<span class="default">&lt;?php </span><span class="keyword">require_once( </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">) .</span><span class="string">'neighbor.php'</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
to include a file that is in a subdirectory:<br />
<span class="default">&lt;?php </span><span class="keyword">require_once( </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'//'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">) .</span><span class="string">'folder/sub.php'</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span><br />
Notice that all paths we reference must NOT begin with a /, and must be relative to the current file, in order to concatenate correctly.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87637""></a>
  <div class="note">
   <strong class="user">joe dot naylor at gmail dot com</strong>
   <a href="#87637" class="date">13-Dec-2008 07:07</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The dirname function does not usually return a slash on the end, which might encourage you to create links using code like this:<br />
$url = dirname($_SERVER['PHP_SELF']) . '/somepage.php';<br />
<br />
However dirname returns a slash if the path you specify is the root, so $url in that case would become '//somepage.php'.&nbsp; If you put that URL as the action on a form, for example, submitting the form will try to go to <a href="http://somepage.php." rel="nofollow" target="_blank">http://somepage.php.</a><br />
<br />
I ran into this when I wrote a site on a url with a path, www.somehost.com/client/somepage.php, where the code above works great, but then wanted to put it on a subdomain, client.somehost.com/somepage.php, where things started breaking.<br />
<br />
The best solution would be to create a function that generates absolute URLs and use that throughout the site, but creating a safe_dirname function (and an htaccess rewrite to fix double-slashes just in case) fixed the issue for me:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">safe_dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; </span><span class="default">$dirname </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; return </span><span class="default">$dirname </span><span class="keyword">== </span><span class="string">'/' </span><span class="keyword">? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$dirname</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84586""></a>
  <div class="note">
   <strong class="user">Tom</strong>
   <a href="#84586" class="date">20-Jul-2008 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Expanding on Anonymous' comment, this is not necessarily correct. If the user is using a secure protocol, this URL is inaccurate. This will work properly:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Is the user using HTTPS?<br />
</span><span class="default">$url </span><span class="keyword">= (isset(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTPS'</span><span class="keyword">]) &amp;&amp; </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTPS'</span><span class="keyword">] == </span><span class="string">'on'</span><span class="keyword">)) ? </span><span class="string">'https://' </span><span class="keyword">: </span><span class="string">'<a href="http://" rel="nofollow" target="_blank">http://</a>'</span><span class="keyword">;<br />
<br />
</span><span class="comment">// Complete the URL<br />
</span><span class="default">$url </span><span class="keyword">.= </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'HTTP_HOST'</span><span class="keyword">] . </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]);<br />
<br />
</span><span class="comment">// echo the URL<br />
</span><span class="keyword">echo </span><span class="default">$url</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83618""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#83618" class="date">04-Jun-2008 10:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A simple way to show the www path to a folder containing a file...<br />
<br />
echo "<a href="http://" rel="nofollow" target="_blank">http://</a>".$_SERVER['HTTP_HOST'].dirname($_SERVER['PHP_SELF']);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83130""></a>
  <div class="note">
   <strong class="user">rmahase at gmail dot com</strong>
   <a href="#83130" class="date">12-May-2008 08:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this little function gets the top level public directory <br />
<br />
eg. <a href="http://www.mysite.com/directory1/file.php " rel="nofollow" target="_blank">http://www.mysite.com/directory1/file.php </a><br />
<br />
or <a href="http://www.mysite.com/directory1/directory2/directory3/file.php" rel="nofollow" target="_blank">http://www.mysite.com/directory1/directory2/directory3/file.php</a><br />
<br />
will both return "directory1" ...which is the top level directory<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">public_base_directory</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//get public directory structure eg "/top/second/third"<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$public_directory </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//place each directory into array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$directory_array </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$public_directory</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//get highest or top level in array of directory strings<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$public_base </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">(</span><span class="default">$directory_array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$public_base</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82002""></a>
  <div class="note">
   <strong class="user">ts at dev dot websafe dot pl</strong>
   <a href="#82002" class="date">24-Mar-2008 12:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Inside of script.php I needed to know the name of the containing directory. For example, if my script was in '/var/www/htdocs/website/somedir/script.php' i needed to know 'somedir' in a unified way.<br />
<br />
The solution is:<br />
<span class="default">&lt;?php<br />
$containing_dir </span><span class="keyword">= </span><span class="default">basename</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77721""></a>
  <div class="note">
   <strong class="user">Zingus J. Rinkle</strong>
   <a href="#77721" class="date">10-Sep-2007 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Most mkpath() function I saw listed here seem long and convoluted.<br />
Here's mine:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">mkpath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if(@</span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">) or </span><span class="default">file_exists</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return (</span><span class="default">mkpath</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)) and </span><span class="default">mkdir</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">));<br />
&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Untested on windows, but dirname() manual says it should work.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72633""></a>
  <div class="note">
   <strong class="user">hans111 at yahoo dot com</strong>
   <a href="#72633" class="date">27-Jan-2007 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The same function but a bit improved, will use REQUEST_URI, if not available, will use PHP_SELF and if not available will use __FILE__, in this case, the function MUST be in the same file. It should work, both under Windows and *NIX.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_dir</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">end</span><span class="keyword">(</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'/'</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(!empty(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">]) ? </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'REQUEST_URI'</span><span class="keyword">] : !empty(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]) ? </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">] : </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\\'</span><span class="keyword">,</span><span class="string">'/'</span><span class="keyword">,</span><span class="default">__FILE__</span><span class="keyword">))));<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70709""></a>
  <div class="note">
   <strong class="user">Xedecimal at gmail dot com</strong>
   <a href="#70709" class="date">24-Oct-2006 08:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Getting absolute path of the current script: <br />
<br />
<span class="default">&lt;?php<br />
dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
Getting webserver relative path of the current script...<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">GetRelativePath</span><span class="keyword">(</span><span class="default">$path</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$npath </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\\'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">GetVar</span><span class="keyword">(</span><span class="string">'DOCUMENT_ROOT'</span><span class="keyword">), </span><span class="string">''</span><span class="keyword">, </span><span class="default">$npath</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
later on<br />
<br />
<span class="default">&lt;?php<br />
GetRelativePath</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
If anyone has a better way, get to the constructive critisism!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68017""></a>
  <div class="note">
   <strong class="user">legolas558 dot sourceforge comma net</strong>
   <a href="#68017" class="date">10-Jul-2006 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The best way to get the absolute path of the folder of the currently parsed PHP script is:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">if (</span><span class="default">DIRECTORY_SEPARATOR</span><span class="keyword">==</span><span class="string">'/'</span><span class="keyword">)<br />
&nbsp; </span><span class="default">$absolute_path </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">).</span><span class="string">'/'</span><span class="keyword">;<br />
else<br />
&nbsp; </span><span class="default">$absolute_path </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">'\\'</span><span class="keyword">, </span><span class="string">'/'</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">)).</span><span class="string">'/'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This will result in an absolute unix-style path which works ok also on PHP5 under Windows, where mixing '\' and '/' may give troubles.<br />
<br />
[EDIT by danbrown AT php DOT net: Applied author-supplied fix from follow-up note.]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55691""></a>
  <div class="note">
   <strong class="user">renich at woralelandia dot com</strong>
   <a href="#55691" class="date">10-Aug-2005 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
--- Edited by tularis@php.net ---<br />
You could also have a look at the getcwd() function<br />
--- End Edit ---<br />
<br />
A nice "current directory" function.<br />
<br />
function current_dir()<br />
{<br />
$path = dirname($_SERVER[PHP_SELF]);<br />
$position = strrpos($path,'/') + 1;<br />
print substr($path,$position);<br />
}<br />
<br />
current_dir();<br />
<br />
I find this usefull for a lot of stuff! You can maintain a modular site with dir names as modules names. At least I would like PHP guys to add this to the function list!<br />
<br />
If there is anything out there like it, please tell me.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54868""></a>
  <div class="note">
   <strong class="user">klugg this-is-junk at tlen dot pl</strong>
   <a href="#54868" class="date">18-Jul-2005 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Attention with this. Dirname likes to mess with the slashes.<br />
On Windows, Apache: <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">echo </span><span class="string">'$_SERVER[PHP_SELF]: ' </span><span class="keyword">. </span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">] . </span><span class="string">'&lt;br /&gt;'</span><span class="keyword">;<br />
echo </span><span class="string">'Dirname($_SERVER[PHP_SELF]: ' </span><span class="keyword">. </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'PHP_SELF'</span><span class="keyword">]) . </span><span class="string">'&lt;br&gt;'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
prints out<br />
<br />
$_SERVER[PHP_SELF]: /index.php<br />
Dirname($_SERVER[PHP_SELF]: \</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54130""></a>
  <div class="note">
   <strong class="user">tobylewis at mac dot com</strong>
   <a href="#54130" class="date">24-Jun-2005 03:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since the paths in the examples given only have two parts (e.g. "/etc/passwd") it is not obvious whether dirname returns the single path element of the parent directory or whether it returns the whole path up to and including the parent directory.&nbsp; From experimentation it appears to be the latter.<br />
<br />
e.g. <br />
<br />
dirname('/usr/local/magic/bin');<br />
<br />
returns '/usr/local/magic'&nbsp; and not just 'magic'<br />
<br />
Also it is not immediately obvious that dirname effectively returns the parent directory of the last item of the path regardless of whether the last item is a directory or a file.&nbsp; (i.e. one might think that if the path given was a directory then dirname would return the entire original path since that is a directory name.)<br />
<br />
Further the presense of a directory separator at the end of the path does not necessarily indicate that last item of the path is a directory, and so <br />
<br />
dirname('/usr/local/magic/bin/');&nbsp; #note final '/'<br />
<br />
would return the same result as in my example above.<br />
<br />
In short this seems to be more of a string manipulation function that strips off the last non-null file or directory element off of a path string.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52326""></a>
  <div class="note">
   <strong class="user">Holger Thölking</strong>
   <a href="#52326" class="date">28-Apr-2005 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you merely want to find out wether a certain file is located within or underneath a certain directory or not, e.g. for White List validation, the following function might be useful to you:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">in_dir </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">, </span><span class="default">$in_dir</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$dir&nbsp; &nbsp; </span><span class="keyword">= </span><span class="default">realpath </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$in_dir </span><span class="keyword">= </span><span class="default">realpath </span><span class="keyword">(</span><span class="default">$in_dir</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_dir </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dir </span><span class="keyword">= </span><span class="default">dirname </span><span class="keyword">(</span><span class="default">$file</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; do {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$dir </span><span class="keyword">=== </span><span class="default">$in_dir</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$is_in_dir </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; } while (</span><span class="default">$dir </span><span class="keyword">!== (</span><span class="default">$dir </span><span class="keyword">= </span><span class="default">dirname </span><span class="keyword">(</span><span class="default">$dir</span><span class="keyword">)));<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return (bool) @</span><span class="default">$is_in_dir</span><span class="keyword">;<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="38662""></a>
  <div class="note">
   <strong class="user">soywiz at hotmail dot com</strong>
   <a href="#38662" class="date">02-Jan-2004 03:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use it to get parent directory:<br />
<br />
dirname(dirname(__FILE__))<br />
<br />
...include a file relative to file path:<br />
<br />
include(dirname(__FILE__) . '/path/relative/file_to_include.php');<br />
<br />
..etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28473""></a>
  <div class="note">
   <strong class="user">andrey at php dot net</strong>
   <a href="#28473" class="date">14-Jan-2003 04:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Code for write permissions check:<br />
<br />
<span class="default">&lt;?php<br />
error_reporting</span><span class="keyword">(</span><span class="default">E_ALL</span><span class="keyword">);<br />
</span><span class="default">$dir_name </span><span class="keyword">= </span><span class="string">'/var/www/virtual/phpintra/htdocs/php/'</span><span class="keyword">;<br />
do {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$b_is_writable </span><span class="keyword">= </span><span class="default">is_writable</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">sprintf</span><span class="keyword">(</span><span class="string">"Dir[%s]Writable[%s]\n"</span><span class="keyword">, </span><span class="default">$dir_name</span><span class="keyword">, </span><span class="default">$b_is_writable</span><span class="keyword">? </span><span class="string">'YES'</span><span class="keyword">:</span><span class="string">'NO'</span><span class="keyword">);<br />
}while ((</span><span class="default">$dir_name </span><span class="keyword">= </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$dir_name</span><span class="keyword">)) !=</span><span class="string">'/'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28397""></a>
  <div class="note">
   <strong class="user">rudecoder at yahoo dot com</strong>
   <a href="#28397" class="date">11-Jan-2003 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
dirname can be used to create self referencing web scripts with the following one liner.<br />
<br />
<span class="default">&lt;?php<br />
$base_url </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">$DOCUMENT_ROOT</span><span class="keyword">, </span><span class="string">""</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$PHP_SELF</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
Using this method on a file such as:<br />
<br />
/home/mysite/public_html/wherever/whatever.php<br />
<br />
will return:<br />
<br />
/wherever<br />
<br />
Now $base_url can be used in your HTML to reference other scripts in the same directory.<br />
<br />
Example:<br />
<br />
href='&lt;?=$base_url?&gt;/myscript.php'</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28292""></a>
  <div class="note">
   <strong class="user">dave at corecomm dot us</strong>
   <a href="#28292" class="date">08-Jan-2003 07:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I very much appreciated Fredrich Echol's suggestion (rwf at gpcom dot net) of how to find a base path, but found that it failed when the initial script was already in the root folder -- dirname('/rootscript.php')=='/' and dirname('/include/includescript.php')=='/include' which have the same number of slashes. This variation is what I'm now using:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (!</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"BASE_PATH"</span><span class="keyword">)) </span><span class="default">define</span><span class="keyword">(</span><span class="string">'BASE_PATH'</span><span class="keyword">, </span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">'SCRIPT_NAME'</span><span class="keyword">])==</span><span class="string">'/' </span><span class="keyword">? </span><span class="string">'./' </span><span class="keyword">: </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"../"</span><span class="keyword">,&nbsp; </span><span class="default">substr_count</span><span class="keyword">(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">$_SERVER</span><span class="keyword">[</span><span class="string">"SCRIPT_NAME"</span><span class="keyword">]), </span><span class="string">"/"</span><span class="keyword">)));<br />
</span><span class="default">?&gt;<br />
</span><br />
This explicitly checks for the root path (/) and uses './' as the base path if we're in the root folder.<br />
I put this at/near the top of any file that calls another. (I used define for my own convenience; should work just fine with variables and without testing to see if you already did it.)<br />
<br />
Note that in both cases (root-folder script and non-root-folder script), BASE_PATH will include a trailing slash. At least with Apache on Darwin (Mac OS X), you can include(BASE_PATH.'/myfile.php'); and the doubled slash won't cause any problems, giving the same result as include(BASE_PATH.'myfile.php'); .</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21138""></a>
  <div class="note">
   <strong class="user">tapken at engter dot de</strong>
   <a href="#21138" class="date">30-Apr-2002 09:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To get the directory of current included file:<br />
<br />
<span class="default">&lt;?php<br />
dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
For example, if a script called 'database.init.php' which is included from anywhere on the filesystem wants to include the script 'database.class.php', which lays in the same directory, you can use:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">include_once(</span><span class="default">dirname</span><span class="keyword">(</span><span class="default">__FILE__</span><span class="keyword">) . </span><span class="string">'/database.class.php'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.delete.html">delete</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.disk-free-space.html">disk_free_space</a></div>
 <div class="up"><a href="ref.filesystem.html">ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  é–¢æ•°</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
