<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>結果におけるフィールドの数を得る</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysql-list-tables.html">mysql_list_tables</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysql-num-rows.html">mysql_num_rows</a></div>
 <div class="up"><a href="ref.mysql.html">MySQL 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.mysql-num-fields" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mysql_num_fields</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_num_fields</span> &mdash; <span class="dc-title">結果におけるフィールドの数を得る</span></p>

 </div>

 <div id="function.mysql-num-fields-refsynopsisdiv">
  <div class="warning"><strong class="warning">警告</strong>
   <p class="para">
この拡張モジュールは PHP 5.5.0 で非推奨になりました。将来のバージョンで削除される予定です。
<a href="book.mysqli.html" class="link">MySQLi</a> あるいは
<a href="ref.pdo-mysql.html" class="link">PDO_MySQL</a> を使うべきです。詳細な情報は
<a href="mysqlinfo.api.choosing.html" class="link">MySQL: API の選択</a> や
<a href="faq.databases.html#faq.databases.mysql.deprecated" class="link">それに関連する FAQ</a> を参照ください。
この関数の代替として、これらが使えます。</p>
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="mysqli.field-count.html" class="function">mysqli_field_count()</a></span></li>
    <li class="member"> <span class="methodname"><a href="pdostatement.columncount.html" class="methodname">PDOStatement::columnCount()</a></span></li>
   </ul>
  </div>
 </div>

 <div class="refsect1 description" id="refsect1-function.mysql-num-fields-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>mysql_num_fields</strong></span>
    ( <span class="methodparam"><span class="type">resource</span> <code class="parameter">$result</code></span>
   )</div>

  <p class="para rdfs-comment">
   クエリから、フィールドの数を取得します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mysql-num-fields-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>
<span class="term"><em><code class="parameter">
result</code></em></span><dd>
<p class="para">評価された結果 <span class="type"><span class="type リソース">リソース</span></span>。
この結果は、 <span class="function"><a href="function.mysql-query.html" class="function">mysql_query()</a></span> のコールにより得られたものです。</p>
</dd>
</dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mysql-num-fields-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に結果セット <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> のフィールド数、
   失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.mysql-num-fields-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-1602">
    <p><strong>例1  <span class="function"><strong>mysql_num_fields()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;id,email&nbsp;FROM&nbsp;people&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;'42'"</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'Could&nbsp;not&nbsp;run&nbsp;query:&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">mysql_error</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;exit;<br />}<br /><br /></span><span style="color: #FF8000">/*&nbsp;id,email&nbsp;の&nbsp;2&nbsp;つのフィールドがあるので、2&nbsp;を返す&nbsp;*/<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">mysql_num_fields</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.mysql-num-fields-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    下位互換のために、次の非推奨別名を使用してもいいでしょう。
     <span class="function"><strong>mysql_numfields()</strong></span>
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mysql-num-fields-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.mysql-select-db.html" class="function" rel="rdfs-seeAlso">mysql_select_db()</a> - MySQL データベースを選択する</span></li>
    <li class="member"> <span class="function"><a href="function.mysql-query.html" class="function" rel="rdfs-seeAlso">mysql_query()</a> - MySQL クエリを送信する</span></li>
    <li class="member"> <span class="function"><a href="function.mysql-fetch-field.html" class="function" rel="rdfs-seeAlso">mysql_fetch_field()</a> - 結果からカラム情報を取得し、オブジェクトとして返す</span></li>
    <li class="member"> <span class="function"><a href="function.mysql-num-rows.html" class="function" rel="rdfs-seeAlso">mysql_num_rows()</a> - 結果における行の数を得る</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="74216""></a>
  <div class="note">
   <strong class="user">php at jezusisheer dot nl</strong>
   <a href="#74216" class="date">30-Mar-2007 08:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that, if you want to get the amount of columns of a table and you're using the "SHOW COLUMNS FROM $table" query, you will have to use mysql_num_rows() instead of mysql_num_fields() on the result. This becomes logical when thinking about it, because the SHOW COLUMNS query returns a result with six columns (Field, Type, Null, Key, Default and Extra) and with a single row for every column found. If you'd count the number of fields, you'd always get 6. If you count the number of rows, you'll get the amount of columns found.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="33224""></a>
  <div class="note">
   <strong class="user">tharkey at tharkey dot net</strong>
   <a href="#33224" class="date">19-Jun-2003 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use it without a requete, just to list the fields :<br />
<br />
$liste_champs = mysql_list_fields ( $Base, $Table, $connexion);<br />
<br />
for ($i=0; $i &lt; mysql_num_fields ($l_champs); $i++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo ( mysql_field_name ($l_champs, $i) );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; echo (' / ');<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25664""></a>
  <div class="note">
   <strong class="user">apass AT passmoore DOT com</strong>
   <a href="#25664" class="date">02-Oct-2002 12:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Adding to the last comment: you can dynamically loop through any number of&nbsp; columns AND rows like so-<br />
<br />
$query="your SQL";<br />
$result=mysql_query($query) or die("Query ($query) sucks!");<br />
$fields=mysql_num_fields($result);<br />
<br />
echo "&lt;table&gt;\n&lt;tr&gt;";<br />
for ($i=0; $i &lt; mysql_num_fields($result); $i++) //Table Header<br />
{ print "&lt;th&gt;".mysql_field_name($result, $i)."&lt;/th&gt;"; }<br />
echo "&lt;/tr&gt;\n";<br />
while ($row = mysql_fetch_row($result)) { //Table body<br />
echo "&lt;tr&gt;";<br />
&nbsp;&nbsp;&nbsp; for ($f=0; $f &lt; $fields; $f++) {<br />
&nbsp;&nbsp;&nbsp; echo "&lt;td&gt;$row[$f]&lt;/td&gt;"; }<br />
echo "&lt;/tr&gt;\n";}<br />
echo "&lt;/table&gt;&lt;p&gt;";<br />
<br />
This has been tested.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="15620""></a>
  <div class="note">
   <strong class="user">matt at iwdt dot net</strong>
   <a href="#15620" class="date">24-Sep-2001 03:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
here's one way to print out a row of &lt;th&gt; tags from a table<br />
NOTE: i didn't test this<br />
<br />
$result = mysql_query("select * from table");<br />
<br />
for ($i = 0; $i &lt; mysql_num_fields($result); $i++) {<br />
&nbsp;&nbsp;&nbsp; print "&lt;th&gt;".mysql_field_name($result, $i)."&lt;/th&gt;\n";<br />
}<br />
<br />
post a comment if there's an error</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="10283""></a>
  <div class="note">
   <strong class="user">bwark at stanford dot edu</strong>
   <a href="#10283" class="date">24-Dec-2000 11:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you just want the number of fields in a table, you can do something like this:<br />
<br />
<span class="default">&lt;?php<br />
$db_id </span><span class="keyword">= </span><span class="default">mysql_connet</span><span class="keyword">();<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">mysql_query</span><span class="keyword">(</span><span class="string">"DESCRIBE [tableName], </span><span class="default">$db_id</span><span class="string">);<br />
<br />
</span><span class="default">$numFields</span><span class="string"> = mysql_num_rows(</span><span class="default">$result</span><span class="string">);<br />
?&gt;<br />
<br />
Because "</span><span class="default">DESCRIBE</span><span class="string">" returns one row for each field in the table (at least in MySQL), this will work.</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.mysql-list-tables.html">mysql_list_tables</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.mysql-num-rows.html">mysql_num_rows</a></div>
 <div class="up"><a href="ref.mysql.html">MySQL 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
