<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ひとつまたは複数の配列をマージする</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-merge-recursive.html">array_merge_recursive</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-multisort.html">array_multisort</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-merge" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_merge</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">array_merge</span> &mdash; <span class="dc-title">ひとつまたは複数の配列をマージする</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-merge-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_merge</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array1</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   前の配列の後ろに配列を追加することにより、
   ひとつまたは複数の配列の要素をマージし、得られた配列を返します。
  </p>
  <p class="para">
   入力配列が同じキー文字列を有していた場合、そのキーに関する後に指定された値が、
   前の値を上書きします。しかし、配列が同じ添字番号を有していても
   値は追記されるため、このようなことは起きません。
  </p>
  <p class="para">
   入力配列の中にある数値添字要素の添字の数値は、
   結果の配列ではゼロから始まる連続した数値に置き換えられます。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-merge-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">array1</code></em></span>
     <dd>

      <p class="para">
       最初の配列。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">...</code></em></span>
     <dd>

      <p class="para">
       マージしていく任意の数の配列のリスト。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-merge-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   結果の配列を返します。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-merge-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.0.0</td>
       <td>
        <div class="warning"><strong class="warning">警告</strong>
         <p class="para">
           <span class="function"><strong>array_merge()</strong></span> の動作は PHP 5 で変更されました。PHP 4 とは異なり、
           <span class="function"><strong>array_merge()</strong></span> は、<span class="type"><a href="language.types.array.html" class="type array">array</a></span>
          型のパラメータのみを受け取るようになりました。しかし、
          他の型をマージするために型キャストを使用することも可能です。
          詳細は以下の例を参照してください。
         </p>
         <p class="para">
          <div class="example" id="example-4936">
           <p><strong>例1  <span class="function"><strong>array_merge()</strong></span> PHP 5 の例</strong></p>
           <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$beginning&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$end&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'bar'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">((array)</span><span style="color: #0000BB">$beginning</span><span style="color: #007700">,&nbsp;(array)</span><span style="color: #0000BB">$end</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
           </div>

           <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
           <div class="example-contents screen">
    <div class="cdata"><pre>
    Array
    (
        [0] =&gt; foo
        [1] =&gt; bar
    )
</pre></div>
           </div>
          </div>
         </p>
        </div>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-merge-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4937">
    <p><strong>例2  <span class="function"><strong>array_merge()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"shape"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"trapezoid"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [color] =&gt; green
    [0] =&gt; 2
    [1] =&gt; 4
    [2] =&gt; a
    [3] =&gt; b
    [shape] =&gt; trapezoid
    [4] =&gt; 4
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4938">
    <p><strong>例3 簡単な  <span class="function"><strong>array_merge()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"data"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     数値添字が振りなおされることに注意!
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; data
)
</pre></div>
    </div>
    <div class="example-contents"><p>
     二番目の配列の要素を最初の配列に追加したい
     (最初の配列に存在する要素は上書きせず、添字も変更しない)
     場合は、配列結合演算子
     <em>+</em> を使います。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'zero_a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'two_a'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'three_a'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'one_b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'three_b'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'four_b'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$array1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     最初の配列のキーはそのまま残ります。
     両方の配列に同じキーが存在する場合は最初の配列のものが残り、
     二番目の配列の内容は無視されます。
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
array(5) {
  [0]=&gt;
  string(6) &quot;zero_a&quot;
  [2]=&gt;
  string(5) &quot;two_a&quot;
  [3]=&gt;
  string(7) &quot;three_a&quot;
  [1]=&gt;
  string(5) &quot;one_b&quot;
  [4]=&gt;
  string(6) &quot;four_b&quot;
}
</pre></div>
    </div>
   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.array-merge-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-merge-recursive.html" class="function" rel="rdfs-seeAlso">array_merge_recursive()</a> - 二つ以上の配列を再帰的にマージする</span></li>
    <li class="member"> <span class="function"><a href="function.array-combine.html" class="function" rel="rdfs-seeAlso">array_combine()</a> - 一方の配列をキーとして、もう一方の配列を値として、ひとつの配列を生成する</span></li>
    <li class="member"><a href="language.operators.array.html" class="link">配列演算子</a></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113036""></a>
  <div class="note">
   <strong class="user">vladas dot dirzys at gmail dot com</strong>
   <a href="#113036" class="date">21-Aug-2013 06:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To combine several results (arrays):<br />
<br />
<span class="default">&lt;?php<br />
$results </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'foo1'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'foo2'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'bar1'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'bar2'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
<br />
</span><span class="default">$rows </span><span class="keyword">= </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_merge'</span><span class="keyword">, </span><span class="default">$results</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rows</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; foo1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; foo2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
However, example below helps to preserve numeric keys:<br />
<br />
<span class="default">&lt;?php<br />
$results </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">123 </span><span class="keyword">=&gt; array(</span><span class="string">'foo1'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">456 </span><span class="keyword">=&gt; array(</span><span class="string">'foo2'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; ),<br />
&nbsp;&nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">321 </span><span class="keyword">=&gt; array(</span><span class="string">'bar1'</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">654 </span><span class="keyword">=&gt; array(</span><span class="string">'bar2'</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
<br />
</span><span class="default">$rows </span><span class="keyword">= array();<br />
foreach (</span><span class="default">$results </span><span class="keyword">as &amp;</span><span class="default">$result</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$rows </span><span class="keyword">= </span><span class="default">$rows </span><span class="keyword">+ </span><span class="default">$result</span><span class="keyword">; </span><span class="comment">// preserves keys<br />
</span><span class="keyword">}<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$rows</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
The above example will output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [123] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; foo1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [456] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; foo2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [321] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [654] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; bar2<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112196""></a>
  <div class="note">
   <strong class="user">Janez R.</strong>
   <a href="#112196" class="date">16-May-2013 05:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that -1 is a numeric key and will be reindexed.<br />
Less obvious numeric keys are also '-1' (becomes -1) and -1.5 (becomes -1). <br />
<br />
'-1a', however, is not a numeric key and you could exploit the fact that '-1a' == -1 evaluates to true in php (just a hint). But as this is not very efficient, operator + may be a better option.<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(-</span><span class="default">1</span><span class="keyword">=&gt; </span><span class="string">"-1"</span><span class="keyword">, </span><span class="string">'-2'</span><span class="keyword">=&gt; </span><span class="string">"'-2'"</span><span class="keyword">, -</span><span class="default">3.5</span><span class="keyword">=&gt; </span><span class="string">"-3.5"</span><span class="keyword">, </span><span class="string">'-4a'</span><span class="keyword">=&gt; </span><span class="string">"'-4a'"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,array()),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'-1a' </span><span class="keyword">== -</span><span class="default">1</span><span class="keyword">,<br />
));<br />
</span><span class="default">?&gt;<br />
</span><br />
Result:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-1] =&gt; -1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-2] =&gt; '-2'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-3] =&gt; -3.5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-4a] =&gt; '-4a'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; -1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; '-2'<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; -3.5<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [-4a] =&gt; '-4a'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 1<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108644""></a>
  <div class="note">
   <strong class="user">Gemorroj</strong>
   <a href="#108644" class="date">14-May-2012 05:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The function behaves differently with numbers more than PHP_INT_MAX<br />
<span class="default">&lt;?php<br />
$arr1 </span><span class="keyword">= array(</span><span class="string">'1234567898765432123456789' </span><span class="keyword">=&gt; </span><span class="string">'dd'</span><span class="keyword">);<br />
</span><span class="default">$arr2 </span><span class="keyword">= array(</span><span class="string">'123456789876543212345678' </span><span class="keyword">=&gt; </span><span class="string">'ddd'</span><span class="keyword">, </span><span class="string">'35' </span><span class="keyword">=&gt; </span><span class="string">'xxx'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">));<br />
</span><span class="comment">//<br />
</span><span class="default">$arr1 </span><span class="keyword">= array(</span><span class="string">'1234' </span><span class="keyword">=&gt; </span><span class="string">'dd'</span><span class="keyword">);<br />
</span><span class="default">$arr2 </span><span class="keyword">= array(</span><span class="string">'12345' </span><span class="keyword">=&gt; </span><span class="string">'ddd'</span><span class="keyword">, </span><span class="string">'35' </span><span class="keyword">=&gt; </span><span class="string">'xxx'</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span>result:<br />
array(3) {<br />
&nbsp; ["1234567898765432123456789"]=&gt;<br />
&nbsp; string(2) "dd"<br />
&nbsp; ["123456789876543212345678"]=&gt;<br />
&nbsp; string(3) "ddd"<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(3) "xxx"<br />
}<br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(2) "dd"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(3) "ddd"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(3) "xxx"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107718""></a>
  <div class="note">
   <strong class="user">izhar_aazmi at gmail dot com</strong>
   <a href="#107718" class="date">29-Feb-2012 05:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The problem that the array keys are reindexed, and further not working on array values of type object or other mixed types.<br />
<br />
Simply, I did this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">foreach(</span><span class="default">$new </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) <br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$old</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
}<br />
</span><span class="comment">// This will overwrite all values in OLD with any existing <br />
// matching value in NEW<br />
// And keep all non matching values from OLD intact.<br />
// No reindexing, and complete overwrite<br />
/// Working with all kind of data<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107590""></a>
  <div class="note">
   <strong class="user">alejandro dot anv at gmail dot com</strong>
   <a href="#107590" class="date">20-Feb-2012 08:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
WARNING: numeric subindexes are lost when merging arrays.<br />
<br />
Check this example:<br />
<br />
$a=array('abc'=&gt;'abc','def'=&gt;'def','123'=&gt;'123','xyz'=&gt;'xyz');<br />
echo "a=";print_r($a);<br />
$b=array('xxx'=&gt;'xxx');<br />
echo "b=";print_r($b);<br />
$c=array_merge($a,$b);<br />
echo "c=";print_r($c);<br />
<br />
The result is this:<br />
<br />
c=Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [abc] =&gt; abc<br />
&nbsp;&nbsp;&nbsp; [def] =&gt; def<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; 123<br />
&nbsp;&nbsp;&nbsp; [xyz] =&gt; xyz<br />
&nbsp;&nbsp;&nbsp; [xxx] =&gt; xxx<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106616""></a>
  <div class="note">
   <strong class="user">njp AT o2 DOT pl</strong>
   <a href="#106616" class="date">22-Nov-2011 01:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Uniques values merge for array_merge function:<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">array_unique_merge</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$variables </span><span class="keyword">= </span><span class="string">'$_'</span><span class="keyword">.</span><span class="default">implode</span><span class="keyword">(</span><span class="string">',$_'</span><span class="keyword">,</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">()));<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$func </span><span class="keyword">= </span><span class="default">create_function</span><span class="keyword">(</span><span class="string">'$tab'</span><span class="keyword">, </span><span class="string">' list('</span><span class="keyword">.</span><span class="default">$variables</span><span class="keyword">.</span><span class="string">') = $tab; return array_unique(array_merge('</span><span class="keyword">.</span><span class="default">$variables</span><span class="keyword">.</span><span class="string">'));'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$func</span><span class="keyword">(</span><span class="default">func_get_args</span><span class="keyword">());<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Doesn't work on objects.<br />
<br />
Smarter way for uniques values merge array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_unique_merge</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="string">'array_merge'</span><span class="keyword">, </span><span class="default">func_get_args</span><span class="keyword">()));<br />
&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
Example 1:<br />
<br />
$a = array(1,2);<br />
$b = array(2,3,4);<br />
<br />
array_unique_merge($a,$b);<br />
<br />
Return:<br />
array(1,2,3,4);<br />
<br />
Example 2:<br />
<br />
$a = array(1,2);<br />
$b = array(2,3,4);<br />
$c = array(2,3,4,5);<br />
<br />
array_unique_merge($a,$b);<br />
<br />
Return:<br />
array(1,2,3,4,5);<br />
<br />
Doesn't work on objects.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106037""></a>
  <div class="note">
   <strong class="user">w_barath at hotmail dot com</strong>
   <a href="#106037" class="date">05-Oct-2011 01:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I keep seeing posts for people looking for a function to replace numeric keys.<br />
<br />
No function is required for this, it is default behavior if the + operator:<br />
<br />
<span class="default">&lt;?php<br />
$a</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">"one"</span><span class="keyword">, </span><span class="string">"two"</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">);<br />
</span><span class="default">$b</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">"two"</span><span class="keyword">, </span><span class="string">"two"</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">"three"</span><span class="keyword">, </span><span class="string">"four"</span><span class="keyword">=&gt;</span><span class="default">4</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">+</span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; one<br />
&nbsp;&nbsp;&nbsp; [two] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; three<br />
&nbsp;&nbsp;&nbsp; [four] =&gt; 4<br />
)<br />
<br />
How this works:<br />
<br />
The + operator only adds unique keys to the resulting array.&nbsp; By making the replacements the first argument, they naturally always replace the keys from the second argument, numeric or not! =)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100607""></a>
  <div class="note">
   <strong class="user">craig ala craigatx.com</strong>
   <a href="#100607" class="date">26-Oct-2010 07:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Reiterating the notes about casting to arrays, be sure to cast if one of the arrays might be null:<br />
<br />
<span class="default">&lt;?php<br />
header</span><span class="keyword">(</span><span class="string">"Content-type:text/plain"</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">= array(</span><span class="string">'zzzz'</span><span class="keyword">, </span><span class="string">'xxxx'</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">'mmmm'</span><span class="keyword">,</span><span class="string">'nnnn'</span><span class="keyword">);<br />
<br />
echo </span><span class="string">"1 ==============\r\n"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"2 ==============\r\n"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= array();<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"3 ==============\r\n"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"4 ==============\r\n"</span><span class="keyword">;<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, (array)</span><span class="default">$b</span><span class="keyword">));<br />
<br />
echo </span><span class="string">"5 ==============\r\n"</span><span class="keyword">;<br />
echo </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)) ? </span><span class="string">'Result is null' </span><span class="keyword">: </span><span class="string">'Result is not null'</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Produces:<br />
<br />
1 ==============<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; zzzz<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; xxxx<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; mmmm<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; nnnn<br />
)<br />
2 ==============<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; zzzz<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; xxxx<br />
)<br />
3 ==============<br />
4 ==============<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; zzzz<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; xxxx<br />
)<br />
5 ==============<br />
Result is null</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100240""></a>
  <div class="note">
   <strong class="user">nzujev [AT] gmail [DOT] com</strong>
   <a href="#100240" class="date">03-Oct-2010 11:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be ready to surprise like this one.<br />
array_merge renumbers numeric keys even if key is as string.<br />
keys '1' &amp; '2' will be updated to 0 &amp; 1, but '1.1' &amp; '1.2' remain the same, but they are numeric too (is_numeric('1.1') -&gt; true)<br />
<br />
It's better to use '+' operator or to have your own implementation for array_merge.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$x1 </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'1'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Value 1'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'1.1'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Value 1.1'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$x2 </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'2'&nbsp; &nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Value 2'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'2.1'&nbsp;&nbsp; </span><span class="keyword">=&gt; </span><span class="string">'Value 2.1'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">( </span><span class="default">$x1</span><span class="keyword">, </span><span class="default">$x2 </span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;NOT as expected: '</span><span class="keyword">. </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) .</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">$x3 </span><span class="keyword">= </span><span class="default">$x1 </span><span class="keyword">+ </span><span class="default">$x2</span><span class="keyword">;<br />
<br />
echo </span><span class="string">'&lt;pre&gt;As expected: '</span><span class="keyword">. </span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$x3</span><span class="keyword">, </span><span class="default">true </span><span class="keyword">) .</span><span class="string">'&lt;/pre&gt;'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
NOT as expected: Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Value 1<br />
&nbsp;&nbsp;&nbsp; [1.1] =&gt; Value 1.1<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Value 2<br />
&nbsp;&nbsp;&nbsp; [2.1] =&gt; Value 2.1<br />
)<br />
As expected: Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Value 1<br />
&nbsp;&nbsp;&nbsp; [1.1] =&gt; Value 1.1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Value 2<br />
&nbsp;&nbsp;&nbsp; [2.1] =&gt; Value 2.1<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99504""></a>
  <div class="note">
   <strong class="user">zagadka at evorg dot dk</strong>
   <a href="#99504" class="date">20-Aug-2010 02:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if you use + to merge array in order to preserve keys, that in case of duplicates the values from the left array in the addition is used.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="98386""></a>
  <div class="note">
   <strong class="user">jpakin at gmail dot com</strong>
   <a href="#98386" class="date">11-Jun-2010 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had a hard time using array_merge with large datasets. By the time my web framework was in memory there wasn't enough space to have multiple copies of my dataset. To fix this I had to remove any functions which operated on the data set and made a copy in memory (pass by value). <br />
<br />
I realize the available memory to an application instance is modifiable, but I didn't think I should have to set it below the default 16mb for a web app!<br />
<br />
Unfortunately, a number of php functions pass by value internally, so I had to write my own merge function. This passes by reference, utilizes a fast while loop (thus doesn't need to call count() to get an upper boundary, also a php pass by value culprit), and unsets the copy array (freeing memory as it goes). <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">mergeArrays</span><span class="keyword">(&amp;</span><span class="default">$sourceArray</span><span class="keyword">, &amp;</span><span class="default">$copyArray</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//merge copy array into source array <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while (isset(</span><span class="default">$copyArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sourceArray</span><span class="keyword">[] = </span><span class="default">$copyArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$copyArray</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
This fixed the problem. I would love to know if there is an even faster, more efficient way. Simply adding the two arrays won't work since there is an overlap of index.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96844""></a>
  <div class="note">
   <strong class="user">nekroshorume at gmail dot com</strong>
   <a href="#96844" class="date">18-Mar-2010 07:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
be aware there is a slight difference:<br />
<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array(</span><span class="string">'lang'</span><span class="keyword">=&gt;</span><span class="string">'js'</span><span class="keyword">,</span><span class="string">'method'</span><span class="keyword">=&gt;</span><span class="string">'GET'</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">'lang'</span><span class="keyword">=&gt;</span><span class="string">'php'</span><span class="keyword">,</span><span class="string">'browser'</span><span class="keyword">=&gt;</span><span class="string">'opera'</span><span class="keyword">,</span><span class="string">'method'</span><span class="keyword">=&gt;</span><span class="string">'POST'</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
BETWEEN:<br />
<br />
<span class="default">&lt;?php array_merge</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">,</span><span class="default">$array1</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>outputs: Array ( [lang] =&gt; js [browser] =&gt; opera [method] =&gt; GET )<br />
<br />
notice that the repeated keys will be overwritten by the ones of $array1, maintaining those, because it is the array that is being merged<br />
<br />
AND<br />
<br />
<span class="default">&lt;?php array_merge</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">); </span><span class="default">?&gt;<br />
</span>outputs: Array ( [lang] =&gt; php [method] =&gt; POST [browser] =&gt; opera )<br />
<br />
here the oposite takes place: array1 will have its elements replaced by those of array2.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95795""></a>
  <div class="note">
   <strong class="user">riddlemd at gmail dot com</strong>
   <a href="#95795" class="date">22-Jan-2010 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Apparently there is a shorthand that works very much like array_merge. I figured I would leave a comment here, sense I saw it used in code but found nothing about it from google searches.<br />
<br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= array(<br />
&nbsp;</span><span class="string">'name' </span><span class="keyword">=&gt; </span><span class="string">'John Doe'<br />
</span><span class="keyword">);<br />
</span><span class="default">$array </span><span class="keyword">+= array(<br />
&nbsp;</span><span class="string">'address' </span><span class="keyword">=&gt; </span><span class="string">'someplace somestreet'<br />
</span><span class="keyword">);<br />
<br />
echo </span><span class="default">$array</span><span class="keyword">[</span><span class="string">'address'</span><span class="keyword">]; </span><span class="comment">// Outputs 'someplace somestreet'<br />
</span><span class="default">?&gt;<br />
</span><br />
A difference from merge_array, it does NOT overwrite existing keys, regardless of key type.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93839""></a>
  <div class="note">
   <strong class="user">allankelly</strong>
   <a href="#93839" class="date">02-Oct-2009 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
More on the union (+) operator:<br />
the order of arrays is important and does not agree in my test below<br />
with the other posts. The 'unique' operation preserves the initial key-value and discards later duplicates.<br />
<br />
PHP 5.2.6-2ubuntu4.2<br />
<br />
<span class="default">&lt;?php<br />
$a1</span><span class="keyword">=array(</span><span class="string">'12345'</span><span class="keyword">=&gt;</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'23456'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'34567'</span><span class="keyword">=&gt;</span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'45678'</span><span class="keyword">=&gt;</span><span class="string">'d'</span><span class="keyword">);<br />
</span><span class="default">$a2</span><span class="keyword">=array(</span><span class="string">'34567'</span><span class="keyword">=&gt;</span><span class="string">'X'</span><span class="keyword">);<br />
</span><span class="default">$a3</span><span class="keyword">=</span><span class="default">$a1 </span><span class="keyword">+ </span><span class="default">$a2</span><span class="keyword">;<br />
</span><span class="default">$a4</span><span class="keyword">=</span><span class="default">$a2 </span><span class="keyword">+ </span><span class="default">$a1</span><span class="keyword">;<br />
print(</span><span class="string">'a1:'</span><span class="keyword">); </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">);<br />
print(</span><span class="string">'a2:'</span><span class="keyword">); </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a2</span><span class="keyword">);<br />
print(</span><span class="string">'a3:'</span><span class="keyword">); </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">);<br />
print(</span><span class="string">'a4:'</span><span class="keyword">); </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a4</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
a1:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [12345] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [23456] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [34567] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [45678] =&gt; d<br />
)<br />
a2:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [34567] =&gt; X<br />
)<br />
a3:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [12345] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [23456] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [34567] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [45678] =&gt; d<br />
)<br />
a4:Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [34567] =&gt; X<br />
&nbsp;&nbsp;&nbsp; [12345] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [23456] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [45678] =&gt; d<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93768""></a>
  <div class="note">
   <strong class="user">Tudor</strong>
   <a href="#93768" class="date">27-Sep-2009 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_merge will merge numeric keys in array iteration order, not in increasing numeric order. For example:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="default">10</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">20</span><span class="keyword">);&nbsp; </span><span class="comment">// same as array(10, 20);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="default">30</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="default">50</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">=&gt;</span><span class="default">40</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
array_merge($a, $b) will be array(10, 20, 30, 50, 40) and not array(10, 20, 30, 40, 50).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92961""></a>
  <div class="note">
   <strong class="user">Julian Egelstaff</strong>
   <a href="#92961" class="date">16-Aug-2009 10:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
More about the union operator (+)...<br />
<br />
The "array_unique" that gets applied, is actually based on the keys, not the values.&nbsp; So if you have multiple values with the same key, only the last one will be preserved.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"zero"</span><span class="keyword">;<br />
</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"one"</span><span class="keyword">;<br />
<br />
</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="default">0</span><span class="keyword">;<br />
</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">1</span><span class="keyword">;<br />
<br />
</span><span class="default">$array3 </span><span class="keyword">= </span><span class="default">$array1 </span><span class="keyword">+ </span><span class="default">$array2</span><span class="keyword">;<br />
<br />
</span><span class="comment">// array3 will look like:<br />
// array(0=&gt;0, 1=&gt;1)<br />
// ie: beware of the latter keys overwriting the former keys<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92602""></a>
  <div class="note">
   <strong class="user">Julian Egelstaff</strong>
   <a href="#92602" class="date">31-Jul-2009 08:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In some situations, the union operator ( + ) might be more useful to you than array_merge.&nbsp; The array_merge function does not preserve numeric key values.&nbsp; If you need to preserve the numeric keys, then using + will do that.<br />
<br />
ie:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array1</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] = </span><span class="string">"zero"</span><span class="keyword">;<br />
</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"one"</span><span class="keyword">;<br />
<br />
</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="string">"one"</span><span class="keyword">;<br />
</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = </span><span class="string">"two"</span><span class="keyword">;<br />
</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] = </span><span class="string">"three"</span><span class="keyword">;<br />
<br />
</span><span class="default">$array3 </span><span class="keyword">= </span><span class="default">$array1 </span><span class="keyword">+ </span><span class="default">$array2</span><span class="keyword">;<br />
<br />
</span><span class="comment">//This will result in::<br />
<br />
</span><span class="default">$array3 </span><span class="keyword">= array(</span><span class="default">0</span><span class="keyword">=&gt;</span><span class="string">"zero"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">=&gt;</span><span class="string">"one"</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">=&gt;</span><span class="string">"two"</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">=&gt;</span><span class="string">"three"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Note the implicit "array_unique" that gets applied as well.&nbsp; In some situations where your numeric keys matter, this behaviour could be useful, and better than array_merge.<br />
<br />
--Julian</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92346""></a>
  <div class="note">
   <strong class="user">enaeseth at gmail dot com</strong>
   <a href="#92346" class="date">20-Jul-2009 11:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In both PHP 4 and 5, array_merge preserves references in array values. For example:<br />
<br />
<span class="default">&lt;?php<br />
$foo </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">;<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">"foo" </span><span class="keyword">=&gt; &amp;</span><span class="default">$foo</span><span class="keyword">);<br />
</span><span class="default">$merged_array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, array(</span><span class="string">"bar" </span><span class="keyword">=&gt; </span><span class="string">"baz"</span><span class="keyword">));<br />
</span><span class="default">$merged_array</span><span class="keyword">[</span><span class="string">"foo"</span><span class="keyword">] = </span><span class="default">24</span><span class="keyword">;<br />
</span><span class="default">assert</span><span class="keyword">(</span><span class="default">$foo </span><span class="keyword">=== </span><span class="default">24</span><span class="keyword">); </span><span class="comment">// works just fine<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89533""></a>
  <div class="note">
   <strong class="user">jerry at gii dot co dot jp</strong>
   <a href="#89533" class="date">12-Mar-2009 04:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There was a previous note that alluded to this, but at least in version 5.2.4 array_merge will return NULL if any of the arguments are NULL. This bit me with $_POST when none of the controls were successful.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85451""></a>
  <div class="note">
   <strong class="user">carrox at inbox dot lv</strong>
   <a href="#85451" class="date">01-Sep-2008 01:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Usage of operand '+' for merging arrays:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a</span><span class="keyword">=array(<br />
</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a1'</span><span class="keyword">,<br />
</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'a2'</span><span class="keyword">,<br />
</span><span class="string">'a3'</span><span class="keyword">,<br />
</span><span class="string">'a4'</span><span class="keyword">,<br />
</span><span class="string">'a5'</span><span class="keyword">);<br />
<br />
</span><span class="default">$b</span><span class="keyword">=array(</span><span class="string">'b1'</span><span class="keyword">,<br />
</span><span class="string">'b2'</span><span class="keyword">,<br />
</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b3'</span><span class="keyword">,<br />
</span><span class="string">'b4'</span><span class="keyword">);<br />
<br />
</span><span class="default">$a</span><span class="keyword">+=</span><span class="default">$b</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; a1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; a2<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a3<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; a4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; a5<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; b5<br />
)<br />
<br />
numeric keys of elements of array B what not presented in array A was added.<br />
<br />
<span class="default">&lt;?php<br />
<br />
$a</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'a1'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">=&gt;</span><span class="string">'a2'</span><span class="keyword">,</span><span class="string">'a3'</span><span class="keyword">,</span><span class="string">'a4'</span><span class="keyword">,</span><span class="string">'a5'</span><span class="keyword">);<br />
</span><span class="default">$b</span><span class="keyword">=array(</span><span class="default">100</span><span class="keyword">=&gt;</span><span class="string">'b1'</span><span class="keyword">,</span><span class="string">'b2'</span><span class="keyword">,</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b3'</span><span class="keyword">,</span><span class="string">'b4'</span><span class="keyword">);<br />
<br />
</span><span class="default">$a</span><span class="keyword">+=</span><span class="default">$b</span><span class="keyword">;<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
output:<br />
<br />
&nbsp;&nbsp; [a] =&gt; a1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; a2<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a3<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; a4<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; a5<br />
&nbsp;&nbsp;&nbsp; [100] =&gt; b1<br />
&nbsp;&nbsp;&nbsp; [101] =&gt; b2<br />
&nbsp;&nbsp;&nbsp; [102] =&gt; b4<br />
<br />
autoindex for array B started from 100, these keys not present in array A, so this elements was added to array A</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85029""></a>
  <div class="note">
   <strong class="user">ron at ronfolio dot com</strong>
   <a href="#85029" class="date">12-Aug-2008 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function similar to ian at fuzzygroove's array_interlace, but I need to pass more than two arrays.<br />
<br />
Here's my version, You can pass any number of arrays and it will interlace and key them properly.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_interlace</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$total </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$total </span><span class="keyword">&lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arr </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as </span><span class="default">$arg</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arg </span><span class="keyword">as </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">+= </span><span class="default">$total</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$j </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">ksort</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Example usage:<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'c'</span><span class="keyword">, </span><span class="string">'d'</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">'e'</span><span class="keyword">, </span><span class="string">'f'</span><span class="keyword">, </span><span class="string">'g'</span><span class="keyword">);<br />
</span><span class="default">$c </span><span class="keyword">= array(</span><span class="string">'h'</span><span class="keyword">, </span><span class="string">'i'</span><span class="keyword">, </span><span class="string">'j'</span><span class="keyword">);<br />
</span><span class="default">$d </span><span class="keyword">= array(</span><span class="string">'k'</span><span class="keyword">, </span><span class="string">'l'</span><span class="keyword">, </span><span class="string">'m'</span><span class="keyword">, </span><span class="string">'n'</span><span class="keyword">, </span><span class="string">'o'</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_interlace</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
result:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; e<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; h<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; k<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; f<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; i<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; l<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; g<br />
&nbsp;&nbsp;&nbsp; [10] =&gt; j<br />
&nbsp;&nbsp;&nbsp; [11] =&gt; m<br />
&nbsp;&nbsp;&nbsp; [12] =&gt; d<br />
&nbsp;&nbsp;&nbsp; [13] =&gt; n<br />
&nbsp;&nbsp;&nbsp; [14] =&gt; o<br />
)<br />
<br />
Let me know if you improve on it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84175""></a>
  <div class="note">
   <strong class="user">david_douard at hotmail dot com</strong>
   <a href="#84175" class="date">02-Jul-2008 11:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To avoid REINDEXING issues, <br />
<br />
use + operator :<br />
<br />
array_merge(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("truc" =&gt; "salut"),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array("machin" =&gt; "coucou")<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
returns <br />
<br />
array(2)<br />
{<br />
[0] =&gt; string() "salut"<br />
[1] =&gt; string() "coucou"<br />
}<br />
<br />
whereas<br />
<br />
array("truc" =&gt; "salut") + array("machin" =&gt; "coucou")<br />
<br />
returns<br />
<br />
array(2)<br />
{<br />
["truc"] =&gt; string() "salut"<br />
["machin"] =&gt; string() "coucou"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82306""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#82306" class="date">04-Apr-2008 11:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The documentation is a touch misleading when it says: "If only one array is given and the array is numerically indexed, the keys get reindexed in a continuous way."&nbsp; Even with two arrays, the resulting array is re-indexed:<br />
<br />
[bishop@predator staging]$ cat array_merge.php <br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array (</span><span class="default">23 </span><span class="keyword">=&gt; </span><span class="string">'Hello'</span><span class="keyword">, </span><span class="string">'42' </span><span class="keyword">=&gt; </span><span class="string">'World'</span><span class="keyword">);<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(array (</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'I say, '</span><span class="keyword">), </span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>[bishop@predator staging]$ php-5.2.5 array_merge.php <br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(7) "I say, "<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(5) "Hello"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(5) "World"<br />
}<br />
[bishop@predator staging]$ php-4.4.7 array_merge.php <br />
array(3) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(7) "I say, "<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(5) "Hello"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(5) "World"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81546""></a>
  <div class="note">
   <strong class="user">no_one at nobody dot com</strong>
   <a href="#81546" class="date">03-Mar-2008 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
PHP is wonderfully decides if an array key could be a number, it is a number!&nbsp; And thus wipes out the key when you array merge.&nbsp;&nbsp; Just a warning.<br />
<br />
$array1['4000'] = 'Grade 1 Widgets';<br />
$array1['4000a'] = 'Grade A Widgets';<br />
$array2['5830'] = 'Grade 1 Thing-a-jigs';<br />
$array2['HW39393'] = 'Some other widget';<br />
<br />
var_dump($array1);<br />
var_dump($array2);<br />
<br />
//results in...<br />
array(2) {<br />
&nbsp; [4000]=&gt;<br />
&nbsp; string(15) "Grade 1 Widgets"<br />
&nbsp; ["4000a"]=&gt;<br />
&nbsp; string(15) "Grade A Widgets"<br />
}<br />
array(2) {<br />
&nbsp; [5830]=&gt;<br />
&nbsp; string(20) "Grade 1 Thing-a-jigs"<br />
&nbsp; ["HW39393"]=&gt;<br />
&nbsp; string(17) "Some other widget"<br />
}<br />
<br />
var_dump(array_merge($array1,$array2));<br />
//results in...<br />
array(4) {<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(15) "Grade 1 Widgets"<br />
&nbsp; ["4000a"]=&gt;<br />
&nbsp; string(15) "Grade A Widgets"<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(20) "Grade 1 Thing-a-jigs"<br />
&nbsp; ["HW39393"]=&gt;<br />
&nbsp; string(17) "Some other widget"<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78959""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#78959" class="date">04-Nov-2007 09:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As has already been noted before, reindexing arrays is most cleanly performed by the array_values() function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76596""></a>
  <div class="note">
   <strong class="user">clancyhood at gmail dot com</strong>
   <a href="#76596" class="date">22-Jul-2007 01:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Similar to Jo I had a problem merging arrays (thanks for that Jo you kicked me out of my debugging slumber) - array_merge does NOT act like array_push, as I had anticipated<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'hello'</span><span class="keyword">); <br />
</span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'world'</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
</span><span class="comment">// gives '1', 'hello', 'world'<br />
<br />
&nbsp;<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'hello'</span><span class="keyword">); <br />
</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, array(</span><span class="string">'world'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// gives '1', 'hello'<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">, </span><span class="string">'hello'</span><span class="keyword">); <br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, array(</span><span class="string">'world'</span><span class="keyword">));<br />
<br />
</span><span class="comment">// gives '1', 'hello', 'world'<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
hope this helps someone</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75527""></a>
  <div class="note">
   <strong class="user">Joe at neosource dot com dot au</strong>
   <a href="#75527" class="date">04-Jun-2007 08:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found the "simple" method of adding arrays behaves differently as described in the documentation in PHP v5.2.0-10.<br />
<br />
$array1 + $array2 will only combine entries for keys that don't already exist.<br />
<br />
Take the following example:<br />
<br />
$ar1 = array('a', 'b');<br />
$ar2 = array('c', 'd');<br />
$ar3 = ($ar1 + $ar2);<br />
print_r($ar3);<br />
<br />
Result:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; b<br />
)<br />
<br />
Where as:<br />
<br />
$ar1 = array('a', 'b');<br />
$ar2 = array('c', 'd');<br />
$ar3 = array_merge($ar1, $ar2);<br />
print_r($ar3);<br />
<br />
Result:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; a<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; b<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; c<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; d<br />
)<br />
<br />
Hope this helps someone.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75268""></a>
  <div class="note">
   <strong class="user">RQuadling at GMail dot com</strong>
   <a href="#75268" class="date">21-May-2007 02:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For asteddy at tin dot it and others who are trying to merge arrays and keep the keys, don't forget the simple + operator.<br />
<br />
Using the array_merge_keys() function (with a small mod to deal with multiple arguments), provides no difference in output as compared to +.<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(-</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">'minus 1'</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'nought'</span><span class="keyword">);<br />
</span><span class="default">$c </span><span class="keyword">= array(</span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="string">'nought'</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">array_merge_keys</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">));<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">array_merge_keys</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">,</span><span class="default">$c</span><span class="keyword">));<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$a </span><span class="keyword">+ </span><span class="default">$b </span><span class="keyword">+ </span><span class="default">$c</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
results in ...<br />
<br />
array (&nbsp; -1 =&gt; 'minus 1',&nbsp; 0 =&gt; 'nought',)<br />
array (&nbsp; -1 =&gt; 'minus 1',&nbsp; 0 =&gt; 'nought',)<br />
array (&nbsp; -1 =&gt; 'minus 1',&nbsp; 0 =&gt; 'nought',)<br />
array (&nbsp; -1 =&gt; 'minus 1',&nbsp; 0 =&gt; 'nought',)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73584""></a>
  <div class="note">
   <strong class="user">Marce!</strong>
   <a href="#73584" class="date">02-Mar-2007 01:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I have been searching for an in-place merge function, but couldn't find one. This function merges two arrays, but leaves the order untouched. <br />
Here it is for all others that want it:<br />
<br />
function inplacemerge($a, $b) {<br />
&nbsp; $result = array();<br />
&nbsp; $i = $j = 0;<br />
&nbsp; if (count($a)==0) { return $b; }<br />
&nbsp; if (count($b)==0) { return $a; }<br />
&nbsp; while($i &lt; count($a) &amp;&amp; $j &lt; count($b)){<br />
&nbsp;&nbsp;&nbsp; if ($a[$i] &lt;= $b[$j]) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $result[] = $a[$i];<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ($a[$i]==$b[$j]) { $j++; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; $i++;<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $result[] = $b[$j];<br />
&nbsp;&nbsp; &nbsp;&nbsp; $j++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; while ($i&lt;count($a)){<br />
&nbsp;&nbsp;&nbsp; $result[] = $a[$i];<br />
&nbsp;&nbsp;&nbsp; $i++;<br />
&nbsp; }<br />
&nbsp; while ($j&lt;count($b)){<br />
&nbsp;&nbsp;&nbsp; $result[] = $b[$j];<br />
&nbsp;&nbsp;&nbsp; $j++;<br />
&nbsp; }<br />
&nbsp; return $result;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72556""></a>
  <div class="note">
   <strong class="user">ahigerd at stratitec dot com</strong>
   <a href="#72556" class="date">24-Jan-2007 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An earlier comment mentioned that array_splice is faster than array_merge for inserting values. This may be the case, but if your goal is instead to reindex a numeric array, array_values() is the function of choice. Performing the following functions in a 100,000-iteration loop gave me the following times: ($b is a 3-element array)<br />
<br />
array_splice($b, count($b)) =&gt; 0.410652<br />
$b = array_splice($b, 0) =&gt; 0.272513<br />
array_splice($b, 3) =&gt; 0.26529<br />
$b = array_merge($b) =&gt; 0.233582<br />
$b = array_values($b) =&gt; 0.151298</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72370""></a>
  <div class="note">
   <strong class="user">asteddy at tin dot it</strong>
   <a href="#72370" class="date">16-Jan-2007 04:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Sorry, I forgot to translate the the name of the function when it calls itself. Here is the correct code: <br />
&lt;?<br />
/*<br />
IT KEEPS ALL VALUES OF $arr1 AND <br />
ADDS ALL KEYS AND VALUES OF $arr2 THAT ARE NOT IN $arr1 <br />
*/<br />
function array_merge_keys($arr1, $arr2) {<br />
&nbsp;&nbsp;&nbsp; foreach($arr2 as $k=&gt;$v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!array_key_exists($k, $arr1)) { //K DOESN'T EXISTS //<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $arr1[$k]=$v;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else { // K EXISTS //<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (is_array($v)) { // K IS AN ARRAY //<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $arr1[$k]=array_merge_keys($arr1[$k], $arr2[$k]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $arr1;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71737""></a>
  <div class="note">
   <strong class="user">m dot kaczanowski at alianet dot pl</strong>
   <a href="#71737" class="date">13-Dec-2006 07:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To: zspencer at zacharyspencer dot com<br />
<br />
You forget about code of this function.<br />
<br />
&lt;?<br />
function safe_array_merge($a, $b) {<br />
&nbsp;&nbsp;&nbsp; foreach ($b as $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $a[] = $v;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $a;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71050""></a>
  <div class="note">
   <strong class="user">zspencer at zacharyspencer dot com</strong>
   <a href="#71050" class="date">09-Nov-2006 05:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I noticed the lack of a function that will safely merge two arrays without losing data due to duplicate keys but different values.<br />
<br />
So I wrote a quicky that would offset duplicate keys and thus preserve their data. of course, this does somewhat mess up association...<br />
<br />
<span class="default">&lt;?php<br />
$array1</span><span class="keyword">=array(</span><span class="string">'cats'</span><span class="keyword">=&gt;</span><span class="string">'Murder the beasties!'</span><span class="keyword">, </span><span class="string">'ninjas'</span><span class="keyword">=&gt;</span><span class="string">'Use Ninjas to murder cats!'</span><span class="keyword">);<br />
</span><span class="default">$array2</span><span class="keyword">=array(</span><span class="string">'cats'</span><span class="keyword">=&gt;</span><span class="string">'Cats are fluffy! Hooray for Cats!'</span><span class="keyword">, </span><span class="string">'ninjas'</span><span class="keyword">=&gt;</span><span class="string">'Ninas are mean cat brutalizers!!!'</span><span class="keyword">);<br />
</span><span class="default">$array3</span><span class="keyword">=</span><span class="default">safe_array_merge</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array3</span><span class="keyword">)<br />
</span><span class="comment">/*<br />
Array {<br />
cats =&gt; Murder the beasties!,<br />
ninjas =&gt; Use ninjas to murder cats!,<br />
<br />
?&gt;<br />
cats_0 =&gt; Cats are fluffy! Hooray for Cats!,<br />
ninjas_0 =&gt; Ninjas are mean cat brutalizers!!!<br />
}<br />
<br />
function safe_array_merge ()<br />
{<br />
&nbsp;&nbsp;&nbsp; $args = func_get_args();<br />
&nbsp;&nbsp;&nbsp; $result=array();<br />
&nbsp;&nbsp;&nbsp; foreach($args as &amp;$array)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $key=&gt;&amp;$value)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($result[$key]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $continue=TRUE;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fake_key=0;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while($continue==TRUE)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!isset($result[$key.'_'.$fake_key]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$key.'_'.$fake_key]=$value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $continue=FALSE;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fake_key++;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$key]=$value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}<br />
?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70865""></a>
  <div class="note">
   
   <a href="#70865" class="date">01-Nov-2006 03:47</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A more efficient array_merge that preserves keys, truly accepts an arbitrary number of arguments, and saves space on the stack (non recursive):<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_merge_keys</span><span class="keyword">(){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$args </span><span class="keyword">as &amp;</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;&amp;</span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69991""></a>
  <div class="note">
   <strong class="user">BigueNique at yahoo dot ca</strong>
   <a href="#69991" class="date">29-Sep-2006 04:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Needed an quick array_merge clone that preserves the keys:<br />
<br />
&lt;?<br />
// function array_join<br />
// merges 2 arrays preserving the keys, <br />
// even if they are numeric (unlike array_merge)<br />
// if 2 keys are identical, the last one overwites <br />
// the existing one, just like array_merge<br />
// merges up to 10 arrays, minimum 2.<br />
function array_join($a1, $a2, $a3=null, $a4=null, $a5=null, $a6=null, $a7=null, $a8=null, $a9=null, $a10=null) {<br />
&nbsp;&nbsp;&nbsp; $a=array();<br />
&nbsp;&nbsp;&nbsp; foreach($a1 as $key=&gt;$value) $a[$key]=$value;<br />
&nbsp;&nbsp;&nbsp; foreach($a2 as $key=&gt;$value) $a[$key]=$value;<br />
&nbsp;&nbsp;&nbsp; if (is_array($a3)) $a=array_join($a,$a3,$a4,$a5,$a6,$a7,$a8,$a9,$a10);<br />
&nbsp;&nbsp;&nbsp; return $a;<br />
}<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69600""></a>
  <div class="note">
   <strong class="user">poison</strong>
   <a href="#69600" class="date">12-Sep-2006 02:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use array_slice() in combination with array_merge() to insert values into an array like this:<br />
<br />
<span class="default">&lt;?php<br />
$test</span><span class="keyword">=</span><span class="default">range</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">10</span><span class="keyword">);<br />
</span><span class="default">$index</span><span class="keyword">=</span><span class="default">2</span><span class="keyword">;<br />
</span><span class="default">$data</span><span class="keyword">=</span><span class="string">"---here---"</span><span class="keyword">;<br />
</span><span class="default">$result</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">), array(</span><span class="default">$data</span><span class="keyword">), </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="default">$index</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69396""></a>
  <div class="note">
   <strong class="user">dercsar at gmail dot com</strong>
   <a href="#69396" class="date">04-Sep-2006 10:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_merge() overwrites ALL numerical indexes. No matter if you have non-numerical indexes or more than just one array.<br />
It reindexes them all. Period.<br />
<br />
(Only tried in 4.3.10)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68279""></a>
  <div class="note">
   
   <a href="#68279" class="date">20-Jul-2006 05:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Whoops!!!&nbsp; The 2nd posting before this one about the array_merge_alternative1() I made.&nbsp; Replace part of that code with this one below...<br />
<br />
--snip--<br />
&nbsp;&nbsp; &nbsp; /* 07/20/2006 - Added the if statement to avoid the warning message spitted out by array_unique() function, "Warning: Wrong datatype in array_unique() call"... */<br />
&nbsp;&nbsp; &nbsp; if ($xyz != 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $new_array2 = array_unique($new_array1);&nbsp; /* Work a lot like DISTINCT() in SQL... */<br />
&nbsp;&nbsp; &nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $new_array2 = array();<br />
&nbsp;&nbsp; &nbsp; }<br />
--snip--<br />
<br />
Because the unique_array() unexpectly give a warning message when it's empty...&nbsp; Sorry about that...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68275""></a>
  <div class="note">
   <strong class="user">anonyme</strong>
   <a href="#68275" class="date">20-Jul-2006 03:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I don't think that the comment on + operator for array in array_merge page, was understandable, this is just a little test to know exactly what's happend.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//test code for (array)+(array) operator <br />
</span><span class="default">$a1 </span><span class="keyword">= array( </span><span class="string">'10'</span><span class="keyword">, </span><span class="string">'11' </span><span class="keyword">, </span><span class="string">'12' </span><span class="keyword">, </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'1a'</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="string">'1b'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array( </span><span class="string">'20'</span><span class="keyword">, </span><span class="string">'21' </span><span class="keyword">, </span><span class="string">'22' </span><span class="keyword">, </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">'2a'</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">'2c'</span><span class="keyword">);<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$a1 </span><span class="keyword">+ </span><span class="default">$a2</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">);<br />
</span><span class="comment">//result: Array ( [0] =&gt; 10<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 11<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] =&gt; 12<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [a] =&gt; 1a<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [b] =&gt; 1b<br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [c] =&gt; 2c )<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">$a2 </span><span class="keyword">+ </span><span class="default">$a1</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">);<br />
</span><span class="comment">//result: Array ( [0] =&gt; 20 <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1] =&gt; 21 <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [2] =&gt; 22 <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [a] =&gt; 2a <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [c] =&gt; 2c <br />
//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [b] =&gt; 1b )<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68247""></a>
  <div class="note">
   <strong class="user">sfletcher at abcoa dot com</strong>
   <a href="#68247" class="date">19-Jul-2006 06:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that array_merge() didn't work in my case as it should have because I still get duplicate values.&nbsp; Again, I noticed that the values can be overwritten if the array's key are the same as stated in the manual.<br />
<br />
So, I came up with the alternative and it work like a charm.<br />
<br />
--snip--<br />
&nbsp;&nbsp; function array_merge_alternative1() {<br />
&nbsp;&nbsp; &nbsp;&nbsp; //echo func_num_args();&nbsp; /* Get the total # of arguements (parameter) that was passed to this function... */<br />
&nbsp;&nbsp; &nbsp;&nbsp; //print_r(func_get_arg());&nbsp; /* Get the value that was passed in via arguement/parameter #... in int, double, etc... (I think)... */<br />
&nbsp;&nbsp; &nbsp;&nbsp; //print_r(func_get_args());&nbsp; /* Get the value that was passed in via arguement/parameter #... in arrays (I think)... */<br />
<br />
&nbsp;&nbsp; &nbsp; $loop_count1 = func_num_args();<br />
&nbsp;&nbsp; &nbsp; $junk_array1 = func_get_args();<br />
&nbsp;&nbsp; &nbsp; $xyz = 0;<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; for($x=0;$x&lt;$loop_count1;$x++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $array_count1 = count($junk_array1[$x]);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($array_count1 != 0) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for($y=0;$y&lt;$array_count1;$y++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $new_array1[$xyz] = $junk_array1[$x][$y];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $xyz++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; $new_array2 = array_unique($new_array1);&nbsp; /* Work a lot like DISTINCT() in SQL... */<br />
<br />
&nbsp;&nbsp; &nbsp; return $new_array2;<br />
&nbsp;&nbsp; }<br />
--snip--<br />
<br />
Cheer...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68096""></a>
  <div class="note">
   <strong class="user">chris at luethy dot net</strong>
   <a href="#68096" class="date">13-Jul-2006 02:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Do not use this to set the $_SESSION variable.<br />
<br />
$_SESSION = array_merge( $_SESSION, $another_array );<br />
<br />
will break your $_SESSION until the end of the execution of that page.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60774""></a>
  <div class="note">
   <strong class="user">j_oaquimsilva at yahoo dot com dot br</strong>
   <a href="#60774" class="date">16-Jan-2006 10:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I forgot to comment. This function join two arrays adding first the elements equals in the two arrays, then the values of the first array and at the end the values of the second array. <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_merge_sim </span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$arr2</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$adid_arrayS </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$arr1 </span><span class="keyword">as </span><span class="default">$x</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr1</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$nr2</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; foreach (</span><span class="default">$arr2 </span><span class="keyword">as </span><span class="default">$z</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$x</span><span class="keyword">==</span><span class="default">$z</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$adid_arrayS</span><span class="keyword">,</span><span class="default">$z</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$nr2</span><span class="keyword">==(</span><span class="default">$j</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)) </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arr2</span><span class="keyword">, </span><span class="default">$j</span><span class="keyword">,-(</span><span class="default">$nr2</span><span class="keyword">-</span><span class="default">$j</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$nr1</span><span class="keyword">==(</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)) </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else </span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$arr1</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">,-(</span><span class="default">$nr1</span><span class="keyword">-</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$i</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$adid_arrayS</span><span class="keyword">,</span><span class="default">$arr1</span><span class="keyword">,</span><span class="default">$arr2</span><span class="keyword">);<br />
<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60362""></a>
  <div class="note">
   <strong class="user">seva-php at zend dot com</strong>
   <a href="#60362" class="date">04-Jan-2006 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since my comment from 12-Jul-2004 02:42 with &lt;? function array_merge_php4() ?&gt; was deleted and the complex one added by Barpfotenbaer (09-Jul-2005 06:33), - here is the simpler and faster solution:<br />
<br />
&lt;?<br />
/* works only with PHP 5 */<br />
function array_merge_php4($array1, $array2) {<br />
&nbsp;&nbsp;&nbsp; foreach ($args = func_get_args() as &amp;$arg)&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $arg = (array)$arg;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return call_user_func_array('array_merge',$args);<br />
}<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="60210""></a>
  <div class="note">
   <strong class="user">hs at nospam dot magnum-plus dot com</strong>
   <a href="#60210" class="date">29-Dec-2005 11:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The same result as produced by snookiex_at_gmail_dot_com's function<br />
can be achieved with the 'one-liner'<br />
<span class="default">&lt;?php<br />
$array1</span><span class="keyword">=array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$array2</span><span class="keyword">=array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">);<br />
<br />
</span><span class="default">$matrix </span><span class="keyword">= </span><span class="default">array_map</span><span class="keyword">(</span><span class="default">null</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>(see documentation of array_map). <br />
The difference here is, that the shorter array gets filled with empty values.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58829""></a>
  <div class="note">
   <strong class="user">ttsgosadow at gmail dot com</strong>
   <a href="#58829" class="date">17-Nov-2005 11:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was in need of a version of array_merge to add associative arrays without losing duplicate keys. I use the following function:<br />
<br />
[code]<br />
function array_add( $array1, $array2 )<br />
{<br />
foreach( $array2 AS $key =&gt; $value )<br />
{<br />
&nbsp;&nbsp;&nbsp; while( array_key_exists( $key, $array1 ) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $key .= "_";<br />
&nbsp;&nbsp;&nbsp; $array1[ $key ] = $value;<br />
}<br />
<br />
return $array1;<br />
}<br />
[/code]<br />
<br />
In my case the $key is a date I want to sort on, and if I happen to have duplicate dates (users add things on the same timestamp) I lose that entry with array_merge. I can sort on the key without getting big missorts because of the appended '_'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58381""></a>
  <div class="note">
   <strong class="user">kaigillmann at gmxpro dot net</strong>
   <a href="#58381" class="date">02-Nov-2005 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to merge two arrays without having multiple entries, try this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_fusion</span><span class="keyword">(</span><span class="default">$ArrayOne</span><span class="keyword">, </span><span class="default">$ArrayTwo</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$ArrayOne</span><span class="keyword">, </span><span class="default">$ArrayTwo</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56366""></a>
  <div class="note">
   <strong class="user">tbs2tbs at hotmail dot com</strong>
   <a href="#56366" class="date">31-Aug-2005 08:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wanted to share this, it's an small simple script to add things into an array using an loop/routine.<br />
I use an more developed version to sort msessage's on a forum.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Make vars ready<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$alltopic </span><span class="keyword">= array();<br />
<br />
</span><span class="comment">// Start an routine<br />
//&nbsp; &nbsp; 4 is just an example you can use an varible containing <br />
//&nbsp; &nbsp; the number of rows in an databse for example<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">4</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$topic </span><span class="keyword">= array(</span><span class="default">$a </span><span class="keyword">=&gt; </span><span class="string">"</span><span class="default">$a</span><span class="string">"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$alltopic </span><span class="keyword">= </span><span class="default">array_merge </span><span class="keyword">(</span><span class="default">$alltopic</span><span class="keyword">, </span><span class="default">$topic</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; };<br />
<br />
</span><span class="comment">// Put it on screen:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$alltopic</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
outputs this :<br />
<br />
Array ( [0] =&gt; 0 [1] =&gt; 1 [2] =&gt; 2 [3] =&gt; 3 )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54946""></a>
  <div class="note">
   <strong class="user">php at moechofe dot com</strong>
   <a href="#54946" class="date">20-Jul-2005 01:58</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp; * array_deep_merge<br />
&nbsp; *<br />
&nbsp; * array array_deep_merge ( array array1 [, array array2 [, array ...]] )<br />
&nbsp; *<br />
&nbsp; * Like array_merge<br />
&nbsp; *<br />
&nbsp; *&nbsp;&nbsp; array_deep_merge() merges the elements of one or more arrays together so<br />
&nbsp; * that the values of one are appended to the end of the previous one. It<br />
&nbsp; * returns the resulting array.<br />
&nbsp; *&nbsp;&nbsp; If the input arrays have the same string keys, then the later value for<br />
&nbsp; * that key will overwrite the previous one. If, however, the arrays contain<br />
&nbsp; * numeric keys, the later value will not overwrite the original value, but<br />
&nbsp; * will be appended. <br />
&nbsp; *&nbsp;&nbsp; If only one array is given and the array is numerically indexed, the keys<br />
&nbsp; * get reindexed in a continuous way.<br />
&nbsp; *<br />
&nbsp; * Different from array_merge<br />
&nbsp; *&nbsp;&nbsp; If string keys have arrays for values, these arrays will merge recursively.<br />
&nbsp; */<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_deep_merge</span><span class="keyword">()<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; switch( </span><span class="default">func_num_args</span><span class="keyword">() )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; case </span><span class="default">0 </span><span class="keyword">: return </span><span class="default">false</span><span class="keyword">; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; case </span><span class="default">1 </span><span class="keyword">: return </span><span class="default">func_get_arg</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">); break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; case </span><span class="default">2 </span><span class="keyword">:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]),</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]))) as </span><span class="default">$key </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) and </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_deep_merge</span><span class="keyword">( </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( </span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( </span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( </span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( </span><span class="default">is_integer</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) and isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( ! isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( ! isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$args</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else return </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">]; break;<br />
&nbsp;&nbsp; &nbsp;&nbsp; default :<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] = </span><span class="default">array_deep_merge</span><span class="keyword">( </span><span class="default">$args</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">], </span><span class="default">$args</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">( </span><span class="default">$args </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">( </span><span class="string">'array_deep_merge'</span><span class="keyword">, </span><span class="default">$args </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp; * test<br />
&nbsp; */<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; array( </span><span class="default">0 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer' </span><span class="keyword">=&gt; </span><span class="default">123</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer456_merge_with_integer444' </span><span class="keyword">=&gt; </span><span class="default">456</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer789_merge_with_array777' </span><span class="keyword">=&gt; </span><span class="default">789</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'array' </span><span class="keyword">=&gt; array( </span><span class="string">"string1"</span><span class="keyword">, </span><span class="string">"string2" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'array45_merge_with_array6789' </span><span class="keyword">=&gt; array( </span><span class="string">"string4"</span><span class="keyword">, </span><span class="string">"string5" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'arraykeyabc_merge_with_arraykeycd' </span><span class="keyword">=&gt; array( </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="string">"a"</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="string">"b"</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">"c" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'array0_merge_with_integer3' </span><span class="keyword">=&gt; array( </span><span class="default">0 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'multiple_merge' </span><span class="keyword">=&gt; array( </span><span class="default">1 </span><span class="keyword">),<br />
&nbsp; );<br />
<br />
&nbsp; </span><span class="default">$b </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer456_merge_with_integer444' </span><span class="keyword">=&gt; </span><span class="default">444</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'integer789_merge_with_array777' </span><span class="keyword">=&gt; array( </span><span class="default">7</span><span class="keyword">,</span><span class="default">7</span><span class="keyword">,</span><span class="default">7 </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'array45_merge_with_array6789' </span><span class="keyword">=&gt; array( </span><span class="string">"string6"</span><span class="keyword">, </span><span class="string">"string7"</span><span class="keyword">, </span><span class="string">"string8"</span><span class="keyword">, </span><span class="string">"string9" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'arraykeyabc_merge_with_arraykeycd' </span><span class="keyword">=&gt; array( </span><span class="string">'c' </span><span class="keyword">=&gt; </span><span class="string">"ccc"</span><span class="keyword">, </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="string">"ddd" </span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'array0_merge_with_integer3' </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'multiple_merge' </span><span class="keyword">=&gt; array( </span><span class="default">2 </span><span class="keyword">),<br />
&nbsp; );<br />
<br />
&nbsp; </span><span class="default">$c </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'multiple_merge' </span><span class="keyword">=&gt; array( </span><span class="default">3 </span><span class="keyword">),<br />
&nbsp; );<br />
&nbsp; <br />
&nbsp; echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">.</span><span class="default">htmlentities</span><span class="keyword">(</span><span class="default">print_r</span><span class="keyword">( </span><span class="default">array_deep_merge</span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">, </span><span class="default">$c </span><span class="keyword">), </span><span class="default">true</span><span class="keyword">)).</span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54762""></a>
  <div class="note">
   <strong class="user">ntpt at centrum dot cz</strong>
   <a href="#54762" class="date">14-Jul-2005 03:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Old behavior of array_merge can be restored by simple&nbsp; variable type casting like this<br />
<br />
array_merge((array)$foo,(array)$bar);<br />
<br />
works good in php 5.1.0 Beta 1, not tested in other versions <br />
<br />
seems that empty or not set variables are casted to empty arrays</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54510""></a>
  <div class="note">
   <strong class="user">arduenn at gmail dot com</strong>
   <a href="#54510" class="date">06-Jul-2005 07:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As "rcarvalhoREMOVECAPS at clix dot pt" suggested above, <br />
<br />
&nbsp;&nbsp; $a = array_merge($a, null);<br />
<br />
does renumber the $a array. However, this only works with PHP4, not with PHP5. PHP5 users might try the following:<br />
<br />
&nbsp;&nbsp; $b = implode(" ", $a);<br />
&nbsp;&nbsp; $a = explode(" ", $b);<br />
<br />
Hope this helps someone too ;-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52048""></a>
  <div class="note">
   <strong class="user">rafmavCHEZlibre_in_france</strong>
   <a href="#52048" class="date">20-Apr-2005 01:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are a few functions to make a diff between two arrays (or 2 strings, see the example) and merge it back after<br />
&lt;?<br />
function array_diff_both($new,$old)<br />
{<br />
&nbsp;&nbsp;&nbsp; $del=array_diff_assoc($old,$new);<br />
&nbsp;&nbsp;&nbsp; $add=array_diff_assoc($new,$old);<br />
&nbsp;&nbsp;&nbsp; return $diff=array("del"=&gt;$del, "add"=&gt;$add);<br />
}<br />
<br />
function array_diff_all($arr_new,$arr_old)<br />
{<br />
&nbsp;&nbsp;&nbsp; $arr_equ=array_intersect_assoc($arr_new,$arr_old);<br />
&nbsp;&nbsp;&nbsp; $arr_del=array_diff_assoc($arr_old,$arr_new);<br />
&nbsp;&nbsp;&nbsp; $arr_add=array_diff_assoc($arr_new,$arr_old);<br />
&nbsp;&nbsp;&nbsp; return $diff=array("equ"=&gt;$arr_equ, "del"=&gt;$arr_del, "add"=&gt;$arr_add);<br />
}<br />
<br />
function array_merge_diff($arr,$diff) {<br />
&nbsp;&nbsp;&nbsp; $arr=array_merge_replace($arr,$diff["del"]);<br />
&nbsp;&nbsp;&nbsp; $arr=array_merge_replace($arr,$diff["add"]);<br />
&nbsp;&nbsp;&nbsp; return $arr;<br />
}<br />
function array_merge_diff_reverse($arr,$diff) {<br />
&nbsp;&nbsp;&nbsp; $arr=array_merge_replace($arr,$diff["add"]);<br />
&nbsp;&nbsp;&nbsp; $arr=array_merge_replace($arr,$diff["del"]);<br />
&nbsp;&nbsp;&nbsp; return $arr;<br />
}<br />
?&gt;<br />
Here is an example:<br />
&lt;?<br />
//calculationg<br />
$new="hello!"; // new string<br />
<br />
$old="hrllo!"; // old string with a typo fault <br />
<br />
// cast string in array the goodway<br />
// make a cast (array) to a string does not work:<br />
// the entire string is thus considered as one element<br />
// of the array !!<br />
$a_new=str_split($new);<br />
$a_old=str_split($old); // cast string in array<br />
<br />
$diff=array_diff_both($a_new,$a_old); // the entire diff<br />
<br />
$test=array_merge_diff($a_old,$diff);<br />
<br />
$test_reverse=array_merge_diff_reverse($a_new,$diff);<br />
<br />
//for output the sample<br />
print "new= $new&lt;br/&gt;old= $old&lt;br/&gt;\$a_new= ";<br />
print_r($a_new);<br />
<br />
print "&lt;br/&gt;\$a_old= ";<br />
print_r($a_old);<br />
<br />
print "&lt;br/&gt;\$diff=\$a_new-\$a_old";<br />
print "&lt;br/&gt;\$diff= ";<br />
print_r($diff);<br />
<br />
print "&lt;br/&gt;\$test=\$a_old+\$diff";<br />
print "&lt;br/&gt;\$test= ";<br />
print_r($test);<br />
print("&lt;br/&gt;".implode($test));<br />
<br />
print "&lt;br/&gt;\$test_reverse=\$a_new+\$diff";<br />
print "&lt;br/&gt;\$test_reverse= ";<br />
print_r($test_reverse);<br />
print("&lt;br/&gt;".implode($test_reverse));<br />
?&gt;<br />
En sortie de l'exemple, rsultats:<br />
<br />
new= hello!<br />
old= hrllo!<br />
$a_new= Array ( [0] =&gt; h [1] =&gt; e [2] =&gt; l [3] =&gt; l [4] =&gt; o [5] =&gt; ! ) <br />
$a_old= Array ( [0] =&gt; h [1] =&gt; r [2] =&gt; l [3] =&gt; l [4] =&gt; o [5] =&gt; ! ) <br />
$diff=$a_new-$a_old<br />
$diff= Array ( [del] =&gt; Array ( [1] =&gt; r ) [add] =&gt; Array ( [1] =&gt; e ) ) <br />
$test=$a_old+$diff<br />
$test= Array ( [0] =&gt; h [1] =&gt; e [2] =&gt; l [3] =&gt; l [4] =&gt; o [5] =&gt; ! ) <br />
hello!<br />
$test_reverse=$a_new+$diff<br />
$test_reverse= Array ( [0] =&gt; h [1] =&gt; r [2] =&gt; l [3] =&gt; l [4] =&gt; o [5] =&gt; ! ) <br />
hrllo!<br />
<br />
autre exemple, autre rsultat:<br />
new= see you!<br />
old= sea ya!<br />
$a_new= Array ( [0] =&gt; s [1] =&gt; e [2] =&gt; e [3] =&gt; [4] =&gt; y [5] =&gt; o [6] =&gt; u [7] =&gt; ! ) <br />
$a_old= Array ( [0] =&gt; s [1] =&gt; e [2] =&gt; a [3] =&gt; [4] =&gt; y [5] =&gt; a [6] =&gt; ! ) <br />
$diff=$a_new-$a_old<br />
$diff= Array ( [del] =&gt; Array ( [2] =&gt; a [5] =&gt; a [6] =&gt; ! ) [add] =&gt; Array ( [2] =&gt; e [5] =&gt; o [6] =&gt; u [7] =&gt; ! ) ) <br />
$test=$a_old+$diff<br />
$test= Array ( [0] =&gt; s [1] =&gt; e [2] =&gt; e [3] =&gt; [4] =&gt; y [5] =&gt; o [6] =&gt; u [7] =&gt; ! ) <br />
see you!<br />
$test_reverse=$a_new+$diff<br />
$test_reverse= Array ( [0] =&gt; s [1] =&gt; e [2] =&gt; a [3] =&gt; [4] =&gt; y [5] =&gt; a [6] =&gt; ! [7] =&gt; ! ) <br />
sea ya!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51658""></a>
  <div class="note">
   <strong class="user">jeff_1089 at yahoo dot com</strong>
   <a href="#51658" class="date">06-Apr-2005 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that casting the array doesn't always work.&nbsp; For classes, it looks like the class information is lost.&nbsp; The print_r's below have different behavior.&nbsp; I would suggest creating an array, rather than casting in most situations. (ie.&nbsp; do it like $array2).<br />
<br />
class myclass {<br />
&nbsp;&nbsp;&nbsp; private $name;<br />
&nbsp;&nbsp;&nbsp; private $value;<br />
&nbsp;&nbsp;&nbsp; function myclass($n, $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;name=$n;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $this-&gt;value=$v;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
}<br />
<br />
$itema = new myclass("hair", "orange");<br />
$itemb = new myclass("eyes", "green");<br />
$itemc = new myclass("elbow", "dirty");<br />
$items = array($itemb, $itemc);<br />
print "&lt;BR&gt;";<br />
$array1 = array_merge((array)$itema, $items);<br />
$array2 = array_merge(array($itema), $items);<br />
print "&lt;BR&gt;";<br />
print "&lt;BR&gt;";<br />
print_r($array1);<br />
print "&lt;BR&gt;";<br />
print "&lt;BR&gt;";<br />
print_r($array2);<br />
<br />
Array ( [] =&gt; orange [0] =&gt; myclass Object ( [name:private] =&gt; eyes [value:private] =&gt; green ) [1] =&gt; myclass Object ( [name:private] =&gt; elbow [value:private] =&gt; dirty ) ) <br />
<br />
Array ( [0] =&gt; myclass Object ( [name:private] =&gt; hair [value:private] =&gt; orange ) [1] =&gt; myclass Object ( [name:private] =&gt; eyes [value:private] =&gt; green ) [2] =&gt; myclass Object ( [name:private] =&gt; elbow [value:private] =&gt; dirty ) )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51110""></a>
  <div class="note">
   <strong class="user">Jimomighty</strong>
   <a href="#51110" class="date">20-Mar-2005 07:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
...<br />
<br />
function preserved_merge_array( $newArray, $otherArray ) {<br />
&nbsp;&nbsp;&nbsp; foreach( $otherArray as $key =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( !is_array($newArray[$key]) ) $newArray[$key] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ( is_array($value) ) $newArray[$key] = preserved_merge_array( $newArray[$key], $value );<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else $newArray[$key] = $value;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $newArray;<br />
}<br />
<br />
...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49221""></a>
  <div class="note">
   <strong class="user">Alec Solway</strong>
   <a href="#49221" class="date">20-Jan-2005 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that if you put a number as a key in an array, it is eventually converted to an int even if you cast it to a string or put it in quotes.<br />
<br />
That is:<br />
<br />
$arr["0"] = "Test";<br />
var_dump( key($arr) );<br />
<br />
will output int(0).<br />
<br />
This is important to note when merging because array_merge will append values with a clashing int-based index instead of replacing them. This kept me tied up for hours.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48902""></a>
  <div class="note">
   <strong class="user">nospam at veganismus dot ch</strong>
   <a href="#48902" class="date">11-Jan-2005 03:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Someone posted a function with the note:<br />
"if u need to overlay a array that holds defaultvalues with another that keeps the relevant data"<br />
<br />
&lt;?<br />
//about twice as fast but the result is the same.<br />
//note: the sorting will be messed up!<br />
function array_overlay($skel, $arr) {<br />
&nbsp;&nbsp;&nbsp; return $arr+$skel;<br />
}<br />
<br />
//example:<br />
$a = array("zero","one","two");<br />
$a = array_overlay($a,array(1=&gt;"alpha",2=&gt;NULL)); <br />
var_dump($a);<br />
/* NULL is ignored so the output is:<br />
array(3) {<br />
&nbsp; [1]=&gt;<br />
&nbsp; string(5) "alpha"<br />
&nbsp; [0]=&gt;<br />
&nbsp; string(4) "zero"<br />
&nbsp; [2]=&gt;<br />
&nbsp; string(3) "two"<br />
}<br />
*/<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48426""></a>
  <div class="note">
   <strong class="user">Frederick.Lemasson{AT}kik-it.com</strong>
   <a href="#48426" class="date">23-Dec-2004 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if you generate form select from an array, you probably want to keep your array keys and order intact,<br />
if so you can use ArrayMergeKeepKeys(), works just like array_merge :<br />
<br />
array ArrayMergeKeepKeys ( array array1 [, array array2 [, array ...]])<br />
<br />
but keeps the keys even if of numeric kind. <br />
enjoy<br />
<br />
&lt;?<br />
<br />
$Default[0]='Select Something please';<br />
<br />
$Data[147]='potato';<br />
$Data[258]='banana';<br />
$Data[54]='tomato';<br />
<br />
$A=array_merge($Default,$Data);<br />
<br />
$B=ArrayMergeKeepKeys($Default,$Data);<br />
<br />
echo '&lt;pre&gt;';<br />
print_r($A);<br />
print_r($B);<br />
echo '&lt;/pre&gt;';<br />
<br />
Function ArrayMergeKeepKeys() {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $arg_list = func_get_args();<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach((array)$arg_list as $arg){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach((array)$arg as $K =&gt; $V){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $Zoo[$K]=$V;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $Zoo;<br />
}<br />
<br />
//will output :<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Select Something please<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; potato<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; banana<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; tomato<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Select Something please<br />
&nbsp;&nbsp;&nbsp; [147] =&gt; potato<br />
&nbsp;&nbsp;&nbsp; [258] =&gt; banana<br />
&nbsp;&nbsp;&nbsp; [54] =&gt; tomato<br />
)<br />
<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47597""></a>
  <div class="note">
   <strong class="user">Jae</strong>
   <a href="#47597" class="date">22-Nov-2004 04:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is explained above but may not be exactly clear.&nbsp; If you have two arrays such as:<br />
<br />
$Array1 {<br />
<br />
[0] =&gt; "dog"<br />
<br />
}<br />
<br />
$Array2 {<br />
<br />
[0] =&gt; "cat",<br />
[1] =&gt; "bird",<br />
[2] =&gt; null,<br />
...<br />
[n-1] =&gt; null,<br />
[n] =&gt; "gator"<br />
}<br />
<br />
and you don't want to lose the null values in the final array then do NOT use array_merge.&nbsp; Instead simply use the + operator.<br />
<br />
array_merge($Array1,$Array2) gives:<br />
[0] =&gt; "dog",<br />
[1] =&gt; "cat",<br />
[2] =&gt; "bird",<br />
[3] =&gt; "gator"<br />
<br />
$Array1 + $Array2 gives:<br />
[0] =&gt; "dog",<br />
[1] =&gt; "cat",<br />
[2] =&gt; "bird",<br />
[3] =&gt; null,<br />
...<br />
[n-1] =&gt; null,<br />
[3] =&gt; "gator"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45984""></a>
  <div class="note">
   <strong class="user">nospam at veganismus dot ch</strong>
   <a href="#45984" class="date">25-Sep-2004 05:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to add some values (array) to an array on each loop.<br />
I used merge because it seemed to be the right way. But array_splice() ist much faster:<br />
<br />
&lt;?<br />
$merge = array();<br />
$splice = array();<br />
<br />
function makearray() { //to do on each loop<br />
&nbsp;//return two values:<br />
&nbsp;return array('foo','bar');<br />
}<br />
<br />
for($i=0;$i&lt;1000;$i++) $merge = array_merge($merge,makearray());<br />
echo count($merge); //returns 2000 after about 2 sec (PHP5)<br />
<br />
for($i=0;$i&lt;1000;$i++) array_splice($splice, 0,0,makearray());<br />
echo count($splice); //returns 2000 after about 0.8 sec (PHP5)<br />
?&gt;<br />
<br />
Note: The sorting will be diffrent but you can use<br />
array_splice($splice, count($splice),0,makearray());<br />
which is still faster (1.4 sec)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45059""></a>
  <div class="note">
   <strong class="user">bcraigie at bigfoot dot com</strong>
   <a href="#45059" class="date">24-Aug-2004 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It would seem that array_merge doesn't do anything when one array is empty (unset):<br />
<br />
<span class="default">&lt;?php </span><span class="comment">//$a is unset<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="string">"1" </span><span class="keyword">=&gt; </span><span class="string">"x"</span><span class="keyword">);<br />
<br />
</span><span class="default">$a </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">});<br />
<br />
</span><span class="comment">//$a is still unset.<br />
</span><span class="default">?&gt;<br />
</span><br />
to fix this omit $a if it is unset:-<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if(!IsSet(</span><span class="default">$a</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">);<br />
} else {<br />
&nbsp; </span><span class="default">$a </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
I don't know if there's a better way.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43187""></a>
  <div class="note">
   <strong class="user">niv at NOSPAM iaglans dot DE</strong>
   <a href="#43187" class="date">12-Jun-2004 07:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's Note: If the keys are truly numeric, array_merge will do the trick. But if they are strings, as the example below, you can use array_merge(array_values($array1), array_values($array2)); since it's more beautiful. -- victor@php.net]<br />
<br />
i recognized there is no function with that you can add two number-Arrays:<br />
<br />
Example:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// you have two arrays:<br />
<br />
</span><span class="default">array1 </span><span class="keyword">= array ([</span><span class="string">'0'</span><span class="keyword">] =&gt;</span><span class="string">"blahblupp"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="string">'1'</span><span class="keyword">] =&gt; </span><span class="string">"bluppblah" </span><span class="keyword">);<br />
<br />
</span><span class="default">array2 </span><span class="keyword">= array ([</span><span class="string">'0'</span><span class="keyword">] =&gt;</span><span class="string">"tirili"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="string">'1'</span><span class="keyword">] =&gt; </span><span class="string">"tralala" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// and want following as a result:<br />
<br />
</span><span class="default">result </span><span class="keyword">= array ([</span><span class="string">'0'</span><span class="keyword">] =&gt;</span><span class="string">"blahblupp"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="string">'1'</span><span class="keyword">] =&gt; </span><span class="string">"bluppblah"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="string">'2'</span><span class="keyword">] =&gt;</span><span class="string">"tirili"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [</span><span class="string">'3'</span><span class="keyword">] =&gt; </span><span class="string">"tralala" </span><span class="keyword">);<br />
<br />
</span><span class="comment">// following function does the addition:<br />
<br />
</span><span class="keyword">function </span><span class="default">array_add</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$array1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$h </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$h</span><span class="keyword">] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$h</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
just added because I didn't find a ready-to-use script here.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40205""></a>
  <div class="note">
   <strong class="user">frankb at fbis dot net</strong>
   <a href="#40205" class="date">25-Feb-2004 01:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to merge arrays and preserve the key i found the following working with php 4.3.1:<br />
<br />
<span class="default">&lt;?php<br />
$array1 </span><span class="keyword">= array(</span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="string">"Test1"</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; </span><span class="string">"Test2"</span><span class="keyword">);<br />
</span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="default">3 </span><span class="keyword">=&gt; </span><span class="string">"Test3"</span><span class="keyword">, </span><span class="default">4 </span><span class="keyword">=&gt; </span><span class="string">"Test4"</span><span class="keyword">);<br />
<br />
</span><span class="default">$array1 </span><span class="keyword">+= </span><span class="default">$array2</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
dont know if this is working with other php versions but it is a simple and fast way to solve that problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37248""></a>
  <div class="note">
   <strong class="user">KOmaSHOOTER at gmx dot de</strong>
   <a href="#37248" class="date">07-Nov-2003 07:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is something for splitting a sorted array into group array&nbsp; ( sorting the group arrays ) and then merging them together<br />
Note: merge is&nbsp; like concat in Flash ActionScript :)<br />
In this example i have 3 different&nbsp; groups in one array<br />
<br />
* First the mainArray is sorted for the group entrys<br />
* building from part arrays<br />
* building&nbsp; copy arrays from&nbsp; part arrays ( for making the array beginning with&nbsp; [0] !! )<br />
* merging all part arrays together<br />
<br />
0. sorting the main array<br />
1. apportionment from the main array<br />
when the group is changing , a new array is build (part<br />
array ) ! attention at the second&nbsp; part array !! Array values<br />
are are not beginning with [0]!!<br />
2. making the copy from the part array .<br />
array values are pushed in the new array<br />
3. echo for every array entry<br />
4. overwriting the old array with the new copy<br />
5. part arrays are sorted by function (arrays had been naughted by function array_copy ( Array is beginning with [0] ! )<br />
6. merging the part arrays<br />
<br />
Here is the same that i posted before but a bit better solved<br />
array_push (${"activ_array".$j}, $activ_array[$i]); makes the part arrays starting with [0] :)<br />
<br />
<span class="default">&lt;?php<br />
$activ_array</span><span class="keyword">=array(<br />
array(</span><span class="string">"apfel_01"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_07"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"green"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_08"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"green"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_02"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_03"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_04"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_09"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red_+_green"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_10"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"red_+_green"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_05"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"green"</span><span class="keyword">),<br />
array(</span><span class="string">"apfel_06"</span><span class="keyword">,</span><span class="string">"germany"</span><span class="keyword">,</span><span class="string">"xx"</span><span class="keyword">,</span><span class="string">"green"</span><span class="keyword">)<br />
);<br />
function </span><span class="default">array_sort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key </span><span class="keyword">, </span><span class="default">$target</span><span class="keyword">){<br />
for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;</span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;if(</span><span class="default">$target </span><span class="keyword">== </span><span class="string">'name'</span><span class="keyword">){ <br />
&nbsp;&nbsp;&nbsp; if(! empty(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">"nameletter"</span><span class="keyword">])){<br />
&nbsp;&nbsp; &nbsp; </span><span class="comment">//echo $myarray[$i]["nameletter"] ;<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">],(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">"nameletter"</span><span class="keyword">]-</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">] = </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">],</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; </span><span class="default">$sort_values</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="string">"name"</span><span class="keyword">];<br />
&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; </span><span class="default">$sort_values</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;}<br />
} <br />
&nbsp; </span><span class="default">asort </span><span class="keyword">(</span><span class="default">$sort_values</span><span class="keyword">);<br />
&nbsp; </span><span class="default">reset </span><span class="keyword">(</span><span class="default">$sort_values</span><span class="keyword">);<br />
&nbsp; while (list (</span><span class="default">$arr_keys</span><span class="keyword">, </span><span class="default">$arr_values</span><span class="keyword">) = </span><span class="default">each </span><span class="keyword">(</span><span class="default">$sort_values</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$sorted_arr</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$arr_keys</span><span class="keyword">];<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$sorted_arr</span><span class="keyword">;<br />
}<br />
</span><span class="default">$activ_array </span><span class="keyword">= </span><span class="default">array_sort</span><span class="keyword">(</span><span class="default">$activ_array</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">,</span><span class="string">'imagetype'</span><span class="keyword">);<br />
</span><span class="default">$j</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
</span><span class="comment">// first part array<br />
</span><span class="keyword">${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="string">"</span><span class="default">$j</span><span class="string">"</span><span class="keyword">} = array();<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$activ_array</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;if(</span><span class="default">$activ_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] !=</span><span class="default">$activ_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">][</span><span class="default">3</span><span class="keyword">] &amp;&amp; </span><span class="default">$i </span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$j</span><span class="keyword">++;<br />
&nbsp;&nbsp; ${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="default">$j</span><span class="keyword">} = array();<br />
&nbsp;}<br />
</span><span class="default">array_push </span><span class="keyword">(${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="default">$j</span><span class="keyword">}, </span><span class="default">$activ_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
}<br />
</span><span class="comment">// part array sorting<br />
</span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$j</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">} = </span><span class="default">array_sort</span><span class="keyword">(${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">},</span><span class="default">0</span><span class="keyword">,</span><span class="string">'name'</span><span class="keyword">);<br />
}<br />
</span><span class="default">$activ_array </span><span class="keyword">= array();<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;=</span><span class="default">$j</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++){<br />
&nbsp;</span><span class="default">$activ_array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$activ_array</span><span class="keyword">,${</span><span class="string">"activ_array"</span><span class="keyword">.</span><span class="default">$i</span><span class="keyword">});<br />
}<br />
for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$activ_array</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++){<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$activ_array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
echo(</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37109""></a>
  <div class="note">
   <strong class="user">rcarvalhoREMOVECAPS at clix dot pt</strong>
   <a href="#37109" class="date">03-Nov-2003 09:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While searching for a function that would renumber the keys in a array, I found out that array_merge() does this if the second parameter is null:<br />
<br />
Starting with array $a like:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">5</span><span class="keyword">] =&gt; </span><span class="default">5<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">4</span><span class="keyword">] =&gt; </span><span class="default">4<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">9</span><span class="keyword">] =&gt; </span><span class="default">9<br />
</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
Then use array_merge() like this:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Now the $a array has bee renumbered, but maintaining the order:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="default">5<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="default">4<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">2</span><span class="keyword">] =&gt; </span><span class="default">2<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">[</span><span class="default">3</span><span class="keyword">] =&gt; </span><span class="default">9<br />
</span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps someone :-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="37056""></a>
  <div class="note">
   
   <a href="#37056" class="date">01-Nov-2003 07:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In all PHP 4 versions the above function deals gracefully with paramaters which are NOT arrays(). So if you pass a string or number it will be automagically converted to an one-element array as described in the manual section about Types and "implicit typecasting". So if you ever happen to put an empty/unset variable (NULL value) as parameter, array_merge() will still collapse the other arrays as intended. <br />
<br />
From PHP5beta2 on this behaviour changed, and PHP will correctly issue a E_WARNING message, whenever one of the paramters isn't an array. So if you ever happen to be uncertain about the contents of a variable passed as parameter to array_merge() you should use explicit typecasting:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= </span><span class="default">4</span><span class="keyword">;&nbsp; &nbsp; </span><span class="comment">#-- beware: this is no array!<br />
<br />
</span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(&nbsp; (array)</span><span class="default">$a</span><span class="keyword">, (array)</span><span class="default">$b</span><span class="keyword">,&nbsp; ... );<br />
</span><span class="default">?&gt;<br />
</span><br />
This way $result still would get == array(1, 2, 3, 4); where otherwise the parameters would get rejected with the warning message telling you so.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="36173""></a>
  <div class="note">
   <strong class="user">loner at psknet dot !NOSPAM!com</strong>
   <a href="#36173" class="date">30-Sep-2003 12:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I got tripped up for a few days when I tried to merge a (previously serialized) array into a object. If it doesn't make sense, think about it... To someone fairly new, it could... Anyway, here is what I did:<br />
(It's obviously not recursive, but easy to make that way)<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_object_merge</span><span class="keyword">(&amp;</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$object</span><span class="keyword">-&gt;{</span><span class="default">$key</span><span class="keyword">} = </span><span class="default">$value</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Simple problem, but concevibly easy to get stuck on.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="35519""></a>
  <div class="note">
   
   <a href="#35519" class="date">04-Sep-2003 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who are getting duplicate entries when using this function, there is a very easy solution:<br />
<br />
wrap array_unique() around array_merge()<br />
<br />
cheers,<br />
<br />
k.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34380""></a>
  <div class="note">
   <strong class="user">tobias_mik at hotmail dot com</strong>
   <a href="#34380" class="date">25-Jul-2003 02:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function merges any number of arrays and maintains the keys:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_kmerge </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;while (</span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">each</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">))<br />
&nbsp;{<br />
&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]) &gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp; </span><span class="default">$k</span><span class="keyword">[</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">]] = </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]);<br />
&nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">]] = </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]);<br />
&nbsp; }<br />
&nbsp;}<br />
&nbsp;while(</span><span class="default">$tmp </span><span class="keyword">= </span><span class="default">each</span><span class="keyword">(</span><span class="default">$k</span><span class="keyword">))<br />
&nbsp;{<br />
&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$start</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$start</span><span class="keyword">+</span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]); </span><span class="default">$i </span><span class="keyword">++)</span><span class="default">$r</span><span class="keyword">[</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">][</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">]] = </span><span class="default">$v</span><span class="keyword">[</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'key'</span><span class="keyword">]][</span><span class="default">$i</span><span class="keyword">-</span><span class="default">$start</span><span class="keyword">];<br />
&nbsp; </span><span class="default">$start </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$tmp</span><span class="keyword">[</span><span class="string">'value'</span><span class="keyword">]);<br />
&nbsp;}<br />
&nbsp;return </span><span class="default">$r</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-merge-recursive.html">array_merge_recursive</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-multisort.html">array_multisort</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
