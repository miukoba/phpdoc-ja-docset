<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>実行する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="reflectionmethod.invoke.html">ReflectionMethod::invoke</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="reflectionmethod.isabstract.html">ReflectionMethod::isAbstract</a></div>
 <div class="up"><a href="class.reflectionmethod.html">ReflectionMethod</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="reflectionmethod.invokeargs" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">ReflectionMethod::invokeArgs</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0)</p><p class="refpurpose"><span class="refname">ReflectionMethod::invokeArgs</span> &mdash; <span class="dc-title">実行する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-reflectionmethod.invokeargs-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <span class="methodname"><strong>ReflectionMethod::invokeArgs</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$args</code></span>
   )</div>

  <p class="para rdfs-comment">
   リフレクション対象のメソッドを実行し、その引数を配列として渡します。
  </p>

 </div>


 <div class="refsect1 parameters" id="refsect1-reflectionmethod.invokeargs-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">object</code></em></span>
     <dd>

      <p class="para">
       メソッドを実行するオブジェクト。静的メソッドを実行する場合は、このパラメータには
       <span class="type"><a href="language.types.null.html" class="type null">null</a></span> を渡すことができます。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">args</code></em></span>
     <dd>

      <p class="para">
       メソッドに渡すパラメータを配列で指定します。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-reflectionmethod.invokeargs-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   メソッドの結果を返します。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-reflectionmethod.invokeargs-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   メソッドが宣言されているクラスのインスタンス以外を <em><code class="parameter">object</code></em>
   パラメータで指定すると <a href="class.reflectionexception.html" class="classname">ReflectionException</a> が発生します。
  </p>
  <p class="para">
   メソッドの実行に失敗すると <a href="class.reflectionexception.html" class="classname">ReflectionException</a> が発生します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-reflectionmethod.invokeargs-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5207">
    <p><strong>例1  <span class="methodname"><strong>ReflectionMethod::invokeArgs()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">HelloWorld&nbsp;</span><span style="color: #007700">{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">sayHelloTo</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />}<br /><br /></span><span style="color: #0000BB">$reflectionMethod&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ReflectionMethod</span><span style="color: #007700">(</span><span style="color: #DD0000">'HelloWorld'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'sayHelloTo'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$reflectionMethod</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">invokeArgs</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">HelloWorld</span><span style="color: #007700">(),&nbsp;array(</span><span style="color: #DD0000">'Mike'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Hello Mike
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-reflectionmethod.invokeargs-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    関数の引数の中に参照渡しを要するものがある場合は、
渡す引数の中でも参照にしておく必要があります。
   </p>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-reflectionmethod.invokeargs-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="methodname"><a href="reflectionmethod.invoke.html" class="methodname" rel="rdfs-seeAlso">ReflectionMethod::invoke()</a> - 実行する</span></li>
    <li class="member"><a href="language.oop5.magic.html#object.invoke" class="link">__invoke()</a></li>
    <li class="member"> <span class="function"><a href="function.call-user-func-array.html" class="function" rel="rdfs-seeAlso">call_user_func_array()</a> - パラメータの配列を指定してコールバック関数をコールする</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="103098""></a>
  <div class="note">
   <strong class="user">cweiske at cweiske dot de</strong>
   <a href="#103098" class="date">25-Mar-2011 04:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Passing arguments by reference works:<br />
<span class="default">&lt;?php $rm</span><span class="keyword">-&gt;</span><span class="default">invokeArgs</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, array(&amp;</span><span class="default">$foo</span><span class="keyword">, </span><span class="default">$bar</span><span class="keyword">)); </span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102419""></a>
  <div class="note">
   <strong class="user">agent_harris at secure-mail dot biz</strong>
   <a href="#102419" class="date">13-Feb-2011 04:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a simple workaround for the reference passing problem:<br />
Since the reflection api has to handle all parameters in a generic way it has no chance to guess if you wish to pass data per value or reference.<br />
<br />
But it seems that you can also decide to pass a reference from where you call the function or method (not just only by the ampersand prefix in its declaration).<br />
<br />
So just do the following; which worked for me:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//...<br />
</span><span class="default">$method</span><span class="keyword">-&gt;</span><span class="default">invoke</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">, </span><span class="default">$inputValue</span><span class="keyword">, &amp;</span><span class="default">$outputValue</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Since this will only be necessary with arrays and primitive data types it should be acceptable in most cases to know in advance if you need to pass per reference. But it is probably although necessary to keep the ampersand always in the declaration (because of the at least two layers between the actual function and your invoke call).<br />
<br />
If this is the expected behavior it will maybe make sense to mention it in the documentation for invoke and invokeArgs.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100041""></a>
  <div class="note">
   <strong class="user">serg dot smertin at gmail dot com</strong>
   <a href="#100041" class="date">21-Sep-2010 03:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
We can do black magic, which is useful in templating block calls:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; $object</span><span class="keyword">-&gt;</span><span class="default">__named</span><span class="keyword">(</span><span class="string">'methodNameHere'</span><span class="keyword">, array(</span><span class="string">'arg3' </span><span class="keyword">=&gt; </span><span class="string">'three'</span><span class="keyword">, </span><span class="string">'arg1' </span><span class="keyword">=&gt; </span><span class="string">'one'</span><span class="keyword">));<br />
<br />
&nbsp;&nbsp; &nbsp; ...<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; &nbsp; * Pass method arguments by name<br />
&nbsp;&nbsp; &nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; &nbsp; * @param string $method<br />
&nbsp;&nbsp; &nbsp; &nbsp; * @param array $args<br />
&nbsp;&nbsp; &nbsp; &nbsp; * @return mixed<br />
&nbsp;&nbsp; &nbsp; &nbsp; */<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">__named</span><span class="keyword">(</span><span class="default">$method</span><span class="keyword">, array </span><span class="default">$args </span><span class="keyword">= array())<br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$reflection </span><span class="keyword">= new </span><span class="default">ReflectionMethod</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$method</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pass </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">getParameters</span><span class="keyword">() as </span><span class="default">$param</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/* @var $param ReflectionParameter */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(isset(</span><span class="default">$args</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">()]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pass</span><span class="keyword">[] = </span><span class="default">$args</span><span class="keyword">[</span><span class="default">$param</span><span class="keyword">-&gt;</span><span class="default">getName</span><span class="keyword">()];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$pass</span><span class="keyword">[] = </span><span class="default">$param</span><span class="keyword">-&gt;</span><span class="default">getDefaultValue</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$reflection</span><span class="keyword">-&gt;</span><span class="default">invokeArgs</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">, </span><span class="default">$pass</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="reflectionmethod.invoke.html">ReflectionMethod::invoke</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="reflectionmethod.isabstract.html">ReflectionMethod::isAbstract</a></div>
 <div class="up"><a href="class.reflectionmethod.html">ReflectionMethod</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
