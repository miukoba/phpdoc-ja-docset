<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>その他の質問</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="faq.migration5.html">PHP 4 から PHP 5 への移行</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="appendices.html">付録</a></div>
 <div class="up"><a href="faq.html">FAQ</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="faq.misc" class="chapter">
  <h1>その他の質問</h1>

  

   <p class="para">
    ここでは他のカテゴリに分類することができないような質問を扱います。
   </p>

  <div class="qandaset"><ol class="qandaset_questions"><li><a href="#faq.misc.bz2">
     
      bz2 で圧縮された Windows マニュアルはどのように扱えばいいのですか？
     
    </a></li><li><a href="#faq.misc.arguments.references">
     
      asort の定義のように、引数の横に &amp; が
      ついているのはどういう意味ですか?
     
    </a></li><li><a href="#faq.misc.registerglobals">
     
      私はどのように register_globals を扱うべきですか?
     
    </a></li></ol></div>
   <dl class="qandaentry" id="faq.misc.bz2">
    <dt><strong>
     
      bz2 で圧縮された Windows マニュアルはどのように扱えばいいのですか？
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      bz2 ファイルを処理することができるアーカイバを持っていない場合、
      RedHat からコマンドラインツールを
      <a href="http://www.bzip.org/" class="link external" title="Link : http://www.bzip.org/">&raquo;&nbsp;ダウンロード</a>してください
      (詳細は下記の情報を参照)。
     </p>
     <p class="para">
      コマンドラインツールを使いたくない場合は、<a href="http://www.stuffit.com/" class="link external" title="Link : http://www.stuffit.com/">&raquo;&nbsp;Stuffit Expander</a>、
      <a href="http://www.ultimatezip.com/" class="link external" title="Link : http://www.ultimatezip.com/">&raquo;&nbsp;UltimateZip</a>、
      <a href="http://www.7-zip.org/" class="link external" title="Link : http://www.7-zip.org/">&raquo;&nbsp;7-Zip</a>、
      <a href="http://www.quickzip.org/" class="link external" title="Link : http://www.quickzip.org/">&raquo;&nbsp;Quick Zip</a>
      のようなフリーのツールを使用することも可能です。
      <a href="http://www.rarlab.com/" class="link external" title="Link : http://www.rarlab.com/">&raquo;&nbsp;WinRAR</a> または
      <a href="http://www.powerarchiver.com/" class="link external" title="Link : http://www.powerarchiver.com/">&raquo;&nbsp;Power Archiver</a>
      のようなツールを持っている場合、簡単に bz2 ファイルを解凍できます。
      Total Commander(以前は Windows Commander)を使用している場合は、
      bz2 用のプラグインを <a href="http://www.ghisler.com/" class="link external" title="Link : http://www.ghisler.com/">&raquo;&nbsp;Total Commander</a>
      のサイトから無料で手に入れることが出来ます。
     </p>
     <p class="para">
      Redhat から入手可能な bzip2 コマンドラインツール:
     </p>
     <p class="para">
      Windows 2000 SP2 のユーザーは バージョン 1.0.2 を、他の全ての
      Windows ユーザーはバージョン 1.00 を使用してください。
      ダウンロードしたら実行ファイルの名前を bzip2.exe へ変更してください。
      そしてそれをパスの通ったディレクトリ、例えば
      C:\Windows(ドライブ名は貴方のシステムにあわせて適宜変更してください)
      へコピーしてください。
     </p>
     <p class="para">
      注意: lang は使用する言語を意味し、
      pdf のように x は指定した形式を表します。
      php_manual_lang.x.bz2 を解凍するには以下のようにします。
      <ul class="itemizedlist">
       <li class="listitem">
        <span class="simpara">コマンドプロンプトウィンドウを開きます</span>
       </li>
       <li class="listitem">
        <span class="simpara">
         ダウンロードした php_manual_lang.x.bz2
         を保存したディレクトリに cd コマンドを使用して移動します。
        </span>
       </li>
       <li class="listitem">
        <span class="simpara">
         bzip2 -d php_manual_lang.x.bz2 を実行すると php_manual_lang.x
         というファイルが同じディレクトリに生成されます。
        </span>
       </li>
      </ul>
     </p>
     <p class="para">
      分割 HTML 版アーカイブ(php_manual_lang.tar.bz2)
      をダウンロードした場合でも手順は同じです。
      唯一の違いは、bzip2 コマンドの実行後に
      php_manual_lang.tar が生成されることです。
      tar 形式のファイルは <a href="http://www.winzip.com/" class="link external" title="Link : http://www.winzip.com/">&raquo;&nbsp;WinZip</a>
      といったアーカイバで扱うことができます。
      </p>
    </dd>
   </dl>

   <dl class="qandaentry" id="faq.misc.arguments.references">
    <dt><strong>
     
       <span class="function"><a href="function.asort.html" class="function">asort()</a></span> の定義のように、引数の横に &amp; が
      ついているのはどういう意味ですか?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      その引数が
      <a href="language.references.pass.html" class="link">参照渡し</a> であり、
      ドキュメントに書かれているとおり、関数内でそれが変更される可能性が
      あることを示します。変数のみをこの方法で渡すことができ、関数を
      コールする際に &amp; を渡す必要はありません（これは
      <a href="ini.core.html#ini.allow-call-time-pass-reference" class="link">廃止予定</a>
      の方法です）。
     </p>
    </dd>
   </dl>
   
   <dl class="qandaentry" id="faq.misc.registerglobals">
    <dt><strong>
     
      私はどのように <em>register_globals</em> を扱うべきですか?
     
    </strong></dt>
    <dd class="answer">
     <p class="para">
      <em>register_globals</em> とセキュリティの関連については、
      <a href="security.globals.html" class="link">Using register_globals</a>
      を参照ください。
     </p>
     <p class="para">
      <em>register_globals</em> が On であることに依存するよりも、
      <a href="language.variables.superglobals.html" class="link">スーパーグローバル</a>
      の使用を推奨します。
     </p>
     <p class="para">
      <em>register_globals</em> が Off になっている共有ホスト上で
      古いアプリケーションを動かす必要があり、アプリケーションがこの設定を
      On にすることを要求している場合、
      あるいはこの機能が On になっているホスティングサーバー上でセキュリティの
      リスクを抑えたい場合など、PHP でこれらの設定を逆転させる必要が出てきます。
      いちばんいい方法は PHP の設定を変更できないか確認してみることですが、
      もしそれができない場合には、このような方法を使用することができます。
     </p>
     <p class="para">
      <div class="example" id="example-5562">
       <p><strong>例1 Register Globals をエミュレートする</strong></p>
        <div class="example-contents"><p>
        これは register_globals On をエミュレートします。
        <a href="ini.core.html#ini.variables-order" class="link">variables_order</a>
        ディレクティブを変更している場合は、それに応じて
        <var class="varname"><var class="varname">$superglobals</var></var> を変更してください。
       </p></div>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;register_globals&nbsp;on&nbsp;をエミュレートする<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">'register_globals'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$superglobals&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_ENV</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">array_unshift</span><span style="color: #007700">(</span><span style="color: #0000BB">$superglobals</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$superglobals&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$superglobal</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">extract</span><span style="color: #007700">(</span><span style="color: #0000BB">$superglobal</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">EXTR_SKIP</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

       <div class="example-contents"><p>
        これは register_globals Off をエミュレートします。
        注意してほしいのは、このコードはスクリプト内のいちばん最初に
        コールされる必要があるということです。ただし、
        セッションを開始するために  <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span>
        を使用する場合は、その後にコールする必要があります。
       </p></div>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;register_globals&nbsp;off&nbsp;をエミュレートする<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">unregister_GLOBALS</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">ini_get</span><span style="color: #007700">(</span><span style="color: #DD0000">'register_globals'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;よりよいエラーメッセージのために、これを変更するとよいでしょう<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(isset(</span><span style="color: #0000BB">$_REQUEST</span><span style="color: #007700">[</span><span style="color: #DD0000">'GLOBALS'</span><span style="color: #007700">])&nbsp;||&nbsp;isset(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'GLOBALS'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(</span><span style="color: #DD0000">'GLOBALS&nbsp;overwrite&nbsp;attempt&nbsp;detected'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;unset&nbsp;すべきでない変数群<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$noUnset&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'GLOBALS'</span><span style="color: #007700">,&nbsp;&nbsp;</span><span style="color: #DD0000">'_GET'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_POST'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_COOKIE'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_REQUEST'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'_SERVER'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_ENV'</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'_FILES'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge</span><span style="color: #007700">(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_COOKIE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_ENV</span><span style="color: #007700">,&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">is_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">)&nbsp;?&nbsp;</span><span style="color: #0000BB">$_SESSION&nbsp;</span><span style="color: #007700">:&nbsp;array());<br />&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$input&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">in_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$k</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$noUnset</span><span style="color: #007700">)&nbsp;&amp;&amp;&nbsp;isset(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">unregister_GLOBALS</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </dd>
   </dl>
  
 </div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="101596""></a>
  <div class="note">
   <strong class="user">doerr at apkk dot de</strong>
   <a href="#101596" class="date">29-Dec-2010 02:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you only needed register_globals for get/post variables, the effictive solution for 5.3 is:<br />
&nbsp; import_request_variables("GPC", "");<br />
<br />
But if the skripts relied on session_register() you'll have to do more:<br />
- Replace all variables that appeared after session_register with _SESSION equivalents - so $myvar becomes $_SESSION['myvar']<br />
- Take care if your variables appeared inside strings - 'Hello $user !' works, but 'Hello $_SESSION['user'] !' not - so you have to concatenate the string: 'Hello '.$_SESSION['user'] .' !'<br />
- Session variables in function declarations (for whatever purpose) will not work - keeping the old (local) names will work in most cases. <br />
- Finally, replace the session_register(..) line with session_start()</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53961""></a>
  <div class="note">
   <strong class="user">markus</strong>
   <a href="#53961" class="date">19-Jun-2005 12:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Considering the comment below. I think there's a way to avoid that "problem":<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//<br />
// $starttime is an example of a variable that we might need to define,<br />
// even before, running the "register_globals OFF" emulator below.<br />
//<br />
</span><span class="keyword">list(</span><span class="default">$msec</span><span class="keyword">, </span><span class="default">$sec</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="string">' '</span><span class="keyword">, </span><span class="default">microtime</span><span class="keyword">());<br />
</span><span class="default">$starttime </span><span class="keyword">= ((float)</span><span class="default">$msec </span><span class="keyword">+ (float)</span><span class="default">$sec</span><span class="keyword">);<br />
<br />
</span><span class="comment">//<br />
// If register_globals is ON, ensure no unexpected globals are defined.<br />
// ie. We'll try to emulate a register_globals OFF environment.<br />
//<br />
</span><span class="keyword">if( (bool)@</span><span class="default">ini_get</span><span class="keyword">(</span><span class="string">'register_globals'</span><span class="keyword">) )<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$superglobals </span><span class="keyword">= array(</span><span class="default">$_ENV</span><span class="keyword">, </span><span class="default">$_GET</span><span class="keyword">, </span><span class="default">$_POST</span><span class="keyword">, </span><span class="default">$_COOKIE</span><span class="keyword">, </span><span class="default">$_FILES</span><span class="keyword">, </span><span class="default">$_SERVER</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if( isset(</span><span class="default">$_SESSION</span><span class="keyword">) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_unshift</span><span class="keyword">(</span><span class="default">$superglobals</span><span class="keyword">, </span><span class="default">$_SESSION</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$knownglobals </span><span class="keyword">= array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Known PHP Reserved globals and superglobals:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_ENV'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'HTTP_ENV_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_GET'</span><span class="keyword">,&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'HTTP_GET_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_POST'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">'HTTP_POST_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_COOKIE'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">'HTTP_COOKIE_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_FILES'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">'HTTP_FILES_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_SERVER'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">'HTTP_SERVER_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_SESSION'</span><span class="keyword">,&nbsp; &nbsp; </span><span class="string">'HTTP_SESSION_VARS'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'_REQUEST'</span><span class="keyword">,<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Global variables used by this code snippet:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'superglobals'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'knownglobals'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'superglobal'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'global'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'void'</span><span class="keyword">,<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Known global variables defined before this code snippet is reached.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'starttime'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; );<br />
&nbsp;&nbsp;&nbsp; foreach( </span><span class="default">$superglobals </span><span class="keyword">as </span><span class="default">$superglobal </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$superglobal </span><span class="keyword">as </span><span class="default">$global </span><span class="keyword">=&gt; </span><span class="default">$void </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$global</span><span class="keyword">, </span><span class="default">$knownglobals</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$GLOBALS</span><span class="keyword">[</span><span class="default">$global</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Note the stuff related to the $_SESSION array depends on whether the PHP session has been started or not. You might want to call session_start() before this point (or set session.auto_start ON).<br />
<br />
HTH+ :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="51858""></a>
  <div class="note">
   <strong class="user">php at REMOVEMEkennel17 dot co dot uk</strong>
   <a href="#51858" class="date">13-Apr-2005 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding simulating register_globals = off, note that it is impossible to adequately prevent $_SESSION variables from being globalised, as the array (and thus the globals) are created on a call to session_start().&nbsp; You would therefore have to 'undo' this when you start a session as using it at the start of your script will have no effect.<br />
<br />
To avoid potential problems, use a prefix that is unique for all session variables (e.g. 'SESS_'), and only access them via the $_SESSION array.&nbsp; The prefix ensures that you don't have a naming clash (and therefore a security risk) with any non-session globals.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="faq.migration5.html">PHP 4 から PHP 5 への移行</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="appendices.html">付録</a></div>
 <div class="up"><a href="faq.html">FAQ</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
