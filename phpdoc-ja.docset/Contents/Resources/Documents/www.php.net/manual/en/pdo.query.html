<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>SQL ステートメントを実行し、結果セットを PDOStatement オブジェクトとして返す</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="pdo.prepare.html">PDO::prepare</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="pdo.quote.html">PDO::quote</a></div>
 <div class="up"><a href="class.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="pdo.query" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDO::query</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PECL pdo &gt;= 0.2.0)</p><p class="refpurpose"><span class="refname">PDO::query</span> &mdash; <span class="dc-title">
   SQL ステートメントを実行し、結果セットを PDOStatement オブジェクトとして返す
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-pdo.query-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span> <span class="methodname"><strong>PDO::query</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>
   )</div>


  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span> <span class="methodname"><strong>PDO::query</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$PDO::FETCH_COLUMN</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$colno</code></span>
   )</div>


  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span> <span class="methodname"><strong>PDO::query</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$PDO::FETCH_CLASS</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$classname</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$ctorargs</code></span>
   )</div>


  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.pdostatement.html" class="type PDOStatement">PDOStatement</a></span> <span class="methodname"><strong>PDO::query</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$statement</code></span>
   , <span class="methodparam"><span class="type">int</span> <code class="parameter">$PDO::FETCH_INTO</code></span>
   , <span class="methodparam"><span class="type">object</span> <code class="parameter">$object</code></span>
   )</div>


  <p class="para rdfs-comment">
    <span class="function"><strong>PDO::query()</strong></span> は、一回の関数コールの中で
   SQL ステートメントを実行し、このステートメントにより返された
   結果セット (ある場合) を PDOStatement オブジェクトとして返します。
  </p>
  <p class="para">
   複数回発行する必要があるステートメントの場合、
    <span class="function"><a href="pdo.prepare.html" class="function">PDO::prepare()</a></span> で PDOStatement ステートメントを準備し、
    <span class="function"><a href="pdostatement.execute.html" class="function">PDOStatement::execute()</a></span> でそのステートメントを
   複数回発行する方がより良いパフォーマンスを得られると実感するでしょう。
  </p>
  <p class="para">
    <span class="function"><strong>PDO::query()</strong></span> を次にコールする前に
   結果セット内の全てのデータを取得しない場合、そのコールは失敗します。
    <span class="function"><a href="pdostatement.closecursor.html" class="function">PDOStatement::closeCursor()</a></span> をコールし、
   次に  <span class="function"><strong>PDO::query()</strong></span> をコールする前に
   PDOStatement オブジェクトに関連付けられたリソースを解放してください。
  </p>

  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    この関数はパラメータをひとつだけしかとらないと記述されていますが、
    追加のパラメータを渡すことも可能です。これらのパラメータは、
    返される結果のオブジェクトに対して
     <span class="function"><a href="pdostatement.setfetchmode.html" class="function">PDOStatement::setFetchMode()</a></span>
    をコールするのと同じような扱いになります。
   </p>
  </p></blockquote>

 </div>

 <div class="refsect1 parameters" id="refsect1-pdo.query-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">statement</code></em></span>
      <dd>

       <p class="para">
        準備、発行する SQL ステートメント。
       </p>
       <p class="para">
        クエリ内のデータは <a href="pdo.quote.html" class="link">適切にエスケープ</a>
        する必要があります。
       </p>
      </dd>

     </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-pdo.query-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
     <span class="function"><strong>PDO::query()</strong></span> は、PDOStatement オブジェクトを返します。
    失敗した場合は <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-pdo.query-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-925">
    <p><strong>例1 PDO::query の例</strong></p>
    <div class="example-contents"><p>
      <span class="function"><strong>PDO::query()</strong></span> の優れた機能は、
     実行に成功したSELECTステートメントにより返されたレコードセットで
     反復処理が可能であることです。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">getFruit</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;name,&nbsp;color,&nbsp;calories&nbsp;FROM&nbsp;fruit&nbsp;ORDER&nbsp;BY&nbsp;name'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'color'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'calories'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
apple   red     150
banana  yellow  250
kiwi    brown   75
lemon   yellow  25
orange  orange  300
pear    green   150
watermelon      pink    90
</pre></div>
    </div>
   </div>
  </p>
 </div>



 <div class="refsect1 seealso" id="refsect1-pdo.query-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="pdo.exec.html" class="function" rel="rdfs-seeAlso">PDO::exec()</a> - SQL ステートメントを実行し、作用した行数を返す</span></li>
    <li class="member"> <span class="function"><a href="pdo.prepare.html" class="function" rel="rdfs-seeAlso">PDO::prepare()</a> - 文を実行する準備を行い、文オブジェクトを返す</span></li>
    <li class="member"> <span class="function"><a href="pdostatement.execute.html" class="function" rel="rdfs-seeAlso">PDOStatement::execute()</a> - プリペアドステートメントを実行する</span></li>
   </ul>
  </p>
 </div>



</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113459""></a>
  <div class="note">
   <strong class="user">paolo at dellunto dot net</strong>
   <a href="#113459" class="date">14-Oct-2013 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are using PDO to create an SQLite dbfile that will be used by an Android application, you can set common values via the $dbh-&gt;query("PRAGMA ...") statement;<br />
<br />
a tipical example would be the user_version of the database or the page_size <br />
<span class="default">&lt;?php<br />
</span><span class="keyword">...<br />
</span><span class="default">$dbh </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(</span><span class="default">$PDO_DSN</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">, </span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"PRAGMA page_size = 4096"</span><span class="keyword">); </span><span class="comment">//Android match page size<br />
</span><span class="default">$dbh</span><span class="keyword">-&gt;</span><span class="default">query</span><span class="keyword">(</span><span class="string">"PRAGMA user_version = 2"</span><span class="keyword">); </span><span class="comment">//This match super(context, DB_NAME, null, DB_VERSION) of the DatabaseOpenHelper<br />
</span><span class="keyword">....<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85919""></a>
  <div class="note">
   <strong class="user">marcos at marcosregis dot com</strong>
   <a href="#85919" class="date">24-Sep-2008 06:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After a lot of hours working with DataLink on Oracle-&gt;MySQL and PDO we (me and Adriano Rodrigues, that solve it) discover that PDO (and oci too) need the attribute AUTOCOMMIT set to FALSE to work correctly with.<br />
There's&nbsp; 3 ways to set autocommit to false: On constructor, setting the atribute after construct and before query data or initiating a Transaction (that turns off autocommit mode)<br />
<br />
The examples:<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// First way - On PDO Constructor<br />
</span><span class="default">$options </span><span class="keyword">= array(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ATTR_AUTOCOMMIT</span><span class="keyword">=&gt;</span><span class="default">FALSE</span><span class="keyword">);<br />
<br />
</span><span class="default">$pdo </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(</span><span class="default">$dsn</span><span class="keyword">,</span><span class="default">$user</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">,</span><span class="default">$options</span><span class="keyword">);<br />
<br />
</span><span class="comment">// now we are ready to query DataLinks<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php <br />
</span><span class="comment">// Second Way - Before create statements<br />
</span><span class="default">$pdo </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">(</span><span class="default">$dsn</span><span class="keyword">,</span><span class="default">$user</span><span class="keyword">,</span><span class="default">$pass</span><span class="keyword">);<br />
<br />
</span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ATTR_AUTOCOMMIT</span><span class="keyword">,</span><span class="default">FALSE</span><span class="keyword">);<br />
</span><span class="comment">// or<br />
</span><span class="default">$pdo</span><span class="keyword">-&gt;</span><span class="default">beginTransaction</span><span class="keyword">();<br />
<br />
</span><span class="comment">// now we are ready to query DataLinks<br />
</span><span class="default">?&gt;<br />
</span><br />
To use DataLinks on oci just use OCI_DEFAULT on oci_execute() function;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85820""></a>
  <div class="note">
   <strong class="user">oohall [AT] gmail [DOT] com</strong>
   <a href="#85820" class="date">19-Sep-2008 07:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Since query() dosn't support ? paramaters I hacked this up:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">MyPDO </span><span class="keyword">extends </span><span class="default">PDO<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; private </span><span class="default">$qcache</span><span class="keyword">; </span><span class="comment">// prepared query cache<br />
<br />
&nbsp;&nbsp;&nbsp; // Usage: $dbobject-&gt;query($sql, $args...)<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">pquery</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">qcache</span><span class="keyword">[</span><span class="default">$sql</span><span class="keyword">])) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">qcache</span><span class="keyword">[</span><span class="default">$sql</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$query </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="default">$sql</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">qcache</span><span class="keyword">[</span><span class="default">$sql</span><span class="keyword">] = </span><span class="default">$query</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$args </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$query</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">(</span><span class="default">$args</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$query</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Food for thought: If you're going though the results of a query and use this function to perform another query of the same type (meaning same object) the results from the previous query will be lost. Granted, this probably won't happen (often). but it should be noted.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="84483""></a>
  <div class="note">
   <strong class="user">andrea at bhweb dot it</strong>
   <a href="#84483" class="date">16-Jul-2008 12:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If someone is suffering of the "MySQL server has gone away" problem after executing multiple queries, this is a solution that solved it for me. It's similar to the one needed for the exact same problem in mysqli.<br />
<br />
<span class="default">&lt;?php<br />
$stmt</span><span class="keyword">=</span><span class="default">$db</span><span class="keyword">-&gt;</span><span class="default">prepare</span><span class="keyword">(</span><span class="default">$query</span><span class="keyword">);<br />
</span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">execute</span><span class="keyword">();<br />
do { </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">fetch</span><span class="keyword">(); </span><span class="default">$stmt</span><span class="keyword">-&gt;</span><span class="default">closeCursor</span><span class="keyword">(); ++</span><span class="default">$line</span><span class="keyword">; } while(</span><span class="default">$stmt</span><span class="keyword">-<br />
&gt;</span><span class="default">nextRowset</span><span class="keyword">());<br />
</span><span class="default">?&gt;<br />
</span><br />
I found this only works using prepare and execute this way, not if you <br />
directly execute the query with query().</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80563""></a>
  <div class="note">
   <strong class="user">NUNTIUS</strong>
   <a href="#80563" class="date">22-Jan-2008 06:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found this method extremely useful for getting the iteration count. Note the usage of "for" instead of "while" or "foreach". Just place the "$row = $query-&gt;fetch()" as the second condition of your for loop (which is do until). This is the best of both worlds IMHO. Criticism welcome.<br />
<br />
try {<br />
&nbsp;&nbsp;&nbsp; $hostname = "servername";<br />
&nbsp;&nbsp;&nbsp; $dbname = "dbname";<br />
&nbsp;&nbsp;&nbsp; $username = "username";<br />
&nbsp;&nbsp;&nbsp; $pw = "password";<br />
&nbsp;&nbsp;&nbsp; $pdo = new PDO ("mssql:host=$hostname;dbname=$dbname","$username","$pw");<br />
&nbsp; } catch (PDOException $e) {<br />
&nbsp;&nbsp;&nbsp; echo "Failed to get DB handle: " . $e-&gt;getMessage() . "\n";<br />
&nbsp;&nbsp;&nbsp; exit;<br />
&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; $query = $pdo-&gt;prepare("select name FROM tbl_name");<br />
&nbsp;&nbsp; &nbsp;&nbsp; $query-&gt;execute();<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; for($i=0; $row = $query-&gt;fetch(); $i++){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; echo $i." - ".$row['name']."&lt;br/&gt;";<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset($pdo); <br />
&nbsp;&nbsp; &nbsp;&nbsp; unset($query);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74943""></a>
  <div class="note">
   <strong class="user">fredrik at NOSPAM dot rambris dot com</strong>
   <a href="#74943" class="date">05-May-2007 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The handling of errors by this function is controlled by the attribute PDO::ATTR_ERRMODE.<br />
<br />
Use the following to make it throw an exception:<br />
<span class="default">&lt;?php<br />
$dbh</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ATTR_ERRMODE</span><span class="keyword">, </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ERRMODE_EXCEPTION</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74773""></a>
  <div class="note">
   <strong class="user">nicobn at gmail dot com</strong>
   <a href="#74773" class="date">27-Apr-2007 12:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please note that when Query() fails, it does not return a PDOStatement object . It simply returns false.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72537""></a>
  <div class="note">
   <strong class="user">jonmsawyer at gmail dot com</strong>
   <a href="#72537" class="date">23-Jan-2007 09:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
@ dozoyousan at gmail dot com<br />
&gt; 03-May-2006 05:26<br />
&gt; &gt; When query() fails, the boolean false is returned.<br />
&gt;<br />
&gt; I think that is "Silent Mode".<br />
&gt; If that set attribute ErrorMode "Exception Mode"<br />
&gt; then that throw PDOException.<br />
&gt; $pdoObj = new PDO( $dsn, $user, $pass );<br />
&gt; $pdoObj-&gt;setAttribute("PDO::ATTR_ERRMODE",<br />
&gt; PDO::ERRMODE_EXCEPTION);<br />
<br />
What you say is correct, however, your PHP code is incorrect:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// This is fine<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdoObj </span><span class="keyword">= new </span><span class="default">PDO</span><span class="keyword">( </span><span class="default">$dsn</span><span class="keyword">, </span><span class="default">$user</span><span class="keyword">, </span><span class="default">$pass </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// This line is wrong<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdoObj</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="string">"PDO::ATTR_ERRMODE"</span><span class="keyword">, </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ERRMODE_EXCEPTION</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// It should be:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$pdoObj</span><span class="keyword">-&gt;</span><span class="default">setAttribute</span><span class="keyword">(</span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ATTR_ERRMODE</span><span class="keyword">, </span><span class="default">PDO</span><span class="keyword">::</span><span class="default">ERRMODE_EXCEPTION</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Parameter 1 should not be in quotes. PHP interprets<br />
&nbsp;&nbsp;&nbsp; // that as a string. Instead, internally, its represented<br />
&nbsp;&nbsp;&nbsp; // as type LONG INT. Try it :)<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps. Cheers.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="65543""></a>
  <div class="note">
   <strong class="user">dozoyousan at gmail dot com</strong>
   <a href="#65543" class="date">03-May-2006 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&gt; When query() fails, the boolean false is returned. <br />
<br />
I think that is "Silent Mode".<br />
If that set attribute ErrorMode "Exception Mode"<br />
then that throw PDOException.<br />
&nbsp;$pdoObj = new PDO( $dsn, $user, $pass );<br />
&nbsp;$pdoObj-&gt;setAttribute("PDO::ATTR_ERRMODE", PDO::ERRMODE_EXCEPTION);</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="pdo.prepare.html">PDO::prepare</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="pdo.quote.html">PDO::quote</a></div>
 <div class="up"><a href="class.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
