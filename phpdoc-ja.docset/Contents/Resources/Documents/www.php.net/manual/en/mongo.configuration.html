<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>実行時設定</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.installation.html">インストール手順</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="up"><a href="mongo.setup.html">インストール/設定</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mongo.configuration" class="section">
 <h2 class="title">実行時設定</h2>
 <p class="simpara">
<var class="filename">php.ini</var> の設定により動作が変化します。
</p>
 <p class="para">
  <table class="doctable table">
   <caption><strong>Mongo 設定オプション</strong></caption>
   
    <thead>
     <tr>
      <th>名前</th>
      <th>デフォルト</th>
      <th>変更可能</th>
      <th>変更履歴</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.allow-empty-keys" class="link">mongo.allow_empty_keys</a></td>
      <td>0</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.allow-persistent" class="link">mongo.allow_persistent</a></td>
      <td>1</td>
      <td>PHP_INI_ALL</td>
      <td>1.2.0 で削除</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.chunk-size" class="link">mongo.chunk_size</a></td>
      <td>262144</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.cmd" class="link">mongo.cmd</a></td>
      <td>&quot;$&quot;</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.default-host" class="link">mongo.default_host</a></td>
      <td>&quot;localhost&quot;</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.default-port" class="link">mongo.default_port</a></td>
      <td>27017</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.is-master-interval" class="link">mongo.is_master_interval</a></td>
      <td>15</td>
      <td>PHP_INI_ALL</td>
      <td>1.2.10 で追加。1.3.0 までのデフォルト値は 60</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.long-as-object" class="link">mongo.long_as_object</a></td>
      <td>0</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.native-long" class="link">mongo.native_long</a></td>
      <td>0<a href="mongo.configuration.html#ini.mongo.native-long" class="link">*</a></td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.ping-interval" class="link">mongo.ping_interval</a></td>
      <td>5</td>
      <td>PHP_INI_ALL</td>
      <td>1.2.10 で追加</td>
     </tr>

     <tr>
      <td><a href="mongo.configuration.html#ini.mongo.utf8" class="link">mongo.utf8</a></td>
      <td>1</td>
      <td>PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

    </tbody>
   
  </table>

  PHP_INI_* モードの詳細および定義については
<a href="configuration.changes.modes.html" class="xref">どこで設定を行うのか</a> を参照してください。
 </p>

 <p class="para">以下に設定ディレクティブに関する
簡単な説明を示します。</p>

 <p class="para">
  <dl>

   <dt id="ini.mongo.allow-empty-keys">
    <span class="term">
     <em><code class="parameter">mongo.allow_empty_keys</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      バージョン 1.0.11 で追加されました。
     </p>
     <p class="para">
      空文字列 (&quot;&quot;) をキーの名前として許可するか否か。
      デフォルトでは、データベースに空文字列のキーを渡そうとすると
      ドライバが例外を発生させます。
      ダブルクォートの中で $ 演算子を使う場合などに、
      不注意で空文字列を渡してしまうことは非常にありがちです。
      この設定はデフォルトのままにしておくことを推奨します。
      しかし、空文字列のキーを保存する必要がある場合はこのオプションを true
      にします。そうすると、ドライバが空文字列をそのままデータベースに送るようになります。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.allow-persistent">
    <span class="term">
     <em><code class="parameter">mongo.allow_persistent</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      持続的接続を許可するかどうか
      (1.2.0 で削除されました。すべての接続が持続的接続になります)。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.chunk-size">
    <span class="term">
     <em><code class="parameter">mongo.chunk_size</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      チャンクあたりのバイト数。GridFS ファイルを分配する際に使用します。
      この数値は、少なくとも 100 以上で 4 メガバイト未満 (最大値:
      4194204)、そして小さめにすることを推奨します。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.cmd">
    <span class="term">
     <em><code class="parameter">mongo.cmd</code></em>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </span>
    <dd>

     <p class="para">
      修飾子や比較において $ のかわりに使う文字。
     </p>
     <p class="para">
      &quot;$&quot; のエスケープはついつい忘れてしまいがちなので、独自の文字を
      &#039;$&#039; のかわりに使うことができます。キーの名前に現れない文字、たとえば
      &quot;:&quot; などを選びましょう。
     </p>
     <div class="example-contents">
<div class="cdata"><pre>
mongo.cmd = &quot;:&quot;
</pre></div>
     </div>

     <p class="para">
      その後、比較を行うにはこのようにします。
     </p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$query&nbsp;</span><span style="color: #007700">=&nbsp;array(&nbsp;</span><span style="color: #DD0000">"i"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(&nbsp;</span><span style="color: #DD0000">":gt"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">20</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">":lte"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">30&nbsp;</span><span style="color: #007700">)&nbsp;);<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     <p class="para">
      コード内で <em>ini_set(&quot;mongo.cmd&quot;, &quot;:&quot;)</em> で変更することもできます。
      もちろん、シングルクォートやバックスラッシュで $ をエスケープすることもできます。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.default-host">
    <span class="term">
     <em><code class="parameter">mongo.default_host</code></em>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </span>
    <dd>

     <p class="para">
      コンストラクタに何も渡さなかったときに使う、デフォルトのホスト名。
     </p>
    </dd>

   </dt>


   <dt id="ini.mongo.default-port">
    <span class="term">
     <em><code class="parameter">mongo.default_port</code></em>
     <span class="type"><a href="language.types.string.html" class="type string">string</a></span>
    </span>
    <dd>

     <p class="para">
      データベースサーバーへの接続に使用する TCP ポート番号。
      ポート番号が指定されなかった場合にこれを使用します。
      データベースのデフォルトは <em>27017</em> です。
     </p>
    </dd>

   </dt>

  
   <dt id="ini.mongo.is-master-interval">
    <span class="term">
     <em><code class="parameter">mongo.is_master_interval</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      バージョン 1.2.10 で追加されました。
     </p>
     <p class="para">
      レプリカセット接続用:
      ドライバが &quot;isMaster&quot; リクエストを MongoDB サーバーに送信する最小間隔。
      この値を小さくすると、リクエストの送信回数は多くなりますが、
      レプリカセットのトポロジーが変わったときにドライバがすぐに検出できるようになります。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.long-as-object">
    <span class="term">
     <em><code class="parameter">mongo.long_as_object</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      BSON_LONG を、プリミティブ型ではなく <a href="class.mongoint64.html" class="classname">MongoInt64</a>
      のインスタンスで返します。
     </p>
    </dd>

   </dt>


   <dt id="ini.mongo.native-long">
    <span class="term">
     <em><code class="parameter">mongo.native-long</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      <em class="emphasis">
       この項目のデフォルトは 2.0.0 からは <strong><code>TRUE</code></strong> に変わりました。
       設定したい値 (おそらく <strong><code>TRUE</code></strong> でしょう) をきちんと設定しておくようにしましょう。
       そうすれば、ドライバをアップグレードしたときにいきなり挙動が変わることがなくなります。
      </em>
     </p>
     <p class="para">
      64 ビットプラットフォームでは、<em>mongo.native_long</em>
      を設定すれば 64 ビット整数値を MongoDB に格納できるようになります。
      設定しなければ、保存できるのは 32 ビット整数値だけです。
      この項目を設定したときに使われる MongoDB のデータ型は BSON LONG です。
      この設定を off にしたときに使われるデータ型は BSON INT となります。
     </p>
     <p class="para">
      この設定は、MongoDB から BSON LONG を読み込んだときの振る舞いにも影響します。
      <em>mongo.native_long</em> を有効にしなければ、
      ドライバは BSON LONG をすべて PHP の double 型に変換するので、精度が失われる可能性があります。
     </p>
     <p class="para">
      32 ビットプラットフォームでは、<em>mongo.native_log</em>
      の設定は整数値を MongoDB に格納する際には何の影響も及ぼしません。
      整数値はこれまで通り BSON INT で格納されます。しかし、この設定を有効にして
      BSON LONG を MongoDB から読み込むと
      <a href="class.mongocursorexception.html" class="classname">MongoCursorException</a> がスローされ、
      もとの精度のままではデータが読み込めないということを警告します。
     </p>
     <p class="para">
      32 ビットシステム上では特に、この項目とあわせて
      <em>mongo.long_as_object</em> を有効にしておくことを推奨します。
     </p>
    </dd>

   </dt>


   <dt id="ini.mongo.ping-interval">
    <span class="term">
     <em><code class="parameter">mongo.ping_interval</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      バージョン 1.2.10 で追加されました。
     </p>
     <p class="para">
      レプリカセット接続用:
      ドライバが &quot;ping&quot; リクエストを MongoDB サーバーに送信する最小間隔。
      この値を小さくすると、ping の送信回数は多くなりますが、
      レプリカセット内のノードに接続できなくなったときにドライバがすぐに検出できるようになります。
     </p>
    </dd>

   </dt>
  

   <dt id="ini.mongo.utf8">
    <span class="term">
     <em><code class="parameter">mongo.utf8</code></em>
     <span class="type"><a href="language.types.integer.html" class="type int">int</a></span>
    </span>
    <dd>

     <p class="para">
      非 UTF8 文字列に対して例外をスローするかどうか。
      バージョン 1.0.4 になるまでは、PHP ドライバは非 UTF8 文字列を無視していました。
      たとえそれが追加するつもりのなかったものであったとしてもです。
      1.0.4 以降は、ドライバが
      <a href="class.mongoexception.html" class="classname">MongoException</a> をスローするようになりました。
      非 UTF8 文字列を追加するアプリケーションの移行時の手間を軽減するため、
      このオプションをオフにすれば以前のように例外をスローしない設定にすることができます。
      このオプションはバージョン 1.1.0 以降で廃止され、非 UTF8
      文字列に対しては常に例外をスローするようになります。
     </p>
    </dd>

   </dt>
  

  </dl>

 </p>
</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
 <div class="note">There are no user contributed notes for this page.</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongo.installation.html">インストール手順</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongo.manual.html">マニュアル</a></div>
 <div class="up"><a href="mongo.setup.html">インストール/設定</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
