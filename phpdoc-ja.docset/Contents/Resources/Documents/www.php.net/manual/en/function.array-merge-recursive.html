<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>二つ以上の配列を再帰的にマージする</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-map.html">array_map</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-merge.html">array_merge</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-merge-recursive" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_merge_recursive</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.1, PHP 5)</p><p class="refpurpose"><span class="refname">array_merge_recursive</span> &mdash; <span class="dc-title">二つ以上の配列を再帰的にマージする</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-merge-recursive-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_merge_recursive</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array1</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
  ] )</div>

  <p class="para rdfs-comment">
    <span class="function"><strong>array_merge_recursive()</strong></span> は、
   一つ以上の配列の要素をマージし、
   前の配列の最後にもう一つの配列の値を追加します。
   マージした後の配列を返します。
  </p>
  <p class="para">
   入力配列が同じ文字列のキーを有している場合、
   マージした後の配列ではこれらのキーの値がひとつにまとめられます。
   この処理は再帰的に行われます。
   このため、値の一つが配列自体を指している場合、
   この関数は別の配列の対応するエントリもマージします。
   しかし、配列が同じ数値キーを有している場合、
   後の値は元の値を上書せず、追加されます。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-merge-recursive-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">array1</code></em></span>
     <dd>

      <p class="para">
       マージするもとの配列。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">...</code></em></span>
     <dd>

      <p class="para">
       再帰的にマージしていく配列の可変リスト。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-merge-recursive-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   すべての引数の配列をマージした結果の配列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-merge-recursive-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4935">
    <p><strong>例1  <span class="function"><strong>array_merge_recursive()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$ar1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"favorite"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">),&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$ar2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">10</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"color"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">"favorite"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_merge_recursive</span><span style="color: #007700">(</span><span style="color: #0000BB">$ar1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ar2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [color] =&gt; Array
        (
            [favorite] =&gt; Array
                (
                    [0] =&gt; red
                    [1] =&gt; green
                )

            [0] =&gt; blue
        )

    [0] =&gt; 5
    [1] =&gt; 10
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-merge-recursive-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-merge.html" class="function" rel="rdfs-seeAlso">array_merge()</a> - ひとつまたは複数の配列をマージする</span></li>
    <li class="member"> <span class="function"><a href="function.array-replace-recursive.html" class="function" rel="rdfs-seeAlso">array_replace_recursive()</a> - 渡された配列の要素を再帰的に置き換える</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="109285""></a>
  <div class="note">
   <strong class="user">robert dot schlak at alcatel-lucent dot com</strong>
   <a href="#109285" class="date">03-Jul-2012 01:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The presence of NULLs; here is an example of the issue and a fix. Although it may not be apparent, if using array_merge_recursive in a loop to combine results from a database query or some other function, you can corrupt your result when NULLs are present in the data. I discovered this when migrating from an Oracle DB to a MySQL DB. I had to match the array structure returned from the PHP function calling the DB and got bit. The array_walk call fixed this for me.<br />
This is a simple example that lacks any DB calls and looping. Assume your array had the DB column names (first, last, and age) and you needed to combine the data in a multi-dimensional array in which the column name is an array key with all rows beneath it. The corruption occurs in $a3. If using element position 2, one could create the fictitious 'pete johnson' because of the collapsing of elements.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">print </span><span class="string">"&lt;pre&gt;Show corruption\\n"</span><span class="keyword">;<br />
</span><span class="default">$a1 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'bob'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'jones'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'48'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'sam'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'smith'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'41'</span><span class="keyword">);<br />
</span><span class="default">$a3 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'pete'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="default">null</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
</span><span class="default">$a4 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'joe'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'johnson'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'33'</span><span class="keyword">);<br />
</span><span class="default">$a5 </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$a3</span><span class="keyword">,</span><span class="default">$a4</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a5</span><span class="keyword">);<br />
<br />
print </span><span class="string">"Show Fix\\n"</span><span class="keyword">;<br />
</span><span class="default">$a1 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'bob'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'jones'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'48'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'sam'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'smith'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'41'</span><span class="keyword">);<br />
</span><span class="default">$a3 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'pete'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="default">null</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'3'</span><span class="keyword">);<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">, </span><span class="string">'null_to_empty'</span><span class="keyword">);<br />
</span><span class="default">$a4 </span><span class="keyword">= array(</span><span class="string">'first'</span><span class="keyword">=&gt;</span><span class="string">'joe'</span><span class="keyword">, </span><span class="string">'last'</span><span class="keyword">=&gt;</span><span class="string">'johnson'</span><span class="keyword">, </span><span class="string">'age'</span><span class="keyword">=&gt;</span><span class="string">'33'</span><span class="keyword">);<br />
</span><span class="default">$a5 </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">,</span><span class="default">$a3</span><span class="keyword">,</span><span class="default">$a4</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$a5</span><span class="keyword">);<br />
print </span><span class="string">"&lt;/pre&gt;\\n"</span><span class="keyword">;<br />
<br />
function </span><span class="default">null_to_empty</span><span class="keyword">(&amp;</span><span class="default">$item</span><span class="keyword">) {<br />
<br />
&nbsp; </span><span class="default">$item </span><span class="keyword">= </span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">) ? </span><span class="string">'' </span><span class="keyword">: </span><span class="default">$item</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106985""></a>
  <div class="note">
   <strong class="user">martyniuk dot vasyl at gmail dot com</strong>
   <a href="#106985" class="date">24-Dec-2011 06:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is my version of array_merge_recursive without overwriting numeric keys:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive_new</span><span class="keyword">() {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arrays </span><span class="keyword">as </span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">); </span><span class="comment">//important<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = @</span><span class="default">each</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; @</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_merge_recursive_new</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$base</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104145""></a>
  <div class="note">
   <strong class="user">walf</strong>
   <a href="#104145" class="date">26-May-2011 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There are a lot of examples here for recursion that are meant to behave more like array_merge() but they don't get it quite right or are fairly customised. I think this version is most similar, takes more than 2 arguments and can be renamed in one place:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive_simple</span><span class="keyword">() {<br />
<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">func_num_args</span><span class="keyword">() &lt; </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">.</span><span class="string">' needs two or more array arguments'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$merged </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$arrays</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="default">__FUNCTION__ </span><span class="keyword">.</span><span class="string">' encountered a non array argument'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$merged</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$merged</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$merged</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a1 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">88 </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'bar' </span><span class="keyword">=&gt; array(</span><span class="default">4</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">6</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; </span><span class="string">'hi'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">99 </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo' </span><span class="keyword">=&gt; array(</span><span class="default">8</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'bar' </span><span class="keyword">=&gt; </span><span class="default">9</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="default">10</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; </span><span class="string">'bye'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">11</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
</span><span class="default">$a3 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'m' </span><span class="keyword">=&gt; </span><span class="string">'ciao'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; ),<br />
);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">, </span><span class="default">$a3</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge_recursive_simple</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">, </span><span class="default">$a3</span><span class="keyword">));<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">, </span><span class="default">$a3</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
gives:<br />
<br />
array(7) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(7) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(7) {<br />
&nbsp; int(1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(1)<br />
&nbsp; ["foo"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["foo"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["foo"]=&gt;<br />
&nbsp; array(1) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(1) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(2) {<br />
&nbsp;&nbsp;&nbsp; [0]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp;&nbsp; int(8)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(8)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(2)<br />
&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;<br />
&nbsp; ["bar"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["bar"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(8)<br />
&nbsp; int(9)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(9)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp; ["x"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["x"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["bar"]=&gt;<br />
&nbsp; int(5)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(5)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(2) {<br />
&nbsp; ["z"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["z"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;<br />
&nbsp; array(1) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(3) {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(4)<br />
&nbsp;&nbsp;&nbsp; ["m"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp;&nbsp; string(4) "ciao"&nbsp; &nbsp; &nbsp; &nbsp; int(6)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(9)<br />
&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["m"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp; [1]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(4) "ciao"&nbsp; &nbsp; &nbsp; ["x"]=&gt;<br />
&nbsp; int(7)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [1]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(5)<br />
&nbsp; ["y"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(11)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["z"]=&gt;<br />
&nbsp; int(10)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(3) {<br />
}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(7)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; int(6)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["y"]=&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["m"]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(10)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(3) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(2) "hi"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(3) "bye"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; string(4) "ciao"<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(11)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(7)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ["y"]=&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; int(10)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102379""></a>
  <div class="note">
   <strong class="user">andyidol at gmail dot com</strong>
   <a href="#102379" class="date">11-Feb-2011 04:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's my function to recursively merge two arrays with overwrites. Nice for merging configurations.<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">MergeArrays</span><span class="keyword">(</span><span class="default">$Arr1</span><span class="keyword">, </span><span class="default">$Arr2</span><span class="keyword">)<br />
{<br />
&nbsp; foreach(</span><span class="default">$Arr2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$Value</span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$Arr1</span><span class="keyword">) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Arr1</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">MergeArrays</span><span class="keyword">(</span><span class="default">$Arr1</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$Arr2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Arr1</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$Value</span><span class="keyword">;<br />
<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$Arr1</span><span class="keyword">;<br />
<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="100217""></a>
  <div class="note">
   <strong class="user">lsiq at papotam com</strong>
   <a href="#100217" class="date">01-Oct-2010 10:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">//&nbsp; this function merges an array with the $_SESSION<br />
//&nbsp; if you omit second parameter it merges to the root<br />
//&nbsp; if you give one 'path' array it is merged deeply<br />
<br />
</span><span class="keyword">function </span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$path</span><span class="keyword">=array()){<br />
&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$path</span><span class="keyword">[] = </span><span class="default">$k</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$path</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ref </span><span class="keyword">= &amp;</span><span class="default">$_SESSION</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$path</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$path </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$ref</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">]) </span><span class="default">$ref</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ref </span><span class="keyword">= &amp;</span><span class="default">$ref</span><span class="keyword">[</span><span class="default">$val</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ref</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">session_start</span><span class="keyword">();<br />
</span><span class="default">$x </span><span class="keyword">= array(</span><span class="default">k1</span><span class="keyword">=&gt;</span><span class="default">12</span><span class="keyword">, </span><span class="default">k2</span><span class="keyword">=&gt;array(</span><span class="default">kxx</span><span class="keyword">=&gt;</span><span class="string">'forget me'</span><span class="keyword">, </span><span class="default">kyy</span><span class="keyword">=&gt;</span><span class="string">'I was allways here'</span><span class="keyword">));&nbsp; &nbsp;&nbsp; </span><span class="comment">// do you have any of this on $_SESSION<br />
</span><span class="default">$rpl </span><span class="keyword">= array(</span><span class="default">k2</span><span class="keyword">=&gt;array(</span><span class="default">kxx</span><span class="keyword">=&gt;</span><span class="string">'I am a replaced value'</span><span class="keyword">,</span><span class="default">kzz</span><span class="keyword">=&gt;</span><span class="string">'I am a new value'</span><span class="keyword">));<br />
</span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">, array(</span><span class="string">'deep'</span><span class="keyword">,</span><span class="string">'deep'</span><span class="keyword">,</span><span class="string">'in_session'</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// you can use this way <br />
</span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// or this<br />
</span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$rpl</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// to merge parts with the $_SESSION<br />
<br />
</span><span class="default">$w </span><span class="keyword">= array(</span><span class="default">120</span><span class="keyword">, </span><span class="default">q</span><span class="keyword">=&gt;array(</span><span class="default">199</span><span class="keyword">,</span><span class="default">100</span><span class="keyword">));&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// works the same way on numeric keys<br />
</span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">, array(</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">));<br />
</span><span class="default">arr2sess</span><span class="keyword">(</span><span class="default">$w</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;pre&gt;'</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$_SESSION</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96201""></a>
  <div class="note">
   <strong class="user">mark dot roduner at gmail dot com</strong>
   <a href="#96201" class="date">14-Feb-2010 08:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Merges any number of arrays / parameters recursively, replacing <br />
&nbsp;* entries with string keys with values from latter arrays. <br />
&nbsp;* If the entry or the next value to be assigned is an array, then it <br />
&nbsp;* automagically treats both arguments as an array.<br />
&nbsp;* Numeric entries are appended, not replaced, but only if they are <br />
&nbsp;* unique<br />
&nbsp;*<br />
&nbsp;* calling: result = array_merge_recursive_distinct(a1, a2, ... aN)<br />
**/<br />
<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive_distinct </span><span class="keyword">() {<br />
&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp; </span><span class="default">$base </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">)) </span><span class="default">$base </span><span class="keyword">= empty(</span><span class="default">$base</span><span class="keyword">) ? array() : array(</span><span class="default">$base</span><span class="keyword">);<br />
&nbsp; foreach(</span><span class="default">$arrays </span><span class="keyword">as </span><span class="default">$append</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$append</span><span class="keyword">)) </span><span class="default">$append </span><span class="keyword">= array(</span><span class="default">$append</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$append </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(!</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$base</span><span class="keyword">) and !</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$append</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) or </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_merge_recursive_distinct</span><span class="keyword">(</span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$append</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else if(</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$base</span><span class="keyword">)) </span><span class="default">$base</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$base</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$base</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93905""></a>
  <div class="note">
   <strong class="user">drvali at hotmail dot com</strong>
   <a href="#93905" class="date">06-Oct-2009 06:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Merges any number of arrays of any dimensions, the later overwriting <br />
&nbsp;* previous keys, unless the key is numeric, in whitch case, duplicated <br />
&nbsp;* values will not be added. <br />
&nbsp;*<br />
&nbsp;* The arrays to be merged are passed as arguments to the function.<br />
&nbsp;*<br />
&nbsp;* @access public<br />
&nbsp;* @return array Resulting array, once all have been merged<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_merge_replace_recursive</span><span class="keyword">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Holds all the arrays passed<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$params </span><span class="keyword">= &amp; </span><span class="default">func_get_args </span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// First array is used as the base, everything else overwrites on it<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">array_shift </span><span class="keyword">( </span><span class="default">$params </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Merge all arrays on the first array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">foreach ( </span><span class="default">$params </span><span class="keyword">as </span><span class="default">$array </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Numeric keyed values are added (unless already there)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_numeric </span><span class="keyword">( </span><span class="default">$key </span><span class="keyword">) &amp;&amp; (! </span><span class="default">in_array </span><span class="keyword">( </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$return </span><span class="keyword">))) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">[] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">array_merge_replace_recursive </span><span class="keyword">( </span><span class="default">$return </span><span class="keyword">[$</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// String keyed values are replaced<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (isset ( </span><span class="default">$return </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] ) &amp;&amp; </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) &amp;&amp; </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$return </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] )) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">array_merge_replace_recursive </span><span class="keyword">( </span><span class="default">$return </span><span class="keyword">[$</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$a </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"b" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo'</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'bar' <br />
</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array (<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"a" </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">"c" </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'foo' <br />
</span><span class="keyword">);<br />
<br />
</span><span class="default">$c </span><span class="keyword">= </span><span class="default">array_merge_replace_recursive </span><span class="keyword">( </span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b </span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$a </span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$b </span><span class="keyword">);<br />
</span><span class="default">print_r </span><span class="keyword">( </span><span class="default">$c </span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; foo<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; bar<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; foo<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; foo<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; bar<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92195""></a>
  <div class="note">
   <strong class="user">gabriel dot sobrinho at gmail dot com</strong>
   <a href="#92195" class="date">14-Jul-2009 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I refactored the Daniel's function and I got it:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* array_merge_recursive does indeed merge arrays, but it converts values with duplicate<br />
&nbsp;* keys to arrays rather than overwriting the value in the first array with the duplicate<br />
&nbsp;* value in the second array, as array_merge does. I.e., with array_merge_recursive,<br />
&nbsp;* this happens (documented behavior):<br />
&nbsp;*<br />
&nbsp;* array_merge_recursive(array('key' =&gt; 'org value'), array('key' =&gt; 'new value'));<br />
&nbsp;*&nbsp; &nbsp;&nbsp; =&gt; array('key' =&gt; array('org value', 'new value'));<br />
&nbsp;*<br />
&nbsp;* array_merge_recursive_distinct does not change the datatypes of the values in the arrays.<br />
&nbsp;* Matching keys' values in the second array overwrite those in the first array, as is the<br />
&nbsp;* case with array_merge, i.e.:<br />
&nbsp;*<br />
&nbsp;* array_merge_recursive_distinct(array('key' =&gt; 'org value'), array('key' =&gt; 'new value'));<br />
&nbsp;*&nbsp; &nbsp;&nbsp; =&gt; array('key' =&gt; array('new value'));<br />
&nbsp;*<br />
&nbsp;* Parameters are passed by reference, though only for performance reasons. They're not<br />
&nbsp;* altered by this function.<br />
&nbsp;*<br />
&nbsp;* @param array $array1<br />
&nbsp;* @param array $array2<br />
&nbsp;* @return array<br />
&nbsp;* @author Daniel &lt;daniel (at) danielsmedegaardbuus (dot) dk&gt;<br />
&nbsp;* @author Gabriel Sobrinho &lt;gabriel (dot) sobrinho (at) gmail (dot) com&gt;<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive_distinct </span><span class="keyword">( array &amp;</span><span class="default">$array1</span><span class="keyword">, array &amp;</span><span class="default">$array2 </span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$merged </span><span class="keyword">= </span><span class="default">$array1</span><span class="keyword">;<br />
<br />
&nbsp; foreach ( </span><span class="default">$array2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value </span><span class="keyword">)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$value </span><span class="keyword">) &amp;&amp; isset ( </span><span class="default">$merged </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] ) &amp;&amp; </span><span class="default">is_array </span><span class="keyword">( </span><span class="default">$merged </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] ) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$merged </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_merge_recursive_distinct </span><span class="keyword">( </span><span class="default">$merged </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$merged </span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$merged</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
This fix the E_NOTICE when the the first array doesn't have the key and the second array have a value which is a array.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91835""></a>
  <div class="note">
   <strong class="user">jonnybergstrom at googles mail domain dot comm</strong>
   <a href="#91835" class="date">27-Jun-2009 05:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function didn't work for me - or it didn't do what I thought it would. So I wrote the below function, which merges two arrays, and returns the resulting array. The base array is the left one ($a1), and if a key is set in both arrays, the right value has precedence. If a value in the left one is an array and also an array in the right one, the function calls itself (recursion). If the left one is an array and the right one exists but is not an array, then the right non-array-value will be used.<br />
<br />
*Any key only appearing in the right one will be ignored* <br />
&nbsp;- as I didn't need values appearing only in the right in my implementation, but if you want that you could make some fast fix.<br />
<br />
function array_merge_recursive_leftsource(&amp;$a1, &amp;$a2) {<br />
&nbsp;&nbsp;&nbsp; $newArray = array();<br />
&nbsp;&nbsp;&nbsp; foreach ($a1 as $key =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!isset($a2[$key])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $newArray[$key] = $v;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_array($v)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!is_array($a2[$key])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $newArray[$key] = $a2[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $newArray[$key] = array_merge_recursive_leftsource($a1[$key], $a2[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $newArray[$key] = $a2[$key];<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $newArray;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="91049""></a>
  <div class="note">
   <strong class="user">michiel at synetic dot nl</strong>
   <a href="#91049" class="date">22-May-2009 10:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A small improvement upon the previously posted array_merge_recursive_distinct functions (based on daniel's version). This implementation preserves the parameter input from the original, you can pass an infinite amount of array's to merge.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function &amp;</span><span class="default">array_merge_recursive_distinct</span><span class="keyword">()<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aArrays </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$aMerged </span><span class="keyword">= </span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$aArrays</span><span class="keyword">); </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aMerged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aMerged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">PR</span><span class="keyword">::</span><span class="default">array_merge_recursive_distinct</span><span class="keyword">(</span><span class="default">$aMerged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">]) : </span><span class="default">$aArrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">][</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aMerged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$aMerged</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89684""></a>
  <div class="note">
   <strong class="user">daniel at danielsmedegaardbuus dot dk</strong>
   <a href="#89684" class="date">19-Mar-2009 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* array_merge_recursive does indeed merge arrays, but it converts values with duplicate<br />
&nbsp;* keys to arrays rather than overwriting the value in the first array with the duplicate<br />
&nbsp;* value in the second array, as array_merge does. I.e., with array_merge_recursive,<br />
&nbsp;* this happens (documented behavior):<br />
&nbsp;* <br />
&nbsp;* array_merge_recursive(array('key' =&gt; 'org value'), array('key' =&gt; 'new value'));<br />
&nbsp;*&nbsp; &nbsp;&nbsp; =&gt; array('key' =&gt; array('org value', 'new value'));<br />
&nbsp;* <br />
&nbsp;* array_merge_recursive_distinct does not change the datatypes of the values in the arrays.<br />
&nbsp;* Matching keys' values in the second array overwrite those in the first array, as is the<br />
&nbsp;* case with array_merge, i.e.:<br />
&nbsp;* <br />
&nbsp;* array_merge_recursive_distinct(array('key' =&gt; 'org value'), array('key' =&gt; 'new value'));<br />
&nbsp;*&nbsp; &nbsp;&nbsp; =&gt; array('key' =&gt; array('new value'));<br />
&nbsp;* <br />
&nbsp;* Parameters are passed by reference, though only for performance reasons. They're not<br />
&nbsp;* altered by this function.<br />
&nbsp;* <br />
&nbsp;* @param array $array1<br />
&nbsp;* @param mixed $array2<br />
&nbsp;* @return array<br />
&nbsp;* @author daniel@danielsmedegaardbuus.dk<br />
&nbsp;*/<br />
</span><span class="keyword">function &amp;</span><span class="default">array_merge_recursive_distinct</span><span class="keyword">(array &amp;</span><span class="default">$array1</span><span class="keyword">, &amp;</span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">null</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$merged </span><span class="keyword">= </span><span class="default">$array1</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array2 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ? </span><span class="default">array_merge_recursive_distinct</span><span class="keyword">(</span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) : </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$merged</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp; <br />
&nbsp; return </span><span class="default">$merged</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88707""></a>
  <div class="note">
   <strong class="user">miniscalope at gmail dot com</strong>
   <a href="#88707" class="date">04-Feb-2009 12:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I would merge 2 arrays but keep the values unique in the result array.<br />
I hope this will help...<br />
<span class="default">&lt;?php <br />
<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive_unique</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array2 </span><span class="keyword">AS </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!isset(</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">][] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] != </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = array(</span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">], </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array1</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] =&nbsp; &nbsp; </span><span class="default">array_merge_recursive_unique</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset(</span><span class="default">$k</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$array1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="88373""></a>
  <div class="note">
   <strong class="user">remy dot damour at -please-no-spam-laposte dot net</strong>
   <a href="#88373" class="date">21-Jan-2009 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If what you want is merge all values of your array that are arrays themselves to get a resulting array of depth one, then you're more looking for array_flatten function.<br />
<br />
Unfortunately I did not find such native function in php, here is the one I wrote:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* Flatten an array so that resulting array is of depth 1.<br />
&nbsp;* If any value is an array itself, it is merged by parent array, and so on.<br />
&nbsp;*<br />
&nbsp;* @param array $array<br />
&nbsp;* @param bool $preserver_keys OPTIONAL When true, keys are preserved when mergin nested arrays (=&gt; values with same key get overwritten)<br />
&nbsp;* @return array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$preserve_keys </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">$preserve_keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// ensure keys are numeric values to avoid overwritting when array_merge gets called<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$flattened_array </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flattened_array </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$flattened_array</span><span class="keyword">, </span><span class="default">call_user_func</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">, </span><span class="default">$v</span><span class="keyword">, </span><span class="default">$preserve_keys</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif (</span><span class="default">$preserve_keys</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flattened_array</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flattened_array</span><span class="keyword">[] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$flattened_array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// example<br />
</span><span class="default">$a </span><span class="keyword">= array (</span><span class="string">'k1' </span><span class="keyword">=&gt; </span><span class="string">'a'</span><span class="keyword">, </span><span class="string">'k2' </span><span class="keyword">=&gt; array(</span><span class="string">'k1' </span><span class="keyword">=&gt; </span><span class="string">'b'</span><span class="keyword">, </span><span class="string">'k4' </span><span class="keyword">=&gt; array(</span><span class="string">'k3' </span><span class="keyword">=&gt; </span><span class="string">'c'</span><span class="keyword">)));<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">)); </span><span class="comment">// output: array(0 =&gt; 'a', 1 =&gt; 'b', 2 =&gt; 'c')<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">)); </span><span class="comment">// output: array('k1' =&gt; 'b', 'k3' =&gt; 'c') // first 'k1' value gets overwritten by nested 'k1' value<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87518""></a>
  <div class="note">
   <strong class="user">phil dot kemmeter at gmail dot com</strong>
   <a href="#87518" class="date">08-Dec-2008 07:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've edit this version even a little bit more, so that the function does not override any values, but inserts them at a free key in the array:<br />
<br />
function my_array_merge ($arr,$ins) {<br />
&nbsp;&nbsp;&nbsp; if(is_array($arr))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($ins)) foreach($ins as $k=&gt;$v)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset($arr[$k])&amp;&amp;is_array($v)&amp;&amp;is_array($arr[$k]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $arr[$k] = my_array_merge($arr[$k],$v);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // This is the new loop :)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; while (isset($arr[$k]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $k++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $arr[$k] = $v;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif(!is_array($arr)&amp;&amp;(strlen($arr)==0||$arr==0))<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $arr=$ins;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return($arr);<br />
}<br />
<br />
Example:<br />
<br />
$array1 = array(<br />
&nbsp;&nbsp;&nbsp; 100 =&gt; array(30),<br />
&nbsp;&nbsp;&nbsp; 200 =&gt; array(20, 30)<br />
);<br />
<br />
$array2 = array(<br />
&nbsp;&nbsp;&nbsp; 100 =&gt; array(40),<br />
&nbsp;&nbsp;&nbsp; 201 =&gt; array(60, 30)<br />
);<br />
<br />
print_r(my_array_merge($array1,$array2));<br />
<br />
Output with array_merge_recursive:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 20<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 40<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
This is not the result, I expect from a MERGE-Routine...<br />
<br />
Output with the current function:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [100] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 40<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp;&nbsp; [200] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 20<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 30<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
)<br />
<br />
This is what I want :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85409""></a>
  <div class="note">
   <strong class="user">scott dot clark at vizioninteractive dot com</strong>
   <a href="#85409" class="date">28-Aug-2008 10:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Needed some way to fuse two arrays together and found a function here (below from thomas) and decided to update it even further to be a little more smart.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">my_array_merge </span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">,</span><span class="default">$ins</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$ins</span><span class="keyword">)) foreach(</span><span class="default">$ins </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">])&amp;&amp;</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)&amp;&amp;</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">my_array_merge</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">],</span><span class="default">$v</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else </span><span class="default">$arr</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; elseif(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)&amp;&amp;(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)==</span><span class="default">0</span><span class="keyword">||</span><span class="default">$arr</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">=</span><span class="default">$ins</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">$arr</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82976""></a>
  <div class="note">
   <strong class="user">thomas at n-o-s-p-a-m dot thoftware dot de</strong>
   <a href="#82976" class="date">05-May-2008 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a simple, three line approach.<br />
<br />
Short description: If one of the Arguments isn't an Array, first Argument is returned. If an Element is an Array in both Arrays, Arrays are merged recursively, otherwise the element in $ins will overwrite the element in $arr (regardless if key is numeric or not). This also applys to Arrays in $arr, if the Element is scalar in $ins (in difference to the previous approach).<br />
<br />
&nbsp; function array_insert($arr,$ins) {<br />
&nbsp;&nbsp;&nbsp; # Loop through all Elements in $ins:<br />
&nbsp;&nbsp;&nbsp; if (is_array($arr) &amp;&amp; is_array($ins)) foreach ($ins as $k =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; # Key exists in $arr and both Elemente are Arrays: Merge recursively.<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (isset($arr[$k]) &amp;&amp; is_array($v) &amp;&amp; is_array($arr[$k])) $arr[$k] = array_insert($arr[$k],$v);<br />
&nbsp;&nbsp; &nbsp;&nbsp; # Place more Conditions here (see below)<br />
&nbsp;&nbsp; &nbsp;&nbsp; # ...<br />
&nbsp;&nbsp; &nbsp;&nbsp; # Otherwise replace Element in $arr with Element in $ins:<br />
&nbsp;&nbsp; &nbsp;&nbsp; else $arr[$k] = $v;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; # Return merged Arrays:<br />
&nbsp;&nbsp;&nbsp; return($arr);<br />
&nbsp; }<br />
<br />
In Addition to felix dot ospald at gmx dot de in my opinion there is no need to compare keys with type-casting, as a key always is changed into an integer if it could be an integer. Just try<br />
<br />
$a = array('1'=&gt;'1');<br />
echo gettype(key($a));<br />
<br />
It will echo 'integer'. So for having Integer-Keys simply appended instead of replaced, add the Line:<br />
<br />
&nbsp; elseif (is_int($k)) $arr[] = $v;<br />
<br />
A Condition I used is:<br />
<br />
&nbsp; elseif (is_null($v)) unset($arr[$k]);<br />
<br />
So a NULL-Value in $ins will unset the correspondig Element in $arr (which is different to setting it to NULL!). This may be another Addition to felix dot ospald at gmx dot de: The absolute correct way to check for a Key existing in an Array is using array_key_exists() (not needed in the current context, as isset() is combined with is_array()). array_key_exists() will return TRUE even if the Value of the Element is NULL.<br />
<br />
And the last one: If you want to use this approach for more than 2 Arrays, simply use this:<br />
<br />
&nbsp; function array_insert_mult($arr) {<br />
&nbsp;&nbsp;&nbsp; # More than 1 Argument: Append all Arguments.<br />
&nbsp;&nbsp;&nbsp; if (func_num_args() &gt; 1) foreach (array_slice(func_get_args(),1) as $ins) $arr = array_insert($arr,$ins);<br />
&nbsp;&nbsp;&nbsp; # Return merged Arrays:<br />
&nbsp;&nbsp;&nbsp; return($arr);<br />
&nbsp; }<br />
<br />
And if you worry about maintaining References: Simply use $ins[$k] instead of $v when assigning a Value/using a Value as Argument.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81409""></a>
  <div class="note">
   <strong class="user">felix dot ospald at gmx dot de</strong>
   <a href="#81409" class="date">26-Feb-2008 08:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you desire correct and performant behaviour (in contrast to the other postings) use this code. It works as documented above.<br />
If you want that keys are always perserved and not appended or renumbered if they are numeric comment out the "if (((string) $key) === ((string) intval($key)))" case.<br />
@spambegone at cratemedia dot com: using empty is not right way to check if an item is in the array use isset!<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive2</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">func_get_args</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$narrays </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// check arguments<br />
&nbsp;&nbsp;&nbsp; // comment out if more performance is necessary (in this case the foreach loop will trigger a warning if the argument is not an array)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$narrays</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// also array_merge_recursive returns nothing in this case<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Argument #' </span><span class="keyword">. (</span><span class="default">$i</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">) . </span><span class="string">' is not an array - trying to merge array with scalar! Returning null!'</span><span class="keyword">, </span><span class="default">E_USER_WARNING</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// the first array is in the output set in every case<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// merege $ret with the remaining arrays<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$narrays</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (((string) </span><span class="default">$key</span><span class="keyword">) === ((string) </span><span class="default">intval</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">))) { </span><span class="comment">// integer or string as integer key - append<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else { </span><span class="comment">// string key - megre<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; isset(</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if $ret[$key] is not an array you try to merge an scalar value with an array - the result is not defined (incompatible arrays)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // in this case the call will trigger an E_USER_WARNING and the $ret[$key] will be null.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">array_merge_recursive2</span><span class="keyword">(</span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="comment">// Examples:<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge_recursive2</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">,</span><span class="string">'C' </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)), array(</span><span class="string">'D'</span><span class="keyword">,</span><span class="string">'C' </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">))));<br />
</span><span class="comment">/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; A<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp;&nbsp; [C] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [4] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; D<br />
)*/<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge_recursive2</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">,</span><span class="string">'0' </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">)), array(</span><span class="string">'D'</span><span class="keyword">,</span><span class="string">'0' </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">,array(</span><span class="default">4</span><span class="keyword">)))));<br />
</span><span class="comment">/*<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; B<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)*/<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_merge_recursive2</span><span class="keyword">(array(</span><span class="string">'A' </span><span class="keyword">=&gt; array(</span><span class="string">'A' </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">)), array(</span><span class="string">'A' </span><span class="keyword">=&gt; array(</span><span class="string">'A' </span><span class="keyword">=&gt; array(</span><span class="default">2</span><span class="keyword">)))));<br />
</span><span class="comment">/*<br />
Warning: Argument #1 is not an array - trying to merge array with scalar! Returning null! in ... on line ...<br />
*/<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">array_merge_recursive2</span><span class="keyword">(array(</span><span class="string">'A' </span><span class="keyword">=&gt; array(</span><span class="string">'A' </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">)), array(</span><span class="string">'A' </span><span class="keyword">=&gt; array(</span><span class="string">'A' </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">))));<br />
</span><span class="comment">/*<br />
array(1) { ["A"]=&gt;&nbsp; array(1) { ["A"]=&gt;&nbsp; NULL } }<br />
*/<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81038""></a>
  <div class="note">
   <strong class="user">spambegone at cratemedia dot com</strong>
   <a href="#81038" class="date">12-Feb-2008 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've tried these array_merge_recursive functions without much success. Maybe it's just me but they don't seem to actually go more than one level deep? As with all things, its usually easier to write your own, which I did and it seems to work just the way I wanted. Anyways, my function hasn't been tested extensively, but it's a simple function, so in hopes that this might be useful to someone else I'm sharing.<br />
<br />
Also, the PHP function array_merge_recursive() didn't work for my purposes because it didn't overwrite the values like I needed it to. You know how it works, it just turns it into an array with multiple values... not helpful if your code is expecting one string.<br />
<br />
function array_merge_recursive_unique($array1, $array2) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // STRATEGY<br />
&nbsp;&nbsp;&nbsp; /*<br />
&nbsp;&nbsp;&nbsp; Merge array1 and array2, overwriting 1st array values with 2nd array <br />
&nbsp;&nbsp;&nbsp; values where they overlap. Use array1 as the base array and then add <br />
&nbsp;&nbsp;&nbsp; in values from array2 as they exist.<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; Walk through each value in array2 and see if a value corresponds<br />
&nbsp;&nbsp;&nbsp; in array1. If it does, overwrite with second array value. If it's an <br />
&nbsp;&nbsp;&nbsp; array, recursively execute this function and return the value. If it's <br />
&nbsp;&nbsp;&nbsp; a string, overwrite the value from array1 with the value from array2. <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; If a value exists in array2 that is not found in array1, add it to array1.<br />
&nbsp;&nbsp;&nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; // LOOP THROUGH $array2<br />
&nbsp;&nbsp;&nbsp; foreach($array2 AS $k =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // CHECK IF VALUE EXISTS IN $array1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!empty($array1[$k])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // IF VALUE EXISTS CHECK IF IT'S AN ARRAY OR A STRING<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!is_array($array2[$k])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // OVERWRITE IF IT'S A STRING<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array1[$k]=$array2[$k];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // RECURSE IF IT'S AN ARRAY<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array1[$k] = array_merge_recursive_unique($array1[$k], $array2[$k]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // IF VALUE DOESN'T EXIST IN $array1 USE $array2 VALUE<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array1[$k]=$v;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; unset($k, $v);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $array1;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73843""></a>
  <div class="note">
   <strong class="user">paha at paha dot hu</strong>
   <a href="#73843" class="date">12-Mar-2007 09:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In this version the values are overwritten only if they are not an array.&nbsp; If the value is an array, its elements will be merged/overwritten:<br />
<br />
// array_merge_recursive which override value with next value.<br />
// based on: <a href="http://www.php.net/manual/hu/function.array-merge-recursive.php 09-Dec-2006 03:38" rel="nofollow" target="_blank">http://www.php.net/manual/hu/function.array-merge-recursive.php 09-Dec-2006 03:38</a><br />
function array_merge_recursive_unique($array0, $array1)<br />
{<br />
&nbsp;&nbsp;&nbsp; $arrays = func_get_args();<br />
&nbsp;&nbsp;&nbsp; $remains = $arrays;<br />
<br />
&nbsp;&nbsp;&nbsp; // We walk through each arrays and put value in the results (without<br />
&nbsp;&nbsp;&nbsp; // considering previous value).<br />
&nbsp;&nbsp;&nbsp; $result = array();<br />
<br />
&nbsp;&nbsp;&nbsp; // loop available array<br />
&nbsp;&nbsp;&nbsp; foreach($arrays as $array) {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // The first remaining array is $array. We are processing it. So<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // we remove it from remaing arrays.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array_shift($remains);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // We don't care non array param, like array_merge since PHP 5.0.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($array)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // Loop values<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $key =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(is_array($value)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // we gather all remaining arrays that have such key available<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $args = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($remains as $remain) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(array_key_exists($key, $remain)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_push($args, $remain[$key]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(count($args) &gt; 2) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // put the recursion<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$key] = call_user_func_array(__FUNCTION__, $args);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach($value as $vkey =&gt; $vval) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$key][$vkey] = $vval;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // simply put the value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $result[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $result;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71396""></a>
  <div class="note">
   <strong class="user">randallgirard at hotmail dot com</strong>
   <a href="#71396" class="date">26-Nov-2006 10:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I wrote the following for merging arrays, in my project mainly for configuration... Thought someone else might find it usefull.<br />
<br />
function array_merge_recursive_keys( $first, $second, $greedy=false) {<br />
&nbsp;&nbsp; $inter = array_intersect_assoc(array_keys($first), array_keys($second)); # shaired keys<br />
# the idea next, is to strip and append from $second into $first<br />
&nbsp;&nbsp; foreach ( $inter as $key ) {<br />
&nbsp;&nbsp; # recursion if both are arrays<br />
&nbsp;&nbsp; &nbsp;&nbsp; if ( is_array($first[$key]) &amp;&amp; is_array($second[$key]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $first[$key] = array_merge_recursive_keys($first[$key], $second[$key]);<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; # non-greedy array merging:<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if ( is_array($first[$key] &amp;&amp; !$greedy ) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $first[$key][] = $second[$key];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; else if ( is_array($second[$key]) &amp;&amp; !$greedy ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $second[$key][] = $first[$key];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $first[$key] = $second[$key];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; # overwrite...<br />
&nbsp;&nbsp; &nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; $first[$key] = $second[$key];<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset($second[$key]);<br />
&nbsp;&nbsp; }<br />
# merge the unmatching keys onto first<br />
&nbsp;&nbsp; return array_merge($first, $second);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70036""></a>
  <div class="note">
   <strong class="user">thiago dot mata at yahoo dot com dot br</strong>
   <a href="#70036" class="date">30-Sep-2006 09:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_merge_recursive_keep_keys</span><span class="keyword">( </span><span class="default">$arrElement1 </span><span class="keyword">, </span><span class="default">$arrElement2 </span><span class="keyword">, </span><span class="default">$intCount </span><span class="keyword">= </span><span class="default">0 </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrElement1Keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$arrElement1 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrElement2Keys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">( </span><span class="default">$arrElement2 </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrDifKeys1 </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$arrElement1Keys</span><span class="keyword">, </span><span class="default">$arrElement2Keys </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrDifKeys2 </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">( </span><span class="default">$arrElement2Keys</span><span class="keyword">, </span><span class="default">$arrElement1Keys </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrInter&nbsp; &nbsp;&nbsp; </span><span class="keyword">= </span><span class="default">array_intersect</span><span class="keyword">( </span><span class="default">$arrElement1Keys </span><span class="keyword">, </span><span class="default">$arrElement2Keys </span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$arrDifKeys1 </span><span class="keyword">as </span><span class="default">$strKey1</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strKey1 </span><span class="keyword">] = </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strKey1 </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$arrDifKeys2 </span><span class="keyword">as </span><span class="default">$strKey2</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strKey2 </span><span class="keyword">] = </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strKey2 </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$arrInter </span><span class="keyword">as </span><span class="default">$strInterKey </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] ) &amp;&amp; </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] ) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$intCount</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] = </span><span class="default">array_merge_recursive_keep_keys</span><span class="keyword">( </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] , </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] , </span><span class="default">$intCount </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] ) || </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] ) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">][]&nbsp; &nbsp; =&nbsp; </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">][]&nbsp; &nbsp; =&nbsp; </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">][] = </span><span class="default">$arrElement1</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arrNew</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">][] = </span><span class="default">$arrElement2</span><span class="keyword">[ </span><span class="default">$strInterKey </span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$arrNew</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67962""></a>
  <div class="note">
   <strong class="user">smilingrasta</strong>
   <a href="#67962" class="date">07-Jul-2006 07:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function tends to reindex arrays, which is not&nbsp; mentioned in the function description.<br />
<br />
I just tried to run that function on a three dimensional array, containing errormessages.<br />
The first dim. contains the severity of the error ('warn', 'crit') the second dim the linenumber (numerical) and the third one consists of errormessages<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment"># Array printout:<br />
</span><span class="keyword">Array<br />
&nbsp;(<br />
&nbsp;&nbsp; [</span><span class="default">warn</span><span class="keyword">] =&gt; Array&nbsp; </span><span class="comment">// severity (associative)<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp;&nbsp; [</span><span class="default">2</span><span class="keyword">] =&gt; Array&nbsp; </span><span class="comment">// linenumber (numerical)<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; [</span><span class="default">0</span><span class="keyword">] =&gt; </span><span class="string">"Category does not exist" <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] =&gt; </span><span class="string">"Manufacturer does not exist"<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp;)<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
If i now merge two or more of those arrays using array_merge_recursive(), the linenumbers are not conserved. Instead of, they are all renumbered, starting with 0.<br />
<br />
Just thought anyone may want to know about that. :)<br />
regards, smilingrasta</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="43462""></a>
  <div class="note">
   <strong class="user">manicdepressive at mindless dot com</strong>
   <a href="#43462" class="date">22-Jun-2004 04:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Please be aware that under circumstances where you have <br />
both the key and value common between the two arrays at a given node,<br />
array_merge_recursive() will behave differently if that value is NULL,<br />
as opposed to a non-null value.<br />
<br />
i.e., I expected the results of the first two sections below to <br />
have the same structure, but they don't.&nbsp; <br />
If this might apply to you, please see for yourself.<br />
<br />
&lt;pre&gt;<span class="default">&lt;?php<br />
<br />
$a1 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$a3 </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">); <br />
echo </span><span class="string">"\n\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$a1 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="default">NULL</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="default">NULL</span><span class="keyword">);<br />
</span><span class="default">$a3 </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">);<br />
echo </span><span class="string">"\n\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$a1 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="string">'b'</span><span class="keyword">);<br />
</span><span class="default">$a2 </span><span class="keyword">= array(</span><span class="string">'a'</span><span class="keyword">=&gt;</span><span class="default">NULL</span><span class="keyword">);<br />
</span><span class="default">$a3 </span><span class="keyword">= </span><span class="default">array_merge_recursive</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">,</span><span class="default">$a2</span><span class="keyword">);<br />
</span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$a3</span><span class="keyword">);<br />
echo </span><span class="string">"\n\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;</span>&lt;/pre&gt;<br />
<br />
This behavior also occurs if the value is the empty array.<br />
In fact, in the above example, interchanging the empty array with<br />
any and all occurences of NULL will yield the same result.<br />
<br />
&nbsp;&nbsp;&nbsp; code till dawn!&nbsp; -mark</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="42663""></a>
  <div class="note">
   <strong class="user">brian at vermonster dot com</strong>
   <a href="#42663" class="date">25-May-2004 11:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a fairly simple function that replaces while recursing.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* array_merge_recursive2()<br />
&nbsp;*<br />
&nbsp;* Similar to array_merge_recursive but keyed-valued are always overwritten.<br />
&nbsp;* Priority goes to the 2nd array.<br />
&nbsp;*<br />
&nbsp;* @static yes<br />
&nbsp;* @public yes<br />
&nbsp;* @param $paArray1 array<br />
&nbsp;* @param $paArray2 array<br />
&nbsp;* @return array<br />
&nbsp;*/<br />
</span><span class="keyword">function </span><span class="default">array_merge_recursive2</span><span class="keyword">(</span><span class="default">$paArray1</span><span class="keyword">, </span><span class="default">$paArray2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$paArray1</span><span class="keyword">) or !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$paArray2</span><span class="keyword">)) { return </span><span class="default">$paArray2</span><span class="keyword">; }<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$paArray2 </span><span class="keyword">AS </span><span class="default">$sKey2 </span><span class="keyword">=&gt; </span><span class="default">$sValue2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$paArray1</span><span class="keyword">[</span><span class="default">$sKey2</span><span class="keyword">] = </span><span class="default">array_merge_recursive2</span><span class="keyword">(@</span><span class="default">$paArray1</span><span class="keyword">[</span><span class="default">$sKey2</span><span class="keyword">], </span><span class="default">$sValue2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$paArray1</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Examples:<br />
<span class="default">&lt;?php<br />
<br />
$array1 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'liquids' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'water' </span><span class="keyword">=&gt; array(</span><span class="string">'cold'</span><span class="keyword">, </span><span class="string">'fizzy'</span><span class="keyword">, </span><span class="string">'clean'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ,</span><span class="string">'beer' </span><span class="keyword">=&gt; </span><span class="string">'warm'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$array2 </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'liquids' </span><span class="keyword">=&gt; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">'water' </span><span class="keyword">=&gt; </span><span class="string">'hot'<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">,</span><span class="string">'milk' </span><span class="keyword">=&gt; </span><span class="string">'wet'<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">)<br />
);<br />
<br />
</span><span class="default">$result1 </span><span class="keyword">= </span><span class="default">array_merge_recursive2</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">);<br />
</span><span class="default">$result2 </span><span class="keyword">= </span><span class="default">array_merge_recursive2</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">, </span><span class="default">$array1</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Result 1 is:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [liquids] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [water] =&gt; hot<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [beer] =&gt; warm<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [milk] =&gt; wet<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)<br />
<br />
Result 2 is:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [liquids] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [water] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; cold<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; fizzy<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; clean<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [milk] =&gt; wet<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [beer] =&gt; warm<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40452""></a>
  <div class="note">
   <strong class="user">paska at kios dot sk</strong>
   <a href="#40452" class="date">04-Mar-2004 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This emulates replace of $_REQUEST according to variable_order=GPC.<br />
&lt;?<br />
&nbsp;&nbsp;&nbsp; function array_merge_replace($array, $newValues) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($newValues as $key =&gt; $value ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (is_array($value)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset($array[$key])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = array_merge_replace($array[$key], $value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $array;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_GET);<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_POST);<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_COOKIE);<br />
?&gt;<br />
<br />
Useful with stripping backslashes at beginning of main include file:<br />
&lt;?<br />
if (get_magic_quotes_gpc() == 1) {<br />
<br />
&nbsp;&nbsp;&nbsp; function stripMagicSlashes($element) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_array($element)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return array_map("stripMagicSlashes", $element);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return stripslashes($element);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function array_merge_replace($array, $newValues) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ($newValues as $key =&gt; $value ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (is_array($value)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (!isset($array[$key])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = array_merge_replace($array[$key], $value);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$key] = $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $array;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $_GET&nbsp; &nbsp; = array_map("stripMagicSlashes", $_GET);<br />
&nbsp;&nbsp;&nbsp; $_POST&nbsp;&nbsp; = array_map("stripMagicSlashes", $_POST);<br />
&nbsp;&nbsp;&nbsp; $_COOKIE = array_map("stripMagicSlashes", $_COOKIE);<br />
<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_GET);<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_POST);<br />
&nbsp;&nbsp;&nbsp; $_REQUEST = array_merge_replace($_REQUEST, $_COOKIE);<br />
<br />
}<br />
<br />
$GLOBALS['stripped'] = true;<br />
?&gt;<br />
<br />
Based on examples from users from this site.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-map.html">array_map</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-merge.html">array_merge</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
