<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>追加された添字の確認を含めて配列の差を計算する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-count-values.html">array_count_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-key.html">array_diff_key</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-diff-assoc" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_diff_assoc</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5)</p><p class="refpurpose"><span class="refname">array_diff_assoc</span> &mdash; <span class="dc-title">追加された添字の確認を含めて配列の差を計算する</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.array-diff-assoc-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_diff_assoc</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array1</code></span>
   , <span class="methodparam"><span class="type">array</span> <code class="parameter">$array2</code></span>
   [, <span class="methodparam"><span class="type">array</span> <code class="parameter">$...</code></span>
  ] )</div>

  <p class="para rdfs-comment">
   <em><code class="parameter">array1</code></em> を <em><code class="parameter">array2</code></em> と比較し、
   その差を返します。 <span class="function"><a href="function.array-diff.html" class="function">array_diff()</a></span> とは異なり、
   配列のキーも用いて比較を行います。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-diff-assoc-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>


    <dt>

     <span class="term"><em><code class="parameter">array1</code></em></span>
     <dd>

      <p class="para">
       比較元の配列。
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><em><code class="parameter">array2</code></em></span>
     <dd>

      <p class="para">
       比較する対象となる配列。
      </p>
     </dd>

    </dt>


    <dt>

     <span class="term"><em><code class="parameter">...</code></em></span>
     <dd>

      <p class="para">
       さらに比較する対象となる配列。
      </p>
     </dd>

    </dt>


   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-diff-assoc-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <em><code class="parameter">array1</code></em> の要素のうち、
   その他の配列のいずれにも含まれないものだけを残した配列を返します。
  </p>
 </div>




 <div class="refsect1 examples" id="refsect1-function.array-diff-assoc-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4910">
    <p><strong>例1  <span class="function"><strong>array_diff_assoc()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
     この例で、<em>&quot;a&quot; =&gt; &quot;green&quot;</em> の組が両方の配列に現れており、
     このため、この関数の出力には含まれていません。
     これとは異なり、<em>0 =&gt; &quot;red&quot;</em> は出力の中にありますが、
     これは、二番目の引数において <em>&quot;red&quot;</em> が
     <em>1</em> というキーを有しているためです。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"brown"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"yellow"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"red"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [b] =&gt; brown
    [c] =&gt; blue
    [0] =&gt; red
)
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4911">
    <p><strong>例2  <span class="function"><strong>array_diff_assoc()</strong></span> の例</strong></p>
    <div class="example-contents"><p>
     <em class="emphasis">key =&gt; value</em> の組からの二つの値は、
     <em>(string) $elem1 === (string) $elem2 </em>
     が成り立つ場合のみ等しいと見なされます。
     言い替えると、厳密なチェックが行われるため、
     文字列表現が同じである必要があります。
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$array1&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$array2&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"00"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"01"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"2"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_diff_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$array1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$array2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [0] =&gt; 0
    [1] =&gt; 1
    )
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.array-diff-assoc-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <span class="simpara">
    この関数は、N 次元配列の一次元だけを調べます。もちろん、例えば
    <em>array_diff_assoc($array1[0], $array2[0]);</em>
    とすることにより、より深い次元でチェックを行うことも可能です。
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-diff-assoc-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-diff.html" class="function" rel="rdfs-seeAlso">array_diff()</a> - 配列の差を計算する</span></li>
    <li class="member"> <span class="function"><a href="function.array-intersect.html" class="function" rel="rdfs-seeAlso">array_intersect()</a> - 配列の共通項を計算する</span></li>
    <li class="member"> <span class="function"><a href="function.array-intersect-assoc.html" class="function" rel="rdfs-seeAlso">array_intersect_assoc()</a> - 追加された添字の確認も含めて配列の共通項を確認する</span></li>
   </ul>
  </p>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112105""></a>
  <div class="note">
   <strong class="user">Michael Richey</strong>
   <a href="#112105" class="date">04-May-2013 10:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you're looking for a true array_diff_assoc, comparing arrays to determine the difference between two, finding missing values from both, you can use this along with array_merge.<br />
<br />
$a = array('a'=&gt;1,'b'=&gt;2,'c'=&gt;3);<br />
$b = array('a'=&gt;1,'b'=&gt;2,'d'=&gt;4);<br />
print_r(array_diff_assoc($a,$b));<br />
// returns:<br />
array<br />
(<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
)<br />
<br />
print_r(array_diff_assoc($b,$a));<br />
// returns <br />
array<br />
(<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 4<br />
)<br />
<br />
print_r(array_merge(array_diff_assoc($a,$b),array_diff_assoc($b,$a)));<br />
// returns<br />
array<br />
(<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [d] =&gt; 4<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111675""></a>
  <div class="note">
   <strong class="user">Giosh</strong>
   <a href="#111675" class="date">15-Mar-2013 08:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The array_diff_assoc_array from "chinello at gmail dot com" (and others) will not work for arrays with null values. That's because !isset is true when an array key doesn't exists or is set to null.<br />
<br />
(sorry for the changed indent-style)<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">=array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !isset(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) || !</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_diff </span><span class="keyword">= </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( !empty(</span><span class="default">$new_diff</span><span class="keyword">) )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$new_diff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else if( !</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">) || </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] !== </span><span class="default">$value </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$difference</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
And here an example (note index 'b' in the output):<br />
<span class="default">&lt;?php<br />
$a1</span><span class="keyword">=array( </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">null</span><span class="keyword">, </span><span class="string">'c' </span><span class="keyword">=&gt; array( </span><span class="string">'d' </span><span class="keyword">=&gt; </span><span class="default">null </span><span class="keyword">) );<br />
</span><span class="default">$a2</span><span class="keyword">=array( </span><span class="string">'a' </span><span class="keyword">=&gt; </span><span class="default">0</span><span class="keyword">, </span><span class="string">'b' </span><span class="keyword">=&gt; </span><span class="default">null </span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">( </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2 </span><span class="keyword">) );<br />
</span><span class="default">var_dump</span><span class="keyword">( </span><span class="default">chinello_array_diff_assoc_recursive</span><span class="keyword">( </span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2 </span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span>array(1) {<br />
&nbsp; ["c"]=&gt;<br />
&nbsp; array(1) {<br />
&nbsp;&nbsp;&nbsp; ["d"]=&gt;<br />
&nbsp;&nbsp;&nbsp; NULL<br />
&nbsp; }<br />
}<br />
<br />
array(2) {<br />
&nbsp; ["b"]=&gt;<br />
&nbsp; NULL<br />
&nbsp; ["c"]=&gt;<br />
&nbsp; array(1) {<br />
&nbsp;&nbsp;&nbsp; ["d"]=&gt;<br />
&nbsp;&nbsp;&nbsp; NULL<br />
&nbsp; }<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104860""></a>
  <div class="note">
   <strong class="user">news_yodpeirs at thoftware dot de</strong>
   <a href="#104860" class="date">12-Jul-2011 01:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A quite simple (yet not very efficient) way to compare the first level of arrays which have values that are not strings:<br />
array_map('unserialize',array_diff_assoc(array_map('serialize',$arr1),array_map('serialize',$arr2)))<br />
Might be useful for debugging (that's what I use it for).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86607""></a>
  <div class="note">
   <strong class="user">jrajpu10 at gmail dot com</strong>
   <a href="#86607" class="date">25-Oct-2008 09:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_diff_assoc can also be used to find the duplicates in an array<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'4'</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="string">'5'</span><span class="keyword">);<br />
</span><span class="default">$uniques </span><span class="keyword">= </span><span class="default">array_unique</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
</span><span class="comment">// array_diff will not work here, array_diff_assoc works as it takes the key // in account.<br />
</span><span class="default">$dups </span><span class="keyword">= </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$uniques</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$dups</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span><br />
Note: The index of the $dups is not in strict sequential order as expected by C programmer.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75269""></a>
  <div class="note">
   <strong class="user">cedric at daneel dot net</strong>
   <a href="#75269" class="date">21-May-2007 03:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To diff between n-dimensional array, juste use this : <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_values</span><span class="keyword">(</span><span class="default">$tab1</span><span class="keyword">, </span><span class="default">$tab2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$tab1 </span><span class="keyword">as </span><span class="default">$values</span><span class="keyword">) if(! </span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$values</span><span class="keyword">, </span><span class="default">$tab2</span><span class="keyword">)) </span><span class="default">$result</span><span class="keyword">[] = </span><span class="default">$values</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74428""></a>
  <div class="note">
   <strong class="user">contact at pascalopitz dot com</strong>
   <a href="#74428" class="date">11-Apr-2007 01:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The direction of the arguments does actually make a difference:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; </span><span class="string">'z'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'t' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">$b </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'x' </span><span class="keyword">=&gt; </span><span class="string">'x'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'y' </span><span class="keyword">=&gt; </span><span class="string">'y'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'z' </span><span class="keyword">=&gt; </span><span class="string">'z'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'t' </span><span class="keyword">=&gt; </span><span class="string">'t'</span><span class="keyword">,<br />
&nbsp;&nbsp;&nbsp; </span><span class="string">'g' </span><span class="keyword">=&gt; </span><span class="string">'g'</span><span class="keyword">,<br />
);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
echoes:<br />
<br />
Array<br />
(<br />
)<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [g] =&gt; g<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73972""></a>
  <div class="note">
   <strong class="user">chinello at gmail dot com</strong>
   <a href="#73972" class="date">19-Mar-2007 07:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The following will recursively do an array_diff_assoc, which will calculate differences on a multi-dimensional level.&nbsp; This not display any notices if a key don't exist and if error_reporting is set to E_ALL:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(!isset(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_diff </span><span class="keyword">= </span><span class="default">array_diff_assoc_recursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$new_diff </span><span class="keyword">!= </span><span class="default">FALSE</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$new_diff</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif(!isset(</span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]) || </span><span class="default">$array2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] != </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$difference</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return !isset(</span><span class="default">$difference</span><span class="keyword">) ? </span><span class="default">0 </span><span class="keyword">: </span><span class="default">$difference</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
[NOTE BY danbrown AT php DOT net: This is a combination of efforts from previous notes deleted.&nbsp; Contributors included (Michael Johnson), (jochem AT iamjochem DAWT com), (sc1n AT yahoo DOT com), and (anders DOT carlsson AT mds DOT mdh DOT se).]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="66837""></a>
  <div class="note">
   <strong class="user">Alexander Podgorny</strong>
   <a href="#66837" class="date">30-May-2006 11:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
NOTE: the diff_array also removes all the duplicate values that match to the values in the second array:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $array1 </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"b"</span><span class="keyword">,</span><span class="string">"c"</span><span class="keyword">,</span><span class="string">"a"</span><span class="keyword">,</span><span class="string">"a"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$array2 </span><span class="keyword">= array(</span><span class="string">"a"</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$array1</span><span class="keyword">,</span><span class="default">$array2</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// yields: array("b","c") the duplicate "a" values are removed <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="48924""></a>
  <div class="note">
   <strong class="user">benjamin at moonfactory dot co dot jp</strong>
   <a href="#48924" class="date">12-Jan-2005 06:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi all,<br />
For php versions &lt; 4.3...<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="comment">/**<br />
&nbsp;* array_diff_assoc for version &lt; 4.3<br />
&nbsp;**/<br />
</span><span class="keyword">if (!</span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_diff_assoc'</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_diff_assoc</span><span class="keyword">(</span><span class="default">$a1</span><span class="keyword">, </span><span class="default">$a2</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$a1 </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(isset(</span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((string) </span><span class="default">$value </span><span class="keyword">!== (string) </span><span class="default">$a2</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">])<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$r</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$r </span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="31926""></a>
  <div class="note">
   <strong class="user">carl at thep dot lu dot se</strong>
   <a href="#31926" class="date">09-May-2003 11:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To unset elements in an array if you know the keys but not the values, you can do:<br />
<br />
<span class="default">&lt;?php<br />
$a </span><span class="keyword">= array(</span><span class="string">"foo"</span><span class="keyword">, </span><span class="string">"bar"</span><span class="keyword">, </span><span class="string">"baz"</span><span class="keyword">, </span><span class="string">"quux"</span><span class="keyword">);<br />
</span><span class="default">$b </span><span class="keyword">= array(</span><span class="default">1</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">); </span><span class="comment">// Elements to get rid of<br />
<br />
</span><span class="keyword">foreach(</span><span class="default">$b </span><span class="keyword">as </span><span class="default">$e</span><span class="keyword">)<br />
&nbsp; unset(</span><span class="default">$a</span><span class="keyword">[</span><span class="default">$e</span><span class="keyword">]);<br />
</span><span class="default">?&gt;<br />
</span><br />
Of course this makes most sense if $b has many elements or is dynamically generated.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-count-values.html">array_count_values</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-diff-key.html">array_diff_key</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
