<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>定義されたエラー処理ルーチンにエラーメッセージを送信する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.error-get-last.html">error_get_last</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.error-reporting.html">error_reporting</a></div>
 <div class="up"><a href="ref.errorfunc.html">エラー処理関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.error-log" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">error_log</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">error_log</span> &mdash; <span class="dc-title">定義されたエラー処理ルーチンにエラーメッセージを送信する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.error-log-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><strong>error_log</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$message</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$message_type</code><span class="initializer"> = 0</span></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$destination</code></span>
   [, <span class="methodparam"><span class="type">string</span> <code class="parameter">$extra_headers</code></span>
  ]]] )</div>

  <p class="para rdfs-comment">
   エラーメッセージを Web サーバーのエラーログあるいはファイルに送ります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.error-log-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">message</code></em></span>
     <dd>

      <p class="para">
       ログに記録されるエラーメッセージ。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">message_type</code></em></span>
     <dd>

      <p class="para">
       メッセージをどこに送るのかを指定します。以下の中から指定できます。
      </p>
      <p class="para">
       <table class="doctable table">
        <caption><strong> <span class="function"><strong>error_log()</strong></span> ログタイプ</strong></caption>
        
         <tbody class="tbody">
          <tr>
           <td>0</td>
           <td>
            <em><code class="parameter">message</code></em> は、オペレーティング・システム
            のシステムログのメカニズムまたはファイルのいずれかを使って
            PHP のシステム・ロガーに送られます。どちらが使われるかは、
            設定ディレクティブ <a href="errorfunc.configuration.html#ini.error-log" class="link">error_log</a> 
            の内容により決定されます。これはデフォルトのオプションです。
           </td>
          </tr>

          <tr>
           <td>1</td>
           <td>
            <em><code class="parameter">message</code></em> は、<em><code class="parameter">destination
            </code></em> パラメータで指定されたアドレスに、電子メール
            により送られます。このメッセージタイプの場合にのみ、
            4 番目のパラメータである <em><code class="parameter">extra_headers</code></em>
            が使われます。
           </td>
          </tr>

          <tr>
           <td>2</td>
           <td>
            このオプションは存在しません。
           </td>
          </tr>

          <tr>
           <td>3</td>
           <td>
            <em><code class="parameter">message</code></em> は <em><code class="parameter">destination
            </code></em> で指定されたファイルに追加されます。
            明示的に指定しない限り、<em><code class="parameter">message</code></em> の
            最後には改行文字は追加されません。
           </td>
          </tr>

          <tr>
           <td>4</td>
           <td>
           <em><code class="parameter">message</code></em> は、直接 SAPI
           のログ出力ハンドラに送信されます。
           </td>
          </tr>

         </tbody>
        
       </table>

      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">destination</code></em></span>
     <dd>

      <p class="para">
       メッセージの送信先。その設定は、上で説明している
       <em><code class="parameter">message_type</code></em> パラメータの値によります。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><em><code class="parameter">extra_headers</code></em></span>
     <dd>

      <p class="para">
       追加のヘッダ。<em><code class="parameter">message_type</code></em> パラメータが
       <em>1</em> に設定される場合に利用されます。
       このメッセージタイプは、 <span class="function"><a href="function.mail.html" class="function">mail()</a></span> と同様に
       内部関数を利用します。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.error-log-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <strong><code>TRUE</code></strong> を、失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.error-log-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
     <tr>
       <td>5.2.7</td>
       <td>
        <em><code class="parameter">message_type</code></em> の値として 4 が使用できるようになりました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.error-log-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-449">
    <p><strong>例1  <span class="function"><strong>error_log()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;データベースに接続できない場合、<br />//&nbsp;サーバーログを通してエラーを通知する。<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">Ora_Logon</span><span style="color: #007700">(</span><span style="color: #0000BB">$username</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$password</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"オラクルのデータベースが使用できません!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;FOO&nbsp;に失敗したら、管理者に&nbsp;email&nbsp;で通知する<br /></span><span style="color: #007700">if&nbsp;(!(</span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">allocate_new_foo</span><span style="color: #007700">()))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"大変です。FOO&nbsp;に失敗しました!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"operator@example.com"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;これ以外の&nbsp;error_log()&nbsp;のコール方法：<br /></span><span style="color: #0000BB">error_log</span><span style="color: #007700">(</span><span style="color: #DD0000">"大変だ!"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"/var/tmp/my-errors.log"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113589""></a>
  <div class="note">
   <strong class="user">sudanisayfree at gmail dot com</strong>
   <a href="#113589" class="date">02-Nov-2013 11:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
how can i check that my php script fine without getting error ?<br />
<br />
which support fantastco or fant?stco or etc</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107832""></a>
  <div class="note">
   <strong class="user">irishado at hotmail dot com</strong>
   <a href="#107832" class="date">08-Mar-2012 06:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For beginners here is an example that will let you add audit code through your program then choose which audits get logged.&nbsp; helps keep your code clean as you can add as many adit calls as you want and the configure deals with them<br />
&lt;code&gt;<br />
&nbsp;&nbsp;&nbsp; // binary values<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_NORMAL",1);&nbsp; &nbsp; &nbsp;&nbsp; // 00001<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_DB_INSERT",2);&nbsp; &nbsp; // 00010<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_DB_UPDATE",4);&nbsp; &nbsp; // 00100<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_DB_EXTRACT",8);&nbsp;&nbsp; // 01000<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_DB_DELETE",16);&nbsp;&nbsp; // 10000<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // define some types of audit level <br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_JUST_DB", AUDIT_DB_INSERT + AUDIT_DB_UPDATE + AUDIT_DB_EXTRACT + AUDIT_DB_DELETE); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 11110<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_ALL",31);&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // all possible options<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 11111<br />
&nbsp;&nbsp;&nbsp; define ("AUDIT_LEVEL",AUDIT_JUST_DB);// Choose the audit level to user<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; $GLOBALS["CODEX"]= Array(1 =&gt; "Normal", 2 =&gt; "DB_INSERT", 4 =&gt; "DB_UPDATE", 8 =&gt; "DB_EXTRACT", 16 =&gt; "DB_DELETE");<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; define ("LOG_PATH", "/temp/mylog");<br />
&nbsp;&nbsp;&nbsp; /** <br />
&nbsp;&nbsp; &nbsp;&nbsp; * Add an audit to the log<br />
&nbsp;&nbsp; &nbsp;&nbsp; * <br />
&nbsp;&nbsp; &nbsp;&nbsp; * Some Constants Used<br />
&nbsp;&nbsp; &nbsp;&nbsp; * <br />
&nbsp;&nbsp; &nbsp;&nbsp; * $GLOBALS["CODEX"] is an array of short descriptions for each audit type so that the log reads better.<br />
&nbsp;&nbsp; &nbsp;&nbsp; * <br />
&nbsp;&nbsp; &nbsp;&nbsp; *<br />
&nbsp;&nbsp; &nbsp;&nbsp; * use and AND statement to compare the type of information you are wanting to audit and the level that you have told your program to record<br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; type, level&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; AUDIT_NORMAL&nbsp; &nbsp; &amp; AUDIT_LEVEL&nbsp; = 00000&nbsp; ie 00001 &amp; 11110 === 00000&nbsp; ( Do not log )<br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; AUDIT_DB_UPDATE &amp; AUDIT_LEVEL&nbsp; = 00100&nbsp; ie 00100 &amp; 11110 === 00100&nbsp; ( Add to log )<br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; AUDIT_DB_INSERT &amp; AUDIT_LEVEL&nbsp; = 00010&nbsp; ie 00010 &amp; 11110 === 00010&nbsp; ( Add to log )<br />
&nbsp;&nbsp; &nbsp;&nbsp; * <br />
&nbsp;&nbsp; &nbsp;&nbsp; *&nbsp; So when you AND a interger with a MASK in this case the AUDIT_LEVEL <br />
&nbsp;&nbsp; &nbsp;&nbsp; * @access public<br />
&nbsp;&nbsp; &nbsp;&nbsp; * @author IrishAdo &lt;irishado@hotmail.com&gt;<br />
&nbsp;&nbsp; &nbsp;&nbsp; * @param String Class you were in<br />
&nbsp;&nbsp; &nbsp;&nbsp; * @param String Type of Audit information<br />
&nbsp;&nbsp; &nbsp;&nbsp; * @param String Message<br />
&nbsp;&nbsp; &nbsp;&nbsp; **/<br />
&nbsp;&nbsp;&nbsp; public function __AddAudit($class, $typeof, $msg){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ((AUDIT_LEVEL &amp; $typeof)*1 === $typeof &amp;&amp; AUDIT_LEVEL != AUDIT_NONE){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $path = LOG_PATH . date("Ymd.H") . ".audit.log";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $fp = fopen($path ,"a");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if($fp){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $usr = $_SESSION["name"];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ip&nbsp;&nbsp; = $_SERVER["REMOTE_HOST"];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $file = $_SERVER["SCRIPT_NAME"];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fwrite($fp, "". $GLOBALS["CODEX"][$typeof]."\t" . Date("r") . "\t$ip\t$file\t$class\t$usr\t$msg\r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fclose($fp);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; print "Unable to write to file $path.";<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; exit();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&lt;/code&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97546""></a>
  <div class="note">
   <strong class="user">roychri at php dot net</strong>
   <a href="#97546" class="date">25-Apr-2010 06:02</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
There is a limit on the maximum length that you can pass as the $message.<br />
<br />
The default seem to be 1024 but can be changed by adjusting the value of the runtime configuration value of 'log_errors_max_len'.<br />
<br />
More details here:<br />
<a href="http://www.php.net/manual/en/errorfunc.configuration.php" rel="nofollow" target="_blank">http://www.php.net/manual/en/errorfunc.configuration.php</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97043""></a>
  <div class="note">
   <strong class="user">Scott R</strong>
   <a href="#97043" class="date">29-Mar-2010 10:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When starting Apache from a user context other than Apache's runtime user, the error log file (if one is specified) may be created under the starting user if it did not previously exist.<br />
<br />
For example, I had specified the incorrect filename for my browscap.ini file, and would only see this error in the log file upon each restart of Apache.&nbsp; Because of this, I assumed I'd configured logging correctly:<br />
<br />
[24-Feb-2010 12:33:04] PHP Warning:&nbsp; Cannot open '/etc/php5/apache/lite_php_browscap.ini' for reading in Unknown on line 0<br />
<br />
No other errors would log at runtime even though I had originally set the owner of the log directory to www-data (Apache runs under this user context).&nbsp; My file (error.log) was being created with the owner = root, because I had restarted the apache2 service as root after configuring the log file location.&nbsp; (I made the poor assumption that since PHP/Apache had created the file it was created by www-data, so I hadn't looked).<br />
<br />
Changing owner of the log file to the correct user (i.e. www-data) fixed the problem.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96383""></a>
  <div class="note">
   <strong class="user">kevindougans at gmail dot com</strong>
   <a href="#96383" class="date">24-Feb-2010 11:19</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Advice to novices: This function works great along with "tail" which is a unix command to watch a log file live. There are versions of Tail for Windows too, like Tail for Win32 or Kiwi Log Viewer.<br />
<br />
Using both error_log() and tail to view the php_error.log you can debug code without having to worry so much about printing debug messages to the screen and who they might be seen by.<br />
<br />
Further Note: This works even better when you have two monitors setup. One for your browser and IDE and the other for viewing the log files update live as you go.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="95031""></a>
  <div class="note">
   <strong class="user">SmokeyDaBandit</strong>
   <a href="#95031" class="date">09-Dec-2009 10:29</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This had me hunting for a while till I figured this out.&nbsp; What ever folder you want your logs deposited to, don't create the log file yourself, let php do it for you.&nbsp; For some reason, if the log file already exists and it's 0 KB, PHP will try to re-create the log file and fail in the process.&nbsp; It never attempts to write to the pre-existing empty file, just fails on folder creation.&nbsp; Might be do to the folder permissions I have on windows, but this is what I found with read/write/modify permissions for IIS_IUSRS on Win2008.&nbsp; Once PHP has written to its self-created file successfully, it will append to the file on new errors.&nbsp; Process Monitor is my friend :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93286""></a>
  <div class="note">
   <strong class="user">daniel dot fukuda at gmail dot com</strong>
   <a href="#93286" class="date">01-Sep-2009 02:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you have a problem with log file permission *silently*<br />
it's best to leave error_log directive unset so errors will be written in your Apache log file for current VirtualHost.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="93164""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#93164" class="date">26-Aug-2009 07:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After scouring the internet for getting event logging to <br />
work in syslog on Windows 2003, I found the following <br />
from this post and was able to successfully get Windows <br />
Event Viewer to log PHP errors/notices:<br />
<br />
<a href="http://forums.iis.net/p/1159662/1912015.aspx#1913338" rel="nofollow" target="_blank">http://forums.iis.net/p/1159662/1912015.aspx#1913338</a><br />
<br />
&nbsp;&nbsp; 1. Copy the PHP 5 binaries to "C:\php".<br />
&nbsp;&nbsp; 2. Right-click My Computer and select Properties to bring <br />
up the Computer Properties dialog. Switch to the Advanced <br />
tab and click Environment Variables. Find the system <br />
environment variable PATH, edit it and add ";C:\php" <br />
(without the quotes) to the end.<br />
&nbsp;&nbsp; 3. Make sure that the configuration file "php.ini" resides <br />
in the directory "C:\php" and contains the correct path <br />
settings.<br />
&nbsp;&nbsp; 4. DELETE any old "php.ini" files from "C:\WINDOWS" <br />
and other directories.<br />
&nbsp;&nbsp; 5. Open REGEDIT, navigate to the key <br />
"HKLM\SOFTWARE\PHP" and DELETE the string value <br />
"IniFilePath" from there. It is outdated and no longer <br />
necessary!<br />
&nbsp;&nbsp; 6. Modify NTFS security permissions of the directory <br />
"C:\php" to give Read and Execute permissions to (1) the <br />
IIS Guest Account and (2) the group IIS_WPG.<br />
&nbsp;&nbsp; 7. Modify NTFS security permissions of the directories <br />
"C:\php\session" and "C:\php\upload" to give additional <br />
Modify permissions to (1) the IIS Guest Account and (2) <br />
the group IIS_WPG.<br />
&nbsp;&nbsp; 8. Navigate to the registry key <br />
"HKLM\SYSTEM\CurrentControlSet\Services\Eventlog<br />
\Application" and edit the value "CustomSD" there. Find <br />
the substring "(D;;0xf0007;;;BG)" which Denies access to <br />
the application event log for Builtin Guest accounts (like <br />
the IIS Web User account) and replace this substring with <br />
"(A;;0x3;;;BG)" which allows read and write access. Please <br />
pay attention to leave the rest of the security string intact. <br />
Damaging this value can have dangerous effects!<br />
&nbsp;&nbsp; 9. Create or update the registry key <br />
"HKLM\SYSTEM\CurrentControlSet\Services\Eventlog\Application\<br />
PHP-5.2.0" (adapt the last to your version part <br />
if necessary) with the following values:<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * "EventMessageFile" (REG_EXPAND_SZ) = "C:\php\php5ts.dll"<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * "TypesSupported" (REG_DWORD) = 7</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87041""></a>
  <div class="note">
   <strong class="user">m308</strong>
   <a href="#87041" class="date">16-Nov-2008 05:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you are trying to capture PHP errors to a text file on IIS ensure that two things are set.<br />
<br />
1) Only one error log option is set. IE: <br />
<br />
; Log errors to specified file.<br />
error_log = "c:\php\errorlog.txt"<br />
<br />
; Log errors to syslog (Event Log on NT, not valid in Windows 95).<br />
;error_log = syslog<br />
<br />
2) The IUSR account has write and modify permissions to e rrorlog.txt .</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="86651""></a>
  <div class="note">
   <strong class="user">eguvenc at gmail dot com</strong>
   <a href="#86651" class="date">28-Oct-2008 05:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">//Multiline error log class<br />
// ersin güvenç 2008 eguvenc@gmail.com<br />
//For break use "\n" instead '\n'<br />
<br />
</span><span class="keyword">Class </span><span class="default">log </span><span class="keyword">{<br />
&nbsp; </span><span class="comment">//<br />
&nbsp; </span><span class="keyword">const </span><span class="default">USER_ERROR_DIR </span><span class="keyword">= </span><span class="string">'/home/site/error_log/Site_User_errors.log'</span><span class="keyword">;<br />
&nbsp; const </span><span class="default">GENERAL_ERROR_DIR </span><span class="keyword">= </span><span class="string">'/home/site/error_log/Site_General_errors.log'</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; User Errors...<br />
&nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">user</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">,</span><span class="default">$username</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'d.m.Y h:i:s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log </span><span class="keyword">= </span><span class="default">$msg</span><span class="keyword">.</span><span class="string">"&nbsp;&nbsp; |&nbsp; Date:&nbsp; "</span><span class="keyword">.</span><span class="default">$date</span><span class="keyword">.</span><span class="string">"&nbsp; |&nbsp; User:&nbsp; "</span><span class="keyword">.</span><span class="default">$username</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">error_log</span><span class="keyword">(</span><span class="default">$log</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">USER_ERROR_DIR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; General Errors...<br />
&nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">general</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">date</span><span class="keyword">(</span><span class="string">'d.m.Y h:i:s'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$log </span><span class="keyword">= </span><span class="default">$msg</span><span class="keyword">.</span><span class="string">"&nbsp;&nbsp; |&nbsp; Date:&nbsp; "</span><span class="keyword">.</span><span class="default">$date</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">error_log</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">.</span><span class="string">"&nbsp;&nbsp; |&nbsp; Tarih:&nbsp; "</span><span class="keyword">.</span><span class="default">$date</span><span class="keyword">, </span><span class="default">3</span><span class="keyword">, </span><span class="default">self</span><span class="keyword">::</span><span class="default">GENERAL_ERROR_DIR</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}<br />
<br />
</span><span class="default">$log </span><span class="keyword">= new </span><span class="default">log</span><span class="keyword">();<br />
</span><span class="default">$log</span><span class="keyword">-&gt;</span><span class="default">user</span><span class="keyword">(</span><span class="default">$msg</span><span class="keyword">,</span><span class="default">$username</span><span class="keyword">); </span><span class="comment">//use for user errors<br />
//$log-&gt;general($msg); //use for general errors<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="83891""></a>
  <div class="note">
   <strong class="user">paul dot chubb at abs dot gov dot au</strong>
   <a href="#83891" class="date">17-Jun-2008 07:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When logging to apache on windows, both error_log and also trigger_error result in an apache status of error on the front of the message. This is bad if all you want to do is log information. However you can simply log to stderr however you will have to do all message assembly:<br />
<br />
LogToApache($Message) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $stderr = fopen('php://stderr', 'w'); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; fwrite($stderr,$Message); <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; fclose($stderr); <br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81166""></a>
  <div class="note">
   <strong class="user">i dot buttinoni at intandtel dot com</strong>
   <a href="#81166" class="date">16-Feb-2008 12:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Be carefull. Unexpected PHP dies when 2GByte of file log reached (on systems having upper file size limit). <br />
A work aorund is rotate logs :)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80152""></a>
  <div class="note">
   <strong class="user">SJL</strong>
   <a href="#80152" class="date">01-Jan-2008 03:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
"It appears that the system log = stderr if you are running PHP from the command line"<br />
<br />
Actually, it seems that PHP logs to stderr if it can't write to the log file. Command line PHP falls back to stderr because the log file is (usually) only writable by the webserver.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78435""></a>
  <div class="note">
   <strong class="user">larry.kooper at gmail dot com</strong>
   <a href="#78435" class="date">12-Oct-2007 12:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
On a Mac running OS X, for the error logging to work I needed to put this in my php.ini: <br />
error_log = /tmp/php_errors.log <br />
Attempting to put the log in other locations did not work, probably due to permission issues.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76024""></a>
  <div class="note">
   <strong class="user">stepheneliotdewey at GmailDotCom</strong>
   <a href="#76024" class="date">27-Jun-2007 03:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that since typical email is unencrypted, sending data about your errors over email using this function could be considered a security risk. How much of a risk it is depends on how much and what type of information you are sending, but the mere act of sending an email when something happens (even if it cannot be read) could itself imply to a sophisticated hacker observing your site over time that they have managed to cause an error.<br />
<br />
Of course, security through obscurity is the weakest kind of security, as most open source supporters will agree. This is just something that you should keep in mind. <br />
<br />
And of course, whatever you do, make sure that such emails don't contain sensitive user data.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="70889""></a>
  <div class="note">
   <strong class="user">frank at booksku dot com</strong>
   <a href="#70889" class="date">03-Nov-2006 12:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware!&nbsp; If multiple scripts share the same log file, but run as different users, whichever script logs an error first owns the file, and calls to error_log() run as a different user will fail *silently*!<br />
<br />
Nothing more frustrating than trying to figure out why all your error_log calls aren't actually writing, than to find it was due to a *silent* permission denied error!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69233""></a>
  <div class="note">
   <strong class="user">p dot lhonorey at nospam-laposte dot net</strong>
   <a href="#69233" class="date">28-Aug-2006 12:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hi !<br />
<br />
Another trick to post "HTML" mail body. Just add "Content-Type: text/html; charset=ISO-8859-1" into extra_header string. Of course you can set charset according to your country or Env or content.<br />
<br />
EG: Error_log("&lt;html&gt;&lt;h2&gt;stuff&lt;/h2&gt;&lt;/html&gt;",1,"eat@joe.com","subject&nbsp; :lunch\nContent-Type: text/html; charset=ISO-8859-1");<br />
<br />
Enjoy !</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56201""></a>
  <div class="note">
   <strong class="user">marques at displague dot com</strong>
   <a href="#56201" class="date">26-Aug-2005 10:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware the size of your custom error_log!<br />
<br />
Once it exceeds 2GB the function errors, ending your script at the error_log() line.&nbsp; I'm sure this differs from OS to OS, but I have seen it die writing to ext2 under modern Linux systems.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55106""></a>
  <div class="note">
   <strong class="user">php at kennel17 dot NOSPAM dot co dot uk</strong>
   <a href="#55106" class="date">25-Jul-2005 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that the system log = stderr if you are running PHP from the command line, and that often stderr = stdout.&nbsp; This means that if you are using a custom error to both display the error and log it to syslog, then a command-line user will see the same error reported twice.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54988""></a>
  <div class="note">
   <strong class="user">kazezb at nospam dot carleton dot edu</strong>
   <a href="#54988" class="date">21-Jul-2005 07:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It appears that error_log() only logs the first line of multi-line log messages. To log a multi-line message, either log each line individually or write the message to another file.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52078""></a>
  <div class="note">
   <strong class="user">franz at fholzinger dot com</strong>
   <a href="#52078" class="date">20-Apr-2005 06:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In the case of missing your entries in the error_log file:<br />
When you use error_log in a script that does not produce any output, which means that you cannot see anything during the execution of the script, and when you wonder why there are no error_log entries produced in your error_log file, the reasons can be:<br />
- you did not configure error_log output in php.ini<br />
- the script has a syntax error and did therefore not execute</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="30792""></a>
  <div class="note">
   
   <a href="#30792" class="date">28-Mar-2003 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
when using error_log to send email, not all elements of an extra_headers string are handled the same way.&nbsp; "From: " and "Reply-To: " header values will replace the default header values. "Subject: " header values won't: they are *added* to the mail header but don't replace the default, leading to mail messages with two Subject fields.<br />
<br />
<span class="default">&lt;?php<br />
<br />
error_log</span><span class="keyword">(</span><span class="string">"sometext"</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">, </span><span class="string">"zigzag@my.domain"</span><span class="keyword">, <br />
&nbsp; </span><span class="string">"Subject: Foo\nFrom: Rizzlas@my.domain\n"</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
---------------%&lt;-----------------------<br />
To: zigzag@my.domain<br />
Envelope-to: zigzag@my.domain<br />
Date: Fri, 28 Mar 2003 13:29:02 -0500<br />
From: Rizzlas@my.domain<br />
Subject: PHP error_log message<br />
Subject: Foo<br />
Delivery-date: Fri, 28 Mar 2003 13:29:03 -0500<br />
<br />
sometext<br />
---------------%&lt;---------------------<br />
<br />
quoth the docs: "This message type uses the same internal function as mail() does."&nbsp; <br />
<br />
mail() will also fail to set a Subject field based on extra_header data - instead it takes a seperate argument to specify a "Subject: " string.<br />
<br />
php v.4.2.3, SunOS 5.8</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.error-get-last.html">error_get_last</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.error-reporting.html">error_reporting</a></div>
 <div class="up"><a href="ref.errorfunc.html">エラー処理関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
