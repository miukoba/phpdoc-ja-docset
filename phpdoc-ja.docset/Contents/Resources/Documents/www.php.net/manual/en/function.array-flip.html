<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>配列のキーと値を反転する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-filter.html">array_filter</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-intersect-assoc.html">array_intersect_assoc</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-flip" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_flip</h1>
  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">array_flip</span> &mdash; <span class="dc-title">配列のキーと値を反転する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-flip-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">array</span> <span class="methodname"><strong>array_flip</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   )</div>

  <p class="para rdfs-comment">
    <span class="function"><strong>array_flip()</strong></span> は、配列を反転して返します。
   すなわち、<em><code class="parameter">array</code></em> のキーが値となり、
   <em><code class="parameter">array</code></em> の値がキーとなります。
  </p>
  <p class="para">
   <em><code class="parameter">array</code></em> の値は有効なキーを必要とすることに注意してください。
   すなわち、キーは、<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> または
   <span class="type"><a href="language.types.string.html" class="type string">string</a></span> である必要があります。ある値が間違った型である場合、
   警告が出力され、問題のこのキー/値の組は結果には含まれません。
  </p>
  <p class="para">
   ある値が複数回出現した場合、最後のキーがその値として使用され、
   その他の値は失われます。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.array-flip-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">array</code></em></span>
     <dd>

      <p class="para">
       反転を行うキー/値の組。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.array-flip-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に反転した配列、失敗した場合に <strong><code>NULL</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.array-flip-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4920">
    <p><strong>例1  <span class="function"><strong>array_flip()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$trans&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_flip</span><span style="color: #007700">(</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$original&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">strtr</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-4921">
    <p><strong>例2  <span class="function"><strong>array_flip()</strong></span> の例 : 衝突</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$trans&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"a"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"b"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"c"&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$trans&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">array_flip</span><span style="color: #007700">(</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$trans</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>
     <var class="varname"><var class="varname">$trans</var></var> は次のようになります:
    </p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
Array
(
    [1] =&gt; b
    [2] =&gt; c
)
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.array-flip-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"> <span class="function"><a href="function.array-values.html" class="function" rel="rdfs-seeAlso">array_values()</a> - 配列の全ての値を返す</span></li>
    <li class="member"> <span class="function"><a href="function.array-keys.html" class="function" rel="rdfs-seeAlso">array_keys()</a> - 配列のキーすべて、あるいはその一部を返す</span></li>
    <li class="member"> <span class="function"><a href="function.array-reverse.html" class="function" rel="rdfs-seeAlso">array_reverse()</a> - 要素を逆順にした配列を返す</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="112069""></a>
  <div class="note">
   <strong class="user">Tony H</strong>
   <a href="#112069" class="date">29-Apr-2013 11:59</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function is useful when parsing a CSV file with a heading column, but the columns might vary in order or presence:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$f </span><span class="keyword">= </span><span class="default">fopen</span><span class="keyword">(</span><span class="string">"file.csv"</span><span class="keyword">, </span><span class="string">"r"</span><span class="keyword">);<br />
<br />
</span><span class="comment">/* Take the first line (the header) into an array, then flip it<br />
so that the keys are the column name, and values are the<br />
column index. */<br />
</span><span class="default">$cols </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">));<br />
<br />
while (</span><span class="default">$line </span><span class="keyword">= </span><span class="default">fgetcsv</span><span class="keyword">(</span><span class="default">$f</span><span class="keyword">))<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Now we can reference CSV columns like so:<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$status </span><span class="keyword">= </span><span class="default">$line</span><span class="keyword">[</span><span class="default">$cols</span><span class="keyword">[</span><span class="string">'OrderStatus'</span><span class="keyword">]];<br />
}<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I find this better than referencing the numerical array index.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108184""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#108184" class="date">05-Apr-2012 07:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Similarly, if you want the last value without affecting the pointer, you can do:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$array </span><span class="keyword">= array(</span><span class="string">"one"</span><span class="keyword">,</span><span class="string">"two"</span><span class="keyword">,</span><span class="string">"three"</span><span class="keyword">);<br />
<br />
echo </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// "two"<br />
<br />
</span><span class="default">$last </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)));<br />
<br />
echo </span><span class="default">$last</span><span class="keyword">;&nbsp; </span><span class="comment">// "three"<br />
<br />
</span><span class="keyword">echo </span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// "two"<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107097""></a>
  <div class="note">
   <strong class="user">kjensen at iaff106 dot com</strong>
   <a href="#107097" class="date">06-Jan-2012 07:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a way to flip a multidimensional array and came up with this function to accomplish the task.&nbsp; I hope it helps someone else.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">multi_array_flip</span><span class="keyword">(</span><span class="default">$arrayIn</span><span class="keyword">, </span><span class="default">$DesiredKey</span><span class="keyword">, </span><span class="default">$DesiredKey2</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">, </span><span class="default">$OrigKeyName</span><span class="keyword">=</span><span class="default">false</span><span class="keyword">) { <br />
</span><span class="default">$ArrayOut</span><span class="keyword">=array();<br />
foreach (</span><span class="default">$arrayIn </span><span class="keyword">as </span><span class="default">$Key</span><span class="keyword">=&gt;</span><span class="default">$Value</span><span class="keyword">) <br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If there is an original key that need to be preserved as data in the new array then do that if requested ($OrigKeyName=true)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">$OrigKeyName</span><span class="keyword">) </span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$OrigKeyName</span><span class="keyword">]=</span><span class="default">$Key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Require a string value in the data part of the array that is keyed to $DesiredKey<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$DesiredKey</span><span class="keyword">])) return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// If $DesiredKey2 was specified then assume a multidimensional array is desired and build it<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$DesiredKey2</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Require a string value in the data part of the array that is keyed to $DesiredKey2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$DesiredKey2</span><span class="keyword">])) return </span><span class="default">false</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Build NEW multidimensional array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ArrayOut</span><span class="keyword">[</span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$DesiredKey</span><span class="keyword">]][</span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$DesiredKey2</span><span class="keyword">]]=</span><span class="default">$Value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// Build NEW single dimention array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">else </span><span class="default">$ArrayOut</span><span class="keyword">[</span><span class="default">$Value</span><span class="keyword">[</span><span class="default">$DesiredKey</span><span class="keyword">]][]=</span><span class="default">$Value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
return </span><span class="default">$ArrayOut</span><span class="keyword">;<br />
}</span><span class="comment">//end multi_array_flip<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106895""></a>
  <div class="note">
   <strong class="user">Final</strong>
   <a href="#106895" class="date">16-Dec-2011 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I find this function vey useful when you have a big array and you want to know if a given value is in the array. in_array in fact becomes quite slow in such a case, but you can flip the big array and then use isset to obtain the same result in a much faster way.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99880""></a>
  <div class="note">
   <strong class="user">h3x</strong>
   <a href="#99880" class="date">12-Sep-2010 10:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
this function can be used to remove null elements form an array:<br />
<br />
<span class="default">&lt;?php<br />
$ar </span><span class="keyword">= array(</span><span class="default">null</span><span class="keyword">,</span><span class="string">'1'</span><span class="keyword">,</span><span class="string">'2'</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">,</span><span class="string">'3'</span><span class="keyword">,</span><span class="default">null</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">);<br />
</span><span class="comment">/*<br />
result:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; <br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; <br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; <br />
)<br />
*/<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$ar</span><span class="keyword">)));<br />
</span><span class="comment">/*<br />
result:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 3<br />
)<br />
*/<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89724""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#89724" class="date">20-Mar-2009 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Finding the longest string in an array?<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">longest_string_in_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$mapping </span><span class="keyword">= </span><span class="default">array_combine</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'strlen'</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$mapping</span><span class="keyword">, </span><span class="default">max</span><span class="keyword">(</span><span class="default">$mapping</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Differences are obvious: returns an array of [i]all[/i] of the longest strings, instead of just picking one arbitrarily. Doesn't do the stripslashing or magic stuff because that's another job for for another function.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="89436""></a>
  <div class="note">
   <strong class="user">dan at aoindustries dot com</strong>
   <a href="#89436" class="date">07-Mar-2009 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
From an algorithmic efficiency standpoint, building an entire array of lengths to then sort to only retrieve the longest value is unnecessary work.&nbsp; The following should be O(n) instead of O(n log n).&nbsp; It could also be:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_longest_value</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Some don't like to initialize, I do<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$longest </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$longestLen </span><span class="keyword">= -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array $value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$len</span><span class="keyword">&gt;</span><span class="default">$longestLen</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$longest </span><span class="keyword">= </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$longestLen </span><span class="keyword">= </span><span class="default">$len</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$longest </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$longest</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">get_magic_quotes_gpc</span><span class="keyword">()) { return </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$longest</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$longest</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87513""></a>
  <div class="note">
   <strong class="user">corz at corz dot org</strong>
   <a href="#87513" class="date">08-Dec-2008 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; Fun function to return the longest physical *value* from an array.<br />
<br />
&nbsp;&nbsp;&nbsp; Culled from a small script designed to capture the longest $_POST variable, <br />
&nbsp;&nbsp;&nbsp; usually the textarea, which would then be dumped to a "emergency post dump file".<br />
<br />
&nbsp;&nbsp;&nbsp; corz at corz dot org<br />
*/<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array(</span><span class="string">"input" </span><span class="keyword">=&gt; </span><span class="string">"submit"</span><span class="keyword">, </span><span class="string">"textarea" </span><span class="keyword">=&gt; </span><span class="string">"Some long spiel of text\r\na textarea, probably"</span><span class="keyword">, <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"another-input" </span><span class="keyword">=&gt; </span><span class="string">"make me longer"</span><span class="keyword">, </span><span class="string">"and" </span><span class="keyword">=&gt; </span><span class="string">"another"</span><span class="keyword">, </span><span class="string">"etc" </span><span class="keyword">=&gt; </span><span class="string">"etc."</span><span class="keyword">);<br />
<br />
echo </span><span class="string">'&lt;!DOCTYPE HTML SYSTEM&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;long&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;pre&gt;Longest value: '</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">get_longest_value</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">),</span><span class="string">'&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;'</span><span class="keyword">;<br />
<br />
function </span><span class="default">get_longest_value</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$lengths</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">); <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">asort</span><span class="keyword">(</span><span class="default">$lengths</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$lengths </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$lengths</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$longest </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">[</span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$lengths</span><span class="keyword">)]);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">get_magic_quotes_gpc</span><span class="keyword">()) { return </span><span class="default">stripslashes</span><span class="keyword">(</span><span class="default">$longest</span><span class="keyword">); }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$longest</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74754""></a>
  <div class="note">
   <strong class="user">pinkgothic at gmail dot com</strong>
   <a href="#74754" class="date">26-Apr-2007 10:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In case anyone is wondering how array_flip() treats empty arrays:<br />
<br />
<span class="default">&lt;?php<br />
print_r</span><span class="keyword">(</span><span class="default">array_flip</span><span class="keyword">(array()));<br />
</span><span class="default">?&gt;<br />
</span><br />
results in:<br />
<br />
Array<br />
(<br />
)<br />
<br />
I wanted to know if it would return false and/or even chuck out an error if there were no key-value pairs to flip, despite being non-intuitive if that were the case. But (of course) everything works as expected. Just a head's up for the paranoid.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="47640""></a>
  <div class="note">
   <strong class="user">snaury at narod dot ru</strong>
   <a href="#47640" class="date">23-Nov-2004 08:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When you do array_flip, it takes the last key accurence for each value, but be aware that keys order in flipped array will be in the order, values were first seen in original array. For example, array:<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [4] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [5] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [6] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [7] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [8] =&gt; 3<br />
&nbsp;&nbsp;&nbsp; [9] =&gt; 3<br />
<br />
After flipping will become:<br />
(first seen value -&gt; first key)<br />
<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 9<br />
<br />
And not anything like this:<br />
(last seen value -&gt; last key)<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 9<br />
<br />
In my application I needed to find five most recently commented entries. I had a sorted comment-id =&gt; entry-id array, and what popped in my mind is just do array_flip($array), and I thought I now would have last five entries in the array as most recently commented entry =&gt; comment pairs. In fact it wasn't (see above, as it is the order of values used). To achieve what I need I came up with the following (in case someone will need to do something like that):<br />
<br />
First, we need a way to flip an array, taking the first encountered key for each of values in array. You can do it with:<br />
<br />
&nbsp; $array = array_flip(array_unique($array));<br />
<br />
Well, and to achieve that "last comments" effect, just do:<br />
<br />
&nbsp; $array = array_reverse($array, true);<br />
&nbsp; $array = array_flip(array_unique($array));<br />
&nbsp; $array = array_reverse($array, true);<br />
<br />
In the example from the very beginning array will become:<br />
<br />
&nbsp;&nbsp;&nbsp; [2] =&gt; 5<br />
&nbsp;&nbsp;&nbsp; [1] =&gt; 7<br />
&nbsp;&nbsp;&nbsp; [3] =&gt; 9<br />
<br />
Just what I (and maybe you?) need. =^_^=</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="34749""></a>
  <div class="note">
   <strong class="user">znailz at yahoo dot com</strong>
   <a href="#34749" class="date">05-Aug-2003 11:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I know a lot of people want a function to remove a key by value from an array. I saw solutions that iterate(!) though the whole array comparing value by value and then unsetting that value's key. PHP has a built-in function for pretty much everything (heard it will even cook you breakfast), so if you think "wouldn't it be cool if PHP had a function to do that...", odds are it already has. Check out this example. It takes a value, gets all keys for that value if it has duplicates, unsets them all, and returns a reindexed array.<br />
<br />
<span class="default">&lt;?php<br />
$arr </span><span class="keyword">= array(</span><span class="default">11</span><span class="keyword">,</span><span class="default">12</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">,</span><span class="default">12</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// sample array<br />
</span><span class="default">$arr </span><span class="keyword">= </span><span class="default">array_flip</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);<br />
unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="default">12</span><span class="keyword">]);<br />
</span><span class="default">$arr </span><span class="keyword">= array(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
$arr contains:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 11<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 13<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
?&gt;<br />
<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-filter.html">array_filter</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-intersect-assoc.html">array_intersect_assoc</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
