<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>配列 関数</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="array.sorting.html">配列のソート</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-change-key-case.html">array_change_key_case</a></div>
 <div class="up"><a href="book.array.html">配列</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.array" class="reference">
 <h1 class="title">配列 関数</h1>
 <div class="partintro">
   <h1 class="title">参考</h1>
   <p class="para">
     <span class="function"><a href="function.is-array.html" class="function">is_array()</a></span>,  <span class="function"><a href="function.explode.html" class="function">explode()</a></span>,
     <span class="function"><a href="function.implode.html" class="function">implode()</a></span>,  <span class="function"><a href="function.split.html" class="function">split()</a></span>,
     <span class="function"><a href="function.preg-split.html" class="function">preg_split()</a></span>, および  <span class="function"><a href="function.join.html" class="function">join()</a></span>
    も参照してください。
   </p>
 </div>

 























































































































































































































































































































































































































































































































































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.array-change-key-case.html">array_change_key_case</a> — 配列のすべてのキーの大文字小文字を変更する</li><li><a href="function.array-chunk.html">array_chunk</a> — 配列を分割する</li><li><a href="function.array-column.html">array_column</a> — 入力配列から単一のカラムの値を返す</li><li><a href="function.array-combine.html">array_combine</a> — 一方の配列をキーとして、もう一方の配列を値として、ひとつの配列を生成する</li><li><a href="function.array-count-values.html">array_count_values</a> — 配列の値の数を数える</li><li><a href="function.array-diff-assoc.html">array_diff_assoc</a> — 追加された添字の確認を含めて配列の差を計算する</li><li><a href="function.array-diff-key.html">array_diff_key</a> — キーを基準にして配列の差を計算する</li><li><a href="function.array-diff-uassoc.html">array_diff_uassoc</a> — ユーザーが指定したコールバック関数を利用し、
   追加された添字の確認を含めて配列の差を計算する</li><li><a href="function.array-diff-ukey.html">array_diff_ukey</a> — キーを基準にし、コールバック関数を用いて配列の差を計算する</li><li><a href="function.array-diff.html">array_diff</a> — 配列の差を計算する</li><li><a href="function.array-fill-keys.html">array_fill_keys</a> — キーを指定して、配列を値で埋める</li><li><a href="function.array-fill.html">array_fill</a> — 配列を指定した値で埋める</li><li><a href="function.array-filter.html">array_filter</a> — コールバック関数を使用して、配列の要素をフィルタリングする</li><li><a href="function.array-flip.html">array_flip</a> — 配列のキーと値を反転する</li><li><a href="function.array-intersect-assoc.html">array_intersect_assoc</a> — 追加された添字の確認も含めて配列の共通項を確認する</li><li><a href="function.array-intersect-key.html">array_intersect_key</a> — キーを基準にして配列の共通項を計算する</li><li><a href="function.array-intersect-uassoc.html">array_intersect_uassoc</a> — 追加された添字の確認も含め、コールバック関数を用いて
  配列の共通項を確認する</li><li><a href="function.array-intersect-ukey.html">array_intersect_ukey</a> — キーを基準にし、コールバック関数を用いて
  配列の共通項を計算する</li><li><a href="function.array-intersect.html">array_intersect</a> — 配列の共通項を計算する</li><li><a href="function.array-key-exists.html">array_key_exists</a> — 指定したキーまたは添字が配列にあるかどうかを調べる</li><li><a href="function.array-keys.html">array_keys</a> — 配列のキーすべて、あるいはその一部を返す</li><li><a href="function.array-map.html">array_map</a> — 指定した配列の要素にコールバック関数を適用する</li><li><a href="function.array-merge-recursive.html">array_merge_recursive</a> — 二つ以上の配列を再帰的にマージする</li><li><a href="function.array-merge.html">array_merge</a> — ひとつまたは複数の配列をマージする</li><li><a href="function.array-multisort.html">array_multisort</a> — 複数の多次元の配列をソートする</li><li><a href="function.array-pad.html">array_pad</a> — 指定長、指定した値で配列を埋める</li><li><a href="function.array-pop.html">array_pop</a> — 配列の末尾から要素を取り除く</li><li><a href="function.array-product.html">array_product</a> — 配列の値の積を計算する</li><li><a href="function.array-push.html">array_push</a> — 一つ以上の要素を配列の最後に追加する</li><li><a href="function.array-rand.html">array_rand</a> — 配列から一つ以上の要素をランダムに取得する</li><li><a href="function.array-reduce.html">array_reduce</a> — コールバック関数を用いて配列を普通の値に変更することにより、配列を再帰的に減らす</li><li><a href="function.array-replace-recursive.html">array_replace_recursive</a> — 渡された配列の要素を再帰的に置き換える</li><li><a href="function.array-replace.html">array_replace</a> — 渡された配列の要素を置き換える</li><li><a href="function.array-reverse.html">array_reverse</a> — 要素を逆順にした配列を返す</li><li><a href="function.array-search.html">array_search</a> — 指定した値を配列で検索し、見つかった場合に対応するキーを返す</li><li><a href="function.array-shift.html">array_shift</a> — 配列の先頭から要素を一つ取り出す</li><li><a href="function.array-slice.html">array_slice</a> — 配列の一部を展開する</li><li><a href="function.array-splice.html">array_splice</a> — 配列の一部を削除し、他の要素で置換する</li><li><a href="function.array-sum.html">array_sum</a> — 配列の中の値の合計を計算する</li><li><a href="function.array-udiff-assoc.html">array_udiff_assoc</a> — データの比較にコールバック関数を用い、
  追加された添字の確認を含めて配列の差を計算する</li><li><a href="function.array-udiff-uassoc.html">array_udiff_uassoc</a> — データと添字の比較にコールバック関数を用い、
  追加された添字の確認を含めて配列の差を計算する</li><li><a href="function.array-udiff.html">array_udiff</a> — データの比較にコールバック関数を用い、配列の差を計算する</li><li><a href="function.array-uintersect-assoc.html">array_uintersect_assoc</a> — データの比較にコールバック関数を用い、
  追加された添字の確認も含めて配列の共通項を計算する</li><li><a href="function.array-uintersect-uassoc.html">array_uintersect_uassoc</a> — データと添字の比較にコールバック関数を用い、
  追加された添字の確認も含めて配列の共通項を計算する</li><li><a href="function.array-uintersect.html">array_uintersect</a> — データの比較にコールバック関数を用い、配列の共通項を計算する</li><li><a href="function.array-unique.html">array_unique</a> — 配列から重複した値を削除する</li><li><a href="function.array-unshift.html">array_unshift</a> — 一つ以上の要素を配列の最初に加える</li><li><a href="function.array-values.html">array_values</a> — 配列の全ての値を返す</li><li><a href="function.array-walk-recursive.html">array_walk_recursive</a> — 配列の全ての要素に、ユーザー関数を再帰的に適用する</li><li><a href="function.array-walk.html">array_walk</a> — 配列の全ての要素にユーザー関数を適用する</li><li><a href="function.array.html">array</a> — 配列を生成する</li><li><a href="function.arsort.html">arsort</a> — 連想キーと要素との関係を維持しつつ配列を逆順にソートする</li><li><a href="function.asort.html">asort</a> — 連想キーと要素との関係を維持しつつ配列をソートする</li><li><a href="function.compact.html">compact</a> — 変数名とその値から配列を作成する</li><li><a href="function.count.html">count</a> — 変数に含まれるすべての要素、
  あるいはオブジェクトに含まれる何かの数を数える</li><li><a href="function.current.html">current</a> — 配列内の現在の要素を返す</li><li><a href="function.each.html">each</a> — 配列から現在のキーと値のペアを返して、カーソルを進める</li><li><a href="function.end.html">end</a> — 配列の内部ポインタを最終要素にセットする</li><li><a href="function.extract.html">extract</a> — 配列からシンボルテーブルに変数をインポートする</li><li><a href="function.in-array.html">in_array</a> — 配列に値があるかチェックする</li><li><a href="function.key-exists.html">key_exists</a> — array_key_exists のエイリアス</li><li><a href="function.key.html">key</a> — 配列からキーを取り出す</li><li><a href="function.krsort.html">krsort</a> — 配列をキーで逆順にソートする</li><li><a href="function.ksort.html">ksort</a> — 配列をキーでソートする</li><li><a href="function.list.html">list</a> — 配列と同様の形式で、複数の変数への代入を行う</li><li><a href="function.natcasesort.html">natcasesort</a> — 大文字小文字を区別しない&quot;自然順&quot;アルゴリズムを用いて配列をソートする</li><li><a href="function.natsort.html">natsort</a> — &quot;自然順&quot;アルゴリズムで配列をソートする</li><li><a href="function.next.html">next</a> — 内部配列ポインタを進める</li><li><a href="function.pos.html">pos</a> — current のエイリアス</li><li><a href="function.prev.html">prev</a> — 内部の配列ポインタをひとつ前に戻す</li><li><a href="function.range.html">range</a> — ある範囲の整数を有する配列を作成する</li><li><a href="function.reset.html">reset</a> — 配列の内部ポインタを先頭の要素にセットする</li><li><a href="function.rsort.html">rsort</a> — 配列を逆順にソートする</li><li><a href="function.shuffle.html">shuffle</a> — 配列をシャッフルする</li><li><a href="function.sizeof.html">sizeof</a> — count のエイリアス</li><li><a href="function.sort.html">sort</a> — 配列をソートする</li><li><a href="function.uasort.html">uasort</a> — ユーザー定義の比較関数で配列をソートし、連想インデックスを保持する</li><li><a href="function.uksort.html">uksort</a> — ユーザー定義の比較関数を用いて、キーで配列をソートする</li><li><a href="function.usort.html">usort</a> — ユーザー定義の比較関数を使用して、配列を値でソートする</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="111134""></a>
  <div class="note">
   <strong class="user">callmeanaguma at gmail dot com</strong>
   <a href="#111134" class="date">18-Jan-2013 08:30</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you need to flattern two-dismensional array with single values assoc subarrays, you could use this function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayFlatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flattern </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_key </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flattern</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">[</span><span class="default">$new_key</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$flattern</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109797""></a>
  <div class="note">
   <strong class="user">q*bist</strong>
   <a href="#109797" class="date">22-Aug-2012 03:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Fill an array with items from another array, wrapping <br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_window</span><span class="keyword">(array </span><span class="default">$array</span><span class="keyword">, </span><span class="default">$window </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//return array of size $window filled with elements from $array.<br />
&nbsp;&nbsp;&nbsp; // if count($array) is smaller than $window,<br />
&nbsp;&nbsp;&nbsp; // elements will be repeated in the returned array<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$count </span><span class="keyword">&gt;= </span><span class="default">$window</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$window</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//wraparound&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$window</span><span class="keyword">; ++</span><span class="default">$i</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crsr </span><span class="keyword">= </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$crsr </span><span class="keyword">&gt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$crsr </span><span class="keyword">= </span><span class="default">$crsr </span><span class="keyword">- </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret</span><span class="keyword">[] = </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$crsr</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$ret</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
Usage:<br />
<br />
<span class="default">&lt;?php<br />
$test </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">, </span><span class="string">'four'</span><span class="keyword">, </span><span class="string">'five'</span><span class="keyword">, </span><span class="string">'six'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_window</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
will print<br />
<br />
Array ( [0] =&gt; one [1] =&gt; two [2] =&gt; three [3] =&gt; four ) <br />
<br />
<span class="default">&lt;?php<br />
$test </span><span class="keyword">= array(</span><span class="string">'one'</span><span class="keyword">, </span><span class="string">'two'</span><span class="keyword">, </span><span class="string">'three'</span><span class="keyword">, </span><span class="string">'four'</span><span class="keyword">, </span><span class="string">'five'</span><span class="keyword">, </span><span class="string">'six'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_window</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">, </span><span class="default">9</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
will print<br />
<br />
Array ( [0] =&gt; one [1] =&gt; two [2] =&gt; three [3] =&gt; four [4] =&gt; five [5] =&gt; six [6] =&gt; one [7] =&gt; two [8] =&gt; three )</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108546""></a>
  <div class="note">
   <strong class="user">kolkabes at googlemail dot com</strong>
   <a href="#108546" class="date">05-May-2012 09:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Short function for making a recursive array copy while cloning objects on the way.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">arrayCopy</span><span class="keyword">( array </span><span class="default">$array </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach( </span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if( </span><span class="default">is_array</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">arrayCopy</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } elseif ( </span><span class="default">is_object</span><span class="keyword">( </span><span class="default">$val </span><span class="keyword">) ) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = clone </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="105907""></a>
  <div class="note">
   <strong class="user">dave at davidhbrown dot us</strong>
   <a href="#105907" class="date">24-Sep-2011 08:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
While PHP has well over three-score array functions, array_rotate is strangely missing as of PHP 5.3. Searching online offered several solutions, but the ones I found have defects such as inefficiently looping through the array or ignoring keys. <br />
<br />
The following array_rotate() function uses array_merge and array_shift to reliably rotate an array forwards or backwards, preserving keys. If you know you can trust your $array to be an array and $shift to be between 0 and the length of your array, you can skip the function definition and use just the return expression in your code.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$shift</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) || !</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$shift</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) </span><span class="default">error_log</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">' expects first argument to be array; '</span><span class="keyword">.</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">).</span><span class="string">' received.'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$shift</span><span class="keyword">)) </span><span class="default">error_log</span><span class="keyword">(</span><span class="default">__FUNCTION__</span><span class="keyword">.</span><span class="string">' expects second argument to be numeric; '</span><span class="keyword">.</span><span class="default">gettype</span><span class="keyword">(</span><span class="default">$shift</span><span class="keyword">).</span><span class="string">" `</span><span class="default">$shift</span><span class="string">` received."</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$shift </span><span class="keyword">%= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">//we won't try to shift more than one array length<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$shift </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) </span><span class="default">$shift </span><span class="keyword">+= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);</span><span class="comment">//handle negative shifts as positive<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$shift</span><span class="keyword">, </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">), </span><span class="default">array_slice</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">, </span><span class="default">$shift</span><span class="keyword">, </span><span class="default">true</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span>A few simple tests:<br />
<span class="default">&lt;?php<br />
$array</span><span class="keyword">=array(</span><span class="string">"foo"</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">,</span><span class="string">"bar"</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">,</span><span class="string">"baz"</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, -</span><span class="default">2</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">"4"</span><span class="keyword">));<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">array_rotate</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, -</span><span class="default">9</span><span class="keyword">));<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="99885""></a>
  <div class="note">
   <strong class="user">Nitrogen</strong>
   <a href="#99885" class="date">13-Sep-2010 05:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I made a simple little function to make an array (containing readable data) presentable in human form.<br />
I added some error checking, too.. (if it's not human-readable, don't include it).<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">Combine</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">) {<br />
&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">)) </span><span class="comment">// I only want arrays.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return(</span><span class="default">false</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// remove named index (only numeric index)<br />
&nbsp; </span><span class="default">$Input</span><span class="keyword">=</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// read the array, if it's not a string or number, remove it!<br />
&nbsp; </span><span class="keyword">for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">);</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">])&amp;&amp;!</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp;&nbsp; unset(</span><span class="default">$Input</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
<br />
&nbsp; </span><span class="comment">// if an element got removed in the middle of the array, it leaves holes in the<br />
&nbsp; // array index, so we use array_values to reset them again.<br />
&nbsp; </span><span class="default">$Input</span><span class="keyword">=</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">);<br />
<br />
&nbsp; </span><span class="comment">// several array counts used asead.<br />
&nbsp; </span><span class="default">$Count</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">);<br />
<br />
&nbsp; if(</span><span class="default">$Count</span><span class="keyword">&gt;</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">implode</span><span class="keyword">(</span><span class="string">', '</span><span class="keyword">,</span><span class="default">array_splice</span><span class="keyword">(</span><span class="default">$Input</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$Count</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">)).</span><span class="string">' and '</span><span class="keyword">.</span><span class="default">$Input</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp; if(</span><span class="default">$Count</span><span class="keyword">==</span><span class="default">1</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="default">$Input</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">]);<br />
&nbsp; if(</span><span class="default">$Count</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; return(</span><span class="string">''</span><span class="keyword">);<br />
&nbsp; </span><span class="comment">// nothing should happen beyond this point.<br />
</span><span class="keyword">}<br />
<br />
</span><span class="default">Combine</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">)); </span><span class="comment">// A<br />
</span><span class="default">Combine</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">)); </span><span class="comment">// A and B<br />
</span><span class="default">Combine</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">,</span><span class="string">'C'</span><span class="keyword">)); </span><span class="comment">// A, B and C<br />
</span><span class="default">Combine</span><span class="keyword">(array(</span><span class="string">'A'</span><span class="keyword">,</span><span class="string">'B'</span><span class="keyword">,</span><span class="string">'9'</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">)); </span><span class="comment">// A, B, 9, 4 and 5<br />
</span><span class="default">Combine</span><span class="keyword">(array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">false</span><span class="keyword">,</span><span class="default">5</span><span class="keyword">,</span><span class="string">'nine'</span><span class="keyword">,</span><span class="string">'?!?!'</span><span class="keyword">)); </span><span class="comment">// 3, 5, nine and ?!?!<br />
// and so on...<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
Hope this helps someone,<br />
Nitrogen.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96914""></a>
  <div class="note">
   <strong class="user">oliverSPAMMENOT at e-geek dot com dot au</strong>
   <a href="#96914" class="date">23-Mar-2010 04:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Function to pretty print arrays and objects. Detects object recursion and allows setting a maximum depth. Based on arraytostring and u_print_r from the print_r function notes. Should be called like so: <br />
<br />
<span class="default">&lt;?php<br />
egvaluetostring</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)&nbsp;&nbsp; </span><span class="comment">//no max depth, or<br />
</span><span class="default">egvaluetostring</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$max_depth</span><span class="keyword">)&nbsp;&nbsp; </span><span class="comment">//max depth set<br />
<br />
</span><span class="keyword">function </span><span class="default">egvaluetostring</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$max_depth</span><span class="keyword">, </span><span class="default">$key </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">, </span><span class="default">$depth </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$refChain </span><span class="keyword">= array()) {<br />
&nbsp; if(</span><span class="default">$depth </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$tab </span><span class="keyword">= </span><span class="default">str_repeat</span><span class="keyword">(</span><span class="string">"\t"</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">$tab </span><span class="keyword">. (</span><span class="default">$key </span><span class="keyword">!== </span><span class="default">NULL </span><span class="keyword">? </span><span class="default">$key </span><span class="keyword">. </span><span class="string">" =&gt; " </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">);<br />
&nbsp; <br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) || </span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$recursion </span><span class="keyword">= </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$refChain </span><span class="keyword">as </span><span class="default">$refVal</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$refVal </span><span class="keyword">=== </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$recursion </span><span class="keyword">= </span><span class="default">TRUE</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$refChain</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="string">"array" </span><span class="keyword">: </span><span class="string">"object"</span><span class="keyword">) . </span><span class="string">" ( "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$recursion</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"*RECURSION* "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; elseif (isset(</span><span class="default">$max_depth</span><span class="keyword">) &amp;&amp; </span><span class="default">$depth </span><span class="keyword">&gt;= </span><span class="default">$max_depth</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"*MAX DEPTH REACHED* "</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (!empty(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$value </span><span class="keyword">as </span><span class="default">$child_key </span><span class="keyword">=&gt; </span><span class="default">$child_value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="default">egvaluetostring</span><span class="keyword">(</span><span class="default">$child_value</span><span class="keyword">, </span><span class="default">$max_depth</span><span class="keyword">, (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="string">"[" </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">) . </span><span class="default">$child_key </span><span class="keyword">. (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) ? </span><span class="string">"]" </span><span class="keyword">: </span><span class="string">""</span><span class="keyword">), </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">, </span><span class="default">$refChain</span><span class="keyword">) . </span><span class="string">",\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"\n" </span><span class="keyword">. </span><span class="default">$tab</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">")"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$refChain</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; else {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">"</span><span class="default">$value</span><span class="string">"</span><span class="keyword">;<br />
&nbsp; }<br />
<br />
&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="96478""></a>
  <div class="note">
   <strong class="user">ducnm0 at gmail dot com</strong>
   <a href="#96478" class="date">01-Mar-2010 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function to convert php array into JS object, supporting both object and array:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">static function </span><span class="default">is_assoc</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach ( </span><span class="default">array_keys </span><span class="keyword">( </span><span class="default">$array </span><span class="keyword">) as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v </span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$k </span><span class="keyword">!== </span><span class="default">$v</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; static function </span><span class="default">arrayPHPToJS</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_null</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) return </span><span class="string">'null'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) return </span><span class="string">"'" </span><span class="keyword">. </span><span class="default">$data </span><span class="keyword">. </span><span class="string">"'"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">self</span><span class="keyword">::</span><span class="default">is_assoc</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$val </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[]=</span><span class="string">"'" </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">"' :" </span><span class="keyword">.</span><span class="default">self</span><span class="keyword">::</span><span class="default">arrayPHPtoJS</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"{" </span><span class="keyword">. </span><span class="default">implode </span><span class="keyword">( </span><span class="string">', '</span><span class="keyword">, </span><span class="default">$a </span><span class="keyword">) . </span><span class="string">"}"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$data</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$data </span><span class="keyword">as </span><span class="default">$val </span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$a</span><span class="keyword">[]=</span><span class="default">self</span><span class="keyword">::</span><span class="default">arrayPHPtoJS</span><span class="keyword">(</span><span class="default">$val</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="string">"[" </span><span class="keyword">. </span><span class="default">implode </span><span class="keyword">( </span><span class="string">', '</span><span class="keyword">, </span><span class="default">$a </span><span class="keyword">) . </span><span class="string">"]"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$data</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94910""></a>
  <div class="note">
   <strong class="user">phektus at gmail dot com</strong>
   <a href="#94910" class="date">02-Dec-2009 12:44</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is how I solved my array combinations problem. My particular situation is that I needed to project combinations of certain results and analyse each combination based from a consolidation of one of their attributes. The following example does not show the analysis part but it shows how I came up with my combinations ($traits).<br />
<br />
This is actually an improvement on: <a href="http://ask.metafilter.com/64554/Finding-combinations-in-PHP" rel="nofollow" target="_blank">http://ask.metafilter.com/64554/Finding-combinations-in-PHP</a><br />
as it deals with arrays of strings, while I need to combine arrays within an array (you guessed it, database results).<br />
<br />
Hope somebody finds this useful or teaches me a simpler way [by email] to do this. Public domain etc.<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; header</span><span class="keyword">(</span><span class="string">'Content-Type: text/plain'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; class </span><span class="default">Test </span><span class="keyword">{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// holds the combinations<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">var </span><span class="default">$combinations</span><span class="keyword">= array();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; function </span><span class="default">getCombinations</span><span class="keyword">(</span><span class="default">$batch</span><span class="keyword">, </span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">)&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">combinations</span><span class="keyword">[] = </span><span class="default">$batch</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$elements</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">getCombinations</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$batch</span><span class="keyword">, </span><span class="default">$element</span><span class="keyword">), </span><span class="default">$elements</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">+ </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Test it!<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$traits </span><span class="keyword">= array (<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Happy'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Sad'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Angry'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Hopeful'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Outgoing'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Introverted'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Tall'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Short'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Medium'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Violent'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Quiet'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Psychotic'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; ),<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Handsome'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Plain'</span><span class="keyword">), <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array(</span><span class="string">'Ugly'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; );<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">= new </span><span class="default">Test</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$start </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">getCombinations</span><span class="keyword">(</span><span class="default">$start</span><span class="keyword">, </span><span class="default">$traits</span><span class="keyword">, </span><span class="default">0</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">-&gt;</span><span class="default">combinations</span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="94381""></a>
  <div class="note">
   <strong class="user">shadiadiph at yahoo dot com</strong>
   <a href="#94381" class="date">01-Nov-2009 04:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is a useful function to remove an array value from an array. <br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">rem_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$str</span><span class="keyword">){<br />
foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
if (</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">] == </span><span class="string">"</span><span class="default">$str</span><span class="string">"</span><span class="keyword">) unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
}<br />
return </span><span class="default">$array</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$selected</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
</span><span class="default">$selected </span><span class="keyword">=</span><span class="string">"three"</span><span class="keyword">;<br />
</span><span class="default">$numbers</span><span class="keyword">=array();<br />
</span><span class="default">$numbers</span><span class="keyword">=array(</span><span class="string">'one'</span><span class="keyword">,</span><span class="string">'two'</span><span class="keyword">,</span><span class="string">'three'</span><span class="keyword">,</span><span class="string">'four'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
<br />
</span><span class="comment">// returns&nbsp; Array ( [0] =&gt; one [1] =&gt; two [2] =&gt; three [3] =&gt; four )<br />
<br />
// now we are going to call the function to see if the number three the $selected number is in the array $numbers and remove it.<br />
<br />
</span><span class="default">$numbers </span><span class="keyword">= </span><span class="default">rem_array</span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">,</span><span class="default">$selected</span><span class="keyword">);<br />
<br />
</span><span class="default">print_r </span><span class="keyword">(</span><span class="default">$numbers</span><span class="keyword">);<br />
</span><span class="comment">// returns&nbsp; Array ( [0] =&gt; one [1] =&gt; two [3] =&gt; four ) <br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
I am finding it usefull for drop down lists on forms where you do not want the selected value duplicated.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92660""></a>
  <div class="note">
   <strong class="user">seva dot lapsha at gmail dot com</strong>
   <a href="#92660" class="date">03-Aug-2009 03:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Arrays are good, but inapplicable when dealing with huge amounts of data.<br />
<br />
I'm working on rewriting some array functions to operate with plain Iterators - map, reduce, walk, flip et cetera are already there.<br />
<br />
In addition I'm going to implement simulation of comprehensions (generators) in PHP (<a href="http://en.wikipedia.org/wiki/List_comprehension" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/List_comprehension</a>).<br />
<br />
See the source code, examples and documentation at <a href="http://code.google.com/p/php-iterator-utils/" rel="nofollow" target="_blank">http://code.google.com/p/php-iterator-utils/</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="87501""></a>
  <div class="note">
   <strong class="user">jan at hooda dot de</strong>
   <a href="#87501" class="date">08-Dec-2008 12:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Two simple functions to add and delete values from arrays:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_add </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$val</span><span class="keyword">); <br />
&nbsp;&nbsp; &nbsp;&nbsp; } <br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; function </span><span class="default">array_del </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$str</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp;&nbsp; { <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">in_array</span><span class="keyword">(</span><span class="default">$str</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">)==</span><span class="default">true</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) { <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$value</span><span class="keyword">==</span><span class="default">$str</span><span class="keyword">) unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp;&nbsp; }&nbsp; <br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="85785""></a>
  <div class="note">
   <strong class="user">renatonascto at gmail dot com</strong>
   <a href="#85785" class="date">17-Sep-2008 08:11</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Big arrays use a lot of memory possibly resulting in memory limit errors. You can reduce memory usage on your script by destroying them as soon as you´re done with them. I was able to get over a few megabytes of memory by simply destroying some variables I didn´t use anymore. <br />
You can view the memory usage/gain by using the funcion memory_get_usage(). Hope this helps!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82335""></a>
  <div class="note">
   <strong class="user">pragash_jey at yahoo dot com</strong>
   <a href="#82335" class="date">06-Apr-2008 04:38</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Java Like Array Implementation!<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/*<br />
&nbsp;* Author : Pragash Jeyaratnam<br />
&nbsp;* Vector Class <br />
&nbsp;* PHP Version 5.2.5<br />
&nbsp;* Contact : pragash_jey@yahoo.com.<br />
&nbsp;*/<br />
</span><span class="keyword">class </span><span class="default">Vector<br />
</span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * The number of valid components in this Vector object.<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$elementCount</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * The array buffer into which the components of the vector are stored.<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">protected </span><span class="default">$elementData</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**Default vector Constructor*/<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">__construct</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**Append the parameter element to the vector*/<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">add</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$object</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">[] = </span><span class="default">$object</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; * Returns true of Vector is empty false otherwise<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">isEmpty</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * Returns the current size of this Vector <br />
&nbsp;&nbsp; */<br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">size</span><span class="keyword">()<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; *&nbsp; Searches for the first occurence of the given argument<br />
&nbsp;&nbsp;&nbsp; **/<br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">indexOf</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if((</span><span class="default">$index </span><span class="keyword">=</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">,</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">)) !==</span><span class="default">false</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$index</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return -</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; * This function will retain TRUE if $object is contained<br />
&nbsp;&nbsp;&nbsp; * within the vector else FALSE<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">contains</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">indexOf</span><span class="keyword">(</span><span class="default">$object</span><span class="keyword">)&gt;=</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; * Returns Vector Object at index $index<br />
&nbsp;&nbsp;&nbsp; * Error : Null is returned<br />
&nbsp;&nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">get</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">checkBound</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; * Sets the object at $index to be $object<br />
&nbsp;&nbsp;&nbsp; **/<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">set</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">,</span><span class="default">$object</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">checkBound</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] =</span><span class="default">$object </span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; * Removes element at $index<br />
&nbsp;&nbsp; **/ <br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">removeAt</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">) <br />
&nbsp;&nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">checkBound</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">)) <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$index</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp; else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * Removes all elements from the Vector.&nbsp; Note that this does not<br />
&nbsp;&nbsp; &nbsp; * resize the internal data array.<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">removeAll</span><span class="keyword">()<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; for(</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">size</span><span class="keyword">();</span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">set</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">,</span><span class="default">NULL</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; * This function checks whether index<br />
&nbsp;&nbsp;&nbsp; * is within the array bound<br />
&nbsp;&nbsp;&nbsp; **/<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp; </span><span class="keyword">private function </span><span class="default">checkBound</span><span class="keyword">(</span><span class="default">$index</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$index </span><span class="keyword">&gt; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount</span><span class="keyword">-</span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$index </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'Array Index Out Of Bound Exception'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; *Removes the first element from the Vector <br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public function </span><span class="default">removeFirstElement</span><span class="keyword">()<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">'No Such Element'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$test </span><span class="keyword">=</span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!empty(</span><span class="default">$test</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementCount </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">elementData</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="82161""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#82161" class="date">29-Mar-2008 08:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is the shorter way to flatten a array:<br />
<span class="default">&lt;?php<br />
&nbsp; </span><span class="keyword">function </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$a </span><span class="keyword">as </span><span class="default">$k</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) </span><span class="default">$a</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]=(array)</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">call_user_func_array</span><span class="keyword">(</span><span class="default">array_merge</span><span class="keyword">,</span><span class="default">$a</span><span class="keyword">);<br />
&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81115""></a>
  <div class="note">
   <strong class="user">ms419 at freezone dot co dot uk</strong>
   <a href="#81115" class="date">14-Feb-2008 07:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function takes an array, a key and a value. If the key is not an array, it acts just like $array[$key] =&amp; $value; If the key is an array, it recurses in the array, creating nested arrays as necessary.<br />
<br />
Example:<br />
<br />
$array = array('A' =&gt; array('B' =&gt; 'phi'));<br />
$key = array('A', 'Z');<br />
$value = 'gamma';<br />
<br />
arraySet($array, $key, $value);<br />
<br />
$array should now be:<br />
<br />
array('A' =&gt; array('B' =&gt; 'phi', 'C' =&gt; 'gamma'));<br />
<br />
This is useful for constructing nested arrays from sets of filesystem paths (e.g. 'A/B/C') or structured variable names (e.g. 'A.B.C' or 'A[B][C]')<br />
<br />
Example:<br />
<br />
arraySet($array, preg_split('/\//', $path, -1, PREG_SPLIT_NO_EMPTY), $value);<br />
<br />
function arraySet(array &amp;$array, $key, &amp;$value)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (is_array($key)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $keyComponent = array_shift($key);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty($key)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$keyComponent] =&amp; $value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!is_array($array[$keyComponent])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array[$keyComponent] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; PHP_CodeSniffer_arraySet($array[$keyComponent], $key, $value);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $array[$key] =&amp; $value;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="81081""></a>
  <div class="note">
   <strong class="user">dennis at DONTSPAMME dot born05 dot nl</strong>
   <a href="#81081" class="date">13-Feb-2008 04:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I haven't completely figured out when or why an array gets referenced or copied, but it gave me quite the headache..<br />
<br />
So i wrote a function which recursively copies an array while preserving keys and also clones objects if encountered<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * make a recursive copy of an array <br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * @param array $aSource<br />
&nbsp;&nbsp; &nbsp; * @return array&nbsp; &nbsp; copy of source array<br />
&nbsp;&nbsp; &nbsp; */<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_copy </span><span class="keyword">(</span><span class="default">$aSource</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// check if input is really an array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aSource</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; throw new </span><span class="default">Exception</span><span class="keyword">(</span><span class="string">"Input is not an Array"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// initialize return array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRetAr </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get array keys<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aKeys </span><span class="keyword">= </span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$aSource</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// get array values<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aVals </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$aSource</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// loop through array and assign keys+values to new return array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">for (</span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$x</span><span class="keyword">&lt;</span><span class="default">count</span><span class="keyword">(</span><span class="default">$aKeys</span><span class="keyword">);</span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// clone if object<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_object</span><span class="keyword">(</span><span class="default">$aVals</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRetAr</span><span class="keyword">[</span><span class="default">$aKeys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]]=clone </span><span class="default">$aVals</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// recursively add array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} elseif (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$aVals</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">])) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRetAr</span><span class="keyword">[</span><span class="default">$aKeys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]]=</span><span class="default">array_copy </span><span class="keyword">(</span><span class="default">$aVals</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// assign just a plain scalar value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">} else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$aRetAr</span><span class="keyword">[</span><span class="default">$aKeys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]]=</span><span class="default">$aVals</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$aRetAr</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
I hope i can save someone else's aspirine with this ;)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80900""></a>
  <div class="note">
   <strong class="user">csorfab at gmail dot com</strong>
   <a href="#80900" class="date">06-Feb-2008 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here's a function I wrote to combine the values in an array in all different ways, and which returns a two-dimensional array as a byref result.<br />
<br />
E.g.<br />
<br />
if called:<br />
comb(array(1, 2, 3), $r);<br />
<br />
then $r would be:<br />
<br />
1 2 3<br />
1 3 2<br />
2 1 3<br />
2 3 1<br />
3 1 2<br />
3 2 1 <br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">comb</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, &amp;</span><span class="default">$rarr</span><span class="keyword">, </span><span class="default">$vtemp </span><span class="keyword">= array()){&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vtemp2 </span><span class="keyword">= </span><span class="default">$vtemp</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$vtemp2</span><span class="keyword">[] = </span><span class="default">$value</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$atemp </span><span class="keyword">= </span><span class="default">$arr</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$atemp</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$atemp</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">comb</span><span class="keyword">(</span><span class="default">$atemp</span><span class="keyword">, </span><span class="default">$rarr</span><span class="keyword">, </span><span class="default">$vtemp2</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$vtemp2 </span><span class="keyword">as </span><span class="default">$val</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$t</span><span class="keyword">[] = </span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$rarr</span><span class="keyword">[] = </span><span class="default">$t</span><span class="keyword">; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80839""></a>
  <div class="note">
   <strong class="user">christian dot reinecke at web dot de</strong>
   <a href="#80839" class="date">02-Feb-2008 10:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are two more functions handling string2array and access array by string. It's useful if you want to access an array in xpath-style, such as parse_ini_file return values with $process_sections = TRUE.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">createArrayByString</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$value </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) &gt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$splitter </span><span class="keyword">= </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$index </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$splitter</span><span class="keyword">); </span><span class="comment">// get first element<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return array(</span><span class="default">$index </span><span class="keyword">=&gt; </span><span class="default">$function</span><span class="keyword">(</span><span class="default">implode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$splitter</span><span class="keyword">), </span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">; <br />
}<br />
<br />
function </span><span class="default">accessArrayByString</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$default </span><span class="keyword">= </span><span class="default">NULL</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return empty(</span><span class="default">$string</span><span class="keyword">) ? </span><span class="default">$array </span><span class="keyword">: </span><span class="default">$default</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; @list (</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$rest</span><span class="keyword">) = </span><span class="default">explode</span><span class="keyword">(</span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">2</span><span class="keyword">); </span><span class="comment">// @ needed for last access<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$function </span><span class="keyword">= </span><span class="default">__FUNCTION__</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; ? </span><span class="default">$function</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">], </span><span class="default">$rest</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">, </span><span class="default">$default</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; : </span><span class="default">$default</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$string </span><span class="keyword">= </span><span class="string">"one.two.three.four"</span><span class="keyword">;<br />
</span><span class="default">$separator </span><span class="keyword">= </span><span class="string">"."</span><span class="keyword">;<br />
<br />
</span><span class="default">$array </span><span class="keyword">= </span><span class="default">createArrayByString</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">, </span><span class="string">"standard value"</span><span class="keyword">);<br />
</span><span class="default">$return </span><span class="keyword">= </span><span class="default">accessArrayByString</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">, </span><span class="default">$separator</span><span class="keyword">, </span><span class="string">"element not found"</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="comment">// should return array("one" =&gt; array("two" =&gt; array("three" =&gt; array("four" =&gt; "standard value"))))<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">); </span><span class="comment">// should return "standard value";<br />
</span><span class="default">?&gt;<br />
</span><br />
change the function name to what ever you want, the recursive call uses __FUNCTION__ for re-call.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80734""></a>
  <div class="note">
   <strong class="user">florian at egliselasauzaie dot fr</strong>
   <a href="#80734" class="date">30-Jan-2008 11:09</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I've created a class which is comparable to a Vector in C++;<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">class </span><span class="default">Vector </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$nb_elements</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; public </span><span class="default">$liste</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">Vector</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste </span><span class="keyword">= array ();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">push_back</span><span class="keyword">(</span><span class="default">$valeur</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (!empty (</span><span class="default">$valeur</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[] = </span><span class="default">$valeur</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">insert_at</span><span class="keyword">(</span><span class="default">$indice</span><span class="keyword">, </span><span class="default">$valeur</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$indice </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$indice </span><span class="keyword">&lt; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">$indice</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[</span><span class="default">$indice</span><span class="keyword">] = </span><span class="default">$valeur</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">remove_at</span><span class="keyword">(</span><span class="default">$indice</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$indice </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">$indice </span><span class="keyword">&lt; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">$indice</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">!= </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">[</span><span class="default">$i </span><span class="keyword">+</span><span class="default">1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">pop</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_pop</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; public function </span><span class="default">shift</span><span class="keyword">() {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">array_shift</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">nb_elements </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$this</span><span class="keyword">-&gt;</span><span class="default">liste</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80631""></a>
  <div class="note">
   <strong class="user">really quick function</strong>
   <a href="#80631" class="date">25-Jan-2008 09:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
function array_flatten($a){ //flattens multi-dim arrays (distroys keys)<br />
&nbsp;&nbsp;&nbsp; $ab = array(); if(!is_array($a)) return $ab;<br />
&nbsp;&nbsp;&nbsp; foreach($a as $value){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($value)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $ab = array_merge($ab,array_flatten($value));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; array_push($ab,$value);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return $ab;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80616""></a>
  <div class="note">
   <strong class="user">Jck_true (leave out the &amp;#39;_&amp;#39;  at gmail dot com)</strong>
   <a href="#80616" class="date">25-Jan-2008 11:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A usefull function that returns a flat array. <br />
I use it in a template system. Let the user pass a multidimensional array. Convert it using my function. Then use <br />
<span class="default">&lt;?php<br />
$array </span><span class="keyword">= </span><span class="default">flatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">,</span><span class="string">'{$'</span><span class="keyword">,</span><span class="string">'}'</span><span class="keyword">,</span><span class="string">'-&gt;'</span><span class="keyword">);<br />
echo </span><span class="default">str_replace</span><span class="keyword">(</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">),</span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">),</span><span class="default">$template</span><span class="keyword">)<br />
</span><span class="comment">/** <br />
* Flattens out an multidimension array<br />
* Using the last parameters you can define the new key based on the old path.<br />
* @param array $array A multidimension array <br />
* @param string $prefix Internal perfix parameter - leave empty.<br />
* @param string $start_string What string should start the final array key?<br />
* @param string $end_string What string should end the final array key?<br />
* @param string $seperator The string that should seperate the piecies in final array key path<br />
* @return array Returns the flat array<br />
*/<br />
</span><span class="keyword">function </span><span class="default">flatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$start_string</span><span class="keyword">= </span><span class="string">'{$'</span><span class="keyword">,</span><span class="default">$end_string</span><span class="keyword">= </span><span class="string">'}'</span><span class="keyword">,</span><span class="default">$seperator</span><span class="keyword">=</span><span class="string">'-&gt;'</span><span class="keyword">,</span><span class="default">$prefix</span><span class="keyword">=</span><span class="string">""</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$return </span><span class="keyword">= array();<br />
&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$return</span><span class="keyword">, </span><span class="default">Parser_method_replace</span><span class="keyword">::</span><span class="default">flatten</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$seperator</span><span class="keyword">,</span><span class="default">$start_string</span><span class="keyword">,</span><span class="default">$end_string</span><span class="keyword">,</span><span class="default">$seperator</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; } else<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$return </span><span class="keyword">[</span><span class="default">$start_string</span><span class="keyword">.</span><span class="default">$prefix</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="default">$end_string</span><span class="keyword">] = </span><span class="default">$value</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$return</span><span class="keyword">;<br />
}<br />
}<br />
</span><span class="default">?&gt;<br />
</span>Example: <br />
$template = 'My string with replacement {$test-&gt;subkey}';<br />
{$test-&gt;subkey} will get replaced with $array['test']['subkey']</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="80177""></a>
  <div class="note">
   <strong class="user">chaos dot global dot net at gmail dot com</strong>
   <a href="#80177" class="date">03-Jan-2008 12:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
if some one will need to convert array to php code use this function:<br />
<br />
DEFINE('OFFSET_DELIMETER', "\t");<br />
<br />
function array2php($array, $offset = OFFSET_DELIMETER)&nbsp; {<br />
&nbsp;&nbsp;&nbsp; $text = '';<br />
&nbsp;&nbsp;&nbsp; foreach($array as $k =&gt; $v) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_array($v)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text .= "{$offset}'{$k}' =&gt; array(\n".array2php($v, $offset.OFFSET_DELIMETER)."$offset)";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $text .= "{$offset}'{$k}' =&gt; ".(is_string($v)? "'$v'": $v);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $text .= ",\n";<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if ($len = strlen($text)) $text[$len - 2] = " ";<br />
&nbsp;&nbsp;&nbsp; return $text;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78555""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#78555" class="date">17-Oct-2007 01:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding cyberchrist at futura dot net's function. It makes an unnecessary array_merge(); the elements of $b that are merged with those of $a are immediately removed again by the array_diff(). The "limiting to known values" is entirely unnecessary, in other words: arrays already only contain "known values".<br />
<br />
Also, the description and function only address the issue of whether $a is a subset of $b, not whether it is a proper subset. For $a to be a proper subset of $b, it must also be the case that $b is not a subset of $a.<br />
<br />
Taking those points into account (and a personal aesthetic dislike of "if(test) return true; else return false;" gives:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">is_subset</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">array_diff</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">,</span><span class="default">$b</span><span class="keyword">))==</span><span class="default">0</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">is_proper_subset</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">is_subset</span><span class="keyword">(</span><span class="default">$a</span><span class="keyword">, </span><span class="default">$b</span><span class="keyword">) &amp;&amp; !</span><span class="default">is_subset</span><span class="keyword">(</span><span class="default">$b</span><span class="keyword">, </span><span class="default">$a</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="78502""></a>
  <div class="note">
   <strong class="user">cyberchrist at futura dot net</strong>
   <a href="#78502" class="date">15-Oct-2007 03:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Lately, dealing with databases, I've been finding myself needing to know if one array, $a, is a proper subset of $b.<br />
<br />
Mathematically, this is asking (in set theory) [excuse the use of u and n instead of proper Unicode):<br />
&nbsp;<br />
( A u B ) n ( ~ B )<br />
<br />
What this does is it first limits to known values, then looks for anything outside of B but in the union of A and B (which would be those things in A which are not also in B).<br />
<br />
If any value exists in this set, then A is NOT a proper subset of B, because a value exists in A but not in B.&nbsp; For A to be a proper subset, all values in A must be in B.<br />
<br />
I'm sure this could easily be done any number of ways but this seems to work for me.&nbsp; It's not got a lot of error detection such as sterilizing inputs or checking input types.<br />
<br />
// bool array_subset( array, array )<br />
// Returns true if $a is a proper subset of $b, returns false otherwise.<br />
<br />
function array_subset( $a, $b )<br />
{<br />
&nbsp;&nbsp;&nbsp; if( count( array_diff( array_merge($a,$b), $b)) == 0 )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return true;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return false;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="77454""></a>
  <div class="note">
   <strong class="user">Kazuyoshi Tlacaelel</strong>
   <a href="#77454" class="date">30-Aug-2007 08:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/**<br />
&nbsp;* converts a multidimensional array to a flat array<br />
&nbsp;*<br />
&nbsp;* trying to keep the original names of the keys<br />
&nbsp;* if repeated keys are found a hash will be added to the<br />
&nbsp;* keys trying to keep as much as possible of the original<br />
&nbsp;* key context<br />
&nbsp;*<br />
&nbsp;* september 30 2007<br />
&nbsp;* <br />
&nbsp;* PHP version 5<br />
&nbsp;*<br />
&nbsp;* @license&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; GPL<br />
&nbsp;*<br />
&nbsp;*/<br />
<br />
</span><span class="default">$array </span><span class="keyword">= array ( </span><span class="default">0 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">2</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">3</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">4</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; <br />
array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">5</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">6</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">7</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">8</span><span class="keyword">,),),), </span><span class="default">3 </span><span class="keyword">=&gt; array ( <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">0 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">9</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">10</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">11</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">12</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">13</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">14</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">15</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">16</span><span class="keyword">,),),),), <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">17</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">18</span><span class="keyword">,),),), </span><span class="default">1 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">19</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">20</span><span class="keyword">,), <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">21</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">22</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">23</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">24</span><span class="keyword">, <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">25</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">26</span><span class="keyword">, </span><span class="default">2 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">27</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">28</span><span class="keyword">,),),),), <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array ( </span><span class="default">0 </span><span class="keyword">=&gt; </span><span class="default">29</span><span class="keyword">, </span><span class="default">1 </span><span class="keyword">=&gt; </span><span class="default">30</span><span class="keyword">,),),);<br />
<br />
</span><span class="comment">/**<br />
&nbsp;* transforms a multidimensional array to a flat array<br />
&nbsp;*<br />
&nbsp;* the parameter is referenced <br />
&nbsp;* so no returning value is needed<br />
&nbsp;* @param array $array the multidimensional array to flat<br />
&nbsp;* @return void<br />
&nbsp;*/ <br />
</span><span class="keyword">function </span><span class="default">array_flatten</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">has_arrays</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$item</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$item</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">copy_array</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$array_key</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array2 </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$array_key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$array_key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array2 </span><span class="keyword">as </span><span class="default">$subkey </span><span class="keyword">=&gt; </span><span class="default">$subvalue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">array_key_exists</span><span class="keyword">(</span><span class="default">$subkey</span><span class="keyword">, </span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">generate_unique_key</span><span class="keyword">(</span><span class="default">$subkey</span><span class="keyword">)] = </span><span class="default">$subvalue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$subkey</span><span class="keyword">] = </span><span class="default">$subvalue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">generate_unique_key</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)&gt;</span><span class="default">8</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$key </span><span class="keyword">= </span><span class="default">$key</span><span class="keyword">[</span><span class="default">0</span><span class="keyword">] . </span><span class="default">$key</span><span class="keyword">[</span><span class="default">1</span><span class="keyword">] . </span><span class="default">$key</span><span class="keyword">[</span><span class="default">2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id </span><span class="keyword">= </span><span class="default">$key </span><span class="keyword">. </span><span class="string">'_'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$uid </span><span class="keyword">= </span><span class="default">uniqid</span><span class="keyword">();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len </span><span class="keyword">= </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$uid</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$max </span><span class="keyword">= (</span><span class="default">9 </span><span class="keyword">- </span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$c </span><span class="keyword">= </span><span class="default">$len</span><span class="keyword">; ; </span><span class="default">$c </span><span class="keyword">--) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$id </span><span class="keyword">.= </span><span class="default">$uid</span><span class="keyword">[</span><span class="default">$c</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$c </span><span class="keyword">== (</span><span class="default">$len </span><span class="keyword">- </span><span class="default">$max</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$id</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">get_array_indexes</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret_array </span><span class="keyword">= array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ret_array</span><span class="keyword">[] = </span><span class="default">$key</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$ret_array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">has_arrays</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">get_array_indexes</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) as </span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">copy_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_flatten</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">array_multisort</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">var_export</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; *&nbsp; OUTPUT <br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; *&nbsp; array (<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; 0 =&gt; 1,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_403767b6' =&gt; 2,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_793767b6' =&gt; 3,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_8a3767b6' =&gt; 4,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_454767b6' =&gt; 5,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_564767b6' =&gt; 6,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_035767b6' =&gt; 7,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_345767b6' =&gt; 8,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_e74767b6' =&gt; 9,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_f84767b6' =&gt; 10,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_855767b6' =&gt; 11,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_a65767b6' =&gt; 12,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_4e5767b6' =&gt; 13,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_6f5767b6' =&gt; 14,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_566767b6' =&gt; 15,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_876767b6' =&gt; 16,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_5b4767b6' =&gt; 17,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_6c4767b6' =&gt; 18,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_d43767b6' =&gt; 19,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; 1 =&gt; 20,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_4e3767b6' =&gt; 21,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_5f3767b6' =&gt; 22,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_ad4767b6' =&gt; 23,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_ce4767b6' =&gt; 24,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_485767b6' =&gt; 25,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_695767b6' =&gt; 26,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_116767b6' =&gt; 27,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_426767b6' =&gt; 28,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '0_814767b6' =&gt; 29,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; &nbsp; '1_924767b6' =&gt; 30,<br />
&nbsp;&nbsp; &nbsp; *&nbsp; )<br />
&nbsp;&nbsp; &nbsp; */<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76796""></a>
  <div class="note">
   <strong class="user">mo dot longman at gmail dot com</strong>
   <a href="#76796" class="date">31-Jul-2007 08:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
to 2g4wx3:<br />
i think better way for this is using JSON, if you have such module in your PHP. See json.org.<br />
<br />
to convert JS array to JSON string: arr.toJSONString();<br />
to convert JSON string to PHP array: json_decode($jsonString);<br />
<br />
You can also stringify objects, numbers, etc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76525""></a>
  <div class="note">
   <strong class="user">g4wx3</strong>
   <a href="#76525" class="date">19-Jul-2007 11:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed a function to convert a php array into a javascript array. <br />
No problem i found it on "the net".<br />
<br />
But the function i found wasn't good enough, instead of return a string with javascript-array it echoed directly everything.<br />
I wanted to write the string to a file, when calling the function out of my function libary.<br />
<br />
Secondly, there where minor "bugs" in the script, when you're original array contained characters like line breaks(\r\n,..), or quotes('), it would hack up the javascript array<br />
<br />
Sow, i changed the function and fixed the bug.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">//SUPER COOL : <a href="http://www.communitymx.com/content/article.cfm?page=3&amp;cid=7CD16" rel="nofollow" target="_blank">http://www.communitymx.com/content/article.cfm?page=3&amp;cid=7CD16</a><br />
//Checkout:&nbsp; REVERSE: <a href="http://www.hscripts.com/tutorials/php/jsArrayToPHP.php" rel="nofollow" target="_blank">http://www.hscripts.com/tutorials/php/jsArrayToPHP.php</a><br />
//Convert a PHP array to a JavaScript one (rev. 4)<br />
//Changlog by g4wx3: echo replaced by $output, added function output<br />
</span><span class="keyword">function </span><span class="default">output</span><span class="keyword">(</span><span class="default">$string</span><span class="keyword">) </span><span class="comment">//make javascript ready<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">( array( </span><span class="string">'\\' </span><span class="keyword">, </span><span class="string">'\'' </span><span class="keyword">), array(</span><span class="string">'\\\\'</span><span class="keyword">, </span><span class="string">'\\\''</span><span class="keyword">) , </span><span class="default">$string</span><span class="keyword">); </span><span class="comment">//-&gt; for javascript array<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$string </span><span class="keyword">= </span><span class="default">str_replace</span><span class="keyword">(&nbsp; array(</span><span class="string">"\r\n"</span><span class="keyword">, </span><span class="string">"\r"</span><span class="keyword">, </span><span class="string">"\n"</span><span class="keyword">) , </span><span class="string">'&lt;br&gt;' </span><span class="keyword">, </span><span class="default">$string</span><span class="keyword">);&nbsp; &nbsp; </span><span class="comment">//nl2br<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">$string</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
function </span><span class="default">arrayToJS4</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$baseName </span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Write out the initial array definition<br />
//v4&nbsp; &nbsp; echo ($baseName . " = new Array(); \r\n ");<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">= </span><span class="default">$baseName </span><span class="keyword">. </span><span class="string">" = new Array(); \r\n "</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Reset the array loop pointer<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">reset </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//Use list() and each() to loop over each key/value<br />
&nbsp;&nbsp;&nbsp; //pair of the array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">while (list(</span><span class="default">$key</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">) = </span><span class="default">each</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_numeric</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//A numeric key, so output as usual<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$outKey </span><span class="keyword">= </span><span class="string">"[" </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">"]"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//A string key, so output as a string<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$outKey </span><span class="keyword">= </span><span class="string">"['" </span><span class="keyword">. </span><span class="default">$key </span><span class="keyword">. </span><span class="string">"']"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//The value is another array, so simply call<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; //another instance of this function to handle it<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">arrayToJS4</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$baseName </span><span class="keyword">. </span><span class="default">$outKey</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Output the key declaration<br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ($baseName . $outKey . " = ");&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$baseName </span><span class="keyword">. </span><span class="default">$outKey </span><span class="keyword">. </span><span class="string">" = "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Now output the value<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (</span><span class="default">is_string</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Output as a string, as we did before&nbsp; &nbsp; &nbsp;&nbsp; <br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ("'" . output($value) . "'; \r\n ");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"'" </span><span class="keyword">. </span><span class="default">output</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) . </span><span class="string">"'; \r\n "</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">false</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Explicitly output false<br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ("false; \r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"false; \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">NULL</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Explicitly output null<br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ("null; \r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"null; \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if (</span><span class="default">$value </span><span class="keyword">=== </span><span class="default">true</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Explicitly output true<br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ("true; \r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="string">"true; \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//Output the value directly otherwise<br />
//v4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo ($value . "; \r\n");<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$output </span><span class="keyword">.= </span><span class="default">$value </span><span class="keyword">. </span><span class="string">"; \r\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
return </span><span class="default">$output</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span>You can use this for printing $_GET array, for example</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75787""></a>
  <div class="note">
   <strong class="user">peanutpad at msn dot com</strong>
   <a href="#75787" class="date">16-Jun-2007 12:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
heres a function from <a href="http://www.linksback.org&nbsp; Feedback welcome, of course!&nbsp; Public domain, yadda yadda." rel="nofollow" target="_blank">http://www.linksback.org&nbsp; Feedback welcome, of course!&nbsp; Public domain, yadda yadda.</a><br />
<br />
function mySort(&amp;$array,$key) {<br />
&nbsp;&nbsp;&nbsp; if (!is_array($array) || count($array) == 0) return true;<br />
&nbsp;&nbsp;&nbsp; $assocSortCompare&nbsp; = '$a = $a["'.$key.'"]; $b = $b["'.$key.'"];';<br />
<br />
&nbsp;&nbsp;&nbsp; if (is_numeric($array[0][$key])) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $assocSortCompare.= ' return ($a == $b) ? 0 : (($a &lt; $b) ? -1 : 1);';<br />
&nbsp;&nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $assocSortCompare.= ' return strcmp($a,$b);';<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; $assocSortCompare = create_function('$a,$b',$assocSortCompare);<br />
&nbsp;&nbsp;&nbsp; return usort($array,$assocSortCompare);<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75677""></a>
  <div class="note">
   <strong class="user">webdev at svbeatrix dot com</strong>
   <a href="#75677" class="date">11-Jun-2007 06:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Bugs happen, but how can people post functions that WON'T EVEN COMPILE!&nbsp; I truly detest finding a cool code snippet or function and then having to debug them. Sorry for the rant, but I have experienced this scenario a number of times.&nbsp; TEST YOUR CODE, THEN POST!<br />
<br />
Here is a revised and corrected previously posted function ArrayDepth, which had 3 bugs and yes, would not compile. <br />
<br />
function ArrayDepth($Array,$DepthCount=-1) {<br />
// Find maximum depth of an array<br />
// Usage: int ArrayDepth( array $array )<br />
// returns integer with max depth<br />
// if Array is a string or an empty array it will return 0<br />
&nbsp; $DepthArray=array(0);<br />
&nbsp; $DepthCount++;<br />
&nbsp; $Depth = 0;<br />
&nbsp; if (is_array($Array))<br />
&nbsp;&nbsp;&nbsp; foreach ($Array as $Key =&gt; $Value) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; $DepthArray[]=ArrayDepth($Value,$DepthCount);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return $DepthCount;<br />
&nbsp; return max($DepthCount,max($DepthArray));<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75427""></a>
  <div class="note">
   <strong class="user">sid dot pasquale at gmail dot com</strong>
   <a href="#75427" class="date">29-May-2007 11:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
</span><span class="comment">/* This function allow you to transform a multidimensional array<br />
&nbsp;&nbsp; in a simple monodimensional array.<br />
&nbsp;&nbsp; Usage: array_walk($oldarray, 'flatten_array', &amp;$newarray);<br />
&nbsp;&nbsp; For example, this code below shows to you:<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; 2<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [2] =&gt; 3<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [3] =&gt; 4<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
*/<br />
<br />
</span><span class="keyword">function </span><span class="default">flatten_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$key</span><span class="keyword">, &amp;</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="string">'flatten_array'</span><span class="keyword">, &amp;</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;<br />
}<br />
&nbsp;<br />
</span><span class="default">$oldarray </span><span class="keyword">= array(<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">1 </span><span class="keyword">=&gt; array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">),<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">2 </span><span class="keyword">=&gt; array(</span><span class="default">3</span><span class="keyword">,</span><span class="default">4</span><span class="keyword">)<br />
);<br />
</span><span class="default">$newarray </span><span class="keyword">= array();<br />
</span><span class="default">array_walk</span><span class="keyword">(</span><span class="default">$oldarray</span><span class="keyword">, </span><span class="string">'flatten_array'</span><span class="keyword">, &amp;</span><span class="default">$newarray</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$oldarray</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$newarray</span><span class="keyword">);<br />
echo </span><span class="string">"&lt;/pre&gt;"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="74569""></a>
  <div class="note">
   <strong class="user">info at dyflexis dot nl</strong>
   <a href="#74569" class="date">17-Apr-2007 10:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A modernized version of the flatten_array() functies written by<br />
<br />
davidj at boundlessgallery dot DISLIKESPAM dot com<br />
on 02-Apr-2004 03:10<br />
<br />
This function is able to work with associative arrays<br />
<br />
<span class="default">&lt;?php <br />
</span><span class="keyword">function </span><span class="default">flatten_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$size</span><span class="keyword">=</span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$keys</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$x </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$x </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$x</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$element </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]];<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$results </span><span class="keyword">= </span><span class="default">flatten_array</span><span class="keyword">(</span><span class="default">$element</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sr </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$sk</span><span class="keyword">=</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$results</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; for(</span><span class="default">$y </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$y </span><span class="keyword">&lt; </span><span class="default">$sr</span><span class="keyword">; </span><span class="default">$y</span><span class="keyword">++) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flat_array</span><span class="keyword">[</span><span class="default">$sk</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">]] = </span><span class="default">$results</span><span class="keyword">[</span><span class="default">$sk</span><span class="keyword">[</span><span class="default">$y</span><span class="keyword">]];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$flat_array</span><span class="keyword">[</span><span class="default">$keys</span><span class="keyword">[</span><span class="default">$x</span><span class="keyword">]] = </span><span class="default">$element</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$flat_array</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73976""></a>
  <div class="note">
   <strong class="user">info at joolee dot nl</strong>
   <a href="#73976" class="date">19-Mar-2007 01:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A slight modification in the arraytostring function, posted below. This function lists an array the same way you would define it in PHP.<br />
<br />
<span class="default">&lt;?PHP<br />
</span><span class="keyword">function </span><span class="default">arraytostring</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$depth </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp; if(</span><span class="default">$depth </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$tab </span><span class="keyword">= </span><span class="default">implode</span><span class="keyword">(</span><span class="string">''</span><span class="keyword">, </span><span class="default">array_fill</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">, </span><span class="string">"\t"</span><span class="keyword">));<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">.=</span><span class="string">"array(\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key</span><span class="keyword">=&gt;</span><span class="default">$value</span><span class="keyword">)<br />
&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)==</span><span class="string">')'</span><span class="keyword">)&nbsp; &nbsp; </span><span class="default">$text </span><span class="keyword">.= </span><span class="string">','</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$text</span><span class="keyword">.=</span><span class="default">$tab</span><span class="keyword">.</span><span class="string">"\t"</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'"'</span><span class="keyword">.</span><span class="string">" =&gt; "</span><span class="keyword">.</span><span class="default">arraytostring</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$text</span><span class="keyword">.=</span><span class="default">$tab</span><span class="keyword">.</span><span class="string">"\t"</span><span class="keyword">.</span><span class="string">"\"</span><span class="default">$key</span><span class="string">\" =&gt; \"</span><span class="default">$value</span><span class="string">\""</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (</span><span class="default">$count</span><span class="keyword">!=</span><span class="default">$x</span><span class="keyword">) </span><span class="default">$text</span><span class="keyword">.=</span><span class="string">",\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; </span><span class="default">$text</span><span class="keyword">.=</span><span class="string">"\n"</span><span class="keyword">.</span><span class="default">$tab</span><span class="keyword">.</span><span class="string">")\n"</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$text</span><span class="keyword">, -</span><span class="default">4</span><span class="keyword">, </span><span class="default">4</span><span class="keyword">)==</span><span class="string">'),),'</span><span class="keyword">)</span><span class="default">$text</span><span class="keyword">.=</span><span class="string">'))'</span><span class="keyword">;<br />
<br />
&nbsp;&nbsp; return </span><span class="default">$text</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="73529""></a>
  <div class="note">
   <strong class="user">rune at zedeler dot dk</strong>
   <a href="#73529" class="date">28-Feb-2007 05:42</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Notice that keys are considered equal if they are "=="-equal. That is:<br />
<br />
&lt;?<br />
$a = array();<br />
$a[1] = 'this is the first value';<br />
$a[true] = 'this value overrides the first value';<br />
$a['1'] = 'so does this one';<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72388""></a>
  <div class="note">
   <strong class="user">Mark Lindeman</strong>
   <a href="#72388" class="date">17-Jan-2007 11:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Very simple solution for changing the key of an associative array, of course it will fail in a lot of scenarios, but will do the trick in simple arrays:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">replace_key</span><span class="keyword">(&amp;</span><span class="default">$input</span><span class="keyword">, </span><span class="default">$from_key</span><span class="keyword">, </span><span class="default">$to_key</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$input </span><span class="keyword">= </span><span class="default">unserialize</span><span class="keyword">(</span><span class="default">str_replace</span><span class="keyword">(</span><span class="string">':"'</span><span class="keyword">.</span><span class="default">$from_key</span><span class="keyword">.</span><span class="string">'";'</span><span class="keyword">, </span><span class="string">':"'</span><span class="keyword">.</span><span class="default">$to_key</span><span class="keyword">.</span><span class="string">'";'</span><span class="keyword">,</span><span class="default">serialize</span><span class="keyword">(</span><span class="default">$input</span><span class="keyword">)));<br />
}<br />
<br />
</span><span class="default">$array </span><span class="keyword">=array(</span><span class="string">"a"</span><span class="keyword">=&gt;</span><span class="default">1</span><span class="keyword">, </span><span class="string">"B"</span><span class="keyword">=&gt;</span><span class="default">2</span><span class="keyword">, </span><span class="string">"c"</span><span class="keyword">=&gt;</span><span class="default">3</span><span class="keyword">);<br />
</span><span class="default">replace_key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">"B"</span><span class="keyword">, </span><span class="string">"b"</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Output:<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [a] =&gt; 1<br />
&nbsp;&nbsp;&nbsp; [b] =&gt; 2<br />
&nbsp;&nbsp;&nbsp; [c] =&gt; 3<br />
)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71119""></a>
  <div class="note">
   <strong class="user">elkabong at samsalisbury dot co dot uk</strong>
   <a href="#71119" class="date">13-Nov-2006 12:43</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An improvement to the array_deep_copy function I posted ages ago which takes a 'snapshot' of an array, making copies of all actual values referenced... Now it is possible to prevent it traversing the tree forever when an array references itself. You can set the default $maxdepth to anything you like, you should never call this function with the $depth specified!<br />
<span class="default">&lt;?php<br />
</span><span class="comment">/* Make a complete deep copy of an array replacing <br />
references with deep copies until a certain depth is reached<br />
($maxdepth) whereupon references are copied as-is...&nbsp; */<br />
</span><span class="keyword">function </span><span class="default">array_deep_copy </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, &amp;</span><span class="default">$copy</span><span class="keyword">, </span><span class="default">$maxdepth</span><span class="keyword">=</span><span class="default">50</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$depth </span><span class="keyword">&gt; </span><span class="default">$maxdepth</span><span class="keyword">) { </span><span class="default">$copy </span><span class="keyword">= </span><span class="default">$array</span><span class="keyword">; return; }<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$copy</span><span class="keyword">)) </span><span class="default">$copy </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; &amp;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">array_deep_copy</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">],</span><span class="default">$maxdepth</span><span class="keyword">,++</span><span class="default">$depth</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="comment"># call it like this:<br />
<br />
</span><span class="default">array_deep_copy</span><span class="keyword">(</span><span class="default">$array_to_be_copied</span><span class="keyword">,</span><span class="default">$deep_copy_of_array</span><span class="keyword">,</span><span class="default">$maxdepth</span><span class="keyword">);<br />
</span><span class="default">?&gt;<br />
</span>Hope someone finds it useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69247""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69247" class="date">28-Aug-2006 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding my own posting 2 postings down about the function ArrayDepth() to find the maximum depth of a multidimensional array:<br />
<br />
A number of functions for counting array dimensions have been posted. And I tried using them. Yet, if at all they only return the depth of the first branch of the array. They can not handle arrays where a later path holds a more dimension than the first.<br />
<br />
My version will check all paths down the array and return the maximum depth. That's why I posted it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69240""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69240" class="date">28-Aug-2006 02:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here are two functions Array2String() and String2Array() based on functions posted below by daenders AT yahoo DOT com.<br />
<br />
An improvement handling NULL values correctly was posted by designatevoid at gmail dot com.<br />
<br />
My version also solves the NULL-value-problem plus keeps support of multidimensional arrays.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// convert a multidimensional array to url save and encoded string<br />
// usage: string Array2String( array Array )<br />
<br />
</span><span class="keyword">function </span><span class="default">Array2String</span><span class="keyword">(</span><span class="default">$Array</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$Return</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$NullValue</span><span class="keyword">=</span><span class="string">"^^^"</span><span class="keyword">;<br />
&nbsp; foreach (</span><span class="default">$Array </span><span class="keyword">as </span><span class="default">$Key </span><span class="keyword">=&gt; </span><span class="default">$Value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ReturnValue</span><span class="keyword">=</span><span class="string">'^^array^'</span><span class="keyword">.</span><span class="default">Array2String</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ReturnValue</span><span class="keyword">=(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">)&gt;</span><span class="default">0</span><span class="keyword">)?</span><span class="default">$Value</span><span class="keyword">:</span><span class="default">$NullValue</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Return</span><span class="keyword">.=</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$Key</span><span class="keyword">)) . </span><span class="string">'|' </span><span class="keyword">. </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">base64_encode</span><span class="keyword">(</span><span class="default">$ReturnValue</span><span class="keyword">)).</span><span class="string">'||'</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$Return</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,-</span><span class="default">2</span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
<span class="default">&lt;?php<br />
</span><span class="comment">// convert a string generated with Array2String() back to the original (multidimensional) array<br />
// usage: array String2Array ( string String)<br />
<br />
</span><span class="keyword">function </span><span class="default">String2Array</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$Return</span><span class="keyword">=array();<br />
&nbsp; </span><span class="default">$String</span><span class="keyword">=</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$String</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$TempArray</span><span class="keyword">=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'||'</span><span class="keyword">,</span><span class="default">$String</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$NullValue</span><span class="keyword">=</span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">base64_encode</span><span class="keyword">(</span><span class="string">"^^^"</span><span class="keyword">));<br />
&nbsp; foreach (</span><span class="default">$TempArray </span><span class="keyword">as </span><span class="default">$TempValue</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; list(</span><span class="default">$Key</span><span class="keyword">,</span><span class="default">$Value</span><span class="keyword">)=</span><span class="default">explode</span><span class="keyword">(</span><span class="string">'|'</span><span class="keyword">,</span><span class="default">$TempValue</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$DecodedKey</span><span class="keyword">=</span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$Key</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$Value</span><span class="keyword">!=</span><span class="default">$NullValue</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$ReturnValue</span><span class="keyword">=</span><span class="default">base64_decode</span><span class="keyword">(</span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; if(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$ReturnValue</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">)==</span><span class="string">'^^array^'</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ReturnValue</span><span class="keyword">=</span><span class="default">String2Array</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$ReturnValue</span><span class="keyword">,</span><span class="default">8</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Return</span><span class="keyword">[</span><span class="default">$DecodedKey</span><span class="keyword">]=</span><span class="default">$ReturnValue</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$Return</span><span class="keyword">[</span><span class="default">$DecodedKey</span><span class="keyword">]=</span><span class="default">NULL</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$Return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69237""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69237" class="date">28-Aug-2006 01:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Here is a function to find out the maximum depth of a multidimensional array.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// return depth of given array<br />
// if Array is a string ArrayDepth() will return 0<br />
// usage: int ArrayDepth(array Array)<br />
<br />
</span><span class="keyword">function </span><span class="default">ArrayDepth</span><span class="keyword">(</span><span class="default">$Array</span><span class="keyword">,</span><span class="default">$DepthCount</span><span class="keyword">=-</span><span class="default">1</span><span class="keyword">,</span><span class="default">$DepthArray</span><span class="keyword">=array()) {<br />
&nbsp; </span><span class="default">$DepthCount</span><span class="keyword">++;<br />
&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$Array</span><span class="keyword">))<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$Array </span><span class="keyword">as </span><span class="default">$Key </span><span class="keyword">=&gt; </span><span class="default">$Value</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$DepthArray</span><span class="keyword">[]=</span><span class="default">ArrayDepth</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">,</span><span class="default">$DepthCount</span><span class="keyword">);<br />
&nbsp; else<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$DepthCount</span><span class="keyword">;<br />
&nbsp; foreach(</span><span class="default">$DepthArray </span><span class="keyword">as </span><span class="default">$Value</span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Depth</span><span class="keyword">=</span><span class="default">$Value</span><span class="keyword">&gt;</span><span class="default">$Depth</span><span class="keyword">?</span><span class="default">$Value</span><span class="keyword">:</span><span class="default">$Depth</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">$Depth</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="69235""></a>
  <div class="note">
   <strong class="user">ob at babcom dot biz</strong>
   <a href="#69235" class="date">28-Aug-2006 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the function of spam at madhermit dot net from January 9th 2006:<br />
<br />
That function only preserves the deepest keys and values.<br />
If you try to flatten an array with that function where the deepest instance of keys might be the same where as keys in the "key-path" are different, values will be overwritten.<br />
<br />
So here is a function that preserves the whole key-path and the keys of the flattened array will be string keys consisting of the key-path separated by $Separator.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// flatten multidimensional array to one dimension<br />
// preserves keys by generating a key for the flattened array which consists of the <br />
// key-path of the multidimensional array separated by $Separator<br />
// usage: array ArrayFlatten( array Array [, string Separator] )<br />
<br />
</span><span class="keyword">function </span><span class="default">ArrayFlatten</span><span class="keyword">(</span><span class="default">$Array</span><span class="keyword">,</span><span class="default">$Separator</span><span class="keyword">=</span><span class="string">"_"</span><span class="keyword">,</span><span class="default">$FlattenedKey</span><span class="keyword">=</span><span class="string">''</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$FlattenedArray</span><span class="keyword">=Array();<br />
&nbsp; foreach(</span><span class="default">$Array </span><span class="keyword">as </span><span class="default">$Key </span><span class="keyword">=&gt; </span><span class="default">$Value</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">is_Array</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$FlattenedArray</span><span class="keyword">=</span><span class="default">Array_merge</span><span class="keyword">(</span><span class="default">$FlattenedArray</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">ArrayFlatten</span><span class="keyword">(</span><span class="default">$Value</span><span class="keyword">,</span><span class="default">$Separator</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$FlattenedKey</span><span class="keyword">)&gt;</span><span class="default">0<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">?</span><span class="default">$FlattenedKey</span><span class="keyword">.</span><span class="default">$Separator<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">:</span><span class="string">""</span><span class="keyword">).</span><span class="default">$Key</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; );<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$FlattenedArray</span><span class="keyword">[</span><span class="default">$FlattenedKey</span><span class="keyword">.</span><span class="default">$Separator</span><span class="keyword">.</span><span class="default">$Key</span><span class="keyword">]=</span><span class="default">$Value</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$FlattenedArray</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68925""></a>
  <div class="note">
   <strong class="user">sergio at {NO_SPAM_PLEASE]inservibile dot org</strong>
   <a href="#68925" class="date">16-Aug-2006 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
In a pratical problem, I was involved in a system of queries giving the behaviour of all combinations of some parameters. How to write those queries?<br />
The problem was to generate automatically every possible combination of those parameters. I didn't find a function and I wrote it.<br />
(Naturally, a different way could be to build a binary sequence, but I find this function more compact and useful).<br />
So, consider an array of objects and suppose to need all possibile combinations of those objects. Here is the function, that could be useful for some folk.<br />
Enjoy.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">combinations</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; I want to generate an array of combinations, i.e. an array whose elements are arrays<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; composed by the elements of the starting object, combined in all possible ways.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; The empty array must be an element of the target array.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$combinations</span><span class="keyword">=array(array()); </span><span class="comment"># don't forget the empty arrangement!<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /*<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Built the target array, the algorithm is to repeat the operations below for each object of the starting array:<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - take the object from the starting array;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - generate all arrays given by the target array elements merged with the current object;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - add every new combination to the target array (the array of arrays);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; - add the current object (as a vector) to the target array, as a combination of one element.<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$elements </span><span class="keyword">as </span><span class="default">$element</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_combinations</span><span class="keyword">=array(); </span><span class="comment"># temporary array, see below<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">foreach (</span><span class="default">$combinations </span><span class="keyword">as </span><span class="default">$combination</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new_combination</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$combination</span><span class="keyword">,(array)</span><span class="default">$element</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment"># I cannot merge directly with the main array ($combinations) because I'm in the foreach cycle<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; # I use a temporary array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$new_combinations</span><span class="keyword">,</span><span class="default">$new_combination</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$combinations</span><span class="keyword">=</span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$combinations</span><span class="keyword">,</span><span class="default">$new_combinations</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$combinations</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; }<br />
</span><span class="default">?&gt;<br />
</span><br />
To test the function:<br />
<br />
<span class="default">&lt;?php<br />
$elements</span><span class="keyword">=array(</span><span class="string">'bitter'</span><span class="keyword">,</span><span class="string">'sour'</span><span class="keyword">,</span><span class="string">'salty'</span><span class="keyword">,</span><span class="string">'sweet'</span><span class="keyword">);<br />
</span><span class="default">print_r</span><span class="keyword">(</span><span class="default">combinations</span><span class="keyword">(</span><span class="default">$elements</span><span class="keyword">));<br />
</span><span class="default">?&gt;<br />
</span><br />
The exemple was suggested in 6th century BC.<br />
See why on: <a href="http://en.wikipedia.org/wiki/Combinatorics#Overview_and_history" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Combinatorics#Overview_and_history</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68280""></a>
  <div class="note">
   <strong class="user">za at byza dot it</strong>
   <a href="#68280" class="date">20-Jul-2006 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Updated functions for moving element between associative arrays using a numeric index.<br />
<br />
Sample:<br />
$a=array("04"=&gt;"alpha",4=&gt;"bravo","c"=&gt;"charlie","d"=&gt;"delta");<br />
$b=array_move($a,4,2);<br />
<br />
Move element "bravo" after "delta" keeping keys.<br />
Old function probably goes wrong moving "alpha": caused by array_search that match numeric index 4 with "04" (string).<br />
<br />
Follow:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// array functions - 20/07/2006 12.28<br />
<br />
</span><span class="keyword">if(!</span><span class="default">defined</span><span class="keyword">(</span><span class="string">"ARRAY_FUNCS"</span><span class="keyword">)) {&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Swap 2 elements in array preserving keys. <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_swap</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key1</span><span class="keyword">,</span><span class="default">$key2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v1</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v2</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i</span><span class="keyword">===</span><span class="default">$key1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$key2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">$v2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if(</span><span class="default">$i</span><span class="keyword">===</span><span class="default">$key2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$key1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">$v1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">//&nbsp; Get a key position in array<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_kpos</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$key</span><span class="keyword">===</span><span class="default">$i</span><span class="keyword">) return </span><span class="default">$x</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Return key by position<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_kbypos</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$pos</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$pos</span><span class="keyword">==</span><span class="default">$x</span><span class="keyword">++) return </span><span class="default">$i</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Move an element inside an array preserving keys <br />
&nbsp;&nbsp;&nbsp; // $relpos should be like -1, +2... <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_move</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$relpos</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(!</span><span class="default">$relpos</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from</span><span class="keyword">=</span><span class="default">array_kpos</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$from</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">) return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$to</span><span class="keyword">=</span><span class="default">$from</span><span class="keyword">+</span><span class="default">$relpos</span><span class="keyword">+(</span><span class="default">$relpos</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">?</span><span class="default">1</span><span class="keyword">:</span><span class="default">0</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$len</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$to</span><span class="keyword">&gt;=</span><span class="default">$len</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$val</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$val</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$to</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$new</span><span class="keyword">=array();&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$x</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as&nbsp; </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$x</span><span class="keyword">++==</span><span class="default">$to</span><span class="keyword">) </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i</span><span class="keyword">!==</span><span class="default">$key</span><span class="keyword">) </span><span class="default">$new</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$array</span><span class="keyword">=</span><span class="default">$new</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">define</span><span class="keyword">(</span><span class="string">"ARRAY_FUNCS"</span><span class="keyword">,</span><span class="default">true</span><span class="keyword">);<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68039""></a>
  <div class="note">
   <strong class="user">nick</strong>
   <a href="#68039" class="date">11-Jul-2006 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This little function will move an array element up or down. Unlike the similar function in a previous comment this will work for associative arrays too. <br />
<br />
Because it uses current to traverse the array it will fail if a value is false (or 0). It could probably be rewritten to use each() but I couldn't work it out.<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_move_element</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$value</span><span class="keyword">, </span><span class="default">$direction </span><span class="keyword">= </span><span class="string">'up'</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$temp </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">end</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) == </span><span class="default">$value </span><span class="keyword">&amp;&amp; </span><span class="default">$direction </span><span class="keyword">== </span><span class="string">'down'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">reset</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) == </span><span class="default">$value </span><span class="keyword">&amp;&amp; </span><span class="default">$direction </span><span class="keyword">== </span><span class="string">'up'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$array</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; while (</span><span class="default">$array_value </span><span class="keyword">= </span><span class="default">current</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$this_key </span><span class="keyword">= </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$array_value </span><span class="keyword">== </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$direction </span><span class="keyword">== </span><span class="string">'down'</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$next_value </span><span class="keyword">= </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)] = </span><span class="default">$next_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = </span><span class="default">$array_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prev_value </span><span class="keyword">= </span><span class="default">prev</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$prev_key </span><span class="keyword">= </span><span class="default">key</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; unset(</span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$prev_key</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = </span><span class="default">$array_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$prev_key</span><span class="keyword">] = </span><span class="default">$prev_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$temp</span><span class="keyword">[</span><span class="default">$this_key</span><span class="keyword">] = </span><span class="default">$array_value</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">next</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$temp</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67923""></a>
  <div class="note">
   <strong class="user">kroczu at interia dot pl</strong>
   <a href="#67923" class="date">06-Jul-2006 03:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;?<br />
//A little function to convert array to simle xml:<br />
<br />
function array_xml($array, $num_prefix = "num_")<br />
{<br />
&nbsp;&nbsp;&nbsp; if(!is_array($array)) // text<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return $array;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach($array as $key=&gt;$val) // subnode<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = (is_numeric($key)? $num_prefix.$key : $key);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $return.="&lt;".$key."&gt;".array_xml($val, $num_prefix)."&lt;/".$key."&gt;";<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; return $return;<br />
}<br />
<br />
//example:<br />
<br />
$array[0][0]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 1;<br />
$array[0]['test']&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = "test";<br />
$array['test1']['test2']&nbsp; &nbsp; &nbsp; &nbsp; = "test";<br />
$array['test'][0]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = "test";<br />
$array['test'][1]['test_x']&nbsp; &nbsp;&nbsp; = $array;<br />
<br />
print_r($array);<br />
<br />
print"&lt;xml&gt;";<br />
<br />
print array_xml($array);<br />
<br />
print"&lt;/xml&gt;";<br />
<br />
/*<br />
<br />
print_r($array) previev:<br />
<br />
Array<br />
(<br />
&nbsp;&nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [test1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test2] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; [test] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test_x] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; 1<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test1] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test2] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [test] =&gt; Array<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [0] =&gt; test<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; )<br />
)<br />
<br />
result xml in firefox preview:<br />
<br />
-&lt;xml&gt;<br />
&nbsp;&nbsp;&nbsp; -&nbsp; &nbsp;&nbsp; &lt;num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;num_0&gt;1&lt;/num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;test&gt;test&lt;/test&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/num_0&gt;<br />
&nbsp;&nbsp;&nbsp; -&nbsp; &nbsp; &lt;test1&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;test2&gt;test&lt;/test2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/test1&gt;<br />
&nbsp;&nbsp;&nbsp; -&nbsp; &nbsp; &lt;test&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;num_0&gt;test&lt;/num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &lt;num_1&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &lt;test_x&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &lt;num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;num_0&gt;1&lt;/num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;test&gt;test&lt;/test&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &lt;test1&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;test2&gt;test&lt;/test2&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/test1&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; -&nbsp; &nbsp; &lt;test&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;num_0&gt;test&lt;/num_0&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/test&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/test_x&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &lt;/num_1&gt;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; &lt;/test&gt;<br />
&nbsp;&lt;/xml&gt;<br />
<br />
*/<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="67273""></a>
  <div class="note">
   <strong class="user">vinaur at gmail dot com</strong>
   <a href="#67273" class="date">06-Jun-2006 10:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Regarding the array to string (parse_line) and string to array (parse_array) functions posted below by Kevin Law.<br />
<br />
The functions will not work correctly if the array being parsed contains values that include commas and possibly parentheses.<br />
<br />
To solve this problem I added urlencode and urldecode functions and the result looks like this:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">parse_line</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">){<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">AS </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="string">"("</span><span class="keyword">. </span><span class="default">parse_line</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) . </span><span class="string">")"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$value </span><span class="keyword">= </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">$line </span><span class="keyword">. </span><span class="string">"," </span><span class="keyword">. </span><span class="default">urlencode</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">) . </span><span class="string">":" </span><span class="keyword">. </span><span class="default">$value </span><span class="keyword">. </span><span class="string">""</span><span class="keyword">;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$line</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">parse_array</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">){<br />
&nbsp;&nbsp; </span><span class="default">$q_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">":"</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$name </span><span class="keyword">= </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$q_pos</span><span class="keyword">));<br />
&nbsp;&nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">trim</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">$q_pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; </span><span class="default">$open_backet_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">"("</span><span class="keyword">);<br />
<br />
&nbsp;&nbsp; if(</span><span class="default">$open_backet_pos</span><span class="keyword">===</span><span class="default">false </span><span class="keyword">|| </span><span class="default">$open_backet_pos</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$comma_pos </span><span class="keyword">= </span><span class="default">strpos</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">, </span><span class="string">","</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(</span><span class="default">$comma_pos</span><span class="keyword">===</span><span class="default">false</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">urldecode</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$comma_pos</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">parse_array</span><span class="keyword">(</span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">$comma_pos</span><span class="keyword">+</span><span class="default">1</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="string">""</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; }else if (</span><span class="default">$open_backet_pos</span><span class="keyword">==</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$num_backet </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$line_char_array </span><span class="keyword">= </span><span class="default">str_split</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; for(</span><span class="default">$index </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">count</span><span class="keyword">(</span><span class="default">$line_char_array</span><span class="keyword">); </span><span class="default">$index</span><span class="keyword">++){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$line_char_array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] == </span><span class="string">'('</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$num_backet</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }else if (</span><span class="default">$line_char_array</span><span class="keyword">[</span><span class="default">$index</span><span class="keyword">] == </span><span class="string">')'</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$num_backet</span><span class="keyword">--;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(</span><span class="default">$num_backet </span><span class="keyword">== </span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$sub_line </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">0</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$name</span><span class="keyword">] = </span><span class="default">parse_array</span><span class="keyword">(</span><span class="default">$sub_line</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$line </span><span class="keyword">= </span><span class="default">substr</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">,</span><span class="default">$index</span><span class="keyword">+</span><span class="default">2</span><span class="keyword">);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; if(</span><span class="default">strlen</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">)!=</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">array_merge</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">, </span><span class="default">parse_array</span><span class="keyword">(</span><span class="default">$line</span><span class="keyword">));<br />
&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63598""></a>
  <div class="note">
   <strong class="user">elkabong at samsalisbury dot co dot uk</strong>
   <a href="#63598" class="date">24-Mar-2006 11:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello all! I've just been working on a system to automatically manage virtualhosts on an Apache box and I needed to duplicate some multidimensional arrays containing references to other multidimensional array some of which also contained references. These big arrays are defaults which need to be overwritten on a per-virtualhost basis, so copying references into the virtualhost arrays was not an option (as the defults would get corrupted).<br />
<br />
After hours of banging me head on the wall, this is what I've come up with:<br />
<span class="default">&lt;?PHP </span><span class="comment"># Tested on PHP Version 5.0.4<br />
# Recursively set $copy[$x] to the actual values of $array[$x]<br />
</span><span class="keyword">function </span><span class="default">array_deep_copy </span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">, &amp;</span><span class="default">$copy</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$copy</span><span class="keyword">)) </span><span class="default">$copy </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$k </span><span class="keyword">=&gt; </span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_deep_copy</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$copy</span><span class="keyword">[</span><span class="default">$k</span><span class="keyword">] = </span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
</span><span class="comment"># To call it do this:<br />
</span><span class="default">$my_lovely_reference_free_array </span><span class="keyword">= array();<br />
</span><span class="default">array_deep_copy</span><span class="keyword">(</span><span class="default">$my_array_full_of_references</span><span class="keyword">, </span><span class="default">$my_lovely_reference_free_array</span><span class="keyword">);<br />
</span><span class="comment"># Now you can modify all of $my_lovely_reference_free_array without<br />
# worrying about $my_array_full_of_references!<br />
</span><span class="default">?&gt;<br />
</span>NOTE: Don't use this on self-referencing arrays! I haven't tried it yet but I'm guessing an infinate loop will occur...<br />
<br />
I hope someone finds this useful, I'm only a beginner so if there's any fatal flaws or improvements please let me know!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="63302""></a>
  <div class="note">
   <strong class="user">alessandronunes at gmail dot com</strong>
   <a href="#63302" class="date">18-Mar-2006 11:06</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Ninmja sugestion plus multidiomensional array search (recursive):<br />
<br />
function cleanArray($array) {<br />
&nbsp;&nbsp; foreach ($array as $index =&gt; $value) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(is_array($array[$index])) $array[$index] = cleanArray($array[$index]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (empty($value)) unset($array[$index]);<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return $array;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="59386""></a>
  <div class="note">
   <strong class="user">jonathan at sharpmedia dot net</strong>
   <a href="#59386" class="date">05-Dec-2005 03:37</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/**<br />
&nbsp;* Flattens a multimentional array.<br />
&nbsp;*<br />
&nbsp;* Takes a multi-dimentional array as input and returns a flattened <br />
&nbsp;* array as output. Implemented using a non-recursive algorithm.<br />
&nbsp;* Example:<br />
&nbsp;* &lt;code&gt;<br />
&nbsp;* $in = array('John', 'Jim', array('Jane', 'Jasmine'), 'Jake');<br />
&nbsp;* $out = array_flatten($in);<br />
&nbsp;* // $out = array('John', 'Jim', 'Jane', 'Jasmine', 'Jake');<br />
&nbsp;* &lt;/code&gt;<br />
&nbsp;*<br />
&nbsp;* @author&nbsp; &nbsp; &nbsp; &nbsp; Jonathan Sharp &lt;jonathan@sharpmedia.net&gt;<br />
&nbsp;* @var&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array<br />
&nbsp;* @returns&nbsp; &nbsp; &nbsp; &nbsp; array<br />
&nbsp;*/<br />
function array_flatten($array)<br />
{<br />
&nbsp;&nbsp;&nbsp; while (($v = array_shift($array)) !== null) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_array($v)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $array = array_merge($v, $array);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $tmp[] = $v;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $tmp;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58913""></a>
  <div class="note">
   <strong class="user">stalker at ruun dot de</strong>
   <a href="#58913" class="date">20-Nov-2005 10:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I had some problems while selecting sub-arrays from multi-dimensional arrays (like the SQL-WHERE clause), so i wrote the following function:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">selectMultiArray</span><span class="keyword">(</span><span class="default">$__multiarray</span><span class="keyword">,</span><span class="default">$__key</span><span class="keyword">,</span><span class="default">$__value</span><span class="keyword">) {<br />
&nbsp; foreach(</span><span class="default">$__multiarray </span><span class="keyword">as </span><span class="default">$multipart</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$multipart</span><span class="keyword">[</span><span class="default">$__key</span><span class="keyword">] == </span><span class="default">$__value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="default">$__return</span><span class="keyword">[] = </span><span class="default">$multipart</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; if(empty(</span><span class="default">$__return</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">FALSE</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; return </span><span class="default">$__return</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
hope someones finding this helpful. If you have better was for getting to this, please answer.<br />
<br />
greets,<br />
St4Lk3R</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57921""></a>
  <div class="note">
   <strong class="user">msajko at gmail dot com</strong>
   <a href="#57921" class="date">19-Oct-2005 10:25</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
array_to_string and sister function string_to_array with multi dimensional array support.<br />
<br />
// Converts an array to a string that is safe to pass via a URL<br />
function array_to_string($array) {<br />
&nbsp;&nbsp; $retval = '';<br />
&nbsp;&nbsp; $null_value = "^^^";<br />
&nbsp;&nbsp; foreach ($array as $index =&gt; $val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; if(gettype($val)=='array') $value='^^array^'.array_to_string($val);&nbsp; &nbsp; else $value=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; if (!$value)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $value = $null_value;<br />
&nbsp;&nbsp; &nbsp; &nbsp; $retval .= urlencode(base64_encode($index)) . '|' . urlencode(base64_encode($value)) . '||';<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return urlencode(substr($retval, 0, -2));<br />
}<br />
&nbsp;<br />
// Converts a string created by array_to_string() back into an array.<br />
function string_to_array($string) {<br />
&nbsp;&nbsp; $retval = array();<br />
&nbsp;&nbsp; $string = urldecode($string);<br />
&nbsp;&nbsp; $tmp_array = explode('||', $string);<br />
&nbsp;&nbsp; $null_value = urlencode(base64_encode("^^^"));<br />
&nbsp;&nbsp; foreach ($tmp_array as $tmp_val) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; list($index, $value) = explode('|', $tmp_val);<br />
&nbsp;&nbsp; &nbsp; &nbsp; $decoded_index = base64_decode(urldecode($index));<br />
&nbsp;&nbsp; &nbsp; &nbsp; if($value != $null_value){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $val= base64_decode(urldecode($value));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(substr($val,0,8)=='^^array^') $val=string_to_array(substr($val,8));<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $retval[$decoded_index]=$val;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $retval[$decoded_index] = NULL;<br />
&nbsp;&nbsp; }<br />
&nbsp;&nbsp; return $retval;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="57222""></a>
  <div class="note">
   <strong class="user">za at lombardiacom dot it</strong>
   <a href="#57222" class="date">27-Sep-2005 05:01</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Swap 2 elements in array preserving keys. <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_swap</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key1</span><span class="keyword">,</span><span class="default">$key2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v1</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key1</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v2</span><span class="keyword">=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key2</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">$key1</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$key2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">$v2</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; } else if(</span><span class="default">$i</span><span class="keyword">==</span><span class="default">$key2</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">=</span><span class="default">$key1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$v</span><span class="keyword">=</span><span class="default">$v1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">// Move an element inside an array preserving keys.<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">array_move</span><span class="keyword">(&amp;</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$key</span><span class="keyword">,</span><span class="default">$position</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$from</span><span class="keyword">=</span><span class="default">array_search</span><span class="keyword">(</span><span class="default">$key</span><span class="keyword">,</span><span class="default">array_keys</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$to</span><span class="keyword">=</span><span class="default">$from</span><span class="keyword">+</span><span class="default">$position</span><span class="keyword">;&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$tot</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$position</span><span class="keyword">&gt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">++;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$to</span><span class="keyword">&lt;</span><span class="default">0</span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else if(</span><span class="default">$to</span><span class="keyword">&gt;=</span><span class="default">$tot</span><span class="keyword">) </span><span class="default">$to</span><span class="keyword">=</span><span class="default">$tot</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$n</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">=array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach(</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$i</span><span class="keyword">=&gt;</span><span class="default">$v</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$n</span><span class="keyword">==</span><span class="default">$to</span><span class="keyword">) </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">]=</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$key</span><span class="keyword">];<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if(</span><span class="default">$n</span><span class="keyword">++==</span><span class="default">$from</span><span class="keyword">) continue;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$out</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]=</span><span class="default">$v</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$out</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55852""></a>
  <div class="note">
   <strong class="user">Domenic Denicola</strong>
   <a href="#55852" class="date">15-Aug-2005 08:49</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Another JavaScript conversion, this time to objects instead of arrays. They can be accessed the same way, but are declared much shorter, so it saves some download time for your users:<br />
<br />
&lt;?<br />
function PhpArrayToJsObject($array, $objName)<br />
{<br />
&nbsp;&nbsp;&nbsp; return 'var ' . $objName . ' = ' . PhpArrayToJsObject_Recurse($array) . ";\n";<br />
}<br />
<br />
function PhpArrayToJsObject_Recurse($array)<br />
{<br />
&nbsp;&nbsp;&nbsp; // Base case of recursion: when the passed value is not a PHP array, just output it (in quotes).<br />
&nbsp;&nbsp;&nbsp; if(! is_array($array) )<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Handle null specially: otherwise it becomes "".<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if ($array === null)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return 'null';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return '"' . $array . '"';<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; // Open this JS object.<br />
&nbsp;&nbsp;&nbsp; $retVal = "{";<br />
<br />
&nbsp;&nbsp;&nbsp; // Output all key/value pairs as "$key" : $value<br />
&nbsp;&nbsp;&nbsp; // * Output a JS object (using recursion), if $value is a PHP array.<br />
&nbsp;&nbsp;&nbsp; // * Output the value in quotes, if $value is not an array (see above).<br />
&nbsp;&nbsp;&nbsp; $first = true;<br />
&nbsp;&nbsp;&nbsp; foreach($array as $key =&gt; $value)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Add a comma before all but the first pair.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (! $first )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $retVal .= ', ';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $first = false;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; // Quote $key if it's a string.<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (is_string($key) )<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; $key = '"' . $key . '"';<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $retVal .= $key . ' : ' . PhpArrayToJsObject_Recurse($value);<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
&nbsp;&nbsp;&nbsp; // Close and return the JS object.<br />
&nbsp;&nbsp;&nbsp; return $retVal . "}";<br />
}<br />
?&gt;<br />
<br />
Difference from previous function: null values are no longer "" in the object, they are JavaScript null.<br />
<br />
So for example:<br />
<br />
&lt;?<br />
$theArray = array("A" =&gt; array("a", "b", "c" =&gt; array("x")), "B" =&gt; "y");<br />
echo PhpArrayToJsObject($theArray, "myArray");<br />
?&gt;<br />
<br />
Gives:<br />
<br />
var myArray = {"A" : {0 : "a", 1 : "b", "c" : {0 : "x"}}, "B" : "y"};<br />
<br />
You can still access them just like arrays, with myArray["A"][0] or myArray["A"]["c"][0] or whatever. Just shrinks your pages.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="55713""></a>
  <div class="note">
   <strong class="user">dieter peeters</strong>
   <a href="#55713" class="date">11-Aug-2005 01:35</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
in response to: Domenic Denicola<br />
<br />
I reworked your function a bit and thought i just as well could post it.<br />
<br />
Below is the cleaner version, just cut and paste ;) The third parameter is of little use to the coder, unless javascript declaration of variables changes at some point in the future - who knows.<br />
<br />
Only minor point is the added parameter which probably gets copied every recursive call with an empty value, though i don't know the exact ways how php handles recursion internally. Most of the time php is pretty smart when optimizing code and an empty string shouldn't take much memory anyway :)<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">phpArrayToJsArray</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">,</span><span class="default">$array</span><span class="keyword">,</span><span class="default">$prePend</span><span class="keyword">=</span><span class="string">'var '</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) { </span><span class="comment">// Array recursion<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">.</span><span class="string">' = new Array();'</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; </span><span class="default">$value</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$result </span><span class="keyword">.= </span><span class="default">phpArrayToJsArray</span><span class="keyword">(</span><span class="default">$name</span><span class="keyword">.</span><span class="string">'["'</span><span class="keyword">.</span><span class="default">$key</span><span class="keyword">.</span><span class="string">'"]'</span><span class="keyword">,</span><span class="default">$value</span><span class="keyword">,</span><span class="string">''</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; } else {&nbsp; </span><span class="comment">// Base case of recursion<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$name</span><span class="keyword">.</span><span class="string">' = "'</span><span class="keyword">.</span><span class="default">$array</span><span class="keyword">.</span><span class="string">'";'</span><span class="keyword">.</span><span class="string">"\n"</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$prePend</span><span class="keyword">.</span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="54979""></a>
  <div class="note">
   <strong class="user">michael at imreo com</strong>
   <a href="#54979" class="date">21-Jul-2005 02:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Reply to array_cartesian_product of skopek at mediatac dot com, 13-Oct-2004 12:44:<br />
<br />
Your function does not work in my configuration (WinXP, apache 2.0, php 4.3.11).<br />
This part of code:<br />
...<br />
} else { //if next returns false, then reset and go on with previuos array...<br />
&nbsp; reset($arrays[$j]);<br />
}<br />
...<br />
cause infinite loop.<br />
Replacing to<br />
...<br />
} elseif (isset($arrays[$j])) {<br />
&nbsp; reset($arrays[$j]);<br />
}<br />
...<br />
works good.<br />
<br />
My complete working function (additionaly strings as keys are allowed):<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">array_cartesian_product</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= array();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$arrays </span><span class="keyword">= </span><span class="default">array_values</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$sizeIn </span><span class="keyword">= </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">$sizeIn </span><span class="keyword">&gt; </span><span class="default">0 </span><span class="keyword">? </span><span class="default">1 </span><span class="keyword">: </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$arrays </span><span class="keyword">as </span><span class="default">$array</span><span class="keyword">)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$size </span><span class="keyword">= </span><span class="default">$size </span><span class="keyword">* </span><span class="default">sizeof</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$size</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">++)<br />
&nbsp;&nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">] = array();<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">&lt; </span><span class="default">$sizeIn</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">array_push</span><span class="keyword">(</span><span class="default">$result</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">], </span><span class="default">current</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; for (</span><span class="default">$j </span><span class="keyword">= (</span><span class="default">$sizeIn </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">); </span><span class="default">$j </span><span class="keyword">&gt;= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$j </span><span class="keyword">--)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">next</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; break;<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; elseif (isset (</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]))<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">reset</span><span class="keyword">(</span><span class="default">$arrays</span><span class="keyword">[</span><span class="default">$j</span><span class="keyword">]);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="49219""></a>
  <div class="note">
   <strong class="user">m227(a)poczta.onet.pl</strong>
   <a href="#49219" class="date">20-Jan-2005 05:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
How to count dimensions in multi-array? (corrected)<br />
<br />
previous version didn't work when called more than one time.<br />
($dimcount was preserved from previous call)<br />
<br />
This is the way I corrected this:<br />
<br />
function countdim($array)<br />
&nbsp; {<br />
&nbsp;&nbsp;&nbsp; if (is_array(reset($array)))&nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp;&nbsp; $return = countdim(reset($array)) + 1;<br />
&nbsp;&nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp;&nbsp; $return = 1;<br />
&nbsp; <br />
&nbsp;&nbsp;&nbsp; return $return;<br />
&nbsp; }<br />
<br />
This function will return int number of array dimensions.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="array.sorting.html">配列のソート</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-change-key-case.html">array_change_key_case</a></div>
 <div class="up"><a href="book.array.html">配列</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
