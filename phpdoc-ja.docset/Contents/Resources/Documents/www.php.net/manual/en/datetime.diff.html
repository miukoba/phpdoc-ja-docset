<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ふたつの DateTime オブジェクトの差を返す</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="class.datetimeinterface.html">DateTimeInterface</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.format.html">DateTime::format</a></div>
 <div class="up"><a href="class.datetimeinterface.html">DateTimeInterface</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="datetime.diff" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::diff</h1>
  <h1 class="refname">DateTimeImmutable::diff</h1>
  <h1 class="refname">DateTime::diff</h1>
  <h1 class="refname">date_diff</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.3.0)</p><p class="refpurpose"><span class="refname">DateTime::diff</span> -- <span class="refname">DateTimeImmutable::diff</span> -- <span class="refname">DateTime::diff</span> -- <span class="refname">date_diff</span> &mdash; <span class="dc-title">ふたつの DateTime オブジェクトの差を返す</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.diff-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <span class="methodname"><strong>DateTime::diff</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetimeinterface.html" class="type DateTimeInterface">DateTimeInterface</a></span> <code class="parameter">$datetime2</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$absolute</code><span class="initializer"> = false</span></span>
  ] )</div>

  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <span class="methodname"><strong>DateTimeImmutable::diff</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetimeinterface.html" class="type DateTimeInterface">DateTimeInterface</a></span> <code class="parameter">$datetime2</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$absolute</code><span class="initializer"> = false</span></span>
  ] )</div>

  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <span class="methodname"><strong>DateTimeInterface::diff</strong></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetimeinterface.html" class="type DateTimeInterface">DateTimeInterface</a></span> <code class="parameter">$datetime2</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$absolute</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.dateinterval.html" class="type DateInterval">DateInterval</a></span> <span class="methodname"><a href="function.date-diff.html" class="methodname">date_diff</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <code class="parameter">$datetime1</code></span>
   , <span class="methodparam"><span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <code class="parameter">$datetime2</code></span>
   [, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$absolute</code><span class="initializer"> = false</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   ふたつの DateTime オブジェクトの差を返します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.diff-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   <dt>

    <span class="term"><em><code class="parameter">datetime</code></em></span>
    <dd>

     <p class="para">
      比較する日付。
     </p>
    </dd>

   </dt>

   <dt>

    <span class="term"><em><code class="parameter">absolute</code></em></span>
    <dd>

     <p class="para">
      間隔が正の数になるようにするか否か。
     </p>
    </dd>

   </dt>

  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.diff-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   ふたつの日付の差をあらわす <a href="class.dateinterval.html" class="classname">DateInterval</a> オブジェクトを返します。
   失敗した場合に <strong><code>FALSE</code></strong> を返します
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-datetime.diff-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-2264">
   <p><strong>例1  <span class="function"><strong>DateTime::diff()</strong></span> の例</strong></p>
   <div class="example-contents"><p>オブジェクト指向型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$datetime1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-11'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$datetime2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-13'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$interval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$datetime1</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$datetime2</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%R%a&nbsp;days'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>手続き型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$datetime1&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-11'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$datetime2&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-13'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$interval&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_diff</span><span style="color: #007700">(</span><span style="color: #0000BB">$datetime1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$datetime2</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%R%a&nbsp;days'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
+2 days
</pre></div>
   </div>
  </div>
  <div class="example" id="example-2265">
   <p><strong>例2 <a href="class.datetime.html" class="classname">DateTime</a> オブジェクトの比較</strong></p>
   <blockquote class="note"><p><strong class="note">注意</strong>: 
    <p class="para">
     PHP 5.2.2 以降では、DateTime オブジェクトを
     <a href="language.operators.comparison.html" class="link">比較演算子</a>
     で比較できるようになりました。
    </p>
   </p></blockquote>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date1&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">"now"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$date2&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">"tomorrow"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$date1&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">$date2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$date1&nbsp;</span><span style="color: #007700">&lt;&nbsp;</span><span style="color: #0000BB">$date2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$date1&nbsp;</span><span style="color: #007700">&gt;&nbsp;</span><span style="color: #0000BB">$date2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

  <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
  <div class="example-contents screen">
<div class="cdata"><pre>
bool(false)
bool(true)
bool(false)
</pre></div>
  </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.diff-seealso">
  <h3 class="title">参考</h3>
  <ul class="simplelist">
   <li class="member"> <span class="function"><a href="dateinterval.format.html" class="function" rel="rdfs-seeAlso">DateInterval::format()</a> - 間隔をフォーマットする</span></li>
   <li class="member"> <span class="function"><a href="datetime.add.html" class="function" rel="rdfs-seeAlso">DateTime::add()</a> - 年月日時分秒の値を DateTime オブジェクトに加える</span></li>
   <li class="member"> <span class="function"><a href="datetime.sub.html" class="function" rel="rdfs-seeAlso">DateTime::sub()</a> - 年月日時分秒の値を DateTime オブジェクトから引く</span></li>
  </ul>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="113283""></a>
  <div class="note">
   <strong class="user">ianlenmac at gmail dot com</strong>
   <a href="#113283" class="date">20-Sep-2013 10:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
It is worth noting, IMO, and it is implied in the docs but not explicitly stated, that the object on which diff is called is subtracted from the object that is passed to diff.<br />
<br />
i.e. $now-&gt;diff($tomorrow) is positive.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112472""></a>
  <div class="note">
   <strong class="user">php at jcouture dot net</strong>
   <a href="#112472" class="date">20-Jun-2013 10:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
After wrestling with DateTime::diff for a while it finally dawned on me the problem was both in the formatting of the input string and the formatting of the output.<br />
<br />
The task was to calculate the duration between two date/times.<br />
<br />
### Calculating Duration <br />
<br />
1. Make sure you have a valid date variable.&nbsp; Both of these strings are valid:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="comment">// Example<br />
<br />
&nbsp;&nbsp; </span><span class="default">$strStart </span><span class="keyword">= </span><span class="string">'2013-06-19 18:25'</span><span class="keyword">;<br />
&nbsp;&nbsp; </span><span class="default">$strEnd&nbsp;&nbsp; </span><span class="keyword">= </span><span class="string">'06/19/13 21:47'</span><span class="keyword">;<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
2. Next convert the string to a date variable<br />
~~~<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; $dteStart </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$strStart</span><span class="keyword">);<br />
&nbsp;&nbsp; </span><span class="default">$dteEnd&nbsp;&nbsp; </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">$strEnd</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>~~~<br />
<br />
3. Calculate the difference<br />
~~~<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; $dteDiff&nbsp; </span><span class="keyword">= </span><span class="default">$dteStart</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$dteEnd</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span>~~~<br />
<br />
4. Format the output<br />
~~~<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; </span><span class="keyword">print </span><span class="default">$dteDiff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"%H:%I:%S"</span><span class="keyword">);<br />
<br />
</span><span class="comment">/*<br />
&nbsp;&nbsp;&nbsp; Outputs<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; 03:22:00<br />
*/<br />
<br />
</span><span class="default">?&gt;<br />
</span>~~~<br />
<br />
[Modified by moderator for clarify]</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112368""></a>
  <div class="note">
   <strong class="user">gusarov at ukr.net</strong>
   <a href="#112368" class="date">07-Jun-2013 10:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
for php&lt;5.3<br />
<span class="default">&lt;?php<br />
$date1 </span><span class="keyword">= </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">'2013-07-03 18:00:00'</span><span class="keyword">);<br />
</span><span class="default">$date2 </span><span class="keyword">= </span><span class="default">time</span><span class="keyword">();<br />
</span><span class="default">$subTime </span><span class="keyword">= </span><span class="default">$date1 </span><span class="keyword">- </span><span class="default">$date2</span><span class="keyword">;<br />
</span><span class="default">$y </span><span class="keyword">= (</span><span class="default">$subTime</span><span class="keyword">/(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">*</span><span class="default">365</span><span class="keyword">));<br />
</span><span class="default">$d </span><span class="keyword">= (</span><span class="default">$subTime</span><span class="keyword">/(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">*</span><span class="default">24</span><span class="keyword">))%</span><span class="default">365</span><span class="keyword">;<br />
</span><span class="default">$h </span><span class="keyword">= (</span><span class="default">$subTime</span><span class="keyword">/(</span><span class="default">60</span><span class="keyword">*</span><span class="default">60</span><span class="keyword">))%</span><span class="default">24</span><span class="keyword">;<br />
</span><span class="default">$m </span><span class="keyword">= (</span><span class="default">$subTime</span><span class="keyword">/</span><span class="default">60</span><span class="keyword">)%</span><span class="default">60</span><span class="keyword">;<br />
<br />
echo </span><span class="string">"Difference between "</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">,</span><span class="default">$date1</span><span class="keyword">).</span><span class="string">" and "</span><span class="keyword">.</span><span class="default">date</span><span class="keyword">(</span><span class="string">'Y-m-d H:i:s'</span><span class="keyword">,</span><span class="default">$date2</span><span class="keyword">).</span><span class="string">" is:\n"</span><span class="keyword">;<br />
echo </span><span class="default">$y</span><span class="keyword">.</span><span class="string">" years\n"</span><span class="keyword">;<br />
echo </span><span class="default">$d</span><span class="keyword">.</span><span class="string">" days\n"</span><span class="keyword">;<br />
echo </span><span class="default">$h</span><span class="keyword">.</span><span class="string">" hours\n"</span><span class="keyword">;<br />
echo </span><span class="default">$m</span><span class="keyword">.</span><span class="string">" minutes\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="111741""></a>
  <div class="note">
   <strong class="user">amons dot 360 at gmail dot com</strong>
   <a href="#111741" class="date">23-Mar-2013 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
So this function is not available for my server's PHP. I created an alternative.<br />
<br />
Convert the datetime into time-stamps, then subtract normally, then convert the seconds to whatever you want.<br />
<br />
&lt;?<br />
<br />
$date1 = new DateTime('now');<br />
$date1-&gt;modify("-3 hours");<br />
<br />
$date2 = new DateTime('now');<br />
<br />
$number1 = (int)$date1-&gt;format('U');<br />
$number2 = (int)$date2-&gt;format('U');<br />
<br />
echo ($number2 - $number1)/60/60; // will print 3<br />
<br />
?&gt;<br />
<br />
-Suleiman ALAQEL</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="109210""></a>
  <div class="note">
   <strong class="user">radu dot potop at wooptoo dot com</strong>
   <a href="#109210" class="date">27-Jun-2012 05:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Keep in mind that diff will convert the two DateTime objects from local time to UTC.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107434""></a>
  <div class="note">
   <strong class="user">sgmurphy19</strong>
   <a href="#107434" class="date">09-Feb-2012 08:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Though I found a number of people who ran into the issue of 5.2 and lower not supporting this function, I was unable to find any solid examples to get around it. Therefore I hope this can help some others:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">get_timespan_string</span><span class="keyword">(</span><span class="default">$older</span><span class="keyword">, </span><span class="default">$newer</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$Y1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$Y2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$Y </span><span class="keyword">= </span><span class="default">$Y2 </span><span class="keyword">- </span><span class="default">$Y1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$m1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$m2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m2 </span><span class="keyword">- </span><span class="default">$m1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$d1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$d2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">$d2 </span><span class="keyword">- </span><span class="default">$d1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$H1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'H'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$H2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'H'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">$H2 </span><span class="keyword">- </span><span class="default">$H1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$i1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'i'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$i2 </span><span class="keyword">- </span><span class="default">$i1</span><span class="keyword">;<br />
<br />
&nbsp; </span><span class="default">$s1 </span><span class="keyword">= </span><span class="default">$older</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$s2 </span><span class="keyword">= </span><span class="default">$newer</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'s'</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$s2 </span><span class="keyword">- </span><span class="default">$s1</span><span class="keyword">;<br />
<br />
&nbsp; if(</span><span class="default">$s </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">-</span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$s </span><span class="keyword">= </span><span class="default">$s </span><span class="keyword">+ </span><span class="default">60</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">$H </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$i </span><span class="keyword">= </span><span class="default">$i </span><span class="keyword">+ </span><span class="default">60</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$H </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">$d </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$H </span><span class="keyword">= </span><span class="default">$H </span><span class="keyword">+ </span><span class="default">24</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$d </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$d </span><span class="keyword">= </span><span class="default">$d </span><span class="keyword">+ </span><span class="default">get_days_for_previous_month</span><span class="keyword">(</span><span class="default">$m2</span><span class="keyword">, </span><span class="default">$Y2</span><span class="keyword">);<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$m </span><span class="keyword">&lt; </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$Y </span><span class="keyword">= </span><span class="default">$Y </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">$m </span><span class="keyword">+ </span><span class="default">12</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">= </span><span class="default">create_timespan_string</span><span class="keyword">(</span><span class="default">$Y</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$timespan_string</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">get_days_for_previous_month</span><span class="keyword">(</span><span class="default">$current_month</span><span class="keyword">, </span><span class="default">$current_year</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$previous_month </span><span class="keyword">= </span><span class="default">$current_month </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; if(</span><span class="default">$current_month </span><span class="keyword">== </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$current_year </span><span class="keyword">= </span><span class="default">$current_year </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">; </span><span class="comment">//going from January to previous December<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$previous_month </span><span class="keyword">= </span><span class="default">12</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$previous_month </span><span class="keyword">== </span><span class="default">11 </span><span class="keyword">|| </span><span class="default">$previous_month </span><span class="keyword">== </span><span class="default">9 </span><span class="keyword">|| </span><span class="default">$previous_month </span><span class="keyword">== </span><span class="default">6 </span><span class="keyword">|| </span><span class="default">$previous_month </span><span class="keyword">== </span><span class="default">4</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">30</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; else if(</span><span class="default">$previous_month </span><span class="keyword">== </span><span class="default">2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; if((</span><span class="default">$current_year </span><span class="keyword">% </span><span class="default">4</span><span class="keyword">) == </span><span class="default">0</span><span class="keyword">) { </span><span class="comment">//remainder 0 for leap years<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="keyword">return </span><span class="default">29</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; else {<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">28</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp; }<br />
&nbsp; else {<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">31</span><span class="keyword">;<br />
&nbsp; }<br />
}<br />
<br />
function </span><span class="default">create_timespan_string</span><span class="keyword">(</span><span class="default">$Y</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">, </span><span class="default">$d</span><span class="keyword">, </span><span class="default">$H</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">, </span><span class="default">$s</span><span class="keyword">)<br />
{<br />
&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">= </span><span class="string">''</span><span class="keyword">;<br />
&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">false</span><span class="keyword">;<br />
&nbsp; if(</span><span class="default">$Y </span><span class="keyword">&gt;= </span><span class="default">1</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$Y</span><span class="keyword">, </span><span class="string">'year'</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$m </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$found_first_diff</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$m</span><span class="keyword">, </span><span class="string">'month'</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$d </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$found_first_diff</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, </span><span class="string">'day'</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$H </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$found_first_diff</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$H</span><span class="keyword">, </span><span class="string">'hour'</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$i </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">|| </span><span class="default">$found_first_diff</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$found_first_diff </span><span class="keyword">= </span><span class="default">true</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$i</span><span class="keyword">, </span><span class="string">'minute'</span><span class="keyword">).</span><span class="string">' '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; if(</span><span class="default">$found_first_diff</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="string">'and '</span><span class="keyword">;<br />
&nbsp; }<br />
&nbsp; </span><span class="default">$timespan_string </span><span class="keyword">.= </span><span class="default">pluralize</span><span class="keyword">(</span><span class="default">$s</span><span class="keyword">, </span><span class="string">'second'</span><span class="keyword">);<br />
&nbsp; return </span><span class="default">$timespan_string</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$count</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">)<br />
{<br />
&nbsp; return </span><span class="default">$count </span><span class="keyword">. ( ( </span><span class="default">$count </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">) ? ( </span><span class="string">" </span><span class="default">$text</span><span class="string">" </span><span class="keyword">) : ( </span><span class="string">" </span><span class="keyword">${</span><span class="default">text</span><span class="keyword">}</span><span class="string">s" </span><span class="keyword">) );<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106464""></a>
  <div class="note">
   <strong class="user">toreskobba at gmail dot com</strong>
   <a href="#106464" class="date">11-Nov-2011 12:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
When using datediff make sure your time zone is correct, for me on Windows 7 64 bit it behaved very strange when timezone was wrong (I was comparing now against time in database and exif metadata in photos). For example: date_default_timezone_set('Europe/Oslo');</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106447""></a>
  <div class="note">
   <strong class="user">astagl at gmail dot com</strong>
   <a href="#106447" class="date">10-Nov-2011 05:21</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I needed to get the exact number of days between 2 dates and was relying on the this diff function, but found that I was getting a peculiar result with:<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'2011-11-09'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$appt&nbsp; </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="default">date</span><span class="keyword">(</span><span class="string">'2011-12-09'</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$days_until_appt </span><span class="keyword">= </span><span class="default">$appt</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">)-&gt;</span><span class="default">d</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
This was returning 0 because it was exactly one month.<br />
<br />
I had to end up using :<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $days_until_appt </span><span class="keyword">= </span><span class="default">$appt</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">)-&gt;</span><span class="default">days</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
to get 30.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="106018""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#106018" class="date">03-Oct-2011 05:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
$dateTime = new DateTime('2011-08-01 00:00:00');<br />
echo $dateTime-&gt;diff(new DateTime('2011-10-01 00:00:01'))-&gt;format('%m');<br />
<br />
will return 1, instead of 2 ...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="104001""></a>
  <div class="note">
   <strong class="user">milespickens+php at gmail dot com</strong>
   <a href="#104001" class="date">17-May-2011 12:00</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was looking for a way to output X number of days from a given date and didn't find exactly what I was looking for.&nbsp; But I got this working.&nbsp; I hope this helps you. <br />
<br />
This will output the number of days,months, or years difference between NOW and a April 1st, 2011.&nbsp; <br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $date1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2011-04-01'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"now"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$interval </span><span class="keyword">= </span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$date2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$years </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$months </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%m'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$days </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%d'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$years</span><span class="keyword">!=</span><span class="default">0</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ago </span><span class="keyword">= </span><span class="default">$years</span><span class="keyword">.</span><span class="string">' year(s) ago'</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }else{<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$ago </span><span class="keyword">= (</span><span class="default">$months </span><span class="keyword">== </span><span class="default">0 </span><span class="keyword">? </span><span class="default">$days</span><span class="keyword">.</span><span class="string">' day(s) ago' </span><span class="keyword">: </span><span class="default">$months</span><span class="keyword">.</span><span class="string">' month(s) ago'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$ago</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
If I used today, 2011-05-16 as $date1, I could return all 0's in the format.&nbsp; For example....<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $date1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2011-05-161'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"now"</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$interval </span><span class="keyword">= </span><span class="default">$date1</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$date2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y-%m-%d'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$diff</span><span class="keyword">;&nbsp; </span><span class="comment">//Today, this will output 0-0-0<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="102507""></a>
  <div class="note">
   <strong class="user">Grgoire Marchal</strong>
   <a href="#102507" class="date">18-Feb-2011 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Warning, there's a bug on windows platforms: the result is always 6015 days (and not 42...)<br />
<br />
<a href="http://bugs.php.net/bug.php?id=51184" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=51184</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="101990""></a>
  <div class="note">
   <strong class="user">schindhelm at gmail dot com</strong>
   <a href="#101990" class="date">21-Jan-2011 09:48</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I found that DateTime::diff isn't as accurate as I thought. I calculated the age gap between now and a birthdate from before 1970 (unix epoch). Here's what I got:<br />
<br />
Given today is January 21st, 2011:<br />
<br />
<span class="default">&lt;?php<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Europe/Berlin'</span><span class="keyword">);<br />
<br />
</span><span class="comment">// birthdate format is YYYY-MM-DD<br />
</span><span class="default">$birth </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1966-01-21'</span><span class="keyword">);<br />
</span><span class="default">$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$birth</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">);<br />
echo </span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">); </span><span class="comment">// will output 45<br />
<br />
</span><span class="default">$birth </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1966-01-23'</span><span class="keyword">);<br />
</span><span class="default">$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$birth</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">);<br />
echo </span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">); </span><span class="comment">// will output 45 wrongly<br />
<br />
</span><span class="default">$birth </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1966-01-24'</span><span class="keyword">); </span><span class="comment">// three days difference!<br />
</span><span class="default">$today </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">();<br />
</span><span class="default">$diff </span><span class="keyword">= </span><span class="default">$birth</span><span class="keyword">-&gt;</span><span class="default">diff</span><span class="keyword">(</span><span class="default">$today</span><span class="keyword">);<br />
echo </span><span class="default">$diff</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'%y'</span><span class="keyword">); </span><span class="comment">// will output 44 - correct<br />
</span><span class="default">?&gt;<br />
</span><br />
When calculating with the date() function it was more accurate (didn't use seconds/hours for comparison).<br />
<br />
Note that 3 days may be a lot if you want to create invoices and have to check against a given age to determine if the customer is chargable for taxes and so on.<br />
<br />
If someone also found this behaviour I'd like to hear about it - give me a quick mail at schindhelm (at) gmail (dot) com.<br />
Thanks.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97880""></a>
  <div class="note">
   <strong class="user">acrion at gmail dot com</strong>
   <a href="#97880" class="date">13-May-2010 05:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you want to quickly scan through the resulting intervals, you can use the undocumented properties of DateInterval.<br />
<br />
The function below returns a single number of years, months, days, hours, minutes or seconds between the current date and the provided date.&nbsp; If the date occurs in the past (is negative/inverted), it suffixes it with 'ago'.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$count</span><span class="keyword">, </span><span class="default">$text </span><span class="keyword">) <br />
{ <br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$count </span><span class="keyword">. ( ( </span><span class="default">$count </span><span class="keyword">== </span><span class="default">1 </span><span class="keyword">) ? ( </span><span class="string">" </span><span class="default">$text</span><span class="string">" </span><span class="keyword">) : ( </span><span class="string">" </span><span class="keyword">${</span><span class="default">text</span><span class="keyword">}</span><span class="string">s" </span><span class="keyword">) );<br />
}<br />
<br />
function </span><span class="default">ago</span><span class="keyword">( </span><span class="default">$datetime </span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$interval </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="string">'now'</span><span class="keyword">)-&gt;</span><span class="default">diff</span><span class="keyword">( </span><span class="default">$datetime </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$suffix </span><span class="keyword">= ( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">invert </span><span class="keyword">? </span><span class="string">' ago' </span><span class="keyword">: </span><span class="string">'' </span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">y </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">y</span><span class="keyword">, </span><span class="string">'year' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">m </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">m</span><span class="keyword">, </span><span class="string">'month' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">d </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">d</span><span class="keyword">, </span><span class="string">'day' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">h </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">h</span><span class="keyword">, </span><span class="string">'hour' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if ( </span><span class="default">$v </span><span class="keyword">= </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">i </span><span class="keyword">&gt;= </span><span class="default">1 </span><span class="keyword">) return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">i</span><span class="keyword">, </span><span class="string">'minute' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">pluralize</span><span class="keyword">( </span><span class="default">$interval</span><span class="keyword">-&gt;</span><span class="default">s</span><span class="keyword">, </span><span class="string">'second' </span><span class="keyword">) . </span><span class="default">$suffix</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="97810""></a>
  <div class="note">
   <strong class="user">Dennis C</strong>
   <a href="#97810" class="date">10-May-2010 08:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those like me who don't yet have PHP 5.3 installed on their host, here's a simple alternative to get the number of days between two dates in the format '2010-3-23' or similar acceptable to strtotime().&nbsp; You need PHP 5.2.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">date_diff</span><span class="keyword">(</span><span class="default">$date1</span><span class="keyword">, </span><span class="default">$date2</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">$date1</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$datetime2 </span><span class="keyword">= </span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$date2</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; while(</span><span class="default">date_create</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">) &lt; </span><span class="default">$datetime2</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$current </span><span class="keyword">= </span><span class="default">gmdate</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="string">"+1 day"</span><span class="keyword">, </span><span class="default">strtotime</span><span class="keyword">(</span><span class="default">$current</span><span class="keyword">)));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$count</span><span class="keyword">;<br />
}<br />
<br />
echo (</span><span class="default">date_diff</span><span class="keyword">(</span><span class="string">'2010-3-9'</span><span class="keyword">, </span><span class="string">'2011-4-10'</span><span class="keyword">).</span><span class="string">" days &lt;br \&gt;"</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92692""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#92692" class="date">04-Aug-2009 02:17</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You don't need to calculate the exact difference if you just want to know what date comes earlier:<br />
<br />
<span class="default">&lt;?php<br />
<br />
date_default_timezone_set</span><span class="keyword">(</span><span class="string">'Europe/Madrid'</span><span class="keyword">);<br />
<br />
</span><span class="default">$d1 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1492-01-01'</span><span class="keyword">);<br />
</span><span class="default">$d2 </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'1492-12-31'</span><span class="keyword">);<br />
<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d1 </span><span class="keyword">&lt; </span><span class="default">$d2</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d1 </span><span class="keyword">&gt; </span><span class="default">$d2</span><span class="keyword">);<br />
</span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$d1 </span><span class="keyword">== </span><span class="default">$d2</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
bool(true)<br />
bool(false)<br />
bool(false)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="class.datetimeinterface.html">DateTimeInterface</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.format.html">DateTime::format</a></div>
 <div class="up"><a href="class.datetimeinterface.html">DateTimeInterface</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
