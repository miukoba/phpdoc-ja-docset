<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>配列の値の積を計算する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-pop.html">array_pop</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-push.html">array_push</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.array-product" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">array_product</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0)</p><p class="refpurpose"><span class="refname">array_product</span> &mdash; <span class="dc-title">配列の値の積を計算する</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.array-product-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="language.pseudo-types.html#language.types.number" class="type number">number</a></span> <span class="methodname"><strong>array_product</strong></span>
    ( <span class="methodparam"><span class="type">array</span> <code class="parameter">$array</code></span>
   )</div>

  <p class="para rdfs-comment">
    <span class="function"><strong>array_product()</strong></span> は、配列の値の積を計算します。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.array-product-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><em><code class="parameter">array</code></em></span>
     <dd>

      <p class="para">
       配列。
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.array-product-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   積を、integer あるいは float で返します。
  </p>
 </div>

 <div class="refsect1 changelog" id="refsect1-function.array-product-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>5.3.6</td>
       <td>
        空の配列の積が 1 を返すようになりました。これまでのバージョンでは、空の配列に対しては 0 を返していました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

 <div class="refsect1 examples" id="refsect1-function.array-product-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-4945">
    <p><strong>例1  <span class="function"><strong>array_product()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$a&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">6</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"product(a)&nbsp;=&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">array_product</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"product(array())&nbsp;=&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">array_product</span><span style="color: #007700">(array())&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
product(a) = 384
product(array()) = 1
</pre></div>
    </div>
   </div>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="100153""></a>
  <div class="note">
   <strong class="user">Marcel G</strong>
   <a href="#100153" class="date">28-Sep-2010 05:36</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can use array_product to calculate the factorial of n:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">factorial</span><span class="keyword">( </span><span class="default">$n </span><span class="keyword">)<br />
{<br />
&nbsp; if( </span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$n </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; return </span><span class="default">array_product</span><span class="keyword">( </span><span class="default">range</span><span class="keyword">( </span><span class="default">1</span><span class="keyword">, </span><span class="default">$n </span><span class="keyword">));<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
If you need the factorial without having array_product available, here is one:<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">factorial</span><span class="keyword">( </span><span class="default">$n </span><span class="keyword">)<br />
{<br />
&nbsp; if( </span><span class="default">$n </span><span class="keyword">&lt; </span><span class="default">1 </span><span class="keyword">) </span><span class="default">$n </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;<br />
&nbsp; for( </span><span class="default">$p</span><span class="keyword">++; </span><span class="default">$n</span><span class="keyword">; ) </span><span class="default">$p </span><span class="keyword">*= </span><span class="default">$n</span><span class="keyword">--;<br />
&nbsp; return </span><span class="default">$p</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="92534""></a>
  <div class="note">
   <strong class="user">bishop</strong>
   <a href="#92534" class="date">28-Jul-2009 07:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
gmail @ algofoogle is right, so we can extend our own array_product() to flexibly accept the empty product value.&nbsp; Zero (0) is the default (to be compatible with PHP behavior), but you could change this to 1 for mathematical purposes or null for logical.<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">if (! </span><span class="default">function_exists</span><span class="keyword">(</span><span class="string">'array_product'</span><span class="keyword">)) {<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">array_product</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$emptyProduct </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return (</span><span class="default">0 </span><span class="keyword">== </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">) ? </span><span class="default">$emptyProduct </span><span class="keyword">: </span><span class="default">array_reduce</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="string">'_array_product'</span><span class="keyword">, </span><span class="default">1</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">trigger_error</span><span class="keyword">(</span><span class="string">'Param #1 must be an array'</span><span class="keyword">, </span><span class="default">E_USER_ERROR</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">false</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">_array_product</span><span class="keyword">(</span><span class="default">$v</span><span class="keyword">,</span><span class="default">$w</span><span class="keyword">) { return </span><span class="default">$v </span><span class="keyword">* </span><span class="default">$w</span><span class="keyword">; }<br />
}<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75049""></a>
  <div class="note">
   <strong class="user">gmail at algofoogle</strong>
   <a href="#75049" class="date">10-May-2007 06:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just in relation to "bishop" and the overall behaviour of array_product... The "empty product" (i.e. product of no values) is supposed to be defined as "1":<br />
<br />
<a href="http://en.wikipedia.org/wiki/Empty_product" rel="nofollow" target="_blank">http://en.wikipedia.org/wiki/Empty_product</a><br />
<br />
...however PHP's array_product() returns int(0) if it is given an empty array. bishop's code does this, too (so it IS a compatible replacement). Ideally, array_product() should probably return int(1). I guess it depends on your specific context or rationale.<br />
<br />
You might normally presume int(0) to be a suitable return value if there are no inputs, but let's say that you're calculating a price based on "percentage" offsets:<br />
<br />
$price = 10.0;<br />
$discounts = get_array_of_customer_discounts();<br />
$price = $price * array_product($discounts);<br />
<br />
...if there are NO "discounts", the price will come out as 0, instead of 10.0</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="72391""></a>
  <div class="note">
   <strong class="user">pqpqpq at wanadoo dot nl</strong>
   <a href="#72391" class="date">17-Jan-2007 01:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An observation about the _use_ of array_product with primes:<br />
<br />
$a=$arrayOfSomePrimes=(2,3,11); <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; // 2 being the first prime (these days)<br />
<br />
$codeNum=array_product($a); // gives 66 (== 2*3*11)<br />
<br />
echo "unique product(\$a) = " . array_product($a) . "\n";<br />
<br />
The 66 can (only) be split into its original primes,<br />
which can be transformed into their place in the row of primes (2,3,5,7,11,13,17,19...)&nbsp; giving (1,2,3,4,5,6,7,8...)<br />
<br />
The 66 gives the places {1,2,5} in the row of primes. The number "66" is unique as a code for {1,2,5}<br />
<br />
So you can define the combination of table-columns {1,2,5} in "66". The bigger the combination, the more efficient in memory/transmission, the less in calculation.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="68694""></a>
  <div class="note">
   <strong class="user">Andre D</strong>
   <a href="#68694" class="date">07-Aug-2006 10:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This function can be used to test if all values in an array of booleans are TRUE.<br />
<br />
Consider:<br />
<br />
<span class="default">&lt;?php<br />
<br />
</span><span class="keyword">function </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return (bool) </span><span class="default">$test</span><span class="keyword">;<br />
}<br />
<br />
</span><span class="default">$check</span><span class="keyword">[] = </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br />
</span><span class="default">$check</span><span class="keyword">[] = </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$check</span><span class="keyword">[] = </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">FALSE</span><span class="keyword">);<br />
</span><span class="default">$check</span><span class="keyword">[] = </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="default">$result </span><span class="keyword">= (bool) </span><span class="default">array_product</span><span class="keyword">(</span><span class="default">$check</span><span class="keyword">);<br />
</span><span class="comment">// $result is set to FALSE because only two of the four values evaluated to TRUE<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
The above is equivalent to:<br />
<br />
<span class="default">&lt;?php<br />
<br />
$check1 </span><span class="keyword">= </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">TRUE</span><span class="keyword">);<br />
</span><span class="default">$check2 </span><span class="keyword">= </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">1</span><span class="keyword">);<br />
</span><span class="default">$check3 </span><span class="keyword">= </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">FALSE</span><span class="keyword">);<br />
</span><span class="default">$check4 </span><span class="keyword">= </span><span class="default">outbool</span><span class="keyword">(</span><span class="default">0</span><span class="keyword">);<br />
<br />
</span><span class="default">$result </span><span class="keyword">= (</span><span class="default">$check1 </span><span class="keyword">&amp;&amp; </span><span class="default">$check2 </span><span class="keyword">&amp;&amp; </span><span class="default">$check3 </span><span class="keyword">&amp;&amp; </span><span class="default">$check4</span><span class="keyword">);<br />
<br />
</span><span class="default">?&gt;<br />
</span><br />
This use of array_product is especially useful when testing an indefinite number of booleans and is easy to construct in a loop.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.array-pop.html">array_pop</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.array-push.html">array_push</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
