<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Java Èñ¢Êï∞</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="java.examples-basic.html">Âü∫Êú¨ÁöÑ„Å™‰ΩøÁî®Ê≥ï</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.java-last-exception-clear.html">java_last_exception_clear</a></div>
 <div class="up"><a href="book.java.html">Java</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ref.java" class="reference">
 <h1 class="title">Java Èñ¢Êï∞</h1>

 

















<h2>ÁõÆÊ¨°</h2><ul class="chunklist chunklist_reference"><li><a href="function.java-last-exception-clear.html">java_last_exception_clear</a> ‚Äî Áõ¥Ëøë„ÅÆ‰æãÂ§ñ„Çí„ÇØ„É™„Ç¢„Åô„Çã</li><li><a href="function.java-last-exception-get.html">java_last_exception_get</a> ‚Äî Áõ¥Ëøë„ÅÆ Java ‰æãÂ§ñ„ÇíÂèñÂæó„Åô„Çã</li></ul>
</div>
<div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="76659""></a>
  <div class="note">
   <strong class="user">Vikas Kumar</strong>
   <a href="#76659" class="date">25-Jul-2007 07:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
wamp5_1.7.2.exe+jdk1.5.0_10 integration error<br />
extension=php_java.dll<br />
[java]<br />
java.home="C:\Program Files\Java\jdk1.5.0_10; C:\Program Files\Java\jdk1.5.0_10\lib"<br />
java.class.path="C:\wamp\php\ext\JavaBridge.jar; C:\Program Files\Java\jdk1.5.0_10\lib"<br />
java.library.path="C:\wamp\php\ext; C:\Program Files\Java\jdk1.5.0_10\lib"<br />
java.library="C:\Program Files\Java\jdk1.5.0_10\jre\bin\server\jvm.dll"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62874""></a>
  <div class="note">
   
   <a href="#62874" class="date">11-Mar-2006 07:33</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those who want to run php with a recent tomcat version, you'll need the following patch:<br />
<br />
<a href="http://wiki.apache.org/tomcat/UsingPhp" rel="nofollow" target="_blank">http://wiki.apache.org/tomcat/UsingPhp</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="62747""></a>
  <div class="note">
   <strong class="user">meaton53 at hotmail dot com</strong>
   <a href="#62747" class="date">08-Mar-2006 08:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I just wanted to post this for people that were having the same troubles that I was having.&nbsp; I am running OES SuSe Linux 9-1.&nbsp; I started this adventure because I needed to connect to a progress database via PHP.&nbsp; And I couldn't use ODBC drivers because the progress ODBC drivers were simply to old for unixODBC and iODBC (progress 9.1c).&nbsp; So I had to use JDBC with this wonderful PHP extension along with the PHP-Java Bridge found at:<br />
<a href="http://sourceforge.net/projects/php-java-bridge" rel="nofollow" target="_blank">http://sourceforge.net/projects/php-java-bridge</a><br />
So Just for some notes, in the PHP.INI file I had to have:<br />
<br />
extension=java.so<br />
[java]<br />
java.java_home=/usr/local/java<br />
java.classpath=.:/usr/progress/dlc91c/java/progress.jar<br />
:/usr/progress/dlc91c/java/jdbc.jar<br />
java.libpath=.:/usr/progress/dlc91c/lib<br />
:/usr/local/lib/php/extensions<br />
<br />
And be careful because lots of sites tell you that the two varibles above are java.class.path, and java.library.path.<br />
<br />
And also to be able to connect to a progress database from java in Linux you have to set your LD_ASSUME_KERNEL varible to 2.4.0 to do this simply add to you profile.local file:<br />
export LD_ASSUME_KERNEL=2.4.0.&nbsp; <br />
If you want to know why please email me and I will tell you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="61595""></a>
  <div class="note">
   <strong class="user">rabisultan at gmail dot com</strong>
   <a href="#61595" class="date">07-Feb-2006 04:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
If you get this error<br />
<br />
Fatal error: Unable to create Java Virtual Machine in<br />
<br />
it can be fixed by modifying your php.ini file, you will need to add in the path to the JRE's lib folder.<br />
<br />
My php.ini file (php4/Apache2):<br />
java.class.path= "e:\minerva\php\extensions\php_java.jar; c:\j2sdk1.4.2_08\jre\lib; C:\j2sdk1.4.2_08"<br />
java.home = "c:\j2sdk1.4.2_08\bin; c:\j2sdk1.4.2_08\jre\lib"<br />
java.library = "c:\j2sdk1.4.2_08\jre\bin\server\jvm.dll"<br />
java.library.path= "e:\minerva\PHP\extensions; c:\j2sdk1.4.2_08\jre\lib"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="58293""></a>
  <div class="note">
   <strong class="user">m mokhtar at gmail dot com</strong>
   <a href="#58293" class="date">30-Oct-2005 08:03</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Getting PHP JavaBridge to work with PHP5 on windows server:<br />
====================================<br />
1- Install Java J2EE 1.5 + JDK 1.4 (which includes application server/deploy tool/etc...)<br />
2- download pecl-5.0.5-Win32.zip and php-java-bridge_2.0.8.zip, which will include <br />
extra dll(s)<br />
&nbsp;&nbsp;&nbsp; - unpack pecl pkg to your extensions folder, in PHP5 its ext.<br />
&nbsp;&nbsp;&nbsp; - unpack java-Bridge to root php folder, in my case its simply C:\PHP<br />
&nbsp;&nbsp;&nbsp; Note: the java-Bridge inculdes new versions of certain files like php_java.dll<br />
&nbsp;&nbsp;&nbsp; so, it would be wise to rename your old files that came with PECL pkg for example<br />
&nbsp;&nbsp;&nbsp; file_old, to rollback at anytime.<br />
<br />
In order to deploy/test Java-Bridge .war onto your java application server follow these steps<br />
<br />
<a href="http://cvs.sourceforge.net/viewcvs.py/php-java-bridge/php-java-bridge/" rel="nofollow" target="_blank">http://cvs.sourceforge.net/viewcvs.py/php-java-bridge/php-java-bridge/</a><br />
INSTALL.WINDOWS?view=markup<br />
<br />
Note: move JavaBridge.jar to your extensions folder. and in test.php file that came <br />
with Java-Brdige package change line java_require("test/arrayToString.jar"); <br />
to java_require("tests.php4/arrayToString.jar");<br />
<br />
Add the following to your php.ini file and restart server:-<br />
java.classpath = "location of JavaBridge.jar file...i.e. to your PHP extensions folder\<br />
JavaBridge.jar,also any other extra java files that you'll be instanciating using your php script"<br />
java.java_home = "location of jdk\bin"<br />
java.libpath = "location of php_java.dll file...i.e. also to your PHP extensions folder"<br />
<br />
happy integration<br />
<br />
Cheers!!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="56369""></a>
  <div class="note">
   <strong class="user">stanley dot turnteen at gmail dot com</strong>
   <a href="#56369" class="date">31-Aug-2005 09:51</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The php-java-bridge from sourceforge works great - it's stable and fast. I'm using it with the Lucene full text indexing package (<a href="http://lucene.apache.org/java/docs/index.html" rel="nofollow" target="_blank">http://lucene.apache.org/java/docs/index.html</a>).</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="53184""></a>
  <div class="note">
   <strong class="user">beoran at gmail dot com</strong>
   <a href="#53184" class="date">25-May-2005 02:24</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The php-java-bridge mentioned below is indeed the way to go. It also works fine on a php 4.3.2 Linux web server. I think I can reccomend it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="52643""></a>
  <div class="note">
   
   <a href="#52643" class="date">08-May-2005 11:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
&lt;quote&gt; JVM runs fine the first time, then broke....&nbsp; &lt;/quote&gt;<br />
<br />
The php4 java extension is simply broken, don't use it.&nbsp; I am<br />
using the "PHP Java Bridge" for PHP5 with great success on WinNT:<br />
<br />
<a href="http://php-java-bridge.sourceforge.net" rel="nofollow" target="_blank">http://php-java-bridge.sourceforge.net</a></span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45255""></a>
  <div class="note">
   <strong class="user">jost2345 at yahoo dot de</strong>
   <a href="#45255" class="date">31-Aug-2004 02:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The PHP/Java bridge that has been posted some time ago is now available on sourceforge.net.&nbsp; It contains several bugfixes and is meant to be used as a replacement for the expermental PHP4 java bridge.<br />
<br />
&nbsp; <a href="http://sourceforge.net/projects/php-java-bridge/" rel="nofollow" target="_blank">http://sourceforge.net/projects/php-java-bridge/</a><br />
<br />
So please don't send me private e-mails anymore to obtain the sourcecode for the bridge.<br />
<br />
PHP/5 users may want to wait for the official PHP/Java bridge, which I expect to appear in a few years when java contains the appropriate hooks.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="45120""></a>
  <div class="note">
   <strong class="user">okapi at yahoo dot com</strong>
   <a href="#45120" class="date">26-Aug-2004 07:05</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As mentioned prior, Zend is working to be the first of an official servlet / scripting integration. I've been testing their reference implementation that's available on the JSR 223 site and it's working pretty good. Some minor issues around the edges, but been working with one of their developers to fix it. So far, pretty good.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40421""></a>
  <div class="note">
   <strong class="user">a9702466 at gmx dot net</strong>
   <a href="#40421" class="date">03-Mar-2004 06:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The Java Servlet SAPI works fine in a non-threading<br />
environment. If you want to use threads (normal case) you<br />
have to do several things to get it work:<br />
<br />
- get the patched files from<br />
&nbsp; <a href="http://www.pelikan-it.com/download.html" rel="nofollow" target="_blank">http://www.pelikan-it.com/download.html</a><br />
<br />
- replace the sapi/servlet/servlet.java and<br />
&nbsp; sapi/servlet/servlet.c file by the patched files<br />
<br />
- build the php like this<br />
&nbsp; ./configure --with-tsrm-pthreads \<br />
&nbsp;&nbsp;&nbsp; --with-servlet=/opt/resin --with-java=/opt/java \<br />
&nbsp;&nbsp;&nbsp; --prefix=/opt/php-4.3.4<br />
<br />
The primary problem is, that the request and response <br />
objects are stored as global instance-variables of the servlet <br />
which will be overwritten by other threads invoking the <br />
servlet (remember: just on servlet-object for all threads!) and <br />
all crashes. I changed the servlet to pass the request and <br />
response objects to the java- and native-methods (where <br />
required) to prevent the problem.<br />
<br />
Once you have solved this problem it works fine and needs <br />
unlike the java-extension just one jvm.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="40333""></a>
  <div class="note">
   <strong class="user">norman at junkonline dot com</strong>
   <a href="#40333" class="date">29-Feb-2004 01:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This works fine on MacOS X (Panther). The one trick is, you need to symlink "java.so" in your php extensions directory to "libphp_java.jnilib".<br />
<br />
Here's the relevant section from my php.ini file for anyone who needs it:<br />
<br />
[Java]<br />
java.class.path = "/usr/local/lib/java/php_java.jar"<br />
java.home = "/System/Library/Frameworks/JavaVM.framework/Versions/1.4.2/Home"<br />
java.library.path = "/usr/local/lib/php/extensions/no-debug-non-zts-20020429"<br />
extension=java.so<br />
<br />
You may have decided to put php_java.jar somewhere other than where I did.<br />
<br />
For some reason, setting java.library in the ini file causes this to fail, so I left it out and things worked flawlessly without it. YMMV.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="39567""></a>
  <div class="note">
   <strong class="user">georgedaswani at hotmail dot com</strong>
   <a href="#39567" class="date">02-Feb-2004 11:39</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I was able to compile java support in no problem and got it working sun jdk 1.4.2_03 (linux)<br />
<br />
make sure JAVA_HOME is set<br />
<br />
make sure LD_LIBRARY_PATH has<br />
<br />
$JAVA_HOME/jre/lib/i386<br />
<br />
on php.ini<br />
<br />
[Java]<br />
java.home = "/opt/j2sdk1.4.2_03"<br />
java.class.path = "/opt/php/lib/php/php_java.jar:/opt/php/java-packages"<br />
java.library.path = "/opt/php/lib/php/extensions/no-debug-zts-20020429"<br />
extension_dir= "/opt/php/lib/php/extensions/no-debug-zts-20020429"<br />
extension = java.so<br />
<br />
It's import to note that APACHE 2 needs to be compiled using "PREFORK" instead of a thread based else the java stuff will work for a minute, then stop working with the following error<br />
<br />
"PHP Fatal error:&nbsp; Unable to create Java Virtual Machine"<br />
<br />
Seems that the extension is not thread safe.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="32628""></a>
  <div class="note">
   <strong class="user">golob a with tail gimb little spot org</strong>
   <a href="#32628" class="date">03-Jun-2003 03:57</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This module allows PHP to interact with some interesting pieces of software - for one, it allows PHP to convert XML FO files into PDF/PS/... with the use of Apache FOP processor.<br />
<br />
Here's an example:<br />
&lt;?<br />
$basedir = new Java("java.io.File", ".");<br />
$outdir = new Java("java.io.File", "out");<br />
$outdir-&gt;mkdirs();<br />
<br />
$fofile = new Java("java.io.File", $basedir, "xml/fo/helloworld.fo");<br />
$pdffile = new Java("java.io.File", $outdir, "ResultFO2PDF.pdf");<br />
<br />
echo "Input: ".$fofile-&gt;toString()."\n";<br />
echo "Output: ".$pdffile-&gt;toString()."\n";<br />
<br />
$driver = new Java("org.apache.fop.apps.Driver");<br />
$logger = new Java("org.apache.avalon.framework.logger.ConsoleLogger");<br />
$driver-&gt;setLogger($logger);<br />
$driver-&gt;setRenderer($driver-&gt;RENDER_PDF);<br />
$out = new Java("java.io.FileOutputStream", $pdffile);<br />
$driver-&gt;setOutputStream($out);<br />
$in = new Java("java.io.FileInputStream", $fofile);<br />
$driver-&gt;setInputSource(new Java("org.xml.sax.InputSource", $in));<br />
$driver-&gt;run();<br />
$in-&gt;close();<br />
$out-&gt;close();<br />
?&gt;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28430""></a>
  <div class="note">
   <strong class="user">raggha at hotmail dot com</strong>
   <a href="#28430" class="date">13-Jan-2003 11:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Just wanted to make available the solution I found posted on <br />
<br />
&nbsp;&nbsp; <a href="http://bugs.php.net/bug.php?id=18600" rel="nofollow" target="_blank">http://bugs.php.net/bug.php?id=18600</a><br />
<br />
to solve the typical "Fatal error: Unable to Create Java Virtual Machine" trouble for Win32 users (thanks buddy):<br />
<br />
[12 Dec 2002 9:19am] Alberto.Sarini@libero.it <br />
Hi there,<br />
<br />
I'm confirming CÈdric's knowledge - java is running correctly from within PHP on Apache only when PHP is running as a CGI and not as a SAPI module. When running PHP as Apache SAPI Module after the restart Apache only fist access to php page using java is running OK, all next reloads of this page caused "Fatal error: Unable to create Java Virtual Machine<br />
in ..." I think this could be still not solved bug.<br />
<br />
Thanks<br />
Alberto<br />
<br />
BTW I'm running on:<br />
OS:Win2000 Server SP2<br />
Apache:1.3.27<br />
PHP Version 4.3.0-dev (Build Date&nbsp; Dec 12 2002 10:14:28)<br />
Java version=1.4.1_01 <br />
Java vendor=Sun Microsystems Inc.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="28127""></a>
  <div class="note">
   <strong class="user">neil at lowden dot net</strong>
   <a href="#28127" class="date">03-Jan-2003 10:41</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
** Success with W2K Server, PHP 4.3.0 as IIS5 SAPI module and J2SDK1.4.1_01 **<br />
<br />
After a bunch of annoyingly spurious "access violation" and "Unable to create Java Virtual Machine" errors<br />
I changed the php.ini setting for java.library from:<br />
<br />
"C:\j2sdk1.4.1_01\jre\bin\client\jvm.dll"<br />
<br />
to:<br />
<br />
"C:\j2sdk1.4.1_01\jre\bin\server\jvm.dll"<br />
<br />
All above examples now work perfectly incuding my own classes and those at <br />
<a href="http://www.onlamp.com/pub/a/php/2001/06/14/php_jav.html (thanks to emilebosch above on 18-Oct-2001 07:19" rel="nofollow" target="_blank">http://www.onlamp.com/pub/a/php/2001/06/14/php_jav.html (thanks to emilebosch above on 18-Oct-2001 07:19</a>).<br />
&nbsp;<br />
I'd really like to know the difference between 'client' and 'server' JVM versions if anyone can illuminate us.<br />
<br />
Notes:<br />
<br />
1. Manual install of PHP 4.3.0 to C:\php with the following relevant extracts from php.ini:<br />
<br />
extension=php_java.dll<br />
[Java]<br />
java.class.path = "C:\php\extensions\php_java.jar;C:\java\packages\"<br />
java.home = "C:\j2sdk1.4.1_01\bin"<br />
java.library = "C:\j2sdk1.4.1_01\jre\bin\server\jvm.dll" <br />
java.library.path = "C:\php\extensions"<br />
<br />
2. Default installation of latest Java SDK from Sun<br />
<br />
3. Win2K Server SP2 with all(?) patches<br />
<br />
4. My own classes are placed in C:\java\packages\<br />
<br />
Hope this helps some people.<br />
<br />
Regards<br />
<br />
-Neil</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="27794""></a>
  <div class="note">
   <strong class="user">jason at buildernaut dot com</strong>
   <a href="#27794" class="date">19-Dec-2002 03:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
ON Linux / Apache --with-apxs <br />
Page cannot be displayed - Apache crapping out.<br />
I spent a great deal of time getting this to work - but hey - I'm a newbie.&nbsp; <br />
One thing I did find was that I experienced an error I have not seen on this board or anywhere else in searches.&nbsp; <br />
If you try to run a test java .php page and you get a page cannot be displayed error, try adding the follwing to your apache startup script<br />
<br />
export LD_LIBRARY_PATH=/usr/lib/j2sdk1.3/jre/lib/i386/server<br />
:/usr/lib/j2sdk1.3/jre/lib/i386 <br />
<br />
And of course change to paths that mean something to you.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="25620""></a>
  <div class="note">
   <strong class="user">pablo-at-godel.com.ar</strong>
   <a href="#25620" class="date">30-Sep-2002 11:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For those using Redhat 7.x and Sun JDK, you have to set in LD_LIBRARY_PATH the directory where libjava.so .<br />
<br />
In my case it looks like:<br />
LD_LIBRARY_PATH=:/usr/local/j2sdk1.4.0_02/jre/lib/i386:\<br />
/usr/local/j2sdk1.4.0_02/jre/lib/i386/server<br />
<br />
This solved my problem with libjava.so not finding libverify.so<br />
<br />
Hopes this helps to save some time for others.. I spent a lot of time before figuring this one out...</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="24794""></a>
  <div class="note">
   <strong class="user">alexg at syspro dot co dot za</strong>
   <a href="#24794" class="date">28-Aug-2002 08:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
According to an Article posted at:<br />
<br />
<a href="http://www.zend.com/zend/week/week91.php#Heading7" rel="nofollow" target="_blank">http://www.zend.com/zend/week/week91.php#Heading7</a><br />
<br />
there might be some problems with getting php and jdk-1.4 to work toghether.. I`ve tried (php-4.2.2 and jdk-4.1) with no success....</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="22222""></a>
  <div class="note">
   <strong class="user">amtd at 163 dot net</strong>
   <a href="#22222" class="date">11-Jun-2002 12:45</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
--php.ini-------------------------<br />
<br />
[Java]<br />
java.class.path = .\extensions\php_java.jar<br />
java.home = c:\java<br />
java.library = C:\java\jre\bin\server\jvm.dll <br />
java.library.path = c:\apache\php\extensions<br />
<br />
--system---------------------------<br />
<br />
Windows 2000 P + Apache + SUN jdk 1.4.0-beta3<br />
<br />
--app path---------------------------<br />
<br />
java(C:\java)<br />
Apache(C:\apache)<br />
PHP(C:\apache\php)<br />
<br />
-----------------------------<br />
<br />
success!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="21892""></a>
  <div class="note">
   <strong class="user">gturner at newedgenetworks dot com</strong>
   <a href="#21892" class="date">30-May-2002 10:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello!&nbsp; I have two tips about getting PHP Java to work, hopefully google will pick this up...<br />
<br />
After you've followed the instructions (building PHP with Java enabled and hacking php.ini) and you get a message like:<br />
<br />
&nbsp; Fatal error: Cannot instantiate non-existent class: java in (file) on line (line)<br />
<br />
That means PHP doesn't know what the 'Java' function is.&nbsp; You can confirm that the Java extension isn't loaded by looking at 'phpinfo' and verifying that there is no section titled Java.&nbsp;&nbsp; To fix this you need to edit php.ini and set the 'extensions_dir' and an 'extension' appropriately.&nbsp; On our system it was 'extension_dir = /opt/php/lib/php/extensions/no-debug-non-zts-20020429' and an 'extension = java.so'.&nbsp; All the documentation I found said the extension library should be called 'php_java.so', but our build produced 'java.so', I have no idea why, YMMV.<br />
<br />
The next error message I ran into was:<br />
<br />
&nbsp; Fatal error: java.lang.UnsatisfiedLinkError: no php_java in java.library.path in (file) on line (line)<br />
<br />
Yay! this confirms that the JVM is indeed loading (UnsatisfiedLinkError is totally on the Java side), so relax, you're almost done!&nbsp; What's happening is that the Java class 'net.php.reflect' (a class in php_java.jar that is built by PHP) is trying to execute 'System.loadLibrary("php_java")' and the JVM is unable to find the file named 'libphp_java.so' (or maybe 'php_java.dll' on Windows?).&nbsp; If you ever heard of LD_LIBRARY_PATH, java.library.path is the same thing.&nbsp; The solution has two parts: First making sure the php.ini has a 'java.library.path' (in the '[java]' section) that's pointed at the same directory that 'extension_dir', specifically the directory containing the file 'java.so' (or maybe 'php_java.so' like everyone else).&nbsp; Second, this part is bad IMHO, making a symbolic link from the ''java.so' file to 'libphp_java.so' so that Java's System.loadLibrary method can find what it's looking for (apparently Java prefixes the filename it looks for with "lib").&nbsp; To make this symbolic link do 'cd' into the extensions directory and run 'ln -s java.so libphp_java.so'.<br />
<br />
Hope somebody finds this useful!</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19565""></a>
  <div class="note">
   <strong class="user">venuti at sissa dot it</strong>
   <a href="#19565" class="date">04-Mar-2002 03:23</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Invoking java servlet from PHP.<br />
This might look silly, but I found many people on the net asking how to invoke a java servlet from php. Read these notes:<br />
<a href="http://archives.neohapsis.com/archives/php/2001-03/0040.html" rel="nofollow" target="_blank">http://archives.neohapsis.com/archives/php/2001-03/0040.html</a><br />
(look for the message about servlets).<br />
Basically, it's like calling any other URL, so you can use the "file" function. Read also the online documentation about "file".<br />
This solution is much easier than many others I have found around the net.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="19554""></a>
  <div class="note">
   <strong class="user">not_contactable at yahoo dot com</strong>
   <a href="#19554" class="date">03-Mar-2002 08:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Installation of PHP's Java module under Win32(Apache/IIS).<br />
<br />
I install php in "C:\php", firstly I install with "php-4.1.1-installer.exe"(from <a href="http://www.php.net/downloads.php" rel="nofollow" target="_blank">http://www.php.net/downloads.php</a>), and then unzip the "php-4.1.1-Win32.zip"(from <a href="http://www.php.net/downloads.php" rel="nofollow" target="_blank">http://www.php.net/downloads.php</a>) to the C:\PHP.(because all the extension dll files are from this zip file, including php_java.dll)<br />
<br />
I also install my Java v1.3 in "C:\jdk1.3"<br />
<br />
And My Program require JDBC connection of the Java Program, so I did install also the JDBC driver for MySQL in "c:\JDBC4mysql\mm.mysql.jdbc-1.2c"(from <a href="http://www.mysql.com/Downloads/Contrib/mm.mysql.jdbc-1.2c.tar.gz" rel="nofollow" target="_blank">http://www.mysql.com/Downloads/Contrib/mm.mysql.jdbc-1.2c.tar.gz</a>).<br />
<br />
About the PHP.ini:<br />
1&gt; You need to set the extension_dir="c:\php\extensions"(directory of all the extensions dll files)<br />
<br />
2&gt; Add those lines at the end of php.ini<br />
======<br />
[Java]<br />
extension=php_java.dll<br />
java.class.path="c:\php\java\php_java.jar;c:\wwwroot; c:\JDBC4mysql\mm.mysql.jdbc-1.2c"<br />
java.home="c:\jdk1.3\bin"<br />
java.library="c:\jdk1.3\jre\bin\hotspot\jvm.dll"<br />
java.library.path="c:\php\extensions"<br />
======<br />
<br />
* extension: it is the DLL you wish to load in, here we want to load the java module.<br />
* java.class.path: By default, you need to include the "C:\php\java\php_java.jar" for Java &amp; PHP connection, AND those directories that contain the Java class files you wish to run. Here, my program Java classes are in "c:\wwwroot\", and ALSO the JDBC driver classes in "c:\JDBC4mysql\mm.mysql.jdbc-1.2c", because my Program need to import it.<br />
* java.home: the bin directory (directory of java.exe)<br />
* java.library: jvm.dll is supposed to be under JDK's jre\bin\hotspot, but sometimes it doesn't, try to Find(Start-&gt;Find) jvm.dll where it is.<br />
* java.library.path: which is the same as the extensions directory.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18634""></a>
  <div class="note">
   <strong class="user">ywliu at _spam_me_not_ dot hotmail dot com</strong>
   <a href="#18634" class="date">30-Jan-2002 08:13</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Hello,<br />
<br />
There are two more useful links on phpbuilder.com in the PHP&amp;JAVA discussion. They are related to the PHP and Java integration on Unix/Linux.<br />
<br />
My settings (see above) is like that in the 1st link.<br />
<br />
<a href="http://www.phpbuilder.com/annotate/message.php3?id=1009175" rel="nofollow" target="_blank">http://www.phpbuilder.com/annotate/message.php3?id=1009175</a><br />
<a href="http://www.phpbuilder.com/annotate/message.php3?id=1008864" rel="nofollow" target="_blank">http://www.phpbuilder.com/annotate/message.php3?id=1008864</a><br />
<br />
Moreover, I have the path to java in my PATH env. variable, so MAYBE its why my libjava.so works.&nbsp; I couldn't find the origin of libjava.so, but now looks there are libjava.so and libjvm.so two options.<br />
<br />
I built my php from the source package, and libphp_java.so does exist, at least on my RH6.2 with Apache 1.3.19 and Sun JDK 1.3.1.&nbsp; libphp_java.so should be found under php-4.1.1/ext/java/.libs . <br />
<br />
If you want to find some more discussion about PHP &amp; Java integration, you may try&nbsp; www.phpbuilder.com and look for php&amp;java. It's a good place to start with.<br />
<br />
Yen-Wei Liu</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="18482""></a>
  <div class="note">
   <strong class="user">fernando at lozano dot eti dot br</strong>
   <a href="#18482" class="date">25-Jan-2002 12:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I managed to get it working with IBM Java SDK 1.3.0 but it was not easy. Here's my php.init:<br />
<br />
[Java]<br />
extension = libphp_java.so<br />
java.library.path = /usr/local/lib/php/extensions/no-debug-non-zts-20010901<br />
java.class.path = /usr/local/lib/php/php_java.jar<br />
java.home = /opt/IBMJava2-13<br />
java.library = /opt/IBMJava2-13/jre/bin/classic/libjvm.so<br />
<br />
Besides, I had to edit the httpd init.d script to include the statement:<br />
<br />
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/IBMJava2-13/jre/bin:\<br />
/opt/IBMJava2-13/jre/bin/classic<br />
<br />
I guess java.library.path should serve for this, but it didn't worked.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="17792""></a>
  <div class="note">
   <strong class="user">Magnus_Naeslund at nowhere dot to dot be dot found</strong>
   <a href="#17792" class="date">25-Dec-2001 06:52</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
An _very_ important thing here is to remember that the apache must be linked with pthreads (do "LDFLAGS=-lpthread ./configure &lt;options&gt;", or like me, add it the the .spec file).<br />
You can check if your apache is pthreaded with "ldd $(which httpd)" if you like.<br />
I experianced a lot of hangs/errors due to this problem, it's a shame that it's not in the docs / README (i didn't find it).<br />
<br />
Magnus</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="java.examples-basic.html">Âü∫Êú¨ÁöÑ„Å™‰ΩøÁî®Ê≥ï</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.java-last-exception-clear.html">java_last_exception_clear</a></div>
 <div class="up"><a href="book.java.html">Java</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
